(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function He(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xl(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},An={duration:.5,overwrite:!1,delay:0},$o,Mt,ut,ke=1e8,Ut=1/ke,Qs=Math.PI*2,Zc=Qs/4,Jc=0,wl=Math.sqrt,td=Math.cos,ed=Math.sin,bt=function(t){return typeof t=="string"},ht=function(t){return typeof t=="function"},Qe=function(t){return typeof t=="number"},Go=function(t){return typeof t>"u"},Ue=function(t){return typeof t=="object"},Ht=function(t){return t!==!1},Ho=function(){return typeof window<"u"},wr=function(t){return ht(t)||bt(t)},Fl=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Bt=Array.isArray,Zs=/(?:-?\.?\d|\.)+/gi,kl=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,cn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ns=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ul=/[+-]=-?[.\d]+/,Bl=/[^,'"\[\]\s]+/gi,id=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,dt,Re,Js,Yo,te={},Kr={},$l,Gl=function(t){return(Kr=Pn(t,te))&&Xt},Vo=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},dr=function(t,e){return!e&&console.warn(t)},Hl=function(t,e){return t&&(te[t]=e)&&Kr&&(Kr[t]=e)||te},fr=function(){return 0},nd={suppressEvents:!0,isStart:!0,kill:!1},Hr={suppressEvents:!0,kill:!1},rd={suppressEvents:!0},zo={},fi=[],to={},Yl,jt={},Rs={},wa=30,Yr=[],Xo="",Wo=function(t){var e=t[0],i,n;if(Ue(e)||ht(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=Yr.length;n--&&!Yr[n].targetTest(e););i=Yr[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new hu(t[n],i)))||t.splice(n,1);return t},ki=function(t){return t._gsap||Wo(de(t))[0]._gsap},Vl=function(t,e,i){return(i=t[e])&&ht(i)?t[e]():Go(i)&&t.getAttribute&&t.getAttribute(e)||i},Yt=function(t,e){return(t=t.split(",")).forEach(e)||t},gt=function(t){return Math.round(t*1e5)/1e5||0},Dt=function(t){return Math.round(t*1e7)/1e7||0},gn=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},sd=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},Qr=function(){var t=fi.length,e=fi.slice(0),i,n;for(to={},fi.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},jo=function(t){return!!(t._initted||t._startAt||t.add)},zl=function(t,e,i,n){fi.length&&!Mt&&Qr(),t.render(e,i,!!(Mt&&e<0&&jo(t))),fi.length&&!Mt&&Qr()},Xl=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Bl).length<2?e:bt(t)?t.trim():t},Wl=function(t){return t},ee=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},od=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Pn=function(t,e){for(var i in e)t[i]=e[i];return t},Fa=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Ue(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},Zr=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},tr=function(t){var e=t.parent||dt,i=t.keyframes?od(Bt(t.keyframes)):ee;if(Ht(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},ad=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},jl=function(t,e,i,n,s){var o=t[n],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},_s=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},gi=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ui=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},ld=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},eo=function(t,e,i,n){return t._startAt&&(Mt?t._startAt.revert(Hr):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},ud=function r(t){return!t||t._ts&&r(t.parent)},ka=function(t){return t._repeat?Cn(t._tTime,t=t.duration()+t._rDelay)*t:0},Cn=function(t,e){var i=Math.floor(t=Dt(t/e));return t&&i===t?i-1:i},Jr=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},gs=function(t){return t._end=Dt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ut)||0))},ms=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Dt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),gs(t),i._dirty||Ui(i,t)),t},ql=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=Jr(t.rawTime(),e),(!e._dur||Cr(0,e.totalDuration(),i)-e._tTime>Ut)&&e.render(i,!0)),Ui(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},xe=function(t,e,i,n){return e.parent&&gi(e),e._start=Dt((Qe(i)?i:i||t!==dt?ue(t,i,e):t._time)+e._delay),e._end=Dt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),jl(t,e,"_first","_last",t._sort?"_start":0),io(e)||(t._recent=e),n||ql(t,e),t._ts<0&&ms(t,t._tTime),t},Kl=function(t,e){return(te.ScrollTrigger||Vo("scrollTrigger",e))&&te.ScrollTrigger.create(e,t)},Ql=function(t,e,i,n,s){if(Ko(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!Mt&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Yl!==Kt.frame)return fi.push(t),t._lazy=[s,n],1},cd=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},io=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},dd=function(t,e,i,n){var s=t.ratio,o=e<0||!e&&(!t._start&&cd(t)&&!(!t._initted&&io(t))||(t._ts<0||t._dp._ts<0)&&!io(t))?0:1,a=t._rDelay,l=0,u,f,d;if(a&&t._repeat&&(l=Cr(0,t._tDur,e),f=Cn(l,a),t._yoyo&&f&1&&(o=1-o),f!==Cn(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||Mt||n||t._zTime===Ut||!e&&t._zTime){if(!t._initted&&Ql(t,e,n,i,l))return;for(d=t._zTime,t._zTime=e||(i?Ut:0),i||(i=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,u=t._pt;u;)u.r(o,u.d),u=u._next;e<0&&eo(t,e,i,!0),t._onUpdate&&!i&&Zt(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Zt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&gi(t,1),!i&&!Mt&&(Zt(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},fd=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},In=function(t,e,i,n){var s=t._repeat,o=Dt(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Dt(o*(s+1)+t._rDelay*s):o,a>0&&!n&&ms(t,t._tTime=t._tDur*a),t.parent&&gs(t),i||Ui(t.parent,t),t},Ua=function(t){return t instanceof $t?Ui(t):In(t,t._dur)},hd={_start:0,endTime:fr,totalDuration:fr},ue=function r(t,e,i){var n=t.labels,s=t._recent||hd,o=t.duration()>=ke?s.endTime(!1):t._dur,a,l,u;return bt(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),u=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(u?(a<0?s:i).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),u&&i&&(l=l/100*(Bt(i)?i[0]:i).totalDuration()),a>1?r(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},er=function(t,e,i){var n=Qe(e[1]),s=(n?2:1)+(t<2?0:1),o=e[s],a,l;if(n&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ht(l.vars.inherit)&&l.parent;o.immediateRender=Ht(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new St(e[0],o,e[s+1])},Si=function(t,e){return t||t===0?e(t):e},Cr=function(t,e,i){return i<t?t:i>e?e:i},kt=function(t,e){return!bt(t)||!(e=id.exec(t))?"":e[1]},pd=function(t,e,i){return Si(i,function(n){return Cr(t,e,n)})},no=[].slice,Zl=function(t,e){return t&&Ue(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ue(t[0]))&&!t.nodeType&&t!==Re},_d=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return bt(n)&&!e||Zl(n,1)?(s=i).push.apply(s,de(n)):i.push(n)})||i},de=function(t,e,i){return ut&&!e&&ut.selector?ut.selector(t):bt(t)&&!i&&(Js||!vn())?no.call((e||Yo).querySelectorAll(t),0):Bt(t)?_d(t,i):Zl(t)?no.call(t,0):t?[t]:[]},ro=function(t){return t=de(t)[0]||dr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return de(e,i.querySelectorAll?i:i===t?dr("Invalid scope")||Yo.createElement("div"):t)}},Jl=function(t){return t.sort(function(){return .5-Math.random()})},tu=function(t){if(ht(t))return t;var e=Ue(t)?t:{each:t},i=Bi(e.ease),n=e.from||0,s=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,u=e.axis,f=n,d=n;return bt(n)?f=d={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(f=n[0],d=n[1]),function(h,c,_){var p=(_||e).length,g=o[p],m,E,T,y,D,I,v,C,A;if(!g){if(A=e.grid==="auto"?0:(e.grid||[1,ke])[1],!A){for(v=-1e8;v<(v=_[A++].getBoundingClientRect().left)&&A<p;);A<p&&A--}for(g=o[p]=[],m=l?Math.min(A,p)*f-.5:n%A,E=A===ke?0:l?p*d/A-.5:n/A|0,v=0,C=ke,I=0;I<p;I++)T=I%A-m,y=E-(I/A|0),g[I]=D=u?Math.abs(u==="y"?y:T):wl(T*T+y*y),D>v&&(v=D),D<C&&(C=D);n==="random"&&Jl(g),g.max=v-C,g.min=C,g.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(A>p?p-1:u?u==="y"?p/A:A:Math.max(A,p/A))||0)*(n==="edges"?-1:1),g.b=p<0?s-p:s,g.u=kt(e.amount||e.each)||0,i=i&&p<0?cu(i):i}return p=(g[h]-g.min)/g.max||0,Dt(g.b+(i?i(p):p)*g.v)+g.u}},so=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=Dt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(Qe(i)?0:kt(i))}},eu=function(t,e){var i=Bt(t),n,s;return!i&&Ue(t)&&(n=i=t.radius||ke,t.values?(t=de(t.values),(s=!Qe(t[0]))&&(n*=n)):t=so(t.increment)),Si(e,i?ht(t)?function(o){return s=t(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=ke,f=0,d=t.length,h,c;d--;)s?(h=t[d].x-a,c=t[d].y-l,h=h*h+c*c):h=Math.abs(t[d]-a),h<u&&(u=h,f=d);return f=!n||u<=n?t[f]:o,s||f===o||Qe(o)?f:f+kt(o)}:so(t))},iu=function(t,e,i,n){return Si(Bt(t)?!e:i===!0?!!(i=0):!n,function(){return Bt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},gd=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,o){return o(s)},n)}},md=function(t,e){return function(i){return t(parseFloat(i))+(e||kt(i))}},Ed=function(t,e,i){return ru(t,e,0,1,i)},nu=function(t,e,i){return Si(i,function(n){return t[~~e(n)]})},Sd=function r(t,e,i){var n=e-t;return Bt(t)?nu(t,r(0,t.length),e):Si(i,function(s){return(n+(s-t)%n)%n+t})},Dd=function r(t,e,i){var n=e-t,s=n*2;return Bt(t)?nu(t,r(0,t.length-1),e):Si(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>n?s-o:o)})},hr=function(t){for(var e=0,i="",n,s,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",s=t.substr(n+7,o-n-7).match(a?Bl:Zs),i+=t.substr(e,n-e)+iu(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},ru=function(t,e,i,n,s){var o=e-t,a=n-i;return Si(s,function(l){return i+((l-t)/o*a||0)})},Td=function r(t,e,i,n){var s=isNaN(t+e)?0:function(c){return(1-c)*t+c*e};if(!s){var o=bt(t),a={},l,u,f,d,h;if(i===!0&&(n=1)&&(i=null),o)t={p:t},e={p:e};else if(Bt(t)&&!Bt(e)){for(f=[],d=t.length,h=d-2,u=1;u<d;u++)f.push(r(t[u-1],t[u]));d--,s=function(_){_*=d;var p=Math.min(h,~~_);return f[p](_-p)},i=e}else n||(t=Pn(Bt(t)?[]:{},t));if(!f){for(l in e)qo.call(a,t,l,"get",e[l]);s=function(_){return Jo(_,a)||(o?t.p:t)}}}return Si(i,s)},Ba=function(t,e,i){var n=t.labels,s=ke,o,a,l;for(o in n)a=n[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Zt=function(t,e,i){var n=t.vars,s=n[e],o=ut,a=t._ctx,l,u,f;if(s)return l=n[e+"Params"],u=n.callbackScope||t,i&&fi.length&&Qr(),a&&(ut=a),f=l?s.apply(u,l):s.call(u),ut=o,f},Xn=function(t){return gi(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Mt),t.progress()<1&&Zt(t,"onInterrupt"),t},dn,su=[],ou=function(t){if(t)if(t=!t.name&&t.default||t,Ho()||t.headless){var e=t.name,i=ht(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:fr,render:Jo,add:qo,kill:kd,modifier:Fd,rawVars:0},o={targetTest:0,get:0,getSetter:Zo,aliases:{},register:0};if(vn(),t!==n){if(jt[e])return;ee(n,ee(Zr(t,s),o)),Pn(n.prototype,Pn(s,Zr(t,o))),jt[n.prop=e]=n,t.targetTest&&(Yr.push(n),zo[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Hl(e,n),t.register&&t.register(Xt,n,Vt)}else su.push(t)},rt=255,Wn={aqua:[0,rt,rt],lime:[0,rt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,rt],navy:[0,0,128],white:[rt,rt,rt],olive:[128,128,0],yellow:[rt,rt,0],orange:[rt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[rt,0,0],pink:[rt,192,203],cyan:[0,rt,rt],transparent:[rt,rt,rt,0]},Os=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*rt+.5|0},au=function(t,e,i){var n=t?Qe(t)?[t>>16,t>>8&rt,t&rt]:0:Wn.black,s,o,a,l,u,f,d,h,c,_;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Wn[t])n=Wn[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&rt,n&rt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&rt,t&rt]}else if(t.substr(0,3)==="hsl"){if(n=_=t.match(Zs),!e)l=+n[0]%360/360,u=+n[1]/100,f=+n[2]/100,o=f<=.5?f*(u+1):f+u-f*u,s=f*2-o,n.length>3&&(n[3]*=1),n[0]=Os(l+1/3,s,o),n[1]=Os(l,s,o),n[2]=Os(l-1/3,s,o);else if(~t.indexOf("="))return n=t.match(kl),i&&n.length<4&&(n[3]=1),n}else n=t.match(Zs)||Wn.transparent;n=n.map(Number)}return e&&!_&&(s=n[0]/rt,o=n[1]/rt,a=n[2]/rt,d=Math.max(s,o,a),h=Math.min(s,o,a),f=(d+h)/2,d===h?l=u=0:(c=d-h,u=f>.5?c/(2-d-h):c/(d+h),l=d===s?(o-a)/c+(o<a?6:0):d===o?(a-s)/c+2:(s-o)/c+4,l*=60),n[0]=~~(l+.5),n[1]=~~(u*100+.5),n[2]=~~(f*100+.5)),i&&n.length<4&&(n[3]=1),n},lu=function(t){var e=[],i=[],n=-1;return t.split(hi).forEach(function(s){var o=s.match(cn)||[];e.push.apply(e,o),i.push(n+=o.length+1)}),e.c=i,e},$a=function(t,e,i){var n="",s=(t+n).match(hi),o=e?"hsla(":"rgba(",a=0,l,u,f,d;if(!s)return t;if(s=s.map(function(h){return(h=au(h,e,1))&&o+(e?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(f=lu(t),l=i.c,l.join(n)!==f.c.join(n)))for(u=t.replace(hi,"1").split(cn),d=u.length-1;a<d;a++)n+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(f.length?f:s.length?s:i).shift());if(!u)for(u=t.split(hi),d=u.length-1;a<d;a++)n+=u[a]+s[a];return n+u[d]},hi=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Wn)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),yd=/hsl[a]?\(/,uu=function(t){var e=t.join(" "),i;if(hi.lastIndex=0,hi.test(e))return i=yd.test(e),t[1]=$a(t[1],i),t[0]=$a(t[0],i,lu(t[1])),!0},pr,Kt=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,u,f,d,h,c,_=function p(g){var m=r()-n,E=g===!0,T,y,D,I;if((m>t||m<0)&&(i+=m-e),n+=m,D=n-i,T=D-o,(T>0||E)&&(I=++d.frame,h=D-d.time*1e3,d.time=D=D/1e3,o+=T+(T>=s?4:s-T),y=1),E||(l=u(p)),y)for(c=0;c<a.length;c++)a[c](D,h,I,g)};return d={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){$l&&(!Js&&Ho()&&(Re=Js=window,Yo=Re.document||{},te.gsap=Xt,(Re.gsapVersions||(Re.gsapVersions=[])).push(Xt.version),Gl(Kr||Re.GreenSockGlobals||!Re.gsap&&Re||{}),su.forEach(ou)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),u=f||function(g){return setTimeout(g,o-d.time*1e3+1|0)},pr=1,_(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(l),pr=0,u=fr},lagSmoothing:function(g,m){t=g||1/0,e=Math.min(m||33,t)},fps:function(g){s=1e3/(g||240),o=d.time*1e3+s},add:function(g,m,E){var T=m?function(y,D,I,v){g(y,D,I,v),d.remove(T)}:g;return d.remove(g),a[E?"unshift":"push"](T),vn(),T},remove:function(g,m){~(m=a.indexOf(g))&&a.splice(m,1)&&c>=m&&c--},_listeners:a},d}(),vn=function(){return!pr&&Kt.wake()},W={},Ad=/^[\d.\-M][\d.\-,\s]/,Pd=/["']/g,Cd=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,u;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),e[n]=isNaN(u)?u.replace(Pd,"").trim():+u,n=l.substr(a+1).trim();return e},Id=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},vd=function(t){var e=(t+"").split("("),i=W[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Cd(e[1])]:Id(t).split(",").map(Xl)):W._CE&&Ad.test(t)?W._CE("",t):i},cu=function(t){return function(e){return 1-t(1-e)}},du=function r(t,e){for(var i=t._first,n;i;)i instanceof $t?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},Bi=function(t,e){return t&&(ht(t)?t:W[t]||vd(t))||e},qi=function(t,e,i,n){i===void 0&&(i=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},o;return Yt(t,function(a){W[a]=te[a]=s,W[o=a.toLowerCase()]=i;for(var l in s)W[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=W[a+"."+l]=s[l]}),s},fu=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ms=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/Qs*(Math.asin(1/n)||0),a=function(f){return f===1?1:n*Math.pow(2,-10*f)*ed((f-o)*s)+1},l=t==="out"?a:t==="in"?function(u){return 1-a(1-u)}:fu(a);return s=Qs/s,l.config=function(u,f){return r(t,u,f)},l},xs=function r(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:fu(i);return n.config=function(s){return r(t,s)},n};Yt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;qi(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});W.Linear.easeNone=W.none=W.Linear.easeIn;qi("Elastic",Ms("in"),Ms("out"),Ms());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(a){return a<e?r*a*a:a<i?r*Math.pow(a-1.5/t,2)+.75:a<n?r*(a-=2.25/t)*a+.9375:r*Math.pow(a-2.625/t,2)+.984375};qi("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);qi("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});qi("Circ",function(r){return-(wl(1-r*r)-1)});qi("Sine",function(r){return r===1?1:-td(r*Zc)+1});qi("Back",xs("in"),xs("out"),xs());W.SteppedEase=W.steps=te.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,o=1-Ut;return function(a){return((n*Cr(0,o,a)|0)+s)*i}}};An.ease=W["quad.out"];Yt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return Xo+=r+","+r+"Params,"});var hu=function(t,e){this.id=Jc++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Vl,this.set=e?e.getSetter:Zo},_r=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,In(this,+e.duration,1,1),this.data=e.data,ut&&(this._ctx=ut,ut.data.push(this)),pr||Kt.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,In(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(vn(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(ms(this,i),!s._dp||s.parent||ql(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&xe(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Ut||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),zl(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ka(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ka(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Cn(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Jr(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Cr(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),gs(this),ld(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(vn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&xe(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Ht(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Jr(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=rd);var n=Mt;return Mt=i,jo(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Mt=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Ua(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Ua(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(ue(this,i),Ht(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Ht(n)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-Ut)},t.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},t.then=function(i){var n=this;return new Promise(function(s){var o=ht(i)?i:Wl,a=function(){var u=n.then;n.then=null,ht(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=u),s(o),n.then=u};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){Xn(this)},r}();ee(_r.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var $t=function(r){xl(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ht(i.sortChildren),dt&&xe(i.parent||dt,He(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Kl(He(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,o){return er(0,arguments,this),this},e.from=function(n,s,o){return er(1,arguments,this),this},e.fromTo=function(n,s,o,a){return er(2,arguments,this),this},e.set=function(n,s,o){return s.duration=0,s.parent=this,tr(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new St(n,s,ue(this,o),1),this},e.call=function(n,s,o){return xe(this,St.delayedCall(0,n,s),o)},e.staggerTo=function(n,s,o,a,l,u,f){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=f,o.parent=this,new St(n,o,ue(this,l)),this},e.staggerFrom=function(n,s,o,a,l,u,f){return o.runBackwards=1,tr(o).immediateRender=Ht(o.immediateRender),this.staggerTo(n,s,o,a,l,u,f)},e.staggerFromTo=function(n,s,o,a,l,u,f,d){return a.startAt=o,tr(a).immediateRender=Ht(a.immediateRender),this.staggerTo(n,s,a,l,u,f,d)},e.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,f=n<=0?0:Dt(n),d=this._zTime<0!=n<0&&(this._initted||!u),h,c,_,p,g,m,E,T,y,D,I,v;if(this!==dt&&f>l&&n>=0&&(f=l),f!==this._tTime||o||d){if(a!==this._time&&u&&(f+=this._time-a,n+=this._time-a),h=f,y=this._start,T=this._ts,m=!T,d&&(u||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(I=this._yoyo,g=u+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,o);if(h=Dt(f%g),f===l?(p=this._repeat,h=u):(D=Dt(f/g),p=~~D,p&&p===D&&(h=u,p--),h>u&&(h=u)),D=Cn(this._tTime,g),!a&&this._tTime&&D!==p&&this._tTime-D*g-this._dur<=0&&(D=p),I&&p&1&&(h=u-h,v=1),p!==D&&!this._lock){var C=I&&D&1,A=C===(I&&p&1);if(p<D&&(C=!C),a=C?0:f%u?u:f,this._lock=1,this.render(a||(v?0:Dt(p*g)),s,!u)._lock=0,this._tTime=f,!s&&this.parent&&Zt(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,A&&(this._lock=2,a=C?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;du(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(E=fd(this,Dt(a),Dt(h)),E&&(f-=h-(h=E._start))),this._tTime=f,this._time=h,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&f&&!s&&!D&&(Zt(this,"onStart"),this._tTime!==f))return this;if(h>=a&&n>=0)for(c=this._first;c;){if(_=c._next,(c._act||h>=c._start)&&c._ts&&E!==c){if(c.parent!==this)return this.render(n,s,o);if(c.render(c._ts>0?(h-c._start)*c._ts:(c._dirty?c.totalDuration():c._tDur)+(h-c._start)*c._ts,s,o),h!==this._time||!this._ts&&!m){E=0,_&&(f+=this._zTime=-1e-8);break}}c=_}else{c=this._last;for(var x=n<0?n:h;c;){if(_=c._prev,(c._act||x<=c._end)&&c._ts&&E!==c){if(c.parent!==this)return this.render(n,s,o);if(c.render(c._ts>0?(x-c._start)*c._ts:(c._dirty?c.totalDuration():c._tDur)+(x-c._start)*c._ts,s,o||Mt&&jo(c)),h!==this._time||!this._ts&&!m){E=0,_&&(f+=this._zTime=x?-1e-8:Ut);break}}c=_}}if(E&&!s&&(this.pause(),E.render(h>=a?0:-1e-8)._zTime=h>=a?1:-1,this._ts))return this._start=y,gs(this),this.render(n,s,o);this._onUpdate&&!s&&Zt(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&a)&&(y===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((n||!u)&&(f===l&&this._ts>0||!f&&this._ts<0)&&gi(this,1),!s&&!(n<0&&!a)&&(f||a||!l)&&(Zt(this,f===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var o=this;if(Qe(s)||(s=ue(this,s,n)),!(n instanceof _r)){if(Bt(n))return n.forEach(function(a){return o.add(a,s)}),this;if(bt(n))return this.addLabel(n,s);if(ht(n))n=St.delayedCall(0,n);else return this}return this!==n?xe(this,n,s):this},e.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof St?s&&l.push(u):(o&&l.push(u),n&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},e.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},e.remove=function(n){return bt(n)?this.removeLabel(n):ht(n)?this.killTweensOf(n):(n.parent===this&&_s(this,n),n===this._recent&&(this._recent=this._last),Ui(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Dt(Kt.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=ue(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,o){var a=St.delayedCall(0,s||fr,o);return a.data="isPause",this._hasPause=1,xe(this,a,ue(this,n))},e.removePause=function(n){var s=this._first;for(n=ue(this,n);s;)s._start===n&&s.data==="isPause"&&gi(s),s=s._next},e.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)ai!==a[l]&&a[l].kill(n,s);return this},e.getTweensOf=function(n,s){for(var o=[],a=de(n),l=this._first,u=Qe(s),f;l;)l instanceof St?sd(l._targets,a)&&(u?(!ai||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(f=l.getTweensOf(a,s)).length&&o.push.apply(o,f),l=l._next;return o},e.tweenTo=function(n,s){s=s||{};var o=this,a=ue(o,n),l=s,u=l.startAt,f=l.onStart,d=l.onStartParams,h=l.immediateRender,c,_=St.to(o,ee({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Ut,onStart:function(){if(o.pause(),!c){var g=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());_._dur!==g&&In(_,g,0,1).render(_._time,!0,!0),c=1}f&&f.apply(_,d||[])}},s));return h?_.render(0):_},e.tweenFromTo=function(n,s,o){return this.tweenTo(s,ee({startAt:{time:ue(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),Ba(this,ue(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),Ba(this,ue(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Ut)},e.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=n);return Ui(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Ui(this)},e.totalDuration=function(n){var s=0,o=this,a=o._last,l=ke,u,f,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(d=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),f=a._start,f>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,xe(o,a,f-a._delay,1)._lock=0):l=f,f<0&&a._ts&&(s-=f,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;In(o,o===dt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(dt._ts&&(zl(dt,Jr(n,dt)),Yl=Kt.frame),Kt.frame>=wa){wa+=Jt.autoSleep||120;var s=dt._first;if((!s||!s._ts)&&Jt.autoSleep&&Kt._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Kt.sleep()}}},t}(_r);ee($t.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ld=function(t,e,i,n,s,o,a){var l=new Vt(this._pt,t,e,0,1,Su,null,s),u=0,f=0,d,h,c,_,p,g,m,E;for(l.b=i,l.e=n,i+="",n+="",(m=~n.indexOf("random("))&&(n=hr(n)),o&&(E=[i,n],o(E,t,e),i=E[0],n=E[1]),h=i.match(Ns)||[];d=Ns.exec(n);)_=d[0],p=n.substring(u,d.index),c?c=(c+1)%5:p.substr(-5)==="rgba("&&(c=1),_!==h[f++]&&(g=parseFloat(h[f-1])||0,l._pt={_next:l._pt,p:p||f===1?p:",",s:g,c:_.charAt(1)==="="?gn(g,_)-g:parseFloat(_)-g,m:c&&c<4?Math.round:0},u=Ns.lastIndex);return l.c=u<n.length?n.substring(u,n.length):"",l.fp=a,(Ul.test(n)||m)&&(l.e=0),this._pt=l,l},qo=function(t,e,i,n,s,o,a,l,u,f){ht(n)&&(n=n(s||0,t,o));var d=t[e],h=i!=="get"?i:ht(d)?u?t[e.indexOf("set")||!ht(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():d,c=ht(d)?u?Md:mu:Qo,_;if(bt(n)&&(~n.indexOf("random(")&&(n=hr(n)),n.charAt(1)==="="&&(_=gn(h,n)+(kt(h)||0),(_||_===0)&&(n=_))),!f||h!==n||oo)return!isNaN(h*n)&&n!==""?(_=new Vt(this._pt,t,e,+h||0,n-(h||0),typeof d=="boolean"?wd:Eu,0,c),u&&(_.fp=u),a&&_.modifier(a,this,t),this._pt=_):(!d&&!(e in t)&&Vo(e,n),Ld.call(this,t,e,h,n,c,l||Jt.stringFilter,u))},bd=function(t,e,i,n,s){if(ht(t)&&(t=ir(t,s,e,i,n)),!Ue(t)||t.style&&t.nodeType||Bt(t)||Fl(t))return bt(t)?ir(t,s,e,i,n):t;var o={},a;for(a in t)o[a]=ir(t[a],s,e,i,n);return o},pu=function(t,e,i,n,s,o){var a,l,u,f;if(jt[t]&&(a=new jt[t]).init(s,a.rawVars?e[t]:bd(e[t],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new Vt(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==dn))for(u=i._ptLookup[i._targets.indexOf(s)],f=a._props.length;f--;)u[a._props[f]]=l;return a},ai,oo,Ko=function r(t,e,i){var n=t.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,u=n.onUpdate,f=n.runBackwards,d=n.yoyoEase,h=n.keyframes,c=n.autoRevert,_=t._dur,p=t._startAt,g=t._targets,m=t.parent,E=m&&m.data==="nested"?m.vars.targets:g,T=t._overwrite==="auto"&&!$o,y=t.timeline,D,I,v,C,A,x,R,k,N,K,Q,$,H;if(y&&(!h||!s)&&(s="none"),t._ease=Bi(s,An.ease),t._yEase=d?cu(Bi(d===!0?s:d,An.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!y&&!!n.runBackwards,!y||h&&!n.stagger){if(k=g[0]?ki(g[0]).harness:0,$=k&&n[k.prop],D=Zr(n,zo),p&&(p._zTime<0&&p.progress(1),e<0&&f&&a&&!c?p.render(-1,!0):p.revert(f&&_?Hr:nd),p._lazy=0),o){if(gi(t._startAt=St.set(g,ee({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&Ht(l),startAt:null,delay:0,onUpdate:u&&function(){return Zt(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Mt||!a&&!c)&&t._startAt.revert(Hr),a&&_&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(f&&_&&!p){if(e&&(a=!1),v=ee({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Ht(l),immediateRender:a,stagger:0,parent:m},D),$&&(v[k.prop]=$),gi(t._startAt=St.set(g,v)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Mt?t._startAt.revert(Hr):t._startAt.render(-1,!0)),t._zTime=e,!a)r(t._startAt,Ut,Ut);else if(!e)return}for(t._pt=t._ptCache=0,l=_&&Ht(l)||l&&!_,I=0;I<g.length;I++){if(A=g[I],R=A._gsap||Wo(g)[I]._gsap,t._ptLookup[I]=K={},to[R.id]&&fi.length&&Qr(),Q=E===g?I:E.indexOf(A),k&&(N=new k).init(A,$||D,t,Q,E)!==!1&&(t._pt=C=new Vt(t._pt,A,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(ot){K[ot]=C}),N.priority&&(x=1)),!k||$)for(v in D)jt[v]&&(N=pu(v,D,t,Q,A,E))?N.priority&&(x=1):K[v]=C=qo.call(t,A,v,"get",D[v],Q,E,0,n.stringFilter);t._op&&t._op[I]&&t.kill(A,t._op[I]),T&&t._pt&&(ai=t,dt.killTweensOf(A,K,t.globalTime(e)),H=!t.parent,ai=0),t._pt&&l&&(to[R.id]=1)}x&&Du(t),t._onInit&&t._onInit(t)}t._onUpdate=u,t._initted=(!t._op||t._pt)&&!H,h&&e<=0&&y.render(ke,!0,!0)},Nd=function(t,e,i,n,s,o,a,l){var u=(t._pt&&t._ptCache||(t._ptCache={}))[e],f,d,h,c;if(!u)for(u=t._ptCache[e]=[],h=t._ptLookup,c=t._targets.length;c--;){if(f=h[c][e],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==e&&f.fp!==e;)f=f._next;if(!f)return oo=1,t.vars[e]="+=0",Ko(t,a),oo=0,l?dr(e+" not eligible for reset"):1;u.push(f)}for(c=u.length;c--;)d=u[c],f=d._pt||d,f.s=(n||n===0)&&!s?n:f.s+(n||0)+o*f.c,f.c=i-f.s,d.e&&(d.e=gt(i)+kt(d.e)),d.b&&(d.b=f.s+kt(d.b))},Rd=function(t,e){var i=t[0]?ki(t[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return e;s=Pn({},e);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Od=function(t,e,i,n){var s=e.ease||n||"power1.inOut",o,a;if(Bt(e))a=i[t]||(i[t]=[]),e.forEach(function(l,u){return a.push({t:u/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},ir=function(t,e,i,n,s){return ht(t)?t.call(e,i,n,s):bt(t)&&~t.indexOf("random(")?hr(t):t},_u=Xo+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",gu={};Yt(_u+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return gu[r]=1});var St=function(r){xl(t,r);function t(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:tr(n))||this;var l=a.vars,u=l.duration,f=l.delay,d=l.immediateRender,h=l.stagger,c=l.overwrite,_=l.keyframes,p=l.defaults,g=l.scrollTrigger,m=l.yoyoEase,E=n.parent||dt,T=(Bt(i)||Fl(i)?Qe(i[0]):"length"in n)?[i]:de(i),y,D,I,v,C,A,x,R;if(a._targets=T.length?Wo(T):dr("GSAP target "+i+" not found. https://gsap.com",!Jt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=c,_||h||wr(u)||wr(f)){if(n=a.vars,y=a.timeline=new $t({data:"nested",defaults:p||{},targets:E&&E.data==="nested"?E.vars.targets:T}),y.kill(),y.parent=y._dp=He(a),y._start=0,h||wr(u)||wr(f)){if(v=T.length,x=h&&tu(h),Ue(h))for(C in h)~_u.indexOf(C)&&(R||(R={}),R[C]=h[C]);for(D=0;D<v;D++)I=Zr(n,gu),I.stagger=0,m&&(I.yoyoEase=m),R&&Pn(I,R),A=T[D],I.duration=+ir(u,He(a),D,A,T),I.delay=(+ir(f,He(a),D,A,T)||0)-a._delay,!h&&v===1&&I.delay&&(a._delay=f=I.delay,a._start+=f,I.delay=0),y.to(A,I,x?x(D,A,T):0),y._ease=W.none;y.duration()?u=f=0:a.timeline=0}else if(_){tr(ee(y.vars.defaults,{ease:"none"})),y._ease=Bi(_.ease||n.ease||"none");var k=0,N,K,Q;if(Bt(_))_.forEach(function($){return y.to(T,$,">")}),y.duration();else{I={};for(C in _)C==="ease"||C==="easeEach"||Od(C,_[C],I,_.easeEach);for(C in I)for(N=I[C].sort(function($,H){return $.t-H.t}),k=0,D=0;D<N.length;D++)K=N[D],Q={ease:K.e,duration:(K.t-(D?N[D-1].t:0))/100*u},Q[C]=K.v,y.to(T,Q,k),k+=Q.duration;y.duration()<u&&y.to({},{duration:u-y.duration()})}}u||a.duration(u=y.duration())}else a.timeline=0;return c===!0&&!$o&&(ai=He(a),dt.killTweensOf(T),ai=0),xe(E,He(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(d||!u&&!_&&a._start===Dt(E._time)&&Ht(d)&&ud(He(a))&&E.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-f)||0)),g&&Kl(He(a),g),a}var e=t.prototype;return e.render=function(n,s,o){var a=this._time,l=this._tDur,u=this._dur,f=n<0,d=n>l-Ut&&!f?l:n<Ut?0:n,h,c,_,p,g,m,E,T,y;if(!u)dd(this,n,s,o);else if(d!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f||this._lazy){if(h=d,T=this.timeline,this._repeat){if(p=u+this._rDelay,this._repeat<-1&&f)return this.totalTime(p*100+n,s,o);if(h=Dt(d%p),d===l?(_=this._repeat,h=u):(g=Dt(d/p),_=~~g,_&&_===g?(h=u,_--):h>u&&(h=u)),m=this._yoyo&&_&1,m&&(y=this._yEase,h=u-h),g=Cn(this._tTime,p),h===a&&!o&&this._initted&&_===g)return this._tTime=d,this;_!==g&&(T&&this._yEase&&du(T,m),this.vars.repeatRefresh&&!m&&!this._lock&&h!==p&&this._initted&&(this._lock=o=1,this.render(Dt(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(Ql(this,f?n:h,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==g))return this;if(u!==this._dur)return this.render(n,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(y||this._ease)(h/u),this._from&&(this.ratio=E=1-E),!a&&d&&!s&&!g&&(Zt(this,"onStart"),this._tTime!==d))return this;for(c=this._pt;c;)c.r(E,c.d),c=c._next;T&&T.render(n<0?n:T._dur*T._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(f&&eo(this,n,s,o),Zt(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!s&&this.parent&&Zt(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(f&&!this._onUpdate&&eo(this,n,!0,!0),(n||!u)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&gi(this,1),!s&&!(f&&!a)&&(d||a||m)&&(Zt(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,o,a,l){pr||Kt.wake(),this._ts||this.play();var u=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Ko(this,u),f=this._ease(u/this._dur),Nd(this,n,s,o,a,f,u,l)?this.resetTo(n,s,o,a,1):(ms(this,0),this.parent||jl(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Xn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Mt),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,ai&&ai.vars.overwrite!==!0)._first||Xn(this),this.parent&&o!==this.timeline.totalDuration()&&In(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?de(n):a,u=this._ptLookup,f=this._pt,d,h,c,_,p,g,m;if((!s||s==="all")&&ad(a,l))return s==="all"&&(this._pt=0),Xn(this);for(d=this._op=this._op||[],s!=="all"&&(bt(s)&&(p={},Yt(s,function(E){return p[E]=1}),s=p),s=Rd(a,s)),m=a.length;m--;)if(~l.indexOf(a[m])){h=u[m],s==="all"?(d[m]=s,_=h,c={}):(c=d[m]=d[m]||{},_=s);for(p in _)g=h&&h[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&_s(this,g,"_pt"),delete h[p]),c!=="all"&&(c[p]=1)}return this._initted&&!this._pt&&f&&Xn(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return er(1,arguments)},t.delayedCall=function(n,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,s,o){return er(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,o){return dt.killTweensOf(n,s,o)},t}(_r);ee(St.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Yt("staggerTo,staggerFrom,staggerFromTo",function(r){St[r]=function(){var t=new $t,e=no.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var Qo=function(t,e,i){return t[e]=i},mu=function(t,e,i){return t[e](i)},Md=function(t,e,i,n){return t[e](n.fp,i)},xd=function(t,e,i){return t.setAttribute(e,i)},Zo=function(t,e){return ht(t[e])?mu:Go(t[e])&&t.setAttribute?xd:Qo},Eu=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},wd=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Su=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Jo=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Fd=function(t,e,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(t,e,i),s=o},kd=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?_s(this,e,"_pt"):e.dep||(i=1),e=n;return!i},Ud=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},Du=function(t){for(var e=t._pt,i,n,s,o;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:o=e,e=i}t._pt=s},Vt=function(){function r(e,i,n,s,o,a,l,u,f){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||Eu,this.d=l||this,this.set=u||Qo,this.pr=f||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=Ud,this.m=i,this.mt=s,this.tween=n},r}();Yt(Xo+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return zo[r]=1});te.TweenMax=te.TweenLite=St;te.TimelineLite=te.TimelineMax=$t;dt=new $t({sortChildren:!1,defaults:An,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Jt.stringFilter=uu;var $i=[],Vr={},Bd=[],Ga=0,$d=0,ws=function(t){return(Vr[t]||Bd).map(function(e){return e()})},ao=function(){var t=Date.now(),e=[];t-Ga>2&&(ws("matchMediaInit"),$i.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,u;for(a in n)o=Re.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(i.revert(),l&&e.push(i))}),ws("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Ga=t,ws("matchMedia"))},Tu=function(){function r(e,i){this.selector=i&&ro(i),this.data=[],this._r=[],this.isReverted=!1,this.id=$d++,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){ht(i)&&(s=n,n=i,i=ht);var o=this,a=function(){var u=ut,f=o.selector,d;return u&&u!==o&&u.data.push(o),s&&(o.selector=ro(s)),ut=o,d=n.apply(o,arguments),ht(d)&&o._r.push(d),ut=u,o.selector=f,o.isReverted=!1,d};return o.last=a,i===ht?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var n=ut;ut=null,i(this),ut=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof St&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,u;l--;)u=s.data[l],u.data==="isFlip"&&(u.revert(),u.getChildren(!0,!0,!1).forEach(function(f){return a.splice(a.indexOf(f),1)}));for(a.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,d){return d.g-f.g||-1/0}).forEach(function(f){return f.t.revert(i)}),l=s.data.length;l--;)u=s.data[l],u instanceof $t?u.data!=="nested"&&(u.scrollTrigger&&u.scrollTrigger.revert(),u.kill()):!(u instanceof St)&&u.revert&&u.revert(i);s._r.forEach(function(f){return f(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=$i.length;o--;)$i[o].id===this.id&&$i.splice(o,1)},t.revert=function(i){this.kill(i||{})},r}(),Gd=function(){function r(e){this.contexts=[],this.scope=e,ut&&ut.data.push(this)}var t=r.prototype;return t.add=function(i,n,s){Ue(i)||(i={matches:i});var o=new Tu(0,s||this.scope),a=o.conditions={},l,u,f;ut&&!o.selector&&(o.selector=ut.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(u in i)u==="all"?f=1:(l=Re.matchMedia(i[u]),l&&($i.indexOf(o)<0&&$i.push(o),(a[u]=l.matches)&&(f=1),l.addListener?l.addListener(ao):l.addEventListener("change",ao)));return f&&n(o,function(d){return o.add(null,d)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),ts={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return ou(n)})},timeline:function(t){return new $t(t)},getTweensOf:function(t,e){return dt.getTweensOf(t,e)},getProperty:function(t,e,i,n){bt(t)&&(t=de(t)[0]);var s=ki(t||{}).get,o=i?Wl:Xl;return i==="native"&&(i=""),t&&(e?o((jt[e]&&jt[e].get||s)(t,e,i,n)):function(a,l,u){return o((jt[a]&&jt[a].get||s)(t,a,l,u))})},quickSetter:function(t,e,i){if(t=de(t),t.length>1){var n=t.map(function(f){return Xt.quickSetter(f,e,i)}),s=n.length;return function(f){for(var d=s;d--;)n[d](f)}}t=t[0]||{};var o=jt[e],a=ki(t),l=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(f){var d=new o;dn._pt=0,d.init(t,i?f+i:f,dn,0,[t]),d.render(1,d),dn._pt&&Jo(1,dn)}:a.set(t,l);return o?u:function(f){return u(t,l,i?f+i:f,a,1)}},quickTo:function(t,e,i){var n,s=Xt.to(t,ee((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,u,f){return s.resetTo(e,l,u,f)};return o.tween=s,o},isTweening:function(t){return dt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Bi(t.ease,An.ease)),Fa(An,t||{})},config:function(t){return Fa(Jt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!jt[a]&&!te[a]&&dr(e+" effect requires "+a+" plugin.")}),Rs[e]=function(a,l,u){return i(de(a),ee(l||{},s),u)},o&&($t.prototype[e]=function(a,l,u){return this.add(Rs[e](a,Ue(l)?l:(u=l)&&{},this),u)})},registerEase:function(t,e){W[t]=Bi(e)},parseEase:function(t,e){return arguments.length?Bi(t,e):W},getById:function(t){return dt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new $t(t),n,s;for(i.smoothChildTiming=Ht(t.smoothChildTiming),dt.remove(i),i._dp=0,i._time=i._tTime=dt._time,n=dt._first;n;)s=n._next,(e||!(!n._dur&&n instanceof St&&n.vars.onComplete===n._targets[0]))&&xe(i,n,n._start-n._delay),n=s;return xe(dt,i,0),i},context:function(t,e){return t?new Tu(t,e):ut},matchMedia:function(t){return new Gd(t)},matchMediaRefresh:function(){return $i.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||ao()},addEventListener:function(t,e){var i=Vr[t]||(Vr[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Vr[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Sd,wrapYoyo:Dd,distribute:tu,random:iu,snap:eu,normalize:Ed,getUnit:kt,clamp:pd,splitColor:au,toArray:de,selector:ro,mapRange:ru,pipe:gd,unitize:md,interpolate:Td,shuffle:Jl},install:Gl,effects:Rs,ticker:Kt,updateRoot:$t.updateRoot,plugins:jt,globalTimeline:dt,core:{PropTween:Vt,globals:Hl,Tween:St,Timeline:$t,Animation:_r,getCache:ki,_removeLinkedListItem:_s,reverting:function(){return Mt},context:function(t){return t&&ut&&(ut.data.push(t),t._ctx=ut),ut},suppressOverwrites:function(t){return $o=t}}};Yt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return ts[r]=St[r]});Kt.add($t.updateRoot);dn=ts.to({},{duration:0});var Hd=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Yd=function(t,e){var i=t._targets,n,s,o;for(n in e)for(s=i.length;s--;)o=t._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=Hd(o,n)),o&&o.modifier&&o.modifier(e[n],t,i[s],n))},Fs=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,u;if(bt(s)&&(l={},Yt(s,function(f){return l[f]=1}),s=l),e){l={};for(u in s)l[u]=e(s[u]);s=l}Yd(a,s)}}}},Xt=ts.registerPlugin({name:"attr",init:function(t,e,i,n,s){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)Mt?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Fs("roundProps",so),Fs("modifiers"),Fs("snap",eu))||ts;St.version=$t.version=Xt.version="3.13.0";$l=1;Ho()&&vn();W.Power0;W.Power1;W.Power2;W.Power3;W.Power4;W.Linear;W.Quad;W.Cubic;W.Quart;W.Quint;W.Strong;W.Elastic;W.Back;W.SteppedEase;W.Bounce;W.Sine;W.Expo;W.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ha,li,mn,ta,wi,Ya,ea,Vd=function(){return typeof window<"u"},Ze={},Li=180/Math.PI,En=Math.PI/180,Ki=Math.atan2,Va=1e8,ia=/([A-Z])/g,zd=/(left|right|width|margin|padding|x)/i,Xd=/[\s,\(]\S/,we={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},lo=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Wd=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},jd=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},qd=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},yu=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Au=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Kd=function(t,e,i){return t.style[e]=i},Qd=function(t,e,i){return t.style.setProperty(e,i)},Zd=function(t,e,i){return t._gsap[e]=i},Jd=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},tf=function(t,e,i,n,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},ef=function(t,e,i,n,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},ft="transform",zt=ft+"Origin",nf=function r(t,e){var i=this,n=this.target,s=n.style,o=n._gsap;if(t in Ze&&s){if(this.tfm=this.tfm||{},t!=="transform")t=we[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Ye(n,a)}):this.tfm[t]=o.x?o[t]:Ye(n,t),t===zt&&(this.tfm.zOrigin=o.zOrigin);else return we.transform.split(",").forEach(function(a){return r.call(i,a,e)});if(this.props.indexOf(ft)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(zt,e,"")),t=ft}(s||e)&&this.props.push(t,e,s[t])},Pu=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},rf=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(ia,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=ea(),(!s||!s.isStart)&&!i[ft]&&(Pu(i),n.zOrigin&&i[zt]&&(i[zt]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},Cu=function(t,e){var i={target:t,props:[],revert:rf,save:nf};return t._gsap||Xt.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},Iu,uo=function(t,e){var i=li.createElementNS?li.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):li.createElement(t);return i&&i.style?i:li.createElement(t)},fe=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(ia,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,Ln(e)||e,1)||""},za="O,Moz,ms,Ms,Webkit".split(","),Ln=function(t,e,i){var n=e||wi,s=n.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(za[o]+t in s););return o<0?null:(o===3?"ms":o>=0?za[o]:"")+t},co=function(){Vd()&&window.document&&(Ha=window,li=Ha.document,mn=li.documentElement,wi=uo("div")||{style:{}},uo("div"),ft=Ln(ft),zt=ft+"Origin",wi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Iu=!!Ln("perspective"),ea=Xt.core.reverting,ta=1)},Xa=function(t){var e=t.ownerSVGElement,i=uo("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),mn.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),mn.removeChild(i),s},Wa=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},vu=function(t){var e,i;try{e=t.getBBox()}catch{e=Xa(t),i=1}return e&&(e.width||e.height)||i||(e=Xa(t)),e&&!e.width&&!e.x&&!e.y?{x:+Wa(t,["x","cx","x1"])||0,y:+Wa(t,["y","cy","y1"])||0,width:0,height:0}:e},Lu=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&vu(t))},zi=function(t,e){if(e){var i=t.style,n;e in Ze&&e!==zt&&(e=ft),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(ia,"-$1").toLowerCase())):i.removeAttribute(e)}},ui=function(t,e,i,n,s,o){var a=new Vt(t._pt,e,i,0,1,o?Au:yu);return t._pt=a,a.b=n,a.e=s,t._props.push(i),a},ja={deg:1,rad:1,turn:1},sf={grid:1,flex:1},mi=function r(t,e,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=wi.style,l=zd.test(e),u=t.tagName.toLowerCase()==="svg",f=(u?"client":"offset")+(l?"Width":"Height"),d=100,h=n==="px",c=n==="%",_,p,g,m;if(n===o||!s||ja[n]||ja[o])return s;if(o!=="px"&&!h&&(s=r(t,e,i,"px")),m=t.getCTM&&Lu(t),(c||o==="%")&&(Ze[e]||~e.indexOf("adius")))return _=m?t.getBBox()[l?"width":"height"]:t[f],gt(c?s/_*d:s/100*_);if(a[l?"width":"height"]=d+(h?o:n),p=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!u?t:t.parentNode,m&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===li||!p.appendChild)&&(p=li.body),g=p._gsap,g&&c&&g.width&&l&&g.time===Kt.time&&!g.uncache)return gt(s/g.width*d);if(c&&(e==="height"||e==="width")){var E=t.style[e];t.style[e]=d+n,_=t[f],E?t.style[e]=E:zi(t,e)}else(c||o==="%")&&!sf[fe(p,"display")]&&(a.position=fe(t,"position")),p===t&&(a.position="static"),p.appendChild(wi),_=wi[f],p.removeChild(wi),a.position="absolute";return l&&c&&(g=ki(p),g.time=Kt.time,g.width=p[f]),gt(h?_*s/d:_&&s?d/_*s:0)},Ye=function(t,e,i,n){var s;return ta||co(),e in we&&e!=="transform"&&(e=we[e],~e.indexOf(",")&&(e=e.split(",")[0])),Ze[e]&&e!=="transform"?(s=mr(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:is(fe(t,zt))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=es[e]&&es[e](t,e,i)||fe(t,e)||Vl(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?mi(t,e,s,i)+i:s},of=function(t,e,i,n){if(!i||i==="none"){var s=Ln(e,t,1),o=s&&fe(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=fe(t,"borderTopColor"))}var a=new Vt(this._pt,t.style,e,0,1,Su),l=0,u=0,f,d,h,c,_,p,g,m,E,T,y,D;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=fe(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=t.style[e],t.style[e]=n,n=fe(t,e)||n,p?t.style[e]=p:zi(t,e)),f=[i,n],uu(f),i=f[0],n=f[1],h=i.match(cn)||[],D=n.match(cn)||[],D.length){for(;d=cn.exec(n);)g=d[0],E=n.substring(l,d.index),_?_=(_+1)%5:(E.substr(-5)==="rgba("||E.substr(-5)==="hsla(")&&(_=1),g!==(p=h[u++]||"")&&(c=parseFloat(p)||0,y=p.substr((c+"").length),g.charAt(1)==="="&&(g=gn(c,g)+y),m=parseFloat(g),T=g.substr((m+"").length),l=cn.lastIndex-T.length,T||(T=T||Jt.units[e]||y,l===n.length&&(n+=T,a.e+=T)),y!==T&&(c=mi(t,e,p,T)||0),a._pt={_next:a._pt,p:E||u===1?E:",",s:c,c:m-c,m:_&&_<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?Au:yu;return Ul.test(n)&&(a.e=0),this._pt=a,a},qa={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},af=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=qa[i]||i,e[1]=qa[n]||n,e.join(" ")},lf=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,o=i._gsap,a,l,u;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],Ze[a]&&(l=1,a=a==="transformOrigin"?zt:ft),zi(i,a);l&&(zi(i,ft),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",mr(i,1),o.uncache=1,Pu(n)))}},es={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var o=t._pt=new Vt(t._pt,e,i,0,0,lf);return o.u=n,o.pr=-10,o.tween=s,t._props.push(i),1}}},gr=[1,0,0,1,0,0],bu={},Nu=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Ka=function(t){var e=fe(t,ft);return Nu(e)?gr:e.substr(7).match(kl).map(gt)},na=function(t,e){var i=t._gsap||ki(t),n=t.style,s=Ka(t),o,a,l,u;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?gr:s):(s===gr&&!t.offsetParent&&t!==mn&&!i.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(u=1,a=t.nextElementSibling,mn.appendChild(t)),s=Ka(t),l?n.display=l:zi(t,"display"),u&&(a?o.insertBefore(t,a):o?o.appendChild(t):mn.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},fo=function(t,e,i,n,s,o){var a=t._gsap,l=s||na(t,!0),u=a.xOrigin||0,f=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,c=l[0],_=l[1],p=l[2],g=l[3],m=l[4],E=l[5],T=e.split(" "),y=parseFloat(T[0])||0,D=parseFloat(T[1])||0,I,v,C,A;i?l!==gr&&(v=c*g-_*p)&&(C=y*(g/v)+D*(-p/v)+(p*E-g*m)/v,A=y*(-_/v)+D*(c/v)-(c*E-_*m)/v,y=C,D=A):(I=vu(t),y=I.x+(~T[0].indexOf("%")?y/100*I.width:y),D=I.y+(~(T[1]||T[0]).indexOf("%")?D/100*I.height:D)),n||n!==!1&&a.smooth?(m=y-u,E=D-f,a.xOffset=d+(m*c+E*p)-m,a.yOffset=h+(m*_+E*g)-E):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=D,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!i,t.style[zt]="0px 0px",o&&(ui(o,a,"xOrigin",u,y),ui(o,a,"yOrigin",f,D),ui(o,a,"xOffset",d,a.xOffset),ui(o,a,"yOffset",h,a.yOffset)),t.setAttribute("data-svg-origin",y+" "+D)},mr=function(t,e){var i=t._gsap||new hu(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),u=fe(t,zt)||"0",f,d,h,c,_,p,g,m,E,T,y,D,I,v,C,A,x,R,k,N,K,Q,$,H,ot,pe,ve,z,j,J,Z,ie;return f=d=h=p=g=m=E=T=y=0,c=_=1,i.svg=!!(t.getCTM&&Lu(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[ft]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ft]!=="none"?l[ft]:"")),n.scale=n.rotate=n.translate="none"),v=na(t,i.svg),i.svg&&(i.uncache?(ot=t.getBBox(),u=i.xOrigin-ot.x+"px "+(i.yOrigin-ot.y)+"px",H=""):H=!e&&t.getAttribute("data-svg-origin"),fo(t,H||u,!!H||i.originIsAbsolute,i.smooth!==!1,v)),D=i.xOrigin||0,I=i.yOrigin||0,v!==gr&&(R=v[0],k=v[1],N=v[2],K=v[3],f=Q=v[4],d=$=v[5],v.length===6?(c=Math.sqrt(R*R+k*k),_=Math.sqrt(K*K+N*N),p=R||k?Ki(k,R)*Li:0,E=N||K?Ki(N,K)*Li+p:0,E&&(_*=Math.abs(Math.cos(E*En))),i.svg&&(f-=D-(D*R+I*N),d-=I-(D*k+I*K))):(ie=v[6],J=v[7],ve=v[8],z=v[9],j=v[10],Z=v[11],f=v[12],d=v[13],h=v[14],C=Ki(ie,j),g=C*Li,C&&(A=Math.cos(-C),x=Math.sin(-C),H=Q*A+ve*x,ot=$*A+z*x,pe=ie*A+j*x,ve=Q*-x+ve*A,z=$*-x+z*A,j=ie*-x+j*A,Z=J*-x+Z*A,Q=H,$=ot,ie=pe),C=Ki(-N,j),m=C*Li,C&&(A=Math.cos(-C),x=Math.sin(-C),H=R*A-ve*x,ot=k*A-z*x,pe=N*A-j*x,Z=K*x+Z*A,R=H,k=ot,N=pe),C=Ki(k,R),p=C*Li,C&&(A=Math.cos(C),x=Math.sin(C),H=R*A+k*x,ot=Q*A+$*x,k=k*A-R*x,$=$*A-Q*x,R=H,Q=ot),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),c=gt(Math.sqrt(R*R+k*k+N*N)),_=gt(Math.sqrt($*$+ie*ie)),C=Ki(Q,$),E=Math.abs(C)>2e-4?C*Li:0,y=Z?1/(Z<0?-Z:Z):0),i.svg&&(H=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Nu(fe(t,ft)),H&&t.setAttribute("transform",H))),Math.abs(E)>90&&Math.abs(E)<270&&(s?(c*=-1,E+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,E+=E<=0?180:-180)),e=e||i.uncache,i.x=f-((i.xPercent=f&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-f)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=h+o,i.scaleX=gt(c),i.scaleY=gt(_),i.rotation=gt(p)+a,i.rotationX=gt(g)+a,i.rotationY=gt(m)+a,i.skewX=E+a,i.skewY=T+a,i.transformPerspective=y+o,(i.zOrigin=parseFloat(u.split(" ")[2])||!e&&i.zOrigin||0)&&(n[zt]=is(u)),i.xOffset=i.yOffset=0,i.force3D=Jt.force3D,i.renderTransform=i.svg?cf:Iu?Ru:uf,i.uncache=0,i},is=function(t){return(t=t.split(" "))[0]+" "+t[1]},ks=function(t,e,i){var n=kt(e);return gt(parseFloat(e)+parseFloat(mi(t,"x",i+"px",n)))+n},uf=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ru(t,e)},Pi="0deg",Gn="0px",Ci=") ",Ru=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,u=i.rotation,f=i.rotationY,d=i.rotationX,h=i.skewX,c=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,E=i.target,T=i.zOrigin,y="",D=m==="auto"&&t&&t!==1||m===!0;if(T&&(d!==Pi||f!==Pi)){var I=parseFloat(f)*En,v=Math.sin(I),C=Math.cos(I),A;I=parseFloat(d)*En,A=Math.cos(I),o=ks(E,o,v*A*-T),a=ks(E,a,-Math.sin(I)*-T),l=ks(E,l,C*A*-T+T)}g!==Gn&&(y+="perspective("+g+Ci),(n||s)&&(y+="translate("+n+"%, "+s+"%) "),(D||o!==Gn||a!==Gn||l!==Gn)&&(y+=l!==Gn||D?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ci),u!==Pi&&(y+="rotate("+u+Ci),f!==Pi&&(y+="rotateY("+f+Ci),d!==Pi&&(y+="rotateX("+d+Ci),(h!==Pi||c!==Pi)&&(y+="skew("+h+", "+c+Ci),(_!==1||p!==1)&&(y+="scale("+_+", "+p+Ci),E.style[ft]=y||"translate(0, 0)"},cf=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,u=i.skewX,f=i.skewY,d=i.scaleX,h=i.scaleY,c=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,E=i.forceCSS,T=parseFloat(o),y=parseFloat(a),D,I,v,C,A;l=parseFloat(l),u=parseFloat(u),f=parseFloat(f),f&&(f=parseFloat(f),u+=f,l+=f),l||u?(l*=En,u*=En,D=Math.cos(l)*d,I=Math.sin(l)*d,v=Math.sin(l-u)*-h,C=Math.cos(l-u)*h,u&&(f*=En,A=Math.tan(u-f),A=Math.sqrt(1+A*A),v*=A,C*=A,f&&(A=Math.tan(f),A=Math.sqrt(1+A*A),D*=A,I*=A)),D=gt(D),I=gt(I),v=gt(v),C=gt(C)):(D=d,C=h,I=v=0),(T&&!~(o+"").indexOf("px")||y&&!~(a+"").indexOf("px"))&&(T=mi(c,"x",o,"px"),y=mi(c,"y",a,"px")),(_||p||g||m)&&(T=gt(T+_-(_*D+p*v)+g),y=gt(y+p-(_*I+p*C)+m)),(n||s)&&(A=c.getBBox(),T=gt(T+n/100*A.width),y=gt(y+s/100*A.height)),A="matrix("+D+","+I+","+v+","+C+","+T+","+y+")",c.setAttribute("transform",A),E&&(c.style[ft]=A)},df=function(t,e,i,n,s){var o=360,a=bt(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Li:1),u=l-n,f=n+u+"deg",d,h;return a&&(d=s.split("_")[1],d==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-360)),d==="cw"&&u<0?u=(u+o*Va)%o-~~(u/o)*o:d==="ccw"&&u>0&&(u=(u-o*Va)%o-~~(u/o)*o)),t._pt=h=new Vt(t._pt,e,i,n,u,Wd),h.e=f,h.u="deg",t._props.push(i),h},Qa=function(t,e){for(var i in e)t[i]=e[i];return t},ff=function(t,e,i){var n=Qa({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,u,f,d,h,c,_;n.svg?(u=i.getAttribute("transform"),i.setAttribute("transform",""),o[ft]=e,a=mr(i,1),zi(i,ft),i.setAttribute("transform",u)):(u=getComputedStyle(i)[ft],o[ft]=e,a=mr(i,1),o[ft]=u);for(l in Ze)u=n[l],f=a[l],u!==f&&s.indexOf(l)<0&&(c=kt(u),_=kt(f),d=c!==_?mi(i,l,u,_):parseFloat(u),h=parseFloat(f),t._pt=new Vt(t._pt,a,l,d,h-d,lo),t._pt.u=_||0,t._props.push(l));Qa(a,n)};Yt("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",o=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(a){return t<2?r+a:"border"+a+r});es[t>1?"border"+r:r]=function(a,l,u,f,d){var h,c;if(arguments.length<4)return h=o.map(function(_){return Ye(a,_,u)}),c=h.join(" "),c.split(h[0]).length===5?h[0]:c;h=(f+"").split(" "),c={},o.forEach(function(_,p){return c[_]=h[p]=h[p]||h[(p-1)/2|0]}),a.init(l,c,d)}});var Ou={name:"css",register:co,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var o=this._props,a=t.style,l=i.vars.startAt,u,f,d,h,c,_,p,g,m,E,T,y,D,I,v,C;ta||co(),this.styles=this.styles||Cu(t),C=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(f=e[p],!(jt[p]&&pu(p,e,i,n,t,s)))){if(c=typeof f,_=es[p],c==="function"&&(f=f.call(i,n,t,s),c=typeof f),c==="string"&&~f.indexOf("random(")&&(f=hr(f)),_)_(this,t,p,f,i)&&(v=1);else if(p.substr(0,2)==="--")u=(getComputedStyle(t).getPropertyValue(p)+"").trim(),f+="",hi.lastIndex=0,hi.test(u)||(g=kt(u),m=kt(f)),m?g!==m&&(u=mi(t,p,u,m)+m):g&&(f+=g),this.add(a,"setProperty",u,f,n,s,0,0,p),o.push(p),C.push(p,0,a[p]);else if(c!=="undefined"){if(l&&p in l?(u=typeof l[p]=="function"?l[p].call(i,n,t,s):l[p],bt(u)&&~u.indexOf("random(")&&(u=hr(u)),kt(u+"")||u==="auto"||(u+=Jt.units[p]||kt(Ye(t,p))||""),(u+"").charAt(1)==="="&&(u=Ye(t,p))):u=Ye(t,p),h=parseFloat(u),E=c==="string"&&f.charAt(1)==="="&&f.substr(0,2),E&&(f=f.substr(2)),d=parseFloat(f),p in we&&(p==="autoAlpha"&&(h===1&&Ye(t,"visibility")==="hidden"&&d&&(h=0),C.push("visibility",0,a.visibility),ui(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),p!=="scale"&&p!=="transform"&&(p=we[p],~p.indexOf(",")&&(p=p.split(",")[0]))),T=p in Ze,T){if(this.styles.save(p),c==="string"&&f.substring(0,6)==="var(--"&&(f=fe(t,f.substring(4,f.indexOf(")"))),d=parseFloat(f)),y||(D=t._gsap,D.renderTransform&&!e.parseTransform||mr(t,e.parseTransform),I=e.smoothOrigin!==!1&&D.smooth,y=this._pt=new Vt(this._pt,a,ft,0,1,D.renderTransform,D,0,-1),y.dep=1),p==="scale")this._pt=new Vt(this._pt,D,"scaleY",D.scaleY,(E?gn(D.scaleY,E+d):d)-D.scaleY||0,lo),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){C.push(zt,0,a[zt]),f=af(f),D.svg?fo(t,f,0,I,0,this):(m=parseFloat(f.split(" ")[2])||0,m!==D.zOrigin&&ui(this,D,"zOrigin",D.zOrigin,m),ui(this,a,p,is(u),is(f)));continue}else if(p==="svgOrigin"){fo(t,f,1,I,0,this);continue}else if(p in bu){df(this,D,p,h,E?gn(h,E+f):f);continue}else if(p==="smoothOrigin"){ui(this,D,"smooth",D.smooth,f);continue}else if(p==="force3D"){D[p]=f;continue}else if(p==="transform"){ff(this,f,t);continue}}else p in a||(p=Ln(p)||p);if(T||(d||d===0)&&(h||h===0)&&!Xd.test(f)&&p in a)g=(u+"").substr((h+"").length),d||(d=0),m=kt(f)||(p in Jt.units?Jt.units[p]:g),g!==m&&(h=mi(t,p,u,m)),this._pt=new Vt(this._pt,T?D:a,p,h,(E?gn(h,E+d):d)-h,!T&&(m==="px"||p==="zIndex")&&e.autoRound!==!1?qd:lo),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=u,this._pt.r=jd);else if(p in a)of.call(this,t,p,u,E?E+f:f);else if(p in t)this.add(t,p,u||t[p],E?E+f:f,n,s);else if(p!=="parseTransform"){Vo(p,f);continue}T||(p in a?C.push(p,0,a[p]):typeof t[p]=="function"?C.push(p,2,t[p]()):C.push(p,1,u||t[p])),o.push(p)}}v&&Du(this)},render:function(t,e){if(e.tween._time||!ea())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ye,aliases:we,getSetter:function(t,e,i){var n=we[e];return n&&n.indexOf(",")<0&&(e=n),e in Ze&&e!==zt&&(t._gsap.x||Ye(t,"x"))?i&&Ya===i?e==="scale"?Jd:Zd:(Ya=i||{})&&(e==="scale"?tf:ef):t.style&&!Go(t.style[e])?Kd:~e.indexOf("-")?Qd:Zo(t,e)},core:{_removeProperty:zi,_getMatrix:na}};Xt.utils.checkPrefix=Ln;Xt.core.getStyleSaver=Cu;(function(r,t,e,i){var n=Yt(r+","+t+","+e,function(s){Ze[s]=1});Yt(t,function(s){Jt.units[s]="deg",bu[s]=1}),we[n[13]]=r+","+t,Yt(i,function(s){var o=s.split(":");we[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Yt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Jt.units[r]="px"});Xt.registerPlugin(Ou);var ce=Xt.registerPlugin(Ou)||Xt;ce.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var je,Gi,ra,Es,jn,zr,ns,nr,ye="transform",ho=ye+"Origin",Mu,xu=function(t){var e=t.ownerDocument||t;for(!(ye in t.style)&&("msTransform"in t.style)&&(ye="msTransform",ho=ye+"Origin");e.parentNode&&(e=e.parentNode););if(Gi=window,ns=new Xi,e){je=e,ra=e.documentElement,Es=e.body,nr=je.createElementNS("http://www.w3.org/2000/svg","g"),nr.style.transform="none";var i=e.createElement("div"),n=e.createElement("div"),s=e&&(e.body||e.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Mu=n.offsetParent!==i,s.removeChild(i))}return e},hf=function(t){for(var e,i;t&&t!==Es;)i=t._gsap,i&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),e?e.push(i):e=[i]),t=t.parentNode;return e},wu=[],Fu=[],pf=function(){return Gi.pageYOffset||je.scrollTop||ra.scrollTop||Es.scrollTop||0},_f=function(){return Gi.pageXOffset||je.scrollLeft||ra.scrollLeft||Es.scrollLeft||0},sa=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},gf=function r(t){if(Gi.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Us=function r(t,e){if(t.parentNode&&(je||xu(t))){var i=sa(t),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?e?"rect":"g":"div",o=e!==2?0:100,a=e===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",u=je.createElementNS?je.createElementNS(n.replace(/^https/,"http"),s):je.createElement(s);return e&&(i?(zr||(zr=r(t)),u.setAttribute("width",.01),u.setAttribute("height",.01),u.setAttribute("transform","translate("+o+","+a+")"),zr.appendChild(u)):(jn||(jn=r(t),jn.style.cssText=l),u.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",jn.appendChild(u))),u}throw"Need document and parent."},mf=function(t){for(var e=new Xi,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e},Ef=function(t){var e=t.getCTM(),i;return e||(i=t.style[ye],t.style[ye]="none",t.appendChild(nr),e=nr.getCTM(),t.removeChild(nr),i?t.style[ye]=i:t.style.removeProperty(ye.replace(/([A-Z])/g,"-$1").toLowerCase())),e||ns.clone()},Sf=function(t,e){var i=sa(t),n=t===i,s=i?wu:Fu,o=t.parentNode,a=o&&!i&&o.shadowRoot&&o.shadowRoot.appendChild?o.shadowRoot:o,l,u,f,d,h,c;if(t===Gi)return t;if(s.length||s.push(Us(t,1),Us(t,2),Us(t,3)),l=i?zr:jn,i)n?(f=Ef(t),d=-f.e/f.a,h=-f.f/f.d,u=ns):t.getBBox?(f=t.getBBox(),u=t.transform?t.transform.baseVal:{},u=u.numberOfItems?u.numberOfItems>1?mf(u):u.getItem(0).matrix:ns,d=u.a*f.x+u.c*f.y,h=u.b*f.x+u.d*f.y):(u=new Xi,d=h=0),(n?i:o).appendChild(l),l.setAttribute("transform","matrix("+u.a+","+u.b+","+u.c+","+u.d+","+(u.e+d)+","+(u.f+h)+")");else{if(d=h=0,Mu)for(u=t.offsetParent,f=t;f&&(f=f.parentNode)&&f!==u&&f.parentNode;)(Gi.getComputedStyle(f)[ye]+"").length>4&&(d=f.offsetLeft,h=f.offsetTop,f=0);if(c=Gi.getComputedStyle(t),c.position!=="absolute"&&c.position!=="fixed")for(u=t.offsetParent;o&&o!==u;)d+=o.scrollLeft||0,h+=o.scrollTop||0,o=o.parentNode;f=l.style,f.top=t.offsetTop-h+"px",f.left=t.offsetLeft-d+"px",f[ye]=c[ye],f[ho]=c[ho],f.position=c.position==="fixed"?"fixed":"absolute",a.appendChild(l)}return l},Bs=function(t,e,i,n,s,o,a){return t.a=e,t.b=i,t.c=n,t.d=s,t.e=o,t.f=a,t},Xi=function(){function r(e,i,n,s,o,a){e===void 0&&(e=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),Bs(this,e,i,n,s,o,a)}var t=r.prototype;return t.inverse=function(){var i=this.a,n=this.b,s=this.c,o=this.d,a=this.e,l=this.f,u=i*o-n*s||1e-10;return Bs(this,o/u,-n/u,-s/u,i/u,(s*l-o*a)/u,-(i*l-n*a)/u)},t.multiply=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,u=this.f,f=i.a,d=i.c,h=i.b,c=i.d,_=i.e,p=i.f;return Bs(this,f*n+h*o,f*s+h*a,d*n+c*o,d*s+c*a,l+_*n+p*o,u+_*s+p*a)},t.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,u=this.f;return n===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&u===i.f},t.apply=function(i,n){n===void 0&&(n={});var s=i.x,o=i.y,a=this.a,l=this.b,u=this.c,f=this.d,d=this.e,h=this.f;return n.x=s*a+o*u+d||0,n.y=s*l+o*f+h||0,n},r}();function bi(r,t,e,i){if(!r||!r.parentNode||(je||xu(r)).documentElement===r)return new Xi;var n=hf(r),s=sa(r),o=s?wu:Fu,a=Sf(r),l=o[0].getBoundingClientRect(),u=o[1].getBoundingClientRect(),f=o[2].getBoundingClientRect(),d=a.parentNode,h=gf(r),c=new Xi((u.left-l.left)/100,(u.top-l.top)/100,(f.left-l.left)/100,(f.top-l.top)/100,l.left+(h?0:_f()),l.top+(h?0:pf()));if(d.removeChild(a),n)for(l=n.length;l--;)u=n[l],u.scaleX=u.scaleY=0,u.renderTransform(1,u);return t?c.inverse():c}function Za(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Df(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var X,st,Qt,Ce,qe,$s,Ve,po,qn,ci,ku,_o,Er,oa,Kn,Ee,Qn,Xr,Uu,go,rs=0,Bu=function(){return typeof window<"u"},$u=function(){return X||Bu()&&(X=window.gsap)&&X.registerPlugin&&X},si=function(t){return typeof t=="function"},rr=function(t){return typeof t=="object"},De=function(t){return typeof t>"u"},Wr=function(){return!1},sr="transform",mo="transformOrigin",ii=function(t){return Math.round(t*1e4)/1e4},Hn=Array.isArray,Fr=function(t,e){var i=Qt.createElementNS?Qt.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),t):Qt.createElement(t);return i.style?i:Qt.createElement(t)},Ja=180/Math.PI,Qi=1e20,Tf=new Xi,ni=Date.now||function(){return new Date().getTime()},Hi=[],Sn={},yf=0,Af=/^(?:a|input|textarea|button|select)$/i,tl=0,Zi={},Ge={},Gu=function(t,e){var i={},n;for(n in t)i[n]=e?t[n]*e:t[n];return i},Pf=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},el=function r(t,e){for(var i=t.length,n;i--;)e?t[i].style.touchAction=e:t[i].style.removeProperty("touch-action"),n=t[i].children,n&&n.length&&r(n,e)},Hu=function(){return Hi.forEach(function(t){return t()})},Cf=function(t){Hi.push(t),Hi.length===1&&X.ticker.add(Hu)},il=function(){return!Hi.length&&X.ticker.remove(Hu)},nl=function(t){for(var e=Hi.length;e--;)Hi[e]===t&&Hi.splice(e,1);X.to(il,{overwrite:!0,delay:15,duration:0,onComplete:il,data:"_draggable"})},If=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Tt=function(t,e,i,n){if(t.addEventListener){var s=Er[e];n=n||(ku?{passive:!1}:null),t.addEventListener(s||e,i,n),s&&e!==s&&t.addEventListener(e,i,n)}},Et=function(t,e,i,n){if(t.removeEventListener){var s=Er[e];t.removeEventListener(s||e,i,n),s&&e!==s&&t.removeEventListener(e,i,n)}},oe=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},vf=function(t,e){for(var i=t.length;i--;)if(t[i].identifier===e)return!0},Lf=function r(t){oa=t.touches&&rs<t.touches.length,Et(t.target,"touchend",r)},rl=function(t){oa=t.touches&&rs<t.touches.length,Tt(t.target,"touchend",Lf)},Dn=function(t){return st.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},Tn=function(t){return st.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},sl=function r(t,e){Tt(t,"scroll",e),bn(t.parentNode)||r(t.parentNode,e)},ol=function r(t,e){Et(t,"scroll",e),bn(t.parentNode)||r(t.parentNode,e)},bn=function(t){return!t||t===Ce||t.nodeType===9||t===Qt.body||t===st||!t.nodeType||!t.parentNode},al=function(t,e){var i=e==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,bn(t)?Math.max(Ce[n],qe[n])-(st["inner"+i]||Ce[s]||qe[s]):t[n]-t[s])},Gs=function r(t,e){var i=al(t,"x"),n=al(t,"y");bn(t)?t=Ge:r(t.parentNode,e),t._gsMaxScrollX=i,t._gsMaxScrollY=n,e||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},Hs=function(t,e,i){var n=t.style;n&&(De(n[e])&&(e=qn(e,t)||e),i==null?n.removeProperty&&n.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):n[e]=i)},Sr=function(t){return st.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},Ii={},Ji=function(t){if(t===st)return Ii.left=Ii.top=0,Ii.width=Ii.right=Ce.clientWidth||t.innerWidth||qe.clientWidth||0,Ii.height=Ii.bottom=(t.innerHeight||0)-20<Ce.clientHeight?Ce.clientHeight:t.innerHeight||qe.clientHeight||0,Ii;var e=t.ownerDocument||Qt,i=De(t.pageX)?!t.nodeType&&!De(t.left)&&!De(t.top)?t:ci(t)[0].getBoundingClientRect():{left:t.pageX-Tn(e),top:t.pageY-Dn(e),right:t.pageX-Tn(e)+1,bottom:t.pageY-Dn(e)+1};return De(i.right)&&!De(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):De(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},_t=function(t,e,i){var n=t.vars,s=n[i],o=t._listeners[e],a;return si(s)&&(a=s.apply(n.callbackScope||t,n[i+"Params"]||[t.pointerEvent])),o&&t.dispatchEvent(e)===!1&&(a=!1),a},ll=function(t,e){var i=ci(t)[0],n,s,o;return!i.nodeType&&i!==st?De(t.left)?(s=t.min||t.minX||t.minRotation||0,n=t.min||t.minY||0,{left:s,top:n,width:(t.max||t.maxX||t.maxRotation||0)-s,height:(t.max||t.maxY||0)-n}):(o={x:0,y:0},{left:t.left-o.x,top:t.top-o.y,width:t.width,height:t.height}):bf(i,e)},ae={},bf=function(t,e){e=ci(e)[0];var i=t.getBBox&&t.ownerSVGElement,n=t.ownerDocument||Qt,s,o,a,l,u,f,d,h,c,_,p,g,m;if(t===st)a=Dn(n),s=Tn(n),o=s+(n.documentElement.clientWidth||t.innerWidth||n.body.clientWidth||0),l=a+((t.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:t.innerHeight||n.body.clientHeight||0);else{if(e===st||De(e))return t.getBoundingClientRect();s=a=0,i?(_=t.getBBox(),p=_.width,g=_.height):(t.viewBox&&(_=t.viewBox.baseVal)&&(s=_.x||0,a=_.y||0,p=_.width,g=_.height),p||(m=Sr(t),_=m.boxSizing==="border-box",p=(parseFloat(m.width)||t.clientWidth||0)+(_?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||t.clientHeight||0)+(_?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),o=p,l=g}return t===e?{left:s,top:a,width:o-s,height:l-a}:(u=bi(e,!0).multiply(bi(t)),f=u.apply({x:s,y:a}),d=u.apply({x:o,y:a}),h=u.apply({x:o,y:l}),c=u.apply({x:s,y:l}),s=Math.min(f.x,d.x,h.x,c.x),a=Math.min(f.y,d.y,h.y,c.y),{left:s,top:a,width:Math.max(f.x,d.x,h.x,c.x)-s,height:Math.max(f.y,d.y,h.y,c.y)-a})},Ys=function(t,e,i,n,s,o){var a={},l,u,f;if(e)if(s!==1&&e instanceof Array){if(a.end=l=[],f=e.length,rr(e[0]))for(u=0;u<f;u++)l[u]=Gu(e[u],s);else for(u=0;u<f;u++)l[u]=e[u]*s;i+=1.1,n-=1.1}else si(e)?a.end=function(d){var h=e.call(t,d),c,_;if(s!==1)if(rr(h)){c={};for(_ in h)c[_]=h[_]*s;h=c}else h*=s;return h}:a.end=e;return(i||i===0)&&(a.max=i),(n||n===0)&&(a.min=n),o&&(a.velocity=0),a},Nf=function r(t){var e;return!t||!t.getAttribute||t===qe?!1:(e=t.getAttribute("data-clickable"))==="true"||e!=="false"&&(Af.test(t.nodeName+"")||t.getAttribute("contentEditable")==="true")?!0:r(t.parentNode)},kr=function(t,e){for(var i=t.length,n;i--;)n=t[i],n.ondragstart=n.onselectstart=e?null:Wr,X.set(n,{lazy:!0,userSelect:e?"text":"none"})},Rf=function r(t){if(Sr(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Yu,Eo,Of=function(t,e){t=X.utils.toArray(t)[0],e=e||{};var i=document.createElement("div"),n=i.style,s=t.firstChild,o=0,a=0,l=t.scrollTop,u=t.scrollLeft,f=t.scrollWidth,d=t.scrollHeight,h=0,c=0,_=0,p,g,m,E,T,y;Yu&&e.force3D!==!1?(T="translate3d(",y="px,0px)"):sr&&(T="translate(",y="px)"),this.scrollTop=function(D,I){if(!arguments.length)return-this.top();this.top(-D,I)},this.scrollLeft=function(D,I){if(!arguments.length)return-this.left();this.left(-D,I)},this.left=function(D,I){if(!arguments.length)return-(t.scrollLeft+a);var v=t.scrollLeft-u,C=a;if((v>2||v<-2)&&!I){u=t.scrollLeft,X.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-u),e.onKill&&e.onKill();return}D=-D,D<0?(a=D-.5|0,D=0):D>c?(a=D-c|0,D=c):a=0,(a||C)&&(this._skip||(n[sr]=T+-a+"px,"+-o+y),a+h>=0&&(n.paddingRight=a+h+"px")),t.scrollLeft=D|0,u=t.scrollLeft},this.top=function(D,I){if(!arguments.length)return-(t.scrollTop+o);var v=t.scrollTop-l,C=o;if((v>2||v<-2)&&!I){l=t.scrollTop,X.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),e.onKill&&e.onKill();return}D=-D,D<0?(o=D-.5|0,D=0):D>_?(o=D-_|0,D=_):o=0,(o||C)&&(this._skip||(n[sr]=T+-a+"px,"+-o+y)),t.scrollTop=D|0,l=t.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return c},this.disable=function(){for(s=i.firstChild;s;)E=s.nextSibling,t.appendChild(s),s=E;t===i.parentNode&&t.removeChild(i)},this.enable=function(){if(s=t.firstChild,s!==i){for(;s;)E=s.nextSibling,i.appendChild(s),s=E;t.appendChild(i),this.calibrate()}},this.calibrate=function(D){var I=t.clientWidth===p,v,C,A;l=t.scrollTop,u=t.scrollLeft,!(I&&t.clientHeight===g&&i.offsetHeight===m&&f===t.scrollWidth&&d===t.scrollHeight&&!D)&&((o||a)&&(C=this.left(),A=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),v=Sr(t),(!I||D)&&(n.display="block",n.width="auto",n.paddingRight="0px",h=Math.max(0,t.scrollWidth-t.clientWidth),h&&(h+=parseFloat(v.paddingLeft)+(Eo?parseFloat(v.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=h+"px",Eo&&(n.paddingBottom=v.paddingBottom),p=t.clientWidth,g=t.clientHeight,f=t.scrollWidth,d=t.scrollHeight,c=t.scrollWidth-p,_=t.scrollHeight-g,m=i.offsetHeight,n.display="block",(C||A)&&(this.left(C),this.top(A)))},this.content=i,this.element=t,this._skip=!1,this.enable()},Vs=function(t){if(Bu()&&document.body){var e=window&&window.navigator;st=window,Qt=document,Ce=Qt.documentElement,qe=Qt.body,$s=Fr("div"),Xr=!!window.PointerEvent,Ve=Fr("div"),Ve.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Qn=Ve.style.cursor==="grab"?"grab":"move",Kn=e&&e.userAgent.toLowerCase().indexOf("android")!==-1,_o="ontouchstart"in Ce&&"orientation"in st||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),Eo=function(){var i=Fr("div"),n=Fr("div"),s=n.style,o=qe,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),o.appendChild(i),a=n.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),Er=function(i){for(var n=i.split(","),s=("onpointerdown"in $s?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in $s?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[n[a]]=s[a],o[s[a]]=n[a];try{Ce.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){ku=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),Tt(Qt,"touchcancel",Wr),Tt(st,"touchmove",Wr),qe&&qe.addEventListener("touchstart",Wr),Tt(Qt,"contextmenu",function(){for(var i in Sn)Sn[i].isPressed&&Sn[i].endDrag()}),X=po=$u()}X?(Ee=X.plugins.inertia,Uu=X.core.context||function(){},qn=X.utils.checkPrefix,sr=qn(sr),mo=qn(mo),ci=X.utils.toArray,go=X.core.getStyleSaver,Yu=!!qn("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},Mf=function(){function r(e){this._listeners={},this.target=e||this}var t=r.prototype;return t.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},t.removeEventListener=function(i,n){var s=this._listeners[i],o=s&&s.indexOf(n);o>=0&&s.splice(o,1)},t.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),Ir=function(r){Df(t,r);function t(e,i){var n;n=r.call(this)||this,po||Vs(1),e=ci(e)[0],n.styles=go&&go(e,"transform,left,top"),Ee||(Ee=X.plugins.inertia),n.vars=i=Gu(i||{}),n.target=e,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,X.getProperty(e,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",u=o?"y":"top",f=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),d=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),h=i.minimumMovement||2,c=Za(n),_=ci(i.trigger||i.handle||e),p={},g=0,m=!1,E=i.autoScrollMarginTop||40,T=i.autoScrollMarginRight||40,y=i.autoScrollMarginBottom||40,D=i.autoScrollMarginLeft||40,I=i.clickableTest||Nf,v=0,C=e._gsap||X.core.getCache(e),A=Rf(e),x=function(S,L){return parseFloat(C.get(e,S,L))},R=e.ownerDocument||Qt,k,N,K,Q,$,H,ot,pe,ve,z,j,J,Z,ie,ne,Fn,Ct,As,Je,ti,Ti,kn,Nt,tt,La,re,_e,Ps,Cs,ba,Wt,Na,Or,Ra=function(S){return oe(S),S.stopImmediatePropagation&&S.stopImmediatePropagation(),!1},Le=function F(S){if(c.autoScroll&&c.isDragging&&(m||Ct)){var L=e,P=c.autoScroll*15,b,O,M,Y,w,et,q,it;for(m=!1,Ge.scrollTop=st.pageYOffset!=null?st.pageYOffset:R.documentElement.scrollTop!=null?R.documentElement.scrollTop:R.body.scrollTop,Ge.scrollLeft=st.pageXOffset!=null?st.pageXOffset:R.documentElement.scrollLeft!=null?R.documentElement.scrollLeft:R.body.scrollLeft,Y=c.pointerX-Ge.scrollLeft,w=c.pointerY-Ge.scrollTop;L&&!O;)O=bn(L.parentNode),b=O?Ge:L.parentNode,M=O?{bottom:Math.max(Ce.clientHeight,st.innerHeight||0),right:Math.max(Ce.clientWidth,st.innerWidth||0),left:0,top:0}:b.getBoundingClientRect(),et=q=0,d&&(it=b._gsMaxScrollY-b.scrollTop,it<0?q=it:w>M.bottom-y&&it?(m=!0,q=Math.min(it,P*(1-Math.max(0,M.bottom-w)/y)|0)):w<M.top+E&&b.scrollTop&&(m=!0,q=-Math.min(b.scrollTop,P*(1-Math.max(0,w-M.top)/E)|0)),q&&(b.scrollTop+=q)),f&&(it=b._gsMaxScrollX-b.scrollLeft,it<0?et=it:Y>M.right-T&&it?(m=!0,et=Math.min(it,P*(1-Math.max(0,M.right-Y)/T)|0)):Y<M.left+D&&b.scrollLeft&&(m=!0,et=-Math.min(b.scrollLeft,P*(1-Math.max(0,Y-M.left)/D)|0)),et&&(b.scrollLeft+=et)),O&&(et||q)&&(st.scrollTo(b.scrollLeft,b.scrollTop),$n(c.pointerX+et,c.pointerY+q)),L=b}if(Ct){var pt=c.x,xt=c.y;a?(c.deltaX=pt-parseFloat(C.rotation),c.rotation=pt,C.rotation=pt+"deg",C.renderTransform(1,C)):N?(d&&(c.deltaY=xt-N.top(),N.top(xt)),f&&(c.deltaX=pt-N.left(),N.left(pt))):o?(d&&(c.deltaY=xt-parseFloat(C.y),C.y=xt+"px"),f&&(c.deltaX=pt-parseFloat(C.x),C.x=pt+"px"),C.renderTransform(1,C)):(d&&(c.deltaY=xt-parseFloat(e.style.top||0),e.style.top=xt+"px"),f&&(c.deltaX=pt-parseFloat(e.style.left||0),e.style.left=pt+"px")),pe&&!S&&!Ps&&(Ps=!0,_t(c,"drag","onDrag")===!1&&(f&&(c.x-=c.deltaX),d&&(c.y-=c.deltaY),F(!0)),Ps=!1)}Ct=!1},yi=function(S,L){var P=c.x,b=c.y,O,M;e._gsap||(C=X.core.getCache(e)),C.uncache&&X.getProperty(e,"x"),o?(c.x=parseFloat(C.x),c.y=parseFloat(C.y)):a?c.x=c.rotation=parseFloat(C.rotation):N?(c.y=N.top(),c.x=N.left()):(c.y=parseFloat(e.style.top||(M=Sr(e))&&M.top)||0,c.x=parseFloat(e.style.left||(M||{}).left)||0),(Je||ti||Ti)&&!L&&(c.isDragging||c.isThrowing)&&(Ti&&(Zi.x=c.x,Zi.y=c.y,O=Ti(Zi),O.x!==c.x&&(c.x=O.x,Ct=!0),O.y!==c.y&&(c.y=O.y,Ct=!0)),Je&&(O=Je(c.x),O!==c.x&&(c.x=O,a&&(c.rotation=O),Ct=!0)),ti&&(O=ti(c.y),O!==c.y&&(c.y=O),Ct=!0)),Ct&&Le(!0),S||(c.deltaX=c.x-P,c.deltaY=c.y-b,_t(c,"throwupdate","onThrowUpdate"))},Is=function(S,L,P,b){return L==null&&(L=-1e20),P==null&&(P=Qi),si(S)?function(O){var M=c.isPressed?1-c.edgeResistance:1;return S.call(c,(O>P?P+(O-P)*M:O<L?L+(O-L)*M:O)*b)*b}:Hn(S)?function(O){for(var M=S.length,Y=0,w=Qi,et,q;--M>-1;)et=S[M],q=et-O,q<0&&(q=-q),q<w&&et>=L&&et<=P&&(Y=M,w=q);return S[Y]}:isNaN(S)?function(O){return O}:function(){return S*b}},jc=function(S,L,P,b,O,M,Y){return M=M&&M<Qi?M*M:Qi,si(S)?function(w){var et=c.isPressed?1-c.edgeResistance:1,q=w.x,it=w.y,pt,xt,Be;return w.x=q=q>P?P+(q-P)*et:q<L?L+(q-L)*et:q,w.y=it=it>O?O+(it-O)*et:it<b?b+(it-b)*et:it,pt=S.call(c,w),pt!==w&&(w.x=pt.x,w.y=pt.y),Y!==1&&(w.x*=Y,w.y*=Y),M<Qi&&(xt=w.x-q,Be=w.y-it,xt*xt+Be*Be>M&&(w.x=q,w.y=it)),w}:Hn(S)?function(w){for(var et=S.length,q=0,it=Qi,pt,xt,Be,se;--et>-1;)Be=S[et],pt=Be.x-w.x,xt=Be.y-w.y,se=pt*pt+xt*xt,se<it&&(q=et,it=se);return it<=M?S[q]:w}:function(w){return w}},vs=function(){var S,L,P,b;ot=!1,N?(N.calibrate(),c.minX=j=-N.maxScrollLeft(),c.minY=Z=-N.maxScrollTop(),c.maxX=z=c.maxY=J=0,ot=!0):i.bounds&&(S=ll(i.bounds,e.parentNode),a?(c.minX=j=S.left,c.maxX=z=S.left+S.width,c.minY=Z=c.maxY=J=0):!De(i.bounds.maxX)||!De(i.bounds.maxY)?(S=i.bounds,c.minX=j=S.minX,c.minY=Z=S.minY,c.maxX=z=S.maxX,c.maxY=J=S.maxY):(L=ll(e,e.parentNode),c.minX=j=Math.round(x(l,"px")+S.left-L.left),c.minY=Z=Math.round(x(u,"px")+S.top-L.top),c.maxX=z=Math.round(j+(S.width-L.width)),c.maxY=J=Math.round(Z+(S.height-L.height))),j>z&&(c.minX=z,c.maxX=z=j,j=c.minX),Z>J&&(c.minY=J,c.maxY=J=Z,Z=c.minY),a&&(c.minRotation=j,c.maxRotation=z),ot=!0),i.liveSnap&&(P=i.liveSnap===!0?i.snap||{}:i.liveSnap,b=Hn(P)||si(P),a?(Je=Is(b?P:P.rotation,j,z,1),ti=null):P.points?Ti=jc(b?P:P.points,j,z,Z,J,P.radius,N?-1:1):(f&&(Je=Is(b?P:P.x||P.left||P.scrollLeft,j,z,N?-1:1)),d&&(ti=Is(b?P:P.y||P.top||P.scrollTop,Z,J,N?-1:1))))},qc=function(){c.isThrowing=!1,_t(c,"throwcomplete","onThrowComplete")},Kc=function(){c.isThrowing=!1},Ls=function(S,L){var P,b,O,M;S&&Ee?(S===!0&&(P=i.snap||i.liveSnap||{},b=Hn(P)||si(P),S={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?S.rotation=Ys(c,b?P:P.rotation,z,j,1,L):(f&&(S[l]=Ys(c,b?P:P.points||P.x||P.left,z,j,N?-1:1,L||c.lockedAxis==="x")),d&&(S[u]=Ys(c,b?P:P.points||P.y||P.top,J,Z,N?-1:1,L||c.lockedAxis==="y")),(P.points||Hn(P)&&rr(P[0]))&&(S.linkedProps=l+","+u,S.radius=P.radius))),c.isThrowing=!0,M=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-c.edgeResistance+.2:i.overshootTolerance,S.duration||(S.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?M===0||rr(S)&&S.resistance>1e3?0:.5:i.minDuration,overshoot:M}),c.tween=O=X.to(N||e,{inertia:S,data:"_draggable",inherit:!1,onComplete:qc,onInterrupt:Kc,onUpdate:i.fastMode?_t:yi,onUpdateParams:i.fastMode?[c,"onthrowupdate","onThrowUpdate"]:P&&P.radius?[!1,!0]:[]}),i.fastMode||(N&&(N._skip=!0),O.render(1e9,!0,!0),yi(!0,!0),c.endX=c.x,c.endY=c.y,a&&(c.endRotation=c.x),O.play(0),yi(!0,!0),N&&(N._skip=!1))):ot&&c.applyBounds()},Oa=function(S){var L=tt,P;tt=bi(e.parentNode,!0),S&&c.isPressed&&!tt.equals(L||new Xi)&&(P=L.inverse().apply({x:K,y:Q}),tt.apply(P,P),K=P.x,Q=P.y),tt.equals(Tf)&&(tt=null)},Mr=function(){var S=1-c.edgeResistance,L=A?Tn(R):0,P=A?Dn(R):0,b,O,M;o&&(C.x=x(l,"px")+"px",C.y=x(u,"px")+"px",C.renderTransform()),Oa(!1),ae.x=c.pointerX-L,ae.y=c.pointerY-P,tt&&tt.apply(ae,ae),K=ae.x,Q=ae.y,Ct&&($n(c.pointerX,c.pointerY),Le(!0)),Na=bi(e),N?(vs(),H=N.top(),$=N.left()):(Un()?(yi(!0,!0),vs()):c.applyBounds(),a?(b=e.ownerSVGElement?[C.xOrigin-e.getBBox().x,C.yOrigin-e.getBBox().y]:(Sr(e)[mo]||"0 0").split(" "),Fn=c.rotationOrigin=bi(e).apply({x:parseFloat(b[0])||0,y:parseFloat(b[1])||0}),yi(!0,!0),O=c.pointerX-Fn.x-L,M=Fn.y-c.pointerY+P,$=c.x,H=c.y=Math.atan2(M,O)*Ja):(H=x(u,"px"),$=x(l,"px"))),ot&&S&&($>z?$=z+($-z)/S:$<j&&($=j-(j-$)/S),a||(H>J?H=J+(H-J)/S:H<Z&&(H=Z-(Z-H)/S))),c.startX=$=ii($),c.startY=H=ii(H)},Un=function(){return c.tween&&c.tween.isActive()},Qc=function(){Ve.parentNode&&!Un()&&!c.isDragging&&Ve.parentNode.removeChild(Ve)},Bn=function(S,L){var P;if(!k||c.isPressed||!S||(S.type==="mousedown"||S.type==="pointerdown")&&!L&&ni()-v<30&&Er[c.pointerEvent.type]){Wt&&S&&k&&oe(S);return}if(La=Un(),Or=!1,c.pointerEvent=S,Er[S.type]?(Nt=~S.type.indexOf("touch")?S.currentTarget||S.target:R,Tt(Nt,"touchend",ge),Tt(Nt,"touchmove",Ai),Tt(Nt,"touchcancel",ge),Tt(R,"touchstart",rl)):(Nt=null,Tt(R,"mousemove",Ai)),_e=null,(!Xr||!Nt)&&(Tt(R,"mouseup",ge),S&&S.target&&Tt(S.target,"mouseup",ge)),kn=I.call(c,S.target)&&i.dragClickables===!1&&!L,kn){Tt(S.target,"change",ge),_t(c,"pressInit","onPressInit"),_t(c,"press","onPress"),kr(_,!0),Wt=!1;return}if(re=!Nt||f===d||c.vars.allowNativeTouchScrolling===!1||c.vars.allowContextMenu&&S&&(S.ctrlKey||S.which>2)?!1:f?"y":"x",Wt=!re&&!c.allowEventDefault,Wt&&(oe(S),Tt(st,"touchforcechange",oe)),S.changedTouches?(S=ie=S.changedTouches[0],ne=S.identifier):S.pointerId?ne=S.pointerId:ie=ne=null,rs++,Cf(Le),Q=c.pointerY=S.pageY,K=c.pointerX=S.pageX,_t(c,"pressInit","onPressInit"),(re||c.autoScroll)&&Gs(e.parentNode),e.parentNode&&c.autoScroll&&!N&&!a&&e.parentNode._gsMaxScrollX&&!Ve.parentNode&&!e.getBBox&&(Ve.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(Ve)),Mr(),c.tween&&c.tween.kill(),c.isThrowing=!1,X.killTweensOf(N||e,p,!0),N&&X.killTweensOf(e,{scrollTo:1},!0),c.tween=c.lockedAxis=null,(i.zIndexBoost||!a&&!N&&i.zIndexBoost!==!1)&&(e.style.zIndex=t.zIndex++),c.isPressed=!0,pe=!!(i.onDrag||c._listeners.drag),ve=!!(i.onMove||c._listeners.move),i.cursor!==!1||i.activeCursor)for(P=_.length;--P>-1;)X.set(_[P],{cursor:i.activeCursor||i.cursor||(Qn==="grab"?"grabbing":Qn)});_t(c,"press","onPress")},Ai=function(S){var L=S,P,b,O,M,Y,w;if(!k||oa||!c.isPressed||!S){Wt&&S&&k&&oe(S);return}if(c.pointerEvent=S,P=S.changedTouches,P){if(S=P[0],S!==ie&&S.identifier!==ne){for(M=P.length;--M>-1&&(S=P[M]).identifier!==ne&&S.target!==e;);if(M<0)return}}else if(S.pointerId&&ne&&S.pointerId!==ne)return;if(Nt&&re&&!_e&&(ae.x=S.pageX-(A?Tn(R):0),ae.y=S.pageY-(A?Dn(R):0),tt&&tt.apply(ae,ae),b=ae.x,O=ae.y,Y=Math.abs(b-K),w=Math.abs(O-Q),(Y!==w&&(Y>h||w>h)||Kn&&re===_e)&&(_e=Y>w&&f?"x":"y",re&&_e!==re&&Tt(st,"touchforcechange",oe),c.vars.lockAxisOnTouchScroll!==!1&&f&&d&&(c.lockedAxis=_e==="x"?"y":"x",si(c.vars.onLockAxis)&&c.vars.onLockAxis.call(c,L)),Kn&&re===_e))){ge(L);return}!c.allowEventDefault&&(!re||_e&&re!==_e)&&L.cancelable!==!1?(oe(L),Wt=!0):Wt&&(Wt=!1),c.autoScroll&&(m=!0),$n(S.pageX,S.pageY,ve)},$n=function(S,L,P){var b=1-c.dragResistance,O=1-c.edgeResistance,M=c.pointerX,Y=c.pointerY,w=H,et=c.x,q=c.y,it=c.endX,pt=c.endY,xt=c.endRotation,Be=Ct,se,ei,Rt,mt,bs,me;c.pointerX=S,c.pointerY=L,A&&(S-=Tn(R),L-=Dn(R)),a?(mt=Math.atan2(Fn.y-L,S-Fn.x)*Ja,bs=c.y-mt,bs>180?(H-=360,c.y=mt):bs<-180&&(H+=360,c.y=mt),c.x!==$||Math.max(Math.abs(K-S),Math.abs(Q-L))>h?(c.y=mt,Rt=$+(H-mt)*b):Rt=$):(tt&&(me=S*tt.a+L*tt.c+tt.e,L=S*tt.b+L*tt.d+tt.f,S=me),ei=L-Q,se=S-K,ei<h&&ei>-h&&(ei=0),se<h&&se>-h&&(se=0),(c.lockAxis||c.lockedAxis)&&(se||ei)&&(me=c.lockedAxis,me||(c.lockedAxis=me=f&&Math.abs(se)>Math.abs(ei)?"y":d?"x":null,me&&si(c.vars.onLockAxis)&&c.vars.onLockAxis.call(c,c.pointerEvent)),me==="y"?ei=0:me==="x"&&(se=0)),Rt=ii($+se*b),mt=ii(H+ei*b)),(Je||ti||Ti)&&(c.x!==Rt||c.y!==mt&&!a)&&(Ti&&(Zi.x=Rt,Zi.y=mt,me=Ti(Zi),Rt=ii(me.x),mt=ii(me.y)),Je&&(Rt=ii(Je(Rt))),ti&&(mt=ii(ti(mt)))),ot&&(Rt>z?Rt=z+Math.round((Rt-z)*O):Rt<j&&(Rt=j+Math.round((Rt-j)*O)),a||(mt>J?mt=Math.round(J+(mt-J)*O):mt<Z&&(mt=Math.round(Z+(mt-Z)*O)))),(c.x!==Rt||c.y!==mt&&!a)&&(a?(c.endRotation=c.x=c.endX=Rt,Ct=!0):(d&&(c.y=c.endY=mt,Ct=!0),f&&(c.x=c.endX=Rt,Ct=!0)),!P||_t(c,"move","onMove")!==!1?!c.isDragging&&c.isPressed&&(c.isDragging=Or=!0,_t(c,"dragstart","onDragStart")):(c.pointerX=M,c.pointerY=Y,H=w,c.x=et,c.y=q,c.endX=it,c.endY=pt,c.endRotation=xt,Ct=Be))},ge=function F(S,L){if(!k||!c.isPressed||S&&ne!=null&&!L&&(S.pointerId&&S.pointerId!==ne&&S.target!==e||S.changedTouches&&!vf(S.changedTouches,ne))){Wt&&S&&k&&oe(S);return}c.isPressed=!1;var P=S,b=c.isDragging,O=c.vars.allowContextMenu&&S&&(S.ctrlKey||S.which>2),M=X.delayedCall(.001,Qc),Y,w,et,q,it;if(Nt?(Et(Nt,"touchend",F),Et(Nt,"touchmove",Ai),Et(Nt,"touchcancel",F),Et(R,"touchstart",rl)):Et(R,"mousemove",Ai),Et(st,"touchforcechange",oe),(!Xr||!Nt)&&(Et(R,"mouseup",F),S&&S.target&&Et(S.target,"mouseup",F)),Ct=!1,b&&(g=tl=ni(),c.isDragging=!1),nl(Le),kn&&!O){S&&(Et(S.target,"change",F),c.pointerEvent=P),kr(_,!1),_t(c,"release","onRelease"),_t(c,"click","onClick"),kn=!1;return}for(w=_.length;--w>-1;)Hs(_[w],"cursor",i.cursor||(i.cursor!==!1?Qn:null));if(rs--,S){if(Y=S.changedTouches,Y&&(S=Y[0],S!==ie&&S.identifier!==ne)){for(w=Y.length;--w>-1&&(S=Y[w]).identifier!==ne&&S.target!==e;);if(w<0&&!L)return}c.pointerEvent=P,c.pointerX=S.pageX,c.pointerY=S.pageY}return O&&P?(oe(P),Wt=!0,_t(c,"release","onRelease")):P&&!b?(Wt=!1,La&&(i.snap||i.bounds)&&Ls(i.inertia||i.throwProps),_t(c,"release","onRelease"),(!Kn||P.type!=="touchmove")&&P.type.indexOf("cancel")===-1&&(_t(c,"click","onClick"),ni()-v<300&&_t(c,"doubleclick","onDoubleClick"),q=P.target||e,v=ni(),it=function(){v!==Cs&&c.enabled()&&!c.isPressed&&!P.defaultPrevented&&(q.click?q.click():R.createEvent&&(et=R.createEvent("MouseEvents"),et.initMouseEvent("click",!0,!0,st,1,c.pointerEvent.screenX,c.pointerEvent.screenY,c.pointerX,c.pointerY,!1,!1,!1,!1,0,null),q.dispatchEvent(et)))},!Kn&&!P.defaultPrevented&&X.delayedCall(.05,it))):(Ls(i.inertia||i.throwProps),!c.allowEventDefault&&P&&(i.dragClickables!==!1||!I.call(c,P.target))&&b&&(!re||_e&&re===_e)&&P.cancelable!==!1?(Wt=!0,oe(P)):Wt=!1,_t(c,"release","onRelease")),Un()&&M.duration(c.tween.duration()),b&&_t(c,"dragend","onDragEnd"),!0},xr=function(S){if(S&&c.isDragging&&!N){var L=S.target||e.parentNode,P=L.scrollLeft-L._gsScrollX,b=L.scrollTop-L._gsScrollY;(P||b)&&(tt?(K-=P*tt.a+b*tt.c,Q-=b*tt.d+P*tt.b):(K-=P,Q-=b),L._gsScrollX+=P,L._gsScrollY+=b,$n(c.pointerX,c.pointerY))}},Ma=function(S){var L=ni(),P=L-v<100,b=L-g<50,O=P&&Cs===v,M=c.pointerEvent&&c.pointerEvent.defaultPrevented,Y=P&&ba===v,w=S.isTrusted||S.isTrusted==null&&P&&O;if((O||b&&c.vars.suppressClickOnDrag!==!1)&&S.stopImmediatePropagation&&S.stopImmediatePropagation(),P&&!(c.pointerEvent&&c.pointerEvent.defaultPrevented)&&(!O||w&&!Y)){w&&O&&(ba=v),Cs=v;return}(c.isPressed||b||P)&&(!w||!S.detail||!P||M)&&oe(S),!P&&!b&&!Or&&(S&&S.target&&(c.pointerEvent=S),_t(c,"click","onClick"))},xa=function(S){return tt?{x:S.x*tt.a+S.y*tt.c+tt.e,y:S.x*tt.b+S.y*tt.d+tt.f}:{x:S.x,y:S.y}};return As=t.get(e),As&&As.kill(),n.startDrag=function(F,S){var L,P,b,O;Bn(F||c.pointerEvent,!0),S&&!c.hitTest(F||c.pointerEvent)&&(L=Ji(F||c.pointerEvent),P=Ji(e),b=xa({x:L.left+L.width/2,y:L.top+L.height/2}),O=xa({x:P.left+P.width/2,y:P.top+P.height/2}),K-=b.x-O.x,Q-=b.y-O.y),c.isDragging||(c.isDragging=Or=!0,_t(c,"dragstart","onDragStart"))},n.drag=Ai,n.endDrag=function(F){return ge(F||c.pointerEvent,!0)},n.timeSinceDrag=function(){return c.isDragging?0:(ni()-g)/1e3},n.timeSinceClick=function(){return(ni()-v)/1e3},n.hitTest=function(F,S){return t.hitTest(c.target,F,S)},n.getDirection=function(F,S){var L=F==="velocity"&&Ee?F:rr(F)&&!a?"element":"start",P,b,O,M,Y,w;return L==="element"&&(Y=Ji(c.target),w=Ji(F)),P=L==="start"?c.x-$:L==="velocity"?Ee.getVelocity(e,l):Y.left+Y.width/2-(w.left+w.width/2),a?P<0?"counter-clockwise":"clockwise":(S=S||2,b=L==="start"?c.y-H:L==="velocity"?Ee.getVelocity(e,u):Y.top+Y.height/2-(w.top+w.height/2),O=Math.abs(P/b),M=O<1/S?"":P<0?"left":"right",O<S&&(M!==""&&(M+="-"),M+=b<0?"up":"down"),M)},n.applyBounds=function(F,S){var L,P,b,O,M,Y;if(F&&i.bounds!==F)return i.bounds=F,c.update(!0,S);if(yi(!0),vs(),ot&&!Un()){if(L=c.x,P=c.y,L>z?L=z:L<j&&(L=j),P>J?P=J:P<Z&&(P=Z),(c.x!==L||c.y!==P)&&(b=!0,c.x=c.endX=L,a?c.endRotation=L:c.y=c.endY=P,Ct=!0,Le(!0),c.autoScroll&&!c.isDragging))for(Gs(e.parentNode),O=e,Ge.scrollTop=st.pageYOffset!=null?st.pageYOffset:R.documentElement.scrollTop!=null?R.documentElement.scrollTop:R.body.scrollTop,Ge.scrollLeft=st.pageXOffset!=null?st.pageXOffset:R.documentElement.scrollLeft!=null?R.documentElement.scrollLeft:R.body.scrollLeft;O&&!Y;)Y=bn(O.parentNode),M=Y?Ge:O.parentNode,d&&M.scrollTop>M._gsMaxScrollY&&(M.scrollTop=M._gsMaxScrollY),f&&M.scrollLeft>M._gsMaxScrollX&&(M.scrollLeft=M._gsMaxScrollX),O=M;c.isThrowing&&(b||c.endX>z||c.endX<j||c.endY>J||c.endY<Z)&&Ls(i.inertia||i.throwProps,b)}return c},n.update=function(F,S,L){if(S&&c.isPressed){var P=bi(e),b=Na.apply({x:c.x-$,y:c.y-H}),O=bi(e.parentNode,!0);O.apply({x:P.e-b.x,y:P.f-b.y},b),c.x-=b.x-O.e,c.y-=b.y-O.f,Le(!0),Mr()}var M=c.x,Y=c.y;return Oa(!S),F?c.applyBounds():(Ct&&L&&Le(!0),yi(!0)),S&&($n(c.pointerX,c.pointerY),Ct&&Le(!0)),c.isPressed&&!S&&(f&&Math.abs(M-c.x)>.01||d&&Math.abs(Y-c.y)>.01&&!a)&&Mr(),c.autoScroll&&(Gs(e.parentNode,c.isDragging),m=c.isDragging,Le(!0),ol(e,xr),sl(e,xr)),c},n.enable=function(F){var S={lazy:!0},L,P,b;if(i.cursor!==!1&&(S.cursor=i.cursor||Qn),X.utils.checkPrefix("touchCallout")&&(S.touchCallout="none"),F!=="soft"){for(el(_,f===d?"none":i.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||i.allowEventDefault?"manipulation":f?"pan-y":"pan-x"),P=_.length;--P>-1;)b=_[P],Xr||Tt(b,"mousedown",Bn),Tt(b,"touchstart",Bn),Tt(b,"click",Ma,!0),X.set(b,S),b.getBBox&&b.ownerSVGElement&&f!==d&&X.set(b.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":f?"pan-y":"pan-x"}),i.allowContextMenu||Tt(b,"contextmenu",Ra);kr(_,!1)}return sl(e,xr),k=!0,Ee&&F!=="soft"&&Ee.track(N||e,o?"x,y":a?"rotation":"top,left"),e._gsDragID=L=e._gsDragID||"d"+yf++,Sn[L]=c,N&&(N.enable(),N.element._gsDragID=L),(i.bounds||a)&&Mr(),i.bounds&&c.applyBounds(),c},n.disable=function(F){for(var S=c.isDragging,L=_.length,P;--L>-1;)Hs(_[L],"cursor",null);if(F!=="soft"){for(el(_,null),L=_.length;--L>-1;)P=_[L],Hs(P,"touchCallout",null),Et(P,"mousedown",Bn),Et(P,"touchstart",Bn),Et(P,"click",Ma,!0),Et(P,"contextmenu",Ra);kr(_,!0),Nt&&(Et(Nt,"touchcancel",ge),Et(Nt,"touchend",ge),Et(Nt,"touchmove",Ai)),Et(R,"mouseup",ge),Et(R,"mousemove",Ai)}return ol(e,xr),k=!1,Ee&&F!=="soft"&&(Ee.untrack(N||e,o?"x,y":a?"rotation":"top,left"),c.tween&&c.tween.kill()),N&&N.disable(),nl(Le),c.isDragging=c.isPressed=kn=!1,S&&_t(c,"dragend","onDragEnd"),c},n.enabled=function(F,S){return arguments.length?F?c.enable(S):c.disable(S):k},n.kill=function(){return c.isThrowing=!1,c.tween&&c.tween.kill(),c.disable(),X.set(_,{clearProps:"userSelect"}),delete Sn[e._gsDragID],c},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(N=n.scrollProxy=new Of(e,Pf({onKill:function(){c.isPressed&&ge(null)}},i)),e.style.overflowY=d&&!_o?"auto":"hidden",e.style.overflowX=f&&!_o?"auto":"hidden",e=N.content),a?p.rotation=1:(f&&(p[l]=1),d&&(p[u]=1)),C.force3D="force3D"in i?i.force3D:!0,Uu(Za(n)),n.enable(),n}return t.register=function(i){X=i,Vs()},t.create=function(i,n){return po||Vs(!0),ci(i).map(function(s){return new t(s,n)})},t.get=function(i){return Sn[(ci(i)[0]||{})._gsDragID]},t.timeSinceDrag=function(){return(ni()-tl)/1e3},t.hitTest=function(i,n,s){if(i===n)return!1;var o=Ji(i),a=Ji(n),l=o.top,u=o.left,f=o.right,d=o.bottom,h=o.width,c=o.height,_=a.left>f||a.right<u||a.top>d||a.bottom<l,p,g,m;return _||!s?!_:(m=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(u,a.left),top:Math.max(l,a.top)},p.width=Math.min(f,a.right)-p.left,p.height=Math.min(d,a.bottom)-p.top,p.width<0||p.height<0?!1:m?(s*=.01,g=p.width*p.height,g>=h*c*s||g>=a.width*a.height*s):p.width>s&&p.height>s)},t}(Mf);If(Ir.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Ir.zIndex=1e3;Ir.version="3.13.0";$u()&&X.registerPlugin(Ir);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Oe,So,or,Vu,sn,fn,Do,zu,Xu=function(){return Oe||typeof window<"u"&&(Oe=window.gsap)},To={},xf=function(t){return Math.round(t*1e4)/1e4},yo=function(t){return zu(t).id},Zn=function(t){return To[yo(typeof t=="string"?or(t)[0]:t)]},ul=function(t){var e=sn,i;if(t-Do>=.05)for(Do=t;e;)i=e.g(e.t,e.p),(i!==e.v1||t-e.t1>.2)&&(e.v2=e.v1,e.v1=i,e.t2=e.t1,e.t1=t),e=e._next},wf={deg:360,rad:Math.PI*2},zs=function(){Oe=Xu(),Oe&&(or=Oe.utils.toArray,Vu=Oe.utils.getUnit,zu=Oe.core.getCache,fn=Oe.ticker,So=1)},Ff=function(t,e,i,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=wf[i||Vu(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=fn.time,n&&(this._next=n,n._prev=this)},vr=function(){function r(e,i){So||zs(),this.target=or(e)[0],To[yo(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){Oe=i,zs()};var t=r.prototype;return t.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),o,a,l;return o=parseFloat(n?s.v1:s.g(s.t,s.p)),a=o-parseFloat(s.v2),l=s.rCap,l&&(a=a%l,a!==a%(l/2)&&(a=a<0?a+l:a-l)),xf(a/((n?s.t1:fn.time)-s.t2))},t.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},t.isTracking=function(i){return i in this._props},t.add=function(i,n){i in this._props||(sn||(fn.add(ul),Do=fn.time),sn=this._props[i]=new Ff(this.target,i,n,sn))},t.remove=function(i){var n=this._props[i],s,o;n&&(s=n._prev,o=n._next,s&&(s._next=o),o?o._prev=s:sn===n&&(fn.remove(ul),sn=0),delete this._props[i])},t.kill=function(i){for(var n in this._props)this.remove(n);i||delete To[yo(this.target)]},r.track=function(i,n,s){So||zs();for(var o=[],a=or(i),l=n.split(","),u=(s||"").split(","),f=a.length,d,h;f--;){for(d=Zn(a[f])||new r(a[f]),h=l.length;h--;)d.add(l[h],u[h]||u[0]);o.push(d)}return o},r.untrack=function(i,n){var s=(n||"").split(",");or(i).forEach(function(o){var a=Zn(o);a&&(s.length?s.forEach(function(l){return a.remove(l)}):a.kill(1))})},r.isTracking=function(i,n){var s=Zn(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=Zn(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();vr.getByTarget=Zn;Xu()&&Oe.registerPlugin(vr);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var yt,Wu,cl,ju,Ao,ar,qu,Ku,Qu,aa,Zu,lr,Po,Ju,ss=vr.getByTarget,tc=function(){return yt||typeof window<"u"&&(yt=window.gsap)&&yt.registerPlugin&&yt},kf=function(t){return typeof t=="string"},Dr=function(t){return typeof t=="number"},pi=function(t){return typeof t=="object"},Co=function(t){return typeof t=="function"},Uf=1,ec=Array.isArray,Bf=function(t){return t},yn=1e10,dl=1/yn,ic=.05,$f=function(t){return Math.round(t*1e4)/1e4},Gf=function(t,e,i){for(var n in e)!(n in t)&&n!==i&&(t[n]=e[n]);return t},Hf=function r(t){var e={},i,n;for(i in t)e[i]=pi(n=t[i])&&!ec(n)?r(n):n;return e},fl=function(t,e,i,n,s){var o=e.length,a=0,l=yn,u,f,d,h;if(pi(t)){for(;o--;){u=e[o],f=0;for(d in t)h=u[d]-t[d],f+=h*h;f<l&&(a=o,l=f)}if((s||yn)<yn&&s<Math.sqrt(l))return t}else for(;o--;)u=e[o],f=u-t,f<0&&(f=-f),f<l&&u>=n&&u<=i&&(a=o,l=f);return e[a]},nc=function(t,e,i,n,s,o,a){if(t.end==="auto")return t;var l=t.end,u,f;if(i=isNaN(i)?yn:i,n=isNaN(n)?-1e10:n,pi(e)){if(u=e.calculated?e:(Co(l)?l(e,a):fl(e,l,i,n,o))||e,!e.calculated){for(f in u)e[f]=u[f];e.calculated=!0}u=u[s]}else u=Co(l)?l(e,a):ec(l)?fl(e,l,i,n,o):parseFloat(l);return u>i?u=i:u<n&&(u=n),{max:u,min:u,unitFactor:t.unitFactor}},os=function(t,e,i){return isNaN(t[e])?i:+t[e]},la=function(t,e){return e*ic*t/aa},hl=function(t,e,i){return Math.abs((e-t)*aa/i/ic)},rc={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},sc=function(t,e,i,n){if(e.linkedProps){var s=e.linkedProps.split(","),o={},a,l,u,f,d,h;for(a=0;a<s.length;a++)l=s[a],u=e[l],u&&(Dr(u.velocity)?f=u.velocity:(d=d||ss(t),f=d&&d.isTracking(l)?d.get(l):0),h=Math.abs(f/os(u,"resistance",n)),o[l]=parseFloat(i(t,l))+la(f,h));return o}},Yf=function(t,e,i,n,s,o){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),kf(t)&&(t=ju(t)[0]),!t)return 0;var a=0,l=yn,u=e.inertia||e,f=Qu(t).get,d=os(u,"resistance",ar.resistance),h,c,_,p,g,m,E,T,y,D;D=sc(t,u,f,d);for(h in u)rc[h]||(c=u[h],pi(c)||(T=T||ss(t),T&&T.isTracking(h)?c=Dr(c)?{velocity:c}:{velocity:T.get(h)}:(p=+c||0,_=Math.abs(p/d))),pi(c)&&(Dr(c.velocity)?p=c.velocity:(T=T||ss(t),p=T&&T.isTracking(h)?T.get(h):0),_=Zu(n,i,Math.abs(p/os(c,"resistance",d))),g=parseFloat(f(t,h))||0,m=g+la(p,_),"end"in c&&(c=nc(c,D&&h in D?D:m,c.max,c.min,h,u.radius,p),lr===e&&(lr=u=Hf(e)),u[h]=Gf(c,u[h],"end")),"max"in c&&m>+c.max+dl?(y=c.unitFactor||ar.unitFactors[h]||1,E=g>c.max&&c.min!==c.max||p*y>-15&&p*y<45?n+(i-n)*.1:hl(g,c.max,p),E+s<l&&(l=E+s)):"min"in c&&m<+c.min-dl&&(y=c.unitFactor||ar.unitFactors[h]||1,E=g<c.min&&c.min!==c.max||p*y>-45&&p*y<15?n+(i-n)*.1:hl(g,c.min,p),E+s<l&&(l=E+s)),E>a&&(a=E)),_>a&&(a=_));return a>l&&(a=l),a>i?i:a<n?n:a},pl=function(){yt=tc(),yt&&(cl=yt.parseEase,ju=yt.utils.toArray,qu=yt.utils.getUnit,Qu=yt.core.getCache,Zu=yt.utils.clamp,Po=yt.core.getStyleSaver,Ju=yt.core.reverting||function(){},Ao=cl("power3"),aa=Ao(.05),Ku=yt.core.PropTween,yt.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),ar=yt.config(),yt.registerPlugin(vr),Wu=1)},ua={version:"3.13.0",name:"inertia",register:function(t){yt=t,pl()},init:function(t,e,i,n,s){Wu||pl();var o=ss(t);if(e==="auto"){if(!o){console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");return}e=o.getAll()}this.styles=Po&&typeof t.style=="object"&&Po(t),this.target=t,this.tween=i,lr=e;var a=t._gsap,l=a.get,u=e.duration,f=pi(u),d=e.preventOvershoot||f&&u.overshoot===0,h=os(e,"resistance",ar.resistance),c=Dr(u)?u:Yf(t,e,f&&u.max||10,f&&u.min||.2,f&&"overshoot"in u?+u.overshoot:d?0:1),_,p,g,m,E,T,y,D,I;e=lr,lr=0,I=sc(t,e,l,h);for(_ in e)rc[_]||(p=e[_],Co(p)&&(p=p(n,t,s)),Dr(p)?E=p:pi(p)&&!isNaN(p.velocity)?E=+p.velocity:o&&o.isTracking(_)?E=o.get(_):console.warn("ERROR: No velocity was defined for "+t+" property: "+_),T=la(E,c),D=0,g=l(t,_),m=qu(g),g=parseFloat(g),pi(p)&&(y=g+T,"end"in p&&(p=nc(p,I&&_ in I?I:y,p.max,p.min,_,e.radius,E)),"max"in p&&+p.max<y?d||p.preventOvershoot?T=p.max-g:D=p.max-g-T:"min"in p&&+p.min>y&&(d||p.preventOvershoot?T=p.min-g:D=p.min-g-T)),this._props.push(_),this.styles&&this.styles.save(_),this._pt=new Ku(this._pt,t,_,g,0,Bf,0,a.set(t,_,this)),this._pt.u=m||0,this._pt.c1=T,this._pt.c2=D);return i.duration(c),Uf},render:function(t,e){var i=e._pt;if(t=Ao(e.tween._time/e.tween._dur),t||!Ju())for(;i;)i.set(i.t,i.p,$f(i.s+i.c1*t+i.c2*t*t)+i.u,i.d,t),i=i._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return ua[r]=vr[r]});tc()&&yt.registerPlugin(ua);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Vf=/(?:^\s+|\s+$)/g,zf=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function oc(r){var t=r.nodeType,e="";if(t===1||t===9||t===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)e+=oc(r)}else if(t===3||t===4)return r.nodeValue;return e}function Io(r,t,e,i,n){for(var s=r.firstChild,o=[],a;s;)s.nodeType===3?(a=(s.nodeValue+"").replace(/^\n+/g,""),i||(a=a.replace(/\s+/g," ")),o.push.apply(o,ac(a,t,e,i,n))):(s.nodeName+"").toLowerCase()==="br"?o[o.length-1]+="<br>":o.push(s.outerHTML),s=s.nextSibling;if(!n)for(a=o.length;a--;)o[a]==="&"&&o.splice(a,1,"&amp;");return o}function ac(r,t,e,i,n){if(r+="",e&&(r=r.trim?r.trim():r.replace(Vf,"")),t&&t!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var s=[],o=r.length,a=0,l,u;a<o;a++)u=r.charAt(a),(u.charCodeAt(0)>=55296&&u.charCodeAt(0)<=56319||r.charCodeAt(a+1)>=65024&&r.charCodeAt(a+1)<=65039)&&(l=((r.substr(a,12).split(zf)||[])[1]||"").length||2,u=r.substr(a,l),s.emoji=1,a+=l-1),s.push(n?u:u===">"?"&gt;":u==="<"?"&lt;":i&&u===" "&&(r.charAt(a-1)===" "||r.charAt(a+1)===" ")?"&nbsp;":u);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Jn,Ur,Xf=function(){return Jn||typeof window<"u"&&(Jn=window.gsap)&&Jn.registerPlugin&&Jn},Lr={version:"3.13.0",name:"text",init:function(t,e,i){typeof e!="object"&&(e={value:e});var n=t.nodeName.toUpperCase(),s=this,o=e,a=o.newClass,l=o.oldClass,u=o.preserveSpaces,f=o.rtl,d=s.delimiter=e.delimiter||"",h=s.fillChar=e.fillChar||(e.padSpace?"&nbsp;":""),c,_,p,g,m,E,T,y;if(s.svg=t.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in t)&&!s.svg)return!1;if(s.target=t,!("value"in e)){s.text=s.original=[""];return}for(p=Io(t,d,!1,u,s.svg),Ur||(Ur=document.createElement("div")),Ur.innerHTML=e.value,_=Io(Ur,d,!1,u,s.svg),s.from=i._from,(s.from||f)&&!(f&&s.from)&&(n=p,p=_,_=n),s.hasClass=!!(a||l),s.newClass=f?l:a,s.oldClass=f?a:l,n=p.length-_.length,c=n<0?p:_,n<0&&(n=-n);--n>-1;)c.push(h);if(e.type==="diff"){for(g=0,m=[],E=[],T="",n=0;n<_.length;n++)y=_[n],y===p[n]?T+=y:(m[g]=T+y,E[g++]=T+p[n],T="");_=m,p=E,T&&(_.push(T),p.push(T))}e.speed&&i.duration(Math.min(.05/e.speed*c.length,e.maxDuration||9999)),s.rtl=f,s.original=p,s.text=_,s._props.push("text")},render:function(t,e){t>1?t=1:t<0&&(t=0),e.from&&(t=1-t);var i=e.text,n=e.hasClass,s=e.newClass,o=e.oldClass,a=e.delimiter,l=e.target,u=e.fillChar,f=e.original,d=e.rtl,h=i.length,c=(d?1-t:t)*h+.5|0,_,p,g;n&&t?(_=s&&c,p=o&&c!==h,g=(_?"<span class='"+s+"'>":"")+i.slice(0,c).join(a)+(_?"</span>":"")+(p?"<span class='"+o+"'>":"")+a+f.slice(c).join(a)+(p?"</span>":"")):g=i.slice(0,c).join(a)+a+f.slice(c).join(a),e.svg?l.textContent=g:l.innerHTML=u==="&nbsp;"&&~g.indexOf("  ")?g.split("  ").join("&nbsp;&nbsp;"):g}};Lr.splitInnerHTML=Io;Lr.emojiSafeSplit=ac;Lr.getText=oc;Xf()&&Jn.registerPlugin(Lr);const Wf=1.3,jf=1.3,qf=.1,Kf=150,Qf=32,Zf=1.6,Jf=.15,th=.8,eh=2,Wi=40.6,ih=.5,nh=.4,rh="power1.out",sh=1.7,oh=2.6,ah="sine.inOut",vt=[0,246,278.727,311.455,344.182,16.909,49.636,82.364,115.091,147.818,180.545,213.273],Ne={env:1,lcd:0,logo:1,btn:0},lh=.75,uh=.3,ch=.3,dh=25,lc=1500,fh=lc/1e3,hh=1,ph=.1,_h=.05,gh=.3,mh={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},Eh=1,Sh=.04,Dh=.008,Th=.05,yh=.03,Ah=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],Ph=.7,Ch=.2,Ih=250,vh=.005,Lh=.045,bh=9,Nh=1.8,Rh=75,on=.85,Oh=0,Mh=.33,xh=.66,wh=1,Fh=1.05,Yn=(r,t)=>r.map(e=>({...e,pos:e.pos*t})),uc=[{power:Oh,stops:Yn([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],on)},{power:Mh,stops:Yn([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],on)},{power:xh,stops:Yn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],on)},{power:wh,stops:Yn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],on)},{power:Fh,stops:Yn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],on)}],kh=uc[0].stops.length,Uh=150,Bh=40,$h=15,Gh=20,Hh=50,Yh=150,Vh=530,zh=370,V={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},ca={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:1,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!1},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function Xh(r){const t=ca[r];if(!t)return .2;let e=0;for(let n=0;n<t.numCycles;n++){const s=t.numCycles>1?n/(t.numCycles-1):1,o=t.periodStart+s*(t.periodEnd-t.periodStart);e+=o}const i=Math.max(.15,t.periodEnd*1.5);return e+=i,e}const Wh={PERIOD:5,BASE_LIGHT_OPACITY_SELECTED:1,LIGHT_OPACITY_DIP_FACTOR:.3,TICK_UPDATE_DURATION:.1,ELIGIBILITY_CLASS:"is-energized"},jh={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},qh={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},vi=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:ca,APP_LOAD_FADE_IN_DURATION:uh,AUTO_PLAY_START_DELAY:lh,BODY_FADE_IN_DURATION:ch,DEBOUNCE_DELAY:Kf,DEFAULT_ASSIGNMENT_SELECTIONS:Ne,DEFAULT_DIAL_A_HUE:Wi,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:eh,DIAL_CANVAS_FADE_IN_DURATION:ih,DIAL_GRADIENT_SCALE_FACTOR:th,GSAP_BUTTON_IDLE_DURATION_MAX:oh,GSAP_BUTTON_IDLE_DURATION_MIN:sh,GSAP_BUTTON_IDLE_EASE:ah,GSAP_TWEEN_DURATION:nh,GSAP_TWEEN_EASE:rh,HARMONIC_RESONANCE_PARAMS:Wh,HIGHLIGHT_WIDTH_FACTOR:Jf,HUE_ASSIGNMENT_ROW_HUES:vt,HUE_UPDATE_THRESHOLD:qf,IDLE_LIGHT_DRIFT_PARAMS:jh,LCD_TEXT_FADE_IN_DURATION:gh,LENS_GRADIENT_BREAKPOINTS:uc,LENS_GRADIENT_POSITION_SCALE:on,LENS_HOTSPOT_HUE_OFFSET:Rh,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:Lh,LENS_OSCILLATION_AMPLITUDE_MIN:vh,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:Nh,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:bh,LENS_OSCILLATION_RESTART_DELAY:Ih,LENS_OSCILLATION_SMOOTHING_DURATION:Ch,LENS_OSCILLATION_THRESHOLD:Ph,LENS_STARTUP_RAMP_DURATION:lc,LENS_STARTUP_TARGET_POWER:dh,MIN_PHASE_DURATION_FOR_STEPPING:_h,NUM_LENS_GRADIENT_STOPS:kh,NUM_RIDGES:Qf,P3_LENS_RAMP_DURATION_S:fh,PIXELS_PER_DEGREE_HUE:jf,PIXELS_PER_DEGREE_ROTATION:Wf,RIDGE_WIDTH_FACTOR:Zf,STARTUP_BUTTON_ENERGIZE_STAGGER:yh,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:Sh,STARTUP_DIM_FACTORS_ANIMATION_DURATION:Eh,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:Dh,STARTUP_LCD_GROUP_APPEAR_STAGGER:Th,STARTUP_L_REDUCTION_FACTORS:mh,STATE_TRANSITION_ECHO_PARAMS:qh,SYSTEM_READY_PHASE_DURATION:ph,TERMINAL_CURSOR_BLINK_OFF_MS:zh,TERMINAL_CURSOR_BLINK_ON_MS:Vh,TERMINAL_MAX_LINES_IN_DOM:Uh,TERMINAL_NEW_LINE_DELAY_MAX_MS:Yh,TERMINAL_NEW_LINE_DELAY_MIN_MS:Hh,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:$h,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:Gh,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:Bh,THEME_TRANSITION_DURATION:hh,estimateFlickerDuration:Xh,selectorsForDimExitAnimation:Ah},Symbol.toStringTag,{value:"Module"}));class Kh{constructor(){this.events={}}on(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),()=>{this.off(t,e)}}off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(i=>i!==e))}}const vo=new Kh;function Di(r,t){let e=t;t&&typeof t=="object"&&Object.keys(t).length>3&&(e=`{ ${Object.keys(t).join(", ")}, ... }`),console.log(`[AppState EMIT] Event: '${r}'. Payload:`,e!==void 0?e:"N/A",t!==void 0&&e!==t?{fullPayload:t}:""),vo.events[r]&&vo.events[r].forEach(i=>{try{i(t)}catch(n){console.error(`[AppState EMIT] Error in listener for '${r}':`,n,{payload:t})}})}let At={A:{id:"A",hue:Wi,rotation:0,targetHue:Wi,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},as={env:{hue:vt[Ne.env],isColorless:vt[Ne.env]===vt[0]},lcd:{hue:vt[Ne.lcd],isColorless:vt[Ne.lcd]===vt[0]},logo:{hue:vt[Ne.logo],isColorless:vt[Ne.logo]===vt[0]},btn:{hue:vt[Ne.btn],isColorless:vt[Ne.btn]===vt[0]}},Ni="dim",an=0,ln="idle",Ri="loading",Oi=-1;function wn(r){const t=At[r];if(!t){console.warn(`[AppState GET] Target: Dial '${r}'. Requested: State. Actual: Undefined (not initialized).`);return}return{...t}}function da(r){const t=as[r];if(!t){console.warn(`[AppState GET] Target: TargetColor '${r}'. Requested: Properties. Actual: Undefined (invalid key).`);return}return{...t}}function fa(){return Ni}function Nn(){return an}function Ss(){return ln}function ct(){return Ri}function br(){return Oi}function Ds(r,t){const e=!At[r]||Object.keys(At[r]).length===0;e&&(r==="A"||r==="B")&&(At[r]={id:r,hue:r==="A"?Wi:0,rotation:0,targetHue:r==="A"?Wi:0,targetRotation:0,isDragging:!1},console.log(`[AppState SET] Target: Dial '${r}'. Requested: Initialization. Actual (New State):`,JSON.parse(JSON.stringify(At[r]))));const i={...At[r]};Object.assign(At[r],t),(e||i.hue!==At[r].hue||i.rotation!==At[r].rotation||i.isDragging!==At[r].isDragging||i.targetHue!==At[r].targetHue||i.targetRotation!==At[r].targetRotation)&&(console.log(`[AppState SET] Target: Dial '${r}'. Requested (Changes):`,JSON.parse(JSON.stringify(t)),"Old State:",JSON.parse(JSON.stringify(i)),"Actual (New State):",JSON.parse(JSON.stringify(At[r]))),Di("dialUpdated",{id:r,state:{...At[r]}}))}function Lo(r,t){if(as.hasOwnProperty(r)){const e=(Number(t)%360+360)%360,i=vt.length>0&&e===vt[0],n=as[r];if(n.hue!==e||n.isColorless!==i){const s={...n};n.hue=e,n.isColorless=i,console.log(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${t}, Normalized: ${e}. Old Props:`,s,"Actual (New Props):",{...n}),Di("targetColorChanged",{targetKey:r,hue:e,isColorless:i})}}else console.warn(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${t}. Error: Invalid targetKey.`)}function cc(r){if(["dim","dark","light"].includes(r)&&Ni!==r){const t=Ni;Ni=r,console.log(`[AppState SET] Target: Theme. Requested: '${r}'. Old: '${t}', Actual (New): '${Ni}'`),Di("themeChanged",Ni)}}function bo(r){const t=Math.max(0,Math.min(r/100,1));if(Math.abs(an-t)>1e-4){const e=an;an=t,console.log(`[AppState SET] Target: TrueLensPower. Requested: ${r}%. Old: ${e.toFixed(3)}, Actual (New): ${an.toFixed(3)} (0-1 scale)`),Di("trueLensPowerChanged",an)}}function Qh(r){if(["idle","dragging","settling"].includes(r)&&ln!==r){const t=ln;ln=r,console.log(`[AppState SET] Target: DialBInteractionState. Requested: '${r}'. Old: '${t}', Actual (New): '${ln}'`),Di("dialBInteractionChange",ln)}}function dc(r){if(["loading","starting-up","interactive","error"].includes(r)&&Ri!==r){const t=Ri;Ri=r,console.log(`[AppState SET] Target: AppStatus. Requested: '${r}'. Old: '${t}', Actual (New): '${Ri}'`),Di("appStatusChanged",Ri)}}function Zh(r){if(typeof r=="number"&&Oi!==r){const t=Oi;Oi=r,console.log(`[AppState SET] Target: CurrentStartupPhaseNumber. Requested: ${r}. Old: ${t}, Actual (New): ${Oi}`),Di("startupPhaseNumberChanged",Oi)}}function qt(r,t){return typeof t!="function"?(console.error(`[AppState Subscribe] Listener for event '${r}' is not a function.`),()=>{}):vo.on(r,t)}(!At.A||Object.keys(At.A).length===0)&&Ds("A",{hue:Wi,rotation:0,targetHue:Wi,targetRotation:0,isDragging:!1});(!At.B||Object.keys(At.B).length===0)&&Ds("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});console.log("[AppState INIT] Initialized with default states:",{dials:JSON.parse(JSON.stringify(At)),targetColorProps:JSON.parse(JSON.stringify(as)),currentTheme:Ni,appStatus:Ri,currentStartupPhaseNumber:Oi});const tn=Object.freeze(Object.defineProperty({__proto__:null,emit:Di,getAppStatus:ct,getCurrentStartupPhaseNumber:br,getCurrentTheme:fa,getDialBInteractionState:Ss,getDialState:wn,getTargetColorProperties:da,getTrueLensPower:Nn,setAppStatus:dc,setCurrentStartupPhaseNumber:Zh,setDialBInteractionState:Qh,setTargetColorProperties:Lo,setTheme:cc,setTrueLensPower:bo,subscribe:qt,updateDialState:Ds},Symbol.toStringTag,{value:"Module"}));class Jh{constructor(t,e,i,n,s,o){if(this.element=t,this.config=e,this.gsap=i,this.appState=n,this.configModule=s,this.uiUpdater=o,this.debugAmbient=!1,!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule,this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=e.isSelectedByDefault||!1,this._isResonating=!1,this.idleLightDriftTweens=[],this.stateTransitionEchoTween=null,this._updateAriaAttributes()}setConfigModule(t){this.configModule=t}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(t,e={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:o}=e;this.getIdentifier();const a=t?t.split(" ").filter(d=>d):[],l=new Set(a);let u=s;if(!u){const d=new Set;Object.values(B).flatMap(c=>c.split(" ")).forEach(c=>{this.element.classList.contains(c)&&d.add(c)});const h=new Set(a);if(this._isSelected?h.add("is-selected"):h.delete("is-selected"),d.size!==h.size)u=!0;else for(const c of h)if(!d.has(c)){u=!0;break}}if(!u&&!s){i||this._updateAriaAttributes();return}if(!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(B.FLICKERING);const d=Array.from(this.element.querySelectorAll(".light"));d.length>0&&this.gsap.set(d,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"})}const f=Object.values(B).flatMap(d=>d.split(" ")).filter(d=>d&&d!=="is-selected");[...new Set(f)].forEach(d=>{this.element.classList.contains(d)&&this.element.classList.remove(d)}),l.forEach(d=>{d!=="is-selected"&&this.element.classList.add(d)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this.currentClasses.clear(),this.element.classList.forEach(d=>this.currentClasses.add(d)),i||this._updateAriaAttributes()}_updateAriaAttributes(){const t=this._isSelected;this.config.type==="toggle"?this.element.setAttribute("aria-pressed",t.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",t.toString());const e=Array.from(this.element.classList).some(i=>i===B.ENERGIZED_UNSELECTED.split(" ")[0]||i===B.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",e?"0":"-1")}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}setSelected(t,e={}){const{skipAnimation:i=!1,themeContext:n="theme-dark",phaseContext:s="ButtonSetSelected"}=e;this.getIdentifier();let o=!1;if(this._isSelected===t){if(t&&!this.element.classList.contains("is-selected")&&(o=!0),!t&&this.element.classList.contains("is-selected")&&(o=!0),!o)return}else this._isSelected=t;let a=B.ENERGIZED_UNSELECTED;this.element.classList.contains(B.DIMLY_LIT.split(" ")[0])?a=B.DIMLY_LIT_UNSELECTED:this.element.classList.contains(B.UNLIT.split(" ")[0])?a=B.UNLIT:this.element.classList.contains(B.ENERGIZED_UNSELECTED.split(" ")[0])&&(a=B.ENERGIZED_UNSELECTED);let l=a;this._isSelected?a===B.DIMLY_LIT_UNSELECTED?l=B.DIMLY_LIT_SELECTED:(a===B.ENERGIZED_UNSELECTED||a===B.UNLIT)&&(l=B.ENERGIZED_SELECTED):a===B.DIMLY_LIT_SELECTED?l=B.DIMLY_LIT_UNSELECTED:a===B.ENERGIZED_SELECTED&&(l=B.ENERGIZED_UNSELECTED),this.setState(l,{skipAnimation:i,themeContext:n,phaseContext:s,forceState:!0})}handleInteraction(t){const e=this.getIdentifier();this.config.type==="toggle"?this.setSelected(!this._isSelected,{themeContext:this.appState.getCurrentTheme(),phaseContext:`ToggleInteract_${e}`}):this.config.type==="radio"?this._isSelected||this.setSelected(!0,{themeContext:this.appState.getCurrentTheme(),phaseContext:`RadioInteract_${e}`}):this.config.type}setPressedVisuals(t){if(this.getIdentifier(),this._pressTimeoutId&&this.element.classList.contains(B.PRESSING)&&!t&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),t){this.element.classList.add(B.PRESSING);const e=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(e)*(e.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(B.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(B.PRESSING)}updateHarmonicResonanceVisuals(t){!this.configModule||!this._isResonating||this.debugAmbient&&console.log(`[Button ${this.getIdentifier()} updateHarmonicResonanceVisuals] Called. Progress: ${t.toFixed(3)}. (CSS method should be active)`)}startHarmonicResonance(){this.configModule&&(this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Attempting to START Harmonic Resonance. Current _isResonating: ${this._isResonating}, Class active: ${this.element.classList.contains("is-resonating")}`),!this.element.classList.contains("is-resonating")&&(this._isResonating=!0,this.element.classList.add("is-resonating"),this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Harmonic Resonance STARTED. Added .is-resonating class.`)))}stopHarmonicResonance(){this.configModule&&(this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Attempting to STOP Harmonic Resonance. Current _isResonating: ${this._isResonating}, Class active: ${this.element.classList.contains("is-resonating")}`),this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"),this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Harmonic Resonance STOPPED. Removed .is-resonating class.`)))}startIdleLightDrift(){if(!this.configModule)return;this.stopIdleLightDrift();const t=Array.from(this.element.querySelectorAll(".light"));if(!t.length)return;const e=this.configModule.IDLE_LIGHT_DRIFT_PARAMS;this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Starting Idle Light Drift for ${t.length} lights.`),t.forEach((i,n)=>{const s=e.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,o=s*e.OPACITY_VARIATION_FACTOR,a=s-o,l=s+o,u=this.gsap.fromTo(i,{opacity:this.gsap.utils.random(a,l)},{opacity:this.gsap.utils.random(a,l),duration:this.gsap.utils.random(e.PERIOD_MIN,e.PERIOD_MAX)/2,yoyo:!0,repeat:-1,delay:this.gsap.utils.random(0,e.PERIOD_MAX/4)+n*e.STAGGER_PER_LIGHT,ease:"sine.inOut",overwrite:"auto"});this.idleLightDriftTweens.push(u)})}stopIdleLightDrift(){if(!this.configModule||this.idleLightDriftTweens.length===0)return;this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Stopping Idle Light Drift (${this.idleLightDriftTweens.length} tweens).`),this.idleLightDriftTweens.forEach(e=>e.kill()),this.idleLightDriftTweens=[];const t=Array.from(this.element.querySelectorAll(".light"));t.length>0&&this.gsap.set(t,{opacity:this.configModule.IDLE_LIGHT_DRIFT_PARAMS.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED})}playStateTransitionEcho(){if(!this.configModule)return;this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill();const t=Array.from(this.element.querySelectorAll(".light"));if(!t.length)return;const e=this.configModule.STATE_TRANSITION_ECHO_PARAMS,i=this.gsap.timeline({delay:e.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null}});this.stateTransitionEchoTween=i;const n=parseFloat(getComputedStyle(t[0]).opacity);for(let s=0;s<e.NUM_PULSES;s++){const o=e.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(e.LIGHT_DECAY_FACTOR,s),a=n*(1-o),l=e.BASE_PULSE_PERIOD*Math.pow(e.PERIOD_DECAY_FACTOR,s);i.to(t,{opacity:a,duration:l/2,yoyo:!0,repeat:1,ease:"sine.out"},s===0?">":`-=${l*.3}`)}}destroy(){this.getIdentifier(),this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.stopIdleLightDrift(),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function ri(r,t,e=0){if(!r)return e;const i=r[t];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:e}function ls(r,t,e={}){var y,D,I,v,C;const i=e.gsapInstance||ce;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:e.gsapInstance,globalGsap:ce});const A=ce.timeline();return A.to({},{duration:.001}),{timeline:A,completionPromise:Promise.resolve()}}const n=typeof t=="string"?t:"CustomProfile",s=r&&r.length>0&&r[0]?r[0].id||r[0].className.split(" ")[0]||r[0].tagName:"unknownTarget",a={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...e};let l=typeof t=="string"?{...ca[t]}:{...t};const u=new Promise(A=>{a.gsapInternalOnComplete=()=>{A()}});if(!l||Object.keys(l).length===0){console.warn(`[CAF - ${n} for ${s}] Profile not found or empty. Returning empty, resolved flicker.`);const A=i.timeline();return A.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),A.to({},{duration:.001}),{timeline:A,completionPromise:u}}l.glow={...l.glow||{}},a.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(l.glow.isButtonSelected=a.overrideGlowParams.isButtonSelected);const f=Array.isArray(r)?r.filter(A=>A):r?[r]:[];if(f.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const A=i.timeline();return A.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),A.to({},{duration:.001}),{timeline:A,completionPromise:u}}const d=i.timeline({onStart:()=>{a.onStart&&a.onStart()},onComplete:()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()},onUpdate:a.onUpdate});let h=f;if(l.targetProperty==="button-lights-and-frame"){const A=[];f.forEach(x=>{const R=x.querySelectorAll(a.lightTargetSelector);R.length>0&&A.push(...Array.from(R))}),A.length>0&&(h=A,i.killTweensOf(h),i.set(h,{clearProps:"all",overwrite:!0}))}else(l.targetProperty==="text-shadow-opacity-and-blur"||l.targetProperty==="element-opacity-and-box-shadow")&&(h=f,i.killTweensOf(h));if(l.amplitudeStart!==void 0&&l.amplitudeStart<=.01&&(!l.glow||l.glow.initialOpacity===void 0||l.glow.initialOpacity<=.01)){if(h.length>0&&d.set(h,{autoAlpha:0,immediateRender:!0}),l.glow&&(l.glow.opacityVar||(y=l.glow.animatedProperties)!=null&&y.opacity)){const A={};l.glow.opacityVar&&(A[l.glow.opacityVar]=0),(D=l.glow.animatedProperties)!=null&&D.opacity&&(A[l.glow.animatedProperties.opacity]=0),l.glow.sizeVar&&(A[l.glow.sizeVar]="0px"),(I=l.glow.animatedProperties)!=null&&I.blur&&(A[l.glow.animatedProperties.blur]="0px"),Object.keys(A).length>0&&d.set(f,{css:A,immediateRender:!0})}}else{if(h.length>0){const A=l.amplitudeStart!==void 0?l.amplitudeStart:0;d.set(h,{autoAlpha:A,immediateRender:!0})}if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const A={},x=ri(l.glow,"initialOpacity",0),R=ri(l.glow,"initialSize","0px");l.glow.opacityVar&&(A[l.glow.opacityVar]=x),l.glow.sizeVar&&(A[l.glow.sizeVar]=typeof R=="number"?`${R}px`:R),(v=l.glow.animatedProperties)!=null&&v.opacity&&(A[l.glow.animatedProperties.opacity]=x),(C=l.glow.animatedProperties)!=null&&C.blur&&(A[l.glow.animatedProperties.blur]=typeof R=="number"?`${R}px`:R),Object.keys(A).length>0&&d.set(f,{css:A,immediateRender:!0})}}let _=0,p=.01;for(let A=0;A<l.numCycles;A++){const x=l.numCycles>1?A/(l.numCycles-1):1,R=l.periodStart+x*(l.periodEnd-l.periodStart),k=Math.max(.01,R*l.onDurationRatio),N=Math.max(.01,R*(1-l.onDurationRatio)),K=l.amplitudeStart+x*(l.amplitudeEnd-l.amplitudeStart);p=k;const Q=ri(l.glow,"peakOpacity",1),$=ri(l.glow,"peakSize","5px"),H={autoAlpha:K,duration:k,ease:"power1.inOut"},ot={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const pe=l.glow.scaleWithAmplitude?Q*K:Q;l.glow.opacityVar&&(ot[l.glow.opacityVar]=pe),l.glow.sizeVar&&(ot[l.glow.sizeVar]=typeof $=="number"?`${$}px`:$),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(ot[l.glow.animatedProperties.opacity]=pe),l.glow.animatedProperties.blur&&(ot[l.glow.animatedProperties.blur]=typeof $=="number"?`${$}px`:$))}if(h.length>0&&d.to(h,H,_),Object.keys(ot).length>0&&d.to(f,{css:ot,duration:k,ease:"power1.inOut"},_),_+=k,A<l.numCycles-1){const ve={autoAlpha:l.amplitudeStart>0?l.amplitudeStart*.3:0,duration:N,ease:"power1.inOut"},z={},j=ri(l.glow,"initialOpacity",0),J=ri(l.glow,"initialSize","0px");l.glow&&(l.glow.colorVar||l.glow.animatedProperties)&&(l.glow.opacityVar&&(z[l.glow.opacityVar]=j),l.glow.sizeVar&&(z[l.glow.sizeVar]=typeof J=="number"?`${J}px`:J),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(z[l.glow.animatedProperties.opacity]=j),l.glow.animatedProperties.blur&&(z[l.glow.animatedProperties.blur]=typeof J=="number"?`${J}px`:J))),h.length>0&&d.to(h,ve,_),Object.keys(z).length>0&&d.to(f,{css:z,duration:N,ease:"power1.inOut"},_),_+=N}}const g=Math.max(.15,l.periodEnd*1.5),m={autoAlpha:l.amplitudeEnd,duration:g,ease:"sine.out"},E={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const A=ri(l.glow,"finalOpacity",0),x=ri(l.glow,"finalSize","0px");l.glow.opacityVar&&(E[l.glow.opacityVar]=A),l.glow.sizeVar&&(E[l.glow.sizeVar]=typeof x=="number"?`${x}px`:x),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(E[l.glow.animatedProperties.opacity]=A),l.glow.animatedProperties.blur&&(E[l.glow.animatedProperties.blur]=typeof x=="number"?`${x}px`:x))}const T=p*.3;return h.length>0&&d.to(h,m,`>-=${T}`),Object.keys(E).length>0&&d.to(f,{css:E,duration:g,ease:"sine.out"},"<"),d.duration()===0&&d.to({},{duration:.001}),{timeline:d,completionPromise:u}}function tp(r,t){let e;return function(...n){const s=this,o=()=>{e=null,r.apply(s,n)};clearTimeout(e),e=setTimeout(o,t)}}function ep(r,t,e,i,n){return(r-t)*(n-i)/(e-t)+i}function ha(r){for(let t=r.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[r[t],r[e]]=[r[e],r[t]]}return r}const B={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering"};class ip{constructor(t,e,i){this.gsap=t,this.appState=e,this.config=i,this.uiUpdater=null,this._buttons=new Map,this._buttonGroups=new Map,this.debug=!1,this._eventListeners={},this.aam=null}setAAM(t){this.aam=t}setUiUpdater(t){this.uiUpdater=t}on(t,e){if(typeof e!="function"){console.error(`[ButtonManager] Invalid callback for event "${t}"`);return}this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e)}emit(t,e){this.debug&&console.log(`[ButtonManager EMIT] Event: '${t}', Data:`,e),this._eventListeners[t]&&this._eventListeners[t].forEach(i=>{try{i(e)}catch(n){console.error(`[ButtonManager] Error in listener for event "${t}":`,n,{data:e})}})}init(t){this.debug&&console.log("[ButtonManager INIT] Initializing buttons:",t==null?void 0:t.length),t&&t.length>0&&t.forEach(e=>{this.addButton(e)}),this.setInitialDimStates()}addButton(t,e=null){if(!t||this._buttons.has(t))return;const i=this._generateButtonConfig(t,e),n=new Jh(t,i,this.gsap,this.appState,this.config,this.uiUpdater);this._buttons.set(t,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n))}_generateButtonConfig(t,e=null){var a;const i=t.classList.contains("button-unit--toggle")?"toggle":t.classList.contains("button-unit--action")?"action":t.classList.contains("button-unit--radio")?"radio":"default";let n=e;if(!n&&(n=((a=t.closest("[data-group-id]"))==null?void 0:a.dataset.groupId)||null,!n&&i==="radio")){const l=t.closest('[role="radiogroup"]');l&&(n=l.dataset.assignmentTarget||l.id||`radio-group-${[...this._buttonGroups.keys()].length}`)}const s=t.dataset.toggleValue||t.dataset.value||null,o=t.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:o}}getAllButtonInstances(){return this._buttons.values()}getButtonInstance(t){return this._buttons.get(t)}setInitialDimStates(){this.debug&&console.log("[BM setInitialDimStates] Setting initial states for all buttons to UNLIT."),this._buttons.forEach(t=>{const e=t.getIdentifier();t.isSelected()&&t.setSelected(!1,{skipAnimation:!0,phaseContext:`P0_ForceUnselect_${e}`}),t.setState(B.UNLIT,{skipAnimation:!0,themeContext:"theme-dim",phaseContext:`P0_InitialUnlit_BM_${e}`,forceState:!0})})}handleButtonInteraction(t,e="click"){const i=this._buttons.get(t);if(!i)return;const n=i.getIdentifier();if(this.debug&&console.log(`[BM INTERACTION] Event: ${e} on ${n}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&i.getGroupId()!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${n}`);return}this.emit("beforeButtonTransition",i),i.handleInteraction(e);const s=i.getGroupId();s&&(i.config.type==="toggle"||i.config.type==="radio")&&i.isSelected()&&this._buttonGroups.get(s).forEach(o=>{o!==i&&o.isSelected()&&(this.debug&&console.log(`[BM INTERACTION] Deselecting other member ${o.getIdentifier()} in group ${s}`),this.emit("beforeButtonTransition",o),o.setSelected(!1,{themeContext:this.appState.getCurrentTheme(),phaseContext:`GroupAutoDeselect_${o.getIdentifier()}`}),this.emit("afterButtonTransition",o))}),this.appState.emit("buttonInteracted",{buttonIdentifier:n,newState:i.getCurrentStateClasses()}),this.emit("afterButtonTransition",i)}setGroupSelected(t,e){const i=this._buttonGroups.get(t);if(!i){console.warn(`[BM setGroupSelected] Group not found: ${t}`);return}this.debug&&console.log(`[BM setGroupSelected] Group: ${t}, Target: ${typeof e=="string"?e:e.ariaLabel}`),i.forEach(n=>{let s=!1;typeof e=="string"?s=n.config.value===e:s=n.element===e,n.isSelected()!==s?(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`setGroupSelected_${t}_${n.getIdentifier()}`,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n)):(s&&!n.element.classList.contains("is-selected")||!s&&n.element.classList.contains("is-selected"))&&(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`setGroupSelected_DOM_Sync_${t}_${n.getIdentifier()}`,forceState:!0}),this.emit("afterButtonTransition",n))})}playFlickerToState(t,e,i){const n=this._buttons.get(t);if(!n)return console.warn(`[BM playFlickerToState - ${i.phaseContext}] Button instance NOT FOUND for element:`,t),{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:s,phaseContext:o="UnknownPhase",isButtonSelectedOverride:a=null}=i,l=n.getIdentifier();let u=B.UNLIT;s.toLowerCase().includes("fromdimlylit")&&(u=B.DIMLY_LIT);let f=u;u===B.DIMLY_LIT?f=B.DIMLY_LIT_UNSELECTED:u===B.ENERGIZED_UNSELECTED&&(f=B.ENERGIZED_UNSELECTED),(f===B.DIMLY_LIT_UNSELECTED||f===B.UNLIT)&&n.isSelected()&&n.setSelected(!1,{skipAnimation:!0,phaseContext:`PreFlickerTempUnselect_${o}_${l}`,forceState:!0}),n.setState(f,{skipAnimation:!0,phaseContext:`PreFlickerForceBaseState_${o}_${l}`,forceState:!0});const d=e.includes("is-selected");let h=d;n.isSelected()!==d&&n.setSelected(d,{skipAnimation:!0,phaseContext:`PreFlickerSetFinalSelected_${o}_${l}`,forceState:!0}),typeof a=="boolean"&&(h=a);const c={...i,overrideGlowParams:{...i.overrideGlowParams||{},isButtonSelected:h},onTimelineComplete:()=>{n.setState(e,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`FlickerEnd_${o}_${l}`,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n),i.onComplete&&i.onComplete()}};delete c.onComplete;const{timeline:_,completionPromise:p}=ls(t,s,c);return{timeline:_,completionPromise:p}}flickerDimlyLitToEnergizedStartup(t){const{profileNameUnselected:e,profileNameSelected:i,stagger:n,phaseContext:s}=t,o=[];if(this._buttons.forEach(f=>{f.getCurrentClasses().has(B.DIMLY_LIT.split(" ")[0])&&o.push(f)}),this.debug&&console.log(`[BM flickerDimlyLitToEnergizedStartup - ${s}] Total buttons to energize: ${o.length}`),o.length===0)return{masterTimeline:null,masterCompletionPromise:Promise.resolve()};ha(o);const a=this.gsap.timeline(),l=[];o.forEach((f,d)=>{let h=B.ENERGIZED_UNSELECTED,c=e,_=!1;const p=f.getGroupId(),g=f.config.value,m=f.getIdentifier();this.config.DEFAULT_ASSIGNMENT_SELECTIONS.hasOwnProperty(p)&&this.config.DEFAULT_ASSIGNMENT_SELECTIONS[p].toString()===g&&(h=B.ENERGIZED_SELECTED,c=i,_=!0);const{timeline:E,completionPromise:T}=this.playFlickerToState(f.element,h,{profileName:c,phaseContext:`${s}_${m}`,isButtonSelectedOverride:_});E&&a.add(E,n*d),l.push(T)});const u=Promise.all(l);return{masterTimeline:a,masterCompletionPromise:u}}setButtonsToState(t,e,i={}){const{staggerTime:n=.05,phaseContext:s="BatchSetState"}=i,o=this.gsap.timeline();return t.forEach((a,l)=>{const u=this._buttons.get(a);if(u){const f=u.getIdentifier();o.call(()=>{this.emit("beforeButtonTransition",u);const d=e.includes("is-selected");u.isSelected()!==d&&u.setSelected(d,{skipAnimation:!0,phaseContext:`BatchSetSelected_${s}_${f}`,forceState:!0}),u.setState(e,{themeContext:this.appState.getCurrentTheme(),phaseContext:`${s}_${f}`,forceState:!0}),u.playStateTransitionEcho(),this.emit("afterButtonTransition",u)},null,l*n)}}),{timeline:o,completionPromise:Promise.resolve()}}setPressedVisuals(t,e){const i=this._buttons.get(t);i&&i.setPressedVisuals(e)}}class np{constructor(t,e,i,n,s){if(this.containerElement=t,this.dialId=e,this.appState=i,this.configModule=n,this.gsap=s,this.canvas=this.containerElement.querySelector(`#dial-canvas-${this.dialId}`),!this.canvas){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Canvas element not found!`);return}if(this.ctx=this.canvas.getContext("2d"),!this.ctx){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Failed to get 2D context!`);return}this.computedStyleVars={},this.isDragging=!1,this.currentPointerX=0,this.gsapValueTween=null,this.isActiveDim=!1,this.dialBSettleTimer=null,this.unsubscribers=[],this._updateAndCacheComputedStyles();let o=this.appState.getDialState(this.dialId);if(!o||Object.keys(o).length===0){const a=this.dialId==="B"?0:this.configModule.DEFAULT_DIAL_A_HUE,l=this.dialId==="B"?a*this.configModule.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:0;o={id:this.dialId,hue:a,rotation:l,targetHue:a,targetRotation:l,isDragging:!1},this.appState.updateDialState(this.dialId,o)}console.log(`[Dial ${this.dialId} CONSTRUCTOR] Before initial resizeCanvas/draw. Current phase from appState: ${this.appState.getCurrentStartupPhaseNumber()}, isActiveDim: ${this.isActiveDim}`),this.resizeCanvas(!0),this._addDragListeners(),this._subscribeToAppStateEvents()}_subscribeToAppStateEvents(){this.unsubscribers.push(this.appState.subscribe("dialUpdated",this._onAppStateDialUpdate.bind(this))),this.unsubscribers.push(this.appState.subscribe("themeChanged",this._onThemeChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("appStatusChanged",this._onAppStatusChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("startupPhaseNumberChanged",this._onStartupPhaseChange.bind(this)))}_onStartupPhaseChange(t){this._draw()}resizeCanvas(t=!1){if(!this.canvas||!this.ctx)return!1;const e=window.devicePixelRatio||1,i=this.canvas.offsetWidth,n=this.canvas.offsetHeight;if(i===0||n===0)return!1;const s=Math.round(i*e),o=Math.round(n*e);let a=!1;return(this.canvas.width!==s||this.canvas.height!==o)&&(this.canvas.width=s,this.canvas.height=o,a=!0),(a||t)&&(this.ctx.setTransform(e,0,0,e,0,0),this._draw()),a}setActiveDimState(t){this.isActiveDim!==t&&(this.isActiveDim=t,document.body.classList.contains("theme-dim")?this.containerElement.classList.toggle("js-active-dim-dial",t):this.containerElement.classList.remove("js-active-dim-dial"),this._updateAndCacheComputedStyles(),this._draw())}_handleInteractionStart(t){if(this.appState.getAppStatus()!=="interactive"||this.isDragging)return;t.type==="touchstart"&&t.cancelable&&t.preventDefault(),this.isDragging=!0,this.gsapValueTween&&this.gsapValueTween.kill(),this.gsapValueTween=null,this.currentPointerX=t.touches?t.touches[0].clientX:t.clientX;const e=this.appState.getDialState(this.dialId);this.appState.updateDialState(this.dialId,{isDragging:!0,targetHue:e.hue,targetRotation:e.rotation}),this.dialId==="B"&&(this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.appState.setDialBInteractionState("dragging")),this.containerElement.style.cursor="grabbing",document.body.style.cursor="grabbing"}_handleInteractionMove(t){if(!this.isDragging||this.appState.getAppStatus()!=="interactive")return;t.type==="touchmove"&&t.cancelable&&t.preventDefault();let e=t.touches?t.touches[0].clientX:t.clientX;const i=e-this.currentPointerX,n=this.appState.getDialState(this.dialId);let s=n.targetHue+i/this.configModule.PIXELS_PER_DEGREE_HUE;const o=n.targetRotation+i/this.configModule.PIXELS_PER_DEGREE_ROTATION;this.dialId==="B"&&(s=Math.max(0,Math.min(s,359.999))),this.currentPointerX=e,this.gsapValueTween&&this.gsapValueTween.kill();const a={hue:n.hue,rotation:n.rotation};this.gsapValueTween=this.gsap.to(a,{rotation:o,hue:s,duration:this.configModule.GSAP_TWEEN_DURATION,ease:this.configModule.GSAP_TWEEN_EASE,overwrite:"auto",onUpdate:()=>{if(!this.isDragging&&this.gsapValueTween){this.gsapValueTween.kill(),this.gsapValueTween=null;return}this.appState.updateDialState(this.dialId,{hue:a.hue,rotation:a.rotation,targetHue:s,targetRotation:o}),this.dialId==="B"&&this.appState.setTrueLensPower(a.hue/359.999*100)},onComplete:()=>{this.gsapValueTween=null}})}_handleInteractionEnd(t){if(!this.isDragging){document.body.style.cursor==="grabbing"&&(document.body.style.cursor="default");return}const e=this.dialId;this.isDragging=!1;const i=this.appState.getDialState(e);this.appState.updateDialState(e,{isDragging:!1}),this.gsapValueTween&&this.gsapValueTween.isActive()?(this.gsapValueTween.kill(),this.gsapValueTween=null,this.appState.updateDialState(e,{hue:i.targetHue,rotation:i.targetRotation}),e==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)):(Math.abs(i.hue-i.targetHue)>.01||Math.abs(i.rotation-i.targetRotation)>.01)&&(this.appState.updateDialState(e,{hue:i.targetHue,rotation:i.targetRotation}),e==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)),e==="B"&&(this.appState.setDialBInteractionState("settling"),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.dialBSettleTimer=setTimeout(()=>{this.appState.setDialBInteractionState("idle"),this.dialBSettleTimer=null},this.configModule.LENS_OSCILLATION_RESTART_DELAY)),this.containerElement.style.cursor="grab",document.body.style.cursor="default"}_addDragListeners(){this.boundHandleInteractionStart=this._handleInteractionStart.bind(this),this.boundHandleInteractionMove=this._handleInteractionMove.bind(this),this.boundHandleInteractionEnd=this._handleInteractionEnd.bind(this),this.containerElement.addEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.addEventListener("touchstart",this.boundHandleInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundHandleInteractionMove),window.addEventListener("touchmove",this.boundHandleInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundHandleInteractionEnd),window.addEventListener("touchend",this.boundHandleInteractionEnd),window.addEventListener("mouseleave",this.boundHandleInteractionEnd),window.addEventListener("touchcancel",this.boundHandleInteractionEnd)}_removeDragListeners(){this.containerElement.removeEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundHandleInteractionStart),window.removeEventListener("mousemove",this.boundHandleInteractionMove),window.removeEventListener("touchmove",this.boundHandleInteractionMove),window.removeEventListener("mouseup",this.boundHandleInteractionEnd),window.removeEventListener("touchend",this.boundHandleInteractionEnd),window.removeEventListener("mouseleave",this.boundHandleInteractionEnd),window.removeEventListener("touchcancel",this.boundHandleInteractionEnd)}_updateAndCacheComputedStyles(){if(!this.ctx)return;const t=getComputedStyle(document.documentElement),e=document.body.classList.contains("theme-dim");e&&this.isActiveDim?this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-dim-active-face-bg-l").trim()||"0.12",faceBgC:t.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",faceBgH:t.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeL:t.getPropertyValue("--dial-dim-active-ridge-l").trim()||"0.25",ridgeC:t.getPropertyValue("--dial-dim-active-ridge-c").trim()||t.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",ridgeH:t.getPropertyValue("--dial-dim-active-ridge-h").trim()||t.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeHighlightL:t.getPropertyValue("--dial-dim-active-ridge-highlight-l").trim()||"0.60",ridgeHighlightA:t.getPropertyValue("--dial-dim-active-ridge-highlight-a").trim()||"0.4",shadingStart:t.getPropertyValue("--dial-dim-active-shading-start-color").trim()||"oklch(0% 0 0 / 0.1)",shadingEnd:t.getPropertyValue("--dial-dim-active-shading-end-color").trim()||"oklch(0% 0 0 / 0.15)"}:e&&!this.isActiveDim?this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-face-bg-l").trim()||"0.01",faceBgC:t.getPropertyValue("--dial-face-bg-c").trim()||"0",faceBgH:t.getPropertyValue("--dial-face-bg-h").trim()||"0",ridgeL:t.getPropertyValue("--dial-ridge-l").trim()||"0.01",ridgeC:t.getPropertyValue("--dial-ridge-c").trim()||"0",ridgeH:t.getPropertyValue("--dial-ridge-h").trim()||"0",ridgeHighlightL:"0",ridgeHighlightA:"0",shadingStart:"oklch(0 0 0 / 0)",shadingEnd:"oklch(0 0 0 / 0)"}:this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-face-bg-l").trim()||"0.20",faceBgC:t.getPropertyValue("--dial-face-bg-c").trim()||"0.005",faceBgH:t.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeL:t.getPropertyValue("--dial-ridge-l").trim()||"0.45",ridgeC:t.getPropertyValue("--dial-ridge-c").trim()||t.getPropertyValue("--dial-face-bg-c").trim()||"0.005",ridgeH:t.getPropertyValue("--dial-ridge-h").trim()||t.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeHighlightL:t.getPropertyValue("--dial-ridge-highlight-l").trim()||"0.95",ridgeHighlightA:t.getPropertyValue("--dial-ridge-highlight-a").trim()||"0.85",shadingStart:t.getPropertyValue("--dial-shading-start-color").trim()||"oklch(0% 0 0 / 0.35)",shadingEnd:t.getPropertyValue("--dial-shading-end-color").trim()||"oklch(0% 0 0 / 0.4)"}}_draw(){if(!this.ctx||!this.canvas||!this.configModule)return;if(!this.computedStyleVars.faceBgL&&(this._updateAndCacheComputedStyles(),!this.computedStyleVars.faceBgL)){console.error(`[Dial ${this.dialId} _draw] computedStyleVars.faceBgL still undefined after update. Bailing draw.`);return}const t=this.appState.getDialState(this.dialId);if(!t)return;const{rotation:e}=t,i=this.canvas.width/(window.devicePixelRatio||1),n=this.canvas.height/(window.devicePixelRatio||1);if(i===0||n===0)return;this.ctx.clearRect(0,0,i,n);const s=this.appState.getAppStatus(),o=this.appState.getCurrentStartupPhaseNumber(),a=document.body.classList.contains("theme-dim"),l=document.body.classList.contains("is-transitioning-from-dim"),u=a&&!this.isActiveDim&&s==="starting-up"&&(o===-1||o>=0&&o<6);u?this.ctx.fillStyle="oklch(0 0 0)":this.ctx.fillStyle=`oklch(${this.computedStyleVars.faceBgL} ${this.computedStyleVars.faceBgC} ${this.computedStyleVars.faceBgH})`,this.ctx.fillRect(0,0,i,n);let f;if(a&&!l?f=this.isActiveDim:f=this.isActiveDim||s==="interactive",u&&(f=!1),f){const d=2*Math.PI/this.configModule.NUM_RIDGES,h=-Math.PI/4,c=e*Math.PI/180,_=this.configModule.DIAL_GRADIENT_SCALE_FACTOR;for(let p=0;p<this.configModule.NUM_RIDGES;p++){const g=p*d+c,m=Math.cos(g),E=Math.sin(g);if(m>.03){const T=i/this.configModule.NUM_RIDGES*this.configModule.RIDGE_WIDTH_FACTOR*m,y=T*_,D=(T-y)/2,C=i/2+E*i/2-T/2+D;if(this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH})`,this.ctx.fillRect(C,0,y,n),parseFloat(this.computedStyleVars.ridgeHighlightA)>0){const A=Math.max(0,Math.cos(g-h)),x=Math.pow(A,10)*Math.pow(m,1.5);if(x>.05){const R=Math.min(1,parseFloat(this.computedStyleVars.ridgeHighlightA)*x*1.5);this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeHighlightL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH} / ${R.toFixed(3)})`;const k=C+y*.1,N=y*this.configModule.HIGHLIGHT_WIDTH_FACTOR;this.ctx.fillRect(k,0,N,n)}}}}if(this.computedStyleVars.shadingStart!=="oklch(0 0 0 / 0)"){const p=this.ctx.createLinearGradient(0,0,0,n);p.addColorStop(0,this.computedStyleVars.shadingStart),p.addColorStop(.2,"oklch(0 0 0 / 0)"),p.addColorStop(.8,"oklch(0 0 0 / 0)"),p.addColorStop(1,this.computedStyleVars.shadingEnd),this.ctx.fillStyle=p,this.ctx.fillRect(0,0,i,n)}}}_onAppStateDialUpdate(t){t&&t.id===this.dialId&&this._draw()}_onThemeChange(){this._updateAndCacheComputedStyles(),requestAnimationFrame(()=>{const t=window.devicePixelRatio||1;this.ctx&&this.ctx.setTransform(t,0,0,t,0,0),this._draw()})}_onAppStatusChange(t){this._updateAndCacheComputedStyles(),this._draw()}destroy(){this._removeDragListeners(),this.unsubscribers.forEach(t=>t()),this.unsubscribers=[],this.gsapValueTween&&this.gsapValueTween.kill(),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer)}}const Ot={};let _l=null,gl=null,ml=null;function fc(r,t,e,i){if(!r||r.length===0){console.error("[DialManager INIT] No dial container elements provided.");return}if(!t||!e||!i){console.error("[DialManager INIT] CRITICAL: Missing appState, configModule, or gsap dependencies.");return}_l=t,gl=e,ml=i;for(const n in Ot)Ot[n]&&typeof Ot[n].destroy=="function"&&Ot[n].destroy(),delete Ot[n];r.forEach(n=>{const s=n.dataset.dialId;if(!s){console.error("[DialManager INIT] Could not find dialId for container:",n);return}Ot[s]&&Ot[s].destroy(),Ot[s]=new np(n,s,_l,gl,ml)}),console.log("[DialManager INIT] Initialization complete. Dial instances created:",Object.keys(Ot))}function rp(r){for(const t in Ot)Ot.hasOwnProperty(t)&&Ot[t]&&Ot[t].setActiveDimState(r)}function sp(r=!1){for(const t in Ot)Ot.hasOwnProperty(t)&&Ot[t]&&Ot[t].resizeCanvas(r)}const op=Object.freeze(Object.defineProperty({__proto__:null,init:fc,resizeAllCanvases:sp,setDialsActiveState:rp},Symbol.toStringTag,{value:"Module"}));let be=null;function hc(r,t){if(!t){console.error("[GridManager INIT] CRITICAL: ButtonManager instance not provided.");return}if(be=t,!r||r.length===0){console.error("[GridManager INIT] No hue assignment column elements provided.");return}r.forEach(e=>{const i=e.dataset.assignmentTarget;if(!i){console.warn("[GridManager INIT] Column found without 'data-assignment-target'. Skipping.",e);return}const n=Ne[i],s=e.querySelector(".control-group-label.label-top");e.innerHTML="",s&&e.appendChild(s);for(let o=0;o<12;o++){const a=document.createElement("div");a.classList.add("button-unit","button-unit--toggle","button-unit--s"),a.dataset.toggleValue=o.toString(),a.dataset.rowIndex=o.toString(),a.setAttribute("role","radio"),a.setAttribute("aria-label",`Assign ${i.toUpperCase()} to Hue from Row ${o+1}`);const l=document.createElement("div");l.classList.add("light-container"),l.setAttribute("aria-hidden","true");const u=document.createElement("div");u.classList.add("light"),l.appendChild(u),a.appendChild(l);const f=document.createElement("div");f.classList.add("button-bg-frame"),a.appendChild(f),e.appendChild(a),be.addButton(a,i),a.addEventListener("mousedown",d=>{d.button===0&&be.setPressedVisuals(d.currentTarget,!0)}),a.addEventListener("mouseup",d=>{d.button===0&&be.setPressedVisuals(d.currentTarget,!1)}),a.addEventListener("mouseleave",d=>{d.currentTarget.classList.contains("is-pressing")&&be.setPressedVisuals(d.currentTarget,!1)}),a.addEventListener("touchstart",d=>{be.setPressedVisuals(d.currentTarget,!0)},{passive:!0}),a.addEventListener("touchend",d=>{be.setPressedVisuals(d.currentTarget,!1)}),a.addEventListener("touchcancel",d=>{be.setPressedVisuals(d.currentTarget,!1)}),a.addEventListener("click",d=>{const h=d.currentTarget,c=ct();if(c!=="interactive"){console.log(`[GridManager Click] Interaction blocked for ${i}-${o}, app not interactive. Status: ${c}`);return}const _=be._buttons.get(h);if(!_){console.error("[GridManager Click] Clicked button not managed by ButtonManager:",h);return}const p=_.getGroupId();if(!p){console.error("[GridManager Click] Clicked button instance missing groupId:",h);return}be.setGroupSelected(p,h.dataset.toggleValue);const g=parseInt(h.dataset.rowIndex,10),m=vt[g];Lo(p,m)})}n>=0&&n<vt.length&&Lo(i,vt[n])})}const ap=Object.freeze(Object.defineProperty({__proto__:null,init:hc},Symbol.toStringTag,{value:"Module"}));let Mi={},Se=null;function pc(r,t){if(!t){console.error("[ToggleManager INIT] CRITICAL: ButtonManager instance not provided.");return}Se=t,(!r||r.length===0)&&console.warn("[ToggleManager INIT] No static toggle button elements provided."),Mi={},r.forEach(e=>{const i=e.closest("[data-group-id]"),n=(i==null?void 0:i.dataset.groupId)||e.dataset.groupId;if(!n){console.warn("[ToggleManager INIT] Button found without a group ID:",e);return}Mi[n]||(Mi[n]=[]),Mi[n].find(s=>s.element===e)||Mi[n].push({element:e,value:e.dataset.toggleValue}),Se._buttons.has(e)||Se.addButton(e,n),e.dataset.clickListenerAdded||(e.addEventListener("mousedown",s=>{s.button===0&&Se.setPressedVisuals(s.currentTarget,!0)}),e.addEventListener("mouseup",s=>{s.button===0&&Se.setPressedVisuals(s.currentTarget,!1)}),e.addEventListener("mouseleave",s=>{s.currentTarget.classList.contains("is-pressing")&&Se.setPressedVisuals(s.currentTarget,!1)}),e.addEventListener("touchstart",s=>{Se.setPressedVisuals(s.currentTarget,!0)},{passive:!0}),e.addEventListener("touchend",s=>{Se.setPressedVisuals(s.currentTarget,!1)}),e.addEventListener("touchcancel",s=>{Se.setPressedVisuals(s.currentTarget,!1)}),e.addEventListener("click",function(s){_c(this,n)}),e.dataset.clickListenerAdded="true")}),qt("themeChanged",e=>{(ct()==="interactive"||document.body.classList.contains("is-transitioning-from-dim"))&&No()}),ct()==="interactive"&&No()}function _c(r,t){const e=ct();if(e!=="interactive"){console.log(`[ToggleManager Click] Interaction blocked for group '${t}', app not interactive. Status: ${e}`);return}if(Se.setGroupSelected(t,r.dataset.toggleValue),t==="system-power")r.dataset.toggleValue;else if(t==="light"){const i=fa(),n=r.dataset.toggleValue==="on"?"light":"dark";i!==n&&cc(n)}}function No(){const r=fa(),t="light";if(Mi[t]&&Mi[t].length>0){const e=r==="light"?"on":"off";Se.setGroupSelected(t,e)}}const lp=Object.freeze(Object.defineProperty({__proto__:null,handleToggleClick:_c,init:pc,syncLightToggleToThemeVisuals:No},Symbol.toStringTag,{value:"Module"}));let Lt=!1,gc=0,Ae={value:0},hn=0,jr=null,Fe=null,_i=null,It=null,us=null,Pe=-1,en="",nn=-1,Ro=-1,Xs=-1,G=null,Oo=null,cs=null;function mc(r,t,e,i){if(!r||!t){console.error("[LensManager INIT] CRITICAL ERROR: Missing documentElement or colorLensGradientEl.");return}if(!e){console.error("[LensManager INIT] CRITICAL ERROR: Missing configModule.");return}if(!i){console.error("[LensManager INIT] CRITICAL ERROR: Missing GSAP instance.");return}_i=r,It=t,us=document.getElementById("lens-super-glow"),G=e,cs=i,Oo=tp(o=>{if(!_i)return;const a=Math.max(0,Math.min(o,1.05));_i.style.setProperty("--lens-power",a.toFixed(3))},G.DEBOUNCE_DELAY/3),us||console.warn("[LensManager INIT] Optional #lens-super-glow element not found.");const n=Nn(),s=wn("A");Pe=s?(s.hue%360+360)%360:G.DEFAULT_DIAL_A_HUE,Ro=Pe,ga(Pe),Ae.value=n,hn=n,pa(n),qt("trueLensPowerChanged",Ec),qt("dialBInteractionChange",dp),qt("dialUpdated",cp),qt("appStatusChanged",fp)}function up(r=null,t=null){const e=r!==null?r:G.LENS_STARTUP_TARGET_POWER,i=t!==null?t:G.LENS_STARTUP_RAMP_DURATION,n=cs.timeline(),s=Nn(),o={value:s*100};return s<=1e-4&&It&&Ts(0),n.to(o,{value:e,duration:i/1e3,ease:"sine.inOut",onStart:()=>{It&&It.style.opacity!=="1"&&ct()!=="loading"&&ct()!=="error"&&(It.style.opacity="1")},onUpdate:function(){bo(this.targets()[0].value)},onComplete:()=>{const a=o.value;bo(a);const l=a/100*359.999,u=l*G.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG,f=wn("B")||{};Ds("B",{hue:l,targetHue:l,rotation:u,targetRotation:u,isDragging:f.isDragging||!1})}}),n}function pa(r){Ts(r),_a(r,!0)}function _a(r,t=!1){if(_i)if(t){const e=Math.max(0,Math.min(r,1.05));_i.style.setProperty("--lens-power",e.toFixed(3))}else if(Oo)Oo(r);else{const e=Math.max(0,Math.min(r,1.05));_i.style.setProperty("--lens-power",e.toFixed(3))}}function ga(r){if(!_i||!G)return;const t=(Number(r)%360+360)%360;(Math.abs(t-Xs)>=G.HUE_UPDATE_THRESHOLD||Xs===-1)&&(_i.style.setProperty("--dynamic-lens-super-glow-hue",t.toFixed(1)),Xs=t)}function cp(r){if(!(ct()==="loading"||ct()==="error"||!G)&&r&&r.id==="A"&&r.state){const t=(r.state.hue%360+360)%360,e=Math.abs(t-Pe);if(Math.min(e,360-e)>=G.HUE_UPDATE_THRESHOLD){Pe=t,ga(Pe);const n=Ae.value+(Lt?Sc(performance.now()):0);pa(n)}}}function Yi(r=!1){const t=Ae.value+(Lt?Sc(performance.now()):0);_a(t,r),Ts(t)}function Ts(r){var c;if(!It||!G)return;const t=ct(),e=r<=1e-4;if(t==="loading"||t==="starting-up"&&e&&((c=wn("B"))==null?void 0:c.hue)<=1e-4){It.style.opacity!=="0"&&(It.style.opacity="0"),It.style.background!=="none"&&(It.style.background="none",en="none"),nn=r;return}if(t==="error"){It.style.opacity!=="0"&&(It.style.opacity="0"),It.style.background!=="none"&&(It.style.background="none",en="none"),nn=r;return}It.style.opacity!=="1"&&(It.style.opacity="1");const i=Math.abs(r-nn)>=1e-4,n=Math.abs(Pe-Ro)>=G.HUE_UPDATE_THRESHOLD;let s=i||n;if(e&&(en==="none"||nn>1e-4)&&(s=!0),!s&&en!==""&&en!=="none"){nn=r;return}const o=Math.max(G.LENS_GRADIENT_BREAKPOINTS[0].power,r);let a=G.LENS_GRADIENT_BREAKPOINTS[0],l=G.LENS_GRADIENT_BREAKPOINTS[0];for(let _=0;_<G.LENS_GRADIENT_BREAKPOINTS.length;_++){if(o<=G.LENS_GRADIENT_BREAKPOINTS[_].power){l=G.LENS_GRADIENT_BREAKPOINTS[_],a=_>0?G.LENS_GRADIENT_BREAKPOINTS[_-1]:G.LENS_GRADIENT_BREAKPOINTS[0];break}_===G.LENS_GRADIENT_BREAKPOINTS.length-1&&(a=G.LENS_GRADIENT_BREAKPOINTS[_],l=G.LENS_GRADIENT_BREAKPOINTS[_])}let u=0;l.power>a.power?(u=(Math.max(a.power,Math.min(r,l.power))-a.power)/(l.power-a.power),u=Math.max(0,Math.min(u,1))):r<=a.power?u=0:u=1,e&&(u=0,a=G.LENS_GRADIENT_BREAKPOINTS[0],l=G.LENS_GRADIENT_BREAKPOINTS[0]);const f=[];for(let _=0;_<G.NUM_LENS_GRADIENT_STOPS;_++){const p=a.stops[_],g=l.stops[_];if(!p||!g){console.warn(`[LensManager] Missing stop data at index ${_} for power ${r}`),f.push("oklch(0 0 0) 0%");continue}const m=p.l+u*(g.l-p.l),E=p.c+u*(g.c-p.c),T=p.pos+u*(g.pos-p.pos);let y=p.type==="hotspot"?Pe+G.LENS_HOTSPOT_HUE_OFFSET:p.type==="main"?Pe:0;y=(y%360+360)%360,f.push(`oklch(${m.toFixed(3)} ${E.toFixed(3)} ${y.toFixed(1)}) ${(T*100).toFixed(2)}%`)}G.LENS_GRADIENT_BREAKPOINTS[0].stops[G.NUM_LENS_GRADIENT_STOPS-1].pos*100<99.9&&f.push("oklch(0 0 0 / 0) 100%");const h=`radial-gradient(circle at 50% 50%, ${f.join(", ")})`;It.style.background!==h&&(It.style.background=h),en=h,nn=r,Ro=Pe}function Ec(r){if(!G||!cs)return;hn=r,Fe&&Fe.kill();const t=ct()==="starting-up",e=Ss()==="idle";t||!e?(Ae.value=hn,Lt||Yi(!0)):Fe=cs.to(Ae,{value:hn,duration:G.LENS_OSCILLATION_SMOOTHING_DURATION,ease:"power1.out",onUpdate:()=>{Lt||Yi()},onComplete:()=>{Fe=null,Lt||Yi(!0),ct()==="interactive"&&Ae.value>=G.LENS_OSCILLATION_THRESHOLD&&!Lt&&Mo()}}),(hn<G.LENS_OSCILLATION_THRESHOLD||!e||t)&&Lt&&ds(),ct()==="interactive"&&e&&Ae.value>=G.LENS_OSCILLATION_THRESHOLD&&!Lt&&Mo()}function dp(r){G&&(r==="dragging"||r==="settling"?(Lt&&ds(),Fe&&Fe.kill(),Ae.value=Nn(),Yi(!0)):r==="idle"&&Ec(Nn()))}function fp(r){if(G){if(r==="loading"||r==="error"){Lt&&ds(),Fe&&Fe.kill(),Ae.value=0,hn=0,Ts(0),_a(0,!0),us&&(us.style.opacity="0");return}Yi(!0),ga(Pe),r==="interactive"?Ss()==="idle"&&Ae.value>=G.LENS_OSCILLATION_THRESHOLD&&!Lt&&Mo():(Lt&&ds(),r==="starting-up"&&Fe&&Fe.kill())}}function Mo(){G&&(Lt||ct()!=="interactive"||Ss()!=="idle"||(Lt=!0,gc=performance.now(),Dc(performance.now())))}function ds(){Lt&&(Lt=!1,jr&&cancelAnimationFrame(jr),jr=null,Yi(!0))}function Sc(r){if(!Lt||!G)return 0;const t=(r-gc)/1e3,e=Math.max(0,Ae.value-G.LENS_OSCILLATION_THRESHOLD),i=1-G.LENS_OSCILLATION_THRESHOLD,n=i>0?Math.min(1,e/i):0,s=G.LENS_OSCILLATION_AMPLITUDE_MIN+n*G.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,o=ep(n,0,1,G.LENS_OSCILLATION_PERIOD_AT_THRESHOLD,G.LENS_OSCILLATION_PERIOD_AT_MAX_POWER);return o<=.001?0:Math.sin(2*Math.PI/o*t)*s}function Dc(r){Lt&&(Yi(),jr=requestAnimationFrame(Dc))}const hp=Object.freeze(Object.defineProperty({__proto__:null,directUpdateLensVisuals:pa,energizeLensCoreStartup:up,init:mc},Symbol.toStringTag,{value:"Module"})),Ie={P1_EMERGENCY_SUBSYSTEMS:"GOOD MORNING. INITIATING STARTUP PROTOCOL.",P2_BACKUP_POWER:"BACKUP POWER ENGAGED.",P3_MAIN_POWER_ONLINE:"MAIN POWER STABLE.",P4_OPTICAL_CORE_REACTIVATE:"OPTICAL CORE REACTIVATED.",P5_DIAGNOSTIC_INTERFACE:"DIAGNOSTICS ONLINE.",P6_MOOD_INTENSITY_CONTROLS:"MOOD CONTROLS ACTIVE.",P7_HUE_CORRECTION_SYSTEMS:"HUE SYSTEMS ALIGNED.",P8_EXTERNAL_LIGHTING_CONTROLS:"EXTERNAL LIGHTING RESPONSIVE.",P9_AUX_LIGHTING_LOW:"AUX LIGHTING: LOW INTENSITY.",P11_SYSTEM_OPERATIONAL:"ALL SYSTEMS NOMINAL. HUE 9000 OPERATIONAL."},Ws={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}°","  - INTENSITY DIAL (B) SETTING: {dialBHue}°","  - ASSIGNED ENVIRONMENT HUE: {envHue}°","  - ASSIGNED LCD HUE: {lcdHue}°","  - ASSIGNED LOGO HUE: {logoHue}°","  - ASSIGNED BUTTON HUE: {btnHue}°","SYSTEM NOMINAL. AWAITING INPUT."]},Br={dialA:r=>`MOOD DIAL SET TO ${r.value}°`,dialB:r=>`INTENSITY DIAL SET TO ${r.value}%`,envHue:r=>`ENVIRONMENT HUE ASSIGNED: ${r.hue}°`,lcdHue:r=>`LCD HUE ASSIGNED: ${r.hue}°`,logoHue:r=>`LOGO HUE ASSIGNED: ${r.hue}°`,btnHue:r=>`BUTTON HUE ASSIGNED: ${r.hue}°`,FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`};function pp(r,t={},e=null){const{type:i,source:n,data:s,messageKey:o}=r||{};if(r&&r.content&&Array.isArray(r.content))return r.content;if(r&&r.content&&typeof r.content=="string")return[r.content];switch(i){case"startup":return[Ie[o||n]||`Unknown startup event: ${o||n}`];case"block":if(o&&Ws[o]){if(o==="BTN4_MESSAGE"){const a=(e==null?void 0:e.DEFAULT_DIAL_A_HUE)??"N/A_CONF";return Ws[o].map(l=>{var u,f,d,h,c,_;return l.replace("{currentTheme}",t.theme||"N/A").replace("{lensPower}",t.lensPower!==void 0?Math.round(t.lensPower*100):"N/A").replace("{dialAHue}",((u=t.dialA)==null?void 0:u.hue)!==void 0?Math.round(t.dialA.hue):String(Math.round(a))).replace("{dialBHue}",((f=t.dialB)==null?void 0:f.hue)!==void 0?Math.round(t.dialB.hue):"N/A").replace("{envHue}",((d=t.envHue)==null?void 0:d.hue)!==void 0?Math.round(t.envHue.hue):"N/A").replace("{lcdHue}",((h=t.lcdHue)==null?void 0:h.hue)!==void 0?Math.round(t.lcdHue.hue):"N/A").replace("{logoHue}",((c=t.logoHue)==null?void 0:c.hue)!==void 0?Math.round(t.logoHue.hue):"N/A").replace("{btnHue}",((_=t.btnHue)==null?void 0:_.hue)!==void 0?Math.round(t.btnHue.hue):"N/A")})}return Ws[o]}return[`Unknown block message key: ${o||n}`];case"status":return o&&Br[o]&&s?[Br[o](s)]:Br[n]&&s?[Br[n](s)]:[`Status update from ${n}: ${JSON.stringify(s)}`];default:return[`Unknown message type: ${i} from ${n}`]}}class _p{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._cursorElement=null,this._domInitialized=!1,this._initialMessageFlickered=!1,this.debugFlicker=!0}init(t,e,i,n,s){if(!t||!e){console.error("[TerminalManager INIT] CRITICAL: Terminal DOM elements not provided.");return}if(!i||!n||!s){console.error("[TerminalManager INIT] CRITICAL: Missing appState, configModule, or gsap service.");return}if(this._terminalContainerElement=t,this._terminalContentElement=e,this._appState=i,this._configModule=n,this._gsap=s,!this._gsap||typeof this._gsap.to!="function"){console.error("[TerminalManager INIT] CRITICAL: GSAP service is invalid or not provided correctly.");return}this._setupDOM(),this._appState&&typeof this._appState.subscribe=="function"?this._appState.subscribe("requestTerminalMessage",this._handleRequestTerminalMessage.bind(this)):console.error("[TerminalManager INIT] appState service or its subscribe method is not available.")}_setupDOM(){this._domInitialized||(this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this._cursorElement.textContent="▋",this._cursorElement.style.visibility="hidden",this._terminalContentElement.innerHTML="",this._domInitialized=!0)}_handleRequestTerminalMessage(t){if(!this._configModule||!t)return;let e={};t.messageKey==="BTN4_MESSAGE"&&this._appState&&(e={theme:this._appState.getCurrentTheme(),lensPower:this._appState.getTrueLensPower(),dialA:this._appState.getDialState("A"),dialB:this._appState.getDialState("B"),envHue:this._appState.getTargetColorProperties("env"),lcdHue:this._appState.getTargetColorProperties("lcd"),logoHue:this._appState.getTargetColorProperties("logo"),btnHue:this._appState.getTargetColorProperties("btn")});const i=pp(t,e,this._configModule),n={...t,content:Array.isArray(i)?i:[i],linesTyped:0};this._messageQueue.push(n),this._isTyping||this._processQueue()}async _processQueue(){if(!this._configModule){this._isTyping=!1;return}if(this._messageQueue.length===0){this._isTyping=!1;return}if(this._isTyping&&this._messageQueue.length>0)return;this._isTyping=!0;const t=this._messageQueue.shift();this._gsap.getProperty(this._terminalContentElement,"opacity")<1&&(this.debugFlicker&&console.log(`[TerminalManager _processQueue] Forcing #terminal-lcd-content opacity to 1 before typing message: ${t.source}`),this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"})),t.source==="P1_EMERGENCY_SUBSYSTEMS"&&this._terminalContainerElement&&this._gsap.getProperty(this._terminalContainerElement,"autoAlpha")<.8&&(this.debugFlicker&&console.log("[TerminalManager _processQueue] Forcing .actual-lcd-screen-element (terminal container) autoAlpha to 1 for P1 message."),this._gsap.set(this._terminalContainerElement,{autoAlpha:1}));const e=Math.random()*(this._configModule.TERMINAL_NEW_LINE_DELAY_MAX_MS-this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS)+this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS;await new Promise(i=>setTimeout(i,e));for(let i=0;i<t.content.length;i++){const n=t.content[i];if(this._addNewLineAndPrepareForTyping(),t.source==="P1_EMERGENCY_SUBSYSTEMS"&&!this._initialMessageFlickered&&this._currentLineElement){this.debugFlicker&&console.log(`[TerminalManager P1 Flicker] Preparing for initial message: "${n}"`),this._currentLineElement.classList.add("terminal-line--initial-boot"),this._currentLineElement.appendChild(this._cursorElement),this._showCursor();const s=t.flickerProfile||"textFlickerToDimlyLit",o=this.playInitialTextFlicker(this._currentLineElement,n,s);o&&o.completionPromise?await o.completionPromise:o&&o.timeline&&await new Promise(a=>o.timeline.eventCallback("onComplete",a).play()),this._initialMessageFlickered=!0}else this._showCursor(),await this._typeLine(n,t.type);i<t.content.length-1&&await new Promise(s=>setTimeout(s,this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS/2))}this._hideCursor(),this._isTyping=!1,this._processQueue()}_addNewLineAndPrepareForTyping(){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines()}_typeLine(t,e="status"){return new Promise(i=>{if(!this._gsap||!this._configModule){console.error("[TerminalManager _typeLine] GSAP or ConfigModule not available."),i();return}if(!this._currentLineElement){console.error("[TerminalManager _typeLine] _currentLineElement is null. Cannot type."),i();return}let n;switch(e){case"block":n=this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR;break;case"startup":n=this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;break;case"status":default:n=this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR;break}const s=t.length*n/1e3;this._currentLineElement.appendChild(this._cursorElement),this._gsap.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:t,delimiter:""},ease:"none",onUpdate:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement)},onComplete:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),i()}})})}_scrollTerminal(){this._terminalContainerElement&&(this._terminalContainerElement.scrollTop=this._terminalContainerElement.scrollHeight)}_limitMaxLines(){if(this._configModule)for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM&&this._terminalContentElement.firstChild;)this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_showCursor(){this._cursorElement&&this._currentLineElement&&(this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),this._cursorElement.style.visibility="visible")}_hideCursor(){this._cursorElement&&(this._cursorElement.style.visibility="hidden")}playInitialTextFlicker(t,e,i="textFlickerToDimlyLit"){if(!this._gsap||!this._configModule)return{timeline:gsap.timeline().to({},{duration:.01}),completionPromise:Promise.resolve()};if(!t)return{timeline:this._gsap.timeline().to({},{duration:.01}),completionPromise:Promise.resolve()};this.debugFlicker&&console.log(`[TerminalManager playInitialTextFlicker] Target: ${t.tagName}, Text: "${e}", Profile: ${i}`);const n=this._gsap.timeline({onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] START for "${e}". Initial textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)},onComplete:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] COMPLETE for "${e}". Final textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)}});n.call(()=>{t.textContent="",t.appendChild(this._cursorElement),this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] Text content cleared, cursor appended. Pre-flicker autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)}),this._terminalContentElement&&this._gsap.getProperty(this._terminalContentElement,"opacity")<1&&(n.set(this._terminalContentElement,{opacity:1,visibility:"visible"},0),this.debugFlicker&&console.log("[TerminalManager P1 Flicker MasterTL] Set #terminal-lcd-content opacity to 1 at start of P1 message flicker.")),this._terminalContainerElement&&this._gsap.getProperty(this._terminalContainerElement,"autoAlpha")<.8&&(n.set(this._terminalContainerElement,{autoAlpha:1},0),this.debugFlicker&&console.log("[TerminalManager P1 Flicker MasterTL] Set .actual-lcd-screen-element autoAlpha to 1 at start of P1 message flicker."));const s=ls(t,i,{gsapInstance:this._gsap,onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker createAdvancedFlicker] Flicker timeline START for "${e}". textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)},onTimelineComplete:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker createAdvancedFlicker] Flicker timeline COMPLETE for "${e}". textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)}});s&&s.timeline&&n.add(s.timeline);const o={duration:e.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3*.75,text:{value:e,delimiter:""},ease:"none",onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker TextPlugin] Text animation START for "${e}". textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)},onUpdate:()=>{t&&this._cursorElement&&this._cursorElement.parentElement!==t&&t.appendChild(this._cursorElement)},onComplete:()=>{t&&this._cursorElement&&this._cursorElement.parentElement!==t&&t.appendChild(this._cursorElement),this.debugFlicker&&console.log(`[TerminalManager P1 Flicker TextPlugin] Text animation COMPLETE for "${e}". textLineElement autoAlpha: ${this._gsap.getProperty(t,"autoAlpha")}`)}},a=s&&s.timeline&&s.timeline.duration()>0?s.timeline.duration()*.25:.01;n.to(t,o,a),n.set(t,{autoAlpha:1},">");const l=new Promise(u=>{n.eventCallback("onComplete",u)});return n.duration()===0&&n.to({},{duration:.001}),{timeline:n,completionPromise:l}}playScreenFlickerToState(t,e,i){if(!this._gsap){const n=gsap.timeline();return i&&n.eventCallback("onComplete",i),{timeline:n.to({},{duration:.01}),completionPromise:Promise.resolve()}}if(!t){const n=this._gsap.timeline();return i&&n.eventCallback("onComplete",i),{timeline:n.to({},{duration:.01}),completionPromise:Promise.resolve()}}return this._terminalContentElement&&(this._gsap.getProperty(this._terminalContentElement,"opacity"),this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"})),ls(t,e,{gsapInstance:this._gsap,onTimelineComplete:()=>{this._terminalContentElement&&this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"}),i&&i()}})}}const El=new _p;let Ke=null,at={statusDiv:null,phaseInfoDiv:null,nextPhaseButton:null,playAllButton:null,resetButton:null},$r=null;function Tc(r){const t=at.statusDiv,e=at.phaseInfoDiv;if(!t||!e)return;let i="Phase: Unknown",n="Details unavailable.";if(r){const s=r.description||r.currentPhaseName||"N/A",o=r.nextPhaseDescription||r.nextPhaseName||"N/A";r.currentPhaseName==="Idle"||r.status==="ready"&&r.currentPhaseName==="Idle"?(i="Phase: Idle",n=`Next: ${o}`):r.currentPhaseName==="sequence_complete"||r.status==="completed"&&r.currentPhaseName==="sequence_complete"?(i="Phase: All Complete",n="Sequence finished. Reset to start again."):r.currentPhaseName==="ERROR"?(i=`Phase: ERROR (${s})`,n="Error occurred. Check console. Reset to try again."):r.status==="paused"||r.status==="completed"&&r.currentPhaseName!=="sequence_complete"?(i=`Done: ${s}`,n=`Next: ${o}`):r.status==="starting"?(i=`Running: ${s}`,n=`Awaiting completion... (Next: ${o})`):(i=`Phase: ${s}`,n=`Status: ${r.status||"N/A"}. Next: ${o}`)}t.textContent=i,e.textContent=n}function Sl(){Ke&&Ke.playNextPhase()}function Dl(){Ke?Ke.start(!1):console.warn("[DebugManager handlePlayAllClick] StartupManager not available.")}function Tl(){Ke?Ke.resetSequence():console.warn("[DebugManager handleResetSequenceClick] StartupManager not available.")}function gp(r){Tc(r)}function yc(r){at.nextPhaseButton&&(at.nextPhaseButton.disabled=!r)}function Ac(r){if(!r.startupSequenceManager)throw new Error("StartupSequenceManager not provided to DebugManager.");if(!r.domElements)throw new Error("DOM elements for debug controls not provided to DebugManager.");Ke=r.startupSequenceManager,$r=r.appState,at.statusDiv=r.domElements.debugStatusDiv,at.phaseInfoDiv=r.domElements.debugPhaseInfoDiv,at.nextPhaseButton=r.domElements.nextPhaseButton,at.playAllButton=r.domElements.playAllButton,at.resetButton=r.domElements.resetButton,at.statusDiv||console.error("[DebugManager INIT] config.domElements.debugStatusDiv is null!"),at.phaseInfoDiv||console.error("[DebugManager INIT] config.domElements.debugPhaseInfoDiv is null!"),(!at.statusDiv||!at.phaseInfoDiv||!at.nextPhaseButton||!at.playAllButton||!at.resetButton)&&console.warn("[DebugManager INIT] One or more core debug DOM elements are missing. Debug panel may be non-functional."),at.nextPhaseButton&&(at.nextPhaseButton.removeEventListener("click",Sl),at.nextPhaseButton.addEventListener("click",Sl),yc(!0)),at.playAllButton&&(at.playAllButton.removeEventListener("click",Dl),at.playAllButton.addEventListener("click",Dl)),at.resetButton&&(at.resetButton.removeEventListener("click",Tl),at.resetButton.addEventListener("click",Tl)),$r&&typeof $r.subscribe=="function"?(typeof window.debugManagerPhaseUnsubscriber=="function"&&window.debugManagerPhaseUnsubscriber(),window.debugManagerPhaseUnsubscriber=$r.subscribe("startup:phaseChanged",gp)):console.warn("[DebugManager INIT] appState or its subscribe method not available. Phase updates won't be received.");const t=Ke.getCurrentPhaseInfo?Ke.getCurrentPhaseInfo():{currentPhaseName:"Idle",status:"ready",nextPhaseName:"startupPhase0",description:"Idle",nextPhaseDescription:"P0: Baseline Setup"};Tc(t)}const mp=Object.freeze(Object.defineProperty({__proto__:null,init:Ac,setNextPhaseButtonEnabled:yc},Symbol.toStringTag,{value:"Module"}));function Ep(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Sp(){const r=Ep();if(r.__xstate__)return r.__xstate__}const Dp=r=>{if(typeof window>"u")return;const t=Sp();t&&t.register(r)};class yl{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const Pc=".",Tp="",Cc="",yp="#",Ap="*",Ic="xstate.init",fs="xstate.stop";function Pp(r,t){return{type:`xstate.after.${r}.${t}`}}function xo(r,t){return{type:`xstate.done.state.${r}`,output:t}}function Cp(r,t){return{type:`xstate.done.actor.${r}`,output:t,actorId:r}}function Ip(r,t){return{type:`xstate.error.actor.${r}`,error:t,actorId:r}}function vc(r){return{type:Ic,input:r}}function $e(r){setTimeout(()=>{throw r})}const vp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lc(r,t){const e=Al(r),i=Al(t);return typeof i=="string"?typeof e=="string"?i===e:!1:typeof e=="string"?e in i:Object.keys(e).every(n=>n in i?Lc(e[n],i[n]):!1)}function ma(r){if(Nc(r))return r;const t=[];let e="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:e+=r[i+1],i++;continue;case 46:t.push(e),e="";continue}e+=r[i]}return t.push(e),t}function Al(r){if(l_(r))return r.value;if(typeof r!="string")return r;const t=ma(r);return Lp(t)}function Lp(r){if(r.length===1)return r[0];const t={};let e=t;for(let i=0;i<r.length-1;i++)if(i===r.length-2)e[r[i]]=r[i+1];else{const n=e;e={},n[r[i]]=e}return t}function Pl(r,t){const e={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];e[s]=t(r[s],s,r,n)}return e}function bc(r){return Nc(r)?r:[r]}function di(r){return r===void 0?[]:bc(r)}function wo(r,t,e,i){return typeof r=="function"?r({context:t,event:e,self:i}):r}function Nc(r){return Array.isArray(r)}function bp(r){return r.type.startsWith("xstate.error.actor")}function un(r){return bc(r).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function Rc(r){if(!(r===void 0||r===Tp))return di(r)}function Fo(r,t,e){var s,o,a;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(o=i?r.error:t)==null?void 0:o.bind(n),complete:(a=i?r.complete:e)==null?void 0:a.bind(n)}}function Cl(r,t){return`${t}.${r}`}function Ea(r,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return r.implementations.actors[t];const[,i,n]=e,o=r.getStateNodeById(n).config.invoke;return(Array.isArray(o)?o[i]:o).src}function Il(r,t){return`${r.sessionId}.${t}`}let Np=0;function Rp(r,t){const e=new Map,i=new Map,n=new WeakMap,s=new Set,o={},{clock:a,logger:l}=t,u={schedule:(h,c,_,p,g=Math.random().toString(36).slice(2))=>{const m={source:h,target:c,event:_,delay:p,id:g,startedAt:Date.now()},E=Il(h,g);d._snapshot._scheduledEvents[E]=m;const T=a.setTimeout(()=>{delete o[E],delete d._snapshot._scheduledEvents[E],d._relay(h,c,_)},p);o[E]=T},cancel:(h,c)=>{const _=Il(h,c),p=o[_];delete o[_],delete d._snapshot._scheduledEvents[_],p!==void 0&&a.clearTimeout(p)},cancelAll:h=>{for(const c in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[c];_.source===h&&u.cancel(h,_.id)}}},f=h=>{if(!s.size)return;const c={...h,rootId:r.sessionId};s.forEach(_=>{var p;return(p=_.next)==null?void 0:p.call(_,c)})},d={_snapshot:{_scheduledEvents:((t==null?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${Np++}`,_register:(h,c)=>(e.set(h,c),h),_unregister:h=>{e.delete(h.sessionId);const c=n.get(h);c!==void 0&&(i.delete(c),n.delete(h))},get:h=>i.get(h),_set:(h,c)=>{const _=i.get(h);if(_&&_!==c)throw new Error(`Actor with system ID '${h}' already exists.`);i.set(h,c),n.set(c,h)},inspect:h=>{const c=Fo(h);return s.add(c),{unsubscribe(){s.delete(c)}}},_sendInspectionEvent:f,_relay:(h,c,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:c,event:_}),c._send(_)},scheduler:u,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const c in h){const{source:_,target:p,event:g,delay:m,id:E}=h[c];u.schedule(_,p,g,m,E)}},_clock:a,_logger:l};return d}let js=!1;const Sa=1;let Gt=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const Op={clock:{setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class Mp{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new yl(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Gt.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...Op,...e},{clock:n,logger:s,parent:o,syncSnapshot:a,id:l,systemId:u,inspect:f}=i;this.system=o?o.system:Rp(this,{clock:n,logger:s}),f&&!o&&this.system.inspect(Fo(f)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=(e==null?void 0:e.logger)??this.system._logger,this.clock=(e==null?void 0:e.clock)??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=i,this.src=i.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),c=this.eventListeners.get("*");if(!h&&!c)return;const _=[...h?h.values():[],...c?c.values():[]];for(const p of _)p(d)},actionExecutor:d=>{const h=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:d.type,params:d.params}}),!d.exec)return;const c=js;try{js=!0,d.exec(d.info,d.params)}finally{js=c}};this._processingStatus===Gt.Running?h():this._deferred.push(h)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),u&&(this._systemId=u,this.system._set(u,this)),this._initState((e==null?void 0:e.snapshot)??(e==null?void 0:e.state)),u&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){var e;try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,(e=this.options)==null?void 0:e.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(t,e){var n,s;this._snapshot=t;let i;for(;i=this._deferred.shift();)try{i()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(n=o.next)==null||n.call(o,t)}catch(a){$e(a)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,t)}catch(a){$e(a)}this._stopProcedure(),this._complete(),this._doneEvent=Cp(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,i){var s;const n=Fo(t,e,i);if(this._processingStatus!==Gt.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(o){$e(o)}break;case"error":{const o=this._snapshot.error;if(!n.error)$e(o);else try{n.error(o)}catch(a){$e(a)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(t,e){let i=this.eventListeners.get(t);i||(i=new Set,this.eventListeners.set(t,i));const n=e.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Gt.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Gt.Running;const t=vc(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,i;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(e,t),t.type===fs&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Gt.Stopped?this:(this.mailbox.clear(),this._processingStatus===Gt.NotStarted?(this._processingStatus=Gt.Stopped,this):(this.mailbox.enqueue({type:fs}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var t;for(const e of this.observers)try{(t=e.complete)==null||t.call(e)}catch(i){$e(i)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||$e(t);return}let e=!1;for(const i of this.observers){const n=i.error;e||(e=!n);try{n==null||n(t)}catch(s){$e(s)}}this.observers.clear(),e&&$e(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,Ip(this.id,t))}_stopProcedure(){return this._processingStatus!==Gt.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new yl(this._process.bind(this)),this._processingStatus=Gt.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Gt.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:Dp)(this)}toJSON(){return{xstate$$type:Sa,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[vp](){return this}getSnapshot(){return this._snapshot}}function Tr(r,...[t]){return new Mp(r,t)}const xp=Tr;function wp(r,t,e,i,{sendId:n}){const s=typeof n=="function"?n(e,i):n;return[t,{sendId:s},void 0]}function Fp(r,t){r.defer(()=>{r.system.scheduler.cancel(r.self,t.sendId)})}function kp(r){function t(e,i){}return t.type="xstate.cancel",t.sendId=r,t.resolve=wp,t.execute=Fp,t}function Up(r,t,e,i,{id:n,systemId:s,src:o,input:a,syncSnapshot:l}){const u=typeof o=="string"?Ea(t.machine,o):o,f=typeof n=="function"?n(e):n;let d,h;return u&&(h=typeof a=="function"?a({context:t.context,event:e.event,self:r.self}):a,d=Tr(u,{id:f,src:o,parent:r.self,syncSnapshot:l,systemId:s,input:h})),[ji(t,{children:{...t.children,[f]:d}}),{id:n,systemId:s,actorRef:d,src:o,input:h},void 0]}function Bp(r,{actorRef:t}){t&&r.defer(()=>{t._processingStatus!==Gt.Stopped&&t.start()})}function $p(...[r,{id:t,systemId:e,input:i,syncSnapshot:n=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=t,s.systemId=e,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=Up,s.execute=Bp,s}function Gp(r,t,e,i,{actorRef:n}){const s=typeof n=="function"?n(e,i):n,o=typeof s=="string"?t.children[s]:s;let a=t.children;return o&&(a={...a},delete a[o.id]),[ji(t,{children:a}),o,void 0]}function Hp(r,t){if(t){if(r.system._unregister(t),t._processingStatus!==Gt.Running){r.stopChild(t);return}r.defer(()=>{r.stopChild(t)})}}function Oc(r){function t(e,i){}return t.type="xstate.stopChild",t.actorRef=r,t.resolve=Gp,t.execute=Hp,t}function Da(r,t,e,i){const{machine:n}=i,s=typeof r=="function",o=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return Da(o,t,e,i);const a={context:t,event:e},l=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:t,event:e}):r.params:void 0;return"check"in o?o.check(i,a,o):o(a,l)}const Ta=r=>r.type==="atomic"||r.type==="final";function Rn(r){return Object.values(r.states).filter(t=>t.type!=="history")}function Nr(r,t){const e=[];if(t===r)return e;let i=r.parent;for(;i&&i!==t;)e.push(i),i=i.parent;return e}function hs(r){const t=new Set(r),e=xc(t);for(const i of t)if(i.type==="compound"&&(!e.get(i)||!e.get(i).length))vl(i).forEach(n=>t.add(n));else if(i.type==="parallel"){for(const n of Rn(i))if(n.type!=="history"&&!t.has(n)){const s=vl(n);for(const o of s)t.add(o)}}for(const i of t){let n=i.parent;for(;n;)t.add(n),n=n.parent}return t}function Mc(r,t){const e=t.get(r);if(!e)return{};if(r.type==="compound"){const n=e[0];if(n){if(Ta(n))return n.key}else return{}}const i={};for(const n of e)i[n.key]=Mc(n,t);return i}function xc(r){const t=new Map;for(const e of r)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function wc(r,t){const e=hs(t);return Mc(r,xc(e))}function ya(r,t){return t.type==="compound"?Rn(t).some(e=>e.type==="final"&&r.has(e)):t.type==="parallel"?Rn(t).every(e=>ya(r,e)):t.type==="final"}const ys=r=>r[0]===yp;function Yp(r,t){return r.transitions.get(t)||[...r.transitions.keys()].filter(i=>{if(i===Ap)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=t.split(".");for(let o=0;o<n.length;o++){const a=n[o],l=s[o];if(a==="*")return o===n.length-1;if(a!==l)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function Vp(r){const t=r.config.after;if(!t)return[];const e=n=>{const s=Pp(n,r.id),o=s.type;return r.entry.push(E_(s,{id:o,delay:n})),r.exit.push(kp(o)),o};return Object.keys(t).flatMap(n=>{const s=t[n],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+n)?n:+n,l=e(a);return di(o).map(u=>({...u,event:l,delay:a}))}).map(n=>{const{delay:s}=n;return{...xi(r,n.event,n),delay:s}})}function xi(r,t,e){const i=Rc(e.target),n=e.reenter??!1,s=Wp(r,i),o={...e,actions:di(e.actions),guard:e.guard,target:s,source:r,reenter:n,eventType:t,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function zp(r){const t=new Map;if(r.config.on)for(const e of Object.keys(r.config.on)){if(e===Cc)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[e];t.set(e,un(i).map(n=>xi(r,e,n)))}if(r.config.onDone){const e=`xstate.done.state.${r.id}`;t.set(e,un(r.config.onDone).map(i=>xi(r,e,i)))}for(const e of r.invoke){if(e.onDone){const i=`xstate.done.actor.${e.id}`;t.set(i,un(e.onDone).map(n=>xi(r,i,n)))}if(e.onError){const i=`xstate.error.actor.${e.id}`;t.set(i,un(e.onError).map(n=>xi(r,i,n)))}if(e.onSnapshot){const i=`xstate.snapshot.${e.id}`;t.set(i,un(e.onSnapshot).map(n=>xi(r,i,n)))}}for(const e of r.after){let i=t.get(e.eventType);i||(i=[],t.set(e.eventType,i)),i.push(e)}return t}function Xp(r,t){const e=typeof t=="string"?r.states[t]:t?r.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${r.id}`);const i={source:r,actions:!t||typeof t=="string"?[]:di(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...i,source:`#${r.id}`,target:e?[`#${e.id}`]:[]})};return i}function Wp(r,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(ys(e))return r.machine.getStateNodeById(e);const i=e[0]===Pc;if(i&&!r.parent)return yr(r,e.slice(1));const n=i?r.key+e:e;if(r.parent)try{return yr(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function Fc(r){const t=Rc(r.config.target);return t?{target:t.map(e=>typeof e=="string"?yr(r.parent,e):e)}:r.parent.initial}function Fi(r){return r.type==="history"}function vl(r){const t=kc(r);for(const e of t)for(const i of Nr(e,r))t.add(i);return t}function kc(r){const t=new Set;function e(i){if(!t.has(i)){if(t.add(i),i.type==="compound")e(i.initial.target[0]);else if(i.type==="parallel")for(const n of Rn(i))e(n)}}return e(r),t}function On(r,t){if(ys(t))return r.machine.getStateNodeById(t);if(!r.states)throw new Error(`Unable to retrieve child state '${t}' from '${r.id}'; no child states exist.`);const e=r.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${r.id}'`);return e}function yr(r,t){if(typeof t=="string"&&ys(t))try{return r.machine.getStateNodeById(t)}catch{}const e=ma(t).slice();let i=r;for(;e.length;){const n=e.shift();if(!n.length)break;i=On(i,n)}return i}function ps(r,t){if(typeof t=="string"){const n=r.states[t];if(!n)throw new Error(`State '${t}' does not exist on '${r.id}'`);return[r,n]}const e=Object.keys(t),i=e.map(n=>On(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,e.reduce((n,s)=>{const o=On(r,s);if(!o)return n;const a=ps(o,t[s]);return n.concat(a)},[]))}function jp(r,t,e,i){const s=On(r,t).next(e,i);return!s||!s.length?r.next(e,i):s}function qp(r,t,e,i){const n=Object.keys(t),s=On(r,n[0]),o=Aa(s,t[n[0]],e,i);return!o||!o.length?r.next(e,i):o}function Kp(r,t,e,i){const n=[];for(const s of Object.keys(t)){const o=t[s];if(!o)continue;const a=On(r,s),l=Aa(a,o,e,i);l&&n.push(...l)}return n.length?n:r.next(e,i)}function Aa(r,t,e,i){return typeof t=="string"?jp(r,t,e,i):Object.keys(t).length===1?qp(r,t,e,i):Kp(r,t,e,i)}function Qp(r){return Object.keys(r.states).map(t=>r.states[t]).filter(t=>t.type==="history")}function Ei(r,t){let e=r;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function Zp(r,t){const e=new Set(r),i=new Set(t);for(const n of e)if(i.has(n))return!0;for(const n of i)if(e.has(n))return!0;return!1}function Uc(r,t,e){const i=new Set;for(const n of r){let s=!1;const o=new Set;for(const a of i)if(Zp(ko([n],t,e),ko([a],t,e)))if(Ei(n.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)i.delete(a);i.add(n)}}return Array.from(i)}function Jp(r){const[t,...e]=r;for(const i of Nr(t,void 0))if(e.every(n=>Ei(n,i)))return i}function Pa(r,t){if(!r.target)return[];const e=new Set;for(const i of r.target)if(Fi(i))if(t[i.id])for(const n of t[i.id])e.add(n);else for(const n of Pa(Fc(i),t))e.add(n);else e.add(i);return[...e]}function Bc(r,t){const e=Pa(r,t);if(!e)return;if(!r.reenter&&e.every(n=>n===r.source||Ei(n,r.source)))return r.source;const i=Jp(e.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function ko(r,t,e){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const o=Bc(s,e);s.reenter&&s.source===o&&i.add(o);for(const a of t)Ei(a,o)&&i.add(a)}return[...i]}function t_(r,t){if(r.length!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0}function Uo(r,t,e,i,n,s){if(!r.length)return t;const o=new Set(t._nodes);let a=t.historyValue;const l=Uc(r,o,a);let u=t;n||([u,a]=r_(u,i,e,l,o,a,s,e.actionExecutor)),u=Mn(u,i,e,l.flatMap(d=>d.actions),s,void 0),u=i_(u,i,e,l,o,s,a,n);const f=[...o];u.status==="done"&&(u=Mn(u,i,e,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s,void 0));try{return a===t.historyValue&&t_(t._nodes,o)?u:ji(u,{_nodes:f,historyValue:a})}catch(d){throw d}}function e_(r,t,e,i,n){if(i.output===void 0)return;const s=xo(n.id,n.output!==void 0&&n.parent?wo(n.output,r.context,t,e.self):void 0);return wo(i.output,r.context,s,e.self)}function i_(r,t,e,i,n,s,o,a){let l=r;const u=new Set,f=new Set;n_(i,o,f,u),a&&f.add(r.machine.root);const d=new Set;for(const h of[...u].sort((c,_)=>c.order-_.order)){n.add(h);const c=[];c.push(...h.entry);for(const _ of h.invoke)c.push($p(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(f.has(h)){const _=h.initial.actions;c.push(..._)}if(l=Mn(l,t,e,c,s,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let p=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,g=p||h;for((_==null?void 0:_.type)==="compound"&&s.push(xo(_.id,h.output!==void 0?wo(h.output,l.context,t,e.self):void 0));(p==null?void 0:p.type)==="parallel"&&!d.has(p)&&ya(n,p);)d.add(p),s.push(xo(p.id)),g=p,p=p.parent;if(p)continue;l=ji(l,{status:"done",output:e_(l,t,e,l.machine.root,g)})}}return l}function n_(r,t,e,i){for(const n of r){const s=Bc(n,t);for(const a of n.target||[])!Fi(a)&&(n.source!==a||n.source!==s||n.reenter)&&(i.add(a),e.add(a)),pn(a,t,e,i);const o=Pa(n,t);for(const a of o){const l=Nr(a,s);(s==null?void 0:s.type)==="parallel"&&l.push(s),$c(i,t,e,l,!n.source.parent&&n.reenter?void 0:s)}}}function pn(r,t,e,i){var n;if(Fi(r))if(t[r.id]){const s=t[r.id];for(const o of s)i.add(o),pn(o,t,e,i);for(const o of s)qs(o,r.parent,i,t,e)}else{const s=Fc(r);for(const o of s.target)i.add(o),s===((n=r.parent)==null?void 0:n.initial)&&e.add(r.parent),pn(o,t,e,i);for(const o of s.target)qs(o,r.parent,i,t,e)}else if(r.type==="compound"){const[s]=r.initial.target;Fi(s)||(i.add(s),e.add(s)),pn(s,t,e,i),qs(s,r,i,t,e)}else if(r.type==="parallel")for(const s of Rn(r).filter(o=>!Fi(o)))[...i].some(o=>Ei(o,s))||(Fi(s)||(i.add(s),e.add(s)),pn(s,t,e,i))}function $c(r,t,e,i,n){for(const s of i)if((!n||Ei(s,n))&&r.add(s),s.type==="parallel")for(const o of Rn(s).filter(a=>!Fi(a)))[...r].some(a=>Ei(a,o))||(r.add(o),pn(o,t,e,r))}function qs(r,t,e,i,n){$c(e,i,n,Nr(r,t))}function r_(r,t,e,i,n,s,o,a){let l=r;const u=ko(i,n,s);u.sort((d,h)=>h.order-d.order);let f;for(const d of u)for(const h of Qp(d)){let c;h.history==="deep"?c=_=>Ta(_)&&Ei(_,d):c=_=>_.parent===d,f??(f={...s}),f[h.id]=Array.from(n).filter(c)}for(const d of u)l=Mn(l,t,e,[...d.exit,...d.invoke.map(h=>Oc(h.id))],o,void 0),n.delete(d);return[l,f||s]}function s_(r,t){return r.implementations.actions[t]}function Gc(r,t,e,i,n,s){const{machine:o}=r;let a=r;for(const l of i){const u=typeof l=="function",f=u?l:s_(o,typeof l=="string"?l:l.type),d={context:a.context,event:t,self:e.self,system:e.system},h=u||typeof l=="string"?void 0:"params"in l?typeof l.params=="function"?l.params({context:a.context,event:t}):l.params:void 0;if(!f||!("resolve"in f)){e.actionExecutor({type:typeof l=="string"?l:typeof l=="object"?l.type:l.name||"(anonymous)",info:d,params:h,exec:f});continue}const c=f,[_,p,g]=c.resolve(e,a,d,h,f,n);a=_,"retryResolve"in c&&(s==null||s.push([c,p])),"execute"in c&&e.actionExecutor({type:c.type,info:d,params:p,exec:c.execute.bind(null,e,p)}),g&&(a=Gc(a,t,e,g,n,s))}return a}function Mn(r,t,e,i,n,s){const o=s?[]:void 0,a=Gc(r,t,e,i,{internalQueue:n,deferredActorIds:s},o);return o==null||o.forEach(([l,u])=>{l.retryResolve(e,a,u)}),a}function Ks(r,t,e,i){let n=r;const s=[];function o(u,f,d){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:f,snapshot:u,_transitions:d}),s.push(u)}if(t.type===fs)return n=ji(Ll(n,t,e),{status:"stopped"}),o(n,t,[]),{snapshot:n,microstates:s};let a=t;if(a.type!==Ic){const u=a,f=bp(u),d=bl(u,n);if(f&&!d.length)return n=ji(r,{status:"error",error:u.error}),o(n,u,[]),{snapshot:n,microstates:s};n=Uo(d,r,e,a,!1,i),o(n,u,d)}let l=!0;for(;n.status==="active";){let u=l?o_(n,a):[];const f=u.length?n:void 0;if(!u.length){if(!i.length)break;a=i.shift(),u=bl(a,n)}n=Uo(u,n,e,a,!1,i),l=n!==f,o(n,a,u)}return n.status!=="active"&&Ll(n,a,e),{snapshot:n,microstates:s}}function Ll(r,t,e){return Mn(r,t,e,Object.values(r.children).map(i=>Oc(i)),[],void 0)}function bl(r,t){return t.machine.getTransitionData(t,r)}function o_(r,t){const e=new Set,i=r._nodes.filter(Ta);for(const n of i)t:for(const s of[n].concat(Nr(n,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||Da(o.guard,r.context,t,r)){e.add(o);break t}}return Uc(Array.from(e),new Set(r._nodes),r.historyValue)}function a_(r,t){const e=hs(ps(r,t));return wc(r,[...e])}function l_(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const u_=function(t){return Lc(t,this.value)},c_=function(t){return this.tags.has(t)},d_=function(t){const e=this.machine.getTransitionData(this,t);return!!(e!=null&&e.length)&&e.some(i=>i.target!==void 0||i.actions.length)},f_=function(){const{_nodes:t,tags:e,machine:i,getMeta:n,toJSON:s,can:o,hasTag:a,matches:l,...u}=this;return{...u,tags:Array.from(e)}},h_=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function qr(r,t){return{status:r.status,output:r.output,error:r.error,machine:t,context:r.context,_nodes:r._nodes,value:wc(t.root,r._nodes),tags:new Set(r._nodes.flatMap(e=>e.tags)),children:r.children,historyValue:r.historyValue||{},matches:u_,hasTag:c_,can:d_,getMeta:h_,toJSON:f_}}function ji(r,t={}){return qr({...r,...t},r.machine)}function p_(r){if(typeof r!="object"||r===null)return{};const t={};for(const e in r){const i=r[e];Array.isArray(i)&&(t[e]=i.map(n=>({id:n.id})))}return t}function __(r,t){const{_nodes:e,tags:i,machine:n,children:s,context:o,can:a,hasTag:l,matches:u,getMeta:f,toJSON:d,...h}=r,c={};for(const p in s){const g=s[p];c[p]={snapshot:g.getPersistedSnapshot(t),src:g.src,systemId:g._systemId,syncSnapshot:g._syncSnapshot}}return{...h,context:Hc(o),children:c,historyValue:p_(h.historyValue)}}function Hc(r){let t;for(const e in r){const i=r[e];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)t??(t=Array.isArray(r)?r.slice():{...r}),t[e]={xstate$$type:Sa,id:i.id};else{const n=Hc(i);n!==i&&(t??(t=Array.isArray(r)?r.slice():{...r}),t[e]=n)}}return t??r}function g_(r,t,e,i,{event:n,id:s,delay:o},{internalQueue:a}){const l=t.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const u=typeof n=="function"?n(e,i):n;let f;if(typeof o=="string"){const d=l&&l[o];f=typeof d=="function"?d(e,i):d}else f=typeof o=="function"?o(e,i):o;return typeof f!="number"&&a.push(u),[t,{event:u,id:s,delay:f},void 0]}function m_(r,t){const{event:e,delay:i,id:n}=t;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,e,i,n)});return}}function E_(r,t){function e(i,n){}return e.type="xstate.raise",e.event=r,e.id=t==null?void 0:t.id,e.delay=t==null?void 0:t.delay,e.resolve=g_,e.execute=m_,e}const Nl="xstate.promise.resolve",Rl="xstate.promise.reject",Gr=new WeakMap;function S_(r){return{config:r,transition:(e,i,n)=>{var s;if(e.status!=="active")return e;switch(i.type){case Nl:{const o=i.data;return{...e,status:"done",output:o,input:void 0}}case Rl:return{...e,status:"error",error:i.data,input:void 0};case fs:return(s=Gr.get(n.self))==null||s.abort(),{...e,status:"stopped",input:void 0};default:return e}},start:(e,{self:i,system:n,emit:s})=>{if(e.status!=="active")return;const o=new AbortController;Gr.set(i,o),Promise.resolve(r({input:e.input,system:n,self:i,signal:o.signal,emit:s})).then(l=>{i.getSnapshot().status==="active"&&(Gr.delete(i),n._relay(i,i,{type:Nl,data:l}))},l=>{i.getSnapshot().status==="active"&&(Gr.delete(i),n._relay(i,i,{type:Rl,data:l}))})},getInitialSnapshot:(e,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:e=>e,restoreSnapshot:e=>e}}function D_(r,{machine:t,context:e},i,n){const s=(o,a)=>{if(typeof o=="string"){const l=Ea(t,o);if(!l)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const u=Tr(l,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:typeof(a==null?void 0:a.input)=="function"?a.input({context:e,event:i,self:r.self}):a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId});return n[u.id]=u,u}else return Tr(o,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId})};return(o,a)=>{const l=s(o,a);return n[l.id]=l,r.defer(()=>{l._processingStatus!==Gt.Stopped&&l.start()}),l}}function T_(r,t,e,i,{assignment:n}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:t.context,event:e.event,spawn:D_(r,t,e.event,s),self:r.self,system:r.system};let a={};if(typeof n=="function")a=n(o,i);else for(const u of Object.keys(n)){const f=n[u];a[u]=typeof f=="function"?f(o,i):f}const l=Object.assign({},t.context,a);return[ji(t,{context:l,children:Object.keys(s).length?{...t.children,...s}:t.children}),void 0,void 0]}function Ft(r){function t(e,i){}return t.type="xstate.assign",t.assignment=r,t.resolve=T_,t}const Ol=new WeakMap;function rn(r,t,e){let i=Ol.get(r);return i?t in i||(i[t]=e()):(i={[t]:e()},Ol.set(r,i)),i[t]}const y_={},Vn=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class ur{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Pc),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Pl(this.config.states,(i,n)=>new ur(i,{_parent:this,_key:n,_machine:this.machine})):y_,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=di(this.config.entry).slice(),this.exit=di(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=di(t.tags).slice()}_initialize(){this.transitions=zp(this),this.config.always&&(this.always=un(this.config.always).map(t=>xi(this,Cc,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Vn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Vn),eventType:null})}:void 0,history:this.history,states:Pl(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(Vn)})),entry:this.entry.map(Vn),exit:this.exit.map(Vn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return rn(this,"invoke",()=>di(this.config.invoke).map((t,e)=>{const{src:i,systemId:n}=t,s=t.id??Cl(this.id,e),o=typeof i=="string"?i:`xstate.invoke.${Cl(this.id,e)}`;return{...t,src:o,id:s,systemId:n,toJSON(){const{onDone:a,onError:l,...u}=t;return{...u,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return rn(this,"on",()=>[...this.transitions].flatMap(([e,i])=>i.map(n=>[e,n])).reduce((e,[i,n])=>(e[i]=e[i]||[],e[i].push(n),e),{}))}get after(){return rn(this,"delayedTransitions",()=>Vp(this))}get initial(){return rn(this,"initial",()=>Xp(this,this.config.initial))}next(t,e){const i=e.type,n=[];let s;const o=rn(this,`candidates-${i}`,()=>Yp(this,i));for(const a of o){const{guard:l}=a,u=t.context;let f=!1;try{f=!l||Da(l,u,e,t)}catch(d){const h=typeof l=="string"?l:typeof l=="object"?l.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${i}' in state node '${this.id}':
${d.message}`)}if(f){n.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return rn(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const i of Object.keys(t)){const n=t[i];if(n.states)for(const s of n.events)e.add(`${s}`)}return Array.from(e)})}get ownEvents(){const t=new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(t)}}const A_="#";class Ca{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:(e==null?void 0:e.actors)??{},actions:(e==null?void 0:e.actions)??{},delays:(e==null?void 0:e.delays)??{},guards:(e==null?void 0:e.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new ur(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:i,actors:n,delays:s}=this.implementations;return new Ca(this.config,{actions:{...e,...t.actions},guards:{...i,...t.guards},actors:{...n,...t.actors},delays:{...s,...t.delays}})}resolveState(t){const e=a_(this.root,t.value),i=hs(ps(this.root,e));return qr({_nodes:[...i],context:t.context||{},children:{},status:ya(i,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,i){return Ks(t,e,i,[]).snapshot}microstep(t,e,i){return Ks(t,e,i,[]).microstates}getTransitionData(t,e){return Aa(this.root,t.value,t,e)||[]}getPreInitialState(t,e,i){const{context:n}=this.config,s=qr({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?Mn(s,e,t,[Ft(({spawn:a,event:l,self:u})=>n({spawn:a,input:l.input,self:u}))],i,void 0):s}getInitialSnapshot(t,e){const i=vc(e),n=[],s=this.getPreInitialState(t,i,n),o=Uo([{target:[...kc(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,t,i,!0,n),{snapshot:a}=Ks(o,i,t,n);return a}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=ma(t),i=e.slice(1),n=ys(e[0])?e[0].slice(A_.length):e[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return yr(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return __(t,e)}restoreSnapshot(t,e){const i={},n=t.children;Object.keys(n).forEach(d=>{const h=n[d],c=h.snapshot,_=h.src,p=typeof _=="string"?Ea(this,_):_;if(!p)return;const g=Tr(p,{id:d,parent:e.self,syncSnapshot:h.syncSnapshot,snapshot:c,src:_,systemId:h.systemId});i[d]=g});function s(d,h){try{return h.machine.getStateNodeById(d)}catch{try{return yr(h,d.split("."))}catch{return d}}}function o(d,h){if(!d||typeof d!="object")return{};const c={};for(const _ in d){const p=d[_];c[_]=p.map(g=>{if(g instanceof ur)return g;if(typeof g=="object"&&"id"in g&&typeof g.id=="string"){const m=s(g.id,h);if(m instanceof ur)return m}}).filter(g=>g!==void 0),c[_].length===0&&delete c[_]}return c}const a=o(t.historyValue,this.root),l=qr({...t,children:i,_nodes:Array.from(hs(ps(this.root,t.value))),historyValue:a},this),u=new Set;function f(d,h){if(!u.has(d)){u.add(d);for(const c in d){const _=d[c];if(_&&typeof _=="object"){if("xstate$$type"in _&&_.xstate$$type===Sa){d[c]=h[_.id];continue}f(_,h)}}}}return f(l.context,i),l}}function P_(r,t){return new Ca(r,t)}async function C_(r){const{gsap:t,appStateService:e,configModule:i}=r;return console.log("[startupP0_idle EXEC] Start"),new Promise(n=>{var l;const s=t.timeline({onComplete:()=>{console.log(`[startupP0_idle EXEC] End. GSAP Duration: ${s.duration().toFixed(3)}`),n()}});e.getAppStatus()!=="starting-up"&&e.setAppStatus("starting-up");const o=((l=r.dependencies)==null?void 0:l.isStepThroughMode)||r.isStepThroughMode;let a=i.MIN_PHASE_DURATION_FOR_STEPPING;o||(a+=.5),s.to({},{duration:a}),s.duration()>0?s.play():(console.log("[startupP0_idle EXEC] End. No GSAP timeline (duration was 0). Resolving immediately."),n())})}const I_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:C_},Symbol.toStringTag,{value:"Module"}));async function v_(r){const{gsap:t,appStateService:e,domElementsRegistry:i,configModule:n,LReductionProxy:s,opacityFactorProxy:o}=r;return console.log(`[startupP1_emergencySubsystems EXEC] Start. Current L-factor: ${s.value.toFixed(3)}, O-factor: ${o.value.toFixed(3)}`),new Promise((a,l)=>{var u;try{const f=t.timeline({onComplete:()=>{console.log(`[startupP1_emergencySubsystems EXEC] End. L-factor: ${s.value.toFixed(3)}, O-factor: ${o.value.toFixed(3)}. GSAP Duration: ${f.duration().toFixed(3)}`),a()}}),d=n.STARTUP_L_REDUCTION_FACTORS.P1,h=1-d,c=n.STARTUP_DIM_FACTORS_ANIMATION_DURATION;let _=!1;Math.abs(s.value-d)>.001&&(f.to(s,{value:d,duration:c,ease:"power1.inOut",onUpdate:()=>{i.root.style.setProperty("--startup-L-reduction-factor",s.value.toFixed(3))}},"start_P1_effects"),_=!0),Math.abs(o.value-h)>.001&&(f.to(o,{value:h,duration:c,ease:"power1.inOut",onUpdate:()=>{i.root.style.setProperty("--startup-opacity-factor",o.value.toFixed(3));const y=parseFloat(i.root.style.getPropertyValue("--startup-opacity-factor-boosted"))||0,D=Math.min(1,o.value*1.25);Math.abs(y-D)>.001&&i.root.style.setProperty("--startup-opacity-factor-boosted",D.toFixed(3))}},"start_P1_effects"),_=!0);const p=((u=r.dependencies)==null?void 0:u.isStepThroughMode)||r.isStepThroughMode;parseFloat(t.getProperty(i.body,"opacity"))<1&&!p?f.to(i.body,{opacity:1,duration:n.BODY_FADE_IN_DURATION,ease:"power1.inOut"},_?"<":"start_P1_effects"):f.getChildren(!0,!0,!0,0).length===0&&!_&&f.to({},{duration:.01},"start_P1_effects");const m="P1_EMERGENCY_SUBSYSTEMS",E=Ie[m]||"";e.emit("requestTerminalMessage",{type:"startup",source:m,messageKey:m});let T=Math.max(n.MIN_PHASE_DURATION_FOR_STEPPING,c,n.BODY_FADE_IN_DURATION);if(E){const y=E.length*n.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;T=Math.max(T,y/1e3+.2)}f.duration()<T&&f.to({},{duration:T-f.duration()}),p||f.to({},{duration:.5}),f.duration()<n.MIN_PHASE_DURATION_FOR_STEPPING&&p?f.to({},{duration:n.MIN_PHASE_DURATION_FOR_STEPPING}):f.duration()<.5&&!p&&f.to({},{duration:.5-f.duration()}),f.play()}catch(f){console.error("[startupP1_emergencySubsystems EXEC] Error:",f),l(f)}})}const L_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:v_},Symbol.toStringTag,{value:"Module"}));async function b_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP2_backupPower EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP2_backupPower EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}}),h=s.STARTUP_L_REDUCTION_FACTORS.P2,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-h)>.001&&d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P2_effects"),Math.abs(a.value-c)>.001&&d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3));const y=parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor-boosted"))||0,D=Math.min(1,a.value*1.25);Math.abs(y-D)>.001&&n.root.style.setProperty("--startup-opacity-factor-boosted",D.toFixed(3))}},"start_P2_effects"),d.getChildren(!0,!0,!0,0).length===0&&d.to({},{duration:.01},"start_P2_effects");const p="P2_BACKUP_POWER",g=Ie[p]||"";if(e.emit("requestTerminalMessage",{type:"startup",source:p,messageKey:p}),n.mainPwrOnButton&&n.mainPwrOffButton&&i.buttonManager){const y=i.buttonManager.playFlickerToState(n.mainPwrOnButton,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:"P2_MainPwrOn_ToDim"});y.timeline&&d.add(y.timeline,"start_P2_effects+=0.05");const D=i.buttonManager.playFlickerToState(n.mainPwrOffButton,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:"P2_MainPwrOff_ToDim"});D.timeline&&d.add(D.timeline,"<+0.05")}else console.warn("[startupP2_backupPower EXEC] Main power buttons or buttonManager not available.");let m=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,_);if(g){const y=g.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;m=Math.max(m,y/1e3+.2)}const E=s.estimateFlickerDuration("buttonFlickerToDimlyLit")+.05;m=Math.max(m,E),d.duration()<m&&d.to({},{duration:m-d.duration()});const T=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;T||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&T?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!T&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP2_backupPower EXEC] Error:",d),u(d)}})}const N_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:b_},Symbol.toStringTag,{value:"Module"}));async function R_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP3_mainPowerOnline EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise(async(l,u)=>{var f;try{const d=t.timeline(),h=[],c=s.STARTUP_L_REDUCTION_FACTORS.P3,_=1-c,p=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-c)>.001&&d.to(o,{value:c,duration:p,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P3_effects"),Math.abs(a.value-_)>.001&&d.to(a,{value:_,duration:p,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3));const y=parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor-boosted"))||0,D=Math.min(1,a.value*1.25);Math.abs(y-D)>.001&&n.root.style.setProperty("--startup-opacity-factor-boosted",D.toFixed(3))}},"start_P3_effects"),d.getChildren(!0,!0,!0,0).length===0&&d.to({},{duration:.01},"start_P3_effects");const g="P3_MAIN_POWER_ONLINE",m=Ie[g]||"";if(e.emit("requestTerminalMessage",{type:"startup",source:g,messageKey:g}),n.mainPwrOnButton&&n.mainPwrOffButton&&i.buttonManager){const y=i.buttonManager.playFlickerToState(n.mainPwrOnButton,B.ENERGIZED_SELECTED,{profileName:"buttonFlickerFromDimlyLitToFullyLitSelectedFast",phaseContext:"P3_MainPwrOn_ToEnergizedSel",isButtonSelectedOverride:!0});h.push(y.completionPromise),y.timeline&&d.add(y.timeline,"start_P3_effects+=0.05");const D=i.buttonManager.playFlickerToState(n.mainPwrOffButton,B.ENERGIZED_UNSELECTED,{profileName:"buttonFlickerFromDimlyLitToFullyLitUnselectedFast",phaseContext:"P3_MainPwrOff_ToEnergizedUnsel",isButtonSelectedOverride:!1});h.push(D.completionPromise),D.timeline&&d.add(D.timeline,"<")}else console.warn("[startupP3_mainPowerOnline EXEC] Main power buttons or buttonManager not available.");let E=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,p);if(m){const y=m.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;E=Math.max(E,y/1e3+.2)}E=Math.max(E,d.duration()),d.duration()<E&&d.to({},{duration:E-d.duration()});const T=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;T||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&T?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!T&&d.to({},{duration:.5-d.duration()}),d.eventCallback("onComplete",()=>{console.log(`[startupP3_mainPowerOnline EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}).play()}catch(d){console.error("[startupP3_mainPowerOnline EXEC] Error:",d),u(d)}})}const O_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:R_},Symbol.toStringTag,{value:"Module"}));async function M_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP4_opticalCoreReactivate EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP4_opticalCoreReactivate EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}}),h=s.STARTUP_L_REDUCTION_FACTORS.P4,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-h)>.001&&d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P4_effects"),Math.abs(a.value-c)>.001&&d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3))}},"start_P4_effects"),d.getChildren(!0,!0,!0,0).length===0&&d.to({},{duration:.01},"start_P4_effects");const p="P4_OPTICAL_CORE_REACTIVATE",g=Ie[p]||"";if(e.emit("requestTerminalMessage",{type:"startup",source:p,messageKey:p}),i.lensManager){const T=i.lensManager.energizeLensCoreStartup(s.LENS_STARTUP_TARGET_POWER,s.LENS_STARTUP_RAMP_DURATION);T?d.add(T,"start_P4_effects+=0.05"):(console.warn("[startupP4_opticalCoreReactivate EXEC] lensManager.energizeLensCoreStartup() returned null timeline."),d.to({},{duration:Math.max(0,s.LENS_STARTUP_RAMP_DURATION/1e3-_)},"start_P4_effects+="+_))}else console.warn("[startupP4_opticalCoreReactivate EXEC] lensManager not available."),d.to({},{duration:Math.max(0,s.LENS_STARTUP_RAMP_DURATION/1e3-_)},"start_P4_effects+="+_);let m=Math.max(s.LENS_STARTUP_RAMP_DURATION/1e3+.05,_);if(g){const T=g.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;m=Math.max(m,T/1e3+.2)}m=Math.max(m,s.MIN_PHASE_DURATION_FOR_STEPPING),d.duration()<m&&d.to({},{duration:m-d.duration()});const E=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;E||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&E?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!E&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP4_opticalCoreReactivate EXEC] Error:",d),u(d)}})}const x_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:M_},Symbol.toStringTag,{value:"Module"}));async function w_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP5_diagnosticInterface EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP5_diagnosticInterface EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}}),h=s.STARTUP_L_REDUCTION_FACTORS.P5,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-h)>.001&&d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P5_effects"),Math.abs(a.value-c)>.001&&d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3))}},"start_P5_effects"),d.getChildren(!0,!0,!0,0).length===0&&d.to({},{duration:.01},"start_P5_effects");const p="P5_DIAGNOSTIC_INTERFACE",g=Ie[p]||"";e.emit("requestTerminalMessage",{type:"startup",source:p,messageKey:p});const m=[n.scanButton1Element,n.scanButton2Element,n.scanButton3Element,n.scanButton4Element].filter(y=>y);m.length>0&&i.buttonManager?(ha(m),m.forEach((y,D)=>{const I=i.buttonManager.getButtonInstance(y);if(I){const{timeline:v}=i.buttonManager.playFlickerToState(y,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:`P5_DiagBtn_${I.getIdentifier()}_ToDim`});v&&d.add(v,`start_P5_effects+=${D*s.STARTUP_BUTTON_GROUP_APPEAR_STAGGER}`)}})):console.warn(`[startupP5_diagnosticInterface EXEC] Diagnostic buttons or buttonManager not available. Buttons found: ${m.length}`);let E=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,_);if(g){const y=g.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;E=Math.max(E,y/1e3+.2)}if(m.length>0){const y=(m.length-1)*s.STARTUP_BUTTON_GROUP_APPEAR_STAGGER,D=s.estimateFlickerDuration("buttonFlickerToDimlyLit");E=Math.max(E,y+D)}d.duration()<E&&d.to({},{duration:E-d.duration()});const T=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;T||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&T?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!T&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP5_diagnosticInterface EXEC] Error:",d),u(d)}})}const F_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:w_},Symbol.toStringTag,{value:"Module"}));async function k_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP6_moodIntensityControls EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP6_moodIntensityControls EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}}),h=s.STARTUP_L_REDUCTION_FACTORS.P6,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-h)>.001&&d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P6_effects"),Math.abs(a.value-c)>.001&&d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3))}},"start_P6_effects"),d.getChildren(!0,!0,!0,0).length===0&&d.to({},{duration:.01},"start_P6_effects");const p="P6_MOOD_INTENSITY_CONTROLS",g=Ie[p]||"";e.emit("requestTerminalMessage",{type:"startup",source:p,messageKey:p});let m=d.duration();if(i.dialManager&&n.dialA&&n.dialB){const I=[n.dialA,n.dialB];d.set(I,{opacity:0},"start_P6_effects"),d.call(()=>{console.log("[startupP6_moodIntensityControls EXEC] Calling dialManager.setDialsActiveState(true) to draw dial content."),i.dialManager.setDialsActiveState(!0)},null,"start_P6_effects+=0.01").to(I,{opacity:1,duration:s.DIAL_CANVAS_FADE_IN_DURATION||.5,ease:"power1.out",stagger:s.STARTUP_LCD_GROUP_APPEAR_STAGGER},"start_P6_effects+=0.05"),m=Math.max(m,.05+(s.DIAL_CANVAS_FADE_IN_DURATION||.5)+s.STARTUP_LCD_GROUP_APPEAR_STAGGER)}const E=[];n.lcdA&&E.push({el:n.lcdA,phaseCtx:"P6_LcdA_ToDim",profile:"lcdScreenFlickerToDimlyLit"}),n.lcdB&&E.push({el:n.lcdB,phaseCtx:"P6_LcdB_ToDim",profile:"lcdScreenFlickerToDimlyLit"}),n.terminalContainer&&E.push({el:n.terminalContainer,phaseCtx:"P6_TerminalScreen_ToDim",profile:"terminalScreenFlickerToDimlyLit"});let T=m;i.uiUpdater&&E.length>0?E.forEach((I,v)=>{const{el:C,phaseCtx:A,profile:x}=I;let R={useFlicker:!0,flickerProfileName:x,phaseContext:A};C===n.terminalContainer?console.log(`[startupP6_moodIntensityControls EXEC] Terminal screen flicker using profile: ${x}. Text should persist.`):console.log(`[startupP6_moodIntensityControls EXEC] Dial LCD ${C.id} to lcd--dimly-lit with flicker using profile: ${x}.`);const k=i.uiUpdater.setLcdState(C,"lcd--dimly-lit",R);if(k&&k.timeline){const N=m*.2+v*s.STARTUP_LCD_GROUP_APPEAR_STAGGER;d.add(k.timeline,`start_P6_effects+=${N}`),T=Math.max(T,N+k.timeline.duration())}}):console.warn("[startupP6_moodIntensityControls EXEC] uiUpdater or LCD elements not available for flicker.");let y=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,_);if(g){const I=g.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;y=Math.max(y,I/1e3+.2)}y=Math.max(y,T),d.duration()<y&&d.to({},{duration:y-d.duration()});const D=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;D||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&D?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!D&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP6_moodIntensityControls EXEC] Error:",d),u(d)}})}const U_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:k_},Symbol.toStringTag,{value:"Module"}));async function B_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return!i||!i.buttonManager?(console.error("[startupP7_hueCorrectionSystems EXEC] CRITICAL: buttonManager is missing from managerInstances."),Promise.reject(new Error("buttonManager not available in P7"))):s?(console.log(`[startupP7_hueCorrectionSystems EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP7_hueCorrectionSystems EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()},onError:C=>{console.error("[startupP7_hueCorrectionSystems EXEC] GSAP Timeline Error:",C),u(C)}}),h=s.STARTUP_L_REDUCTION_FACTORS.P7,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;Math.abs(o.value-h)>.001&&d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P7_effects"),Math.abs(a.value-c)>.001&&d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3))}},"start_P7_effects"),d.getChildren(!0,!0,!0,"start_P7_effects").length===0&&d.to({},{duration:.001},"start_P7_effects");const p="P7_HUE_CORRECTION_SYSTEMS",g=Ie[p]||"";d.call(()=>{e.emit("requestTerminalMessage",{type:"startup",source:p,messageKey:p})},null,"start_P7_effects+=0.01");let m=0;const E=s.estimateFlickerDuration("buttonFlickerToDimlyLit"),T=[],y=i.buttonManager,D=["env","lcd","logo","btn"];if(y._buttons.forEach((C,A)=>{D.includes(C.getGroupId())&&T.push(A)}),T.length>0){ha(T);const C=s.STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER;T.forEach((A,x)=>{const R=y.getButtonInstance(A);if(R){const{timeline:k,completionPromise:N}=y.playFlickerToState(A,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:`P7_HueBtn_${R.getIdentifier()}_ToDim`,gsapInstance:t});if(k){const K=x*C;d.add(k,`start_P7_effects+=${K}`)}}}),T.length>0&&(m=(T.length-1)*C+E)}else console.warn("[startupP7_hueCorrectionSystems EXEC] No Hue Assignment buttons found.");let I=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,_);if(g){const C=g.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;I=Math.max(I,C/1e3+.2)}I=Math.max(I,m),d.duration()<I&&d.to({},{duration:I-d.duration()});const v=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;v||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&v?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!v&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP7_hueCorrectionSystems EXEC] Outer Catch Error:",d),u(d)}})):(console.error("[startupP7_hueCorrectionSystems EXEC] CRITICAL: configModule is missing."),Promise.reject(new Error("configModule not available in P7")))}const $_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:B_},Symbol.toStringTag,{value:"Module"}));async function G_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s,LReductionProxy:o,opacityFactorProxy:a}=r;return console.log(`[startupP8_externalLightingControls EXEC] Start. Current L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}`),new Promise((l,u)=>{var f;try{const d=t.timeline({onComplete:()=>{console.log(`[startupP8_externalLightingControls EXEC] End. L-factor: ${o.value.toFixed(3)}, O-factor: ${a.value.toFixed(3)}. GSAP Duration: ${d.duration().toFixed(3)}`),l()}}),h=s.STARTUP_L_REDUCTION_FACTORS.P8,c=1-h,_=s.STARTUP_DIM_FACTORS_ANIMATION_DURATION;let p=0;Math.abs(o.value-h)>.001&&(d.to(o,{value:h,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-L-reduction-factor",o.value.toFixed(3))}},"start_P8_effects"),p=_),Math.abs(a.value-c)>.001&&(d.to(a,{value:c,duration:_,ease:"power1.inOut",onUpdate:()=>{n.root.style.setProperty("--startup-opacity-factor",a.value.toFixed(3));const I=parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor-boosted"))||0,v=Math.min(1,a.value*1.25);Math.abs(I-v)>.001&&n.root.style.setProperty("--startup-opacity-factor-boosted",v.toFixed(3))}},"start_P8_effects"),p=Math.max(p,_)),d.getChildren(!0,!0,!0,0).length===0&&(d.to({},{duration:.01},"start_P8_effects"),p=.01);const g="P8_EXTERNAL_LIGHTING_CONTROLS",m=Ie[g]||"";e.emit("requestTerminalMessage",{type:"startup",source:g,messageKey:g});let E=p>0?p*.1:.05;if(i.buttonManager&&n.auxLightLowButton&&n.auxLightHighButton){const I=i.buttonManager.playFlickerToState(n.auxLightLowButton,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:"P8_AuxLow_ToDim"});I.timeline&&d.add(I.timeline,E);const v=i.buttonManager.playFlickerToState(n.auxLightHighButton,B.DIMLY_LIT,{profileName:"buttonFlickerToDimlyLit",phaseContext:"P8_AuxHigh_ToDim"});v.timeline&&d.add(v.timeline,E+.03)}else console.warn("[startupP8_externalLightingControls EXEC] AUX Light buttons or buttonManager not available for DIMLY_LIT flicker.");let T=Math.max(s.MIN_PHASE_DURATION_FOR_STEPPING,_);if(m){const I=m.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;T=Math.max(T,I/1e3+.2)}const y=s.estimateFlickerDuration("buttonFlickerToDimlyLit")+.03;T=Math.max(T,E+y),d.duration()<T&&d.to({},{duration:T-d.duration()});const D=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;D||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&D?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!D&&d.to({},{duration:.5-d.duration()}),d.play()}catch(d){console.error("[startupP8_externalLightingControls EXEC] Error:",d),u(d)}})}const H_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:G_},Symbol.toStringTag,{value:"Module"}));async function Y_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s}=r;return console.log("[startupP9_auxLightingLow EXEC] Start"),new Promise((o,a)=>{var l;try{const u=t.timeline({onComplete:()=>{console.log(`[startupP9_auxLightingLow EXEC] End. GSAP Duration: ${u.duration().toFixed(3)}`),o()}});parseFloat(n.root.style.getPropertyValue("--startup-L-reduction-factor"))!==0&&u.set(n.root,{"--startup-L-reduction-factor":"0.000"},0),parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor"))!==1&&u.set(n.root,{"--startup-opacity-factor":"1.000"},0),parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor-boosted"))!==1&&u.set(n.root,{"--startup-opacity-factor-boosted":"1.000"},0);const f="P9_AUX_LIGHTING_LOW",d=Ie[f]||"";e.emit("requestTerminalMessage",{type:"startup",source:f,messageKey:f});let h=0,c=u.duration()>0?u.duration()+.05:.05;if(i.buttonManager&&n.auxLightLowButton&&n.auxLightHighButton){const g=i.buttonManager.getButtonInstance(n.auxLightLowButton),m=i.buttonManager.getButtonInstance(n.auxLightHighButton);if(g){const E=i.buttonManager.playFlickerToState(n.auxLightLowButton,B.ENERGIZED_SELECTED,{profileName:"buttonFlickerFromDimlyLitToFullyLitSelected",phaseContext:"P9_AuxLow_FlickerToEnergizedSel",isButtonSelectedOverride:!0});E.timeline&&(u.add(E.timeline,c),h=Math.max(h,E.timeline.duration()))}if(m){const E=i.buttonManager.playFlickerToState(n.auxLightHighButton,B.ENERGIZED_UNSELECTED,{profileName:"buttonFlickerFromDimlyLitToFullyLitUnselected",phaseContext:"P9_AuxHigh_FlickerToEnergizedUnsel",isButtonSelectedOverride:!1});E.timeline&&(u.add(E.timeline,c),h=Math.max(h,E.timeline.duration()))}}else console.warn("[startupP9_auxLightingLow EXEC] AUX Light buttons or buttonManager not available.");let _=s.MIN_PHASE_DURATION_FOR_STEPPING;if(d){const g=d.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;_=Math.max(_,g/1e3+.2)}_=Math.max(_,u.duration()),u.duration()<_&&u.to({},{duration:_-u.duration()});const p=((l=r.dependencies)==null?void 0:l.isStepThroughMode)||r.isStepThroughMode;p||u.to({},{duration:.5}),u.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&p?u.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):u.duration()<.5&&!p&&u.to({},{duration:.5-u.duration()}),u.play()}catch(u){console.error("[startupP9_auxLightingLow EXEC] Error:",u),a(u)}})}const V_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:Y_},Symbol.toStringTag,{value:"Module"}));async function z_(r){var a;const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s}=r,o=((a=i.uiUpdater)==null?void 0:a.debugLcd)??!0;return o&&console.log(`[startupP10_themeTransition EXEC] Start. DebugLCD: ${o}`),new Promise((l,u)=>{var f;try{const d=t.timeline();parseFloat(n.root.style.getPropertyValue("--startup-L-reduction-factor"))!==0&&d.set(n.root,{"--startup-L-reduction-factor":"0.000"},0),parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor"))!==1&&d.set(n.root,{"--startup-opacity-factor":"1.000"},0),parseFloat(n.root.style.getPropertyValue("--startup-opacity-factor-boosted"))!==1&&d.set(n.root,{"--startup-opacity-factor-boosted":"1.000"},0),d.call(()=>{o&&console.log("[startupP10_themeTransition EXEC] Preparing UI for theme transition to dark."),i.uiUpdater&&i.uiUpdater.prepareLogoForFullTheme(),n.elementsAnimatedOnDimExit=[],s.selectorsForDimExitAnimation&&Array.isArray(s.selectorsForDimExitAnimation)&&s.selectorsForDimExitAnimation.forEach(m=>{document.querySelectorAll(m).forEach(E=>{E.id!=="terminal-lcd-content"?(E.classList.add("animate-on-dim-exit"),n.elementsAnimatedOnDimExit.push(E)):E.closest(".actual-lcd-screen-element.animate-on-dim-exit")||(E.classList.add("animate-on-dim-exit"),n.elementsAnimatedOnDimExit.push(E))})}),n.body.classList.add("is-transitioning-from-dim"),i.uiUpdater&&(n.lcdA&&i.uiUpdater.setLcdState(n.lcdA,"active",{skipClassChange:!1,phaseContext:"P10_LcdA_ToActive_PreTheme"}),n.lcdB&&i.uiUpdater.setLcdState(n.lcdB,"active",{skipClassChange:!1,phaseContext:"P10_LcdB_ToActive_PreTheme"}),n.terminalContainer&&(o&&console.log("[startupP10_themeTransition EXEC] Setting terminalContainer to 'active' state PRE-THEME CHANGE."),i.uiUpdater.setLcdState(n.terminalContainer,"active",{skipClassChange:!1,phaseContext:"P10_Terminal_ToActive_PreTheme"})))}).call(()=>{o&&console.log("[startupP10_themeTransition EXEC] Setting theme to dark in appState."),e.setTheme("dark")},null,">0.02").call(()=>{i.uiUpdater&&typeof i.uiUpdater.applyInitialLcdStates=="function"?(o&&console.log("[startupP10_themeTransition EXEC] Explicitly calling uiUpdater.applyInitialLcdStates() POST theme set."),i.uiUpdater.applyInitialLcdStates()):console.warn("[startupP10_themeTransition EXEC] uiUpdater or applyInitialLcdStates not available for explicit call.")},null,`>${(s.THEME_TRANSITION_DURATION||1)*.1}`);let h=0,c=(s.THEME_TRANSITION_DURATION||1)*.05;if(i.buttonManager){o&&console.log("[startupP10_themeTransition EXEC] Energizing HUE_ASSN, SCAN & FIT_EVAL buttons from DIMLY_LIT.");const m=["env","lcd","logo","btn","skill-scan-group","fit-eval-group"],{masterTimeline:E}=i.buttonManager.flickerDimlyLitToEnergizedStartup({profileNameUnselected:"buttonFlickerFromDimlyLitToFullyLitUnselected",profileNameSelected:"buttonFlickerFromDimlyLitToFullyLitSelected",stagger:s.STARTUP_BUTTON_ENERGIZE_STAGGER,phaseContext:"P10_DimToEnergized",specificGroups:m});E&&(d.add(E,c),h=E.duration())}const _=s.THEME_TRANSITION_DURATION||1,p=Math.max(_,c+h);d.duration()<p&&d.to({},{duration:p-d.duration()});const g=((f=r.dependencies)==null?void 0:f.isStepThroughMode)||r.isStepThroughMode;g||d.to({},{duration:.5}),d.duration()<s.MIN_PHASE_DURATION_FOR_STEPPING&&g?d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}):d.duration()<.5&&!g&&d.to({},{duration:.5-d.duration()}),d.eventCallback("onComplete",()=>{o&&console.log(`[startupP10_themeTransition EXEC] Main GSAP timeline part complete. Duration: ${d.duration().toFixed(3)}`),l()}),d.duration()===0&&d.to({},{duration:s.MIN_PHASE_DURATION_FOR_STEPPING}),d.play()}catch(d){console.error("[startupP10_themeTransition EXEC] Outer error:",d),u(d)}})}const X_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:z_},Symbol.toStringTag,{value:"Module"}));async function W_(r){const{gsap:t,appStateService:e,managerInstances:i,domElementsRegistry:n,configModule:s}=r;return console.log("[startupP11_systemOperational EXEC] Start"),new Promise(async(o,a)=>{try{const l=t.timeline(),u="P11_SYSTEM_OPERATIONAL",f=Ie[u]||"";e.emit("requestTerminalMessage",{type:"startup",source:u,messageKey:u}),l.call(()=>{console.log("[startupP11_systemOperational EXEC] Setting default button group selections."),i.buttonManager&&(n.mainPwrOnButton&&i.buttonManager.setGroupSelected("system-power",n.mainPwrOnButton),n.auxLightLowButton&&i.buttonManager.setGroupSelected("light",n.auxLightLowButton),Object.keys(s.DEFAULT_ASSIGNMENT_SELECTIONS).forEach(h=>{i.buttonManager.setGroupSelected(h,s.DEFAULT_ASSIGNMENT_SELECTIONS[h].toString())}))},null,.01),l.call(()=>{console.log("[startupP11_systemOperational EXEC] Setting app status to interactive."),e.setAppStatus("interactive")},null,">0.02"),l.call(()=>{i.dialManager&&i.dialManager.resizeAllCanvases(!0)},null,">0.01");let d=s.SYSTEM_READY_PHASE_DURATION||.1;if(f){const h=f.length*s.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;d=Math.max(d,h/1e3+.2)}d=Math.max(d,s.MIN_PHASE_DURATION_FOR_STEPPING),l.duration()<d&&l.to({},{duration:d-l.duration()}),l.duration()===0&&d>0&&l.to({},{duration:d}),l.eventCallback("onComplete",()=>{console.log(`[startupP11_systemOperational EXEC] End. GSAP Duration: ${l.duration().toFixed(3)}`),o()}).play()}catch(l){console.error("[startupP11_systemOperational EXEC] Error:",l),a(l)}})}const j_=Object.freeze(Object.defineProperty({__proto__:null,createPhaseTimeline:W_},Symbol.toStringTag,{value:"Module"})),le=r=>S_(async({input:t})=>{if(!r||typeof r.createPhaseTimeline!="function")throw console.error("Error: createPhaseTimeline not found in phase module."),new Error("Failed to load phase module.");return r.createPhaseTimeline(t.dependencies)}),q_=P_({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{dependencies:null,isStepThroughMode:!0,currentPhaseNameForResume:"",errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_SEQUENCE.PHASE_0_IDLE",actions:[Ft({isStepThroughMode:({event:r})=>r.isStepThroughMode,dependencies:({event:r})=>r.dependencies,themeTransitionCleanupPerformed:!1,errorInfo:null}),"logStartSequence"]}}},RUNNING_SEQUENCE:{initial:"PHASE_0_IDLE",states:{PHASE_0_IDLE:{entry:["setPhaseNumberActionP0","notifyPhaseChangeAction"],invoke:{id:"phaseP0Service",src:le(I_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_1_EMERGENCY_SUBSYSTEMS"})},{target:"PHASE_1_EMERGENCY_SUBSYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_1_EMERGENCY_SUBSYSTEMS:{entry:["setPhaseNumberActionP1","notifyPhaseChangeAction"],invoke:{id:"phaseP1Service",src:le(L_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_2_BACKUP_POWER"})},{target:"PHASE_2_BACKUP_POWER"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_2_BACKUP_POWER:{entry:["setPhaseNumberActionP2","notifyPhaseChangeAction"],invoke:{id:"phaseP2Service",src:le(N_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_3_MAIN_POWER_ONLINE"})},{target:"PHASE_3_MAIN_POWER_ONLINE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_3_MAIN_POWER_ONLINE:{entry:["setPhaseNumberActionP3","notifyPhaseChangeAction"],invoke:{id:"phaseP3Service",src:le(O_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_4_OPTICAL_CORE_REACTIVATE"})},{target:"PHASE_4_OPTICAL_CORE_REACTIVATE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_4_OPTICAL_CORE_REACTIVATE:{entry:["setPhaseNumberActionP4","notifyPhaseChangeAction"],invoke:{id:"phaseP4Service",src:le(x_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_5_DIAGNOSTIC_INTERFACE"})},{target:"PHASE_5_DIAGNOSTIC_INTERFACE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_5_DIAGNOSTIC_INTERFACE:{entry:["setPhaseNumberActionP5","notifyPhaseChangeAction"],invoke:{id:"phaseP5Service",src:le(F_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_6_MOOD_INTENSITY_CONTROLS"})},{target:"PHASE_6_MOOD_INTENSITY_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_6_MOOD_INTENSITY_CONTROLS:{entry:["setPhaseNumberActionP6","notifyPhaseChangeAction"],invoke:{id:"phaseP6Service",src:le(U_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_7_HUE_CORRECTION_SYSTEMS"})},{target:"PHASE_7_HUE_CORRECTION_SYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_7_HUE_CORRECTION_SYSTEMS:{entry:["setPhaseNumberActionP7","notifyPhaseChangeAction"],invoke:{id:"phaseP7Service",src:le($_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"})},{target:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_8_EXTERNAL_LIGHTING_CONTROLS:{entry:["setPhaseNumberActionP8","notifyPhaseChangeAction"],invoke:{id:"phaseP8Service",src:le(H_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_9_AUX_LIGHTING_LOW"})},{target:"PHASE_9_AUX_LIGHTING_LOW"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_9_AUX_LIGHTING_LOW:{entry:["setPhaseNumberActionP9","notifyPhaseChangeAction"],invoke:{id:"phaseP9Service",src:le(V_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_10_THEME_TRANSITION"})},{target:"PHASE_10_THEME_TRANSITION"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_10_THEME_TRANSITION:{entry:["setPhaseNumberActionP10","notifyPhaseChangeAction"],invoke:{id:"phaseP10Service",src:le(X_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"PHASE_11_SYSTEM_OPERATIONAL"})},{target:"PHASE_11_SYSTEM_OPERATIONAL"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_11_SYSTEM_OPERATIONAL:{entry:["setPhaseNumberActionP11","performThemeTransitionCleanupIfNeeded","notifyPhaseChangeAction"],invoke:{id:"phaseP11Service",src:le(j_),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Ft({currentPhaseNameForResume:"SYSTEM_READY_TARGET"})},{target:"#hue9000Startup.SYSTEM_READY"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:["markThemeTransitionCleanupPerformed","notifyPhaseChangeAction"]}}},PAUSED_AWAITING_NEXT_STEP:{entry:["enableNextStepButtonAction","notifyPhaseChangeAction"],on:{NEXT_STEP_REQUESTED:[{target:"SYSTEM_READY",guard:({context:r})=>r.currentPhaseNameForResume==="SYSTEM_READY_TARGET",actions:"disableNextStepButtonAction"},...[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>({target:`RUNNING_SEQUENCE.PHASE_${r}_${r===0?"IDLE":r===1?"EMERGENCY_SUBSYSTEMS":r===2?"BACKUP_POWER":r===3?"MAIN_POWER_ONLINE":r===4?"OPTICAL_CORE_REACTIVATE":r===5?"DIAGNOSTIC_INTERFACE":r===6?"MOOD_INTENSITY_CONTROLS":r===7?"HUE_CORRECTION_SYSTEMS":r===8?"EXTERNAL_LIGHTING_CONTROLS":r===9?"AUX_LIGHTING_LOW":r===10?"THEME_TRANSITION":"SYSTEM_OPERATIONAL"}`,guard:({context:t})=>t.currentPhaseNameForResume===`PHASE_${r}_${r===0?"IDLE":r===1?"EMERGENCY_SUBSYSTEMS":r===2?"BACKUP_POWER":r===3?"MAIN_POWER_ONLINE":r===4?"OPTICAL_CORE_REACTIVATE":r===5?"DIAGNOSTIC_INTERFACE":r===6?"MOOD_INTENSITY_CONTROLS":r===7?"HUE_CORRECTION_SYSTEMS":r===8?"EXTERNAL_LIGHTING_CONTROLS":r===9?"AUX_LIGHTING_LOW":r===10?"THEME_TRANSITION":"SYSTEM_OPERATIONAL"}`,actions:"disableNextStepButtonAction"}))]}},SYSTEM_READY:{type:"final",entry:["setPhaseNumberActionReady","setAppStatusInteractive","notifySystemReadyToDebugManager","enableNextStepButtonAction"]},ERROR_STATE:{entry:["setPhaseNumberActionError","logError","setAppStatusError","displayErrorInTerminal","enableNextStepButtonAction","notifyPhaseChangeAction"]}}},{actions:{logStartSequence:({context:r,event:t})=>{console.log("[FSM Action] Startup sequence initiated. Step-through:",r.isStepThroughMode)},assignError:Ft({errorInfo:({event:r})=>r.data||new Error("Unknown error from invoked service")}),logError:({context:r})=>{console.error("[FSM Error]",r.errorInfo),r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.emit("startup:error",r.errorInfo)},setAppStatusInteractive:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("interactive")},setAppStatusError:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("error")},displayErrorInTerminal:({context:r})=>{if(r.dependencies&&r.dependencies.appStateService){const t=r.errorInfo instanceof Error?r.errorInfo.message:String(r.errorInfo);r.dependencies.appStateService.emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",content:[`CRITICAL SYSTEM ERROR: ${t}`]})}},setPhaseNumberActionP0:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(0)},setPhaseNumberActionP1:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(1)},setPhaseNumberActionP2:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(2)},setPhaseNumberActionP3:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(3)},setPhaseNumberActionP4:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(4)},setPhaseNumberActionP5:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(5)},setPhaseNumberActionP6:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(6)},setPhaseNumberActionP7:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(7)},setPhaseNumberActionP8:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(8)},setPhaseNumberActionP9:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(9)},setPhaseNumberActionP10:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(10)},setPhaseNumberActionP11:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(11)},setPhaseNumberActionReady:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(99)},setPhaseNumberActionError:({context:r})=>{var t,e;return(e=(t=r.dependencies)==null?void 0:t.appStateService)==null?void 0:e.setCurrentStartupPhaseNumber(-2)},notifyPhaseChangeAction:({context:r,event:t,_event:e})=>{},enableNextStepButtonAction:({context:r})=>{var t,e,i;(i=(e=(t=r.dependencies)==null?void 0:t.managerInstances)==null?void 0:e.debugManager)==null||i.setNextPhaseButtonEnabled(!0)},disableNextStepButtonAction:({context:r})=>{var t,e,i;(i=(e=(t=r.dependencies)==null?void 0:t.managerInstances)==null?void 0:e.debugManager)==null||i.setNextPhaseButtonEnabled(!1)},performThemeTransitionCleanupIfNeeded:({context:r})=>{var t;(t=r.dependencies)!=null&&t.performThemeTransitionCleanup&&!r.themeTransitionCleanupPerformed&&r.dependencies.performThemeTransitionCleanup()},markThemeTransitionCleanupPerformed:Ft({themeTransitionCleanupPerformed:!0})},guards:{isStepThrough:({context:r})=>r.isStepThroughMode}});let _n=null,Te=null,nt={},lt={},ze=null,he=null,Bo=null,Xe={value:.85},oi={value:.15};const Vi={IDLE:"Idle","RUNNING_SEQUENCE.PHASE_0_IDLE":"startupPhaseP0_idle","RUNNING_SEQUENCE.PHASE_1_EMERGENCY_SUBSYSTEMS":"startupPhaseP1_emergency","RUNNING_SEQUENCE.PHASE_2_BACKUP_POWER":"startupPhaseP2_backupPower","RUNNING_SEQUENCE.PHASE_3_MAIN_POWER_ONLINE":"startupPhaseP3_mainPowerOnline","RUNNING_SEQUENCE.PHASE_4_OPTICAL_CORE_REACTIVATE":"startupPhaseP4_opticalCoreReactivate","RUNNING_SEQUENCE.PHASE_5_DIAGNOSTIC_INTERFACE":"startupPhaseP5_diagnosticInterface","RUNNING_SEQUENCE.PHASE_6_MOOD_INTENSITY_CONTROLS":"startupPhaseP6_moodIntensityControls","RUNNING_SEQUENCE.PHASE_7_HUE_CORRECTION_SYSTEMS":"startupPhaseP7_hueCorrectionSystems","RUNNING_SEQUENCE.PHASE_8_EXTERNAL_LIGHTING_CONTROLS":"startupPhaseP8_externalLightingControls","RUNNING_SEQUENCE.PHASE_9_AUX_LIGHTING_LOW":"startupPhaseP9_auxLightingLow","RUNNING_SEQUENCE.PHASE_10_THEME_TRANSITION":"startupPhaseP10_themeTransition","RUNNING_SEQUENCE.PHASE_11_SYSTEM_OPERATIONAL":"startupPhaseP11_systemOperational",PAUSED_AWAITING_NEXT_STEP:"PAUSED",SYSTEM_READY:"sequence_complete",ERROR_STATE:"ERROR"},Me={Idle:"System Idle, awaiting startup.",startupPhaseP0_idle:"Phase 0: System Idle / Baseline Setup",startupPhaseP1_emergency:"Phase 1: Initializing Emergency Subsystems",startupPhaseP2_backupPower:"Phase 2: Activating Backup Power Systems",startupPhaseP3_mainPowerOnline:"Phase 3: Main Power Online",startupPhaseP4_opticalCoreReactivate:"Phase 4: Reactivating Optical Core",startupPhaseP5_diagnosticInterface:"Phase 5: Initializing Diagnostic Control Interface",startupPhaseP6_moodIntensityControls:"Phase 6: Initializing Mood and Intensity Controls",startupPhaseP7_hueCorrectionSystems:"Phase 7: Initializing Hue Correction Systems",startupPhaseP8_externalLightingControls:"Phase 8: Initializing External Lighting Controls",startupPhaseP9_auxLightingLow:"Phase 9: Activating Auxiliary Lighting: Low Intensity",startupPhaseP10_themeTransition:"Phase 10: Engaging Ambient Theme",startupPhaseP11_systemOperational:"Phase 11: HUE 9000 Operational",PAUSED:"Paused, awaiting next step.",sequence_complete:"All Startup Phases Done",ERROR:"Startup Error Occurred"},We=["PHASE_0_IDLE","PHASE_1_EMERGENCY_SUBSYSTEMS","PHASE_2_BACKUP_POWER","PHASE_3_MAIN_POWER_ONLINE","PHASE_4_OPTICAL_CORE_REACTIVATE","PHASE_5_DIAGNOSTIC_INTERFACE","PHASE_6_MOOD_INTENSITY_CONTROLS","PHASE_7_HUE_CORRECTION_SYSTEMS","PHASE_8_EXTERNAL_LIGHTING_CONTROLS","PHASE_9_AUX_LIGHTING_LOW","PHASE_10_THEME_TRANSITION","PHASE_11_SYSTEM_OPERATIONAL"];function K_(r){if(!r||typeof r!="string")return-1;const t=r.match(/PHASE_(\d+)_/i);return t&&t[1]?parseInt(t[1],10):r==="IDLE"?-1:r==="SYSTEM_READY"||r==="sequence_complete"?99:-1}function Yc(r){if(typeof r=="string")return Vi[r]||r;if(typeof r=="object"){const t=Object.keys(r)[0],e=r[t];return Vi[`${t}.${e}`]||`${t}.${e}`}return"UnknownState"}function Q_(r){if(!Te||!r)return;const t=Yc(r.value),e=K_(typeof r.value=="string"?r.value:Object.values(r.value)[0]);Te.setCurrentStartupPhaseNumber(e);let i="unknown";r.matches("IDLE")?i="ready":r.matches("PAUSED_AWAITING_NEXT_STEP")?i="paused":r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")||r.event&&(r.event.type.startsWith("done.invoke")||r.event.type.startsWith("error.platform"))?i="completed":r.changed&&(i="starting");let n="N/A",s="N/A";if(r.matches("PAUSED_AWAITING_NEXT_STEP")){const a=r.context.currentPhaseNameForResume;if(a==="SYSTEM_READY_TARGET")n="sequence_complete";else{const l=`RUNNING_SEQUENCE.${a}`;n=Vi[l]||a}s=Me[n]||n}else if(!r.done&&!r.matches("ERROR_STATE")){const a=typeof r.value=="string"?r.value.split(".").pop():Object.values(r.value)[0],l=We.indexOf(a);if(l!==-1&&l<We.length-1){const u=We[l+1],f=`RUNNING_SEQUENCE.${u}`;n=Vi[f]||u,s=Me[n]||n}else l===We.length-1&&(n="sequence_complete",s=Me[n])}const o={currentPhaseName:t,status:i,description:Me[t]||t,nextPhaseName:n,nextPhaseDescription:s,fsmStateValue:r.value,fsmContext:r.context};Te.emit("startup:phaseChanged",o),nt.debugManager&&(r.matches("PAUSED_AWAITING_NEXT_STEP")||r.matches("IDLE")||r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")?nt.debugManager.setNextPhaseButtonEnabled(!0):nt.debugManager.setNextPhaseButtonEnabled(!1))}function Vc(r){_n=r.gsap,Te=r.appState,nt=r.managers,lt=r.domElements,ze=r.configModule,lt.elementsAnimatedOnDimExit||(lt.elementsAnimatedOnDimExit=[]),ze||console.error("[StartupSequenceManager INIT] CRITICAL: configModule not provided!"),ze&&ze.STARTUP_L_REDUCTION_FACTORS?(Xe.value=ze.STARTUP_L_REDUCTION_FACTORS.P0,oi.value=1-Xe.value):(console.warn("[StartupSequenceManager INIT] STARTUP_L_REDUCTION_FACTORS not found in config. Using default proxy values: L=0.85, O=0.15."),Xe.value=.85,oi.value=.15)}function Z_(){lt.elementsAnimatedOnDimExit&&lt.elementsAnimatedOnDimExit.length>0&&(lt.elementsAnimatedOnDimExit.forEach(r=>{r.classList.remove("animate-on-dim-exit")}),lt.elementsAnimatedOnDimExit=[]),lt.body.classList.remove("is-transitioning-from-dim"),nt.uiUpdater&&nt.uiUpdater.finalizeThemeTransition(),console.log("[SSM _performThemeTransitionCleanupLocal] Theme transition classes removed.")}function J_(r=!1){var i;console.log("[SSM resetVisualsAndState] Resetting visuals and state for P0 (Idle)."),he&&(he.stop(),he=null),Bo=null,lt.body.classList.contains("pre-boot")&&(lt.body.classList.remove("pre-boot"),console.log("[SSM resetVisualsAndState] 'pre-boot' class removed from body.")),_n.killTweensOf([lt.body,Xe,oi]),Xe.value=ze.STARTUP_L_REDUCTION_FACTORS.P0,oi.value=1-Xe.value,lt.root.style.setProperty("--startup-L-reduction-factor",Xe.value.toFixed(3)),lt.root.style.setProperty("--startup-opacity-factor",oi.value.toFixed(3));const t=Math.min(1,oi.value*1.25);lt.root.style.setProperty("--startup-opacity-factor-boosted",t.toFixed(3)),console.log(`[SSM resetVisualsAndState] Initial CSS vars set: L-factor: ${Xe.value.toFixed(3)}, O-factor: ${oi.value.toFixed(3)}, O-boosted: ${t.toFixed(3)}`);const e=(i=lt.logoContainer)==null?void 0:i.querySelector("svg.logo-svg");e&&_n.killTweensOf(e),Te.setAppStatus("starting-up"),Te.setCurrentStartupPhaseNumber(-1),Te.setTheme("dim"),nt.buttonManager&&nt.buttonManager.setInitialDimStates(),Te.setTrueLensPower(0),nt.lensManager&&nt.lensManager.directUpdateLensVisuals(0),lt.logoContainer&&nt.uiUpdater&&nt.uiUpdater.injectLogoSVG(),Te.updateDialState("A",{hue:ze.DEFAULT_DIAL_A_HUE,targetHue:ze.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),Te.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),nt.uiUpdater&&(nt.uiUpdater.setLcdState(lt.lcdA,"lcd--unlit",{skipClassChange:!1}),nt.uiUpdater.setLcdState(lt.lcdB,"lcd--unlit",{skipClassChange:!1}),lt.terminalContainer&&nt.uiUpdater.setLcdState(lt.terminalContainer,"lcd--unlit",{skipClassChange:!1})),lt.terminalContent&&(lt.terminalContent.innerHTML="",_n.set(lt.terminalContent,{opacity:1,visibility:"visible"}),nt.terminalManager&&(nt.terminalManager._initialMessageFlickered=!1,nt.terminalManager._messageQueue=[],nt.terminalManager._isTyping=!1,nt.terminalManager._cursorElement&&nt.terminalManager._cursorElement.parentNode&&nt.terminalManager._cursorElement.parentNode.removeChild(nt.terminalManager._cursorElement))),_n.set(lt.body,{opacity:r?1:0}),console.log("[SSM resetVisualsAndState] P0 Idle state setup complete.")}function Ia(r=!0){J_(r);const t={dependencies:{gsap:_n,appStateService:Te,managerInstances:nt,domElementsRegistry:lt,configModule:ze,LReductionProxy:Xe,opacityFactorProxy:oi,performThemeTransitionCleanup:Z_}};he=xp(q_),he.subscribe(e=>{const i=JSON.stringify(e.value);(e.changed||i!==Bo||e.matches("ERROR_STATE")||e.matches("SYSTEM_READY"))&&(Q_(e),Bo=i)}),he.start(),he.send({type:"START_SEQUENCE",isStepThroughMode:r,dependencies:t.dependencies})}function tg(){if(he){const r=he.getSnapshot();!r.done&&!r.matches("ERROR_STATE")?he.send({type:"NEXT_STEP_REQUESTED"}):(console.log("[SSM playNextPhase] Sequence already complete or in error state. Reset to run again."),nt.debugManager&&nt.debugManager.setNextPhaseButtonEnabled(!0))}}function eg(){Ia(!0)}function ig(){if(he){const i=he.getSnapshot(),n=Yc(i.value);let s="N/A",o="N/A";if(i.matches("PAUSED_AWAITING_NEXT_STEP")){const a=i.context.currentPhaseNameForResume;if(a==="SYSTEM_READY_TARGET")s="sequence_complete";else{const l=`RUNNING_SEQUENCE.${a}`;s=Vi[l]||a}o=Me[s]||s}else if(!i.done&&!i.matches("ERROR_STATE")){const a=typeof i.value=="string"?i.value.split(".").pop():Object.values(i.value)[0],l=We.indexOf(a);if(l!==-1&&l<We.length-1){const u=We[l+1],f=`RUNNING_SEQUENCE.${u}`;s=Vi[f]||u,o=Me[s]||s}else l===We.length-1&&(s="sequence_complete",o=Me[s])}return{currentPhaseName:n,status:i.matches("PAUSED_AWAITING_NEXT_STEP")?"paused":i.done?"completed":"starting",description:Me[n]||n,nextPhaseName:s,nextPhaseDescription:o}}const r=We[0],t=`RUNNING_SEQUENCE.${r}`,e=Vi[t]||r;return{currentPhaseName:"Idle",status:"ready",description:Me.Idle,nextPhaseName:e,nextPhaseDescription:Me[e]||e}}const ng=Object.freeze(Object.defineProperty({__proto__:null,getCurrentPhaseInfo:ig,init:Vc,playNextPhase:tg,resetSequence:eg,start:Ia},Symbol.toStringTag,{value:"Module"})),U={root:document.documentElement,body:document.body,logoContainer:null,lcdA:null,lcdB:null,terminalLcdContentElement:null,terminalContainer:null};let Ar=null,Pt=null;const zn=["lcd--unlit","js-active-dim-lcd","lcd--dimly-lit"];function zc(r,t,e){console.log("[UIUpdater INIT] Initializing..."),Object.assign(U,r),Ar=t,Pt=e,Pt||console.error("[UIUpdater INIT] CRITICAL: GSAP instance not provided."),Ar||console.error("[UIUpdater INIT] CRITICAL: configModule not provided.");const i=["logoContainer","lcdA","lcdB","terminalLcdContentElement","terminalContainer"];for(const n of i)U[n]||console.warn(`[UIUpdater INIT] Warning: Optional element reference "${n}" was not provided.`);try{qt("themeChanged",cg),qt("dialUpdated",lg),qt("dialUpdated",pg),qt("targetColorChanged",ug),qt("trueLensPowerChanged",dg),qt("appStatusChanged",fg),qt("startupPhaseNumberChanged",hg)}catch(n){console.error("[UIUpdater INIT] Error subscribing to appState events.",n);return}Wc(),va(),Rr(),console.log("[UIUpdater INIT] Initialization complete.")}function cr(r,t,e={}){const{skipClassChange:i=!1,useFlicker:n=!1,flickerProfileName:s="lcdScreenFlickerToDimlyLit",onComplete:o,phaseContext:a="UnknownPhase"}=e,l=r?r.id||r.classList[0]||"UnknownLCDContainer":"NullElement";if(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Called. Target State: '${t}', Flicker: ${n}, Profile: '${s}'. Current classes: '${r==null?void 0:r.className}'`),!Pt)return console.error(`[UIUpdater setLcdState - ${l} - ${a}] localGsap not initialized.`),o&&setTimeout(o,0),{timeline:null,completionPromise:Promise.resolve()};if(!r)return console.warn(`[UIUpdater setLcdState - ${l} - ${a}] Attempted to set state on null element. Requested state: ${t}`),o&&Pt.delayedCall(0,o),{timeline:Pt.timeline().to({},{duration:.001}),completionPromise:Promise.resolve()};let u=r,f=null,d=null;r.classList.contains("hue-lcd-display")?f=r.querySelector(".lcd-value"):r.classList.contains("actual-lcd-screen-element")?d=U.terminalLcdContentElement:r.id==="terminal-lcd-content"?(u=U.terminalContainer,d=r):(console.warn(`[UIUpdater setLcdState - ${l} - ${a}] Unknown LCD element structure.`),f=r.querySelector(".lcd-value")||r);let h={timeline:Pt.timeline().to({},{duration:.001}),completionPromise:Promise.resolve()};if(!i){const p=Array.from(u.classList);let g=!1;zn.forEach(m=>{u.classList.contains(m)&&(u.classList.remove(m),g=!0)}),g&&console.log(`[UIUpdater setLcdState - ${l} - ${a}] Cleared managed classes. Was: '${p.join(" ")}', Now: '${u.className}'`)}const c=Ar.ADVANCED_FLICKER_PROFILES[s],_=(c==null?void 0:c.amplitudeStart)===0;return n&&_&&(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Profile ${s} starts from unlit. Setting autoAlpha:0 and text opacity:0 PRE-FLICKER.`),Pt.set(u,{autoAlpha:0,immediateRender:!0}),f&&Pt.set(f,{opacity:0,immediateRender:!0})),n&&(t==="lcd--dimly-lit"||t==="js-active-dim-lcd")?(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Using flicker.`),!i&&t&&t!=="active"&&zn.includes(t)&&(u.classList.contains(t)||(u.classList.add(t),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Added class '${t}' for flicker.`))),u.classList.add("is-flickering"),h=ls(u,s,{gsapInstance:Pt,onStart:()=>{console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Flicker timeline START. Screen autoAlpha: ${Pt.getProperty(u,"autoAlpha")}`)},onTimelineComplete:()=>{u.classList.remove("is-flickering"),console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Flicker timeline COMPLETE. Screen autoAlpha: ${Pt.getProperty(u,"autoAlpha")}`),i||(zn.forEach(p=>{t!==p&&u.classList.contains(p)&&u.classList.remove(p)}),t&&t!=="active"&&zn.includes(t)&&(u.classList.contains(t)||u.classList.add(t)),console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Screen classes post-flicker: '${u.className}'`)),xn(u,f,d,a,t,!0),o&&o()}})):(!i&&t&&t!=="active"&&zn.includes(t)&&(u.classList.contains(t)||(u.classList.add(t),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Added class '${t}' (no flicker).`))),t==="active"&&Pt.getProperty(u,"autoAlpha")<1&&(Pt.set(u,{autoAlpha:1}),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Set autoAlpha:1 for 'active' state.`)),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Not using flicker. State: ${t}`),xn(u,f,d,a,t,!0),o&&Pt.delayedCall(0,o)),h}function xn(r,t,e,i,n,s=!1){const o=r.id||r.classList[0]||"UnknownLCDContainer";console.log(`[UIUpdater updateLcdTextAndVisibility - ${o} - ${i}] Called. TargetState: '${n}', forceGsapSet: ${s}`);const a=ct(),l=br();let u=!1,f=!1;if(n==="active")u=!0,f=!0;else if(n==="lcd--dimly-lit"||n==="js-active-dim-lcd"){const d=a==="interactive"||a==="starting-up"&&l>=6;u=d,f=d}else n==="lcd--unlit"?(r===U.terminalContainer&&e&&e.childElementCount>0?(f=!0,console.log(`[UIUpdater updateLcdTextAndVisibility - TERMINAL - ${i}] Screen is 'lcd--unlit' but content has children. Forcing contentArea visible.`)):f=!1,u=!1):a==="starting-up"&&l>=6&&(u=!0,f=!0);if(t){const d=r===U.lcdA?"A":"B";let h="";if(u)if(d==="A"){const p=wn("A");h=p?Math.round((p.hue%360+360)%360).toString():String(Math.round(Ar.DEFAULT_DIAL_A_HUE))}else d==="B"&&(h=`${Math.round(Nn()*100)}%`);console.log(`[UIUpdater updateLcdTextAndVisibility - DIAL ${d} - ${i}] shouldTextBeVisible: ${u}, textContent: "${h}"`),ag(r,h,d);const c=u?1:0,_=parseFloat(Pt.getProperty(t,"opacity"));(s||Math.abs(_-c)>.01)&&(console.log(`[UIUpdater updateLcdTextAndVisibility - DIAL ${d} - ${i}] ${s?"Forcing GSAP set":"Animating"} .lcd-value opacity to: ${c}`),Pt.set(t,{opacity:c}))}if(e&&r===U.terminalContainer){const d=f?1:0;Pt.set(e,{opacity:d,visibility:d>0?"visible":"hidden"}),console.log(`[UIUpdater updateLcdTextAndVisibility - TERMINAL - ${i}] Set #terminal-lcd-content opacity to ${d}.`)}}function rg(r){const t=`setDialLcdActiveDimState_isActive_${r}`;console.log(`[UIUpdater setDialLcdActiveDimState] Called with isActive: ${r}. PhaseContext: ${t}`);const e=r?"js-active-dim-lcd":"lcd--unlit";U.lcdA&&xn(U.lcdA,U.lcdA.querySelector(".lcd-value"),null,t,e,!0),U.lcdB&&xn(U.lcdB,U.lcdB.querySelector(".lcd-value"),null,t,e,!0)}function sg(){var t;const r=(t=U.logoContainer)==null?void 0:t.querySelector("svg.logo-svg");r&&(r.style.opacity="")}function og(){va(),ct()==="interactive"&&(console.log("[UIUpdater finalizeThemeTransition] App is interactive. Setting LCDs to 'active'."),U.lcdA&&cr(U.lcdA,"active",{phaseContext:"FinalizeTheme_LcdA"}),U.lcdB&&cr(U.lcdB,"active",{phaseContext:"FinalizeTheme_LcdB"}),U.terminalContainer&&cr(U.terminalContainer,"active",{phaseContext:"FinalizeTheme_Terminal"}))}function Pr(r,t,e){const i=U.root;if(!i)return;const n=(Number(t)%360+360)%360;let s;const o=`--dynamic-${r}-chroma`,a={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},u=((d,h)=>{try{const c=getComputedStyle(i).getPropertyValue(d).trim();return c===""?h:parseFloat(c)||h}catch{return h}})(`--dynamic-${r}-chroma-base`,a[r]||.1);s=e?0:u;const f=`--dynamic-${r}-hue`;i.style.setProperty(f,n.toFixed(1)),i.style.setProperty(o,s.toFixed(4))}function ag(r,t,e){if(!r){console.warn(`[UIUpdater updateLcdDisplay] Attempted to update null LCD screen element for ID: ${e}`);return}if(e==="Terminal")return;const i=r.querySelector(".lcd-value");if(!i){console.warn(`[UIUpdater updateLcdDisplay] .lcd-value span not found in LCD: ${e}`);return}i.textContent!==t&&(i.textContent=t,console.log(`[UIUpdater updateLcdDisplay - ${e}] Text content set to: "${t}"`))}function lg(r){if(!(!r||r.id!=="A"||!r.state)&&U.lcdA){const t=Xc(U.lcdA);xn(U.lcdA,U.lcdA.querySelector(".lcd-value"),null,"DialAUpdate",t)}}function ug(r){!r||!r.targetKey||typeof r.hue!="number"||typeof r.isColorless!="boolean"||Pr(r.targetKey,r.hue,r.isColorless)}function cg(r){if(!U.body)return;const t=br(),e=ct();console.log(`[UIUpdater handleThemeChange] Theme changing to '${r}'. CurrentPhase: ${t}, AppStatus: ${e}`),U.body.classList.remove("theme-dim","theme-dark","theme-light"),U.body.classList.add(`theme-${r}`);const i=e==="starting-up"&&t===10&&U.body.classList.contains("is-transitioning-from-dim");!i&&e!=="loading"?(console.log(`[UIUpdater handleThemeChange] Calling applyInitialLcdStates after theme change to '${r}'.`),Rr()):console.log(`[UIUpdater handleThemeChange] Deferring applyInitialLcdStates for theme '${r}'. P10 Transition: ${i}, AppStatus: ${e}`)}function dg(r){if(U.lcdB){const t=Xc(U.lcdB);xn(U.lcdB,U.lcdB.querySelector(".lcd-value"),null,"DialBUpdate_TrueLensPower",t)}}function Xc(r){if(!r||r.classList.contains("lcd--unlit"))return"lcd--unlit";if(r.classList.contains("js-active-dim-lcd"))return"js-active-dim-lcd";if(r.classList.contains("lcd--dimly-lit"))return"lcd--dimly-lit";const t=ct(),e=br();return t==="interactive"||t==="starting-up"&&e>=10?"active":t==="starting-up"&&e>=6?"lcd--dimly-lit":"lcd--unlit"}function fg(r){var t;if(console.log(`[UIUpdater handleAppStatusChange] New status: ${r}`),r!=="loading"&&Rr(),r==="starting-up"){const e=(t=U.logoContainer)==null?void 0:t.querySelector("svg.logo-svg");e&&e.style.opacity!=="0.05"&&(e.style.opacity="0.05")}else r==="interactive"&&va()}function hg(r){console.log(`[UIUpdater handleStartupPhaseNumberChange] New phase number: ${r}. AppStatus: ${ct()}`),r>=0||r===-1&&ct()==="loading"?Rr():r===-1&&ct()==="starting-up"&&console.log("[UIUpdater handleStartupPhaseNumberChange] Phase is -1 during 'starting-up'. Deferring applyInitialLcdStates.")}function Rr(){const r=br(),t=ct();if(console.log(`[UIUpdater applyInitialLcdStates] AppStatus: ${t}, CurrentPhase: ${r}`),r===-1&&t==="starting-up"){console.log("[UIUpdater applyInitialLcdStates] CurrentPhase is -1 during 'starting-up'. Deferring state changes.");return}[{el:U.lcdA,id:"LcdA_ApplyInitial"},{el:U.lcdB,id:"LcdB_ApplyInitial"},{el:U.terminalContainer,id:"Terminal_ApplyInitial"}].forEach(i=>{if(!i.el)return;let n="lcd--unlit";if(t==="interactive"||t==="starting-up"&&r>=10)n="active";else if(t==="starting-up"&&r>=6){if(r===6&&(i.el===U.lcdA||i.el===U.lcdB)){console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Phase 6, deferring Dial LCD state. Current class: ${i.el.className}`),i.el.classList.contains("lcd--dimly-lit")&&(i.el.classList.remove("lcd--dimly-lit"),console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Phase 6, removed lcd--dimly-lit for deferral.`));const s=i.el.querySelector(".lcd-value");s&&Pt.getProperty(s,"opacity")>0&&Pt.set(s,{opacity:0});return}n="lcd--dimly-lit"}else(t==="starting-up"&&r>=0&&r<6||t==="loading"&&r===-1)&&(n="lcd--unlit");console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Target state for phase ${r}: ${n}`),i.el.classList.contains("is-flickering")?console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Flicker in progress for ${i.el.id||i.el.className}. Text/content visibility will be handled by flicker onComplete.`):cr(i.el,n,{skipClassChange:!1,phaseContext:`ApplyInitial_P${r}_${i.id}`})})}function pg(r){if(r&&r.id==="A"&&r.state){const t=(r.state.hue%360+360)%360;if(U.root){const e=getComputedStyle(U.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),i=parseFloat(e)||.2;Pr("ui-accent",t,i===0)}}}function va(){["env","lcd","logo","btn"].forEach(n=>{const s=da(n);s&&Pr(n,s.hue,s.isColorless)});const t=wn("A"),e=Ar.DEFAULT_DIAL_A_HUE,i=t?t.hue:e;if(U.root){const n=getComputedStyle(U.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),s=parseFloat(n)||.2;Pr("ui-accent",i,s===0)}}function Wc(){if(!U.logoContainer){console.error("[UIUpdater] logoContainer element not found for SVG injection.");return}const r=U.logoContainer.querySelector("svg.logo-svg");if(r){document.body.classList.contains("theme-dim")||ct()==="starting-up"?(r.style.opacity===""||parseFloat(r.style.opacity)>.05)&&(r.style.opacity="0.05"):r.style.opacity==="0.05"&&(r.style.opacity="");return}fetch("./logo.svg").then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status} for ${e.url}`);return e.text()}).then(e=>{if(!e||!e.trim().startsWith("<svg"))throw new Error("Invalid or empty SVG data.");U.logoContainer.innerHTML=e;const i=U.logoContainer.querySelector("svg.logo-svg");if(i){(document.body.classList.contains("theme-dim")||ct()==="starting-up")&&(i.style.opacity="0.05");const n=da("logo");n&&Pr("logo",n.hue,n.isColorless)}else console.error("[UIUpdater injectLogoSVG] SVG element NOT found after innerHTML set."),U.logoContainer.innerHTML='<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Element Not Found Post-Inject</p>'}).catch(e=>{console.error("[UIUpdater] Error fetching/injecting SVG logo:",e),U.logoContainer.innerHTML=`<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Load Error: ${e.message}</p>`})}const Ml=Object.freeze(Object.defineProperty({__proto__:null,applyInitialLcdStates:Rr,finalizeThemeTransition:og,init:zc,injectLogoSVG:Wc,prepareLogoForFullTheme:sg,setDialLcdActiveDimState:rg,setLcdState:cr},Symbol.toStringTag,{value:"Module"}));class _g{constructor(t,e,i,n){this.gsap=t,this.appState=e,this.buttonManager=i,this.configModule=n,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!1,this._updateResonance=this._updateResonance.bind(this)}init(){this.debug&&console.log("[AAM INIT] Initializing AmbientAnimationManager."),this.appState.subscribe("appStatusChanged",this._handleAppStatusChange.bind(this)),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",this._handleBeforeButtonTransition.bind(this)),this.buttonManager.on("afterButtonTransition",this._handleAfterButtonTransition.bind(this)),this.debug&&console.log("[AAM INIT] Subscribed to ButtonManager events.")):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(this.appState.getAppStatus()),this.debug&&console.log(`[AAM INIT] Initialization complete. Initial isActive: ${this.isActive}, HarmonicResonanceEnabled: ${this.enableHarmonicResonance}`)}_updateResonance(){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance)return;const t=this.configModule.HARMONIC_RESONANCE_PARAMS,e=this.gsap.ticker.time;this.globalResonanceParams.progress=(Math.sin(e*Math.PI*2/t.PERIOD)+1)/2;const i=this.globalResonanceParams.progress*t.LIGHT_OPACITY_DIP_FACTOR,n=t.BASE_LIGHT_OPACITY_SELECTED*(1-i);document.documentElement.style.setProperty("--harmonic-resonance-opacity-target",n.toFixed(3)),this.debug&&Math.random()<.01&&console.log(`[AAM _updateResonance] CSS Var --harmonic-resonance-opacity-target set to: ${n.toFixed(3)}`)}_handleAppStatusChange(t){this.debug&&console.log(`[AAM _handleAppStatusChange] Received new app status: ${t}. Current AAM.isActive: ${this.isActive}`);const e=this.isActive;if(this.isActive=t==="interactive",this.isActive){!e&&this.enableHarmonicResonance&&(this.resonanceTicker.add(this._updateResonance),this.debug&&console.log("[AAM _handleAppStatusChange] Resonance ticker ADDED."));const i=this.buttonManager.getAllButtonInstances();this.debug&&console.log(`[AAM _handleAppStatusChange] App became interactive. Applying ambient animations to ${i.length} buttons.`);for(const n of i)this._applyAmbientAnimation(n)}else{e&&this.enableHarmonicResonance&&(this.resonanceTicker.remove(this._updateResonance),this.debug&&console.log("[AAM _handleAppStatusChange] Resonance ticker REMOVED."),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target"));const i=this.buttonManager.getAllButtonInstances();this.debug&&i.length>0&&console.log(`[AAM _handleAppStatusChange] App no longer interactive. Stopping ambient animations for ${i.length} buttons.`);for(const n of i)n.stopHarmonicResonance(),n.stopIdleLightDrift()}}_handleBeforeButtonTransition(t){this.isActive&&(this.debug&&console.log(`[AAM _handleBeforeButtonTransition] Button: ${t.getIdentifier()}. Stopping its ambient animations.`),t.stopHarmonicResonance(),t.stopIdleLightDrift())}_handleAfterButtonTransition(t){this.isActive&&(this.debug&&console.log(`[AAM _handleAfterButtonTransition] Button: ${t.getIdentifier()}. Re-applying ambient animation.`),this._applyAmbientAnimation(t))}_applyAmbientAnimation(t){if(!this.isActive||!this.configModule){this.debug&&console.log(`[AAM _applyAmbientAnimation] Skipped for ${t.getIdentifier()}. AAM active: ${this.isActive}, Config: !!${this.configModule}`);return}t.stopHarmonicResonance(),t.stopIdleLightDrift();const e=this.configModule.HARMONIC_RESONANCE_PARAMS,i=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,n=t.getCurrentClasses(),s=t.isSelected(),o=e&&e.ELIGIBILITY_CLASS,a=i&&i.ELIGIBILITY_CLASS,l=o&&n.has(o)||a&&n.has(a);this.debug&&console.log(`[AAM _applyAmbientAnimation] Button: ${t.getIdentifier()}, isSelected: ${s}, isEnergized (based on class '${o||a}'): ${l}, Current DOM Classes: '${Array.from(n).join(" ")}'`),l?s?this.enableHarmonicResonance?(this.debug&&console.log(`[AAM _applyAmbientAnimation] Starting HARMONIC RESONANCE for selected button: ${t.getIdentifier()}`),t.startHarmonicResonance()):(this.debug&&console.log(`[AAM _applyAmbientAnimation] Harmonic Resonance DISABLED. Not starting for ${t.getIdentifier()}`),t.stopHarmonicResonance()):(this.debug&&console.log(`[AAM _applyAmbientAnimation] Starting IDLE LIGHT DRIFT for unselected, energized button: ${t.getIdentifier()}`),t.startIdleLightDrift()):this.debug&&console.log(`[AAM _applyAmbientAnimation] Button ${t.getIdentifier()} is NOT eligible for ambient animation (not energized).`)}destroy(){this.debug&&console.log("[AAM DESTROY] Destroying AmbientAnimationManager."),this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target")}}const wt={root:document.documentElement,body:document.body,appWrapper:document.querySelector(".app-wrapper"),leftPanel:document.querySelector(".left-panel"),centerPanel:document.querySelector(".center-panel"),rightPanel:document.querySelector(".right-panel"),allButtons:Array.from(document.querySelectorAll(".button-unit")),mainPowerToggleButtons:Array.from(document.querySelectorAll('[data-group-id="system-power"] .button-unit--toggle')),mainPwrOnButton:document.querySelector('[data-group-id="system-power"] .button-unit--toggle[data-toggle-value="on"]'),mainPwrOffButton:document.querySelector('[data-group-id="system-power"] .button-unit--toggle[data-toggle-value="off"]'),auxLightToggleButtons:Array.from(document.querySelectorAll('[data-group-id="light"] .button-unit--toggle')),auxLightLowButton:document.querySelector('[data-group-id="light"] .button-unit--toggle[data-toggle-value="off"]'),auxLightHighButton:document.querySelector('[data-group-id="light"] .button-unit--toggle[data-toggle-value="on"]'),scanButton1Element:document.querySelector('[data-group-id="skill-scan-group"] .button-unit--action[aria-label="Scan Button 1"]'),scanButton2Element:document.querySelector('[data-group-id="skill-scan-group"] .button-unit--action[aria-label="Scan Button 2"]'),scanButton3Element:document.querySelector('[data-group-id="fit-eval-group"] .button-unit--action[aria-label="Scan Button 3"]'),scanButton4Element:document.querySelector('[data-group-id="fit-eval-group"] .button-unit--action[aria-label="Scan Button 4"]'),hueAssignmentRadioButtons:Array.from(document.querySelectorAll(".hue-assignment-column .button-unit--radio")),dialA:document.getElementById("dial-canvas-container-A"),dialB:document.getElementById("dial-canvas-container-B"),lcdA:document.getElementById("hue-lcd-A"),lcdB:document.getElementById("hue-lcd-B"),terminalContainer:document.querySelector(".terminal-block .actual-lcd-screen-element"),terminalLcdContentElement:document.getElementById("terminal-lcd-content"),lensContainer:document.getElementById("lens-container"),colorLens:document.getElementById("color-lens"),colorLensGradient:document.getElementById("color-lens-gradient"),lensOuterGlow:document.getElementById("outer-glow"),lensSuperGlow:document.getElementById("lens-super-glow"),logoContainer:document.getElementById("logo-container"),colorChipsContainer:document.querySelector(".color-chips-column"),colorChips:Array.from(document.querySelectorAll(".color-chip")),grillPlaceholder:document.querySelector(".grill-placeholder"),debugControls:document.getElementById("debug-controls"),btnNextPhase:document.getElementById("btn-next-phase"),btnPlayAll:document.getElementById("btn-play-all"),btnResetStartup:document.getElementById("btn-reset-startup-debug"),debugPhaseStatus:document.getElementById("debug-phase-status"),debugPhaseInfo:document.getElementById("debug-phase-info"),elementsAnimatedOnDimExit:[]};ce.registerPlugin(Ir,ua,Lr);function gg(){console.log("[Main INIT] HUE 9000 REFACTOR-V2.3 Initializing..."),dc("loading");const r=new ip(ce,tn,vi),t=new _g(ce,tn,r,vi);zc(wt,vi,ce),fc([wt.dialA,wt.dialB],tn,vi,ce);const e=Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]"));hc(e,r),mc(wt.root,wt.colorLensGradient,vi,ce),El.init(wt.terminalContainer,wt.terminalLcdContentElement,tn,vi,ce),r.setUiUpdater(Ml),r.setAAM(t),r.init(wt.allButtons),pc([...wt.mainPowerToggleButtons,...wt.auxLightToggleButtons],r),t.init(),Vc({gsap:ce,appState:tn,configModule:vi,domElements:wt,managers:{buttonManager:r,dialManager:op,gridManager:ap,toggleManager:lp,lensManager:hp,terminalManager:El,uiUpdater:Ml,debugManager:mp,ambientAnimationManager:t}});const n={nextPhaseButton:wt.btnNextPhase,playAllButton:wt.btnPlayAll,resetButton:wt.btnResetStartup,debugStatusDiv:wt.debugPhaseStatus,debugPhaseInfoDiv:wt.debugPhaseInfo};Ac({startupSequenceManager:ng,appState:tn,domElements:n}),Ia(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",gg);
