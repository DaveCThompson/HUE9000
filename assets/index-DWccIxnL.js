(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function Xe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function vs(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ae={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ai={duration:.5,overwrite:!1,delay:0},dr,oe,H,ze=1e8,de=1/ze,Mn=Math.PI*2,ca=Mn/4,da=0,Ns=Math.sqrt,ha=Math.cos,fa=Math.sin,ne=function(e){return typeof e=="string"},z=function(e){return typeof e=="function"},tt=function(e){return typeof e=="number"},hr=function(e){return typeof e>"u"},Ye=function(e){return typeof e=="object"},_e=function(e){return e!==!1},fr=function(){return typeof window<"u"},Hi=function(e){return z(e)||ne(e)},Ls=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},he=Array.isArray,xn=/(?:-?\.?\d|\.)+/gi,Os=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Jt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,yn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,bs=/[+-]=-?[.\d]+/,Rs=/[^,'"\[\]\s]+/gi,pa=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,$,Ue,Bn,pr,Ce={},Ji={},ws,Fs=function(e){return(Ji=ui(e,Ce))&&Ee},_r=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},vi=function(e,t){return!t&&console.warn(e)},Ms=function(e,t){return e&&(Ce[e]=t)&&Ji&&(Ji[e]=t)||Ce},Ni=function(){return 0},_a={suppressEvents:!0,isStart:!0,kill:!1},ji={suppressEvents:!0,kill:!1},ga={suppressEvents:!0},gr={},ht=[],kn={},xs,Se={},An={},Wr=30,qi=[],mr="",Dr=function(e){var t=e[0],i,n;if(Ye(t)||z(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=qi.length;n--&&!qi[n].targetTest(t););i=qi[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new oo(e[n],i)))||e.splice(n,1);return e},Rt=function(e){return e._gsap||Dr(Oe(e))[0]._gsap},Bs=function(e,t,i){return(i=e[t])&&z(i)?e[t]():hr(i)&&e.getAttribute&&e.getAttribute(t)||i},ge=function(e,t){return(e=e.split(",")).forEach(t)||e},j=function(e){return Math.round(e*1e5)/1e5||0},Q=function(e){return Math.round(e*1e7)/1e7||0},ni=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},ma=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},Zi=function(){var e=ht.length,t=ht.slice(0),i,n;for(kn={},ht.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Er=function(e){return!!(e._initted||e._startAt||e.add)},ks=function(e,t,i,n){ht.length&&!oe&&Zi(),e.render(t,i,!!(oe&&t<0&&Er(e))),ht.length&&!oe&&Zi()},Us=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Rs).length<2?t:ne(e)?e.trim():e},Gs=function(e){return e},Ie=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Da=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},ui=function(e,t){for(var i in t)e[i]=t[i];return e},jr=function r(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Ye(t[i])?r(e[i]||(e[i]={}),t[i]):t[i]);return e},en=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},Ai=function(e){var t=e.parent||$,i=e.keyframes?Da(he(e.keyframes)):Ie;if(_e(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Ea=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},Hs=function(e,t,i,n,s){var a=e[n],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=a,t.parent=t._dp=e,t},_n=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[n]===t&&(e[n]=s),t._next=t._prev=t.parent=null},_t=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},wt=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Sa=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Un=function(e,t,i,n){return e._startAt&&(oe?e._startAt.revert(ji):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},Ta=function r(e){return!e||e._ts&&r(e.parent)},qr=function(e){return e._repeat?li(e._tTime,e=e.duration()+e._rDelay)*e:0},li=function(e,t){var i=Math.floor(e=Q(e/t));return e&&i===e?i-1:i},tn=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gn=function(e){return e._end=Q(e._start+(e._tDur/Math.abs(e._ts||e._rts||de)||0))},mn=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Q(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gn(e),i._dirty||wt(i,e)),e},$s=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=tn(e.rawTime(),t),(!t._dur||ki(0,t.totalDuration(),i)-t._tTime>de)&&t.render(i,!0)),wt(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},He=function(e,t,i,n){return t.parent&&_t(t),t._start=Q((tt(i)?i:i||e!==$?Ne(e,i,t):e._time)+t._delay),t._end=Q(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Hs(e,t,"_first","_last",e._sort?"_start":0),Gn(t)||(e._recent=t),n||$s(e,t),e._ts<0&&mn(e,e._tTime),e},Vs=function(e,t){return(Ce.ScrollTrigger||_r("scrollTrigger",t))&&Ce.ScrollTrigger.create(t,e)},zs=function(e,t,i,n,s){if(Tr(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!oe&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&xs!==Te.frame)return ht.push(e),e._lazy=[s,n],1},ya=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},Gn=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Aa=function(e,t,i,n){var s=e.ratio,a=t<0||!t&&(!e._start&&ya(e)&&!(!e._initted&&Gn(e))||(e._ts<0||e._dp._ts<0)&&!Gn(e))?0:1,o=e._rDelay,u=0,l,c,d;if(o&&e._repeat&&(u=ki(0,e._tDur,t),c=li(u,o),e._yoyo&&c&1&&(a=1-a),c!==li(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||oe||n||e._zTime===de||!t&&e._zTime){if(!e._initted&&zs(e,t,n,i,u))return;for(d=e._zTime,e._zTime=t||(i?de:0),i||(i=t&&!d),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=u,l=e._pt;l;)l.r(a,l.d),l=l._next;t<0&&Un(e,t,i,!0),e._onUpdate&&!i&&ye(e,"onUpdate"),u&&e._repeat&&!i&&e.parent&&ye(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&_t(e,1),!i&&!oe&&(ye(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ca=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},ci=function(e,t,i,n){var s=e._repeat,a=Q(t)||0,o=e._tTime/e._tDur;return o&&!n&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Q(a*(s+1)+e._rDelay*s):a,o>0&&!n&&mn(e,e._tTime=e._tDur*o),e.parent&&gn(e),i||wt(e.parent,e),e},Xr=function(e){return e instanceof fe?wt(e):ci(e,e._dur)},Ia={_start:0,endTime:Ni,totalDuration:Ni},Ne=function r(e,t,i){var n=e.labels,s=e._recent||Ia,a=e.duration()>=ze?s.endTime(!1):e._dur,o,u,l;return ne(t)&&(isNaN(t)||t in n)?(u=t.charAt(0),l=t.substr(-1)==="%",o=t.indexOf("="),u==="<"||u===">"?(o>=0&&(t=t.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(o<0?s:i).totalDuration()/100:1)):o<0?(t in n||(n[t]=a),n[t]):(u=parseFloat(t.charAt(o-1)+t.substr(o+1)),l&&i&&(u=u/100*(he(i)?i[0]:i).totalDuration()),o>1?r(e,t.substr(0,o-1),i)+u:a+u)):t==null?a:+t},Ci=function(e,t,i){var n=tt(t[1]),s=(n?2:1)+(e<2?0:1),a=t[s],o,u;if(n&&(a.duration=t[1]),a.parent=i,e){for(o=a,u=i;u&&!("immediateRender"in o);)o=u.vars.defaults||{},u=_e(u.vars.inherit)&&u.parent;a.immediateRender=_e(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new K(t[0],a,t[s+1])},Et=function(e,t){return e||e===0?t(e):t},ki=function(e,t,i){return i<e?e:i>t?t:i},ce=function(e,t){return!ne(e)||!(t=pa.exec(e))?"":t[1]},Pa=function(e,t,i){return Et(i,function(n){return ki(e,t,n)})},Hn=[].slice,Ys=function(e,t){return e&&Ye(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ye(e[0]))&&!e.nodeType&&e!==Ue},va=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var s;return ne(n)&&!t||Ys(n,1)?(s=i).push.apply(s,Oe(n)):i.push(n)})||i},Oe=function(e,t,i){return H&&!t&&H.selector?H.selector(e):ne(e)&&!i&&(Bn||!di())?Hn.call((t||pr).querySelectorAll(e),0):he(e)?va(e,i):Ys(e)?Hn.call(e,0):e?[e]:[]},$n=function(e){return e=Oe(e)[0]||vi("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Oe(t,i.querySelectorAll?i:i===e?vi("Invalid scope")||pr.createElement("div"):e)}},Ws=function(e){return e.sort(function(){return .5-Math.random()})},js=function(e){if(z(e))return e;var t=Ye(e)?e:{each:e},i=Ft(t.ease),n=t.from||0,s=parseFloat(t.base)||0,a={},o=n>0&&n<1,u=isNaN(n)||o,l=t.axis,c=n,d=n;return ne(n)?c=d={center:.5,edges:.5,end:1}[n]||0:!o&&u&&(c=n[0],d=n[1]),function(h,p,_){var f=(_||t).length,g=a[f],D,E,T,y,S,A,C,I,m;if(!g){if(m=t.grid==="auto"?0:(t.grid||[1,ze])[1],!m){for(C=-1e8;C<(C=_[m++].getBoundingClientRect().left)&&m<f;);m<f&&m--}for(g=a[f]=[],D=u?Math.min(m,f)*c-.5:n%m,E=m===ze?0:u?f*d/m-.5:n/m|0,C=0,I=ze,A=0;A<f;A++)T=A%m-D,y=E-(A/m|0),g[A]=S=l?Math.abs(l==="y"?y:T):Ns(T*T+y*y),S>C&&(C=S),S<I&&(I=S);n==="random"&&Ws(g),g.max=C-I,g.min=I,g.v=f=(parseFloat(t.amount)||parseFloat(t.each)*(m>f?f-1:l?l==="y"?f/m:m:Math.max(m,f/m))||0)*(n==="edges"?-1:1),g.b=f<0?s-f:s,g.u=ce(t.amount||t.each)||0,i=i&&f<0?no(i):i}return f=(g[h]-g.min)/g.max||0,Q(g.b+(i?i(f):f)*g.v)+g.u}},Vn=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=Q(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(tt(i)?0:ce(i))}},qs=function(e,t){var i=he(e),n,s;return!i&&Ye(e)&&(n=i=e.radius||ze,e.values?(e=Oe(e.values),(s=!tt(e[0]))&&(n*=n)):e=Vn(e.increment)),Et(t,i?z(e)?function(a){return s=e(a),Math.abs(s-a)<=n?s:a}:function(a){for(var o=parseFloat(s?a.x:a),u=parseFloat(s?a.y:0),l=ze,c=0,d=e.length,h,p;d--;)s?(h=e[d].x-o,p=e[d].y-u,h=h*h+p*p):h=Math.abs(e[d]-o),h<l&&(l=h,c=d);return c=!n||l<=n?e[c]:a,s||c===a||tt(a)?c:c+ce(a)}:Vn(e))},Xs=function(e,t,i,n){return Et(he(e)?!t:i===!0?!!(i=0):!n,function(){return he(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},Na=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(s,a){return a(s)},n)}},La=function(e,t){return function(i){return e(parseFloat(i))+(t||ce(i))}},Oa=function(e,t,i){return Qs(e,t,0,1,i)},Ks=function(e,t,i){return Et(i,function(n){return e[~~t(n)]})},ba=function r(e,t,i){var n=t-e;return he(e)?Ks(e,r(0,e.length),t):Et(i,function(s){return(n+(s-e)%n)%n+e})},Ra=function r(e,t,i){var n=t-e,s=n*2;return he(e)?Ks(e,r(0,e.length-1),t):Et(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>n?s-a:a)})},Li=function(e){for(var t=0,i="",n,s,a,o;~(n=e.indexOf("random(",t));)a=e.indexOf(")",n),o=e.charAt(n+7)==="[",s=e.substr(n+7,a-n-7).match(o?Rs:xn),i+=e.substr(t,n-t)+Xs(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},Qs=function(e,t,i,n,s){var a=t-e,o=n-i;return Et(s,function(u){return i+((u-e)/a*o||0)})},wa=function r(e,t,i,n){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var a=ne(e),o={},u,l,c,d,h;if(i===!0&&(n=1)&&(i=null),a)e={p:e},t={p:t};else if(he(e)&&!he(t)){for(c=[],d=e.length,h=d-2,l=1;l<d;l++)c.push(r(e[l-1],e[l]));d--,s=function(_){_*=d;var f=Math.min(h,~~_);return c[f](_-f)},i=t}else n||(e=ui(he(e)?[]:{},e));if(!c){for(u in t)Sr.call(o,e,u,"get",t[u]);s=function(_){return Cr(_,o)||(a?e.p:e)}}}return Et(i,s)},Kr=function(e,t,i){var n=e.labels,s=ze,a,o,u;for(a in n)o=n[a]-t,o<0==!!i&&o&&s>(o=Math.abs(o))&&(u=a,s=o);return u},ye=function(e,t,i){var n=e.vars,s=n[t],a=H,o=e._ctx,u,l,c;if(s)return u=n[t+"Params"],l=n.callbackScope||e,i&&ht.length&&Zi(),o&&(H=o),c=u?s.apply(l,u):s.call(l),H=a,c},Si=function(e){return _t(e),e.scrollTrigger&&e.scrollTrigger.kill(!!oe),e.progress()<1&&ye(e,"onInterrupt"),e},Zt,Js=[],Zs=function(e){if(e)if(e=!e.name&&e.default||e,fr()||e.headless){var t=e.name,i=z(e),n=t&&!i&&e.init?function(){this._props=[]}:e,s={init:Ni,render:Cr,add:Sr,kill:Xa,modifier:qa,rawVars:0},a={targetTest:0,get:0,getSetter:Ar,aliases:{},register:0};if(di(),e!==n){if(Se[t])return;Ie(n,Ie(en(e,s),a)),ui(n.prototype,ui(s,en(e,a))),Se[n.prop=t]=n,e.targetTest&&(qi.push(n),gr[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Ms(t,n),e.register&&e.register(Ee,n,me)}else Js.push(e)},k=255,Ti={aqua:[0,k,k],lime:[0,k,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,k],navy:[0,0,128],white:[k,k,k],olive:[128,128,0],yellow:[k,k,0],orange:[k,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[k,0,0],pink:[k,192,203],cyan:[0,k,k],transparent:[k,k,k,0]},Cn=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*k+.5|0},eo=function(e,t,i){var n=e?tt(e)?[e>>16,e>>8&k,e&k]:0:Ti.black,s,a,o,u,l,c,d,h,p,_;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ti[e])n=Ti[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&k,n&k,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&k,e&k]}else if(e.substr(0,3)==="hsl"){if(n=_=e.match(xn),!t)u=+n[0]%360/360,l=+n[1]/100,c=+n[2]/100,a=c<=.5?c*(l+1):c+l-c*l,s=c*2-a,n.length>3&&(n[3]*=1),n[0]=Cn(u+1/3,s,a),n[1]=Cn(u,s,a),n[2]=Cn(u-1/3,s,a);else if(~e.indexOf("="))return n=e.match(Os),i&&n.length<4&&(n[3]=1),n}else n=e.match(xn)||Ti.transparent;n=n.map(Number)}return t&&!_&&(s=n[0]/k,a=n[1]/k,o=n[2]/k,d=Math.max(s,a,o),h=Math.min(s,a,o),c=(d+h)/2,d===h?u=l=0:(p=d-h,l=c>.5?p/(2-d-h):p/(d+h),u=d===s?(a-o)/p+(a<o?6:0):d===a?(o-s)/p+2:(s-a)/p+4,u*=60),n[0]=~~(u+.5),n[1]=~~(l*100+.5),n[2]=~~(c*100+.5)),i&&n.length<4&&(n[3]=1),n},to=function(e){var t=[],i=[],n=-1;return e.split(ft).forEach(function(s){var a=s.match(Jt)||[];t.push.apply(t,a),i.push(n+=a.length+1)}),t.c=i,t},Qr=function(e,t,i){var n="",s=(e+n).match(ft),a=t?"hsla(":"rgba(",o=0,u,l,c,d;if(!s)return e;if(s=s.map(function(h){return(h=eo(h,t,1))&&a+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(c=to(e),u=i.c,u.join(n)!==c.c.join(n)))for(l=e.replace(ft,"1").split(Jt),d=l.length-1;o<d;o++)n+=l[o]+(~u.indexOf(o)?s.shift()||a+"0,0,0,0)":(c.length?c:s.length?s:i).shift());if(!l)for(l=e.split(ft),d=l.length-1;o<d;o++)n+=l[o]+s[o];return n+l[d]},ft=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ti)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Fa=/hsl[a]?\(/,io=function(e){var t=e.join(" "),i;if(ft.lastIndex=0,ft.test(t))return i=Fa.test(t),e[1]=Qr(e[1],i),e[0]=Qr(e[0],i,to(e[1])),!0},Oi,Te=function(){var r=Date.now,e=500,t=33,i=r(),n=i,s=1e3/240,a=s,o=[],u,l,c,d,h,p,_=function f(g){var D=r()-n,E=g===!0,T,y,S,A;if((D>e||D<0)&&(i+=D-t),n+=D,S=n-i,T=S-a,(T>0||E)&&(A=++d.frame,h=S-d.time*1e3,d.time=S=S/1e3,a+=T+(T>=s?4:s-T),y=1),E||(u=l(f)),y)for(p=0;p<o.length;p++)o[p](S,h,A,g)};return d={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return h/(1e3/(g||60))},wake:function(){ws&&(!Bn&&fr()&&(Ue=Bn=window,pr=Ue.document||{},Ce.gsap=Ee,(Ue.gsapVersions||(Ue.gsapVersions=[])).push(Ee.version),Fs(Ji||Ue.GreenSockGlobals||!Ue.gsap&&Ue||{}),Js.forEach(Zs)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),l=c||function(g){return setTimeout(g,a-d.time*1e3+1|0)},Oi=1,_(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(u),Oi=0,l=Ni},lagSmoothing:function(g,D){e=g||1/0,t=Math.min(D||33,e)},fps:function(g){s=1e3/(g||240),a=d.time*1e3+s},add:function(g,D,E){var T=D?function(y,S,A,C){g(y,S,A,C),d.remove(T)}:g;return d.remove(g),o[E?"unshift":"push"](T),di(),T},remove:function(g,D){~(D=o.indexOf(g))&&o.splice(D,1)&&p>=D&&p--},_listeners:o},d}(),di=function(){return!Oi&&Te.wake()},w={},Ma=/^[\d.\-M][\d.\-,\s]/,xa=/["']/g,Ba=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],s=1,a=i.length,o,u,l;s<a;s++)u=i[s],o=s!==a-1?u.lastIndexOf(","):u.length,l=u.substr(0,o),t[n]=isNaN(l)?l.replace(xa,"").trim():+l,n=u.substr(o+1).trim();return t},ka=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},Ua=function(e){var t=(e+"").split("("),i=w[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Ba(t[1])]:ka(e).split(",").map(Us)):w._CE&&Ma.test(e)?w._CE("",e):i},no=function(e){return function(t){return 1-e(1-t)}},ro=function r(e,t){for(var i=e._first,n;i;)i instanceof fe?r(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?r(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},Ft=function(e,t){return e&&(z(e)?e:w[e]||Ua(e))||t},$t=function(e,t,i,n){i===void 0&&(i=function(u){return 1-t(1-u)}),n===void 0&&(n=function(u){return u<.5?t(u*2)/2:1-t((1-u)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:n},a;return ge(e,function(o){w[o]=Ce[o]=s,w[a=o.toLowerCase()]=i;for(var u in s)w[a+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=w[o+"."+u]=s[u]}),s},so=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},In=function r(e,t,i){var n=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/Mn*(Math.asin(1/n)||0),o=function(c){return c===1?1:n*Math.pow(2,-10*c)*fa((c-a)*s)+1},u=e==="out"?o:e==="in"?function(l){return 1-o(1-l)}:so(o);return s=Mn/s,u.config=function(l,c){return r(e,l,c)},u},Pn=function r(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},n=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:so(i);return n.config=function(s){return r(e,s)},n};ge("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;$t(r+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});w.Linear.easeNone=w.none=w.Linear.easeIn;$t("Elastic",In("in"),In("out"),In());(function(r,e){var t=1/e,i=2*t,n=2.5*t,s=function(o){return o<t?r*o*o:o<i?r*Math.pow(o-1.5/e,2)+.75:o<n?r*(o-=2.25/e)*o+.9375:r*Math.pow(o-2.625/e,2)+.984375};$t("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);$t("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});$t("Circ",function(r){return-(Ns(1-r*r)-1)});$t("Sine",function(r){return r===1?1:-ha(r*ca)+1});$t("Back",Pn("in"),Pn("out"),Pn());w.SteppedEase=w.steps=Ce.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),s=t?1:0,a=1-de;return function(o){return((n*ki(0,a,o)|0)+s)*i}}};ai.ease=w["quad.out"];ge("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return mr+=r+","+r+"Params,"});var oo=function(e,t){this.id=da++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Bs,this.set=t?t.getSetter:Ar},bi=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ci(this,+t.duration,1,1),this.data=t.data,H&&(this._ctx=H,H.data.push(this)),Oi||Te.wake()}var e=r.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,ci(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(di(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(mn(this,i),!s._dp||s.parent||$s(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&He(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===de||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),ks(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+qr(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+qr(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?li(this._tTime,s)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?tn(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(ki(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),gn(this),Sa(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(di(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==de&&(this._tTime-=de)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&He(n,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(_e(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?tn(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=ga);var n=oe;return oe=i,Er(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),oe=n,this},e.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Xr(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Xr(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(Ne(this,i),_e(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,_e(n)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-de)},e.eventCallback=function(i,n,s){var a=this.vars;return arguments.length>1?(n?(a[i]=n,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},e.then=function(i){var n=this;return new Promise(function(s){var a=z(i)?i:Gs,o=function(){var l=n.then;n.then=null,z(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=l),s(a),n.then=l};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},e.kill=function(){Si(this)},r}();Ie(bi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var fe=function(r){vs(e,r);function e(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=_e(i.sortChildren),$&&He(i.parent||$,Xe(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Vs(Xe(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(n,s,a){return Ci(0,arguments,this),this},t.from=function(n,s,a){return Ci(1,arguments,this),this},t.fromTo=function(n,s,a,o){return Ci(2,arguments,this),this},t.set=function(n,s,a){return s.duration=0,s.parent=this,Ai(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new K(n,s,Ne(this,a),1),this},t.call=function(n,s,a){return He(this,K.delayedCall(0,n,s),a)},t.staggerTo=function(n,s,a,o,u,l,c){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=l,a.onCompleteParams=c,a.parent=this,new K(n,a,Ne(this,u)),this},t.staggerFrom=function(n,s,a,o,u,l,c){return a.runBackwards=1,Ai(a).immediateRender=_e(a.immediateRender),this.staggerTo(n,s,a,o,u,l,c)},t.staggerFromTo=function(n,s,a,o,u,l,c,d){return o.startAt=a,Ai(o).immediateRender=_e(o.immediateRender),this.staggerTo(n,s,o,u,l,c,d)},t.render=function(n,s,a){var o=this._time,u=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=n<=0?0:Q(n),d=this._zTime<0!=n<0&&(this._initted||!l),h,p,_,f,g,D,E,T,y,S,A,C;if(this!==$&&c>u&&n>=0&&(c=u),c!==this._tTime||a||d){if(o!==this._time&&l&&(c+=this._time-o,n+=this._time-o),h=c,y=this._start,T=this._ts,D=!T,d&&(l||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(A=this._yoyo,g=l+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,a);if(h=Q(c%g),c===u?(f=this._repeat,h=l):(S=Q(c/g),f=~~S,f&&f===S&&(h=l,f--),h>l&&(h=l)),S=li(this._tTime,g),!o&&this._tTime&&S!==f&&this._tTime-S*g-this._dur<=0&&(S=f),A&&f&1&&(h=l-h,C=1),f!==S&&!this._lock){var I=A&&S&1,m=I===(A&&f&1);if(f<S&&(I=!I),o=I?0:c%l?l:c,this._lock=1,this.render(o||(C?0:Q(f*g)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&ye(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),o&&o!==this._time||D!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,u=this._tDur,m&&(this._lock=2,o=I?l:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!D)return this;ro(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(E=Ca(this,Q(o),Q(h)),E&&(c-=h-(h=E._start))),this._tTime=c,this._time=h,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&c&&!s&&!S&&(ye(this,"onStart"),this._tTime!==c))return this;if(h>=o&&n>=0)for(p=this._first;p;){if(_=p._next,(p._act||h>=p._start)&&p._ts&&E!==p){if(p.parent!==this)return this.render(n,s,a);if(p.render(p._ts>0?(h-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(h-p._start)*p._ts,s,a),h!==this._time||!this._ts&&!D){E=0,_&&(c+=this._zTime=-1e-8);break}}p=_}else{p=this._last;for(var v=n<0?n:h;p;){if(_=p._prev,(p._act||v<=p._end)&&p._ts&&E!==p){if(p.parent!==this)return this.render(n,s,a);if(p.render(p._ts>0?(v-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(v-p._start)*p._ts,s,a||oe&&Er(p)),h!==this._time||!this._ts&&!D){E=0,_&&(c+=this._zTime=v?-1e-8:de);break}}p=_}}if(E&&!s&&(this.pause(),E.render(h>=o?0:-1e-8)._zTime=h>=o?1:-1,this._ts))return this._start=y,gn(this),this.render(n,s,a);this._onUpdate&&!s&&ye(this,"onUpdate",!0),(c===u&&this._tTime>=this.totalDuration()||!c&&o)&&(y===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((n||!l)&&(c===u&&this._ts>0||!c&&this._ts<0)&&_t(this,1),!s&&!(n<0&&!o)&&(c||o||!u)&&(ye(this,c===u&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<u&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,s){var a=this;if(tt(s)||(s=Ne(this,s,n)),!(n instanceof bi)){if(he(n))return n.forEach(function(o){return a.add(o,s)}),this;if(ne(n))return this.addLabel(n,s);if(z(n))n=K.delayedCall(0,n);else return this}return this!==n?He(this,n,s):this},t.getChildren=function(n,s,a,o){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-1e8);for(var u=[],l=this._first;l;)l._start>=o&&(l instanceof K?s&&u.push(l):(a&&u.push(l),n&&u.push.apply(u,l.getChildren(!0,s,a)))),l=l._next;return u},t.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},t.remove=function(n){return ne(n)?this.removeLabel(n):z(n)?this.killTweensOf(n):(n.parent===this&&_n(this,n),n===this._recent&&(this._recent=this._last),wt(this))},t.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Q(Te.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},t.addLabel=function(n,s){return this.labels[n]=Ne(this,s),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,s,a){var o=K.delayedCall(0,s||Ni,a);return o.data="isPause",this._hasPause=1,He(this,o,Ne(this,n))},t.removePause=function(n){var s=this._first;for(n=Ne(this,n);s;)s._start===n&&s.data==="isPause"&&_t(s),s=s._next},t.killTweensOf=function(n,s,a){for(var o=this.getTweensOf(n,a),u=o.length;u--;)ut!==o[u]&&o[u].kill(n,s);return this},t.getTweensOf=function(n,s){for(var a=[],o=Oe(n),u=this._first,l=tt(s),c;u;)u instanceof K?ma(u._targets,o)&&(l?(!ut||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&a.push(u):(c=u.getTweensOf(o,s)).length&&a.push.apply(a,c),u=u._next;return a},t.tweenTo=function(n,s){s=s||{};var a=this,o=Ne(a,n),u=s,l=u.startAt,c=u.onStart,d=u.onStartParams,h=u.immediateRender,p,_=K.to(a,Ie({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale())||de,onStart:function(){if(a.pause(),!p){var g=s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale());_._dur!==g&&ci(_,g,0,1).render(_._time,!0,!0),p=1}c&&c.apply(_,d||[])}},s));return h?_.render(0):_},t.tweenFromTo=function(n,s,a){return this.tweenTo(s,Ie({startAt:{time:Ne(this,n)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),Kr(this,Ne(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),Kr(this,Ne(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+de)},t.shiftChildren=function(n,s,a){a===void 0&&(a=0);for(var o=this._first,u=this.labels,l;o;)o._start>=a&&(o._start+=n,o._end+=n),o=o._next;if(s)for(l in u)u[l]>=a&&(u[l]+=n);return wt(this)},t.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),wt(this)},t.totalDuration=function(n){var s=0,a=this,o=a._last,u=ze,l,c,d;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(d=a.parent;o;)l=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>u&&a._sort&&o._ts&&!a._lock?(a._lock=1,He(a,o,c-o._delay,1)._lock=0):u=c,c<0&&o._ts&&(s-=c,(!d&&!a._dp||d&&d.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),u=0),o._end>s&&o._ts&&(s=o._end),o=l;ci(a,a===$&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(n){if($._ts&&(ks($,tn(n,$)),xs=Te.frame),Te.frame>=Wr){Wr+=Ae.autoSleep||120;var s=$._first;if((!s||!s._ts)&&Ae.autoSleep&&Te._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Te.sleep()}}},e}(bi);Ie(fe.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ga=function(e,t,i,n,s,a,o){var u=new me(this._pt,e,t,0,1,fo,null,s),l=0,c=0,d,h,p,_,f,g,D,E;for(u.b=i,u.e=n,i+="",n+="",(D=~n.indexOf("random("))&&(n=Li(n)),a&&(E=[i,n],a(E,e,t),i=E[0],n=E[1]),h=i.match(yn)||[];d=yn.exec(n);)_=d[0],f=n.substring(l,d.index),p?p=(p+1)%5:f.substr(-5)==="rgba("&&(p=1),_!==h[c++]&&(g=parseFloat(h[c-1])||0,u._pt={_next:u._pt,p:f||c===1?f:",",s:g,c:_.charAt(1)==="="?ni(g,_)-g:parseFloat(_)-g,m:p&&p<4?Math.round:0},l=yn.lastIndex);return u.c=l<n.length?n.substring(l,n.length):"",u.fp=o,(bs.test(n)||D)&&(u.e=0),this._pt=u,u},Sr=function(e,t,i,n,s,a,o,u,l,c){z(n)&&(n=n(s||0,e,a));var d=e[t],h=i!=="get"?i:z(d)?l?e[t.indexOf("set")||!z(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,p=z(d)?l?Ya:co:yr,_;if(ne(n)&&(~n.indexOf("random(")&&(n=Li(n)),n.charAt(1)==="="&&(_=ni(h,n)+(ce(h)||0),(_||_===0)&&(n=_))),!c||h!==n||zn)return!isNaN(h*n)&&n!==""?(_=new me(this._pt,e,t,+h||0,n-(h||0),typeof d=="boolean"?ja:ho,0,p),l&&(_.fp=l),o&&_.modifier(o,this,e),this._pt=_):(!d&&!(t in e)&&_r(t,n),Ga.call(this,e,t,h,n,p,u||Ae.stringFilter,l))},Ha=function(e,t,i,n,s){if(z(e)&&(e=Ii(e,s,t,i,n)),!Ye(e)||e.style&&e.nodeType||he(e)||Ls(e))return ne(e)?Ii(e,s,t,i,n):e;var a={},o;for(o in e)a[o]=Ii(e[o],s,t,i,n);return a},ao=function(e,t,i,n,s,a){var o,u,l,c;if(Se[e]&&(o=new Se[e]).init(s,o.rawVars?t[e]:Ha(t[e],n,s,a,i),i,n,a)!==!1&&(i._pt=u=new me(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==Zt))for(l=i._ptLookup[i._targets.indexOf(s)],c=o._props.length;c--;)l[o._props[c]]=u;return o},ut,zn,Tr=function r(e,t,i){var n=e.vars,s=n.ease,a=n.startAt,o=n.immediateRender,u=n.lazy,l=n.onUpdate,c=n.runBackwards,d=n.yoyoEase,h=n.keyframes,p=n.autoRevert,_=e._dur,f=e._startAt,g=e._targets,D=e.parent,E=D&&D.data==="nested"?D.vars.targets:g,T=e._overwrite==="auto"&&!dr,y=e.timeline,S,A,C,I,m,v,O,F,M,q,W,x,X;if(y&&(!h||!s)&&(s="none"),e._ease=Ft(s,ai.ease),e._yEase=d?no(Ft(d===!0?s:d,ai.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!y&&!!n.runBackwards,!y||h&&!n.stagger){if(F=g[0]?Rt(g[0]).harness:0,x=F&&n[F.prop],S=en(n,gr),f&&(f._zTime<0&&f.progress(1),t<0&&c&&o&&!p?f.render(-1,!0):f.revert(c&&_?ji:_a),f._lazy=0),a){if(_t(e._startAt=K.set(g,Ie({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!f&&_e(u),startAt:null,delay:0,onUpdate:l&&function(){return ye(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(oe||!o&&!p)&&e._startAt.revert(ji),o&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(c&&_&&!f){if(t&&(o=!1),C=Ie({overwrite:!1,data:"isFromStart",lazy:o&&!f&&_e(u),immediateRender:o,stagger:0,parent:D},S),x&&(C[F.prop]=x),_t(e._startAt=K.set(g,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(oe?e._startAt.revert(ji):e._startAt.render(-1,!0)),e._zTime=t,!o)r(e._startAt,de,de);else if(!t)return}for(e._pt=e._ptCache=0,u=_&&_e(u)||u&&!_,A=0;A<g.length;A++){if(m=g[A],O=m._gsap||Dr(g)[A]._gsap,e._ptLookup[A]=q={},kn[O.id]&&ht.length&&Zi(),W=E===g?A:E.indexOf(m),F&&(M=new F).init(m,x||S,e,W,E)!==!1&&(e._pt=I=new me(e._pt,m,M.name,0,1,M.render,M,0,M.priority),M._props.forEach(function(Z){q[Z]=I}),M.priority&&(v=1)),!F||x)for(C in S)Se[C]&&(M=ao(C,S,e,W,m,E))?M.priority&&(v=1):q[C]=I=Sr.call(e,m,C,"get",S[C],W,E,0,n.stringFilter);e._op&&e._op[A]&&e.kill(m,e._op[A]),T&&e._pt&&(ut=e,$.killTweensOf(m,q,e.globalTime(t)),X=!e.parent,ut=0),e._pt&&u&&(kn[O.id]=1)}v&&po(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!X,h&&t<=0&&y.render(ze,!0,!0)},$a=function(e,t,i,n,s,a,o,u){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,d,h,p;if(!l)for(l=e._ptCache[t]=[],h=e._ptLookup,p=e._targets.length;p--;){if(c=h[p][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return zn=1,e.vars[t]="+=0",Tr(e,o),zn=0,u?vi(t+" not eligible for reset"):1;l.push(c)}for(p=l.length;p--;)d=l[p],c=d._pt||d,c.s=(n||n===0)&&!s?n:c.s+(n||0)+a*c.c,c.c=i-c.s,d.e&&(d.e=j(i)+ce(d.e)),d.b&&(d.b=c.s+ce(d.b))},Va=function(e,t){var i=e[0]?Rt(e[0]).harness:0,n=i&&i.aliases,s,a,o,u;if(!n)return t;s=ui({},t);for(a in n)if(a in s)for(u=n[a].split(","),o=u.length;o--;)s[u[o]]=s[a];return s},za=function(e,t,i,n){var s=t.ease||n||"power1.inOut",a,o;if(he(t))o=i[e]||(i[e]=[]),t.forEach(function(u,l){return o.push({t:l/(t.length-1)*100,v:u,e:s})});else for(a in t)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},Ii=function(e,t,i,n,s){return z(e)?e.call(t,i,n,s):ne(e)&&~e.indexOf("random(")?Li(e):e},uo=mr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",lo={};ge(uo+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return lo[r]=1});var K=function(r){vs(e,r);function e(i,n,s,a){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=r.call(this,a?n:Ai(n))||this;var u=o.vars,l=u.duration,c=u.delay,d=u.immediateRender,h=u.stagger,p=u.overwrite,_=u.keyframes,f=u.defaults,g=u.scrollTrigger,D=u.yoyoEase,E=n.parent||$,T=(he(i)||Ls(i)?tt(i[0]):"length"in n)?[i]:Oe(i),y,S,A,C,I,m,v,O;if(o._targets=T.length?Dr(T):vi("GSAP target "+i+" not found. https://gsap.com",!Ae.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,_||h||Hi(l)||Hi(c)){if(n=o.vars,y=o.timeline=new fe({data:"nested",defaults:f||{},targets:E&&E.data==="nested"?E.vars.targets:T}),y.kill(),y.parent=y._dp=Xe(o),y._start=0,h||Hi(l)||Hi(c)){if(C=T.length,v=h&&js(h),Ye(h))for(I in h)~uo.indexOf(I)&&(O||(O={}),O[I]=h[I]);for(S=0;S<C;S++)A=en(n,lo),A.stagger=0,D&&(A.yoyoEase=D),O&&ui(A,O),m=T[S],A.duration=+Ii(l,Xe(o),S,m,T),A.delay=(+Ii(c,Xe(o),S,m,T)||0)-o._delay,!h&&C===1&&A.delay&&(o._delay=c=A.delay,o._start+=c,A.delay=0),y.to(m,A,v?v(S,m,T):0),y._ease=w.none;y.duration()?l=c=0:o.timeline=0}else if(_){Ai(Ie(y.vars.defaults,{ease:"none"})),y._ease=Ft(_.ease||n.ease||"none");var F=0,M,q,W;if(he(_))_.forEach(function(x){return y.to(T,x,">")}),y.duration();else{A={};for(I in _)I==="ease"||I==="easeEach"||za(I,_[I],A,_.easeEach);for(I in A)for(M=A[I].sort(function(x,X){return x.t-X.t}),F=0,S=0;S<M.length;S++)q=M[S],W={ease:q.e,duration:(q.t-(S?M[S-1].t:0))/100*l},W[I]=q.v,y.to(T,W,F),F+=W.duration;y.duration()<l&&y.to({},{duration:l-y.duration()})}}l||o.duration(l=y.duration())}else o.timeline=0;return p===!0&&!dr&&(ut=Xe(o),$.killTweensOf(T),ut=0),He(E,Xe(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(d||!l&&!_&&o._start===Q(E._time)&&_e(d)&&Ta(Xe(o))&&E.data!=="nested")&&(o._tTime=-1e-8,o.render(Math.max(0,-c)||0)),g&&Vs(Xe(o),g),o}var t=e.prototype;return t.render=function(n,s,a){var o=this._time,u=this._tDur,l=this._dur,c=n<0,d=n>u-de&&!c?u:n<de?0:n,h,p,_,f,g,D,E,T,y;if(!l)Aa(this,n,s,a);else if(d!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(h=d,T=this.timeline,this._repeat){if(f=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(f*100+n,s,a);if(h=Q(d%f),d===u?(_=this._repeat,h=l):(g=Q(d/f),_=~~g,_&&_===g?(h=l,_--):h>l&&(h=l)),D=this._yoyo&&_&1,D&&(y=this._yEase,h=l-h),g=li(this._tTime,f),h===o&&!a&&this._initted&&_===g)return this._tTime=d,this;_!==g&&(T&&this._yEase&&ro(T,D),this.vars.repeatRefresh&&!D&&!this._lock&&h!==f&&this._initted&&(this._lock=a=1,this.render(Q(f*_),!0).invalidate()._lock=0))}if(!this._initted){if(zs(this,c?n:h,a,s,d))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&_!==g))return this;if(l!==this._dur)return this.render(n,s,a)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(y||this._ease)(h/l),this._from&&(this.ratio=E=1-E),!o&&d&&!s&&!g&&(ye(this,"onStart"),this._tTime!==d))return this;for(p=this._pt;p;)p.r(E,p.d),p=p._next;T&&T.render(n<0?n:T._dur*T._ease(h/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(c&&Un(this,n,s,a),ye(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!s&&this.parent&&ye(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(c&&!this._onUpdate&&Un(this,n,!0,!0),(n||!l)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&_t(this,1),!s&&!(c&&!o)&&(d||o||D)&&(ye(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},t.resetTo=function(n,s,a,o,u){Oi||Te.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Tr(this,l),c=this._ease(l/this._dur),$a(this,n,s,a,o,c,l,u)?this.resetTo(n,s,a,o,1):(mn(this,0),this.parent||Hs(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Si(this):this.scrollTrigger&&this.scrollTrigger.kill(!!oe),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,ut&&ut.vars.overwrite!==!0)._first||Si(this),this.parent&&a!==this.timeline.totalDuration()&&ci(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,u=n?Oe(n):o,l=this._ptLookup,c=this._pt,d,h,p,_,f,g,D;if((!s||s==="all")&&Ea(o,u))return s==="all"&&(this._pt=0),Si(this);for(d=this._op=this._op||[],s!=="all"&&(ne(s)&&(f={},ge(s,function(E){return f[E]=1}),s=f),s=Va(o,s)),D=o.length;D--;)if(~u.indexOf(o[D])){h=l[D],s==="all"?(d[D]=s,_=h,p={}):(p=d[D]=d[D]||{},_=s);for(f in _)g=h&&h[f],g&&((!("kill"in g.d)||g.d.kill(f)===!0)&&_n(this,g,"_pt"),delete h[f]),p!=="all"&&(p[f]=1)}return this._initted&&!this._pt&&c&&Si(this),this},e.to=function(n,s){return new e(n,s,arguments[2])},e.from=function(n,s){return Ci(1,arguments)},e.delayedCall=function(n,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(n,s,a){return Ci(2,arguments)},e.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(n,s)},e.killTweensOf=function(n,s,a){return $.killTweensOf(n,s,a)},e}(bi);Ie(K.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ge("staggerTo,staggerFrom,staggerFromTo",function(r){K[r]=function(){var e=new fe,t=Hn.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var yr=function(e,t,i){return e[t]=i},co=function(e,t,i){return e[t](i)},Ya=function(e,t,i,n){return e[t](n.fp,i)},Wa=function(e,t,i){return e.setAttribute(t,i)},Ar=function(e,t){return z(e[t])?co:hr(e[t])&&e.setAttribute?Wa:yr},ho=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ja=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},fo=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Cr=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},qa=function(e,t,i,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(e,t,i),s=a},Xa=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?_n(this,t,"_pt"):t.dep||(i=1),t=n;return!i},Ka=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},po=function(e){for(var t=e._pt,i,n,s,a;t;){for(i=t._next,n=s;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:a)?t._prev._next=t:s=t,(t._next=n)?n._prev=t:a=t,t=i}e._pt=s},me=function(){function r(t,i,n,s,a,o,u,l,c){this.t=i,this.s=s,this.c=a,this.p=n,this.r=o||ho,this.d=u||this,this.set=l||yr,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=Ka,this.m=i,this.mt=s,this.tween=n},r}();ge(mr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return gr[r]=1});Ce.TweenMax=Ce.TweenLite=K;Ce.TimelineLite=Ce.TimelineMax=fe;$=new fe({sortChildren:!1,defaults:ai,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ae.stringFilter=io;var Mt=[],Xi={},Qa=[],Jr=0,Ja=0,vn=function(e){return(Xi[e]||Qa).map(function(t){return t()})},Yn=function(){var e=Date.now(),t=[];e-Jr>2&&(vn("matchMediaInit"),Mt.forEach(function(i){var n=i.queries,s=i.conditions,a,o,u,l;for(o in n)a=Ue.matchMedia(n[o]).matches,a&&(u=1),a!==s[o]&&(s[o]=a,l=1);l&&(i.revert(),u&&t.push(i))}),vn("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Jr=e,vn("matchMedia"))},_o=function(){function r(t,i){this.selector=i&&$n(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ja++,t&&this.add(t)}var e=r.prototype;return e.add=function(i,n,s){z(i)&&(s=n,n=i,i=z);var a=this,o=function(){var l=H,c=a.selector,d;return l&&l!==a&&l.data.push(a),s&&(a.selector=$n(s)),H=a,d=n.apply(a,arguments),z(d)&&a._r.push(d),H=l,a.selector=c,a.isReverted=!1,d};return a.last=o,i===z?o(a,function(u){return a.add(null,u)}):i?a[i]=o:o},e.ignore=function(i){var n=H;H=null,i(this),H=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof K&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var s=this;if(i?function(){for(var o=s.getTweens(),u=s.data.length,l;u--;)l=s.data[u],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}));for(o.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,d){return d.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),u=s.data.length;u--;)l=s.data[u],l instanceof fe?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof K)&&l.revert&&l.revert(i);s._r.forEach(function(c){return c(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),n)for(var a=Mt.length;a--;)Mt[a].id===this.id&&Mt.splice(a,1)},e.revert=function(i){this.kill(i||{})},r}(),Za=function(){function r(t){this.contexts=[],this.scope=t,H&&H.data.push(this)}var e=r.prototype;return e.add=function(i,n,s){Ye(i)||(i={matches:i});var a=new _o(0,s||this.scope),o=a.conditions={},u,l,c;H&&!a.selector&&(a.selector=H.selector),this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(l in i)l==="all"?c=1:(u=Ue.matchMedia(i[l]),u&&(Mt.indexOf(a)<0&&Mt.push(a),(o[l]=u.matches)&&(c=1),u.addListener?u.addListener(Yn):u.addEventListener("change",Yn)));return c&&n(a,function(d){return a.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),nn={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return Zs(n)})},timeline:function(e){return new fe(e)},getTweensOf:function(e,t){return $.getTweensOf(e,t)},getProperty:function(e,t,i,n){ne(e)&&(e=Oe(e)[0]);var s=Rt(e||{}).get,a=i?Gs:Us;return i==="native"&&(i=""),e&&(t?a((Se[t]&&Se[t].get||s)(e,t,i,n)):function(o,u,l){return a((Se[o]&&Se[o].get||s)(e,o,u,l))})},quickSetter:function(e,t,i){if(e=Oe(e),e.length>1){var n=e.map(function(c){return Ee.quickSetter(c,t,i)}),s=n.length;return function(c){for(var d=s;d--;)n[d](c)}}e=e[0]||{};var a=Se[t],o=Rt(e),u=o.harness&&(o.harness.aliases||{})[t]||t,l=a?function(c){var d=new a;Zt._pt=0,d.init(e,i?c+i:c,Zt,0,[e]),d.render(1,d),Zt._pt&&Cr(1,Zt)}:o.set(e,u);return a?l:function(c){return l(e,u,i?c+i:c,o,1)}},quickTo:function(e,t,i){var n,s=Ee.to(e,Ie((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),a=function(u,l,c){return s.resetTo(t,u,l,c)};return a.tween=s,a},isTweening:function(e){return $.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ft(e.ease,ai.ease)),jr(ai,e||{})},config:function(e){return jr(Ae,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,s=e.defaults,a=e.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!Se[o]&&!Ce[o]&&vi(t+" effect requires "+o+" plugin.")}),An[t]=function(o,u,l){return i(Oe(o),Ie(u||{},s),l)},a&&(fe.prototype[t]=function(o,u,l){return this.add(An[t](o,Ye(u)?u:(l=u)&&{},this),l)})},registerEase:function(e,t){w[e]=Ft(t)},parseEase:function(e,t){return arguments.length?Ft(e,t):w},getById:function(e){return $.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new fe(e),n,s;for(i.smoothChildTiming=_e(e.smoothChildTiming),$.remove(i),i._dp=0,i._time=i._tTime=$._time,n=$._first;n;)s=n._next,(t||!(!n._dur&&n instanceof K&&n.vars.onComplete===n._targets[0]))&&He(i,n,n._start-n._delay),n=s;return He($,i,0),i},context:function(e,t){return e?new _o(e,t):H},matchMedia:function(e){return new Za(e)},matchMediaRefresh:function(){return Mt.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||Yn()},addEventListener:function(e,t){var i=Xi[e]||(Xi[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Xi[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:ba,wrapYoyo:Ra,distribute:js,random:Xs,snap:qs,normalize:Oa,getUnit:ce,clamp:Pa,splitColor:eo,toArray:Oe,selector:$n,mapRange:Qs,pipe:Na,unitize:La,interpolate:wa,shuffle:Ws},install:Fs,effects:An,ticker:Te,updateRoot:fe.updateRoot,plugins:Se,globalTimeline:$,core:{PropTween:me,globals:Ms,Tween:K,Timeline:fe,Animation:bi,getCache:Rt,_removeLinkedListItem:_n,reverting:function(){return oe},context:function(e){return e&&H&&(H.data.push(e),e._ctx=H),H},suppressOverwrites:function(e){return dr=e}}};ge("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return nn[r]=K[r]});Te.add(fe.updateRoot);Zt=nn.to({},{duration:0});var eu=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},tu=function(e,t){var i=e._targets,n,s,a;for(n in t)for(s=i.length;s--;)a=e._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=eu(a,n)),a&&a.modifier&&a.modifier(t[n],e,i[s],n))},Nn=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,s,a){a._onInit=function(o){var u,l;if(ne(s)&&(u={},ge(s,function(c){return u[c]=1}),s=u),t){u={};for(l in s)u[l]=t(s[l]);s=u}tu(o,s)}}}},Ee=nn.registerPlugin({name:"attr",init:function(e,t,i,n,s){var a,o,u;this.tween=i;for(a in t)u=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(u||0)+"",t[a],n,s,0,0,a),o.op=a,o.b=u,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)oe?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Nn("roundProps",Vn),Nn("modifiers"),Nn("snap",qs))||nn;K.version=fe.version=Ee.version="3.13.0";ws=1;fr()&&di();w.Power0;w.Power1;w.Power2;w.Power3;w.Power4;w.Linear;w.Quad;w.Cubic;w.Quart;w.Quint;w.Strong;w.Elastic;w.Back;w.SteppedEase;w.Bounce;w.Sine;w.Expo;w.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Zr,lt,ri,Ir,Ot,es,Pr,iu=function(){return typeof window<"u"},it={},It=180/Math.PI,si=Math.PI/180,Vt=Math.atan2,ts=1e8,vr=/([A-Z])/g,nu=/(left|right|width|margin|padding|x)/i,ru=/[\s,\(]\S/,$e={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wn=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},su=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},ou=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},au=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},go=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},mo=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},uu=function(e,t,i){return e.style[t]=i},lu=function(e,t,i){return e.style.setProperty(t,i)},cu=function(e,t,i){return e._gsap[t]=i},du=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},hu=function(e,t,i,n,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},fu=function(e,t,i,n,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},V="transform",De=V+"Origin",pu=function r(e,t){var i=this,n=this.target,s=n.style,a=n._gsap;if(e in it&&s){if(this.tfm=this.tfm||{},e!=="transform")e=$e[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=Ke(n,o)}):this.tfm[e]=a.x?a[e]:Ke(n,e),e===De&&(this.tfm.zOrigin=a.zOrigin);else return $e.transform.split(",").forEach(function(o){return r.call(i,o,t)});if(this.props.indexOf(V)>=0)return;a.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(De,t,"")),e=V}(s||t)&&this.props.push(e,t,s[e])},Do=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},_u=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(vr,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=Pr(),(!s||!s.isStart)&&!i[V]&&(Do(i),n.zOrigin&&i[De]&&(i[De]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},Eo=function(e,t){var i={target:e,props:[],revert:_u,save:pu};return e._gsap||Ee.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},So,jn=function(e,t){var i=lt.createElementNS?lt.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):lt.createElement(e);return i&&i.style?i:lt.createElement(e)},be=function r(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(vr,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&r(e,hi(t)||t,1)||""},is="O,Moz,ms,Ms,Webkit".split(","),hi=function(e,t,i){var n=t||Ot,s=n.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(is[a]+e in s););return a<0?null:(a===3?"ms":a>=0?is[a]:"")+e},qn=function(){iu()&&window.document&&(Zr=window,lt=Zr.document,ri=lt.documentElement,Ot=jn("div")||{style:{}},jn("div"),V=hi(V),De=V+"Origin",Ot.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",So=!!hi("perspective"),Pr=Ee.core.reverting,Ir=1)},ns=function(e){var t=e.ownerSVGElement,i=jn("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),s;n.style.display="block",i.appendChild(n),ri.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),ri.removeChild(i),s},rs=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},To=function(e){var t,i;try{t=e.getBBox()}catch{t=ns(e),i=1}return t&&(t.width||t.height)||i||(t=ns(e)),t&&!t.width&&!t.x&&!t.y?{x:+rs(e,["x","cx","x1"])||0,y:+rs(e,["y","cy","y1"])||0,width:0,height:0}:t},yo=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&To(e))},kt=function(e,t){if(t){var i=e.style,n;t in it&&t!==De&&(t=V),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(vr,"-$1").toLowerCase())):i.removeAttribute(t)}},ct=function(e,t,i,n,s,a){var o=new me(e._pt,t,i,0,1,a?mo:go);return e._pt=o,o.b=n,o.e=s,e._props.push(i),o},ss={deg:1,rad:1,turn:1},gu={grid:1,flex:1},gt=function r(e,t,i,n){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Ot.style,u=nu.test(t),l=e.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(u?"Width":"Height"),d=100,h=n==="px",p=n==="%",_,f,g,D;if(n===a||!s||ss[n]||ss[a])return s;if(a!=="px"&&!h&&(s=r(e,t,i,"px")),D=e.getCTM&&yo(e),(p||a==="%")&&(it[t]||~t.indexOf("adius")))return _=D?e.getBBox()[u?"width":"height"]:e[c],j(p?s/_*d:s/100*_);if(o[u?"width":"height"]=d+(h?a:n),f=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!l?e:e.parentNode,D&&(f=(e.ownerSVGElement||{}).parentNode),(!f||f===lt||!f.appendChild)&&(f=lt.body),g=f._gsap,g&&p&&g.width&&u&&g.time===Te.time&&!g.uncache)return j(s/g.width*d);if(p&&(t==="height"||t==="width")){var E=e.style[t];e.style[t]=d+n,_=e[c],E?e.style[t]=E:kt(e,t)}else(p||a==="%")&&!gu[be(f,"display")]&&(o.position=be(e,"position")),f===e&&(o.position="static"),f.appendChild(Ot),_=Ot[c],f.removeChild(Ot),o.position="absolute";return u&&p&&(g=Rt(f),g.time=Te.time,g.width=f[c]),j(h?_*s/d:_&&s?d/_*s:0)},Ke=function(e,t,i,n){var s;return Ir||qn(),t in $e&&t!=="transform"&&(t=$e[t],~t.indexOf(",")&&(t=t.split(",")[0])),it[t]&&t!=="transform"?(s=wi(e,n),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:sn(be(e,De))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=rn[t]&&rn[t](e,t,i)||be(e,t)||Bs(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?gt(e,t,s,i)+i:s},mu=function(e,t,i,n){if(!i||i==="none"){var s=hi(t,e,1),a=s&&be(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=be(e,"borderTopColor"))}var o=new me(this._pt,e.style,t,0,1,fo),u=0,l=0,c,d,h,p,_,f,g,D,E,T,y,S;if(o.b=i,o.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=be(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(f=e.style[t],e.style[t]=n,n=be(e,t)||n,f?e.style[t]=f:kt(e,t)),c=[i,n],io(c),i=c[0],n=c[1],h=i.match(Jt)||[],S=n.match(Jt)||[],S.length){for(;d=Jt.exec(n);)g=d[0],E=n.substring(u,d.index),_?_=(_+1)%5:(E.substr(-5)==="rgba("||E.substr(-5)==="hsla(")&&(_=1),g!==(f=h[l++]||"")&&(p=parseFloat(f)||0,y=f.substr((p+"").length),g.charAt(1)==="="&&(g=ni(p,g)+y),D=parseFloat(g),T=g.substr((D+"").length),u=Jt.lastIndex-T.length,T||(T=T||Ae.units[t]||y,u===n.length&&(n+=T,o.e+=T)),y!==T&&(p=gt(e,t,f,T)||0),o._pt={_next:o._pt,p:E||l===1?E:",",s:p,c:D-p,m:_&&_<4||t==="zIndex"?Math.round:0});o.c=u<n.length?n.substring(u,n.length):""}else o.r=t==="display"&&n==="none"?mo:go;return bs.test(n)&&(o.e=0),this._pt=o,o},os={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Du=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=os[i]||i,t[1]=os[n]||n,t.join(" ")},Eu=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,s=t.u,a=i._gsap,o,u,l;if(s==="all"||s===!0)n.cssText="",u=1;else for(s=s.split(","),l=s.length;--l>-1;)o=s[l],it[o]&&(u=1,o=o==="transformOrigin"?De:V),kt(i,o);u&&(kt(i,V),a&&(a.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",wi(i,1),a.uncache=1,Do(n)))}},rn={clearProps:function(e,t,i,n,s){if(s.data!=="isFromStart"){var a=e._pt=new me(e._pt,t,i,0,0,Eu);return a.u=n,a.pr=-10,a.tween=s,e._props.push(i),1}}},Ri=[1,0,0,1,0,0],Ao={},Co=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},as=function(e){var t=be(e,V);return Co(t)?Ri:t.substr(7).match(Os).map(j)},Nr=function(e,t){var i=e._gsap||Rt(e),n=e.style,s=as(e),a,o,u,l;return i.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Ri:s):(s===Ri&&!e.offsetParent&&e!==ri&&!i.svg&&(u=n.display,n.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(l=1,o=e.nextElementSibling,ri.appendChild(e)),s=as(e),u?n.display=u:kt(e,"display"),l&&(o?a.insertBefore(e,o):a?a.appendChild(e):ri.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Xn=function(e,t,i,n,s,a){var o=e._gsap,u=s||Nr(e,!0),l=o.xOrigin||0,c=o.yOrigin||0,d=o.xOffset||0,h=o.yOffset||0,p=u[0],_=u[1],f=u[2],g=u[3],D=u[4],E=u[5],T=t.split(" "),y=parseFloat(T[0])||0,S=parseFloat(T[1])||0,A,C,I,m;i?u!==Ri&&(C=p*g-_*f)&&(I=y*(g/C)+S*(-f/C)+(f*E-g*D)/C,m=y*(-_/C)+S*(p/C)-(p*E-_*D)/C,y=I,S=m):(A=To(e),y=A.x+(~T[0].indexOf("%")?y/100*A.width:y),S=A.y+(~(T[1]||T[0]).indexOf("%")?S/100*A.height:S)),n||n!==!1&&o.smooth?(D=y-l,E=S-c,o.xOffset=d+(D*p+E*f)-D,o.yOffset=h+(D*_+E*g)-E):o.xOffset=o.yOffset=0,o.xOrigin=y,o.yOrigin=S,o.smooth=!!n,o.origin=t,o.originIsAbsolute=!!i,e.style[De]="0px 0px",a&&(ct(a,o,"xOrigin",l,y),ct(a,o,"yOrigin",c,S),ct(a,o,"xOffset",d,o.xOffset),ct(a,o,"yOffset",h,o.yOffset)),e.setAttribute("data-svg-origin",y+" "+S)},wi=function(e,t){var i=e._gsap||new oo(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,s=i.scaleX<0,a="px",o="deg",u=getComputedStyle(e),l=be(e,De)||"0",c,d,h,p,_,f,g,D,E,T,y,S,A,C,I,m,v,O,F,M,q,W,x,X,Z,st,Tt,Pe,xe,We,je,yt;return c=d=h=f=g=D=E=T=y=0,p=_=1,i.svg=!!(e.getCTM&&yo(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(n[V]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[V]!=="none"?u[V]:"")),n.scale=n.rotate=n.translate="none"),C=Nr(e,i.svg),i.svg&&(i.uncache?(Z=e.getBBox(),l=i.xOrigin-Z.x+"px "+(i.yOrigin-Z.y)+"px",X=""):X=!t&&e.getAttribute("data-svg-origin"),Xn(e,X||l,!!X||i.originIsAbsolute,i.smooth!==!1,C)),S=i.xOrigin||0,A=i.yOrigin||0,C!==Ri&&(O=C[0],F=C[1],M=C[2],q=C[3],c=W=C[4],d=x=C[5],C.length===6?(p=Math.sqrt(O*O+F*F),_=Math.sqrt(q*q+M*M),f=O||F?Vt(F,O)*It:0,E=M||q?Vt(M,q)*It+f:0,E&&(_*=Math.abs(Math.cos(E*si))),i.svg&&(c-=S-(S*O+A*M),d-=A-(S*F+A*q))):(yt=C[6],We=C[7],Tt=C[8],Pe=C[9],xe=C[10],je=C[11],c=C[12],d=C[13],h=C[14],I=Vt(yt,xe),g=I*It,I&&(m=Math.cos(-I),v=Math.sin(-I),X=W*m+Tt*v,Z=x*m+Pe*v,st=yt*m+xe*v,Tt=W*-v+Tt*m,Pe=x*-v+Pe*m,xe=yt*-v+xe*m,je=We*-v+je*m,W=X,x=Z,yt=st),I=Vt(-M,xe),D=I*It,I&&(m=Math.cos(-I),v=Math.sin(-I),X=O*m-Tt*v,Z=F*m-Pe*v,st=M*m-xe*v,je=q*v+je*m,O=X,F=Z,M=st),I=Vt(F,O),f=I*It,I&&(m=Math.cos(I),v=Math.sin(I),X=O*m+F*v,Z=W*m+x*v,F=F*m-O*v,x=x*m-W*v,O=X,W=Z),g&&Math.abs(g)+Math.abs(f)>359.9&&(g=f=0,D=180-D),p=j(Math.sqrt(O*O+F*F+M*M)),_=j(Math.sqrt(x*x+yt*yt)),I=Vt(W,x),E=Math.abs(I)>2e-4?I*It:0,y=je?1/(je<0?-je:je):0),i.svg&&(X=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Co(be(e,V)),X&&e.setAttribute("transform",X))),Math.abs(E)>90&&Math.abs(E)<270&&(s?(p*=-1,E+=f<=0?180:-180,f+=f<=0?180:-180):(_*=-1,E+=E<=0?180:-180)),t=t||i.uncache,i.x=c-((i.xPercent=c&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=h+a,i.scaleX=j(p),i.scaleY=j(_),i.rotation=j(f)+o,i.rotationX=j(g)+o,i.rotationY=j(D)+o,i.skewX=E+o,i.skewY=T+o,i.transformPerspective=y+a,(i.zOrigin=parseFloat(l.split(" ")[2])||!t&&i.zOrigin||0)&&(n[De]=sn(l)),i.xOffset=i.yOffset=0,i.force3D=Ae.force3D,i.renderTransform=i.svg?Tu:So?Io:Su,i.uncache=0,i},sn=function(e){return(e=e.split(" "))[0]+" "+e[1]},Ln=function(e,t,i){var n=ce(t);return j(parseFloat(t)+parseFloat(gt(e,"x",i+"px",n)))+n},Su=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Io(e,t)},At="0deg",gi="0px",Ct=") ",Io=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,u=i.z,l=i.rotation,c=i.rotationY,d=i.rotationX,h=i.skewX,p=i.skewY,_=i.scaleX,f=i.scaleY,g=i.transformPerspective,D=i.force3D,E=i.target,T=i.zOrigin,y="",S=D==="auto"&&e&&e!==1||D===!0;if(T&&(d!==At||c!==At)){var A=parseFloat(c)*si,C=Math.sin(A),I=Math.cos(A),m;A=parseFloat(d)*si,m=Math.cos(A),a=Ln(E,a,C*m*-T),o=Ln(E,o,-Math.sin(A)*-T),u=Ln(E,u,I*m*-T+T)}g!==gi&&(y+="perspective("+g+Ct),(n||s)&&(y+="translate("+n+"%, "+s+"%) "),(S||a!==gi||o!==gi||u!==gi)&&(y+=u!==gi||S?"translate3d("+a+", "+o+", "+u+") ":"translate("+a+", "+o+Ct),l!==At&&(y+="rotate("+l+Ct),c!==At&&(y+="rotateY("+c+Ct),d!==At&&(y+="rotateX("+d+Ct),(h!==At||p!==At)&&(y+="skew("+h+", "+p+Ct),(_!==1||f!==1)&&(y+="scale("+_+", "+f+Ct),E.style[V]=y||"translate(0, 0)"},Tu=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,u=i.rotation,l=i.skewX,c=i.skewY,d=i.scaleX,h=i.scaleY,p=i.target,_=i.xOrigin,f=i.yOrigin,g=i.xOffset,D=i.yOffset,E=i.forceCSS,T=parseFloat(a),y=parseFloat(o),S,A,C,I,m;u=parseFloat(u),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,u+=c),u||l?(u*=si,l*=si,S=Math.cos(u)*d,A=Math.sin(u)*d,C=Math.sin(u-l)*-h,I=Math.cos(u-l)*h,l&&(c*=si,m=Math.tan(l-c),m=Math.sqrt(1+m*m),C*=m,I*=m,c&&(m=Math.tan(c),m=Math.sqrt(1+m*m),S*=m,A*=m)),S=j(S),A=j(A),C=j(C),I=j(I)):(S=d,I=h,A=C=0),(T&&!~(a+"").indexOf("px")||y&&!~(o+"").indexOf("px"))&&(T=gt(p,"x",a,"px"),y=gt(p,"y",o,"px")),(_||f||g||D)&&(T=j(T+_-(_*S+f*C)+g),y=j(y+f-(_*A+f*I)+D)),(n||s)&&(m=p.getBBox(),T=j(T+n/100*m.width),y=j(y+s/100*m.height)),m="matrix("+S+","+A+","+C+","+I+","+T+","+y+")",p.setAttribute("transform",m),E&&(p.style[V]=m)},yu=function(e,t,i,n,s){var a=360,o=ne(s),u=parseFloat(s)*(o&&~s.indexOf("rad")?It:1),l=u-n,c=n+l+"deg",d,h;return o&&(d=s.split("_")[1],d==="short"&&(l%=a,l!==l%(a/2)&&(l+=l<0?a:-360)),d==="cw"&&l<0?l=(l+a*ts)%a-~~(l/a)*a:d==="ccw"&&l>0&&(l=(l-a*ts)%a-~~(l/a)*a)),e._pt=h=new me(e._pt,t,i,n,l,su),h.e=c,h.u="deg",e._props.push(i),h},us=function(e,t){for(var i in t)e[i]=t[i];return e},Au=function(e,t,i){var n=us({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,u,l,c,d,h,p,_;n.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),a[V]=t,o=wi(i,1),kt(i,V),i.setAttribute("transform",l)):(l=getComputedStyle(i)[V],a[V]=t,o=wi(i,1),a[V]=l);for(u in it)l=n[u],c=o[u],l!==c&&s.indexOf(u)<0&&(p=ce(l),_=ce(c),d=p!==_?gt(i,u,l,_):parseFloat(l),h=parseFloat(c),e._pt=new me(e._pt,o,u,d,h-d,Wn),e._pt.u=_||0,e._props.push(u));us(o,n)};ge("padding,margin,Width,Radius",function(r,e){var t="Top",i="Right",n="Bottom",s="Left",a=(e<3?[t,i,n,s]:[t+s,t+i,n+i,n+s]).map(function(o){return e<2?r+o:"border"+o+r});rn[e>1?"border"+r:r]=function(o,u,l,c,d){var h,p;if(arguments.length<4)return h=a.map(function(_){return Ke(o,_,l)}),p=h.join(" "),p.split(h[0]).length===5?h[0]:p;h=(c+"").split(" "),p={},a.forEach(function(_,f){return p[_]=h[f]=h[f]||h[(f-1)/2|0]}),o.init(u,p,d)}});var Po={name:"css",register:qn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,s){var a=this._props,o=e.style,u=i.vars.startAt,l,c,d,h,p,_,f,g,D,E,T,y,S,A,C,I;Ir||qn(),this.styles=this.styles||Eo(e),I=this.styles.props,this.tween=i;for(f in t)if(f!=="autoRound"&&(c=t[f],!(Se[f]&&ao(f,t,i,n,e,s)))){if(p=typeof c,_=rn[f],p==="function"&&(c=c.call(i,n,e,s),p=typeof c),p==="string"&&~c.indexOf("random(")&&(c=Li(c)),_)_(this,e,f,c,i)&&(C=1);else if(f.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(f)+"").trim(),c+="",ft.lastIndex=0,ft.test(l)||(g=ce(l),D=ce(c)),D?g!==D&&(l=gt(e,f,l,D)+D):g&&(c+=g),this.add(o,"setProperty",l,c,n,s,0,0,f),a.push(f),I.push(f,0,o[f]);else if(p!=="undefined"){if(u&&f in u?(l=typeof u[f]=="function"?u[f].call(i,n,e,s):u[f],ne(l)&&~l.indexOf("random(")&&(l=Li(l)),ce(l+"")||l==="auto"||(l+=Ae.units[f]||ce(Ke(e,f))||""),(l+"").charAt(1)==="="&&(l=Ke(e,f))):l=Ke(e,f),h=parseFloat(l),E=p==="string"&&c.charAt(1)==="="&&c.substr(0,2),E&&(c=c.substr(2)),d=parseFloat(c),f in $e&&(f==="autoAlpha"&&(h===1&&Ke(e,"visibility")==="hidden"&&d&&(h=0),I.push("visibility",0,o.visibility),ct(this,o,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),f!=="scale"&&f!=="transform"&&(f=$e[f],~f.indexOf(",")&&(f=f.split(",")[0]))),T=f in it,T){if(this.styles.save(f),p==="string"&&c.substring(0,6)==="var(--"&&(c=be(e,c.substring(4,c.indexOf(")"))),d=parseFloat(c)),y||(S=e._gsap,S.renderTransform&&!t.parseTransform||wi(e,t.parseTransform),A=t.smoothOrigin!==!1&&S.smooth,y=this._pt=new me(this._pt,o,V,0,1,S.renderTransform,S,0,-1),y.dep=1),f==="scale")this._pt=new me(this._pt,S,"scaleY",S.scaleY,(E?ni(S.scaleY,E+d):d)-S.scaleY||0,Wn),this._pt.u=0,a.push("scaleY",f),f+="X";else if(f==="transformOrigin"){I.push(De,0,o[De]),c=Du(c),S.svg?Xn(e,c,0,A,0,this):(D=parseFloat(c.split(" ")[2])||0,D!==S.zOrigin&&ct(this,S,"zOrigin",S.zOrigin,D),ct(this,o,f,sn(l),sn(c)));continue}else if(f==="svgOrigin"){Xn(e,c,1,A,0,this);continue}else if(f in Ao){yu(this,S,f,h,E?ni(h,E+c):c);continue}else if(f==="smoothOrigin"){ct(this,S,"smooth",S.smooth,c);continue}else if(f==="force3D"){S[f]=c;continue}else if(f==="transform"){Au(this,c,e);continue}}else f in o||(f=hi(f)||f);if(T||(d||d===0)&&(h||h===0)&&!ru.test(c)&&f in o)g=(l+"").substr((h+"").length),d||(d=0),D=ce(c)||(f in Ae.units?Ae.units[f]:g),g!==D&&(h=gt(e,f,l,D)),this._pt=new me(this._pt,T?S:o,f,h,(E?ni(h,E+d):d)-h,!T&&(D==="px"||f==="zIndex")&&t.autoRound!==!1?au:Wn),this._pt.u=D||0,g!==D&&D!=="%"&&(this._pt.b=l,this._pt.r=ou);else if(f in o)mu.call(this,e,f,l,E?E+c:c);else if(f in e)this.add(e,f,l||e[f],E?E+c:c,n,s);else if(f!=="parseTransform"){_r(f,c);continue}T||(f in o?I.push(f,0,o[f]):typeof e[f]=="function"?I.push(f,2,e[f]()):I.push(f,1,l||e[f])),a.push(f)}}C&&po(this)},render:function(e,t){if(t.tween._time||!Pr())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ke,aliases:$e,getSetter:function(e,t,i){var n=$e[t];return n&&n.indexOf(",")<0&&(t=n),t in it&&t!==De&&(e._gsap.x||Ke(e,"x"))?i&&es===i?t==="scale"?du:cu:(es=i||{})&&(t==="scale"?hu:fu):e.style&&!hr(e.style[t])?uu:~t.indexOf("-")?lu:Ar(e,t)},core:{_removeProperty:kt,_getMatrix:Nr}};Ee.utils.checkPrefix=hi;Ee.core.getStyleSaver=Eo;(function(r,e,t,i){var n=ge(r+","+e+","+t,function(s){it[s]=1});ge(e,function(s){Ae.units[s]="deg",Ao[s]=1}),$e[n[13]]=r+","+e,ge(i,function(s){var a=s.split(":");$e[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ge("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Ae.units[r]="px"});Ee.registerPlugin(Po);var le=Ee.registerPlugin(Po)||Ee;le.core.Tween;/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Cu=/(?:^\s+|\s+$)/g,Iu=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function vo(r){var e=r.nodeType,t="";if(e===1||e===9||e===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)t+=vo(r)}else if(e===3||e===4)return r.nodeValue;return t}function Kn(r,e,t,i,n){for(var s=r.firstChild,a=[],o;s;)s.nodeType===3?(o=(s.nodeValue+"").replace(/^\n+/g,""),i||(o=o.replace(/\s+/g," ")),a.push.apply(a,No(o,e,t,i,n))):(s.nodeName+"").toLowerCase()==="br"?a[a.length-1]+="<br>":a.push(s.outerHTML),s=s.nextSibling;if(!n)for(o=a.length;o--;)a[o]==="&"&&a.splice(o,1,"&amp;");return a}function No(r,e,t,i,n){if(r+="",t&&(r=r.trim?r.trim():r.replace(Cu,"")),e&&e!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var s=[],a=r.length,o=0,u,l;o<a;o++)l=r.charAt(o),(l.charCodeAt(0)>=55296&&l.charCodeAt(0)<=56319||r.charCodeAt(o+1)>=65024&&r.charCodeAt(o+1)<=65039)&&(u=((r.substr(o,12).split(Iu)||[])[1]||"").length||2,l=r.substr(o,u),s.emoji=1,o+=u-1),s.push(n?l:l===">"?"&gt;":l==="<"?"&lt;":i&&l===" "&&(r.charAt(o-1)===" "||r.charAt(o+1)===" ")?"&nbsp;":l);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var yi,$i,Pu=function(){return yi||typeof window<"u"&&(yi=window.gsap)&&yi.registerPlugin&&yi},Ui={version:"3.13.0",name:"text",init:function(e,t,i){typeof t!="object"&&(t={value:t});var n=e.nodeName.toUpperCase(),s=this,a=t,o=a.newClass,u=a.oldClass,l=a.preserveSpaces,c=a.rtl,d=s.delimiter=t.delimiter||"",h=s.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),p,_,f,g,D,E,T,y;if(s.svg=e.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in e)&&!s.svg)return!1;if(s.target=e,!("value"in t)){s.text=s.original=[""];return}for(f=Kn(e,d,!1,l,s.svg),$i||($i=document.createElement("div")),$i.innerHTML=t.value,_=Kn($i,d,!1,l,s.svg),s.from=i._from,(s.from||c)&&!(c&&s.from)&&(n=f,f=_,_=n),s.hasClass=!!(o||u),s.newClass=c?u:o,s.oldClass=c?o:u,n=f.length-_.length,p=n<0?f:_,n<0&&(n=-n);--n>-1;)p.push(h);if(t.type==="diff"){for(g=0,D=[],E=[],T="",n=0;n<_.length;n++)y=_[n],y===f[n]?T+=y:(D[g]=T+y,E[g++]=T+f[n],T="");_=D,f=E,T&&(_.push(T),f.push(T))}t.speed&&i.duration(Math.min(.05/t.speed*p.length,t.maxDuration||9999)),s.rtl=c,s.original=f,s.text=_,s._props.push("text")},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var i=t.text,n=t.hasClass,s=t.newClass,a=t.oldClass,o=t.delimiter,u=t.target,l=t.fillChar,c=t.original,d=t.rtl,h=i.length,p=(d?1-e:e)*h+.5|0,_,f,g;n&&e?(_=s&&p,f=a&&p!==h,g=(_?"<span class='"+s+"'>":"")+i.slice(0,p).join(o)+(_?"</span>":"")+(f?"<span class='"+a+"'>":"")+o+c.slice(p).join(o)+(f?"</span>":"")):g=i.slice(0,p).join(o)+o+c.slice(p).join(o),t.svg?u.textContent=g:u.innerHTML=l==="&nbsp;"&&~g.indexOf("  ")?g.split("  ").join("&nbsp;&nbsp;"):g}};Ui.splitInnerHTML=Kn;Ui.emojiSafeSplit=No;Ui.getText=vo;Pu()&&yi.registerPlugin(Ui);const vu=1.3,Nu=1.3,Lu=.1,Lo=150,Ou=32,bu=1.6,Ru=.15,wu=.8,Fu=2,Ut=40.6,Mu=.4,xu="power1.out",Bu=1.7,ku=2.6,Uu="sine.inOut",te=[0,246,278.727,311.455,344.182,16.909,49.636,82.364,115.091,147.818,180.545,213.273],ke={env:1,lcd:0,logo:1,btn:0},Gu=.75,Hu=.3,$u=.3,Vu=.5,zu=25,Oo=1500,Yu=Oo/1e3,Wu=.04,ju=.05,qu=.03,Xu=1,Ku=.1,Qu=.05,Ju=.3,Zu=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],el=.7,tl=.2,il=250,nl=.005,rl=.045,sl=9,ol=1.8,al=75,qt=.85,ul=0,ll=.33,cl=.66,dl=1,hl=1.05,mi=(r,e)=>r.map(t=>({...t,pos:t.pos*e})),bo=[{power:ul,stops:mi([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],qt)},{power:ll,stops:mi([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],qt)},{power:cl,stops:mi([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],qt)},{power:dl,stops:mi([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],qt)},{power:hl,stops:mi([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],qt)}],fl=bo[0].stops.length,pl=150,_l=40,gl=15,ml=20,Dl=50,El=150,Sl=530,Tl=370,b={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},Lr={textFlickerToDimlyLit:{numCycles:8,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:b.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:b.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"3px",finalSize:b.DIMLY_LIT.glowFinalSize,colorVar:"--terminal-text-glow-color",scaleWithAmplitude:!0,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:8,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:b.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:b.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:b.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:8,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:b.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:b.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:b.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:7,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:b.DIMLY_LIT.amplitudeEnd,amplitudeEnd:b.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:b.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:b.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:b.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:b.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:7,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:b.DIMLY_LIT.amplitudeEnd,amplitudeEnd:b.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:b.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:b.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:b.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:b.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:5,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:b.DIMLY_LIT.amplitudeEnd,amplitudeEnd:b.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:b.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:b.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:b.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:b.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:5,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:b.DIMLY_LIT.amplitudeEnd,amplitudeEnd:b.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:b.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:b.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:b.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:b.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:9,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:b.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:b.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:b.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:9,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:b.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:b.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:b.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function yl(r){const e=Lr[r];if(!e)return .2;let t=0;for(let n=0;n<e.numCycles;n++){const s=e.numCycles>1?n/(e.numCycles-1):1,a=e.periodStart+s*(e.periodEnd-e.periodStart);t+=a}const i=Math.max(.15,e.periodEnd*1.5);return t+=i,t}const zt=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:Lr,APP_LOAD_FADE_IN_DURATION:Hu,ATTENUATION_DURATION:Vu,AUTO_PLAY_START_DELAY:Gu,BODY_FADE_IN_DURATION:$u,DEBOUNCE_DELAY:Lo,DEFAULT_ASSIGNMENT_SELECTIONS:ke,DEFAULT_DIAL_A_HUE:Ut,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:Fu,DIAL_GRADIENT_SCALE_FACTOR:wu,GSAP_BUTTON_IDLE_DURATION_MAX:ku,GSAP_BUTTON_IDLE_DURATION_MIN:Bu,GSAP_BUTTON_IDLE_EASE:Uu,GSAP_TWEEN_DURATION:Mu,GSAP_TWEEN_EASE:xu,HIGHLIGHT_WIDTH_FACTOR:Ru,HUE_ASSIGNMENT_ROW_HUES:te,HUE_UPDATE_THRESHOLD:Lu,LCD_TEXT_FADE_IN_DURATION:Ju,LENS_GRADIENT_BREAKPOINTS:bo,LENS_GRADIENT_POSITION_SCALE:qt,LENS_HOTSPOT_HUE_OFFSET:al,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:rl,LENS_OSCILLATION_AMPLITUDE_MIN:nl,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:ol,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:sl,LENS_OSCILLATION_RESTART_DELAY:il,LENS_OSCILLATION_SMOOTHING_DURATION:tl,LENS_OSCILLATION_THRESHOLD:el,LENS_STARTUP_RAMP_DURATION:Oo,LENS_STARTUP_TARGET_POWER:zu,MIN_PHASE_DURATION_FOR_STEPPING:Qu,NUM_LENS_GRADIENT_STOPS:fl,NUM_RIDGES:Ou,P3_LENS_RAMP_DURATION_S:Yu,P4_BUTTON_FADE_STAGGER:Wu,P4_LCD_FADE_STAGGER:ju,P6_BUTTON_ENERGIZE_FLICKER_STAGGER:qu,PIXELS_PER_DEGREE_HUE:Nu,PIXELS_PER_DEGREE_ROTATION:vu,RIDGE_WIDTH_FACTOR:bu,SYSTEM_READY_PHASE_DURATION:Ku,TERMINAL_CURSOR_BLINK_OFF_MS:Tl,TERMINAL_CURSOR_BLINK_ON_MS:Sl,TERMINAL_MAX_LINES_IN_DOM:pl,TERMINAL_NEW_LINE_DELAY_MAX_MS:El,TERMINAL_NEW_LINE_DELAY_MIN_MS:Dl,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:gl,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:ml,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:_l,THEME_TRANSITION_DURATION:Xu,estimateFlickerDuration:yl,selectorsForDimExitAnimation:Zu},Symbol.toStringTag,{value:"Module"}));function Ro(r,e){let t;return function(...n){const s=this,a=()=>{t=null,r.apply(s,n)};clearTimeout(t),t=setTimeout(a,e)}}function Al(r,e,t,i,n){return(r-e)*(n-i)/(t-e)+i}function Cl(r){for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r}class Il{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.off(e,t)}}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(i=>i!==t))}}const Qn=new Il;function St(r,e){let t=e;e&&typeof e=="object"&&Object.keys(e).length>3&&(t=`{ ${Object.keys(e).join(", ")}, ... }`),console.log(`[AppState EMIT] Event: '${r}'. Payload:`,t!==void 0?t:"N/A",e!==void 0&&t!==e?{fullPayload:e}:""),Qn.events[r]&&Qn.events[r].forEach(i=>{try{i(e)}catch(n){console.error(`[AppState EMIT] Error in listener for '${r}':`,n,{payload:e})}})}let J={A:{id:"A",hue:Ut,rotation:0,targetHue:Ut,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},on={env:{hue:te[ke.env],isColorless:te[ke.env]===te[0]},lcd:{hue:te[ke.lcd],isColorless:te[ke.lcd]===te[0]},logo:{hue:te[ke.logo],isColorless:te[ke.logo]===te[0]},btn:{hue:te[ke.btn],isColorless:te[ke.btn]===te[0]}},Pt="dim",Xt=0,Kt="idle",vt="loading";function nt(r){const e=J[r];if(!e){console.warn(`[AppState GET] Target: Dial '${r}'. Requested: State. Actual: Undefined (not initialized).`);return}return{...e}}function Or(r){const e=on[r];if(!e){console.warn(`[AppState GET] Target: TargetColor '${r}'. Requested: Properties. Actual: Undefined (invalid key).`);return}return{...e}}function br(){return Pt}function rt(){return Xt}function Dn(){return Kt}function Y(){return vt}function En(r,e){const t=!J[r]||Object.keys(J[r]).length===0;t&&(r==="A"||r==="B")&&(J[r]={id:r,hue:r==="A"?Ut:0,rotation:0,targetHue:r==="A"?Ut:0,targetRotation:0,isDragging:!1},console.log(`[AppState SET] Target: Dial '${r}'. Requested: Initialization. Actual (New State):`,JSON.parse(JSON.stringify(J[r]))));const i={...J[r]};Object.assign(J[r],e),(t||i.hue!==J[r].hue||i.rotation!==J[r].rotation||i.isDragging!==J[r].isDragging||i.targetHue!==J[r].targetHue||i.targetRotation!==J[r].targetRotation)&&(console.log(`[AppState SET] Target: Dial '${r}'. Requested (Changes):`,JSON.parse(JSON.stringify(e)),"Old State:",JSON.parse(JSON.stringify(i)),"Actual (New State):",JSON.parse(JSON.stringify(J[r]))),St("dialUpdated",{id:r,state:{...J[r]}}))}function Jn(r,e){if(on.hasOwnProperty(r)){const t=(Number(e)%360+360)%360,i=te.length>0&&t===te[0],n=on[r];if(n.hue!==t||n.isColorless!==i){const s={...n};n.hue=t,n.isColorless=i,console.log(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${e}, Normalized: ${t}. Old Props:`,s,"Actual (New Props):",{...n}),St("targetColorChanged",{targetKey:r,hue:t,isColorless:i})}}else console.warn(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${e}. Error: Invalid targetKey.`)}function wo(r){if(["dim","dark","light"].includes(r)&&Pt!==r){const e=Pt;Pt=r,console.log(`[AppState SET] Target: Theme. Requested: '${r}'. Old: '${e}', Actual (New): '${Pt}'`),St("themeChanged",Pt)}}function Zn(r){const e=Math.max(0,Math.min(r/100,1));if(Math.abs(Xt-e)>1e-4){const t=Xt;Xt=e,console.log(`[AppState SET] Target: TrueLensPower. Requested: ${r}%. Old: ${t.toFixed(3)}, Actual (New): ${Xt.toFixed(3)} (0-1 scale)`),St("trueLensPowerChanged",Xt)}}function Pl(r){if(["idle","dragging","settling"].includes(r)&&Kt!==r){const e=Kt;Kt=r,console.log(`[AppState SET] Target: DialBInteractionState. Requested: '${r}'. Old: '${e}', Actual (New): '${Kt}'`),St("dialBInteractionChange",Kt)}}function Fo(r){if(["loading","starting-up","interactive","error"].includes(r)&&vt!==r){const e=vt;vt=r,console.log(`[AppState SET] Target: AppStatus. Requested: '${r}'. Old: '${e}', Actual (New): '${vt}'`),St("appStatusChanged",vt)}}function Le(r,e){return typeof e!="function"?(console.error(`[AppState Subscribe] Listener for event '${r}' is not a function.`),()=>{}):Qn.on(r,e)}(!J.A||Object.keys(J.A).length===0)&&En("A",{hue:Ut,rotation:0,targetHue:Ut,targetRotation:0,isDragging:!1});(!J.B||Object.keys(J.B).length===0)&&En("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});console.log("[AppState INIT] Initialized with default states:",{dials:JSON.parse(JSON.stringify(J)),targetColorProps:JSON.parse(JSON.stringify(on)),currentTheme:Pt,appStatus:vt});const Di=Object.freeze(Object.defineProperty({__proto__:null,emit:St,getAppStatus:Y,getCurrentTheme:br,getDialBInteractionState:Dn,getDialState:nt,getTargetColorProperties:Or,getTrueLensPower:rt,setAppStatus:Fo,setDialBInteractionState:Pl,setTargetColorProperties:Jn,setTheme:wo,setTrueLensPower:Zn,subscribe:Le,updateDialState:En},Symbol.toStringTag,{value:"Module"}));class vl{constructor(e,t,i,n,s,a){if(this.element=e,this.config=t,this.gsap=i,this.appState=n,this.configModule=s,this.uiUpdater=a,!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=t.isSelectedByDefault||!1,console.log(`[Button CONSTRUCTOR - ${this.getIdentifier()}] ID: ${this.element.id}, AriaLabel: ${this.element.ariaLabel}, Group: ${this.config.groupId}, Value: ${this.config.value}, isSelectedByDefault: ${t.isSelectedByDefault}, Initial _isSelected: ${this._isSelected}`),this._updateAriaAttributes()}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(e,t={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:a}=t,o=a||"UnknownPhase_ButtonSetState",u=this.getIdentifier(),l=e?e.split(" ").filter(_=>_):[],c=new Set(l);console.log(`[Button setState - ${u}] ENTER. Requested state string: '${e}'. Current _isSelected: ${this._isSelected}. PhaseContext: ${o}. Current DOM classes: '${this.element.className}'`);let d=s;if(!d){const _=new Set;Object.values(R).flatMap(g=>g.split(" ")).forEach(g=>{this.element.classList.contains(g)&&_.add(g)});const f=new Set(l);if(this._isSelected?f.add("is-selected"):f.delete("is-selected"),_.size!==f.size)d=!0;else for(const g of f)if(!_.has(g)){d=!0;break}}if(!d&&!s){console.log(`[Button setState - ${u}] No actual class change needed for '${e}', _isSelected: ${this._isSelected}. DOM classes already reflect target. Skipping full update.`),i||this._updateAriaAttributes();return}if(console.log(`[Button setState - ${u}] Proceeding with state update. stateChanged: ${d}, forceState: ${s}`),!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(console.log(`[Button setState - ${u}] Killing active flicker animation.`),this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(R.FLICKERING);const _=Array.from(this.element.querySelectorAll(".light"));_.length>0&&this.gsap.set(_,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"}),console.log(`[Button setState - ${u}] Cleared GSAP props (not internal flicker call).`)}const h=Object.values(R).flatMap(_=>_.split(" ")).filter(_=>_&&_!=="is-selected");[...new Set(h)].forEach(_=>{this.element.classList.contains(_)&&this.element.classList.remove(_)}),c.forEach(_=>{_!=="is-selected"&&this.element.classList.add(_)}),console.log(`[Button setState - ${u}] BEFORE managing 'is-selected' class. _isSelected: ${this._isSelected}. Element has 'is-selected': ${this.element.classList.contains("is-selected")}`),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),console.log(`[Button setState - ${u}] AFTER managing 'is-selected' class. Element has 'is-selected': ${this.element.classList.contains("is-selected")}`),this.currentClasses.clear(),this.element.classList.forEach(_=>this.currentClasses.add(_)),console.log(`[Button setState - ${u}] Final DOM classes: '${this.element.className}'. Final internal currentClasses: '${Array.from(this.currentClasses).join(" ")}'`),i||this._updateAriaAttributes()}_updateAriaAttributes(){const e=this._isSelected;this.config.type==="toggle"?this.element.setAttribute("aria-pressed",e.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",e.toString());const t=Array.from(this.currentClasses).some(i=>i===R.ENERGIZED_UNSELECTED.split(" ")[0]||i===R.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",t?"0":"-1")}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}setSelected(e,t={}){const{skipAnimation:i=!1,themeContext:n="theme-dark",phaseContext:s="ButtonSetSelected"}=t,a=this.getIdentifier();if(console.log(`[Button setSelected - ${a}] ENTER. Target selected: ${e}. Current _isSelected: ${this._isSelected}. PhaseContext: ${s}. Current DOM classes: '${this.element.className}'`),this._isSelected===e){console.log(`[Button setSelected - ${a}] _isSelected already matches target (${e}). Checking if DOM class 'is-selected' needs update.`);let l=!1;if(e&&!this.element.classList.contains("is-selected")&&(l=!0,console.log(`[Button setSelected - ${a}] DOM needs 'is-selected' added.`)),!e&&this.element.classList.contains("is-selected")&&(l=!0,console.log(`[Button setSelected - ${a}] DOM needs 'is-selected' removed.`)),!l){console.log(`[Button setSelected - ${a}] No change to _isSelected or DOM 'is-selected' class needed. Returning.`);return}}else this._isSelected=e,console.log(`[Button setSelected - ${a}] Updated _isSelected to: ${this._isSelected}`);let o=R.ENERGIZED_UNSELECTED;this.element.classList.contains(R.DIMLY_LIT.split(" ")[0])?o=R.DIMLY_LIT_UNSELECTED:this.element.classList.contains(R.UNLIT.split(" ")[0])?o=R.UNLIT:this.element.classList.contains(R.ENERGIZED_UNSELECTED.split(" ")[0])&&(o=R.ENERGIZED_UNSELECTED);let u=o;this._isSelected?o===R.DIMLY_LIT_UNSELECTED?u=R.DIMLY_LIT_SELECTED:(o===R.ENERGIZED_UNSELECTED||o===R.UNLIT)&&(u=R.ENERGIZED_SELECTED):o===R.DIMLY_LIT_SELECTED?u=R.DIMLY_LIT_UNSELECTED:o===R.ENERGIZED_SELECTED&&(u=R.ENERGIZED_UNSELECTED),console.log(`[Button setSelected - ${a}] Determined targetStateClasses for setState: '${u}' based on new _isSelected: ${this._isSelected} and base: '${o}'`),this.setState(u,{skipAnimation:i,themeContext:n,phaseContext:s,forceState:!0})}handleInteraction(e){const t=this.getIdentifier();console.log(`[Button handleInteraction - ${t}] Event: ${e}, Type: ${this.config.type}, Current _isSelected: ${this._isSelected}`),this.config.type==="toggle"?this.setSelected(!this._isSelected,{themeContext:this.appState.getCurrentTheme(),phaseContext:`ToggleInteract_${t}`}):this.config.type==="radio"?this._isSelected||this.setSelected(!0,{themeContext:this.appState.getCurrentTheme(),phaseContext:`RadioInteract_${t}`}):this.config.type==="action"&&console.log(`[Button handleInteraction - ${t}] Action triggered.`)}setPressedVisuals(e){if(this.getIdentifier(),this._pressTimeoutId&&this.element.classList.contains(R.PRESSING)&&!e&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),e){this.element.classList.add(R.PRESSING);const t=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(t)*(t.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(R.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(R.PRESSING)}destroy(){const e=this.getIdentifier();this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),console.log(`[Button DESTROY - ${e}] Destroyed.`)}}function ot(r,e,t=0){if(!r)return t;const i=r[e];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:t}function an(r,e,t={}){var T,y,S,A,C,I;const i=typeof e=="string"?e:"CustomProfile",n=r&&r.length>0&&r[0]?r[0].id||r[0].className.split(" ")[0]:"unknownTarget";console.log(`[CAF START - ${i} for ${n}] Options:`,JSON.parse(JSON.stringify(t)));const a={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...t};let o=typeof e=="string"?{...Lr[e]}:{...e};const u=new Promise(m=>{a.gsapInternalOnComplete=()=>{console.log(`[CAF INTERNAL PROMISE RESOLVED - ${i} for ${n}]`),m()}});if(!o||Object.keys(o).length===0){console.warn(`[CAF - ${i} for ${n}] Profile not found or empty. Returning empty, resolved flicker.`);const m=le.timeline();return m.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),m.to({},{duration:.001}),{timeline:m,completionPromise:u}}o.glow={...o.glow||{}},a.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(o.glow.isButtonSelected=a.overrideGlowParams.isButtonSelected),console.log(`[CAF - ${i} for ${n}] Effective profile.glow.isButtonSelected: ${o.glow.isButtonSelected}`),console.log(`[CAF - ${i} for ${n}] Profile ampStart: ${o.amplitudeStart}, Profile initialGlowOpacity: ${(T=o.glow)==null?void 0:T.initialOpacity}`);const l=Array.isArray(r)?r.filter(m=>m):r?[r]:[];if(l.length===0){console.warn(`[CAF - ${i}] No valid target elements. Returning empty, resolved flicker.`);const m=le.timeline();return m.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),m.to({},{duration:.001}),{timeline:m,completionPromise:u}}const c=le.timeline({onStart:()=>{console.log(`[CAF GSAP TL START - ${i} for ${n}]`),a.onStart&&a.onStart()},onComplete:()=>{console.log(`[CAF GSAP TL COMPLETE - ${i} for ${n}]. Calling user's onTimelineComplete and resolving promise.`),a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()},onUpdate:a.onUpdate});let d=l;if(o.targetProperty==="button-lights-and-frame"){const m=[];l.forEach(v=>{const O=v.querySelectorAll(a.lightTargetSelector);O.length>0&&m.push(...Array.from(O))}),m.length>0&&(d=m,le.killTweensOf(d),le.set(d,{clearProps:"all",overwrite:!0}))}else(o.targetProperty==="text-shadow-opacity-and-blur"||o.targetProperty==="element-opacity-and-box-shadow")&&(d=l,le.killTweensOf(d));if(o.amplitudeStart!==void 0&&o.amplitudeStart<=.01&&(!o.glow||o.glow.initialOpacity===void 0||o.glow.initialOpacity<=.01)){if(console.log(`[CAF - ${i} for ${n}] Profile indicates transition FROM UNLIT. Setting initial autoAlpha to 0.`),d.length>0&&c.set(d,{autoAlpha:0,immediateRender:!0}),o.glow&&(o.glow.opacityVar||(y=o.glow.animatedProperties)!=null&&y.opacity)){const m={};o.glow.opacityVar&&(m[o.glow.opacityVar]=0),(S=o.glow.animatedProperties)!=null&&S.opacity&&(m[o.glow.animatedProperties.opacity]=0),o.glow.sizeVar&&(m[o.glow.sizeVar]="0px"),(A=o.glow.animatedProperties)!=null&&A.blur&&(m[o.glow.animatedProperties.blur]="0px"),Object.keys(m).length>0&&c.set(l,{css:m,immediateRender:!0})}}else{if(d.length>0){const m=o.amplitudeStart!==void 0?o.amplitudeStart:0;console.log(`[CAF - ${i} for ${n}] Profile starts from PARTIALLY LIT. Setting initial autoAlpha to: ${m}`),c.set(d,{autoAlpha:m,immediateRender:!0})}if(o.glow&&(o.glow.colorVar||o.glow.animatedProperties)){const m={},v=ot(o.glow,"initialOpacity",0),O=ot(o.glow,"initialSize","0px");console.log(`[CAF - ${i} for ${n}] Initial Glow (from partially lit) - Opacity: ${v}, Size: ${O}`),o.glow.opacityVar&&(m[o.glow.opacityVar]=v),o.glow.sizeVar&&(m[o.glow.sizeVar]=typeof O=="number"?`${O}px`:O),(C=o.glow.animatedProperties)!=null&&C.opacity&&(m[o.glow.animatedProperties.opacity]=v),(I=o.glow.animatedProperties)!=null&&I.blur&&(m[o.glow.animatedProperties.blur]=typeof O=="number"?`${O}px`:O),Object.keys(m).length>0&&(console.log(`[CAF - ${i} for ${n}] Setting initialGlowCSS (from partially lit):`,m),c.set(l,{css:m,immediateRender:!0}))}}d.length>0&&d[0]&&c.call(()=>{console.log(`[CAF - ${i} for ${n}] Opacity AFTER all initial sets for ${d[0].id||d[0].className}: ${le.getProperty(d[0],"opacity")}`)});let p=0,_=.01;console.log(`[CAF - ${i} for ${n}] Starting flicker loop. Profile amplitudeStart: ${o.amplitudeStart}, amplitudeEnd: ${o.amplitudeEnd}`);for(let m=0;m<o.numCycles;m++){const v=o.numCycles>1?m/(o.numCycles-1):1,O=o.periodStart+v*(o.periodEnd-o.periodStart),F=Math.max(.01,O*o.onDurationRatio),M=Math.max(.01,O*(1-o.onDurationRatio)),q=o.amplitudeStart+v*(o.amplitudeEnd-o.amplitudeStart);_=F;const W=ot(o.glow,"peakOpacity",1),x=ot(o.glow,"peakSize","5px"),X={autoAlpha:q,duration:F,ease:"power1.inOut"},Z={};if(o.glow&&(o.glow.colorVar||o.glow.animatedProperties)){const st=o.glow.scaleWithAmplitude?W*q:W;o.glow.opacityVar&&(Z[o.glow.opacityVar]=st),o.glow.sizeVar&&(Z[o.glow.sizeVar]=typeof x=="number"?`${x}px`:x),o.glow.animatedProperties&&(o.glow.animatedProperties.opacity&&(Z[o.glow.animatedProperties.opacity]=st),o.glow.animatedProperties.blur&&(Z[o.glow.animatedProperties.blur]=typeof x=="number"?`${x}px`:x))}if(d.length>0&&c.to(d,X,p),Object.keys(Z).length>0&&c.to(l,{css:Z,duration:F,ease:"power1.inOut"},p),p+=F,m<o.numCycles-1){const Tt={autoAlpha:o.amplitudeStart>0?o.amplitudeStart*.3:0,duration:M,ease:"power1.inOut"},Pe={},xe=ot(o.glow,"initialOpacity",0),We=ot(o.glow,"initialSize","0px");o.glow&&(o.glow.colorVar||o.glow.animatedProperties)&&(o.glow.opacityVar&&(Pe[o.glow.opacityVar]=xe),o.glow.sizeVar&&(Pe[o.glow.sizeVar]=typeof We=="number"?`${We}px`:We),o.glow.animatedProperties&&(o.glow.animatedProperties.opacity&&(Pe[o.glow.animatedProperties.opacity]=xe),o.glow.animatedProperties.blur&&(Pe[o.glow.animatedProperties.blur]=typeof We=="number"?`${We}px`:We))),d.length>0&&c.to(d,Tt,p),Object.keys(Pe).length>0&&c.to(l,{css:Pe,duration:M,ease:"power1.inOut"},p),p+=M}}const f=Math.max(.15,o.periodEnd*1.5),g={autoAlpha:o.amplitudeEnd,duration:f,ease:"sine.out"},D={};if(o.glow&&(o.glow.colorVar||o.glow.animatedProperties)){const m=ot(o.glow,"finalOpacity",0),v=ot(o.glow,"finalSize","0px");console.log(`[CAF - ${i} for ${n}] Final Glow - Opacity: ${m}, Size: ${v}`),o.glow.opacityVar&&(D[o.glow.opacityVar]=m),o.glow.sizeVar&&(D[o.glow.sizeVar]=typeof v=="number"?`${v}px`:v),o.glow.animatedProperties&&(o.glow.animatedProperties.opacity&&(D[o.glow.animatedProperties.opacity]=m),o.glow.animatedProperties.blur&&(D[o.glow.animatedProperties.blur]=typeof v=="number"?`${v}px`:v))}const E=_*.3;return d.length>0&&c.to(d,g,`>-=${E}`),Object.keys(D).length>0&&(console.log(`[CAF - ${i} for ${n}] Setting finalGlowCSS:`,D),c.to(l,{css:D,duration:f,ease:"sine.out"},"<")),c.duration()===0&&c.to({},{duration:.001}),console.log(`[CAF END - ${i} for ${n}], Total timeline duration: ${c.duration().toFixed(3)}`),{timeline:c,completionPromise:u}}const R={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering"};class Nl{constructor(e,t,i,n){this.gsap=e,this.appState=t,this.config=i,this.uiUpdater=n,this._buttons=new Map,this._buttonGroups=new Map,this.debug=!0}init(e,t){this.gsap=t||this.gsap,this.debug&&console.log("[ButtonManager INIT] Initializing buttons:",e==null?void 0:e.length),e&&e.length>0&&e.forEach(i=>{this.addButton(i)}),this.setInitialDimStates()}addButton(e,t=null){if(!e||this._buttons.has(e))return;const i=this._generateButtonConfig(e,t),n=new vl(e,i,this.gsap,this.appState,this.config,this.uiUpdater);this._buttons.set(e,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n))}_generateButtonConfig(e,t=null){var o;const i=e.classList.contains("button-unit--toggle")?"toggle":e.classList.contains("button-unit--action")?"action":e.classList.contains("button-unit--radio")?"radio":"default";let n=t;if(!n&&(n=((o=e.closest("[data-group-id]"))==null?void 0:o.dataset.groupId)||null,!n&&i==="radio")){const u=e.closest('[role="radiogroup"]');u&&(n=u.dataset.assignmentTarget||u.id||`radio-group-${[...this._buttonGroups.keys()].length}`)}const s=e.dataset.toggleValue||e.dataset.value||null,a=e.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:a}}getButtonInstance(e){return this._buttons.get(e)}setInitialDimStates(){this.debug&&console.log("[BM setInitialDimStates] Setting initial states for all buttons to UNLIT."),this._buttons.forEach(e=>{const t=e.getIdentifier();e.isSelected()&&e.setSelected(!1,{skipAnimation:!0,phaseContext:`P0_ForceUnselect_${t}`}),e.setState(R.UNLIT,{skipAnimation:!0,themeContext:"theme-dim",phaseContext:`P0_InitialUnlit_BM_${t}`,forceState:!0})})}handleButtonInteraction(e,t="click"){const i=this._buttons.get(e);if(!i)return;const n=i.getIdentifier();if(this.debug&&console.log(`[BM INTERACTION] Event: ${t} on ${n}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&i.getGroupId()!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${n}`);return}i.handleInteraction(t);const s=i.getGroupId();s&&(i.config.type==="toggle"||i.config.type==="radio")&&i.isSelected()&&this._buttonGroups.get(s).forEach(a=>{a!==i&&a.isSelected()&&(this.debug&&console.log(`[BM INTERACTION] Deselecting other member ${a.getIdentifier()} in group ${s}`),a.setSelected(!1,{themeContext:this.appState.getCurrentTheme(),phaseContext:`GroupAutoDeselect_${a.getIdentifier()}`}))}),this.appState.emit("buttonInteracted",{buttonIdentifier:n,newState:i.getCurrentStateClasses()})}setGroupSelected(e,t){const i=this._buttonGroups.get(e);if(!i){console.warn(`[BM setGroupSelected] Group not found: ${e}`);return}this.debug&&console.log(`[BM setGroupSelected] Group: ${e}, Target: ${typeof t=="string"?t:t.ariaLabel}`),i.forEach(n=>{let s=!1;typeof t=="string"?s=n.config.value===t:s=n.element===t,n.setSelected(s,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`setGroupSelected_${e}_${n.getIdentifier()}`,forceState:!0})})}playFlickerToState(e,t,i){const n=this._buttons.get(e);if(!n)return console.warn(`[BM playFlickerToState - ${i.phaseContext}] Button instance NOT FOUND for element:`,e),{timeline:null,completionPromise:Promise.resolve()};const{profileName:s,phaseContext:a="UnknownPhase",isButtonSelectedOverride:o=null}=i,u=n.getIdentifier();let l=R.UNLIT;s.toLowerCase().includes("fromdimlylit")&&(l=R.DIMLY_LIT);let c=l;l===R.DIMLY_LIT?c=R.DIMLY_LIT_UNSELECTED:l===R.ENERGIZED_UNSELECTED&&(c=R.ENERGIZED_UNSELECTED),(c===R.DIMLY_LIT_UNSELECTED||c===R.UNLIT)&&n.isSelected()&&n.setSelected(!1,{skipAnimation:!0,phaseContext:`PreFlickerTempUnselect_${a}_${u}`,forceState:!0}),n.setState(c,{skipAnimation:!0,phaseContext:`PreFlickerForceBaseState_${a}_${u}`,forceState:!0});const d=t.includes("is-selected");let h=d;n.isSelected()!==d&&n.setSelected(d,{skipAnimation:!0,phaseContext:`PreFlickerSetFinalSelected_${a}_${u}`,forceState:!0}),typeof o=="boolean"&&(h=o);const p={...i,overrideGlowParams:{...i.overrideGlowParams||{},isButtonSelected:h},onTimelineComplete:()=>{n.setState(t,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`FlickerEnd_${a}_${u}`,forceState:!0}),i.onComplete&&i.onComplete()}};delete p.onComplete;const{timeline:_,completionPromise:f}=an(e,s,p);return{timeline:_,completionPromise:f}}flickerDimlyLitToEnergizedStartup(e){const{profileNameUnselected:t,profileNameSelected:i,stagger:n,phaseContext:s,specificGroups:a=null,targetThemeContext:o}=e,u=[];if(this._buttons.forEach(h=>{h.getCurrentClasses().has(R.DIMLY_LIT.split(" ")[0])&&(a&&Array.isArray(a)?a.includes(h.getGroupId())&&u.push(h):u.push(h))}),this.debug&&console.log(`[BM flickerDimlyLitToEnergizedStartup - ${s}] Total buttons to energize from DIMLY_LIT: ${u.length}`),u.length===0)return{masterTimeline:null,masterCompletionPromise:Promise.resolve()};Cl(u);const l=this.gsap.timeline(),c=[];u.forEach((h,p)=>{let _=R.ENERGIZED_UNSELECTED,f=t,g=!1;const D=h.getGroupId(),E=h.config.value,T=h.getIdentifier();this.config.DEFAULT_ASSIGNMENT_SELECTIONS.hasOwnProperty(D)?this.config.DEFAULT_ASSIGNMENT_SELECTIONS[D].toString()===E&&(_=R.ENERGIZED_SELECTED,f=i,g=!0):h.config.type==="toggle"&&h.config.isSelectedByDefault;const{timeline:y,completionPromise:S}=this.playFlickerToState(h.element,_,{profileName:f,phaseContext:`${s}_${T}`,isButtonSelectedOverride:g});y&&l.add(y,n*p),c.push(S)});const d=Promise.all(c).then(()=>{this.debug&&console.log(`[BM flickerDimlyLitToEnergizedStartup - ${s}] All ${u.length} button flickers completed.`)}).catch(h=>{console.error(`[BM flickerDimlyLitToEnergizedStartup - ${s}] Error during grouped flicker completion: ${h}`,h)});return{masterTimeline:l,masterCompletionPromise:d}}setButtonsToState(e,t,i={}){const{staggerTime:n=.05,phaseContext:s="BatchSetState"}=i,a=this.gsap.timeline();return e.forEach((o,u)=>{const l=this._buttons.get(o);if(l){const c=l.getIdentifier();a.call(()=>{const d=t.includes("is-selected");l.isSelected()!==d&&l.setSelected(d,{skipAnimation:!0,phaseContext:`BatchSetSelected_${s}_${c}`,forceState:!0}),l.setState(t,{themeContext:this.appState.getCurrentTheme(),phaseContext:`${s}_${c}`,forceState:!0})},null,u*n)}}),{timeline:a,completionPromise:Promise.resolve()}}setPressedVisuals(e,t){const i=this._buttons.get(e);i&&i.setPressedVisuals(t)}}class Ll{constructor(e,t,i,n,s){if(this.containerElement=e,this.dialId=t,this.appState=i,this.configModule=n,this.gsap=s,this.canvas=this.containerElement.querySelector(`#dial-canvas-${this.dialId}`),!this.canvas){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Canvas element not found!`);return}if(this.ctx=this.canvas.getContext("2d"),!this.ctx){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Failed to get 2D context!`);return}this.computedStyleVars={},this.isDragging=!1,this.currentPointerX=0,this.gsapValueTween=null,this.isActiveDim=!1,this.dialBSettleTimer=null,this.unsubscribers=[],this._updateAndCacheComputedStyles();let a=this.appState.getDialState(this.dialId);if(!a||Object.keys(a).length===0){const o=this.dialId==="B"?0:this.configModule.DEFAULT_DIAL_A_HUE,u=this.dialId==="B"?o*this.configModule.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:0;a={id:this.dialId,hue:o,rotation:u,targetHue:o,targetRotation:u,isDragging:!1},this.appState.updateDialState(this.dialId,a)}this.resizeCanvas(!0),this._addDragListeners(),this._subscribeToAppStateEvents()}_subscribeToAppStateEvents(){this.unsubscribers.push(this.appState.subscribe("dialUpdated",this._onAppStateDialUpdate.bind(this))),this.unsubscribers.push(this.appState.subscribe("themeChanged",this._onThemeChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("appStatusChanged",this._onAppStatusChange.bind(this)))}resizeCanvas(e=!1){if(!this.canvas||!this.ctx)return!1;const t=window.devicePixelRatio||1,i=this.canvas.offsetWidth,n=this.canvas.offsetHeight;if(i===0||n===0)return!1;const s=Math.round(i*t),a=Math.round(n*t);let o=!1;return(this.canvas.width!==s||this.canvas.height!==a)&&(this.canvas.width=s,this.canvas.height=a,o=!0),(o||e)&&(this.ctx.setTransform(t,0,0,t,0,0),this._draw()),o}setActiveDimState(e){this.isActiveDim!==e&&(this.isActiveDim=e,document.body.classList.contains("theme-dim")?this.containerElement.classList.toggle("js-active-dim-dial",e):this.containerElement.classList.remove("js-active-dim-dial"),this._updateAndCacheComputedStyles(),this._draw())}_handleInteractionStart(e){if(this.appState.getAppStatus()!=="interactive"||this.isDragging)return;e.type==="touchstart"&&e.cancelable&&e.preventDefault(),this.isDragging=!0,this.gsapValueTween&&this.gsapValueTween.kill(),this.gsapValueTween=null,this.currentPointerX=e.touches?e.touches[0].clientX:e.clientX;const t=this.appState.getDialState(this.dialId);this.appState.updateDialState(this.dialId,{isDragging:!0,targetHue:t.hue,targetRotation:t.rotation}),this.dialId==="B"&&(this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.appState.setDialBInteractionState("dragging")),this.containerElement.style.cursor="grabbing",document.body.style.cursor="grabbing"}_handleInteractionMove(e){if(!this.isDragging||this.appState.getAppStatus()!=="interactive")return;e.type==="touchmove"&&e.cancelable&&e.preventDefault();let t=e.touches?e.touches[0].clientX:e.clientX;const i=t-this.currentPointerX,n=this.appState.getDialState(this.dialId);let s=n.targetHue+i/this.configModule.PIXELS_PER_DEGREE_HUE;const a=n.targetRotation+i/this.configModule.PIXELS_PER_DEGREE_ROTATION;this.dialId==="B"&&(s=Math.max(0,Math.min(s,359.999))),this.currentPointerX=t,this.gsapValueTween&&this.gsapValueTween.kill();const o={hue:n.hue,rotation:n.rotation};this.gsapValueTween=this.gsap.to(o,{rotation:a,hue:s,duration:this.configModule.GSAP_TWEEN_DURATION,ease:this.configModule.GSAP_TWEEN_EASE,overwrite:"auto",onUpdate:()=>{if(!this.isDragging&&this.gsapValueTween){this.gsapValueTween.kill(),this.gsapValueTween=null;return}this.appState.updateDialState(this.dialId,{hue:o.hue,rotation:o.rotation,targetHue:s,targetRotation:a}),this.dialId==="B"&&this.appState.setTrueLensPower(o.hue/359.999*100)},onComplete:()=>{this.gsapValueTween=null}})}_handleInteractionEnd(e){if(!this.isDragging){document.body.style.cursor==="grabbing"&&(document.body.style.cursor="default");return}const t=this.dialId;this.isDragging=!1;const i=this.appState.getDialState(t);this.appState.updateDialState(t,{isDragging:!1}),this.gsapValueTween&&this.gsapValueTween.isActive()?(this.gsapValueTween.kill(),this.gsapValueTween=null,this.appState.updateDialState(t,{hue:i.targetHue,rotation:i.targetRotation}),t==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)):(Math.abs(i.hue-i.targetHue)>.01||Math.abs(i.rotation-i.targetRotation)>.01)&&(this.appState.updateDialState(t,{hue:i.targetHue,rotation:i.targetRotation}),t==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)),t==="B"&&(this.appState.setDialBInteractionState("settling"),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.dialBSettleTimer=setTimeout(()=>{this.appState.setDialBInteractionState("idle"),this.dialBSettleTimer=null},this.configModule.LENS_OSCILLATION_RESTART_DELAY)),this.containerElement.style.cursor="grab",document.body.style.cursor="default"}_addDragListeners(){this.boundHandleInteractionStart=this._handleInteractionStart.bind(this),this.boundHandleInteractionMove=this._handleInteractionMove.bind(this),this.boundHandleInteractionEnd=this._handleInteractionEnd.bind(this),this.containerElement.addEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.addEventListener("touchstart",this.boundHandleInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundHandleInteractionMove),window.addEventListener("touchmove",this.boundHandleInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundHandleInteractionEnd),window.addEventListener("touchend",this.boundHandleInteractionEnd),window.addEventListener("mouseleave",this.boundHandleInteractionEnd),window.addEventListener("touchcancel",this.boundHandleInteractionEnd)}_removeDragListeners(){this.containerElement.removeEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundHandleInteractionStart),window.removeEventListener("mousemove",this.boundHandleInteractionMove),window.removeEventListener("touchmove",this.boundHandleInteractionMove),window.removeEventListener("mouseup",this.boundHandleInteractionEnd),window.removeEventListener("touchend",this.boundHandleInteractionEnd),window.removeEventListener("mouseleave",this.boundHandleInteractionEnd),window.removeEventListener("touchcancel",this.boundHandleInteractionEnd)}_updateAndCacheComputedStyles(){if(!this.ctx)return;const e=getComputedStyle(document.documentElement),t=document.body.classList.contains("theme-dim");t&&this.isActiveDim?this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-dim-active-face-bg-l").trim()||"0.12",faceBgC:e.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",faceBgH:e.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeL:e.getPropertyValue("--dial-dim-active-ridge-l").trim()||"0.25",ridgeC:e.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",ridgeH:e.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeHighlightL:e.getPropertyValue("--dial-dim-active-ridge-highlight-l").trim()||"0.60",ridgeHighlightA:e.getPropertyValue("--dial-dim-active-ridge-highlight-a").trim()||"0.4",shadingStart:e.getPropertyValue("--dial-dim-active-shading-start-color").trim()||"oklch(0% 0 0 / 0.1)",shadingEnd:e.getPropertyValue("--dial-dim-active-shading-end-color").trim()||"oklch(0% 0 0 / 0.15)"}:t&&!this.isActiveDim?this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-face-bg-l").trim()||"0.01",faceBgC:e.getPropertyValue("--dial-face-bg-c").trim()||"0",faceBgH:e.getPropertyValue("--dial-face-bg-h").trim()||"0",ridgeL:e.getPropertyValue("--dial-ridge-l").trim()||"0.01",ridgeC:e.getPropertyValue("--dial-ridge-c").trim()||"0",ridgeH:e.getPropertyValue("--dial-ridge-h").trim()||"0",ridgeHighlightL:"0",ridgeHighlightA:"0",shadingStart:"oklch(0 0 0 / 0)",shadingEnd:"oklch(0 0 0 / 0)"}:this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-face-bg-l").trim()||"0.20",faceBgC:e.getPropertyValue("--dial-face-bg-c").trim()||"0.005",faceBgH:e.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeL:e.getPropertyValue("--dial-ridge-l").trim()||"0.45",ridgeC:e.getPropertyValue("--dial-ridge-c").trim()||e.getPropertyValue("--dial-face-bg-c").trim()||"0.005",ridgeH:e.getPropertyValue("--dial-ridge-h").trim()||e.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeHighlightL:e.getPropertyValue("--dial-ridge-highlight-l").trim()||"0.95",ridgeHighlightA:e.getPropertyValue("--dial-ridge-highlight-a").trim()||"0.85",shadingStart:e.getPropertyValue("--dial-shading-start-color").trim()||"oklch(0% 0 0 / 0.35)",shadingEnd:e.getPropertyValue("--dial-shading-end-color").trim()||"oklch(0% 0 0 / 0.4)"}}_draw(){if(!this.ctx||!this.canvas||!this.configModule)return;if(!this.computedStyleVars.faceBgL&&(this._updateAndCacheComputedStyles(),!this.computedStyleVars.faceBgL)){console.error(`[Dial ${this.dialId} _draw] computedStyleVars.faceBgL still undefined after update. Bailing draw.`);return}const e=this.appState.getDialState(this.dialId);if(!e)return;const{rotation:t}=e,i=this.canvas.width/(window.devicePixelRatio||1),n=this.canvas.height/(window.devicePixelRatio||1);if(i===0||n===0)return;this.ctx.clearRect(0,0,i,n);const s=this.appState.getAppStatus(),a=document.body.classList.contains("theme-dim"),o=document.body.classList.contains("is-transitioning-from-dim");let u;if(a&&!o?u=this.isActiveDim:u=this.isActiveDim||s==="interactive",this.ctx.fillStyle=`oklch(${this.computedStyleVars.faceBgL} ${this.computedStyleVars.faceBgC} ${this.computedStyleVars.faceBgH})`,this.ctx.fillRect(0,0,i,n),u){const l=2*Math.PI/this.configModule.NUM_RIDGES,c=-Math.PI/4,d=t*Math.PI/180,h=this.configModule.DIAL_GRADIENT_SCALE_FACTOR;for(let p=0;p<this.configModule.NUM_RIDGES;p++){const _=p*l+d,f=Math.cos(_),g=Math.sin(_);if(f>.03){const D=i/this.configModule.NUM_RIDGES*this.configModule.RIDGE_WIDTH_FACTOR*f,E=D*h,T=(D-E)/2,A=i/2+g*i/2-D/2+T;if(this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH})`,this.ctx.fillRect(A,0,E,n),parseFloat(this.computedStyleVars.ridgeHighlightA)>0){const C=Math.max(0,Math.cos(_-c)),I=Math.pow(C,10)*Math.pow(f,1.5);if(I>.05){const m=Math.min(1,parseFloat(this.computedStyleVars.ridgeHighlightA)*I*1.5);this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeHighlightL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH} / ${m.toFixed(3)})`;const v=A+E*.1,O=E*this.configModule.HIGHLIGHT_WIDTH_FACTOR;this.ctx.fillRect(v,0,O,n)}}}}if(this.computedStyleVars.shadingStart!=="oklch(0 0 0 / 0)"){const p=this.ctx.createLinearGradient(0,0,0,n);p.addColorStop(0,this.computedStyleVars.shadingStart),p.addColorStop(.2,"oklch(0 0 0 / 0)"),p.addColorStop(.8,"oklch(0 0 0 / 0)"),p.addColorStop(1,this.computedStyleVars.shadingEnd),this.ctx.fillStyle=p,this.ctx.fillRect(0,0,i,n)}}}_onAppStateDialUpdate(e){e&&e.id===this.dialId&&this._draw()}_onThemeChange(){this._updateAndCacheComputedStyles(),requestAnimationFrame(()=>{const e=window.devicePixelRatio||1;this.ctx&&this.ctx.setTransform(e,0,0,e,0,0),this._draw()})}_onAppStatusChange(e){this._updateAndCacheComputedStyles(),this._draw()}destroy(){this._removeDragListeners(),this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],this.gsapValueTween&&this.gsapValueTween.kill(),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer)}}const se={};let ls=null,cs=null,ds=null;function Ol(r,e,t,i){if(!r||r.length===0){console.error("[DialManager INIT] No dial container elements provided.");return}if(!e||!t||!i){console.error("[DialManager INIT] CRITICAL: Missing appState, configModule, or gsap dependencies.");return}ls=e,cs=t,ds=i;for(const n in se)se[n]&&typeof se[n].destroy=="function"&&se[n].destroy(),delete se[n];r.forEach(n=>{const s=n.dataset.dialId;if(!s){console.error("[DialManager INIT] Could not find dialId for container:",n);return}se[s]&&se[s].destroy(),se[s]=new Ll(n,s,ls,cs,ds)}),console.log("[DialManager INIT] Initialization complete. Dial instances created:",Object.keys(se))}function bl(r){for(const e in se)se.hasOwnProperty(e)&&se[e]&&se[e].setActiveDimState(r)}function Rl(r=!1){for(const e in se)se.hasOwnProperty(e)&&se[e]&&se[e].resizeCanvas(r)}const wl=Object.freeze(Object.defineProperty({__proto__:null,init:Ol,resizeAllCanvases:Rl,setDialsActiveState:bl},Symbol.toStringTag,{value:"Module"}));let Be=null;function Fl(r,e){if(!e){console.error("[GridManager INIT] CRITICAL: ButtonManager instance not provided.");return}if(Be=e,!r||r.length===0){console.error("[GridManager INIT] No hue assignment column elements provided.");return}r.forEach(t=>{const i=t.dataset.assignmentTarget;if(!i){console.warn("[GridManager INIT] Column found without 'data-assignment-target'. Skipping.",t);return}const n=ke[i],s=t.querySelector(".control-group-label.label-top");t.innerHTML="",s&&t.appendChild(s);for(let a=0;a<12;a++){const o=document.createElement("div");o.classList.add("button-unit","button-unit--toggle","button-unit--s"),o.dataset.toggleValue=a.toString(),o.dataset.rowIndex=a.toString(),o.setAttribute("role","radio"),o.setAttribute("aria-label",`Assign ${i.toUpperCase()} to Hue from Row ${a+1}`);const u=document.createElement("div");u.classList.add("light-container"),u.setAttribute("aria-hidden","true");const l=document.createElement("div");l.classList.add("light"),u.appendChild(l),o.appendChild(u);const c=document.createElement("div");c.classList.add("button-bg-frame"),o.appendChild(c),t.appendChild(o),Be.addButton(o,i),o.addEventListener("mousedown",d=>{d.button===0&&Be.setPressedVisuals(d.currentTarget,!0)}),o.addEventListener("mouseup",d=>{d.button===0&&Be.setPressedVisuals(d.currentTarget,!1)}),o.addEventListener("mouseleave",d=>{d.currentTarget.classList.contains("is-pressing")&&Be.setPressedVisuals(d.currentTarget,!1)}),o.addEventListener("touchstart",d=>{Be.setPressedVisuals(d.currentTarget,!0)},{passive:!0}),o.addEventListener("touchend",d=>{Be.setPressedVisuals(d.currentTarget,!1)}),o.addEventListener("touchcancel",d=>{Be.setPressedVisuals(d.currentTarget,!1)}),o.addEventListener("click",d=>{const h=d.currentTarget,p=Y();if(p!=="interactive"){console.log(`[GridManager Click] Interaction blocked for ${i}-${a}, app not interactive. Status: ${p}`);return}const _=Be._buttons.get(h);if(!_){console.error("[GridManager Click] Clicked button not managed by ButtonManager:",h);return}const f=_.getGroupId();if(!f){console.error("[GridManager Click] Clicked button instance missing groupId:",h);return}Be.setGroupSelected(f,h.dataset.toggleValue);const g=parseInt(h.dataset.rowIndex,10),D=te[g];Jn(f,D)})}n>=0&&n<te.length&&Jn(i,te[n])})}const Ml=Object.freeze(Object.defineProperty({__proto__:null,init:Fl},Symbol.toStringTag,{value:"Module"}));let Nt={},Fe=null;function xl(r,e){if(!e){console.error("[ToggleManager INIT] CRITICAL: ButtonManager instance not provided.");return}Fe=e,(!r||r.length===0)&&console.warn("[ToggleManager INIT] No static toggle button elements provided."),Nt={},r.forEach(t=>{const i=t.closest("[data-group-id]"),n=(i==null?void 0:i.dataset.groupId)||t.dataset.groupId;if(!n){console.warn("[ToggleManager INIT] Button found without a group ID:",t);return}Nt[n]||(Nt[n]=[]),Nt[n].find(s=>s.element===t)||Nt[n].push({element:t,value:t.dataset.toggleValue}),Fe._buttons.has(t)||Fe.addButton(t,n),t.dataset.clickListenerAdded||(t.addEventListener("mousedown",s=>{s.button===0&&Fe.setPressedVisuals(s.currentTarget,!0)}),t.addEventListener("mouseup",s=>{s.button===0&&Fe.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("mouseleave",s=>{s.currentTarget.classList.contains("is-pressing")&&Fe.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("touchstart",s=>{Fe.setPressedVisuals(s.currentTarget,!0)},{passive:!0}),t.addEventListener("touchend",s=>{Fe.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("touchcancel",s=>{Fe.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("click",function(s){Mo(this,n)}),t.dataset.clickListenerAdded="true")}),Le("themeChanged",t=>{(Y()==="interactive"||document.body.classList.contains("is-transitioning-from-dim"))&&er()}),Y()==="interactive"&&er()}function Mo(r,e){const t=Y();if(t!=="interactive"){console.log(`[ToggleManager Click] Interaction blocked for group '${e}', app not interactive. Status: ${t}`);return}if(Fe.setGroupSelected(e,r.dataset.toggleValue),e==="system-power")r.dataset.toggleValue;else if(e==="light"){const i=br(),n=r.dataset.toggleValue==="on"?"light":"dark";i!==n&&wo(n)}}function er(){const r=br(),e="light";if(Nt[e]&&Nt[e].length>0){const t=r==="light"?"on":"off";Fe.setGroupSelected(e,t)}}const Bl=Object.freeze(Object.defineProperty({__proto__:null,handleToggleClick:Mo,init:xl,syncLightToggleToThemeVisuals:er},Symbol.toStringTag,{value:"Module"})),N={root:document.documentElement,body:document.body,logoContainer:null,lcdA:null,lcdB:null,terminalLcdContentElement:null};let Gt=null,ue=null;const Vi=["lcd--unlit","js-active-dim-lcd","lcd--dimly-lit"];function kl(r,e,t){console.log("[UIUpdater INIT] Initializing..."),Object.assign(N,r),Gt=e,ue=t,ue||console.error("[UIUpdater INIT] CRITICAL: GSAP instance not provided."),Gt||console.error("[UIUpdater INIT] CRITICAL: configModule not provided.");const i=["logoContainer","lcdA","lcdB","terminalLcdContentElement"];for(const n of i)if(!N[n]){console.error(`[UIUpdater INIT] CRITICAL ERROR: Required element reference "${n}" was not provided.`);return}try{Le("themeChanged",zl),Le("dialUpdated",$l),Le("dialUpdated",jl),Le("targetColorChanged",Vl),Le("trueLensPowerChanged",Yl),Le("appStatusChanged",Wl)}catch(n){console.error("[UIUpdater INIT] Error subscribing to appState events.",n);return}xo(),wr(),tr(),console.log("[UIUpdater INIT] Initialization complete.")}function oi(r,e,t={}){var c;const{skipClassChange:i=!1,useFlicker:n=!1,flickerProfileName:s="lcdScreenFlickerToDimlyLit",onComplete:a}=t;if(!r)return console.warn(`[UIUpdater setLcdState] Attempted to set state on null element. Requested state: ${e}`),a&&ue&&ue.delayedCall(0,a),{timeline:ue?ue.timeline().to({},{duration:.001}):null,completionPromise:Promise.resolve()};let o=r,u=null;r.classList.contains("hue-lcd-display")?u=r.querySelector(".lcd-value"):r.classList.contains("actual-lcd-screen-element")||(r.id==="terminal-lcd-content"?o=r.parentElement.classList.contains("actual-lcd-screen-element")?r.parentElement:r:(console.warn("[UIUpdater setLcdState] Unknown LCD element structure for:",r),u=r.querySelector(".lcd-value")||r)),o.id||o.classList[0];let l={timeline:ue?ue.timeline().to({},{duration:.001}):null,completionPromise:Promise.resolve()};if(i||(Vi.forEach(d=>{e!==d&&o.classList.remove(d)}),e&&e!=="active"&&Vi.includes(e)&&(o.classList.contains(e)||o.classList.add(e))),n&&(e==="lcd--dimly-lit"||e==="js-active-dim-lcd"))u&&(o===N.lcdA||o===N.lcdB)&&ue.set(u,{opacity:0,immediateRender:!0}),l=an(o,s,{onTimelineComplete:()=>{if(i||(Vi.forEach(d=>o.classList.remove(d)),e&&e!=="active"&&Vi.includes(e)&&o.classList.add(e)),o===N.lcdA||o===N.lcdB){const d=o===N.lcdA?"A":"B";let h="";if(d==="A"){const p=nt("A");h=p?Math.round((p.hue%360+360)%360).toString():String(Math.round(Gt.DEFAULT_DIAL_A_HUE))}else d==="B"&&(h=`${Math.round(rt()*100)}%`);mt(o,h,d),u&&ue.to(u,{opacity:1,duration:Gt.LCD_TEXT_FADE_IN_DURATION||.3,ease:"power1.inOut"})}else o.classList.contains("actual-lcd-screen-element")&&N.terminalLcdContentElement&&ue.set(N.terminalLcdContentElement,{opacity:1,visibility:"visible"});a&&a()}});else{if(e==="active"||e==="lcd--unlit")if(o===N.lcdA||o===N.lcdB){const d=o===N.lcdA?"A":"B";let h="";e==="active"?(d==="A"?h=Math.round((((c=nt("A"))==null?void 0:c.hue)%360+360)%360).toString():d==="B"&&(h=`${Math.round(rt()*100)}%`),u&&ue.set(u,{opacity:1})):u&&ue.set(u,{opacity:0}),mt(o,h,d)}else o.classList.contains("actual-lcd-screen-element")&&N.terminalLcdContentElement&&ue.set(N.terminalLcdContentElement,{opacity:e==="active"?1:0});a&&ue&&ue.delayedCall(0,a)}return l}function Ul(r){const e=Y(),t=Rr(),i=nt("A"),n=Gt.DEFAULT_DIAL_A_HUE;let s="";(r||e==="interactive"||e==="starting-up"&&t>=6)&&(s=i?Math.round((i.hue%360+360)%360).toString():String(Math.round(n))),mt(N.lcdA,s,"A"),N.lcdA.querySelector(".lcd-value")&&(N.lcdA.querySelector(".lcd-value").style.opacity=s===""?"0":"1");let a="";(r||e==="interactive"||e==="starting-up"&&t>=6)&&(a=`${Math.round(rt()*100)}%`),mt(N.lcdB,a,"B"),N.lcdB.querySelector(".lcd-value")&&(N.lcdB.querySelector(".lcd-value").style.opacity=a===""?"0":"1")}function Rr(){const r=document.getElementById("debug-phase-status");if(r){const t=r.textContent;if(t.includes("Idle"))return-1;if(t.includes("All Complete"))return 99;const i=t.match(/Phase (\d+):/i);if(i&&i[1])return parseInt(i[1],10);if(t.includes("startupPhaseP0"))return 0;if(t.includes("startupPhaseP1"))return 1}const e=Y();return e==="interactive"?99:e==="loading"?-2:e==="starting-up"&&!(r!=null&&r.textContent.includes("Phase"))?-.5:0}function Gl(){var e;const r=(e=N.logoContainer)==null?void 0:e.querySelector("svg.logo-svg");r&&(r.style.opacity="")}function Hl(){wr()}function Fi(r,e,t){const i=N.root;if(!i)return;const n=(Number(e)%360+360)%360;let s;const a=`--dynamic-${r}-chroma`,o={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},l=((d,h)=>{try{const p=getComputedStyle(i).getPropertyValue(d).trim();return p===""?h:parseFloat(p)||h}catch{return h}})(`--dynamic-${r}-chroma-base`,o[r]||.1);s=t?0:l;const c=`--dynamic-${r}-hue`;i.style.setProperty(c,n.toFixed(1)),i.style.setProperty(a,s.toFixed(4))}function mt(r,e,t){if(!r||t==="Terminal")return;const i=r.querySelector(".lcd-value");if(!i)return;const n=Y();let s=!1;const a=Rr();(n==="loading"||n==="starting-up"&&(a<6||r.classList.contains("lcd--unlit")))&&(s=!0);const o=s?"":e;i.textContent!==o&&(i.textContent=o),!s&&i.style.opacity==="0"&&n==="interactive"&&(i.style.opacity="1")}function $l(r){if(!r||r.id!=="A"||!r.state)return;const{state:e}=r,t=(e.hue%360+360)%360;N.lcdA&&mt(N.lcdA,Math.round(t).toString(),"A")}function Vl(r){!r||!r.targetKey||typeof r.hue!="number"||typeof r.isColorless!="boolean"||Fi(r.targetKey,r.hue,r.isColorless)}function zl(r){N.body&&(N.body.classList.remove("theme-dim","theme-dark","theme-light"),N.body.classList.add(`theme-${r}`))}function Yl(r){N.lcdB&&mt(N.lcdB,`${Math.round(r*100)}%`,"B")}function Wl(r){var e,t;if(r==="interactive")oi(N.lcdA,"active"),oi(N.lcdB,"active"),(e=N.terminalLcdContentElement)!=null&&e.parentElement&&N.terminalLcdContentElement.parentElement.classList.contains("actual-lcd-screen-element")&&oi(N.terminalLcdContentElement.parentElement,"active"),wr();else if(r==="starting-up"){const i=(t=N.logoContainer)==null?void 0:t.querySelector("svg.logo-svg");i&&i.style.opacity!=="0.05"&&(i.style.opacity="0.05"),tr()}else r==="loading"&&tr()}function tr(){const r=Rr();(Y()==="loading"||Y()==="starting-up"&&r<6)&&(oi(N.lcdA,"lcd--unlit",{skipClassChange:!1}),oi(N.lcdB,"lcd--unlit",{skipClassChange:!1}));const e=nt("A"),t=Gt.DEFAULT_DIAL_A_HUE,i=e?Math.round((e.hue%360+360)%360).toString():String(Math.round(t));mt(N.lcdA,i,"A");const n=`${Math.round(rt()*100)}%`;mt(N.lcdB,n,"B")}function jl(r){if(r&&r.id==="A"&&r.state){const e=(r.state.hue%360+360)%360;if(N.root){const t=getComputedStyle(N.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),i=parseFloat(t)||.2;Fi("ui-accent",e,i===0)}}}function wr(){["env","lcd","logo","btn"].forEach(n=>{const s=Or(n);s&&Fi(n,s.hue,s.isColorless)});const e=nt("A"),t=Gt.DEFAULT_DIAL_A_HUE,i=e?e.hue:t;if(N.root){const n=getComputedStyle(N.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),s=parseFloat(n)||.2;Fi("ui-accent",i,s===0)}}function xo(){if(!N.logoContainer){console.error("[UIUpdater] logoContainer element not found for SVG injection.");return}const r=N.logoContainer.querySelector("svg.logo-svg");if(r){document.body.classList.contains("theme-dim")||Y()==="starting-up"?(r.style.opacity===""||parseFloat(r.style.opacity)>.05)&&(r.style.opacity="0.05"):r.style.opacity==="0.05"&&(r.style.opacity="");return}fetch("logo.svg").then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status} for ${t.url}`);return t.text()}).then(t=>{if(!t||!t.trim().startsWith("<svg"))throw new Error("Invalid or empty SVG data.");N.logoContainer.innerHTML=t;const i=N.logoContainer.querySelector("svg.logo-svg");if(i){(document.body.classList.contains("theme-dim")||Y()==="starting-up")&&(i.style.opacity="0.05");const n=Or("logo");n&&Fi("logo",n.hue,n.isColorless)}else console.error("[UIUpdater injectLogoSVG] SVG element NOT found after innerHTML set."),N.logoContainer.innerHTML='<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Element Not Found Post-Inject</p>'}).catch(t=>{console.error("[UIUpdater] Error fetching/injecting SVG logo:",t),N.logoContainer.innerHTML=`<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Load Error: ${t.message}</p>`})}const ql=Object.freeze(Object.defineProperty({__proto__:null,finalizeThemeTransition:Hl,init:kl,injectLogoSVG:xo,prepareLogoForFullTheme:Gl,setDialLcdActiveDimState:Ul,setLcdState:oi},Symbol.toStringTag,{value:"Module"}));let ie=!1,Bo=0,Me={value:0},ei=0,Ki=null,Ve=null,pt=null,ee=null,un=null,Re=-1,Yt="",Wt=-1,ir=-1,On=-1,L=null,nr=null,ln=null;function Xl(r,e,t,i){if(!r||!e){console.error("[LensManager INIT] CRITICAL ERROR: Missing documentElement or colorLensGradientEl.");return}if(!t){console.error("[LensManager INIT] CRITICAL ERROR: Missing configModule.");return}if(!i){console.error("[LensManager INIT] CRITICAL ERROR: Missing GSAP instance.");return}pt=r,ee=e,un=document.getElementById("lens-super-glow"),L=t,ln=i,nr=Ro(a=>{if(!pt)return;const o=Math.max(0,Math.min(a,1.05));pt.style.setProperty("--lens-power",o.toFixed(3))},L.DEBOUNCE_DELAY/3),un||console.warn("[LensManager INIT] Optional #lens-super-glow element not found.");const n=rt(),s=nt("A");Re=s?(s.hue%360+360)%360:L.DEFAULT_DIAL_A_HUE,ir=Re,xr(Re),Me.value=n,ei=n,Fr(n),Le("trueLensPowerChanged",ko),Le("dialBInteractionChange",Jl),Le("dialUpdated",Ql),Le("appStatusChanged",Zl),console.log(`[LensManager INIT] Initialized. Initial masterHue: ${Re.toFixed(1)}`)}function Kl(r=null,e=null){const t=r!==null?r:L.LENS_STARTUP_TARGET_POWER,i=e!==null?e:L.LENS_STARTUP_RAMP_DURATION,n=ln.timeline(),s=rt(),a={value:s*100};return s<=1e-4&&ee&&Sn(0),n.to(a,{value:t,duration:i/1e3,ease:"sine.inOut",onStart:()=>{ee&&ee.style.opacity!=="1"&&Y()!=="loading"&&Y()!=="error"&&(ee.style.opacity="1")},onUpdate:function(){Zn(this.targets()[0].value)},onComplete:()=>{const o=a.value;Zn(o);const u=o/100*359.999,l=u*L.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG,c=nt("B")||{};En("B",{hue:u,targetHue:u,rotation:l,targetRotation:l,isDragging:c.isDragging||!1})}}),n}function Fr(r){Sn(r),Mr(r,!0)}function Mr(r,e=!1){if(pt)if(e){const t=Math.max(0,Math.min(r,1.05));pt.style.setProperty("--lens-power",t.toFixed(3))}else if(nr)nr(r);else{const t=Math.max(0,Math.min(r,1.05));pt.style.setProperty("--lens-power",t.toFixed(3)),console.warn("[LensManager _setLegacyLensPowerVar] debouncedSetLegacyLensPowerVar not initialized, applying immediately.")}}function xr(r){if(!pt||!L)return;const e=(Number(r)%360+360)%360;(Math.abs(e-On)>=L.HUE_UPDATE_THRESHOLD||On===-1)&&(pt.style.setProperty("--dynamic-lens-super-glow-hue",e.toFixed(1)),On=e)}function Ql(r){if(!(Y()==="loading"||Y()==="error"||!L)&&r&&r.id==="A"&&r.state){const e=(r.state.hue%360+360)%360,t=Math.abs(e-Re);if(Math.min(t,360-t)>=L.HUE_UPDATE_THRESHOLD){Re=e,xr(Re);const n=Me.value+(ie?Uo(performance.now()):0);Fr(n)}}}function xt(r=!1){const e=Me.value+(ie?Uo(performance.now()):0);Mr(e,r),Sn(e)}function Sn(r){var p;if(!ee||!L)return;const e=Y(),t=r<=1e-4;if(e==="loading"||e==="starting-up"&&t&&((p=nt("B"))==null?void 0:p.hue)<=1e-4){ee.style.opacity!=="0"&&(ee.style.opacity="0"),ee.style.background!=="none"&&(ee.style.background="none",Yt="none"),Wt=r;return}if(e==="error"){ee.style.opacity!=="0"&&(ee.style.opacity="0"),ee.style.background!=="none"&&(ee.style.background="none",Yt="none"),Wt=r;return}ee.style.opacity!=="1"&&(ee.style.opacity="1");const i=Math.abs(r-Wt)>=1e-4,n=Math.abs(Re-ir)>=L.HUE_UPDATE_THRESHOLD;let s=i||n;if(t&&(Yt==="none"||Wt>1e-4)&&(s=!0),!s&&Yt!==""&&Yt!=="none"){Wt=r;return}const a=Math.max(L.LENS_GRADIENT_BREAKPOINTS[0].power,r);let o=L.LENS_GRADIENT_BREAKPOINTS[0],u=L.LENS_GRADIENT_BREAKPOINTS[0];for(let _=0;_<L.LENS_GRADIENT_BREAKPOINTS.length;_++){if(a<=L.LENS_GRADIENT_BREAKPOINTS[_].power){u=L.LENS_GRADIENT_BREAKPOINTS[_],o=_>0?L.LENS_GRADIENT_BREAKPOINTS[_-1]:L.LENS_GRADIENT_BREAKPOINTS[0];break}_===L.LENS_GRADIENT_BREAKPOINTS.length-1&&(o=L.LENS_GRADIENT_BREAKPOINTS[_],u=L.LENS_GRADIENT_BREAKPOINTS[_])}let l=0;u.power>o.power?(l=(Math.max(o.power,Math.min(r,u.power))-o.power)/(u.power-o.power),l=Math.max(0,Math.min(l,1))):r<=o.power?l=0:l=1,t&&(l=0,o=L.LENS_GRADIENT_BREAKPOINTS[0],u=L.LENS_GRADIENT_BREAKPOINTS[0]);const c=[];for(let _=0;_<L.NUM_LENS_GRADIENT_STOPS;_++){const f=o.stops[_],g=u.stops[_];if(!f||!g){console.warn(`[LensManager] Missing stop data at index ${_} for power ${r}`),c.push("oklch(0 0 0) 0%");continue}const D=f.l+l*(g.l-f.l),E=f.c+l*(g.c-f.c),T=f.pos+l*(g.pos-f.pos);let y=f.type==="hotspot"?Re+L.LENS_HOTSPOT_HUE_OFFSET:f.type==="main"?Re:0;y=(y%360+360)%360,c.push(`oklch(${D.toFixed(3)} ${E.toFixed(3)} ${y.toFixed(1)}) ${(T*100).toFixed(2)}%`)}L.LENS_GRADIENT_BREAKPOINTS[0].stops[L.NUM_LENS_GRADIENT_STOPS-1].pos*100<99.9&&c.push("oklch(0 0 0 / 0) 100%");const h=`radial-gradient(circle at 50% 50%, ${c.join(", ")})`;ee.style.background!==h&&(ee.style.background=h),Yt=h,Wt=r,ir=Re}function ko(r){if(!L||!ln)return;ei=r,Ve&&Ve.kill();const e=Y()==="starting-up",t=Dn()==="idle";e||!t?(Me.value=ei,ie||xt(!0)):Ve=ln.to(Me,{value:ei,duration:L.LENS_OSCILLATION_SMOOTHING_DURATION,ease:"power1.out",onUpdate:()=>{ie||xt()},onComplete:()=>{Ve=null,ie||xt(!0),Y()==="interactive"&&Me.value>=L.LENS_OSCILLATION_THRESHOLD&&!ie&&rr()}}),(ei<L.LENS_OSCILLATION_THRESHOLD||!t||e)&&ie&&cn(),Y()==="interactive"&&t&&Me.value>=L.LENS_OSCILLATION_THRESHOLD&&!ie&&rr()}function Jl(r){L&&(r==="dragging"||r==="settling"?(ie&&cn(),Ve&&Ve.kill(),Me.value=rt(),xt(!0)):r==="idle"&&ko(rt()))}function Zl(r){if(L){if(r==="loading"||r==="error"){ie&&cn(),Ve&&Ve.kill(),Me.value=0,ei=0,Sn(0),Mr(0,!0),un&&(un.style.opacity="0");return}xt(!0),xr(Re),r==="interactive"?Dn()==="idle"&&Me.value>=L.LENS_OSCILLATION_THRESHOLD&&!ie&&rr():(ie&&cn(),r==="starting-up"&&Ve&&Ve.kill())}}function rr(){L&&(ie||Y()!=="interactive"||Dn()!=="idle"||(ie=!0,Bo=performance.now(),Go(performance.now())))}function cn(){ie&&(ie=!1,Ki&&cancelAnimationFrame(Ki),Ki=null,xt(!0))}function Uo(r){if(!ie||!L)return 0;const e=(r-Bo)/1e3,t=Math.max(0,Me.value-L.LENS_OSCILLATION_THRESHOLD),i=1-L.LENS_OSCILLATION_THRESHOLD,n=i>0?Math.min(1,t/i):0,s=L.LENS_OSCILLATION_AMPLITUDE_MIN+n*L.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,a=Al(n,0,1,L.LENS_OSCILLATION_PERIOD_AT_THRESHOLD,L.LENS_OSCILLATION_PERIOD_AT_MAX_POWER);return a<=.001?0:Math.sin(2*Math.PI/a*e)*s}function Go(r){ie&&(xt(),Ki=requestAnimationFrame(Go))}const ec=Object.freeze(Object.defineProperty({__proto__:null,directUpdateLensVisuals:Fr,energizeLensCoreStartup:Kl,init:Xl},Symbol.toStringTag,{value:"Module"}));function tc(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function ic(){const r=tc();if(r.__xstate__)return r.__xstate__}const nc=r=>{if(typeof window>"u")return;const e=ic();e&&e.register(r)};class hs{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Ho=".",rc="",$o="",sc="#",oc="*",Vo="xstate.init",dn="xstate.stop";function ac(r,e){return{type:`xstate.after.${r}.${e}`}}function sr(r,e){return{type:`xstate.done.state.${r}`,output:e}}function uc(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function lc(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function zo(r){return{type:Vo,input:r}}function qe(r){setTimeout(()=>{throw r})}const cc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yo(r,e){const t=fs(r),i=fs(e);return typeof i=="string"?typeof t=="string"?i===t:!1:typeof t=="string"?t in i:Object.keys(t).every(n=>n in i?Yo(t[n],i[n]):!1)}function Br(r){if(jo(r))return r;const e=[];let t="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:t+=r[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=r[i]}return e.push(t),e}function fs(r){if(Yc(r))return r.value;if(typeof r!="string")return r;const e=Br(r);return dc(e)}function dc(r){if(r.length===1)return r[0];const e={};let t=e;for(let i=0;i<r.length-1;i++)if(i===r.length-2)t[r[i]]=r[i+1];else{const n=t;t={},n[r[i]]=t}return e}function ps(r,e){const t={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];t[s]=e(r[s],s,r,n)}return t}function Wo(r){return jo(r)?r:[r]}function dt(r){return r===void 0?[]:Wo(r)}function or(r,e,t,i){return typeof r=="function"?r({context:e,event:t,self:i}):r}function jo(r){return Array.isArray(r)}function hc(r){return r.type.startsWith("xstate.error.actor")}function Qt(r){return Wo(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function qo(r){if(!(r===void 0||r===rc))return dt(r)}function ar(r,e,t){var s,a,o;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(a=i?r.error:e)==null?void 0:a.bind(n),complete:(o=i?r.complete:t)==null?void 0:o.bind(n)}}function _s(r,e){return`${e}.${r}`}function kr(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,i,n]=t,a=r.getStateNodeById(n).config.invoke;return(Array.isArray(a)?a[i]:a).src}function gs(r,e){return`${r.sessionId}.${e}`}let fc=0;function pc(r,e){const t=new Map,i=new Map,n=new WeakMap,s=new Set,a={},{clock:o,logger:u}=e,l={schedule:(h,p,_,f,g=Math.random().toString(36).slice(2))=>{const D={source:h,target:p,event:_,delay:f,id:g,startedAt:Date.now()},E=gs(h,g);d._snapshot._scheduledEvents[E]=D;const T=o.setTimeout(()=>{delete a[E],delete d._snapshot._scheduledEvents[E],d._relay(h,p,_)},f);a[E]=T},cancel:(h,p)=>{const _=gs(h,p),f=a[_];delete a[_],delete d._snapshot._scheduledEvents[_],f!==void 0&&o.clearTimeout(f)},cancelAll:h=>{for(const p in d._snapshot._scheduledEvents){const _=d._snapshot._scheduledEvents[p];_.source===h&&l.cancel(h,_.id)}}},c=h=>{if(!s.size)return;const p={...h,rootId:r.sessionId};s.forEach(_=>{var f;return(f=_.next)==null?void 0:f.call(_,p)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${fc++}`,_register:(h,p)=>(t.set(h,p),h),_unregister:h=>{t.delete(h.sessionId);const p=n.get(h);p!==void 0&&(i.delete(p),n.delete(h))},get:h=>i.get(h),_set:(h,p)=>{const _=i.get(h);if(_&&_!==p)throw new Error(`Actor with system ID '${h}' already exists.`);i.set(h,p),n.set(p,h)},inspect:h=>{const p=ar(h);return s.add(p),{unsubscribe(){s.delete(p)}}},_sendInspectionEvent:c,_relay:(h,p,_)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:p,event:_}),p._send(_)},scheduler:l,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const p in h){const{source:_,target:f,event:g,delay:D,id:E}=h[p];l.schedule(_,f,g,D,E)}},_clock:o,_logger:u};return d}let bn=!1;const Ur=1;let pe=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const _c={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class gc{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new hs(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=pe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={..._c,...t},{clock:n,logger:s,parent:a,syncSnapshot:o,id:u,systemId:l,inspect:c}=i;this.system=a?a.system:pc(this,{clock:n,logger:s}),c&&!a&&this.system.inspect(ar(c)),this.sessionId=this.system._bookId(),this.id=u??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=a,this._syncSnapshot=o,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),p=this.eventListeners.get("*");if(!h&&!p)return;const _=[...h?h.values():[],...p?p.values():[]];for(const f of _)f(d)},actionExecutor:d=>{const h=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:d.type,params:d.params}}),!d.exec)return;const p=bn;try{bn=!0,d.exec(d.info,d.params)}finally{bn=p}};this._processingStatus===pe.Running?h():this._deferred.push(h)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),l&&(this._systemId=l,this.system._set(l,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),l&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(e,t){var n,s;this._snapshot=e;let i;for(;i=this._deferred.shift();)try{i()}catch(a){this._deferred.length=0,this._snapshot={...e,status:"error",error:a}}switch(this._snapshot.status){case"active":for(const a of this.observers)try{(n=a.next)==null||n.call(a,e)}catch(o){qe(o)}break;case"done":for(const a of this.observers)try{(s=a.next)==null||s.call(a,e)}catch(o){qe(o)}this._stopProcedure(),this._complete(),this._doneEvent=uc(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){var s;const n=ar(e,t,i);if(this._processingStatus!==pe.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(a){qe(a)}break;case"error":{const a=this._snapshot.error;if(!n.error)qe(a);else try{n.error(a)}catch(o){qe(o)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const n=t.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===pe.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=pe.Running;const e=zo(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(t,e),e.type===dn&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===pe.Stopped?this:(this.mailbox.clear(),this._processingStatus===pe.NotStarted?(this._processingStatus=pe.Stopped,this):(this.mailbox.enqueue({type:dn}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(i){qe(i)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||qe(e);return}let t=!1;for(const i of this.observers){const n=i.error;t||(t=!n);try{n==null||n(e)}catch(s){qe(s)}}this.observers.clear(),t&&qe(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,lc(this.id,e))}_stopProcedure(){return this._processingStatus!==pe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new hs(this._process.bind(this)),this._processingStatus=pe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==pe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:nc)(this)}toJSON(){return{xstate$$type:Ur,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[cc](){return this}getSnapshot(){return this._snapshot}}function Mi(r,...[e]){return new gc(r,e)}const mc=Mi;function Dc(r,e,t,i,{sendId:n}){const s=typeof n=="function"?n(t,i):n;return[e,{sendId:s},void 0]}function Ec(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function Sc(r){function e(t,i){}return e.type="xstate.cancel",e.sendId=r,e.resolve=Dc,e.execute=Ec,e}function Tc(r,e,t,i,{id:n,systemId:s,src:a,input:o,syncSnapshot:u}){const l=typeof a=="string"?kr(e.machine,a):a,c=typeof n=="function"?n(t):n;let d,h;return l&&(h=typeof o=="function"?o({context:e.context,event:t.event,self:r.self}):o,d=Mi(l,{id:c,src:a,parent:r.self,syncSnapshot:u,systemId:s,input:h})),[Ht(e,{children:{...e.children,[c]:d}}),{id:n,systemId:s,actorRef:d,src:a,input:h},void 0]}function yc(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==pe.Stopped&&e.start()})}function Ac(...[r,{id:e,systemId:t,input:i,syncSnapshot:n=!1}={}]){function s(a,o){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=Tc,s.execute=yc,s}function Cc(r,e,t,i,{actorRef:n}){const s=typeof n=="function"?n(t,i):n,a=typeof s=="string"?e.children[s]:s;let o=e.children;return a&&(o={...o},delete o[a.id]),[Ht(e,{children:o}),a,void 0]}function Ic(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==pe.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function Xo(r){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=Cc,e.execute=Ic,e}function Gr(r,e,t,i){const{machine:n}=i,s=typeof r=="function",a=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!a)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof a!="function")return Gr(a,e,t,i);const o={context:e,event:t},u=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in a?a.check(i,o,a):a(o,u)}const Hr=r=>r.type==="atomic"||r.type==="final";function fi(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Gi(r,e){const t=[];if(e===r)return t;let i=r.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function hn(r){const e=new Set(r),t=Qo(e);for(const i of e)if(i.type==="compound"&&(!t.get(i)||!t.get(i).length))ms(i).forEach(n=>e.add(n));else if(i.type==="parallel"){for(const n of fi(i))if(n.type!=="history"&&!e.has(n)){const s=ms(n);for(const a of s)e.add(a)}}for(const i of e){let n=i.parent;for(;n;)e.add(n),n=n.parent}return e}function Ko(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const n=t[0];if(n){if(Hr(n))return n.key}else return{}}const i={};for(const n of t)i[n.key]=Ko(n,e);return i}function Qo(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function Jo(r,e){const t=hn(e);return Ko(r,Qo(t))}function $r(r,e){return e.type==="compound"?fi(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?fi(e).every(t=>$r(r,t)):e.type==="final"}const Tn=r=>r[0]===sc;function Pc(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(i=>{if(i===oc)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=e.split(".");for(let a=0;a<n.length;a++){const o=n[a],u=s[a];if(o==="*")return a===n.length-1;if(o!==u)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function vc(r){const e=r.config.after;if(!e)return[];const t=n=>{const s=ac(n,r.id),a=s.type;return r.entry.push(td(s,{id:a,delay:n})),r.exit.push(Sc(a)),a};return Object.keys(e).flatMap(n=>{const s=e[n],a=typeof s=="string"?{target:s}:s,o=Number.isNaN(+n)?n:+n,u=t(o);return dt(a).map(l=>({...l,event:u,delay:o}))}).map(n=>{const{delay:s}=n;return{...Lt(r,n.event,n),delay:s}})}function Lt(r,e,t){const i=qo(t.target),n=t.reenter??!1,s=Oc(r,i),a={...t,actions:dt(t.actions),guard:t.guard,target:s,source:r,reenter:n,eventType:e,toJSON:()=>({...a,source:`#${r.id}`,target:s?s.map(o=>`#${o.id}`):void 0})};return a}function Nc(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===$o)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[t];e.set(t,Qt(i).map(n=>Lt(r,t,n)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,Qt(r.config.onDone).map(i=>Lt(r,t,i)))}for(const t of r.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,Qt(t.onDone).map(n=>Lt(r,i,n)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,Qt(t.onError).map(n=>Lt(r,i,n)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,Qt(t.onSnapshot).map(n=>Lt(r,i,n)))}}for(const t of r.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}function Lc(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const i={source:r,actions:!e||typeof e=="string"?[]:dt(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return i}function Oc(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(Tn(t))return r.machine.getStateNodeById(t);const i=t[0]===Ho;if(i&&!r.parent)return xi(r,t.slice(1));const n=i?r.key+t:t;if(r.parent)try{return xi(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function Zo(r){const e=qo(r.config.target);return e?{target:e.map(t=>typeof t=="string"?xi(r.parent,t):t)}:r.parent.initial}function bt(r){return r.type==="history"}function ms(r){const e=ea(r);for(const t of e)for(const i of Gi(t,r))e.add(i);return e}function ea(r){const e=new Set;function t(i){if(!e.has(i)){if(e.add(i),i.type==="compound")t(i.initial.target[0]);else if(i.type==="parallel")for(const n of fi(i))t(n)}}return t(r),e}function pi(r,e){if(Tn(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function xi(r,e){if(typeof e=="string"&&Tn(e))try{return r.machine.getStateNodeById(e)}catch{}const t=Br(e).slice();let i=r;for(;t.length;){const n=t.shift();if(!n.length)break;i=pi(i,n)}return i}function fn(r,e){if(typeof e=="string"){const n=r.states[e];if(!n)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,n]}const t=Object.keys(e),i=t.map(n=>pi(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,t.reduce((n,s)=>{const a=pi(r,s);if(!a)return n;const o=fn(a,e[s]);return n.concat(o)},[]))}function bc(r,e,t,i){const s=pi(r,e).next(t,i);return!s||!s.length?r.next(t,i):s}function Rc(r,e,t,i){const n=Object.keys(e),s=pi(r,n[0]),a=Vr(s,e[n[0]],t,i);return!a||!a.length?r.next(t,i):a}function wc(r,e,t,i){const n=[];for(const s of Object.keys(e)){const a=e[s];if(!a)continue;const o=pi(r,s),u=Vr(o,a,t,i);u&&n.push(...u)}return n.length?n:r.next(t,i)}function Vr(r,e,t,i){return typeof e=="string"?bc(r,e,t,i):Object.keys(e).length===1?Rc(r,e,t,i):wc(r,e,t,i)}function Fc(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function Dt(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Mc(r,e){const t=new Set(r),i=new Set(e);for(const n of t)if(i.has(n))return!0;for(const n of i)if(t.has(n))return!0;return!1}function ta(r,e,t){const i=new Set;for(const n of r){let s=!1;const a=new Set;for(const o of i)if(Mc(ur([n],e,t),ur([o],e,t)))if(Dt(n.source,o.source))a.add(o);else{s=!0;break}if(!s){for(const o of a)i.delete(o);i.add(n)}}return Array.from(i)}function xc(r){const[e,...t]=r;for(const i of Gi(e,void 0))if(t.every(n=>Dt(n,i)))return i}function zr(r,e){if(!r.target)return[];const t=new Set;for(const i of r.target)if(bt(i))if(e[i.id])for(const n of e[i.id])t.add(n);else for(const n of zr(Zo(i),e))t.add(n);else t.add(i);return[...t]}function ia(r,e){const t=zr(r,e);if(!t)return;if(!r.reenter&&t.every(n=>n===r.source||Dt(n,r.source)))return r.source;const i=xc(t.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function ur(r,e,t){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const a=ia(s,t);s.reenter&&s.source===a&&i.add(a);for(const o of e)Dt(o,a)&&i.add(o)}return[...i]}function Bc(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function lr(r,e,t,i,n,s){if(!r.length)return e;const a=new Set(e._nodes);let o=e.historyValue;const u=ta(r,a,o);let l=e;n||([l,o]=Hc(l,i,t,u,a,o,s,t.actionExecutor)),l=_i(l,i,t,u.flatMap(d=>d.actions),s,void 0),l=Uc(l,i,t,u,a,s,o,n);const c=[...a];l.status==="done"&&(l=_i(l,i,t,c.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s,void 0));try{return o===e.historyValue&&Bc(e._nodes,a)?l:Ht(l,{_nodes:c,historyValue:o})}catch(d){throw d}}function kc(r,e,t,i,n){if(i.output===void 0)return;const s=sr(n.id,n.output!==void 0&&n.parent?or(n.output,r.context,e,t.self):void 0);return or(i.output,r.context,s,t.self)}function Uc(r,e,t,i,n,s,a,o){let u=r;const l=new Set,c=new Set;Gc(i,a,c,l),o&&c.add(r.machine.root);const d=new Set;for(const h of[...l].sort((p,_)=>p.order-_.order)){n.add(h);const p=[];p.push(...h.entry);for(const _ of h.invoke)p.push(Ac(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(c.has(h)){const _=h.initial.actions;p.push(..._)}if(u=_i(u,e,t,p,s,h.invoke.map(_=>_.id)),h.type==="final"){const _=h.parent;let f=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,g=f||h;for((_==null?void 0:_.type)==="compound"&&s.push(sr(_.id,h.output!==void 0?or(h.output,u.context,e,t.self):void 0));(f==null?void 0:f.type)==="parallel"&&!d.has(f)&&$r(n,f);)d.add(f),s.push(sr(f.id)),g=f,f=f.parent;if(f)continue;u=Ht(u,{status:"done",output:kc(u,e,t,u.machine.root,g)})}}return u}function Gc(r,e,t,i){for(const n of r){const s=ia(n,e);for(const o of n.target||[])!bt(o)&&(n.source!==o||n.source!==s||n.reenter)&&(i.add(o),t.add(o)),ti(o,e,t,i);const a=zr(n,e);for(const o of a){const u=Gi(o,s);(s==null?void 0:s.type)==="parallel"&&u.push(s),na(i,e,t,u,!n.source.parent&&n.reenter?void 0:s)}}}function ti(r,e,t,i){var n;if(bt(r))if(e[r.id]){const s=e[r.id];for(const a of s)i.add(a),ti(a,e,t,i);for(const a of s)Rn(a,r.parent,i,e,t)}else{const s=Zo(r);for(const a of s.target)i.add(a),s===((n=r.parent)==null?void 0:n.initial)&&t.add(r.parent),ti(a,e,t,i);for(const a of s.target)Rn(a,r.parent,i,e,t)}else if(r.type==="compound"){const[s]=r.initial.target;bt(s)||(i.add(s),t.add(s)),ti(s,e,t,i),Rn(s,r,i,e,t)}else if(r.type==="parallel")for(const s of fi(r).filter(a=>!bt(a)))[...i].some(a=>Dt(a,s))||(bt(s)||(i.add(s),t.add(s)),ti(s,e,t,i))}function na(r,e,t,i,n){for(const s of i)if((!n||Dt(s,n))&&r.add(s),s.type==="parallel")for(const a of fi(s).filter(o=>!bt(o)))[...r].some(o=>Dt(o,a))||(r.add(a),ti(a,e,t,r))}function Rn(r,e,t,i,n){na(t,i,n,Gi(r,e))}function Hc(r,e,t,i,n,s,a,o){let u=r;const l=ur(i,n,s);l.sort((d,h)=>h.order-d.order);let c;for(const d of l)for(const h of Fc(d)){let p;h.history==="deep"?p=_=>Hr(_)&&Dt(_,d):p=_=>_.parent===d,c??(c={...s}),c[h.id]=Array.from(n).filter(p)}for(const d of l)u=_i(u,e,t,[...d.exit,...d.invoke.map(h=>Xo(h.id))],a,void 0),n.delete(d);return[u,c||s]}function $c(r,e){return r.implementations.actions[e]}function ra(r,e,t,i,n,s){const{machine:a}=r;let o=r;for(const u of i){const l=typeof u=="function",c=l?u:$c(a,typeof u=="string"?u:u.type),d={context:o.context,event:e,self:t.self,system:t.system},h=l||typeof u=="string"?void 0:"params"in u?typeof u.params=="function"?u.params({context:o.context,event:e}):u.params:void 0;if(!c||!("resolve"in c)){t.actionExecutor({type:typeof u=="string"?u:typeof u=="object"?u.type:u.name||"(anonymous)",info:d,params:h,exec:c});continue}const p=c,[_,f,g]=p.resolve(t,o,d,h,c,n);o=_,"retryResolve"in p&&(s==null||s.push([p,f])),"execute"in p&&t.actionExecutor({type:p.type,info:d,params:f,exec:p.execute.bind(null,t,f)}),g&&(o=ra(o,e,t,g,n,s))}return o}function _i(r,e,t,i,n,s){const a=s?[]:void 0,o=ra(r,e,t,i,{internalQueue:n,deferredActorIds:s},a);return a==null||a.forEach(([u,l])=>{u.retryResolve(t,o,l)}),o}function wn(r,e,t,i){let n=r;const s=[];function a(l,c,d){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:c,snapshot:l,_transitions:d}),s.push(l)}if(e.type===dn)return n=Ht(Ds(n,e,t),{status:"stopped"}),a(n,e,[]),{snapshot:n,microstates:s};let o=e;if(o.type!==Vo){const l=o,c=hc(l),d=Es(l,n);if(c&&!d.length)return n=Ht(r,{status:"error",error:l.error}),a(n,l,[]),{snapshot:n,microstates:s};n=lr(d,r,t,o,!1,i),a(n,l,d)}let u=!0;for(;n.status==="active";){let l=u?Vc(n,o):[];const c=l.length?n:void 0;if(!l.length){if(!i.length)break;o=i.shift(),l=Es(o,n)}n=lr(l,n,t,o,!1,i),u=n!==c,a(n,o,l)}return n.status!=="active"&&Ds(n,o,t),{snapshot:n,microstates:s}}function Ds(r,e,t){return _i(r,e,t,Object.values(r.children).map(i=>Xo(i)),[],void 0)}function Es(r,e){return e.machine.getTransitionData(e,r)}function Vc(r,e){const t=new Set,i=r._nodes.filter(Hr);for(const n of i)e:for(const s of[n].concat(Gi(n,void 0)))if(s.always){for(const a of s.always)if(a.guard===void 0||Gr(a.guard,r.context,e,r)){t.add(a);break e}}return ta(Array.from(t),new Set(r._nodes),r.historyValue)}function zc(r,e){const t=hn(fn(r,e));return Jo(r,[...t])}function Yc(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Wc=function(e){return Yo(e,this.value)},jc=function(e){return this.tags.has(e)},qc=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(i=>i.target!==void 0||i.actions.length)},Xc=function(){const{_nodes:e,tags:t,machine:i,getMeta:n,toJSON:s,can:a,hasTag:o,matches:u,...l}=this;return{...l,tags:Array.from(t)}},Kc=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function Qi(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:Jo(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:Wc,hasTag:jc,can:qc,getMeta:Kc,toJSON:Xc}}function Ht(r,e={}){return Qi({...r,...e},r.machine)}function Qc(r){if(typeof r!="object"||r===null)return{};const e={};for(const t in r){const i=r[t];Array.isArray(i)&&(e[t]=i.map(n=>({id:n.id})))}return e}function Jc(r,e){const{_nodes:t,tags:i,machine:n,children:s,context:a,can:o,hasTag:u,matches:l,getMeta:c,toJSON:d,...h}=r,p={};for(const f in s){const g=s[f];p[f]={snapshot:g.getPersistedSnapshot(e),src:g.src,systemId:g._systemId,syncSnapshot:g._syncSnapshot}}return{...h,context:sa(a),children:p,historyValue:Qc(h.historyValue)}}function sa(r){let e;for(const t in r){const i=r[t];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)e??(e=Array.isArray(r)?r.slice():{...r}),e[t]={xstate$$type:Ur,id:i.id};else{const n=sa(i);n!==i&&(e??(e=Array.isArray(r)?r.slice():{...r}),e[t]=n)}}return e??r}function Zc(r,e,t,i,{event:n,id:s,delay:a},{internalQueue:o}){const u=e.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const l=typeof n=="function"?n(t,i):n;let c;if(typeof a=="string"){const d=u&&u[a];c=typeof d=="function"?d(t,i):d}else c=typeof a=="function"?a(t,i):a;return typeof c!="number"&&o.push(l),[e,{event:l,id:s,delay:c},void 0]}function ed(r,e){const{event:t,delay:i,id:n}=e;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,i,n)});return}}function td(r,e){function t(i,n){}return t.type="xstate.raise",t.event=r,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=Zc,t.execute=ed,t}const Ss="xstate.promise.resolve",Ts="xstate.promise.reject",zi=new WeakMap;function id(r){return{config:r,transition:(t,i,n)=>{var s;if(t.status!=="active")return t;switch(i.type){case Ss:{const a=i.data;return{...t,status:"done",output:a,input:void 0}}case Ts:return{...t,status:"error",error:i.data,input:void 0};case dn:return(s=zi.get(n.self))==null||s.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:i,system:n,emit:s})=>{if(t.status!=="active")return;const a=new AbortController;zi.set(i,a),Promise.resolve(r({input:t.input,system:n,self:i,signal:a.signal,emit:s})).then(u=>{i.getSnapshot().status==="active"&&(zi.delete(i),n._relay(i,i,{type:Ss,data:u}))},u=>{i.getSnapshot().status==="active"&&(zi.delete(i),n._relay(i,i,{type:Ts,data:u}))})},getInitialSnapshot:(t,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function nd(r,{machine:e,context:t},i,n){const s=(a,o)=>{if(typeof a=="string"){const u=kr(e,a);if(!u)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const l=Mi(u,{id:o==null?void 0:o.id,parent:r.self,syncSnapshot:o==null?void 0:o.syncSnapshot,input:typeof(o==null?void 0:o.input)=="function"?o.input({context:t,event:i,self:r.self}):o==null?void 0:o.input,src:a,systemId:o==null?void 0:o.systemId});return n[l.id]=l,l}else return Mi(a,{id:o==null?void 0:o.id,parent:r.self,syncSnapshot:o==null?void 0:o.syncSnapshot,input:o==null?void 0:o.input,src:a,systemId:o==null?void 0:o.systemId})};return(a,o)=>{const u=s(a,o);return n[u.id]=u,r.defer(()=>{u._processingStatus!==pe.Stopped&&u.start()}),u}}function rd(r,e,t,i,{assignment:n}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},a={context:e.context,event:t.event,spawn:nd(r,e,t.event,s),self:r.self,system:r.system};let o={};if(typeof n=="function")o=n(a,i);else for(const l of Object.keys(n)){const c=n[l];o[l]=typeof c=="function"?c(a,i):c}const u=Object.assign({},e.context,o);return[Ht(e,{context:u,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function ae(r){function e(t,i){}return e.type="xstate.assign",e.assignment=r,e.resolve=rd,e}const ys=new WeakMap;function jt(r,e,t){let i=ys.get(r);return i?e in i||(i[e]=t()):(i={[e]:t()},ys.set(r,i)),i[e]}const sd={},Ei=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class Pi{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Ho),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ps(this.config.states,(i,n)=>new Pi(i,{_parent:this,_key:n,_machine:this.machine})):sd,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=dt(this.config.entry).slice(),this.exit=dt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=dt(e.tags).slice()}_initialize(){this.transitions=Nc(this),this.config.always&&(this.always=Qt(this.config.always).map(e=>Lt(this,$o,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Ei),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Ei),eventType:null})}:void 0,history:this.history,states:ps(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Ei)})),entry:this.entry.map(Ei),exit:this.exit.map(Ei),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return jt(this,"invoke",()=>dt(this.config.invoke).map((e,t)=>{const{src:i,systemId:n}=e,s=e.id??_s(this.id,t),a=typeof i=="string"?i:`xstate.invoke.${_s(this.id,t)}`;return{...e,src:a,id:s,systemId:n,toJSON(){const{onDone:o,onError:u,...l}=e;return{...l,type:"xstate.invoke",src:a,id:s}}}}))}get on(){return jt(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(n=>[t,n])).reduce((t,[i,n])=>(t[i]=t[i]||[],t[i].push(n),t),{}))}get after(){return jt(this,"delayedTransitions",()=>vc(this))}get initial(){return jt(this,"initial",()=>Lc(this,this.config.initial))}next(e,t){const i=t.type,n=[];let s;const a=jt(this,`candidates-${i}`,()=>Pc(this,i));for(const o of a){const{guard:u}=o,l=e.context;let c=!1;try{c=!u||Gr(u,l,t,e)}catch(d){const h=typeof u=="string"?u:typeof u=="object"?u.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${i}' in state node '${this.id}':
${d.message}`)}if(c){n.push(...o.actions),s=o;break}}return s?[s]:void 0}get events(){return jt(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const n=e[i];if(n.states)for(const s of n.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}const od="#";class Yr{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Pi(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:n,delays:s}=this.implementations;return new Yr(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...n,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=zc(this.root,e.value),i=hn(fn(this.root,t));return Qi({_nodes:[...i],context:e.context||{},children:{},status:$r(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return wn(e,t,i,[]).snapshot}microstep(e,t,i){return wn(e,t,i,[]).microstates}getTransitionData(e,t){return Vr(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:n}=this.config,s=Qi({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?_i(s,t,e,[ae(({spawn:o,event:u,self:l})=>n({spawn:o,input:u.input,self:l}))],i,void 0):s}getInitialSnapshot(e,t){const i=zo(t),n=[],s=this.getPreInitialState(e,i,n),a=lr([{target:[...ea(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,i,!0,n),{snapshot:o}=wn(a,i,e,n);return o}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=Br(e),i=t.slice(1),n=Tn(t[0])?t[0].slice(od.length):t[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return xi(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return Jc(e,t)}restoreSnapshot(e,t){const i={},n=e.children;Object.keys(n).forEach(d=>{const h=n[d],p=h.snapshot,_=h.src,f=typeof _=="string"?kr(this,_):_;if(!f)return;const g=Mi(f,{id:d,parent:t.self,syncSnapshot:h.syncSnapshot,snapshot:p,src:_,systemId:h.systemId});i[d]=g});function s(d,h){try{return h.machine.getStateNodeById(d)}catch{try{return xi(h,d.split("."))}catch{return d}}}function a(d,h){if(!d||typeof d!="object")return{};const p={};for(const _ in d){const f=d[_];p[_]=f.map(g=>{if(g instanceof Pi)return g;if(typeof g=="object"&&"id"in g&&typeof g.id=="string"){const D=s(g.id,h);if(D instanceof Pi)return D}}).filter(g=>g!==void 0),p[_].length===0&&delete p[_]}return p}const o=a(e.historyValue,this.root),u=Qi({...e,children:i,_nodes:Array.from(hn(fn(this.root,e.value))),historyValue:o},this),l=new Set;function c(d,h){if(!l.has(d)){l.add(d);for(const p in d){const _=d[p];if(_&&typeof _=="object"){if("xstate$$type"in _&&_.xstate$$type===Ur){d[p]=h[_.id];continue}c(_,h)}}}}return c(u.context,i),u}}function ad(r,e){return new Yr(r,e)}const ve=r=>id(async({input:e})=>{const t=await import(r);if(!t||typeof t.createPhaseTimeline!="function")throw console.error(`Error importing or finding createPhaseTimeline in ${r}`),new Error(`Failed to load phase module: ${r}`);return t.createPhaseTimeline(e.dependencies)}),ud=ad({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{dependencies:null,isStepThroughMode:!0,currentPhaseNameForResume:"",errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_SEQUENCE.PHASE_0_IDLE",actions:[ae({isStepThroughMode:({event:r})=>r.isStepThroughMode,dependencies:({event:r})=>r.dependencies,themeTransitionCleanupPerformed:!1,errorInfo:null}),"logStartSequence"]}}},RUNNING_SEQUENCE:{initial:"PHASE_0_IDLE",states:{PHASE_0_IDLE:{invoke:{id:"phaseP0Service",src:ve("./startupPhase0.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_1_EMERGENCY_SUBSYSTEMS"})},{target:"PHASE_1_EMERGENCY_SUBSYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_1_EMERGENCY_SUBSYSTEMS:{invoke:{id:"phaseP1Service",src:ve("./startupPhase1.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_2_BACKUP_POWER"})},{target:"PHASE_2_BACKUP_POWER"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_2_BACKUP_POWER:{invoke:{id:"phaseP2Service",src:ve("./startupPhase2.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_3_MAIN_POWER_ONLINE"})},{target:"PHASE_3_MAIN_POWER_ONLINE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_3_MAIN_POWER_ONLINE:{invoke:{id:"phaseP3Service",src:ve("./startupPhase3.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_4_OPTICAL_CORE_REACTIVATE"})},{target:"PHASE_4_OPTICAL_CORE_REACTIVATE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_4_OPTICAL_CORE_REACTIVATE:{invoke:{id:"phaseP4Service",src:ve("./startupPhase4.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_5_DIAGNOSTIC_INTERFACE"})},{target:"PHASE_5_DIAGNOSTIC_INTERFACE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_5_DIAGNOSTIC_INTERFACE:{invoke:{id:"phaseP5Service",src:ve("./startupPhase5.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_6_MOOD_INTENSITY_CONTROLS"})},{target:"PHASE_6_MOOD_INTENSITY_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_6_MOOD_INTENSITY_CONTROLS:{invoke:{id:"phaseP6Service",src:ve("./startupPhase6.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_7_HUE_CORRECTION_SYSTEMS"})},{target:"PHASE_7_HUE_CORRECTION_SYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_7_HUE_CORRECTION_SYSTEMS:{invoke:{id:"phaseP7Service",src:ve("./startupPhase7.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"})},{target:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_8_EXTERNAL_LIGHTING_CONTROLS:{invoke:{id:"phaseP8Service",src:ve("./startupPhase8.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_9_AUX_LIGHTING_LOW"})},{target:"PHASE_9_AUX_LIGHTING_LOW"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_9_AUX_LIGHTING_LOW:{invoke:{id:"phaseP9Service",src:ve("./startupPhase9.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_10_THEME_TRANSITION"})},{target:"PHASE_10_THEME_TRANSITION"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_10_THEME_TRANSITION:{invoke:{id:"phaseP10Service",src:ve("./startupPhase10.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"PHASE_11_SYSTEM_OPERATIONAL"})},{target:"PHASE_11_SYSTEM_OPERATIONAL"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:"notifyPhaseChangeAction",exit:"notifyPhaseChangeAction"},PHASE_11_SYSTEM_OPERATIONAL:{invoke:{id:"phaseP11Service",src:ve("./startupPhase11.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:ae({currentPhaseNameForResume:"SYSTEM_READY_TARGET"})},{target:"#hue9000Startup.SYSTEM_READY"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},entry:["notifyPhaseChangeAction","performThemeTransitionCleanupIfNeeded"],exit:["notifyPhaseChangeAction","markThemeTransitionCleanupPerformed"]}}},PAUSED_AWAITING_NEXT_STEP:{entry:"enableNextStepButtonAction",on:{NEXT_STEP_REQUESTED:[{target:"SYSTEM_READY",guard:({context:r})=>r.currentPhaseNameForResume==="SYSTEM_READY_TARGET",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_0_IDLE",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_0_IDLE",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_1_EMERGENCY_SUBSYSTEMS",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_1_EMERGENCY_SUBSYSTEMS",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_2_BACKUP_POWER",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_2_BACKUP_POWER",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_3_MAIN_POWER_ONLINE",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_3_MAIN_POWER_ONLINE",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_4_OPTICAL_CORE_REACTIVATE",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_4_OPTICAL_CORE_REACTIVATE",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_5_DIAGNOSTIC_INTERFACE",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_5_DIAGNOSTIC_INTERFACE",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_6_MOOD_INTENSITY_CONTROLS",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_6_MOOD_INTENSITY_CONTROLS",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_7_HUE_CORRECTION_SYSTEMS",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_7_HUE_CORRECTION_SYSTEMS",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_8_EXTERNAL_LIGHTING_CONTROLS",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_8_EXTERNAL_LIGHTING_CONTROLS",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_9_AUX_LIGHTING_LOW",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_9_AUX_LIGHTING_LOW",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_10_THEME_TRANSITION",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_10_THEME_TRANSITION",actions:"disableNextStepButtonAction"},{target:"RUNNING_SEQUENCE.PHASE_11_SYSTEM_OPERATIONAL",guard:({context:r})=>r.currentPhaseNameForResume==="PHASE_11_SYSTEM_OPERATIONAL",actions:"disableNextStepButtonAction"}]}},SYSTEM_READY:{type:"final",entry:["setAppStatusInteractive","notifySystemReadyToDebugManager","enableNextStepButtonAction"]},ERROR_STATE:{entry:["logError","setAppStatusError","displayErrorInTerminal","enableNextStepButtonAction"]}}},{actions:{logStartSequence:({context:r,event:e})=>{console.log("[FSM Action] Startup sequence initiated. Step-through:",r.isStepThroughMode)},assignError:ae({errorInfo:({event:r})=>r.data||new Error("Unknown error from invoked service")}),logError:({context:r})=>{console.error("[FSM Error]",r.errorInfo),r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.emit("startup:error",r.errorInfo)},setAppStatusInteractive:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("interactive")},setAppStatusError:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("error")},displayErrorInTerminal:({context:r})=>{if(r.dependencies&&r.dependencies.appStateService){const e=r.errorInfo instanceof Error?r.errorInfo.message:String(r.errorInfo);r.dependencies.appStateService.emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",content:[`CRITICAL SYSTEM ERROR: ${e}`]})}},notifyPhaseChangeAction:({context:r,event:e,_event:t})=>{},enableNextStepButtonAction:({context:r})=>{r.dependencies&&r.dependencies.managerInstances&&r.dependencies.managerInstances.debugManager&&r.dependencies.managerInstances.debugManager.setNextPhaseButtonEnabled(!0)},disableNextStepButtonAction:({context:r})=>{r.dependencies&&r.dependencies.managerInstances&&r.dependencies.managerInstances.debugManager&&r.dependencies.managerInstances.debugManager.setNextPhaseButtonEnabled(!1)},performThemeTransitionCleanupIfNeeded:({context:r})=>{console.log("[FSM Action] Attempting performThemeTransitionCleanupIfNeeded. Cleanup performed context:",r.themeTransitionCleanupPerformed),r.dependencies&&r.dependencies.performThemeTransitionCleanup&&!r.themeTransitionCleanupPerformed?(console.log("[FSM Action] Calling performThemeTransitionCleanup."),r.dependencies.performThemeTransitionCleanup()):(!r.dependencies||!r.dependencies.performThemeTransitionCleanup)&&console.warn("[FSM Action] performThemeTransitionCleanup dependency not found!")},markThemeTransitionCleanupPerformed:ae({themeTransitionCleanupPerformed:!0})},guards:{isStepThrough:({context:r})=>r.isStepThroughMode}});let at=null,Qe=null,B={},U={},Bi=null,we=null,ii=null,cr=null;const Bt={IDLE:"Idle","RUNNING_SEQUENCE.PHASE_0_IDLE":"startupPhaseP0_idle","RUNNING_SEQUENCE.PHASE_1_EMERGENCY_SUBSYSTEMS":"startupPhaseP1_emergency","RUNNING_SEQUENCE.PHASE_2_BACKUP_POWER":"startupPhaseP2_backupPower","RUNNING_SEQUENCE.PHASE_3_MAIN_POWER_ONLINE":"startupPhaseP3_mainPowerOnline","RUNNING_SEQUENCE.PHASE_4_OPTICAL_CORE_REACTIVATE":"startupPhaseP4_opticalCoreReactivate","RUNNING_SEQUENCE.PHASE_5_DIAGNOSTIC_INTERFACE":"startupPhaseP5_diagnosticInterface","RUNNING_SEQUENCE.PHASE_6_MOOD_INTENSITY_CONTROLS":"startupPhaseP6_moodIntensityControls","RUNNING_SEQUENCE.PHASE_7_HUE_CORRECTION_SYSTEMS":"startupPhaseP7_hueCorrectionSystems","RUNNING_SEQUENCE.PHASE_8_EXTERNAL_LIGHTING_CONTROLS":"startupPhaseP8_externalLightingControls","RUNNING_SEQUENCE.PHASE_9_AUX_LIGHTING_LOW":"startupPhaseP9_auxLightingLow","RUNNING_SEQUENCE.PHASE_10_THEME_TRANSITION":"startupPhaseP10_themeTransition","RUNNING_SEQUENCE.PHASE_11_SYSTEM_OPERATIONAL":"startupPhaseP11_systemOperational",PAUSED_AWAITING_NEXT_STEP:"PAUSED",SYSTEM_READY:"sequence_complete",ERROR_STATE:"ERROR"},Ge={Idle:"System Idle, awaiting startup.",startupPhaseP0_idle:"Phase 0: System Idle / Baseline Setup",startupPhaseP1_emergency:"Phase 1: Initializing Emergency Subsystems",startupPhaseP2_backupPower:"Phase 2: Activating Backup Power Systems",startupPhaseP3_mainPowerOnline:"Phase 3: Main Power Online",startupPhaseP4_opticalCoreReactivate:"Phase 4: Reactivating Optical Core",startupPhaseP5_diagnosticInterface:"Phase 5: Initializing Diagnostic Control Interface",startupPhaseP6_moodIntensityControls:"Phase 6: Initializing Mood and Intensity Controls",startupPhaseP7_hueCorrectionSystems:"Phase 7: Initializing Hue Correction Systems",startupPhaseP8_externalLightingControls:"Phase 8: Initializing External Lighting Controls",startupPhaseP9_auxLightingLow:"Phase 9: Activating Auxiliary Lighting: Low Intensity",startupPhaseP10_themeTransition:"Phase 10: Engaging Ambient Theme",startupPhaseP11_systemOperational:"Phase 11: HUE 9000 Operational",PAUSED:"Paused, awaiting next step.",sequence_complete:"All Startup Phases Done",ERROR:"Startup Error Occurred"},Je=["PHASE_0_IDLE","PHASE_1_EMERGENCY_SUBSYSTEMS","PHASE_2_BACKUP_POWER","PHASE_3_MAIN_POWER_ONLINE","PHASE_4_OPTICAL_CORE_REACTIVATE","PHASE_5_DIAGNOSTIC_INTERFACE","PHASE_6_MOOD_INTENSITY_CONTROLS","PHASE_7_HUE_CORRECTION_SYSTEMS","PHASE_8_EXTERNAL_LIGHTING_CONTROLS","PHASE_9_AUX_LIGHTING_LOW","PHASE_10_THEME_TRANSITION","PHASE_11_SYSTEM_OPERATIONAL"];function oa(r){if(typeof r=="string")return Bt[r]||r;if(typeof r=="object"){const e=Object.keys(r)[0],t=r[e];return Bt[`${e}.${t}`]||`${e}.${t}`}return"UnknownState"}function ld(r){if(!Qe||!r)return;const e=oa(r.value);let t="unknown";r.matches("IDLE")?t="ready":r.matches("PAUSED_AWAITING_NEXT_STEP")?t="paused":r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")||r.event&&(r.event.type.startsWith("done.invoke")||r.event.type.startsWith("error.platform"))?t="completed":r.changed&&(t="starting");let i="N/A",n="N/A";if(r.matches("PAUSED_AWAITING_NEXT_STEP")){const a=r.context.currentPhaseNameForResume;if(a==="SYSTEM_READY_TARGET")i="sequence_complete";else{const o=`RUNNING_SEQUENCE.${a}`;i=Bt[o]||a}n=Ge[i]||i}else if(!r.done&&!r.matches("ERROR_STATE")){const a=typeof r.value=="string"?r.value.split(".").pop():Object.values(r.value)[0],o=Je.indexOf(a);if(o!==-1&&o<Je.length-1){const u=Je[o+1],l=`RUNNING_SEQUENCE.${u}`;i=Bt[l]||u,n=Ge[i]||i}else o===Je.length-1&&(i="sequence_complete",n=Ge[i])}const s={currentPhaseName:e,status:t,description:Ge[e]||e,nextPhaseName:i,nextPhaseDescription:n,fsmStateValue:r.value,fsmContext:r.context};Qe.emit("startup:phaseChanged",s),B.debugManager&&(r.matches("PAUSED_AWAITING_NEXT_STEP")||r.matches("IDLE")||r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")?B.debugManager.setNextPhaseButtonEnabled(!0):B.debugManager.setNextPhaseButtonEnabled(!1))}function cd(r){at=r.gsap,Qe=r.appState,B=r.managers,U=r.domElements,Bi=r.configModule,U.elementsAnimatedOnDimExit||(U.elementsAnimatedOnDimExit=[]),Bi||console.error("[StartupSequenceManager INIT] CRITICAL: configModule not provided!")}function dd(){U.elementsAnimatedOnDimExit&&U.elementsAnimatedOnDimExit.length>0&&(U.elementsAnimatedOnDimExit.forEach(r=>{r.classList.remove("animate-on-dim-exit")}),U.elementsAnimatedOnDimExit=[]),U.body.classList.remove("is-transitioning-from-dim"),B.uiUpdater&&B.uiUpdater.finalizeThemeTransition(),console.log("[SSM _performThemeTransitionCleanupLocal] Theme transition classes removed.")}function hd(r=!1){var t;console.log("[SSM resetVisualsAndState] Resetting visuals and state for P0 (Idle)."),we&&(we.stop(),we=null),cr=null,ii?(at.killTweensOf([U.body,ii]),ii.value=parseFloat(U.initialCssAttenuationValue||"0.3"),U.root.style.setProperty("--global-dim-attenuation",ii.value.toFixed(2))):(at.killTweensOf(U.body),U.root.style.setProperty("--global-dim-attenuation",U.initialCssAttenuationValue||"0.3"));const e=(t=U.logoContainer)==null?void 0:t.querySelector("svg.logo-svg");if(e&&at.killTweensOf(e),Qe.setAppStatus("starting-up"),Qe.setTheme("dim"),B.buttonManager&&B.buttonManager.setInitialDimStates(),Qe.setTrueLensPower(0),B.lensManager&&B.lensManager.directUpdateLensVisuals(0),U.logoContainer&&B.uiUpdater){B.uiUpdater.injectLogoSVG();const i=U.logoContainer.querySelector("svg.logo-svg");i&&at.set(i,{opacity:.05})}Qe.updateDialState("A",{hue:Bi.DEFAULT_DIAL_A_HUE,targetHue:Bi.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),Qe.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),B.uiUpdater&&(B.uiUpdater.setLcdState(U.lcdA,"lcd--unlit",{skipClassChange:!1}),B.uiUpdater.setLcdState(U.lcdB,"lcd--unlit",{skipClassChange:!1}),U.terminalContainer&&B.uiUpdater.setLcdState(U.terminalContainer,"lcd--unlit",{skipClassChange:!1})),U.terminalContent&&(U.terminalContent.innerHTML="",at.set(U.terminalContent,{opacity:1,visibility:"visible"}),console.log("[SSM resetVisualsAndState] #terminal-lcd-content prepared (opacity:1, visible), its parent screen (.actual-lcd-screen-element) is 'lcd--unlit'."),B.terminalManager&&(B.terminalManager._initialMessageFlickered=!1,B.terminalManager._messageQueue=[],B.terminalManager._isTyping=!1,B.terminalManager._cursorElement&&B.terminalManager._cursorElement.parentNode&&B.terminalManager._cursorElement.parentNode.removeChild(B.terminalManager._cursorElement))),at.set(U.body,{opacity:r?1:0}),console.log("[SSM resetVisualsAndState] P0 Idle state setup complete.")}function aa(r=!0,e){ii=e,hd(r);const t={dependencies:{gsap:at,appStateService:Qe,managerInstances:B,domElementsRegistry:U,configModule:Bi,dimAttenuationProxy:ii,performThemeTransitionCleanup:dd}};we=mc(ud),we.subscribe(i=>{const n=JSON.stringify(i.value);(i.changed||n!==cr||i.matches("ERROR_STATE")||i.matches("SYSTEM_READY"))&&(ld(i),cr=n)}),we.start(),we.send({type:"START_SEQUENCE",isStepThroughMode:r,dependencies:t.dependencies})}function fd(){if(we){const r=we.getSnapshot();!r.done&&!r.matches("ERROR_STATE")?we.send({type:"NEXT_STEP_REQUESTED"}):(console.log("[SSM playNextPhase] Sequence already complete or in error state. Reset to run again."),B.debugManager&&B.debugManager.setNextPhaseButtonEnabled(!0))}}function pd(r){aa(!0,r)}function _d(){if(we){const i=we.getSnapshot(),n=oa(i.value);let s="N/A",a="N/A";if(i.matches("PAUSED_AWAITING_NEXT_STEP")){const o=i.context.currentPhaseNameForResume;if(o==="SYSTEM_READY_TARGET")s="sequence_complete";else{const u=`RUNNING_SEQUENCE.${o}`;s=Bt[u]||o}a=Ge[s]||s}else if(!i.done&&!i.matches("ERROR_STATE")){const o=typeof i.value=="string"?i.value.split(".").pop():Object.values(i.value)[0],u=Je.indexOf(o);if(u!==-1&&u<Je.length-1){const l=Je[u+1],c=`RUNNING_SEQUENCE.${l}`;s=Bt[c]||l,a=Ge[s]||s}else u===Je.length-1&&(s="sequence_complete",a=Ge[s])}return{currentPhaseName:n,status:i.matches("PAUSED_AWAITING_NEXT_STEP")?"paused":i.done?"completed":"starting",description:Ge[n]||n,nextPhaseName:s,nextPhaseDescription:a}}const r=Je[0],e=`RUNNING_SEQUENCE.${r}`,t=Bt[e]||r;return{currentPhaseName:"Idle",status:"ready",description:Ge.Idle,nextPhaseName:t,nextPhaseDescription:Ge[t]||t}}const gd=Object.freeze(Object.defineProperty({__proto__:null,getCurrentPhaseInfo:_d,init:cd,playNextPhase:fd,resetSequence:pd,start:aa},Symbol.toStringTag,{value:"Module"}));let Ze=null,G={statusDiv:null,phaseInfoDiv:null,nextPhaseButton:null,playAllButton:null,resetButton:null},Yi=null,et=null,pn="0.3";function ua(r){const e=G.statusDiv,t=G.phaseInfoDiv;if(!e||!t)return;let i="Phase: Unknown",n="Details unavailable.";if(r){const s=r.description||r.currentPhaseName||"N/A",a=r.nextPhaseDescription||r.nextPhaseName||"N/A";r.currentPhaseName==="Idle"||r.status==="ready"&&r.currentPhaseName==="Idle"?(i="Phase: Idle",n=`Next: ${a}`):r.currentPhaseName==="sequence_complete"||r.status==="completed"&&r.currentPhaseName==="sequence_complete"?(i="Phase: All Complete",n="Sequence finished. Reset to start again."):r.currentPhaseName==="ERROR"?(i=`Phase: ERROR (${s})`,n="Error occurred. Check console. Reset to try again."):r.status==="paused"||r.status==="completed"&&r.currentPhaseName!=="sequence_complete"?(i=`Done: ${s}`,n=`Next: ${a}`):r.status==="starting"?(i=`Running: ${s}`,n=`Awaiting completion... (Next: ${a})`):(i=`Phase: ${s}`,n=`Status: ${r.status||"N/A"}. Next: ${a}`)}e.textContent=i,t.textContent=n}function As(){Ze&&Ze.playNextPhase()}function Cs(){Ze&&et?(et.value=parseFloat(pn),Ze.start(!1,et)):console.warn("[DebugManager handlePlayAllClick] StartupManager or DimAttenuationProxy not available.")}function Is(){Ze&&et?(et.value=parseFloat(pn),Ze.resetSequence(et)):console.warn("[DebugManager handleResetSequenceClick] StartupManager or DimAttenuationProxy not available.")}function md(r){ua(r)}function la(r){G.nextPhaseButton&&(G.nextPhaseButton.disabled=!r)}function Dd(r){if(!r.startupSequenceManager)throw new Error("StartupSequenceManager not provided to DebugManager.");if(!r.domElements)throw new Error("DOM elements for debug controls not provided to DebugManager.");Ze=r.startupSequenceManager,Yi=r.appState,G.statusDiv=r.domElements.debugStatusDiv,G.phaseInfoDiv=r.domElements.debugPhaseInfoDiv,G.nextPhaseButton=r.domElements.nextPhaseButton,G.playAllButton=r.domElements.playAllButton,G.resetButton=r.domElements.resetButton,G.statusDiv||console.error("[DebugManager INIT] config.domElements.debugStatusDiv is null!"),G.phaseInfoDiv||console.error("[DebugManager INIT] config.domElements.debugPhaseInfoDiv is null!"),pn=r.initialAttenuationValue||"0.3",et||(et={value:parseFloat(pn)}),(!G.statusDiv||!G.phaseInfoDiv||!G.nextPhaseButton||!G.playAllButton||!G.resetButton)&&console.warn("[DebugManager INIT] One or more core debug DOM elements are missing. Debug panel may be non-functional."),G.nextPhaseButton&&(G.nextPhaseButton.removeEventListener("click",As),G.nextPhaseButton.addEventListener("click",As),la(!0)),G.playAllButton&&(G.playAllButton.removeEventListener("click",Cs),G.playAllButton.addEventListener("click",Cs)),G.resetButton&&(G.resetButton.removeEventListener("click",Is),G.resetButton.addEventListener("click",Is)),Yi&&typeof Yi.subscribe=="function"?(typeof window.debugManagerPhaseUnsubscriber=="function"&&window.debugManagerPhaseUnsubscriber(),window.debugManagerPhaseUnsubscriber=Yi.subscribe("startup:phaseChanged",md)):console.warn("[DebugManager INIT] appState or its subscribe method not available. Phase updates won't be received.");const e=Ze.getCurrentPhaseInfo?Ze.getCurrentPhaseInfo():{currentPhaseName:"Idle",status:"ready",nextPhaseName:"startupPhase0",description:"Idle",nextPhaseDescription:"P0: Baseline Setup"};return ua(e),{dimAttenuationProxy:et}}const Ed=Object.freeze(Object.defineProperty({__proto__:null,init:Dd,setNextPhaseButtonEnabled:la},Symbol.toStringTag,{value:"Module"})),Sd={P1_EMERGENCY_SUBSYSTEMS:"INITIALIZING EMERGENCY SUBSYSTEMS...",P2_BACKUP_POWER:"ACTIVATING BACKUP POWER SYSTEMS...",P3_MAIN_POWER_ONLINE:"MAIN POWER ONLINE...",P4_OPTICAL_CORE_REACTIVATE:"REACTIVATING OPTICAL CORE...",P5_DIAGNOSTIC_INTERFACE:"INITIALIZING DIAGNOSTIC CONTROL INTERFACE...",P6_MOOD_INTENSITY_CONTROLS:"INITIALIZING MOOD AND INTENSITY CONTROLS...",P7_HUE_CORRECTION_SYSTEMS:"INITIALIZING HUE CORRECTION SYSTEMS...",P8_EXTERNAL_LIGHTING_CONTROLS:"INITIALIZING EXTERNAL LIGHTING CONTROLS...",P9_AUX_LIGHTING_LOW:"ACTIVATING AUXILIARY LIGHTING: LOW INTENSITY...",P11_SYSTEM_OPERATIONAL:"ALL SYSTEMS RESTORED. HUE 9000 OPERATIONAL...",P0_INITIALIZING:"INITIALIZING HUE OS...",P0A_MAIN_PWR_PRIMING:"MAIN POWER INTERFACE PRIMING...",P2_MAIN_POWER_RESTORED:"MAIN POWER ONLINE... STANDBY",P3_OPTICAL_CORE_ENERGIZING:"OPTICAL CORE ENERGIZING...",P4_SECONDARY_SYSTEMS_ONLINE:"SECONDARY SYSTEMS ONLINE... STANDBY.",P5_AUX_LIGHTS_ONLINE:"AUXILIARY LIGHTS ONLINE. DEFAULT: LOW.",P6_AMBIENT_THEME_ENGAGED:"AMBIENT THEME ENGAGED. ALL SYSTEMS NOMINAL.",P7_SYSTEM_READY:"ALL SYSTEMS ONLINE. HUE 9000 READY."},Fn={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}","  - INTENSITY DIAL (B) SETTING: {dialBHue}","  - ASSIGNED ENVIRONMENT HUE: {envHue}","  - ASSIGNED LCD HUE: {lcdHue}","  - ASSIGNED LOGO HUE: {logoHue}","  - ASSIGNED BUTTON HUE: {btnHue}","SYSTEM NOMINAL. AWAITING INPUT."]},Wi={dialA:r=>`MOOD DIAL SET TO ${r.value}`,dialB:r=>`INTENSITY DIAL SET TO ${r.value}%`,envHue:r=>`ENVIRONMENT HUE ASSIGNED: ${r.hue}`,lcdHue:r=>`LCD HUE ASSIGNED: ${r.hue}`,logoHue:r=>`LOGO HUE ASSIGNED: ${r.hue}`,btnHue:r=>`BUTTON HUE ASSIGNED: ${r.hue}`,FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`};function Td(r,e={}){const{type:t,source:i,data:n,messageKey:s}=r;if(r.content)return r.content;switch(t){case"startup":return Sd[s||i]||`Unknown startup event: ${s||i}`;case"block":return s&&Fn[s]?s==="BTN4_MESSAGE"?Fn[s].map(a=>{var o,u,l,c,d,h;return a.replace("{currentTheme}",e.theme||"N/A").replace("{lensPower}",e.lensPower!==void 0?Math.round(e.lensPower*100):"N/A").replace("{dialAHue}",((o=e.dialA)==null?void 0:o.hue)!==void 0?Math.round(e.dialA.hue):"N/A").replace("{dialBHue}",((u=e.dialB)==null?void 0:u.hue)!==void 0?Math.round(e.dialB.hue):"N/A").replace("{envHue}",((l=e.envHue)==null?void 0:l.hue)!==void 0?Math.round(e.envHue.hue):"N/A").replace("{lcdHue}",((c=e.lcdHue)==null?void 0:c.hue)!==void 0?Math.round(e.lcdHue.hue):"N/A").replace("{logoHue}",((d=e.logoHue)==null?void 0:d.hue)!==void 0?Math.round(e.logoHue.hue):"N/A").replace("{btnHue}",((h=e.btnHue)==null?void 0:h.hue)!==void 0?Math.round(e.btnHue.hue):"N/A")}):Fn[s]:`Unknown block message key: ${s||i}`;case"status":return s&&Wi[s]&&n?Wi[s](n):Wi[i]&&n?Wi[i](n):`Status update from ${i}: ${JSON.stringify(n)}`;default:return`Unknown message type: ${t} from ${i}`}}class yd{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._cursorElement=null,this._domInitialized=!1,this._initialMessageFlickered=!1}init(e,t,i,n,s){if(!e||!t){console.error("[TerminalManager INIT] CRITICAL: Terminal DOM elements not provided.");return}if(!i||!n||!s){console.error("[TerminalManager INIT] CRITICAL: Missing appState, configModule, or gsap service.");return}this._terminalContainerElement=e,this._terminalContentElement=t,this._appState=i,this._configModule=n,this._gsap=s,this._setupDOM(),this._appState.subscribe("requestTerminalMessage",this._handleRequestTerminalMessage.bind(this))}_setupDOM(){this._domInitialized||(this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this._cursorElement.textContent="",this._cursorElement.style.visibility="hidden",this._terminalContentElement.innerHTML="",this._domInitialized=!0)}_handleRequestTerminalMessage(e){if(!e)return;let t={};e.messageKey==="BTN4_MESSAGE"&&(t={theme:this._appState.getCurrentTheme(),lensPower:this._appState.getTrueLensPower(),dialA:this._appState.getDialState("A"),dialB:this._appState.getDialState("B"),envHue:this._appState.getTargetColorProperties("env"),lcdHue:this._appState.getTargetColorProperties("lcd"),logoHue:this._appState.getTargetColorProperties("logo"),btnHue:this._appState.getTargetColorProperties("btn")});const i=Td(e,t,this._configModule),n={...e,content:Array.isArray(i)?i:[i],linesTyped:0};this._messageQueue.push(n),this._isTyping||this._processQueue()}async _processQueue(){if(this._messageQueue.length===0){this._isTyping=!1;return}if(this._isTyping&&this._messageQueue.length>0)return;this._isTyping=!0;const e=this._messageQueue.shift(),t=Math.random()*(this._configModule.TERMINAL_NEW_LINE_DELAY_MAX_MS-this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS)+this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS;await new Promise(i=>setTimeout(i,t));for(let i=0;i<e.content.length;i++){const n=e.content[i];if(this._addNewLineAndPrepareForTyping(),this._terminalContentElement&&(this._gsap.getProperty(this._terminalContentElement,"opacity")==0||this._gsap.getProperty(this._terminalContentElement,"visibility")==="hidden")&&(this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"}),console.log(`[TerminalManager _processQueue] Ensured #terminal-lcd-content is visible for line: "${n}"`)),e.source==="P1_EMERGENCY_SUBSYSTEMS"&&!this._initialMessageFlickered&&this._currentLineElement){this._currentLineElement.appendChild(this._cursorElement),this._showCursor();const s=e.flickerProfile||"textFlickerToDimlyLit",a=this.playInitialTextFlicker(this._currentLineElement,n,s);a&&a.completionPromise?await a.completionPromise:a&&a.timeline&&await new Promise(o=>a.timeline.eventCallback("onComplete",o).play()),this._initialMessageFlickered=!0}else this._showCursor(),await this._typeLine(n,e.type);i<e.content.length-1&&await new Promise(s=>setTimeout(s,this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS/2))}this._hideCursor(),this._isTyping=!1,this._processQueue()}_addNewLineAndPrepareForTyping(){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines()}_typeLine(e,t="status"){return new Promise(i=>{if(!this._currentLineElement){console.error("[TerminalManager _typeLine] _currentLineElement is null. Cannot type."),i();return}let n;switch(t){case"block":n=this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR;break;case"startup":n=this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;break;case"status":default:n=this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR;break}const s=e.length*n/1e3;this._currentLineElement.appendChild(this._cursorElement),this._gsap.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:e,delimiter:""},ease:"none",onUpdate:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement)},onComplete:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),i()}})})}_scrollTerminal(){this._terminalContainerElement&&(this._terminalContainerElement.scrollTop=this._terminalContainerElement.scrollHeight)}_limitMaxLines(){for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM&&this._terminalContentElement.firstChild;)this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_showCursor(){this._cursorElement&&this._currentLineElement&&(this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),this._cursorElement.style.visibility="visible")}_hideCursor(){this._cursorElement&&(this._cursorElement.style.visibility="hidden")}playInitialTextFlicker(e,t,i="textFlickerToDimlyLit"){if(!e)return{timeline:this._gsap.timeline().to({},{duration:.01}),completionPromise:Promise.resolve()};const n=this._gsap.timeline();n.call(()=>{e.textContent="",e.appendChild(this._cursorElement)});const s=an(e,i,{});s&&s.timeline&&n.add(s.timeline);const a={duration:t.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3*.75,text:{value:t,delimiter:""},ease:"none",onUpdate:()=>{e&&this._cursorElement&&this._cursorElement.parentElement!==e&&e.appendChild(this._cursorElement)},onComplete:()=>{e&&this._cursorElement&&this._cursorElement.parentElement!==e&&e.appendChild(this._cursorElement)}},o=s&&s.timeline&&s.timeline.duration()>0?s.timeline.duration()*.25:0;n.to(e,a,o),n.call(()=>{this._gsap.set(e,{autoAlpha:1}),this._terminalContentElement&&this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"});const l=this._gsap.getProperty(e,"autoAlpha");console.log(`[TerminalManager playInitialTextFlicker] Ensured textLineElement autoAlpha is ${l} post-animation for: ${t}`)});const u=new Promise(l=>{n.eventCallback("onComplete",l)});return n.duration()===0&&n.to({},{duration:.001}),{timeline:n,completionPromise:u}}playScreenFlickerToState(e,t,i){if(!e){const n=this._gsap.timeline();return i&&n.eventCallback("onComplete",i),{timeline:n.to({},{duration:.01}),completionPromise:Promise.resolve()}}return an(e,t,{onTimelineComplete:()=>{i&&i()}})}}const Ad=new yd;le.registerPlugin(Ui);let P={body:null,root:null,logoContainer:null,mainPwrOnButton:null,mainPwrOffButton:null,auxLightLowButton:null,auxLightHighButton:null,dialContainers:null,colorLensGradientElement:null,scanButton1Element:null,scanButton2Element:null,scanButton3Element:null,scanButton4Element:null,debugStatusDiv:null,debugPhaseInfoDiv:null,nextPhaseButton:null,playAllButton:null,resetButton:null,lcdA:null,lcdB:null,terminalContainer:null,terminalContent:null,initialCssAttenuationValue:"0.3",elementsAnimatedOnDimExit:[]};const re={buttonManager:null,dialManager:wl,gridManager:Ml,toggleManager:Bl,uiUpdater:ql,lensManager:ec,startupSequenceManager:gd,debugManager:Ed,terminalManager:Ad};function Ps(){var l,c,d,h;P.body=document.body,P.root=document.documentElement,P.logoContainer=document.getElementById("logo-container"),P.mainPwrOnButton=document.querySelector('.on-off-group-container .button-unit[data-toggle-value="on"]'),P.mainPwrOffButton=document.querySelector('.on-off-group-container .button-unit[data-toggle-value="off"]'),P.auxLightLowButton=document.querySelector('.light-mode-group-container .button-unit[data-toggle-value="off"]'),P.auxLightHighButton=document.querySelector('.light-mode-group-container .button-unit[data-toggle-value="on"]'),P.dialContainers=document.querySelectorAll(".dial-canvas-container"),P.colorLensGradientElement=document.getElementById("color-lens-gradient");const r=document.querySelector(".scan-button-block.joined-block-pair__item--left"),e=document.querySelector(".scan-button-block.joined-block-pair__item--right");r&&(P.scanButton1Element=r.children[0],P.scanButton2Element=r.children[1]),e&&(P.scanButton3Element=e.children[0],P.scanButton4Element=e.children[1]),window.scanButton1ElementForDebug=P.scanButton1Element,P.debugStatusDiv=document.getElementById("debug-phase-status"),P.debugPhaseInfoDiv=document.getElementById("debug-phase-info"),P.nextPhaseButton=document.getElementById("btn-next-phase"),P.playAllButton=document.getElementById("btn-play-all"),P.resetButton=document.getElementById("btn-reset-startup-debug"),P.lcdA=document.getElementById("hue-lcd-A"),P.lcdB=document.getElementById("hue-lcd-B"),P.terminalContainer=document.querySelector(".control-block.terminal-block .actual-lcd-screen-element"),P.terminalContent=document.getElementById("terminal-lcd-content");try{P.initialCssAttenuationValue=getComputedStyle(P.root).getPropertyValue("--global-dim-attenuation").trim()||"0.3"}catch(p){console.warn("[Main AppInit] Could not read --global-dim-attenuation from CSS. Using default.",p),P.initialCssAttenuationValue="0.3"}Fo("loading"),re.buttonManager=new Nl(le,Di,zt,re.uiUpdater),re.uiUpdater.init({root:P.root,body:P.body,logoContainer:P.logoContainer,lcdA:P.lcdA,lcdB:P.lcdB,terminalLcdContentElement:P.terminalContent},zt,le);const t=Array.from(document.querySelectorAll(".button-unit"));re.buttonManager.init(t,le);const i=document.querySelectorAll(".hue-assignment-block .hue-assignment-column[data-assignment-target]");re.gridManager.init(Array.from(i),re.buttonManager);const n=Array.from(document.querySelectorAll(".top-toggle-bar .button-unit--toggle"));re.toggleManager.init(n,re.buttonManager),P.dialContainers&&re.dialManager.init(Array.from(P.dialContainers),Di,zt,le),P.root&&P.colorLensGradientElement?re.lensManager.init(P.root,P.colorLensGradientElement,zt,le):console.error("[Main AppInit] Critical elements for Lens Manager not found."),P.terminalContainer&&P.terminalContent?re.terminalManager.init(P.terminalContainer,P.terminalContent,Di,zt,le):console.error("[Main AppInit] Critical elements for Terminal Manager not found. Container:",P.terminalContainer,"Content:",P.terminalContent);const s={[(l=P.scanButton1Element)==null?void 0:l.ariaLabel]:"BTN1_MESSAGE",[(c=P.scanButton2Element)==null?void 0:c.ariaLabel]:"BTN2_MESSAGE",[(d=P.scanButton3Element)==null?void 0:d.ariaLabel]:"BTN3_MESSAGE",[(h=P.scanButton4Element)==null?void 0:h.ariaLabel]:"BTN4_MESSAGE"};[P.scanButton1Element,P.scanButton2Element,P.scanButton3Element,P.scanButton4Element].forEach(p=>{p&&p.addEventListener("click",()=>{if(Y()!=="interactive")return;const _=s[p.ariaLabel];_&&St("requestTerminalMessage",{type:"block",source:p.ariaLabel||"UnknownScanButton",messageKey:_})})}),re.startupSequenceManager.init({gsap:le,appState:Di,managers:re,domElements:P,configModule:zt});const a=re.debugManager.init({startupSequenceManager:re.startupSequenceManager,domElements:{debugStatusDiv:P.debugStatusDiv,debugPhaseInfoDiv:P.debugPhaseInfoDiv,nextPhaseButton:P.nextPhaseButton,playAllButton:P.playAllButton,resetButton:P.resetButton},appState:Di,initialAttenuationValue:P.initialCssAttenuationValue});re.startupSequenceManager.start(!0,a.dimAttenuationProxy);const u=Ro(()=>{re.dialManager.resizeAllCanvases(!1)},Lo);window.addEventListener("resize",u)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Ps):Ps();
