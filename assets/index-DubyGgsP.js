(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function Ae(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ya(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Vt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Bi={duration:.5,overwrite:!1,delay:0},Br,At,rt,ge=1e8,Lt=1/ge,Qs=Math.PI*2,Pu=Qs/4,xu=0,Ta=Math.sqrt,Mu=Math.cos,Ru=Math.sin,St=function(t){return typeof t=="string"},lt=function(t){return typeof t=="function"},ve=function(t){return typeof t=="number"},Ur=function(t){return typeof t>"u"},_e=function(t){return typeof t=="object"},Pt=function(t){return t!==!1},Hr=function(){return typeof window<"u"},Vn=function(t){return lt(t)||St(t)},Aa=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},vt=Array.isArray,tr=/(?:-?\.?\d|\.)+/gi,Ca=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ms=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ia=/[+-]=-?[.\d]+/,wa=/[^,'"\[\]\s]+/gi,Fu=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ot,he,er,Gr,$t={},as={},La,va=function(t){return(as=Ui(t,$t))&&Ft},Vr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Tn=function(t,e){return!e&&console.warn(t)},ba=function(t,e){return t&&($t[t]=e)&&as&&(as[t]=e)||$t},An=function(){return 0},Nu={suppressEvents:!0,isStart:!0,kill:!1},jn={suppressEvents:!0,kill:!1},ku={suppressEvents:!0},$r={},Ge=[],ir={},Oa,kt={},Rs={},vo=30,qn=[],zr="",Yr=function(t){var e=t[0],i,n;if(_e(e)||lt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=qn.length;n--&&!qn[n].targetTest(e););i=qn[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new tl(t[n],i)))||t.splice(n,1);return t},oi=function(t){return t._gsap||Yr(Jt(t))[0]._gsap},Pa=function(t,e,i){return(i=t[e])&&lt(i)?t[e]():Ur(i)&&t.getAttribute&&t.getAttribute(e)||i},xt=function(t,e){return(t=t.split(",")).forEach(e)||t},ht=function(t){return Math.round(t*1e5)/1e5||0},gt=function(t){return Math.round(t*1e7)/1e7||0},Oi=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},Bu=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},ls=function(){var t=Ge.length,e=Ge.slice(0),i,n;for(ir={},Ge.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Wr=function(t){return!!(t._initted||t._startAt||t.add)},xa=function(t,e,i,n){Ge.length&&!At&&ls(),t.render(e,i,!!(At&&e<0&&Wr(t))),Ge.length&&!At&&ls()},Ma=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(wa).length<2?e:St(t)?t.trim():t},Ra=function(t){return t},zt=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Uu=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Ui=function(t,e){for(var i in e)t[i]=e[i];return t},bo=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=_e(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},us=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},dn=function(t){var e=t.parent||ot,i=t.keyframes?Uu(vt(t.keyframes)):zt;if(Pt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Hu=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},Fa=function(t,e,i,n,s){var o=t[n],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},ys=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},ze=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ai=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Gu=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},nr=function(t,e,i,n){return t._startAt&&(At?t._startAt.revert(jn):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Vu=function r(t){return!t||t._ts&&r(t.parent)},Oo=function(t){return t._repeat?Hi(t._tTime,t=t.duration()+t._rDelay)*t:0},Hi=function(t,e){var i=Math.floor(t=gt(t/e));return t&&i===t?i-1:i},cs=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ts=function(t){return t._end=gt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Lt)||0))},As=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=gt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ts(t),i._dirty||ai(i,t)),t},Na=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=cs(t.rawTime(),e),(!e._dur||Rn(0,e.totalDuration(),i)-e._tTime>Lt)&&e.render(i,!0)),ai(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},fe=function(t,e,i,n){return e.parent&&ze(e),e._start=gt((ve(i)?i:i||t!==ot?Zt(t,i,e):t._time)+e._delay),e._end=gt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Fa(t,e,"_first","_last",t._sort?"_start":0),sr(e)||(t._recent=e),n||Na(t,e),t._ts<0&&As(t,t._tTime),t},ka=function(t,e){return($t.ScrollTrigger||Vr("scrollTrigger",e))&&$t.ScrollTrigger.create(e,t)},Ba=function(t,e,i,n,s){if(jr(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!At&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Oa!==Ut.frame)return Ge.push(t),t._lazy=[s,n],1},$u=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},sr=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},zu=function(t,e,i,n){var s=t.ratio,o=e<0||!e&&(!t._start&&$u(t)&&!(!t._initted&&sr(t))||(t._ts<0||t._dp._ts<0)&&!sr(t))?0:1,a=t._rDelay,l=0,c,h,d;if(a&&t._repeat&&(l=Rn(0,t._tDur,e),h=Hi(l,a),t._yoyo&&h&1&&(o=1-o),h!==Hi(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||At||n||t._zTime===Lt||!e&&t._zTime){if(!t._initted&&Ba(t,e,n,i,l))return;for(d=t._zTime,t._zTime=e||(i?Lt:0),i||(i=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&nr(t,e,i,!0),t._onUpdate&&!i&&Gt(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Gt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&ze(t,1),!i&&!At&&(Gt(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Yu=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Gi=function(t,e,i,n){var s=t._repeat,o=gt(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:gt(o*(s+1)+t._rDelay*s):o,a>0&&!n&&As(t,t._tTime=t._tDur*a),t.parent&&Ts(t),i||ai(t.parent,t),t},Po=function(t){return t instanceof bt?ai(t):Gi(t,t._dur)},Wu={_start:0,endTime:An,totalDuration:An},Zt=function r(t,e,i){var n=t.labels,s=t._recent||Wu,o=t.duration()>=ge?s.endTime(!1):t._dur,a,l,c;return St(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),c=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),c&&i&&(l=l/100*(vt(i)?i[0]:i).totalDuration()),a>1?r(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},fn=function(t,e,i){var n=ve(e[1]),s=(n?2:1)+(t<2?0:1),o=e[s],a,l;if(n&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Pt(l.vars.inherit)&&l.parent;o.immediateRender=Pt(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new pt(e[0],o,e[s+1])},Xe=function(t,e){return t||t===0?e(t):e},Rn=function(t,e,i){return i<t?t:i>e?e:i},wt=function(t,e){return!St(t)||!(e=Fu.exec(t))?"":e[1]},Xu=function(t,e,i){return Xe(i,function(n){return Rn(t,e,n)})},rr=[].slice,Ua=function(t,e){return t&&_e(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&_e(t[0]))&&!t.nodeType&&t!==he},ju=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return St(n)&&!e||Ua(n,1)?(s=i).push.apply(s,Jt(n)):i.push(n)})||i},Jt=function(t,e,i){return rt&&!e&&rt.selector?rt.selector(t):St(t)&&!i&&(er||!Vi())?rr.call((e||Gr).querySelectorAll(t),0):vt(t)?ju(t,i):Ua(t)?rr.call(t,0):t?[t]:[]},or=function(t){return t=Jt(t)[0]||Tn("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Jt(e,i.querySelectorAll?i:i===t?Tn("Invalid scope")||Gr.createElement("div"):t)}},Ha=function(t){return t.sort(function(){return .5-Math.random()})},Ga=function(t){if(lt(t))return t;var e=_e(t)?t:{each:t},i=li(e.ease),n=e.from||0,s=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,c=e.axis,h=n,d=n;return St(n)?h=d={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(h=n[0],d=n[1]),function(p,u,g){var f=(g||e).length,_=o[f],D,T,A,C,E,v,L,I,y;if(!_){if(y=e.grid==="auto"?0:(e.grid||[1,ge])[1],!y){for(L=-1e8;L<(L=g[y++].getBoundingClientRect().left)&&y<f;);y<f&&y--}for(_=o[f]=[],D=l?Math.min(y,f)*h-.5:n%y,T=y===ge?0:l?f*d/y-.5:n/y|0,L=0,I=ge,v=0;v<f;v++)A=v%y-D,C=T-(v/y|0),_[v]=E=c?Math.abs(c==="y"?C:A):Ta(A*A+C*C),E>L&&(L=E),E<I&&(I=E);n==="random"&&Ha(_),_.max=L-I,_.min=I,_.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(y>f?f-1:c?c==="y"?f/y:y:Math.max(y,f/y))||0)*(n==="edges"?-1:1),_.b=f<0?s-f:s,_.u=wt(e.amount||e.each)||0,i=i&&f<0?Za(i):i}return f=(_[p]-_.min)/_.max||0,gt(_.b+(i?i(f):f)*_.v)+_.u}},ar=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=gt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(ve(i)?0:wt(i))}},Va=function(t,e){var i=vt(t),n,s;return!i&&_e(t)&&(n=i=t.radius||ge,t.values?(t=Jt(t.values),(s=!ve(t[0]))&&(n*=n)):t=ar(t.increment)),Xe(e,i?lt(t)?function(o){return s=t(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=ge,h=0,d=t.length,p,u;d--;)s?(p=t[d].x-a,u=t[d].y-l,p=p*p+u*u):p=Math.abs(t[d]-a),p<c&&(c=p,h=d);return h=!n||c<=n?t[h]:o,s||h===o||ve(o)?h:h+wt(o)}:ar(t))},$a=function(t,e,i,n){return Xe(vt(t)?!e:i===!0?!!(i=0):!n,function(){return vt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},qu=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,o){return o(s)},n)}},Ku=function(t,e){return function(i){return t(parseFloat(i))+(e||wt(i))}},Zu=function(t,e,i){return Ya(t,e,0,1,i)},za=function(t,e,i){return Xe(i,function(n){return t[~~e(n)]})},Ju=function r(t,e,i){var n=e-t;return vt(t)?za(t,r(0,t.length),e):Xe(i,function(s){return(n+(s-t)%n)%n+t})},Qu=function r(t,e,i){var n=e-t,s=n*2;return vt(t)?za(t,r(0,t.length-1),e):Xe(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>n?s-o:o)})},Cn=function(t){for(var e=0,i="",n,s,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",s=t.substr(n+7,o-n-7).match(a?wa:tr),i+=t.substr(e,n-e)+$a(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},Ya=function(t,e,i,n,s){var o=e-t,a=n-i;return Xe(s,function(l){return i+((l-t)/o*a||0)})},tc=function r(t,e,i,n){var s=isNaN(t+e)?0:function(u){return(1-u)*t+u*e};if(!s){var o=St(t),a={},l,c,h,d,p;if(i===!0&&(n=1)&&(i=null),o)t={p:t},e={p:e};else if(vt(t)&&!vt(e)){for(h=[],d=t.length,p=d-2,c=1;c<d;c++)h.push(r(t[c-1],t[c]));d--,s=function(g){g*=d;var f=Math.min(p,~~g);return h[f](g-f)},i=e}else n||(t=Ui(vt(t)?[]:{},t));if(!h){for(l in e)Xr.call(a,t,l,"get",e[l]);s=function(g){return Zr(g,a)||(o?t.p:t)}}}return Xe(i,s)},xo=function(t,e,i){var n=t.labels,s=ge,o,a,l;for(o in n)a=n[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Gt=function(t,e,i){var n=t.vars,s=n[e],o=rt,a=t._ctx,l,c,h;if(s)return l=n[e+"Params"],c=n.callbackScope||t,i&&Ge.length&&ls(),a&&(rt=a),h=l?s.apply(c,l):s.call(c),rt=o,h},sn=function(t){return ze(t),t.scrollTrigger&&t.scrollTrigger.kill(!!At),t.progress()<1&&Gt(t,"onInterrupt"),t},Li,Wa=[],Xa=function(t){if(t)if(t=!t.name&&t.default||t,Hr()||t.headless){var e=t.name,i=lt(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:An,render:Zr,add:Xr,kill:_c,modifier:gc,rawVars:0},o={targetTest:0,get:0,getSetter:Kr,aliases:{},register:0};if(Vi(),t!==n){if(kt[e])return;zt(n,zt(us(t,s),o)),Ui(n.prototype,Ui(s,us(t,o))),kt[n.prop=e]=n,t.targetTest&&(qn.push(n),$r[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ba(e,n),t.register&&t.register(Ft,n,Mt)}else Wa.push(t)},it=255,rn={aqua:[0,it,it],lime:[0,it,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,it],navy:[0,0,128],white:[it,it,it],olive:[128,128,0],yellow:[it,it,0],orange:[it,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[it,0,0],pink:[it,192,203],cyan:[0,it,it],transparent:[it,it,it,0]},Fs=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*it+.5|0},ja=function(t,e,i){var n=t?ve(t)?[t>>16,t>>8&it,t&it]:0:rn.black,s,o,a,l,c,h,d,p,u,g;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),rn[t])n=rn[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&it,n&it,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&it,t&it]}else if(t.substr(0,3)==="hsl"){if(n=g=t.match(tr),!e)l=+n[0]%360/360,c=+n[1]/100,h=+n[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,n.length>3&&(n[3]*=1),n[0]=Fs(l+1/3,s,o),n[1]=Fs(l,s,o),n[2]=Fs(l-1/3,s,o);else if(~t.indexOf("="))return n=t.match(Ca),i&&n.length<4&&(n[3]=1),n}else n=t.match(tr)||rn.transparent;n=n.map(Number)}return e&&!g&&(s=n[0]/it,o=n[1]/it,a=n[2]/it,d=Math.max(s,o,a),p=Math.min(s,o,a),h=(d+p)/2,d===p?l=c=0:(u=d-p,c=h>.5?u/(2-d-p):u/(d+p),l=d===s?(o-a)/u+(o<a?6:0):d===o?(a-s)/u+2:(s-o)/u+4,l*=60),n[0]=~~(l+.5),n[1]=~~(c*100+.5),n[2]=~~(h*100+.5)),i&&n.length<4&&(n[3]=1),n},qa=function(t){var e=[],i=[],n=-1;return t.split(Ve).forEach(function(s){var o=s.match(wi)||[];e.push.apply(e,o),i.push(n+=o.length+1)}),e.c=i,e},Mo=function(t,e,i){var n="",s=(t+n).match(Ve),o=e?"hsla(":"rgba(",a=0,l,c,h,d;if(!s)return t;if(s=s.map(function(p){return(p=ja(p,e,1))&&o+(e?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(h=qa(t),l=i.c,l.join(n)!==h.c.join(n)))for(c=t.replace(Ve,"1").split(wi),d=c.length-1;a<d;a++)n+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!c)for(c=t.split(Ve),d=c.length-1;a<d;a++)n+=c[a]+s[a];return n+c[d]},Ve=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in rn)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),ec=/hsl[a]?\(/,Ka=function(t){var e=t.join(" "),i;if(Ve.lastIndex=0,Ve.test(e))return i=ec.test(e),t[1]=Mo(t[1],i),t[0]=Mo(t[0],i,qa(t[1])),!0},In,Ut=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,c,h,d,p,u,g=function f(_){var D=r()-n,T=_===!0,A,C,E,v;if((D>t||D<0)&&(i+=D-e),n+=D,E=n-i,A=E-o,(A>0||T)&&(v=++d.frame,p=E-d.time*1e3,d.time=E=E/1e3,o+=A+(A>=s?4:s-A),C=1),T||(l=c(f)),C)for(u=0;u<a.length;u++)a[u](E,p,v,_)};return d={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(_){return p/(1e3/(_||60))},wake:function(){La&&(!er&&Hr()&&(he=er=window,Gr=he.document||{},$t.gsap=Ft,(he.gsapVersions||(he.gsapVersions=[])).push(Ft.version),va(as||he.GreenSockGlobals||!he.gsap&&he||{}),Wa.forEach(Xa)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=h||function(_){return setTimeout(_,o-d.time*1e3+1|0)},In=1,g(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),In=0,c=An},lagSmoothing:function(_,D){t=_||1/0,e=Math.min(D||33,t)},fps:function(_){s=1e3/(_||240),o=d.time*1e3+s},add:function(_,D,T){var A=D?function(C,E,v,L){_(C,E,v,L),d.remove(A)}:_;return d.remove(_),a[T?"unshift":"push"](A),Vi(),A},remove:function(_,D){~(D=a.indexOf(_))&&a.splice(D,1)&&u>=D&&u--},_listeners:a},d}(),Vi=function(){return!In&&Ut.wake()},W={},ic=/^[\d.\-M][\d.\-,\s]/,nc=/["']/g,sc=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),e[n]=isNaN(c)?c.replace(nc,"").trim():+c,n=l.substr(a+1).trim();return e},rc=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},oc=function(t){var e=(t+"").split("("),i=W[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[sc(e[1])]:rc(t).split(",").map(Ma)):W._CE&&ic.test(t)?W._CE("",t):i},Za=function(t){return function(e){return 1-t(1-e)}},Ja=function r(t,e){for(var i=t._first,n;i;)i instanceof bt?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},li=function(t,e){return t&&(lt(t)?t:W[t]||oc(t))||e},mi=function(t,e,i,n){i===void 0&&(i=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},o;return xt(t,function(a){W[a]=$t[a]=s,W[o=a.toLowerCase()]=i;for(var l in s)W[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=W[a+"."+l]=s[l]}),s},Qa=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ns=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/Qs*(Math.asin(1/n)||0),a=function(h){return h===1?1:n*Math.pow(2,-10*h)*Ru((h-o)*s)+1},l=t==="out"?a:t==="in"?function(c){return 1-a(1-c)}:Qa(a);return s=Qs/s,l.config=function(c,h){return r(t,c,h)},l},ks=function r(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:Qa(i);return n.config=function(s){return r(t,s)},n};xt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;mi(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});W.Linear.easeNone=W.none=W.Linear.easeIn;mi("Elastic",Ns("in"),Ns("out"),Ns());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(a){return a<e?r*a*a:a<i?r*Math.pow(a-1.5/t,2)+.75:a<n?r*(a-=2.25/t)*a+.9375:r*Math.pow(a-2.625/t,2)+.984375};mi("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);mi("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});mi("Circ",function(r){return-(Ta(1-r*r)-1)});mi("Sine",function(r){return r===1?1:-Mu(r*Pu)+1});mi("Back",ks("in"),ks("out"),ks());W.SteppedEase=W.steps=$t.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,o=1-Lt;return function(a){return((n*Rn(0,o,a)|0)+s)*i}}};Bi.ease=W["quad.out"];xt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return zr+=r+","+r+"Params,"});var tl=function(t,e){this.id=xu++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Pa,this.set=e?e.getSetter:Kr},wn=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Gi(this,+e.duration,1,1),this.data=e.data,rt&&(this._ctx=rt,rt.data.push(this)),In||Ut.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Gi(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(Vi(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(As(this,i),!s._dp||s.parent||Na(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&fe(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Lt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),xa(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Oo(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Oo(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Hi(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?cs(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Rn(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),Ts(this),Gu(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Vi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Lt&&(this._tTime-=Lt)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&fe(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Pt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cs(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=ku);var n=At;return At=i,Wr(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),At=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Po(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Po(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(Zt(this,i),Pt(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Pt(n)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-Lt)},t.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},t.then=function(i){var n=this;return new Promise(function(s){var o=lt(i)?i:Ra,a=function(){var c=n.then;n.then=null,lt(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=c),s(o),n.then=c};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){sn(this)},r}();zt(wn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var bt=function(r){ya(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Pt(i.sortChildren),ot&&fe(i.parent||ot,Ae(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&ka(Ae(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,o){return fn(0,arguments,this),this},e.from=function(n,s,o){return fn(1,arguments,this),this},e.fromTo=function(n,s,o,a){return fn(2,arguments,this),this},e.set=function(n,s,o){return s.duration=0,s.parent=this,dn(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new pt(n,s,Zt(this,o),1),this},e.call=function(n,s,o){return fe(this,pt.delayedCall(0,n,s),o)},e.staggerTo=function(n,s,o,a,l,c,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new pt(n,o,Zt(this,l)),this},e.staggerFrom=function(n,s,o,a,l,c,h){return o.runBackwards=1,dn(o).immediateRender=Pt(o.immediateRender),this.staggerTo(n,s,o,a,l,c,h)},e.staggerFromTo=function(n,s,o,a,l,c,h,d){return a.startAt=o,dn(a).immediateRender=Pt(a.immediateRender),this.staggerTo(n,s,a,l,c,h,d)},e.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=n<=0?0:gt(n),d=this._zTime<0!=n<0&&(this._initted||!c),p,u,g,f,_,D,T,A,C,E,v,L;if(this!==ot&&h>l&&n>=0&&(h=l),h!==this._tTime||o||d){if(a!==this._time&&c&&(h+=this._time-a,n+=this._time-a),p=h,C=this._start,A=this._ts,D=!A,d&&(c||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(v=this._yoyo,_=c+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(_*100+n,s,o);if(p=gt(h%_),h===l?(f=this._repeat,p=c):(E=gt(h/_),f=~~E,f&&f===E&&(p=c,f--),p>c&&(p=c)),E=Hi(this._tTime,_),!a&&this._tTime&&E!==f&&this._tTime-E*_-this._dur<=0&&(E=f),v&&f&1&&(p=c-p,L=1),f!==E&&!this._lock){var I=v&&E&1,y=I===(v&&f&1);if(f<E&&(I=!I),a=I?0:h%c?c:h,this._lock=1,this.render(a||(L?0:gt(f*_)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Gt(this,"onRepeat"),this.vars.repeatRefresh&&!L&&(this.invalidate()._lock=1),a&&a!==this._time||D!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,y&&(this._lock=2,a=I?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!L&&this.invalidate()),this._lock=0,!this._ts&&!D)return this;Ja(this,L)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=Yu(this,gt(a),gt(p)),T&&(h-=p-(p=T._start))),this._tTime=h,this._time=p,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&h&&!s&&!E&&(Gt(this,"onStart"),this._tTime!==h))return this;if(p>=a&&n>=0)for(u=this._first;u;){if(g=u._next,(u._act||p>=u._start)&&u._ts&&T!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(p-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(p-u._start)*u._ts,s,o),p!==this._time||!this._ts&&!D){T=0,g&&(h+=this._zTime=-1e-8);break}}u=g}else{u=this._last;for(var F=n<0?n:p;u;){if(g=u._prev,(u._act||F<=u._end)&&u._ts&&T!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(F-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(F-u._start)*u._ts,s,o||At&&Wr(u)),p!==this._time||!this._ts&&!D){T=0,g&&(h+=this._zTime=F?-1e-8:Lt);break}}u=g}}if(T&&!s&&(this.pause(),T.render(p>=a?0:-1e-8)._zTime=p>=a?1:-1,this._ts))return this._start=C,Ts(this),this.render(n,s,o);this._onUpdate&&!s&&Gt(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(C===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((n||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&ze(this,1),!s&&!(n<0&&!a)&&(h||a||!l)&&(Gt(this,h===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var o=this;if(ve(s)||(s=Zt(this,s,n)),!(n instanceof wn)){if(vt(n))return n.forEach(function(a){return o.add(a,s)}),this;if(St(n))return this.addLabel(n,s);if(lt(n))n=pt.delayedCall(0,n);else return this}return this!==n?fe(this,n,s):this},e.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof pt?s&&l.push(c):(o&&l.push(c),n&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},e.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},e.remove=function(n){return St(n)?this.removeLabel(n):lt(n)?this.killTweensOf(n):(n.parent===this&&ys(this,n),n===this._recent&&(this._recent=this._last),ai(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=gt(Ut.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=Zt(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,o){var a=pt.delayedCall(0,s||An,o);return a.data="isPause",this._hasPause=1,fe(this,a,Zt(this,n))},e.removePause=function(n){var s=this._first;for(n=Zt(this,n);s;)s._start===n&&s.data==="isPause"&&ze(s),s=s._next},e.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)Ne!==a[l]&&a[l].kill(n,s);return this},e.getTweensOf=function(n,s){for(var o=[],a=Jt(n),l=this._first,c=ve(s),h;l;)l instanceof pt?Bu(l._targets,a)&&(c?(!Ne||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},e.tweenTo=function(n,s){s=s||{};var o=this,a=Zt(o,n),l=s,c=l.startAt,h=l.onStart,d=l.onStartParams,p=l.immediateRender,u,g=pt.to(o,zt({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Lt,onStart:function(){if(o.pause(),!u){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==_&&Gi(g,_,0,1).render(g._time,!0,!0),u=1}h&&h.apply(g,d||[])}},s));return p?g.render(0):g},e.tweenFromTo=function(n,s,o){return this.tweenTo(s,zt({startAt:{time:Zt(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),xo(this,Zt(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),xo(this,Zt(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Lt)},e.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=n);return ai(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ai(this)},e.totalDuration=function(n){var s=0,o=this,a=o._last,l=ge,c,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,fe(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Gi(o,o===ot&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(ot._ts&&(xa(ot,cs(n,ot)),Oa=Ut.frame),Ut.frame>=vo){vo+=Vt.autoSleep||120;var s=ot._first;if((!s||!s._ts)&&Vt.autoSleep&&Ut._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ut.sleep()}}},t}(wn);zt(bt.prototype,{_lock:0,_hasPause:0,_forcing:0});var ac=function(t,e,i,n,s,o,a){var l=new Mt(this._pt,t,e,0,1,ol,null,s),c=0,h=0,d,p,u,g,f,_,D,T;for(l.b=i,l.e=n,i+="",n+="",(D=~n.indexOf("random("))&&(n=Cn(n)),o&&(T=[i,n],o(T,t,e),i=T[0],n=T[1]),p=i.match(Ms)||[];d=Ms.exec(n);)g=d[0],f=n.substring(c,d.index),u?u=(u+1)%5:f.substr(-5)==="rgba("&&(u=1),g!==p[h++]&&(_=parseFloat(p[h-1])||0,l._pt={_next:l._pt,p:f||h===1?f:",",s:_,c:g.charAt(1)==="="?Oi(_,g)-_:parseFloat(g)-_,m:u&&u<4?Math.round:0},c=Ms.lastIndex);return l.c=c<n.length?n.substring(c,n.length):"",l.fp=a,(Ia.test(n)||D)&&(l.e=0),this._pt=l,l},Xr=function(t,e,i,n,s,o,a,l,c,h){lt(n)&&(n=n(s||0,t,o));var d=t[e],p=i!=="get"?i:lt(d)?c?t[e.indexOf("set")||!lt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,u=lt(d)?c?dc:sl:qr,g;if(St(n)&&(~n.indexOf("random(")&&(n=Cn(n)),n.charAt(1)==="="&&(g=Oi(p,n)+(wt(p)||0),(g||g===0)&&(n=g))),!h||p!==n||lr)return!isNaN(p*n)&&n!==""?(g=new Mt(this._pt,t,e,+p||0,n-(p||0),typeof d=="boolean"?pc:rl,0,u),c&&(g.fp=c),a&&g.modifier(a,this,t),this._pt=g):(!d&&!(e in t)&&Vr(e,n),ac.call(this,t,e,p,n,u,l||Vt.stringFilter,c))},lc=function(t,e,i,n,s){if(lt(t)&&(t=pn(t,s,e,i,n)),!_e(t)||t.style&&t.nodeType||vt(t)||Aa(t))return St(t)?pn(t,s,e,i,n):t;var o={},a;for(a in t)o[a]=pn(t[a],s,e,i,n);return o},el=function(t,e,i,n,s,o){var a,l,c,h;if(kt[t]&&(a=new kt[t]).init(s,a.rawVars?e[t]:lc(e[t],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new Mt(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==Li))for(c=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)c[a._props[h]]=l;return a},Ne,lr,jr=function r(t,e,i){var n=t.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,c=n.onUpdate,h=n.runBackwards,d=n.yoyoEase,p=n.keyframes,u=n.autoRevert,g=t._dur,f=t._startAt,_=t._targets,D=t.parent,T=D&&D.data==="nested"?D.vars.targets:_,A=t._overwrite==="auto"&&!Br,C=t.timeline,E,v,L,I,y,F,M,U,x,K,q,B,G;if(C&&(!p||!s)&&(s="none"),t._ease=li(s,Bi.ease),t._yEase=d?Za(li(d===!0?s:d,Bi.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!C&&!!n.runBackwards,!C||p&&!n.stagger){if(U=_[0]?oi(_[0]).harness:0,B=U&&n[U.prop],E=us(n,$r),f&&(f._zTime<0&&f.progress(1),e<0&&h&&a&&!u?f.render(-1,!0):f.revert(h&&g?jn:Nu),f._lazy=0),o){if(ze(t._startAt=pt.set(_,zt({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!f&&Pt(l),startAt:null,delay:0,onUpdate:c&&function(){return Gt(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At||!a&&!u)&&t._startAt.revert(jn),a&&g&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(h&&g&&!f){if(e&&(a=!1),L=zt({overwrite:!1,data:"isFromStart",lazy:a&&!f&&Pt(l),immediateRender:a,stagger:0,parent:D},E),B&&(L[U.prop]=B),ze(t._startAt=pt.set(_,L)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At?t._startAt.revert(jn):t._startAt.render(-1,!0)),t._zTime=e,!a)r(t._startAt,Lt,Lt);else if(!e)return}for(t._pt=t._ptCache=0,l=g&&Pt(l)||l&&!g,v=0;v<_.length;v++){if(y=_[v],M=y._gsap||Yr(_)[v]._gsap,t._ptLookup[v]=K={},ir[M.id]&&Ge.length&&ls(),q=T===_?v:T.indexOf(y),U&&(x=new U).init(y,B||E,t,q,T)!==!1&&(t._pt=I=new Mt(t._pt,y,x.name,0,1,x.render,x,0,x.priority),x._props.forEach(function(st){K[st]=I}),x.priority&&(F=1)),!U||B)for(L in E)kt[L]&&(x=el(L,E,t,q,y,T))?x.priority&&(F=1):K[L]=I=Xr.call(t,y,L,"get",E[L],q,T,0,n.stringFilter);t._op&&t._op[v]&&t.kill(y,t._op[v]),A&&t._pt&&(Ne=t,ot.killTweensOf(y,K,t.globalTime(e)),G=!t.parent,Ne=0),t._pt&&l&&(ir[M.id]=1)}F&&al(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!G,p&&e<=0&&C.render(ge,!0,!0)},uc=function(t,e,i,n,s,o,a,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,d,p,u;if(!c)for(c=t._ptCache[e]=[],p=t._ptLookup,u=t._targets.length;u--;){if(h=p[u][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return lr=1,t.vars[e]="+=0",jr(t,a),lr=0,l?Tn(e+" not eligible for reset"):1;c.push(h)}for(u=c.length;u--;)d=c[u],h=d._pt||d,h.s=(n||n===0)&&!s?n:h.s+(n||0)+o*h.c,h.c=i-h.s,d.e&&(d.e=ht(i)+wt(d.e)),d.b&&(d.b=h.s+wt(d.b))},cc=function(t,e){var i=t[0]?oi(t[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return e;s=Ui({},e);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},hc=function(t,e,i,n){var s=e.ease||n||"power1.inOut",o,a;if(vt(e))a=i[t]||(i[t]=[]),e.forEach(function(l,c){return a.push({t:c/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},pn=function(t,e,i,n,s){return lt(t)?t.call(e,i,n,s):St(t)&&~t.indexOf("random(")?Cn(t):t},il=zr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",nl={};xt(il+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return nl[r]=1});var pt=function(r){ya(t,r);function t(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:dn(n))||this;var l=a.vars,c=l.duration,h=l.delay,d=l.immediateRender,p=l.stagger,u=l.overwrite,g=l.keyframes,f=l.defaults,_=l.scrollTrigger,D=l.yoyoEase,T=n.parent||ot,A=(vt(i)||Aa(i)?ve(i[0]):"length"in n)?[i]:Jt(i),C,E,v,L,I,y,F,M;if(a._targets=A.length?Yr(A):Tn("GSAP target "+i+" not found. https://gsap.com",!Vt.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=u,g||p||Vn(c)||Vn(h)){if(n=a.vars,C=a.timeline=new bt({data:"nested",defaults:f||{},targets:T&&T.data==="nested"?T.vars.targets:A}),C.kill(),C.parent=C._dp=Ae(a),C._start=0,p||Vn(c)||Vn(h)){if(L=A.length,F=p&&Ga(p),_e(p))for(I in p)~il.indexOf(I)&&(M||(M={}),M[I]=p[I]);for(E=0;E<L;E++)v=us(n,nl),v.stagger=0,D&&(v.yoyoEase=D),M&&Ui(v,M),y=A[E],v.duration=+pn(c,Ae(a),E,y,A),v.delay=(+pn(h,Ae(a),E,y,A)||0)-a._delay,!p&&L===1&&v.delay&&(a._delay=h=v.delay,a._start+=h,v.delay=0),C.to(y,v,F?F(E,y,A):0),C._ease=W.none;C.duration()?c=h=0:a.timeline=0}else if(g){dn(zt(C.vars.defaults,{ease:"none"})),C._ease=li(g.ease||n.ease||"none");var U=0,x,K,q;if(vt(g))g.forEach(function(B){return C.to(A,B,">")}),C.duration();else{v={};for(I in g)I==="ease"||I==="easeEach"||hc(I,g[I],v,g.easeEach);for(I in v)for(x=v[I].sort(function(B,G){return B.t-G.t}),U=0,E=0;E<x.length;E++)K=x[E],q={ease:K.e,duration:(K.t-(E?x[E-1].t:0))/100*c},q[I]=K.v,C.to(A,q,U),U+=q.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||a.duration(c=C.duration())}else a.timeline=0;return u===!0&&!Br&&(Ne=Ae(a),ot.killTweensOf(A),Ne=0),fe(T,Ae(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(d||!c&&!g&&a._start===gt(T._time)&&Pt(d)&&Vu(Ae(a))&&T.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-h)||0)),_&&ka(Ae(a),_),a}var e=t.prototype;return e.render=function(n,s,o){var a=this._time,l=this._tDur,c=this._dur,h=n<0,d=n>l-Lt&&!h?l:n<Lt?0:n,p,u,g,f,_,D,T,A,C;if(!c)zu(this,n,s,o);else if(d!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(p=d,A=this.timeline,this._repeat){if(f=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(f*100+n,s,o);if(p=gt(d%f),d===l?(g=this._repeat,p=c):(_=gt(d/f),g=~~_,g&&g===_?(p=c,g--):p>c&&(p=c)),D=this._yoyo&&g&1,D&&(C=this._yEase,p=c-p),_=Hi(this._tTime,f),p===a&&!o&&this._initted&&g===_)return this._tTime=d,this;g!==_&&(A&&this._yEase&&Ja(A,D),this.vars.repeatRefresh&&!D&&!this._lock&&p!==f&&this._initted&&(this._lock=o=1,this.render(gt(f*g),!0).invalidate()._lock=0))}if(!this._initted){if(Ba(this,h?n:p,o,s,d))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==_))return this;if(c!==this._dur)return this.render(n,s,o)}if(this._tTime=d,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(C||this._ease)(p/c),this._from&&(this.ratio=T=1-T),!a&&d&&!s&&!_&&(Gt(this,"onStart"),this._tTime!==d))return this;for(u=this._pt;u;)u.r(T,u.d),u=u._next;A&&A.render(n<0?n:A._dur*A._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(h&&nr(this,n,s,o),Gt(this,"onUpdate")),this._repeat&&g!==_&&this.vars.onRepeat&&!s&&this.parent&&Gt(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&nr(this,n,!0,!0),(n||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&ze(this,1),!s&&!(h&&!a)&&(d||a||D)&&(Gt(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,o,a,l){In||Ut.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||jr(this,c),h=this._ease(c/this._dur),uc(this,n,s,o,a,h,c,l)?this.resetTo(n,s,o,a,1):(As(this,0),this.parent||Fa(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?sn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!At),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Ne&&Ne.vars.overwrite!==!0)._first||sn(this),this.parent&&o!==this.timeline.totalDuration()&&Gi(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?Jt(n):a,c=this._ptLookup,h=this._pt,d,p,u,g,f,_,D;if((!s||s==="all")&&Hu(a,l))return s==="all"&&(this._pt=0),sn(this);for(d=this._op=this._op||[],s!=="all"&&(St(s)&&(f={},xt(s,function(T){return f[T]=1}),s=f),s=cc(a,s)),D=a.length;D--;)if(~l.indexOf(a[D])){p=c[D],s==="all"?(d[D]=s,g=p,u={}):(u=d[D]=d[D]||{},g=s);for(f in g)_=p&&p[f],_&&((!("kill"in _.d)||_.d.kill(f)===!0)&&ys(this,_,"_pt"),delete p[f]),u!=="all"&&(u[f]=1)}return this._initted&&!this._pt&&h&&sn(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return fn(1,arguments)},t.delayedCall=function(n,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,s,o){return fn(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,o){return ot.killTweensOf(n,s,o)},t}(wn);zt(pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});xt("staggerTo,staggerFrom,staggerFromTo",function(r){pt[r]=function(){var t=new bt,e=rr.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var qr=function(t,e,i){return t[e]=i},sl=function(t,e,i){return t[e](i)},dc=function(t,e,i,n){return t[e](n.fp,i)},fc=function(t,e,i){return t.setAttribute(e,i)},Kr=function(t,e){return lt(t[e])?sl:Ur(t[e])&&t.setAttribute?fc:qr},rl=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},pc=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ol=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Zr=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},gc=function(t,e,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(t,e,i),s=o},_c=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?ys(this,e,"_pt"):e.dep||(i=1),e=n;return!i},mc=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},al=function(t){for(var e=t._pt,i,n,s,o;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:o=e,e=i}t._pt=s},Mt=function(){function r(e,i,n,s,o,a,l,c,h){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||rl,this.d=l||this,this.set=c||qr,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=mc,this.m=i,this.mt=s,this.tween=n},r}();xt(zr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return $r[r]=1});$t.TweenMax=$t.TweenLite=pt;$t.TimelineLite=$t.TimelineMax=bt;ot=new bt({sortChildren:!1,defaults:Bi,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Vt.stringFilter=Ka;var ui=[],Kn={},Dc=[],Ro=0,Ec=0,Bs=function(t){return(Kn[t]||Dc).map(function(e){return e()})},ur=function(){var t=Date.now(),e=[];t-Ro>2&&(Bs("matchMediaInit"),ui.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,c;for(a in n)o=he.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&e.push(i))}),Bs("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Ro=t,Bs("matchMedia"))},ll=function(){function r(e,i){this.selector=i&&or(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Ec++,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){lt(i)&&(s=n,n=i,i=lt);var o=this,a=function(){var c=rt,h=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=or(s)),rt=o,d=n.apply(o,arguments),lt(d)&&o._r.push(d),rt=c,o.selector=h,o.isReverted=!1,d};return o.last=a,i===lt?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var n=rt;rt=null,i(this),rt=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof pt&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof bt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof pt)&&c.revert&&c.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=ui.length;o--;)ui[o].id===this.id&&ui.splice(o,1)},t.revert=function(i){this.kill(i||{})},r}(),Sc=function(){function r(e){this.contexts=[],this.scope=e,rt&&rt.data.push(this)}var t=r.prototype;return t.add=function(i,n,s){_e(i)||(i={matches:i});var o=new ll(0,s||this.scope),a=o.conditions={},l,c,h;rt&&!o.selector&&(o.selector=rt.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(c in i)c==="all"?h=1:(l=he.matchMedia(i[c]),l&&(ui.indexOf(o)<0&&ui.push(o),(a[c]=l.matches)&&(h=1),l.addListener?l.addListener(ur):l.addEventListener("change",ur)));return h&&n(o,function(d){return o.add(null,d)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),hs={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return Xa(n)})},timeline:function(t){return new bt(t)},getTweensOf:function(t,e){return ot.getTweensOf(t,e)},getProperty:function(t,e,i,n){St(t)&&(t=Jt(t)[0]);var s=oi(t||{}).get,o=i?Ra:Ma;return i==="native"&&(i=""),t&&(e?o((kt[e]&&kt[e].get||s)(t,e,i,n)):function(a,l,c){return o((kt[a]&&kt[a].get||s)(t,a,l,c))})},quickSetter:function(t,e,i){if(t=Jt(t),t.length>1){var n=t.map(function(h){return Ft.quickSetter(h,e,i)}),s=n.length;return function(h){for(var d=s;d--;)n[d](h)}}t=t[0]||{};var o=kt[e],a=oi(t),l=a.harness&&(a.harness.aliases||{})[e]||e,c=o?function(h){var d=new o;Li._pt=0,d.init(t,i?h+i:h,Li,0,[t]),d.render(1,d),Li._pt&&Zr(1,Li)}:a.set(t,l);return o?c:function(h){return c(t,l,i?h+i:h,a,1)}},quickTo:function(t,e,i){var n,s=Ft.to(t,zt((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,c,h){return s.resetTo(e,l,c,h)};return o.tween=s,o},isTweening:function(t){return ot.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=li(t.ease,Bi.ease)),bo(Bi,t||{})},config:function(t){return bo(Vt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!kt[a]&&!$t[a]&&Tn(e+" effect requires "+a+" plugin.")}),Rs[e]=function(a,l,c){return i(Jt(a),zt(l||{},s),c)},o&&(bt.prototype[e]=function(a,l,c){return this.add(Rs[e](a,_e(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){W[t]=li(e)},parseEase:function(t,e){return arguments.length?li(t,e):W},getById:function(t){return ot.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new bt(t),n,s;for(i.smoothChildTiming=Pt(t.smoothChildTiming),ot.remove(i),i._dp=0,i._time=i._tTime=ot._time,n=ot._first;n;)s=n._next,(e||!(!n._dur&&n instanceof pt&&n.vars.onComplete===n._targets[0]))&&fe(i,n,n._start-n._delay),n=s;return fe(ot,i,0),i},context:function(t,e){return t?new ll(t,e):rt},matchMedia:function(t){return new Sc(t)},matchMediaRefresh:function(){return ui.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||ur()},addEventListener:function(t,e){var i=Kn[t]||(Kn[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Kn[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Ju,wrapYoyo:Qu,distribute:Ga,random:$a,snap:Va,normalize:Zu,getUnit:wt,clamp:Xu,splitColor:ja,toArray:Jt,selector:or,mapRange:Ya,pipe:qu,unitize:Ku,interpolate:tc,shuffle:Ha},install:va,effects:Rs,ticker:Ut,updateRoot:bt.updateRoot,plugins:kt,globalTimeline:ot,core:{PropTween:Mt,globals:ba,Tween:pt,Timeline:bt,Animation:wn,getCache:oi,_removeLinkedListItem:ys,reverting:function(){return At},context:function(t){return t&&rt&&(rt.data.push(t),t._ctx=rt),rt},suppressOverwrites:function(t){return Br=t}}};xt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return hs[r]=pt[r]});Ut.add(bt.updateRoot);Li=hs.to({},{duration:0});var yc=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Tc=function(t,e){var i=t._targets,n,s,o;for(n in e)for(s=i.length;s--;)o=t._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=yc(o,n)),o&&o.modifier&&o.modifier(e[n],t,i[s],n))},Us=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,c;if(St(s)&&(l={},xt(s,function(h){return l[h]=1}),s=l),e){l={};for(c in s)l[c]=e(s[c]);s=l}Tc(a,s)}}}},Ft=hs.registerPlugin({name:"attr",init:function(t,e,i,n,s){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)At?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Us("roundProps",ar),Us("modifiers"),Us("snap",Va))||hs;pt.version=bt.version=Ft.version="3.13.0";La=1;Hr()&&Vi();W.Power0;W.Power1;W.Power2;W.Power3;W.Power4;W.Linear;W.Quad;W.Cubic;W.Quart;W.Quint;W.Strong;W.Elastic;W.Back;W.SteppedEase;W.Bounce;W.Sine;W.Expo;W.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Fo,ke,Pi,Jr,si,No,Qr,Ac=function(){return typeof window<"u"},be={},ti=180/Math.PI,xi=Math.PI/180,Di=Math.atan2,ko=1e8,to=/([A-Z])/g,Cc=/(left|right|width|margin|padding|x)/i,Ic=/[\s,\(]\S/,pe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},cr=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},wc=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Lc=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},vc=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},ul=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},cl=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},bc=function(t,e,i){return t.style[e]=i},Oc=function(t,e,i){return t.style.setProperty(e,i)},Pc=function(t,e,i){return t._gsap[e]=i},xc=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Mc=function(t,e,i,n,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Rc=function(t,e,i,n,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},at="transform",Rt=at+"Origin",Fc=function r(t,e){var i=this,n=this.target,s=n.style,o=n._gsap;if(t in be&&s){if(this.tfm=this.tfm||{},t!=="transform")t=pe[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Ce(n,a)}):this.tfm[t]=o.x?o[t]:Ce(n,t),t===Rt&&(this.tfm.zOrigin=o.zOrigin);else return pe.transform.split(",").forEach(function(a){return r.call(i,a,e)});if(this.props.indexOf(at)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Rt,e,"")),t=at}(s||e)&&this.props.push(t,e,s[t])},hl=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Nc=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(to,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Qr(),(!s||!s.isStart)&&!i[at]&&(hl(i),n.zOrigin&&i[Rt]&&(i[Rt]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},dl=function(t,e){var i={target:t,props:[],revert:Nc,save:Fc};return t._gsap||Ft.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},fl,hr=function(t,e){var i=ke.createElementNS?ke.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ke.createElement(t);return i&&i.style?i:ke.createElement(t)},Qt=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(to,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,$i(e)||e,1)||""},Bo="O,Moz,ms,Ms,Webkit".split(","),$i=function(t,e,i){var n=e||si,s=n.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Bo[o]+t in s););return o<0?null:(o===3?"ms":o>=0?Bo[o]:"")+t},dr=function(){Ac()&&window.document&&(Fo=window,ke=Fo.document,Pi=ke.documentElement,si=hr("div")||{style:{}},hr("div"),at=$i(at),Rt=at+"Origin",si.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",fl=!!$i("perspective"),Qr=Ft.core.reverting,Jr=1)},Uo=function(t){var e=t.ownerSVGElement,i=hr("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),Pi.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),Pi.removeChild(i),s},Ho=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},pl=function(t){var e,i;try{e=t.getBBox()}catch{e=Uo(t),i=1}return e&&(e.width||e.height)||i||(e=Uo(t)),e&&!e.width&&!e.x&&!e.y?{x:+Ho(t,["x","cx","x1"])||0,y:+Ho(t,["y","cy","y1"])||0,width:0,height:0}:e},gl=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&pl(t))},di=function(t,e){if(e){var i=t.style,n;e in be&&e!==Rt&&(e=at),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(to,"-$1").toLowerCase())):i.removeAttribute(e)}},Be=function(t,e,i,n,s,o){var a=new Mt(t._pt,e,i,0,1,o?cl:ul);return t._pt=a,a.b=n,a.e=s,t._props.push(i),a},Go={deg:1,rad:1,turn:1},kc={grid:1,flex:1},Ye=function r(t,e,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=si.style,l=Cc.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),d=100,p=n==="px",u=n==="%",g,f,_,D;if(n===o||!s||Go[n]||Go[o])return s;if(o!=="px"&&!p&&(s=r(t,e,i,"px")),D=t.getCTM&&gl(t),(u||o==="%")&&(be[e]||~e.indexOf("adius")))return g=D?t.getBBox()[l?"width":"height"]:t[h],ht(u?s/g*d:s/100*g);if(a[l?"width":"height"]=d+(p?o:n),f=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!c?t:t.parentNode,D&&(f=(t.ownerSVGElement||{}).parentNode),(!f||f===ke||!f.appendChild)&&(f=ke.body),_=f._gsap,_&&u&&_.width&&l&&_.time===Ut.time&&!_.uncache)return ht(s/_.width*d);if(u&&(e==="height"||e==="width")){var T=t.style[e];t.style[e]=d+n,g=t[h],T?t.style[e]=T:di(t,e)}else(u||o==="%")&&!kc[Qt(f,"display")]&&(a.position=Qt(t,"position")),f===t&&(a.position="static"),f.appendChild(si),g=si[h],f.removeChild(si),a.position="absolute";return l&&u&&(_=oi(f),_.time=Ut.time,_.width=f[h]),ht(p?g*s/d:g&&s?d/g*s:0)},Ce=function(t,e,i,n){var s;return Jr||dr(),e in pe&&e!=="transform"&&(e=pe[e],~e.indexOf(",")&&(e=e.split(",")[0])),be[e]&&e!=="transform"?(s=vn(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:fs(Qt(t,Rt))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=ds[e]&&ds[e](t,e,i)||Qt(t,e)||Pa(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Ye(t,e,s,i)+i:s},Bc=function(t,e,i,n){if(!i||i==="none"){var s=$i(e,t,1),o=s&&Qt(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=Qt(t,"borderTopColor"))}var a=new Mt(this._pt,t.style,e,0,1,ol),l=0,c=0,h,d,p,u,g,f,_,D,T,A,C,E;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Qt(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(f=t.style[e],t.style[e]=n,n=Qt(t,e)||n,f?t.style[e]=f:di(t,e)),h=[i,n],Ka(h),i=h[0],n=h[1],p=i.match(wi)||[],E=n.match(wi)||[],E.length){for(;d=wi.exec(n);)_=d[0],T=n.substring(l,d.index),g?g=(g+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(g=1),_!==(f=p[c++]||"")&&(u=parseFloat(f)||0,C=f.substr((u+"").length),_.charAt(1)==="="&&(_=Oi(u,_)+C),D=parseFloat(_),A=_.substr((D+"").length),l=wi.lastIndex-A.length,A||(A=A||Vt.units[e]||C,l===n.length&&(n+=A,a.e+=A)),C!==A&&(u=Ye(t,e,f,A)||0),a._pt={_next:a._pt,p:T||c===1?T:",",s:u,c:D-u,m:g&&g<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?cl:ul;return Ia.test(n)&&(a.e=0),this._pt=a,a},Vo={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Uc=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=Vo[i]||i,e[1]=Vo[n]||n,e.join(" ")},Hc=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],be[a]&&(l=1,a=a==="transformOrigin"?Rt:at),di(i,a);l&&(di(i,at),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",vn(i,1),o.uncache=1,hl(n)))}},ds={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var o=t._pt=new Mt(t._pt,e,i,0,0,Hc);return o.u=n,o.pr=-10,o.tween=s,t._props.push(i),1}}},Ln=[1,0,0,1,0,0],_l={},ml=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},$o=function(t){var e=Qt(t,at);return ml(e)?Ln:e.substr(7).match(Ca).map(ht)},eo=function(t,e){var i=t._gsap||oi(t),n=t.style,s=$o(t),o,a,l,c;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ln:s):(s===Ln&&!t.offsetParent&&t!==Pi&&!i.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,a=t.nextElementSibling,Pi.appendChild(t)),s=$o(t),l?n.display=l:di(t,"display"),c&&(a?o.insertBefore(t,a):o?o.appendChild(t):Pi.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},fr=function(t,e,i,n,s,o){var a=t._gsap,l=s||eo(t,!0),c=a.xOrigin||0,h=a.yOrigin||0,d=a.xOffset||0,p=a.yOffset||0,u=l[0],g=l[1],f=l[2],_=l[3],D=l[4],T=l[5],A=e.split(" "),C=parseFloat(A[0])||0,E=parseFloat(A[1])||0,v,L,I,y;i?l!==Ln&&(L=u*_-g*f)&&(I=C*(_/L)+E*(-f/L)+(f*T-_*D)/L,y=C*(-g/L)+E*(u/L)-(u*T-g*D)/L,C=I,E=y):(v=pl(t),C=v.x+(~A[0].indexOf("%")?C/100*v.width:C),E=v.y+(~(A[1]||A[0]).indexOf("%")?E/100*v.height:E)),n||n!==!1&&a.smooth?(D=C-c,T=E-h,a.xOffset=d+(D*u+T*f)-D,a.yOffset=p+(D*g+T*_)-T):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=E,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!i,t.style[Rt]="0px 0px",o&&(Be(o,a,"xOrigin",c,C),Be(o,a,"yOrigin",h,E),Be(o,a,"xOffset",d,a.xOffset),Be(o,a,"yOffset",p,a.yOffset)),t.setAttribute("data-svg-origin",C+" "+E)},vn=function(t,e){var i=t._gsap||new tl(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),c=Qt(t,Rt)||"0",h,d,p,u,g,f,_,D,T,A,C,E,v,L,I,y,F,M,U,x,K,q,B,G,st,te,ue,z,X,J,Z,Yt;return h=d=p=f=_=D=T=A=C=0,u=g=1,i.svg=!!(t.getCTM&&gl(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[at]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[at]!=="none"?l[at]:"")),n.scale=n.rotate=n.translate="none"),L=eo(t,i.svg),i.svg&&(i.uncache?(st=t.getBBox(),c=i.xOrigin-st.x+"px "+(i.yOrigin-st.y)+"px",G=""):G=!e&&t.getAttribute("data-svg-origin"),fr(t,G||c,!!G||i.originIsAbsolute,i.smooth!==!1,L)),E=i.xOrigin||0,v=i.yOrigin||0,L!==Ln&&(M=L[0],U=L[1],x=L[2],K=L[3],h=q=L[4],d=B=L[5],L.length===6?(u=Math.sqrt(M*M+U*U),g=Math.sqrt(K*K+x*x),f=M||U?Di(U,M)*ti:0,T=x||K?Di(x,K)*ti+f:0,T&&(g*=Math.abs(Math.cos(T*xi))),i.svg&&(h-=E-(E*M+v*x),d-=v-(E*U+v*K))):(Yt=L[6],J=L[7],ue=L[8],z=L[9],X=L[10],Z=L[11],h=L[12],d=L[13],p=L[14],I=Di(Yt,X),_=I*ti,I&&(y=Math.cos(-I),F=Math.sin(-I),G=q*y+ue*F,st=B*y+z*F,te=Yt*y+X*F,ue=q*-F+ue*y,z=B*-F+z*y,X=Yt*-F+X*y,Z=J*-F+Z*y,q=G,B=st,Yt=te),I=Di(-x,X),D=I*ti,I&&(y=Math.cos(-I),F=Math.sin(-I),G=M*y-ue*F,st=U*y-z*F,te=x*y-X*F,Z=K*F+Z*y,M=G,U=st,x=te),I=Di(U,M),f=I*ti,I&&(y=Math.cos(I),F=Math.sin(I),G=M*y+U*F,st=q*y+B*F,U=U*y-M*F,B=B*y-q*F,M=G,q=st),_&&Math.abs(_)+Math.abs(f)>359.9&&(_=f=0,D=180-D),u=ht(Math.sqrt(M*M+U*U+x*x)),g=ht(Math.sqrt(B*B+Yt*Yt)),I=Di(q,B),T=Math.abs(I)>2e-4?I*ti:0,C=Z?1/(Z<0?-Z:Z):0),i.svg&&(G=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!ml(Qt(t,at)),G&&t.setAttribute("transform",G))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(u*=-1,T+=f<=0?180:-180,f+=f<=0?180:-180):(g*=-1,T+=T<=0?180:-180)),e=e||i.uncache,i.x=h-((i.xPercent=h&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=d-((i.yPercent=d&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=p+o,i.scaleX=ht(u),i.scaleY=ht(g),i.rotation=ht(f)+a,i.rotationX=ht(_)+a,i.rotationY=ht(D)+a,i.skewX=T+a,i.skewY=A+a,i.transformPerspective=C+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!e&&i.zOrigin||0)&&(n[Rt]=fs(c)),i.xOffset=i.yOffset=0,i.force3D=Vt.force3D,i.renderTransform=i.svg?Vc:fl?Dl:Gc,i.uncache=0,i},fs=function(t){return(t=t.split(" "))[0]+" "+t[1]},Hs=function(t,e,i){var n=wt(e);return ht(parseFloat(e)+parseFloat(Ye(t,"x",i+"px",n)))+n},Gc=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Dl(t,e)},Ze="0deg",Qi="0px",Je=") ",Dl=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,h=i.rotationY,d=i.rotationX,p=i.skewX,u=i.skewY,g=i.scaleX,f=i.scaleY,_=i.transformPerspective,D=i.force3D,T=i.target,A=i.zOrigin,C="",E=D==="auto"&&t&&t!==1||D===!0;if(A&&(d!==Ze||h!==Ze)){var v=parseFloat(h)*xi,L=Math.sin(v),I=Math.cos(v),y;v=parseFloat(d)*xi,y=Math.cos(v),o=Hs(T,o,L*y*-A),a=Hs(T,a,-Math.sin(v)*-A),l=Hs(T,l,I*y*-A+A)}_!==Qi&&(C+="perspective("+_+Je),(n||s)&&(C+="translate("+n+"%, "+s+"%) "),(E||o!==Qi||a!==Qi||l!==Qi)&&(C+=l!==Qi||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Je),c!==Ze&&(C+="rotate("+c+Je),h!==Ze&&(C+="rotateY("+h+Je),d!==Ze&&(C+="rotateX("+d+Je),(p!==Ze||u!==Ze)&&(C+="skew("+p+", "+u+Je),(g!==1||f!==1)&&(C+="scale("+g+", "+f+Je),T.style[at]=C||"translate(0, 0)"},Vc=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,h=i.skewY,d=i.scaleX,p=i.scaleY,u=i.target,g=i.xOrigin,f=i.yOrigin,_=i.xOffset,D=i.yOffset,T=i.forceCSS,A=parseFloat(o),C=parseFloat(a),E,v,L,I,y;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=xi,c*=xi,E=Math.cos(l)*d,v=Math.sin(l)*d,L=Math.sin(l-c)*-p,I=Math.cos(l-c)*p,c&&(h*=xi,y=Math.tan(c-h),y=Math.sqrt(1+y*y),L*=y,I*=y,h&&(y=Math.tan(h),y=Math.sqrt(1+y*y),E*=y,v*=y)),E=ht(E),v=ht(v),L=ht(L),I=ht(I)):(E=d,I=p,v=L=0),(A&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(A=Ye(u,"x",o,"px"),C=Ye(u,"y",a,"px")),(g||f||_||D)&&(A=ht(A+g-(g*E+f*L)+_),C=ht(C+f-(g*v+f*I)+D)),(n||s)&&(y=u.getBBox(),A=ht(A+n/100*y.width),C=ht(C+s/100*y.height)),y="matrix("+E+","+v+","+L+","+I+","+A+","+C+")",u.setAttribute("transform",y),T&&(u.style[at]=y)},$c=function(t,e,i,n,s){var o=360,a=St(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?ti:1),c=l-n,h=n+c+"deg",d,p;return a&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),d==="cw"&&c<0?c=(c+o*ko)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*ko)%o-~~(c/o)*o)),t._pt=p=new Mt(t._pt,e,i,n,c,wc),p.e=h,p.u="deg",t._props.push(i),p},zo=function(t,e){for(var i in e)t[i]=e[i];return t},zc=function(t,e,i){var n=zo({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,h,d,p,u,g;n.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[at]=e,a=vn(i,1),di(i,at),i.setAttribute("transform",c)):(c=getComputedStyle(i)[at],o[at]=e,a=vn(i,1),o[at]=c);for(l in be)c=n[l],h=a[l],c!==h&&s.indexOf(l)<0&&(u=wt(c),g=wt(h),d=u!==g?Ye(i,l,c,g):parseFloat(c),p=parseFloat(h),t._pt=new Mt(t._pt,a,l,d,p-d,cr),t._pt.u=g||0,t._props.push(l));zo(a,n)};xt("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",o=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(a){return t<2?r+a:"border"+a+r});ds[t>1?"border"+r:r]=function(a,l,c,h,d){var p,u;if(arguments.length<4)return p=o.map(function(g){return Ce(a,g,c)}),u=p.join(" "),u.split(p[0]).length===5?p[0]:u;p=(h+"").split(" "),u={},o.forEach(function(g,f){return u[g]=p[f]=p[f]||p[(f-1)/2|0]}),a.init(l,u,d)}});var El={name:"css",register:dr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var o=this._props,a=t.style,l=i.vars.startAt,c,h,d,p,u,g,f,_,D,T,A,C,E,v,L,I;Jr||dr(),this.styles=this.styles||dl(t),I=this.styles.props,this.tween=i;for(f in e)if(f!=="autoRound"&&(h=e[f],!(kt[f]&&el(f,e,i,n,t,s)))){if(u=typeof h,g=ds[f],u==="function"&&(h=h.call(i,n,t,s),u=typeof h),u==="string"&&~h.indexOf("random(")&&(h=Cn(h)),g)g(this,t,f,h,i)&&(L=1);else if(f.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(f)+"").trim(),h+="",Ve.lastIndex=0,Ve.test(c)||(_=wt(c),D=wt(h)),D?_!==D&&(c=Ye(t,f,c,D)+D):_&&(h+=_),this.add(a,"setProperty",c,h,n,s,0,0,f),o.push(f),I.push(f,0,a[f]);else if(u!=="undefined"){if(l&&f in l?(c=typeof l[f]=="function"?l[f].call(i,n,t,s):l[f],St(c)&&~c.indexOf("random(")&&(c=Cn(c)),wt(c+"")||c==="auto"||(c+=Vt.units[f]||wt(Ce(t,f))||""),(c+"").charAt(1)==="="&&(c=Ce(t,f))):c=Ce(t,f),p=parseFloat(c),T=u==="string"&&h.charAt(1)==="="&&h.substr(0,2),T&&(h=h.substr(2)),d=parseFloat(h),f in pe&&(f==="autoAlpha"&&(p===1&&Ce(t,"visibility")==="hidden"&&d&&(p=0),I.push("visibility",0,a.visibility),Be(this,a,"visibility",p?"inherit":"hidden",d?"inherit":"hidden",!d)),f!=="scale"&&f!=="transform"&&(f=pe[f],~f.indexOf(",")&&(f=f.split(",")[0]))),A=f in be,A){if(this.styles.save(f),u==="string"&&h.substring(0,6)==="var(--"&&(h=Qt(t,h.substring(4,h.indexOf(")"))),d=parseFloat(h)),C||(E=t._gsap,E.renderTransform&&!e.parseTransform||vn(t,e.parseTransform),v=e.smoothOrigin!==!1&&E.smooth,C=this._pt=new Mt(this._pt,a,at,0,1,E.renderTransform,E,0,-1),C.dep=1),f==="scale")this._pt=new Mt(this._pt,E,"scaleY",E.scaleY,(T?Oi(E.scaleY,T+d):d)-E.scaleY||0,cr),this._pt.u=0,o.push("scaleY",f),f+="X";else if(f==="transformOrigin"){I.push(Rt,0,a[Rt]),h=Uc(h),E.svg?fr(t,h,0,v,0,this):(D=parseFloat(h.split(" ")[2])||0,D!==E.zOrigin&&Be(this,E,"zOrigin",E.zOrigin,D),Be(this,a,f,fs(c),fs(h)));continue}else if(f==="svgOrigin"){fr(t,h,1,v,0,this);continue}else if(f in _l){$c(this,E,f,p,T?Oi(p,T+h):h);continue}else if(f==="smoothOrigin"){Be(this,E,"smooth",E.smooth,h);continue}else if(f==="force3D"){E[f]=h;continue}else if(f==="transform"){zc(this,h,t);continue}}else f in a||(f=$i(f)||f);if(A||(d||d===0)&&(p||p===0)&&!Ic.test(h)&&f in a)_=(c+"").substr((p+"").length),d||(d=0),D=wt(h)||(f in Vt.units?Vt.units[f]:_),_!==D&&(p=Ye(t,f,c,D)),this._pt=new Mt(this._pt,A?E:a,f,p,(T?Oi(p,T+d):d)-p,!A&&(D==="px"||f==="zIndex")&&e.autoRound!==!1?vc:cr),this._pt.u=D||0,_!==D&&D!=="%"&&(this._pt.b=c,this._pt.r=Lc);else if(f in a)Bc.call(this,t,f,c,T?T+h:h);else if(f in t)this.add(t,f,c||t[f],T?T+h:h,n,s);else if(f!=="parseTransform"){Vr(f,h);continue}A||(f in a?I.push(f,0,a[f]):typeof t[f]=="function"?I.push(f,2,t[f]()):I.push(f,1,c||t[f])),o.push(f)}}L&&al(this)},render:function(t,e){if(e.tween._time||!Qr())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ce,aliases:pe,getSetter:function(t,e,i){var n=pe[e];return n&&n.indexOf(",")<0&&(e=n),e in be&&e!==Rt&&(t._gsap.x||Ce(t,"x"))?i&&No===i?e==="scale"?xc:Pc:(No=i||{})&&(e==="scale"?Mc:Rc):t.style&&!Ur(t.style[e])?bc:~e.indexOf("-")?Oc:Kr(t,e)},core:{_removeProperty:di,_getMatrix:eo}};Ft.utils.checkPrefix=$i;Ft.core.getStyleSaver=dl;(function(r,t,e,i){var n=xt(r+","+t+","+e,function(s){be[s]=1});xt(t,function(s){Vt.units[s]="deg",_l[s]=1}),pe[n[13]]=r+","+t,xt(i,function(s){var o=s.split(":");pe[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");xt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Vt.units[r]="px"});Ft.registerPlugin(El);var Mi=Ft.registerPlugin(El)||Ft;Mi.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var we,ci,io,Cs,on,Zn,ps,gn,oe="transform",pr=oe+"Origin",Sl,yl=function(t){var e=t.ownerDocument||t;for(!(oe in t.style)&&("msTransform"in t.style)&&(oe="msTransform",pr=oe+"Origin");e.parentNode&&(e=e.parentNode););if(ci=window,ps=new fi,e){we=e,io=e.documentElement,Cs=e.body,gn=we.createElementNS("http://www.w3.org/2000/svg","g"),gn.style.transform="none";var i=e.createElement("div"),n=e.createElement("div"),s=e&&(e.body||e.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Sl=n.offsetParent!==i,s.removeChild(i))}return e},Yc=function(t){for(var e,i;t&&t!==Cs;)i=t._gsap,i&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),e?e.push(i):e=[i]),t=t.parentNode;return e},Tl=[],Al=[],Wc=function(){return ci.pageYOffset||we.scrollTop||io.scrollTop||Cs.scrollTop||0},Xc=function(){return ci.pageXOffset||we.scrollLeft||io.scrollLeft||Cs.scrollLeft||0},no=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},jc=function r(t){if(ci.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Gs=function r(t,e){if(t.parentNode&&(we||yl(t))){var i=no(t),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?e?"rect":"g":"div",o=e!==2?0:100,a=e===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=we.createElementNS?we.createElementNS(n.replace(/^https/,"http"),s):we.createElement(s);return e&&(i?(Zn||(Zn=r(t)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),Zn.appendChild(c)):(on||(on=r(t),on.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",on.appendChild(c))),c}throw"Need document and parent."},qc=function(t){for(var e=new fi,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e},Kc=function(t){var e=t.getCTM(),i;return e||(i=t.style[oe],t.style[oe]="none",t.appendChild(gn),e=gn.getCTM(),t.removeChild(gn),i?t.style[oe]=i:t.style.removeProperty(oe.replace(/([A-Z])/g,"-$1").toLowerCase())),e||ps.clone()},Zc=function(t,e){var i=no(t),n=t===i,s=i?Tl:Al,o=t.parentNode,a=o&&!i&&o.shadowRoot&&o.shadowRoot.appendChild?o.shadowRoot:o,l,c,h,d,p,u;if(t===ci)return t;if(s.length||s.push(Gs(t,1),Gs(t,2),Gs(t,3)),l=i?Zn:on,i)n?(h=Kc(t),d=-h.e/h.a,p=-h.f/h.d,c=ps):t.getBBox?(h=t.getBBox(),c=t.transform?t.transform.baseVal:{},c=c.numberOfItems?c.numberOfItems>1?qc(c):c.getItem(0).matrix:ps,d=c.a*h.x+c.c*h.y,p=c.b*h.x+c.d*h.y):(c=new fi,d=p=0),(n?i:o).appendChild(l),l.setAttribute("transform","matrix("+c.a+","+c.b+","+c.c+","+c.d+","+(c.e+d)+","+(c.f+p)+")");else{if(d=p=0,Sl)for(c=t.offsetParent,h=t;h&&(h=h.parentNode)&&h!==c&&h.parentNode;)(ci.getComputedStyle(h)[oe]+"").length>4&&(d=h.offsetLeft,p=h.offsetTop,h=0);if(u=ci.getComputedStyle(t),u.position!=="absolute"&&u.position!=="fixed")for(c=t.offsetParent;o&&o!==c;)d+=o.scrollLeft||0,p+=o.scrollTop||0,o=o.parentNode;h=l.style,h.top=t.offsetTop-p+"px",h.left=t.offsetLeft-d+"px",h[oe]=u[oe],h[pr]=u[pr],h.position=u.position==="fixed"?"fixed":"absolute",a.appendChild(l)}return l},Vs=function(t,e,i,n,s,o,a){return t.a=e,t.b=i,t.c=n,t.d=s,t.e=o,t.f=a,t},fi=function(){function r(e,i,n,s,o,a){e===void 0&&(e=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),Vs(this,e,i,n,s,o,a)}var t=r.prototype;return t.inverse=function(){var i=this.a,n=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=i*o-n*s||1e-10;return Vs(this,o/c,-n/c,-s/c,i/c,(s*l-o*a)/c,-(i*l-n*a)/c)},t.multiply=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f,h=i.a,d=i.c,p=i.b,u=i.d,g=i.e,f=i.f;return Vs(this,h*n+p*o,h*s+p*a,d*n+u*o,d*s+u*a,l+g*n+f*o,c+g*s+f*a)},t.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f;return n===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&c===i.f},t.apply=function(i,n){n===void 0&&(n={});var s=i.x,o=i.y,a=this.a,l=this.b,c=this.c,h=this.d,d=this.e,p=this.f;return n.x=s*a+o*c+d||0,n.y=s*l+o*h+p||0,n},r}();function ii(r,t,e,i){if(!r||!r.parentNode||(we||yl(r)).documentElement===r)return new fi;var n=Yc(r),s=no(r),o=s?Tl:Al,a=Zc(r),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),h=o[2].getBoundingClientRect(),d=a.parentNode,p=jc(r),u=new fi((c.left-l.left)/100,(c.top-l.top)/100,(h.left-l.left)/100,(h.top-l.top)/100,l.left+(p?0:Xc()),l.top+(p?0:Wc()));if(d.removeChild(a),n)for(l=n.length;l--;)c=n[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return t?u.inverse():u}function Yo(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Jc(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var Y,nt,Ht,ae,Le,$s,Ie,gr,an,Ue,Cl,_r,bn,so,ln,se,un,Jn,Il,mr,gs=0,wl=function(){return typeof window<"u"},Ll=function(){return Y||wl()&&(Y=window.gsap)&&Y.registerPlugin&&Y},Fe=function(t){return typeof t=="function"},_n=function(t){return typeof t=="object"},re=function(t){return typeof t>"u"},Qn=function(){return!1},mn="transform",Dr="transformOrigin",Me=function(t){return Math.round(t*1e4)/1e4},tn=Array.isArray,$n=function(t,e){var i=Ht.createElementNS?Ht.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),t):Ht.createElement(t);return i.style?i:Ht.createElement(t)},Wo=180/Math.PI,Ei=1e20,Qc=new fi,Re=Date.now||function(){return new Date().getTime()},hi=[],Ri={},th=0,eh=/^(?:a|input|textarea|button|select)$/i,Xo=0,Si={},Se={},vl=function(t,e){var i={},n;for(n in t)i[n]=e?t[n]*e:t[n];return i},ih=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},jo=function r(t,e){for(var i=t.length,n;i--;)e?t[i].style.touchAction=e:t[i].style.removeProperty("touch-action"),n=t[i].children,n&&n.length&&r(n,e)},bl=function(){return hi.forEach(function(t){return t()})},nh=function(t){hi.push(t),hi.length===1&&Y.ticker.add(bl)},qo=function(){return!hi.length&&Y.ticker.remove(bl)},Ko=function(t){for(var e=hi.length;e--;)hi[e]===t&&hi.splice(e,1);Y.to(qo,{overwrite:!0,delay:15,duration:0,onComplete:qo,data:"_draggable"})},sh=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},_t=function(t,e,i,n){if(t.addEventListener){var s=bn[e];n=n||(Cl?{passive:!1}:null),t.addEventListener(s||e,i,n),s&&e!==s&&t.addEventListener(e,i,n)}},ft=function(t,e,i,n){if(t.removeEventListener){var s=bn[e];t.removeEventListener(s||e,i,n),s&&e!==s&&t.removeEventListener(e,i,n)}},qt=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},rh=function(t,e){for(var i=t.length;i--;)if(t[i].identifier===e)return!0},oh=function r(t){so=t.touches&&gs<t.touches.length,ft(t.target,"touchend",r)},Zo=function(t){so=t.touches&&gs<t.touches.length,_t(t.target,"touchend",oh)},Fi=function(t){return nt.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},Ni=function(t){return nt.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},Jo=function r(t,e){_t(t,"scroll",e),zi(t.parentNode)||r(t.parentNode,e)},Qo=function r(t,e){ft(t,"scroll",e),zi(t.parentNode)||r(t.parentNode,e)},zi=function(t){return!t||t===ae||t.nodeType===9||t===Ht.body||t===nt||!t.nodeType||!t.parentNode},ta=function(t,e){var i=e==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,zi(t)?Math.max(ae[n],Le[n])-(nt["inner"+i]||ae[s]||Le[s]):t[n]-t[s])},zs=function r(t,e){var i=ta(t,"x"),n=ta(t,"y");zi(t)?t=Se:r(t.parentNode,e),t._gsMaxScrollX=i,t._gsMaxScrollY=n,e||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},Ys=function(t,e,i){var n=t.style;n&&(re(n[e])&&(e=an(e,t)||e),i==null?n.removeProperty&&n.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):n[e]=i)},On=function(t){return nt.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},Qe={},yi=function(t){if(t===nt)return Qe.left=Qe.top=0,Qe.width=Qe.right=ae.clientWidth||t.innerWidth||Le.clientWidth||0,Qe.height=Qe.bottom=(t.innerHeight||0)-20<ae.clientHeight?ae.clientHeight:t.innerHeight||Le.clientHeight||0,Qe;var e=t.ownerDocument||Ht,i=re(t.pageX)?!t.nodeType&&!re(t.left)&&!re(t.top)?t:Ue(t)[0].getBoundingClientRect():{left:t.pageX-Ni(e),top:t.pageY-Fi(e),right:t.pageX-Ni(e)+1,bottom:t.pageY-Fi(e)+1};return re(i.right)&&!re(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):re(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},ct=function(t,e,i){var n=t.vars,s=n[i],o=t._listeners[e],a;return Fe(s)&&(a=s.apply(n.callbackScope||t,n[i+"Params"]||[t.pointerEvent])),o&&t.dispatchEvent(e)===!1&&(a=!1),a},ea=function(t,e){var i=Ue(t)[0],n,s,o;return!i.nodeType&&i!==nt?re(t.left)?(s=t.min||t.minX||t.minRotation||0,n=t.min||t.minY||0,{left:s,top:n,width:(t.max||t.maxX||t.maxRotation||0)-s,height:(t.max||t.maxY||0)-n}):(o={x:0,y:0},{left:t.left-o.x,top:t.top-o.y,width:t.width,height:t.height}):ah(i,e)},Kt={},ah=function(t,e){e=Ue(e)[0];var i=t.getBBox&&t.ownerSVGElement,n=t.ownerDocument||Ht,s,o,a,l,c,h,d,p,u,g,f,_,D;if(t===nt)a=Fi(n),s=Ni(n),o=s+(n.documentElement.clientWidth||t.innerWidth||n.body.clientWidth||0),l=a+((t.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:t.innerHeight||n.body.clientHeight||0);else{if(e===nt||re(e))return t.getBoundingClientRect();s=a=0,i?(g=t.getBBox(),f=g.width,_=g.height):(t.viewBox&&(g=t.viewBox.baseVal)&&(s=g.x||0,a=g.y||0,f=g.width,_=g.height),f||(D=On(t),g=D.boxSizing==="border-box",f=(parseFloat(D.width)||t.clientWidth||0)+(g?0:parseFloat(D.borderLeftWidth)+parseFloat(D.borderRightWidth)),_=(parseFloat(D.height)||t.clientHeight||0)+(g?0:parseFloat(D.borderTopWidth)+parseFloat(D.borderBottomWidth)))),o=f,l=_}return t===e?{left:s,top:a,width:o-s,height:l-a}:(c=ii(e,!0).multiply(ii(t)),h=c.apply({x:s,y:a}),d=c.apply({x:o,y:a}),p=c.apply({x:o,y:l}),u=c.apply({x:s,y:l}),s=Math.min(h.x,d.x,p.x,u.x),a=Math.min(h.y,d.y,p.y,u.y),{left:s,top:a,width:Math.max(h.x,d.x,p.x,u.x)-s,height:Math.max(h.y,d.y,p.y,u.y)-a})},Ws=function(t,e,i,n,s,o){var a={},l,c,h;if(e)if(s!==1&&e instanceof Array){if(a.end=l=[],h=e.length,_n(e[0]))for(c=0;c<h;c++)l[c]=vl(e[c],s);else for(c=0;c<h;c++)l[c]=e[c]*s;i+=1.1,n-=1.1}else Fe(e)?a.end=function(d){var p=e.call(t,d),u,g;if(s!==1)if(_n(p)){u={};for(g in p)u[g]=p[g]*s;p=u}else p*=s;return p}:a.end=e;return(i||i===0)&&(a.max=i),(n||n===0)&&(a.min=n),o&&(a.velocity=0),a},lh=function r(t){var e;return!t||!t.getAttribute||t===Le?!1:(e=t.getAttribute("data-clickable"))==="true"||e!=="false"&&(eh.test(t.nodeName+"")||t.getAttribute("contentEditable")==="true")?!0:r(t.parentNode)},zn=function(t,e){for(var i=t.length,n;i--;)n=t[i],n.ondragstart=n.onselectstart=e?null:Qn,Y.set(n,{lazy:!0,userSelect:e?"text":"none"})},uh=function r(t){if(On(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Ol,Er,ch=function(t,e){t=Y.utils.toArray(t)[0],e=e||{};var i=document.createElement("div"),n=i.style,s=t.firstChild,o=0,a=0,l=t.scrollTop,c=t.scrollLeft,h=t.scrollWidth,d=t.scrollHeight,p=0,u=0,g=0,f,_,D,T,A,C;Ol&&e.force3D!==!1?(A="translate3d(",C="px,0px)"):mn&&(A="translate(",C="px)"),this.scrollTop=function(E,v){if(!arguments.length)return-this.top();this.top(-E,v)},this.scrollLeft=function(E,v){if(!arguments.length)return-this.left();this.left(-E,v)},this.left=function(E,v){if(!arguments.length)return-(t.scrollLeft+a);var L=t.scrollLeft-c,I=a;if((L>2||L<-2)&&!v){c=t.scrollLeft,Y.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),e.onKill&&e.onKill();return}E=-E,E<0?(a=E-.5|0,E=0):E>u?(a=E-u|0,E=u):a=0,(a||I)&&(this._skip||(n[mn]=A+-a+"px,"+-o+C),a+p>=0&&(n.paddingRight=a+p+"px")),t.scrollLeft=E|0,c=t.scrollLeft},this.top=function(E,v){if(!arguments.length)return-(t.scrollTop+o);var L=t.scrollTop-l,I=o;if((L>2||L<-2)&&!v){l=t.scrollTop,Y.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),e.onKill&&e.onKill();return}E=-E,E<0?(o=E-.5|0,E=0):E>g?(o=E-g|0,E=g):o=0,(o||I)&&(this._skip||(n[mn]=A+-a+"px,"+-o+C)),t.scrollTop=E|0,l=t.scrollTop},this.maxScrollTop=function(){return g},this.maxScrollLeft=function(){return u},this.disable=function(){for(s=i.firstChild;s;)T=s.nextSibling,t.appendChild(s),s=T;t===i.parentNode&&t.removeChild(i)},this.enable=function(){if(s=t.firstChild,s!==i){for(;s;)T=s.nextSibling,i.appendChild(s),s=T;t.appendChild(i),this.calibrate()}},this.calibrate=function(E){var v=t.clientWidth===f,L,I,y;l=t.scrollTop,c=t.scrollLeft,!(v&&t.clientHeight===_&&i.offsetHeight===D&&h===t.scrollWidth&&d===t.scrollHeight&&!E)&&((o||a)&&(I=this.left(),y=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),L=On(t),(!v||E)&&(n.display="block",n.width="auto",n.paddingRight="0px",p=Math.max(0,t.scrollWidth-t.clientWidth),p&&(p+=parseFloat(L.paddingLeft)+(Er?parseFloat(L.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=p+"px",Er&&(n.paddingBottom=L.paddingBottom),f=t.clientWidth,_=t.clientHeight,h=t.scrollWidth,d=t.scrollHeight,u=t.scrollWidth-f,g=t.scrollHeight-_,D=i.offsetHeight,n.display="block",(I||y)&&(this.left(I),this.top(y)))},this.content=i,this.element=t,this._skip=!1,this.enable()},Xs=function(t){if(wl()&&document.body){var e=window&&window.navigator;nt=window,Ht=document,ae=Ht.documentElement,Le=Ht.body,$s=$n("div"),Jn=!!window.PointerEvent,Ie=$n("div"),Ie.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",un=Ie.style.cursor==="grab"?"grab":"move",ln=e&&e.userAgent.toLowerCase().indexOf("android")!==-1,_r="ontouchstart"in ae&&"orientation"in nt||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),Er=function(){var i=$n("div"),n=$n("div"),s=n.style,o=Le,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),o.appendChild(i),a=n.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),bn=function(i){for(var n=i.split(","),s=("onpointerdown"in $s?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in $s?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[n[a]]=s[a],o[s[a]]=n[a];try{ae.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Cl=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),_t(Ht,"touchcancel",Qn),_t(nt,"touchmove",Qn),Le&&Le.addEventListener("touchstart",Qn),_t(Ht,"contextmenu",function(){for(var i in Ri)Ri[i].isPressed&&Ri[i].endDrag()}),Y=gr=Ll()}Y?(se=Y.plugins.inertia,Il=Y.core.context||function(){},an=Y.utils.checkPrefix,mn=an(mn),Dr=an(Dr),Ue=Y.utils.toArray,mr=Y.core.getStyleSaver,Ol=!!an("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},hh=function(){function r(e){this._listeners={},this.target=e||this}var t=r.prototype;return t.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},t.removeEventListener=function(i,n){var s=this._listeners[i],o=s&&s.indexOf(n);o>=0&&s.splice(o,1)},t.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),Fn=function(r){Jc(t,r);function t(e,i){var n;n=r.call(this)||this,gr||Xs(1),e=Ue(e)[0],n.styles=mr&&mr(e,"transform,left,top"),se||(se=Y.plugins.inertia),n.vars=i=vl(i||{}),n.target=e,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,Y.getProperty(e,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",c=o?"y":"top",h=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),d=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),p=i.minimumMovement||2,u=Yo(n),g=Ue(i.trigger||i.handle||e),f={},_=0,D=!1,T=i.autoScrollMarginTop||40,A=i.autoScrollMarginRight||40,C=i.autoScrollMarginBottom||40,E=i.autoScrollMarginLeft||40,v=i.clickableTest||lh,L=0,I=e._gsap||Y.core.getCache(e),y=uh(e),F=function(m,w){return parseFloat(I.get(e,m,w))},M=e.ownerDocument||Ht,U,x,K,q,B,G,st,te,ue,z,X,J,Z,Yt,Wt,ji,Dt,ws,Oe,Pe,je,qi,yt,Q,yo,Xt,ee,Ls,vs,To,Nt,Ao,Un,Co=function(m){return qt(m),m.stopImmediatePropagation&&m.stopImmediatePropagation(),!1},ce=function k(m){if(u.autoScroll&&u.isDragging&&(D||Dt)){var w=e,S=u.autoScroll*15,b,P,R,V,N,tt,j,et;for(D=!1,Se.scrollTop=nt.pageYOffset!=null?nt.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,Se.scrollLeft=nt.pageXOffset!=null?nt.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft,V=u.pointerX-Se.scrollLeft,N=u.pointerY-Se.scrollTop;w&&!P;)P=zi(w.parentNode),b=P?Se:w.parentNode,R=P?{bottom:Math.max(ae.clientHeight,nt.innerHeight||0),right:Math.max(ae.clientWidth,nt.innerWidth||0),left:0,top:0}:b.getBoundingClientRect(),tt=j=0,d&&(et=b._gsMaxScrollY-b.scrollTop,et<0?j=et:N>R.bottom-C&&et?(D=!0,j=Math.min(et,S*(1-Math.max(0,R.bottom-N)/C)|0)):N<R.top+T&&b.scrollTop&&(D=!0,j=-Math.min(b.scrollTop,S*(1-Math.max(0,N-R.top)/T)|0)),j&&(b.scrollTop+=j)),h&&(et=b._gsMaxScrollX-b.scrollLeft,et<0?tt=et:V>R.right-A&&et?(D=!0,tt=Math.min(et,S*(1-Math.max(0,R.right-V)/A)|0)):V<R.left+E&&b.scrollLeft&&(D=!0,tt=-Math.min(b.scrollLeft,S*(1-Math.max(0,V-R.left)/E)|0)),tt&&(b.scrollLeft+=tt)),P&&(tt||j)&&(nt.scrollTo(b.scrollLeft,b.scrollTop),Ji(u.pointerX+tt,u.pointerY+j)),w=b}if(Dt){var ut=u.x,Ct=u.y;a?(u.deltaX=ut-parseFloat(I.rotation),u.rotation=ut,I.rotation=ut+"deg",I.renderTransform(1,I)):x?(d&&(u.deltaY=Ct-x.top(),x.top(Ct)),h&&(u.deltaX=ut-x.left(),x.left(ut))):o?(d&&(u.deltaY=Ct-parseFloat(I.y),I.y=Ct+"px"),h&&(u.deltaX=ut-parseFloat(I.x),I.x=ut+"px"),I.renderTransform(1,I)):(d&&(u.deltaY=Ct-parseFloat(e.style.top||0),e.style.top=Ct+"px"),h&&(u.deltaX=ut-parseFloat(e.style.left||0),e.style.left=ut+"px")),te&&!m&&!Ls&&(Ls=!0,ct(u,"drag","onDrag")===!1&&(h&&(u.x-=u.deltaX),d&&(u.y-=u.deltaY),k(!0)),Ls=!1)}Dt=!1},qe=function(m,w){var S=u.x,b=u.y,P,R;e._gsap||(I=Y.core.getCache(e)),I.uncache&&Y.getProperty(e,"x"),o?(u.x=parseFloat(I.x),u.y=parseFloat(I.y)):a?u.x=u.rotation=parseFloat(I.rotation):x?(u.y=x.top(),u.x=x.left()):(u.y=parseFloat(e.style.top||(R=On(e))&&R.top)||0,u.x=parseFloat(e.style.left||(R||{}).left)||0),(Oe||Pe||je)&&!w&&(u.isDragging||u.isThrowing)&&(je&&(Si.x=u.x,Si.y=u.y,P=je(Si),P.x!==u.x&&(u.x=P.x,Dt=!0),P.y!==u.y&&(u.y=P.y,Dt=!0)),Oe&&(P=Oe(u.x),P!==u.x&&(u.x=P,a&&(u.rotation=P),Dt=!0)),Pe&&(P=Pe(u.y),P!==u.y&&(u.y=P),Dt=!0)),Dt&&ce(!0),m||(u.deltaX=u.x-S,u.deltaY=u.y-b,ct(u,"throwupdate","onThrowUpdate"))},bs=function(m,w,S,b){return w==null&&(w=-1e20),S==null&&(S=Ei),Fe(m)?function(P){var R=u.isPressed?1-u.edgeResistance:1;return m.call(u,(P>S?S+(P-S)*R:P<w?w+(P-w)*R:P)*b)*b}:tn(m)?function(P){for(var R=m.length,V=0,N=Ei,tt,j;--R>-1;)tt=m[R],j=tt-P,j<0&&(j=-j),j<N&&tt>=w&&tt<=S&&(V=R,N=j);return m[V]}:isNaN(m)?function(P){return P}:function(){return m*b}},Lu=function(m,w,S,b,P,R,V){return R=R&&R<Ei?R*R:Ei,Fe(m)?function(N){var tt=u.isPressed?1-u.edgeResistance:1,j=N.x,et=N.y,ut,Ct,me;return N.x=j=j>S?S+(j-S)*tt:j<w?w+(j-w)*tt:j,N.y=et=et>P?P+(et-P)*tt:et<b?b+(et-b)*tt:et,ut=m.call(u,N),ut!==N&&(N.x=ut.x,N.y=ut.y),V!==1&&(N.x*=V,N.y*=V),R<Ei&&(Ct=N.x-j,me=N.y-et,Ct*Ct+me*me>R&&(N.x=j,N.y=et)),N}:tn(m)?function(N){for(var tt=m.length,j=0,et=Ei,ut,Ct,me,jt;--tt>-1;)me=m[tt],ut=me.x-N.x,Ct=me.y-N.y,jt=ut*ut+Ct*Ct,jt<et&&(j=tt,et=jt);return et<=R?m[j]:N}:function(N){return N}},Os=function(){var m,w,S,b;st=!1,x?(x.calibrate(),u.minX=X=-x.maxScrollLeft(),u.minY=Z=-x.maxScrollTop(),u.maxX=z=u.maxY=J=0,st=!0):i.bounds&&(m=ea(i.bounds,e.parentNode),a?(u.minX=X=m.left,u.maxX=z=m.left+m.width,u.minY=Z=u.maxY=J=0):!re(i.bounds.maxX)||!re(i.bounds.maxY)?(m=i.bounds,u.minX=X=m.minX,u.minY=Z=m.minY,u.maxX=z=m.maxX,u.maxY=J=m.maxY):(w=ea(e,e.parentNode),u.minX=X=Math.round(F(l,"px")+m.left-w.left),u.minY=Z=Math.round(F(c,"px")+m.top-w.top),u.maxX=z=Math.round(X+(m.width-w.width)),u.maxY=J=Math.round(Z+(m.height-w.height))),X>z&&(u.minX=z,u.maxX=z=X,X=u.minX),Z>J&&(u.minY=J,u.maxY=J=Z,Z=u.minY),a&&(u.minRotation=X,u.maxRotation=z),st=!0),i.liveSnap&&(S=i.liveSnap===!0?i.snap||{}:i.liveSnap,b=tn(S)||Fe(S),a?(Oe=bs(b?S:S.rotation,X,z,1),Pe=null):S.points?je=Lu(b?S:S.points,X,z,Z,J,S.radius,x?-1:1):(h&&(Oe=bs(b?S:S.x||S.left||S.scrollLeft,X,z,x?-1:1)),d&&(Pe=bs(b?S:S.y||S.top||S.scrollTop,Z,J,x?-1:1))))},vu=function(){u.isThrowing=!1,ct(u,"throwcomplete","onThrowComplete")},bu=function(){u.isThrowing=!1},Ps=function(m,w){var S,b,P,R;m&&se?(m===!0&&(S=i.snap||i.liveSnap||{},b=tn(S)||Fe(S),m={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?m.rotation=Ws(u,b?S:S.rotation,z,X,1,w):(h&&(m[l]=Ws(u,b?S:S.points||S.x||S.left,z,X,x?-1:1,w||u.lockedAxis==="x")),d&&(m[c]=Ws(u,b?S:S.points||S.y||S.top,J,Z,x?-1:1,w||u.lockedAxis==="y")),(S.points||tn(S)&&_n(S[0]))&&(m.linkedProps=l+","+c,m.radius=S.radius))),u.isThrowing=!0,R=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-u.edgeResistance+.2:i.overshootTolerance,m.duration||(m.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?R===0||_n(m)&&m.resistance>1e3?0:.5:i.minDuration,overshoot:R}),u.tween=P=Y.to(x||e,{inertia:m,data:"_draggable",inherit:!1,onComplete:vu,onInterrupt:bu,onUpdate:i.fastMode?ct:qe,onUpdateParams:i.fastMode?[u,"onthrowupdate","onThrowUpdate"]:S&&S.radius?[!1,!0]:[]}),i.fastMode||(x&&(x._skip=!0),P.render(1e9,!0,!0),qe(!0,!0),u.endX=u.x,u.endY=u.y,a&&(u.endRotation=u.x),P.play(0),qe(!0,!0),x&&(x._skip=!1))):st&&u.applyBounds()},Io=function(m){var w=Q,S;Q=ii(e.parentNode,!0),m&&u.isPressed&&!Q.equals(w||new fi)&&(S=w.inverse().apply({x:K,y:q}),Q.apply(S,S),K=S.x,q=S.y),Q.equals(Qc)&&(Q=null)},Hn=function(){var m=1-u.edgeResistance,w=y?Ni(M):0,S=y?Fi(M):0,b,P,R;o&&(I.x=F(l,"px")+"px",I.y=F(c,"px")+"px",I.renderTransform()),Io(!1),Kt.x=u.pointerX-w,Kt.y=u.pointerY-S,Q&&Q.apply(Kt,Kt),K=Kt.x,q=Kt.y,Dt&&(Ji(u.pointerX,u.pointerY),ce(!0)),Ao=ii(e),x?(Os(),G=x.top(),B=x.left()):(Ki()?(qe(!0,!0),Os()):u.applyBounds(),a?(b=e.ownerSVGElement?[I.xOrigin-e.getBBox().x,I.yOrigin-e.getBBox().y]:(On(e)[Dr]||"0 0").split(" "),ji=u.rotationOrigin=ii(e).apply({x:parseFloat(b[0])||0,y:parseFloat(b[1])||0}),qe(!0,!0),P=u.pointerX-ji.x-w,R=ji.y-u.pointerY+S,B=u.x,G=u.y=Math.atan2(R,P)*Wo):(G=F(c,"px"),B=F(l,"px"))),st&&m&&(B>z?B=z+(B-z)/m:B<X&&(B=X-(X-B)/m),a||(G>J?G=J+(G-J)/m:G<Z&&(G=Z-(Z-G)/m))),u.startX=B=Me(B),u.startY=G=Me(G)},Ki=function(){return u.tween&&u.tween.isActive()},Ou=function(){Ie.parentNode&&!Ki()&&!u.isDragging&&Ie.parentNode.removeChild(Ie)},Zi=function(m,w){var S;if(!U||u.isPressed||!m||(m.type==="mousedown"||m.type==="pointerdown")&&!w&&Re()-L<30&&bn[u.pointerEvent.type]){Nt&&m&&U&&qt(m);return}if(yo=Ki(),Un=!1,u.pointerEvent=m,bn[m.type]?(yt=~m.type.indexOf("touch")?m.currentTarget||m.target:M,_t(yt,"touchend",ie),_t(yt,"touchmove",Ke),_t(yt,"touchcancel",ie),_t(M,"touchstart",Zo)):(yt=null,_t(M,"mousemove",Ke)),ee=null,(!Jn||!yt)&&(_t(M,"mouseup",ie),m&&m.target&&_t(m.target,"mouseup",ie)),qi=v.call(u,m.target)&&i.dragClickables===!1&&!w,qi){_t(m.target,"change",ie),ct(u,"pressInit","onPressInit"),ct(u,"press","onPress"),zn(g,!0),Nt=!1;return}if(Xt=!yt||h===d||u.vars.allowNativeTouchScrolling===!1||u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2)?!1:h?"y":"x",Nt=!Xt&&!u.allowEventDefault,Nt&&(qt(m),_t(nt,"touchforcechange",qt)),m.changedTouches?(m=Yt=m.changedTouches[0],Wt=m.identifier):m.pointerId?Wt=m.pointerId:Yt=Wt=null,gs++,nh(ce),q=u.pointerY=m.pageY,K=u.pointerX=m.pageX,ct(u,"pressInit","onPressInit"),(Xt||u.autoScroll)&&zs(e.parentNode),e.parentNode&&u.autoScroll&&!x&&!a&&e.parentNode._gsMaxScrollX&&!Ie.parentNode&&!e.getBBox&&(Ie.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(Ie)),Hn(),u.tween&&u.tween.kill(),u.isThrowing=!1,Y.killTweensOf(x||e,f,!0),x&&Y.killTweensOf(e,{scrollTo:1},!0),u.tween=u.lockedAxis=null,(i.zIndexBoost||!a&&!x&&i.zIndexBoost!==!1)&&(e.style.zIndex=t.zIndex++),u.isPressed=!0,te=!!(i.onDrag||u._listeners.drag),ue=!!(i.onMove||u._listeners.move),i.cursor!==!1||i.activeCursor)for(S=g.length;--S>-1;)Y.set(g[S],{cursor:i.activeCursor||i.cursor||(un==="grab"?"grabbing":un)});ct(u,"press","onPress")},Ke=function(m){var w=m,S,b,P,R,V,N;if(!U||so||!u.isPressed||!m){Nt&&m&&U&&qt(m);return}if(u.pointerEvent=m,S=m.changedTouches,S){if(m=S[0],m!==Yt&&m.identifier!==Wt){for(R=S.length;--R>-1&&(m=S[R]).identifier!==Wt&&m.target!==e;);if(R<0)return}}else if(m.pointerId&&Wt&&m.pointerId!==Wt)return;if(yt&&Xt&&!ee&&(Kt.x=m.pageX-(y?Ni(M):0),Kt.y=m.pageY-(y?Fi(M):0),Q&&Q.apply(Kt,Kt),b=Kt.x,P=Kt.y,V=Math.abs(b-K),N=Math.abs(P-q),(V!==N&&(V>p||N>p)||ln&&Xt===ee)&&(ee=V>N&&h?"x":"y",Xt&&ee!==Xt&&_t(nt,"touchforcechange",qt),u.vars.lockAxisOnTouchScroll!==!1&&h&&d&&(u.lockedAxis=ee==="x"?"y":"x",Fe(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,w)),ln&&Xt===ee))){ie(w);return}!u.allowEventDefault&&(!Xt||ee&&Xt!==ee)&&w.cancelable!==!1?(qt(w),Nt=!0):Nt&&(Nt=!1),u.autoScroll&&(D=!0),Ji(m.pageX,m.pageY,ue)},Ji=function(m,w,S){var b=1-u.dragResistance,P=1-u.edgeResistance,R=u.pointerX,V=u.pointerY,N=G,tt=u.x,j=u.y,et=u.endX,ut=u.endY,Ct=u.endRotation,me=Dt,jt,xe,Tt,dt,xs,ne;u.pointerX=m,u.pointerY=w,y&&(m-=Ni(M),w-=Fi(M)),a?(dt=Math.atan2(ji.y-w,m-ji.x)*Wo,xs=u.y-dt,xs>180?(G-=360,u.y=dt):xs<-180&&(G+=360,u.y=dt),u.x!==B||Math.max(Math.abs(K-m),Math.abs(q-w))>p?(u.y=dt,Tt=B+(G-dt)*b):Tt=B):(Q&&(ne=m*Q.a+w*Q.c+Q.e,w=m*Q.b+w*Q.d+Q.f,m=ne),xe=w-q,jt=m-K,xe<p&&xe>-p&&(xe=0),jt<p&&jt>-p&&(jt=0),(u.lockAxis||u.lockedAxis)&&(jt||xe)&&(ne=u.lockedAxis,ne||(u.lockedAxis=ne=h&&Math.abs(jt)>Math.abs(xe)?"y":d?"x":null,ne&&Fe(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,u.pointerEvent)),ne==="y"?xe=0:ne==="x"&&(jt=0)),Tt=Me(B+jt*b),dt=Me(G+xe*b)),(Oe||Pe||je)&&(u.x!==Tt||u.y!==dt&&!a)&&(je&&(Si.x=Tt,Si.y=dt,ne=je(Si),Tt=Me(ne.x),dt=Me(ne.y)),Oe&&(Tt=Me(Oe(Tt))),Pe&&(dt=Me(Pe(dt)))),st&&(Tt>z?Tt=z+Math.round((Tt-z)*P):Tt<X&&(Tt=X+Math.round((Tt-X)*P)),a||(dt>J?dt=Math.round(J+(dt-J)*P):dt<Z&&(dt=Math.round(Z+(dt-Z)*P)))),(u.x!==Tt||u.y!==dt&&!a)&&(a?(u.endRotation=u.x=u.endX=Tt,Dt=!0):(d&&(u.y=u.endY=dt,Dt=!0),h&&(u.x=u.endX=Tt,Dt=!0)),!S||ct(u,"move","onMove")!==!1?!u.isDragging&&u.isPressed&&(u.isDragging=Un=!0,ct(u,"dragstart","onDragStart")):(u.pointerX=R,u.pointerY=V,G=N,u.x=tt,u.y=j,u.endX=et,u.endY=ut,u.endRotation=Ct,Dt=me))},ie=function k(m,w){if(!U||!u.isPressed||m&&Wt!=null&&!w&&(m.pointerId&&m.pointerId!==Wt&&m.target!==e||m.changedTouches&&!rh(m.changedTouches,Wt))){Nt&&m&&U&&qt(m);return}u.isPressed=!1;var S=m,b=u.isDragging,P=u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2),R=Y.delayedCall(.001,Ou),V,N,tt,j,et;if(yt?(ft(yt,"touchend",k),ft(yt,"touchmove",Ke),ft(yt,"touchcancel",k),ft(M,"touchstart",Zo)):ft(M,"mousemove",Ke),ft(nt,"touchforcechange",qt),(!Jn||!yt)&&(ft(M,"mouseup",k),m&&m.target&&ft(m.target,"mouseup",k)),Dt=!1,b&&(_=Xo=Re(),u.isDragging=!1),Ko(ce),qi&&!P){m&&(ft(m.target,"change",k),u.pointerEvent=S),zn(g,!1),ct(u,"release","onRelease"),ct(u,"click","onClick"),qi=!1;return}for(N=g.length;--N>-1;)Ys(g[N],"cursor",i.cursor||(i.cursor!==!1?un:null));if(gs--,m){if(V=m.changedTouches,V&&(m=V[0],m!==Yt&&m.identifier!==Wt)){for(N=V.length;--N>-1&&(m=V[N]).identifier!==Wt&&m.target!==e;);if(N<0&&!w)return}u.pointerEvent=S,u.pointerX=m.pageX,u.pointerY=m.pageY}return P&&S?(qt(S),Nt=!0,ct(u,"release","onRelease")):S&&!b?(Nt=!1,yo&&(i.snap||i.bounds)&&Ps(i.inertia||i.throwProps),ct(u,"release","onRelease"),(!ln||S.type!=="touchmove")&&S.type.indexOf("cancel")===-1&&(ct(u,"click","onClick"),Re()-L<300&&ct(u,"doubleclick","onDoubleClick"),j=S.target||e,L=Re(),et=function(){L!==vs&&u.enabled()&&!u.isPressed&&!S.defaultPrevented&&(j.click?j.click():M.createEvent&&(tt=M.createEvent("MouseEvents"),tt.initMouseEvent("click",!0,!0,nt,1,u.pointerEvent.screenX,u.pointerEvent.screenY,u.pointerX,u.pointerY,!1,!1,!1,!1,0,null),j.dispatchEvent(tt)))},!ln&&!S.defaultPrevented&&Y.delayedCall(.05,et))):(Ps(i.inertia||i.throwProps),!u.allowEventDefault&&S&&(i.dragClickables!==!1||!v.call(u,S.target))&&b&&(!Xt||ee&&Xt===ee)&&S.cancelable!==!1?(Nt=!0,qt(S)):Nt=!1,ct(u,"release","onRelease")),Ki()&&R.duration(u.tween.duration()),b&&ct(u,"dragend","onDragEnd"),!0},Gn=function(m){if(m&&u.isDragging&&!x){var w=m.target||e.parentNode,S=w.scrollLeft-w._gsScrollX,b=w.scrollTop-w._gsScrollY;(S||b)&&(Q?(K-=S*Q.a+b*Q.c,q-=b*Q.d+S*Q.b):(K-=S,q-=b),w._gsScrollX+=S,w._gsScrollY+=b,Ji(u.pointerX,u.pointerY))}},wo=function(m){var w=Re(),S=w-L<100,b=w-_<50,P=S&&vs===L,R=u.pointerEvent&&u.pointerEvent.defaultPrevented,V=S&&To===L,N=m.isTrusted||m.isTrusted==null&&S&&P;if((P||b&&u.vars.suppressClickOnDrag!==!1)&&m.stopImmediatePropagation&&m.stopImmediatePropagation(),S&&!(u.pointerEvent&&u.pointerEvent.defaultPrevented)&&(!P||N&&!V)){N&&P&&(To=L),vs=L;return}(u.isPressed||b||S)&&(!N||!m.detail||!S||R)&&qt(m),!S&&!b&&!Un&&(m&&m.target&&(u.pointerEvent=m),ct(u,"click","onClick"))},Lo=function(m){return Q?{x:m.x*Q.a+m.y*Q.c+Q.e,y:m.x*Q.b+m.y*Q.d+Q.f}:{x:m.x,y:m.y}};return ws=t.get(e),ws&&ws.kill(),n.startDrag=function(k,m){var w,S,b,P;Zi(k||u.pointerEvent,!0),m&&!u.hitTest(k||u.pointerEvent)&&(w=yi(k||u.pointerEvent),S=yi(e),b=Lo({x:w.left+w.width/2,y:w.top+w.height/2}),P=Lo({x:S.left+S.width/2,y:S.top+S.height/2}),K-=b.x-P.x,q-=b.y-P.y),u.isDragging||(u.isDragging=Un=!0,ct(u,"dragstart","onDragStart"))},n.drag=Ke,n.endDrag=function(k){return ie(k||u.pointerEvent,!0)},n.timeSinceDrag=function(){return u.isDragging?0:(Re()-_)/1e3},n.timeSinceClick=function(){return(Re()-L)/1e3},n.hitTest=function(k,m){return t.hitTest(u.target,k,m)},n.getDirection=function(k,m){var w=k==="velocity"&&se?k:_n(k)&&!a?"element":"start",S,b,P,R,V,N;return w==="element"&&(V=yi(u.target),N=yi(k)),S=w==="start"?u.x-B:w==="velocity"?se.getVelocity(e,l):V.left+V.width/2-(N.left+N.width/2),a?S<0?"counter-clockwise":"clockwise":(m=m||2,b=w==="start"?u.y-G:w==="velocity"?se.getVelocity(e,c):V.top+V.height/2-(N.top+N.height/2),P=Math.abs(S/b),R=P<1/m?"":S<0?"left":"right",P<m&&(R!==""&&(R+="-"),R+=b<0?"up":"down"),R)},n.applyBounds=function(k,m){var w,S,b,P,R,V;if(k&&i.bounds!==k)return i.bounds=k,u.update(!0,m);if(qe(!0),Os(),st&&!Ki()){if(w=u.x,S=u.y,w>z?w=z:w<X&&(w=X),S>J?S=J:S<Z&&(S=Z),(u.x!==w||u.y!==S)&&(b=!0,u.x=u.endX=w,a?u.endRotation=w:u.y=u.endY=S,Dt=!0,ce(!0),u.autoScroll&&!u.isDragging))for(zs(e.parentNode),P=e,Se.scrollTop=nt.pageYOffset!=null?nt.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,Se.scrollLeft=nt.pageXOffset!=null?nt.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft;P&&!V;)V=zi(P.parentNode),R=V?Se:P.parentNode,d&&R.scrollTop>R._gsMaxScrollY&&(R.scrollTop=R._gsMaxScrollY),h&&R.scrollLeft>R._gsMaxScrollX&&(R.scrollLeft=R._gsMaxScrollX),P=R;u.isThrowing&&(b||u.endX>z||u.endX<X||u.endY>J||u.endY<Z)&&Ps(i.inertia||i.throwProps,b)}return u},n.update=function(k,m,w){if(m&&u.isPressed){var S=ii(e),b=Ao.apply({x:u.x-B,y:u.y-G}),P=ii(e.parentNode,!0);P.apply({x:S.e-b.x,y:S.f-b.y},b),u.x-=b.x-P.e,u.y-=b.y-P.f,ce(!0),Hn()}var R=u.x,V=u.y;return Io(!m),k?u.applyBounds():(Dt&&w&&ce(!0),qe(!0)),m&&(Ji(u.pointerX,u.pointerY),Dt&&ce(!0)),u.isPressed&&!m&&(h&&Math.abs(R-u.x)>.01||d&&Math.abs(V-u.y)>.01&&!a)&&Hn(),u.autoScroll&&(zs(e.parentNode,u.isDragging),D=u.isDragging,ce(!0),Qo(e,Gn),Jo(e,Gn)),u},n.enable=function(k){var m={lazy:!0},w,S,b;if(i.cursor!==!1&&(m.cursor=i.cursor||un),Y.utils.checkPrefix("touchCallout")&&(m.touchCallout="none"),k!=="soft"){for(jo(g,h===d?"none":i.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"),S=g.length;--S>-1;)b=g[S],Jn||_t(b,"mousedown",Zi),_t(b,"touchstart",Zi),_t(b,"click",wo,!0),Y.set(b,m),b.getBBox&&b.ownerSVGElement&&h!==d&&Y.set(b.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"}),i.allowContextMenu||_t(b,"contextmenu",Co);zn(g,!1)}return Jo(e,Gn),U=!0,se&&k!=="soft"&&se.track(x||e,o?"x,y":a?"rotation":"top,left"),e._gsDragID=w=e._gsDragID||"d"+th++,Ri[w]=u,x&&(x.enable(),x.element._gsDragID=w),(i.bounds||a)&&Hn(),i.bounds&&u.applyBounds(),u},n.disable=function(k){for(var m=u.isDragging,w=g.length,S;--w>-1;)Ys(g[w],"cursor",null);if(k!=="soft"){for(jo(g,null),w=g.length;--w>-1;)S=g[w],Ys(S,"touchCallout",null),ft(S,"mousedown",Zi),ft(S,"touchstart",Zi),ft(S,"click",wo,!0),ft(S,"contextmenu",Co);zn(g,!0),yt&&(ft(yt,"touchcancel",ie),ft(yt,"touchend",ie),ft(yt,"touchmove",Ke)),ft(M,"mouseup",ie),ft(M,"mousemove",Ke)}return Qo(e,Gn),U=!1,se&&k!=="soft"&&(se.untrack(x||e,o?"x,y":a?"rotation":"top,left"),u.tween&&u.tween.kill()),x&&x.disable(),Ko(ce),u.isDragging=u.isPressed=qi=!1,m&&ct(u,"dragend","onDragEnd"),u},n.enabled=function(k,m){return arguments.length?k?u.enable(m):u.disable(m):U},n.kill=function(){return u.isThrowing=!1,u.tween&&u.tween.kill(),u.disable(),Y.set(g,{clearProps:"userSelect"}),delete Ri[e._gsDragID],u},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(x=n.scrollProxy=new ch(e,ih({onKill:function(){u.isPressed&&ie(null)}},i)),e.style.overflowY=d&&!_r?"auto":"hidden",e.style.overflowX=h&&!_r?"auto":"hidden",e=x.content),a?f.rotation=1:(h&&(f[l]=1),d&&(f[c]=1)),I.force3D="force3D"in i?i.force3D:!0,Il(Yo(n)),n.enable(),n}return t.register=function(i){Y=i,Xs()},t.create=function(i,n){return gr||Xs(!0),Ue(i).map(function(s){return new t(s,n)})},t.get=function(i){return Ri[(Ue(i)[0]||{})._gsDragID]},t.timeSinceDrag=function(){return(Re()-Xo)/1e3},t.hitTest=function(i,n,s){if(i===n)return!1;var o=yi(i),a=yi(n),l=o.top,c=o.left,h=o.right,d=o.bottom,p=o.width,u=o.height,g=a.left>h||a.right<c||a.top>d||a.bottom<l,f,_,D;return g||!s?!g:(D=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,f={left:Math.max(c,a.left),top:Math.max(l,a.top)},f.width=Math.min(h,a.right)-f.left,f.height=Math.min(d,a.bottom)-f.top,f.width<0||f.height<0?!1:D?(s*=.01,_=f.width*f.height,_>=p*u*s||_>=a.width*a.height*s):f.width>s&&f.height>s)},t}(hh);sh(Fn.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Fn.zIndex=1e3;Fn.version="3.13.0";Ll()&&Y.registerPlugin(Fn);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var de,Sr,Dn,Pl,Ai,vi,yr,xl,Ml=function(){return de||typeof window<"u"&&(de=window.gsap)},Tr={},dh=function(t){return Math.round(t*1e4)/1e4},Ar=function(t){return xl(t).id},cn=function(t){return Tr[Ar(typeof t=="string"?Dn(t)[0]:t)]},ia=function(t){var e=Ai,i;if(t-yr>=.05)for(yr=t;e;)i=e.g(e.t,e.p),(i!==e.v1||t-e.t1>.2)&&(e.v2=e.v1,e.v1=i,e.t2=e.t1,e.t1=t),e=e._next},fh={deg:360,rad:Math.PI*2},js=function(){de=Ml(),de&&(Dn=de.utils.toArray,Pl=de.utils.getUnit,xl=de.core.getCache,vi=de.ticker,Sr=1)},ph=function(t,e,i,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=fh[i||Pl(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=vi.time,n&&(this._next=n,n._prev=this)},Nn=function(){function r(e,i){Sr||js(),this.target=Dn(e)[0],Tr[Ar(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){de=i,js()};var t=r.prototype;return t.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),o,a,l;return o=parseFloat(n?s.v1:s.g(s.t,s.p)),a=o-parseFloat(s.v2),l=s.rCap,l&&(a=a%l,a!==a%(l/2)&&(a=a<0?a+l:a-l)),dh(a/((n?s.t1:vi.time)-s.t2))},t.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},t.isTracking=function(i){return i in this._props},t.add=function(i,n){i in this._props||(Ai||(vi.add(ia),yr=vi.time),Ai=this._props[i]=new ph(this.target,i,n,Ai))},t.remove=function(i){var n=this._props[i],s,o;n&&(s=n._prev,o=n._next,s&&(s._next=o),o?o._prev=s:Ai===n&&(vi.remove(ia),Ai=0),delete this._props[i])},t.kill=function(i){for(var n in this._props)this.remove(n);i||delete Tr[Ar(this.target)]},r.track=function(i,n,s){Sr||js();for(var o=[],a=Dn(i),l=n.split(","),c=(s||"").split(","),h=a.length,d,p;h--;){for(d=cn(a[h])||new r(a[h]),p=l.length;p--;)d.add(l[p],c[p]||c[0]);o.push(d)}return o},r.untrack=function(i,n){var s=(n||"").split(",");Dn(i).forEach(function(o){var a=cn(o);a&&(s.length?s.forEach(function(l){return a.remove(l)}):a.kill(1))})},r.isTracking=function(i,n){var s=cn(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=cn(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();Nn.getByTarget=cn;Ml()&&de.registerPlugin(Nn);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var mt,Rl,na,Fl,Cr,En,Nl,kl,Bl,ro,Ul,Sn,Ir,Hl,_s=Nn.getByTarget,Gl=function(){return mt||typeof window<"u"&&(mt=window.gsap)&&mt.registerPlugin&&mt},gh=function(t){return typeof t=="string"},Pn=function(t){return typeof t=="number"},$e=function(t){return typeof t=="object"},wr=function(t){return typeof t=="function"},_h=1,Vl=Array.isArray,mh=function(t){return t},ki=1e10,sa=1/ki,$l=.05,Dh=function(t){return Math.round(t*1e4)/1e4},Eh=function(t,e,i){for(var n in e)!(n in t)&&n!==i&&(t[n]=e[n]);return t},Sh=function r(t){var e={},i,n;for(i in t)e[i]=$e(n=t[i])&&!Vl(n)?r(n):n;return e},ra=function(t,e,i,n,s){var o=e.length,a=0,l=ki,c,h,d,p;if($e(t)){for(;o--;){c=e[o],h=0;for(d in t)p=c[d]-t[d],h+=p*p;h<l&&(a=o,l=h)}if((s||ki)<ki&&s<Math.sqrt(l))return t}else for(;o--;)c=e[o],h=c-t,h<0&&(h=-h),h<l&&c>=n&&c<=i&&(a=o,l=h);return e[a]},zl=function(t,e,i,n,s,o,a){if(t.end==="auto")return t;var l=t.end,c,h;if(i=isNaN(i)?ki:i,n=isNaN(n)?-1e10:n,$e(e)){if(c=e.calculated?e:(wr(l)?l(e,a):ra(e,l,i,n,o))||e,!e.calculated){for(h in c)e[h]=c[h];e.calculated=!0}c=c[s]}else c=wr(l)?l(e,a):Vl(l)?ra(e,l,i,n,o):parseFloat(l);return c>i?c=i:c<n&&(c=n),{max:c,min:c,unitFactor:t.unitFactor}},ms=function(t,e,i){return isNaN(t[e])?i:+t[e]},oo=function(t,e){return e*$l*t/ro},oa=function(t,e,i){return Math.abs((e-t)*ro/i/$l)},Yl={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},Wl=function(t,e,i,n){if(e.linkedProps){var s=e.linkedProps.split(","),o={},a,l,c,h,d,p;for(a=0;a<s.length;a++)l=s[a],c=e[l],c&&(Pn(c.velocity)?h=c.velocity:(d=d||_s(t),h=d&&d.isTracking(l)?d.get(l):0),p=Math.abs(h/ms(c,"resistance",n)),o[l]=parseFloat(i(t,l))+oo(h,p));return o}},yh=function(t,e,i,n,s,o){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),gh(t)&&(t=Fl(t)[0]),!t)return 0;var a=0,l=ki,c=e.inertia||e,h=Bl(t).get,d=ms(c,"resistance",En.resistance),p,u,g,f,_,D,T,A,C,E;E=Wl(t,c,h,d);for(p in c)Yl[p]||(u=c[p],$e(u)||(A=A||_s(t),A&&A.isTracking(p)?u=Pn(u)?{velocity:u}:{velocity:A.get(p)}:(f=+u||0,g=Math.abs(f/d))),$e(u)&&(Pn(u.velocity)?f=u.velocity:(A=A||_s(t),f=A&&A.isTracking(p)?A.get(p):0),g=Ul(n,i,Math.abs(f/ms(u,"resistance",d))),_=parseFloat(h(t,p))||0,D=_+oo(f,g),"end"in u&&(u=zl(u,E&&p in E?E:D,u.max,u.min,p,c.radius,f),Sn===e&&(Sn=c=Sh(e)),c[p]=Eh(u,c[p],"end")),"max"in u&&D>+u.max+sa?(C=u.unitFactor||En.unitFactors[p]||1,T=_>u.max&&u.min!==u.max||f*C>-15&&f*C<45?n+(i-n)*.1:oa(_,u.max,f),T+s<l&&(l=T+s)):"min"in u&&D<+u.min-sa&&(C=u.unitFactor||En.unitFactors[p]||1,T=_<u.min&&u.min!==u.max||f*C>-45&&f*C<15?n+(i-n)*.1:oa(_,u.min,f),T+s<l&&(l=T+s)),T>a&&(a=T)),g>a&&(a=g));return a>l&&(a=l),a>i?i:a<n?n:a},aa=function(){mt=Gl(),mt&&(na=mt.parseEase,Fl=mt.utils.toArray,Nl=mt.utils.getUnit,Bl=mt.core.getCache,Ul=mt.utils.clamp,Ir=mt.core.getStyleSaver,Hl=mt.core.reverting||function(){},Cr=na("power3"),ro=Cr(.05),kl=mt.core.PropTween,mt.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),En=mt.config(),mt.registerPlugin(Nn),Rl=1)},ao={version:"3.13.0",name:"inertia",register:function(t){mt=t,aa()},init:function(t,e,i,n,s){Rl||aa();var o=_s(t);if(e==="auto"){if(!o){console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");return}e=o.getAll()}this.styles=Ir&&typeof t.style=="object"&&Ir(t),this.target=t,this.tween=i,Sn=e;var a=t._gsap,l=a.get,c=e.duration,h=$e(c),d=e.preventOvershoot||h&&c.overshoot===0,p=ms(e,"resistance",En.resistance),u=Pn(c)?c:yh(t,e,h&&c.max||10,h&&c.min||.2,h&&"overshoot"in c?+c.overshoot:d?0:1),g,f,_,D,T,A,C,E,v;e=Sn,Sn=0,v=Wl(t,e,l,p);for(g in e)Yl[g]||(f=e[g],wr(f)&&(f=f(n,t,s)),Pn(f)?T=f:$e(f)&&!isNaN(f.velocity)?T=+f.velocity:o&&o.isTracking(g)?T=o.get(g):console.warn("ERROR: No velocity was defined for "+t+" property: "+g),A=oo(T,u),E=0,_=l(t,g),D=Nl(_),_=parseFloat(_),$e(f)&&(C=_+A,"end"in f&&(f=zl(f,v&&g in v?v:C,f.max,f.min,g,e.radius,T)),"max"in f&&+f.max<C?d||f.preventOvershoot?A=f.max-_:E=f.max-_-A:"min"in f&&+f.min>C&&(d||f.preventOvershoot?A=f.min-_:E=f.min-_-A)),this._props.push(g),this.styles&&this.styles.save(g),this._pt=new kl(this._pt,t,g,_,0,mh,0,a.set(t,g,this)),this._pt.u=D||0,this._pt.c1=A,this._pt.c2=E);return i.duration(u),_h},render:function(t,e){var i=e._pt;if(t=Cr(e.tween._time/e.tween._dur),t||!Hl())for(;i;)i.set(i.t,i.p,Dh(i.s+i.c1*t+i.c2*t*t)+i.u,i.d,t),i=i._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return ao[r]=Nn[r]});Gl()&&mt.registerPlugin(ao);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Th=/(?:^\s+|\s+$)/g,Ah=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function Xl(r){var t=r.nodeType,e="";if(t===1||t===9||t===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)e+=Xl(r)}else if(t===3||t===4)return r.nodeValue;return e}function Lr(r,t,e,i,n){for(var s=r.firstChild,o=[],a;s;)s.nodeType===3?(a=(s.nodeValue+"").replace(/^\n+/g,""),i||(a=a.replace(/\s+/g," ")),o.push.apply(o,jl(a,t,e,i,n))):(s.nodeName+"").toLowerCase()==="br"?o[o.length-1]+="<br>":o.push(s.outerHTML),s=s.nextSibling;if(!n)for(a=o.length;a--;)o[a]==="&"&&o.splice(a,1,"&amp;");return o}function jl(r,t,e,i,n){if(r+="",e&&(r=r.trim?r.trim():r.replace(Th,"")),t&&t!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var s=[],o=r.length,a=0,l,c;a<o;a++)c=r.charAt(a),(c.charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319||r.charCodeAt(a+1)>=65024&&r.charCodeAt(a+1)<=65039)&&(l=((r.substr(a,12).split(Ah)||[])[1]||"").length||2,c=r.substr(a,l),s.emoji=1,a+=l-1),s.push(n?c:c===">"?"&gt;":c==="<"?"&lt;":i&&c===" "&&(r.charAt(a-1)===" "||r.charAt(a+1)===" ")?"&nbsp;":c);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var hn,Yn,Ch=function(){return hn||typeof window<"u"&&(hn=window.gsap)&&hn.registerPlugin&&hn},kn={version:"3.13.0",name:"text",init:function(t,e,i){typeof e!="object"&&(e={value:e});var n=t.nodeName.toUpperCase(),s=this,o=e,a=o.newClass,l=o.oldClass,c=o.preserveSpaces,h=o.rtl,d=s.delimiter=e.delimiter||"",p=s.fillChar=e.fillChar||(e.padSpace?"&nbsp;":""),u,g,f,_,D,T,A,C;if(s.svg=t.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in t)&&!s.svg)return!1;if(s.target=t,!("value"in e)){s.text=s.original=[""];return}for(f=Lr(t,d,!1,c,s.svg),Yn||(Yn=document.createElement("div")),Yn.innerHTML=e.value,g=Lr(Yn,d,!1,c,s.svg),s.from=i._from,(s.from||h)&&!(h&&s.from)&&(n=f,f=g,g=n),s.hasClass=!!(a||l),s.newClass=h?l:a,s.oldClass=h?a:l,n=f.length-g.length,u=n<0?f:g,n<0&&(n=-n);--n>-1;)u.push(p);if(e.type==="diff"){for(_=0,D=[],T=[],A="",n=0;n<g.length;n++)C=g[n],C===f[n]?A+=C:(D[_]=A+C,T[_++]=A+f[n],A="");g=D,f=T,A&&(g.push(A),f.push(A))}e.speed&&i.duration(Math.min(.05/e.speed*u.length,e.maxDuration||9999)),s.rtl=h,s.original=f,s.text=g,s._props.push("text")},render:function(t,e){t>1?t=1:t<0&&(t=0),e.from&&(t=1-t);var i=e.text,n=e.hasClass,s=e.newClass,o=e.oldClass,a=e.delimiter,l=e.target,c=e.fillChar,h=e.original,d=e.rtl,p=i.length,u=(d?1-t:t)*p+.5|0,g,f,_;n&&t?(g=s&&u,f=o&&u!==p,_=(g?"<span class='"+s+"'>":"")+i.slice(0,u).join(a)+(g?"</span>":"")+(f?"<span class='"+o+"'>":"")+a+h.slice(u).join(a)+(f?"</span>":"")):_=i.slice(0,u).join(a)+a+h.slice(u).join(a),e.svg?l.textContent=_:l.innerHTML=c==="&nbsp;"&&~_.indexOf("  ")?_.split("  ").join("&nbsp;&nbsp;"):_}};kn.splitInnerHTML=Lr;kn.emojiSafeSplit=jl;kn.getText=Xl;Ch()&&hn.registerPlugin(kn);const Ih=1.3,wh=1.3,Lh=.1,vh=150,bh=32,Oh=1.6,Ph=.15,xh=.8,Mh=2,pi=40.6,Rh=.5,Fh=.4,Nh="power1.out",kh=1.7,Bh=2.6,Uh="sine.inOut",It=[0,246,278.727,311.455,344.182,16.909,49.636,82.364,115.091,147.818,180.545,213.273],ye={env:1,lcd:0,logo:1,btn:0},Hh=.75,Gh=.3,Vh=.3,$h=25,ql=1500,zh=ql/1e3,Yh=1,Wh=.1,Xh=.05,jh=.3,qh={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},Kh=1,Zh=.04,Jh=.008,Qh=.05,td=.03,ed=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],id=.7,nd=.2,sd=.2,rd=250,od=.005,ad=.045,ld=9,ud=1.8,cd=75,Ci=.85,hd=0,dd=.33,fd=.66,pd=1,gd=1.05,en=(r,t)=>r.map(e=>({...e,pos:e.pos*t})),Kl=[{power:hd,stops:en([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:dd,stops:en([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:fd,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:pd,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:gd,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],Ci)}],_d=Kl[0].stops.length,md=150,Dd=40,Ed=15,Sd=20,yd=50,Td=150,Ad=530,Cd=370,$={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},lo={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:1,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!1},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistYellow:{numCycles:2,periodStart:.15,periodEnd:.12,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.6,unselected:.4},peakOpacity:{selected:.9,unselected:.7},finalOpacity:{selected:.6,unselected:.4},initialSize:{selected:"8px",unselected:"5px"},peakSize:{selected:"12px",unselected:"8px"},finalSize:{selected:"8px",unselected:"5px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistOrange:{numCycles:2,periodStart:.18,periodEnd:.15,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.65,unselected:.45},peakOpacity:{selected:1,unselected:.8},finalOpacity:{selected:.65,unselected:.45},initialSize:{selected:"9px",unselected:"6px"},peakSize:{selected:"14px",unselected:"10px"},finalSize:{selected:"9px",unselected:"6px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistRedThenSolid:{numCycles:1,periodStart:.4,periodEnd:.4,onDurationRatio:.6,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.7,unselected:.7},peakOpacity:{selected:1,unselected:1},finalOpacity:{selected:.8,unselected:.8},initialSize:{selected:"10px",unselected:"10px"},peakSize:{selected:"16px",unselected:"16px"},finalSize:{selected:"10px",unselected:"10px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function Id(r){const t=lo[r];if(!t)return .2;let e=0;for(let n=0;n<t.numCycles;n++){const s=t.numCycles>1?n/(t.numCycles-1):1,o=t.periodStart+s*(t.periodEnd-t.periodStart);e+=o}const i=Math.max(.15,t.periodEnd*1.5);return e+=i,e}const wd={PERIOD:5,BASE_LIGHT_OPACITY_SELECTED:1,LIGHT_OPACITY_DIP_FACTOR:.3,TICK_UPDATE_DURATION:.1,ELIGIBILITY_CLASS:"is-energized"},Ld={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},vd={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},bd=["Scanning","Commanding","Evaluative","Curious","Advisory","Analytical","Focused","Reserved","Introspective"],Od=40,Pd=.4,xd=1.4,Md={MAX_STAGE:3,LENS_ANIMATION_EASING_DEFAULT:"power2.inOut",STAGE_1:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistYellow",BUTTON_FLASH_GLOW_COLOR:"oklch(0.85 0.15 85)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S1",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:82.364,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:82.364},STAGE_2:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistOrange",BUTTON_FLASH_GLOW_COLOR:"oklch(0.75 0.16 50)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S2",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:49.636,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:49.636},STAGE_3:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistRedThenSolid",BUTTON_FLASH_GLOW_COLOR:"oklch(0.65 0.22 25)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S3",LENS_ANIM_DURATION_S:1,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:16.909,DIAL_B_POWER_TARGET_MODE:"absolute_100",DIAL_B_POWER_VALUE:1,HUE_ASSIGN_TARGET_HUE:16.909}},Rd=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:lo,APP_LOAD_FADE_IN_DURATION:Gh,AUTO_PLAY_START_DELAY:Hh,BODY_FADE_IN_DURATION:Vh,DEBOUNCE_DELAY:vh,DEFAULT_ASSIGNMENT_SELECTIONS:ye,DEFAULT_DIAL_A_HUE:pi,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:Mh,DIAL_CANVAS_FADE_IN_DURATION:Rh,DIAL_GRADIENT_SCALE_FACTOR:xh,GSAP_BUTTON_IDLE_DURATION_MAX:Bh,GSAP_BUTTON_IDLE_DURATION_MIN:kh,GSAP_BUTTON_IDLE_EASE:Uh,GSAP_TWEEN_DURATION:Fh,GSAP_TWEEN_EASE:Nh,HARMONIC_RESONANCE_PARAMS:wd,HIGHLIGHT_WIDTH_FACTOR:Ph,HUE_ASSIGNMENT_ROW_HUES:It,HUE_UPDATE_THRESHOLD:Lh,IDLE_LIGHT_DRIFT_PARAMS:Ld,LCD_TEXT_FADE_IN_DURATION:jh,LENS_GRADIENT_BREAKPOINTS:Kl,LENS_GRADIENT_POSITION_SCALE:Ci,LENS_HOTSPOT_HUE_OFFSET:cd,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:ad,LENS_OSCILLATION_AMPLITUDE_MIN:od,LENS_OSCILLATION_HUE_SMOOTHING_DURATION:sd,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:ud,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:ld,LENS_OSCILLATION_RESTART_DELAY:rd,LENS_OSCILLATION_SMOOTHING_DURATION:nd,LENS_OSCILLATION_THRESHOLD:id,LENS_STARTUP_RAMP_DURATION:ql,LENS_STARTUP_TARGET_POWER:$h,MIN_PHASE_DURATION_FOR_STEPPING:Xh,MOOD_MATRIX_DEFINITIONS:bd,MOOD_MATRIX_ROW_HEIGHT_EM_FALLBACK:xd,MOOD_MATRIX_SCROLL_DURATION:Pd,MOOD_MATRIX_SEGMENT_DEGREES:Od,NUM_LENS_GRADIENT_STOPS:_d,NUM_RIDGES:bh,P3_LENS_RAMP_DURATION_S:zh,PIXELS_PER_DEGREE_HUE:wh,PIXELS_PER_DEGREE_ROTATION:Ih,RESISTIVE_SHUTDOWN_PARAMS:Md,RIDGE_WIDTH_FACTOR:Oh,STARTUP_BUTTON_ENERGIZE_STAGGER:td,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:Zh,STARTUP_DIM_FACTORS_ANIMATION_DURATION:Kh,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:Jh,STARTUP_LCD_GROUP_APPEAR_STAGGER:Qh,STARTUP_L_REDUCTION_FACTORS:qh,STATE_TRANSITION_ECHO_PARAMS:vd,SYSTEM_READY_PHASE_DURATION:Wh,TERMINAL_CURSOR_BLINK_OFF_MS:Cd,TERMINAL_CURSOR_BLINK_ON_MS:Ad,TERMINAL_MAX_LINES_IN_DOM:md,TERMINAL_NEW_LINE_DELAY_MAX_MS:Td,TERMINAL_NEW_LINE_DELAY_MIN_MS:yd,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:Ed,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:Sd,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:Dd,THEME_TRANSITION_DURATION:Yh,estimateFlickerDuration:Id,selectorsForDimExitAnimation:ed},Symbol.toStringTag,{value:"Module"}));class Fd{constructor(){this.events={}}on(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),()=>{this.off(t,e)}}off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(i=>i!==e))}}const vr=new Fd;function le(r,t){vr.events[r]&&vr.events[r].forEach(e=>{try{e(t)}catch(i){console.error(`[AppState EMIT] Error in listener for '${r}':`,i,{payload:t})}})}let Et={A:{id:"A",hue:pi,rotation:0,targetHue:pi,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},br={env:{hue:It[ye.env],isColorless:It[ye.env]===It[0]},lcd:{hue:It[ye.lcd],isColorless:It[ye.lcd]===It[0]},logo:{hue:It[ye.logo],isColorless:It[ye.logo]===It[0]},btn:{hue:It[ye.btn],isColorless:It[ye.btn]===It[0]}},ts="dim",es=0,is="idle",ns="loading",ss=-1,rs=0,Or=!1;function Nd(r){const t=Et[r];if(t)return{...t}}function kd(r){const t=br[r];if(t)return{...t}}function Zl(){return ts}function Bd(){return es}function Ud(){return is}function Hd(){return ns}function Gd(){return ss}function Jl(){return rs}function Vd(){return Or}function uo(r,t){const e=!Et[r]||Object.keys(Et[r]).length===0;e&&(r==="A"||r==="B")&&(Et[r]={id:r,hue:r==="A"?pi:0,rotation:0,targetHue:r==="A"?pi:0,targetRotation:0,isDragging:!1});const i={...Et[r]};r==="B"&&(t.hasOwnProperty("hue")&&(t.hue=(t.hue%360+360)%360),t.hasOwnProperty("targetHue")&&(t.targetHue=(t.targetHue%360+360)%360)),Object.assign(Et[r],t),(e||i.hue!==Et[r].hue||i.rotation!==Et[r].rotation||i.isDragging!==Et[r].isDragging||i.targetHue!==Et[r].targetHue||i.targetRotation!==Et[r].targetRotation)&&(r==="A"&&Math.abs(i.hue-Et[r].hue)>.01&&console.log(`[AppState SET] Target: Dial '${r}'. Requested (Changes):`,JSON.parse(JSON.stringify(t)),"Old State:",JSON.parse(JSON.stringify(i)),"Actual (New State):",JSON.parse(JSON.stringify(Et[r]))),le("dialUpdated",{id:r,state:{...Et[r]}}))}function Ql(r,t){if(br.hasOwnProperty(r)){const e=(Number(t)%360+360)%360,i=It.length>0&&e===It[0],n=br[r];(n.hue!==e||n.isColorless!==i)&&({...n},n.hue=e,n.isColorless=i,le("targetColorChanged",{targetKey:r,hue:e,isColorless:i}))}}function tu(r){["dim","dark","light"].includes(r)&&ts!==r&&(ts=r,le("themeChanged",ts))}function $d(r){const t=Math.max(0,Math.min(r/100,1));Math.abs(es-t)>1e-4&&(es=t,le("trueLensPowerChanged",es))}function zd(r){["idle","dragging","settling"].includes(r)&&is!==r&&(is=r,le("dialBInteractionChange",is))}function eu(r){["loading","starting-up","interactive","error"].includes(r)&&ns!==r&&(ns=r,le("appStatusChanged",ns))}function Yd(r){typeof r=="number"&&ss!==r&&(ss=r,le("startupPhaseNumberChanged",ss))}function iu(r){if(typeof r=="number"&&rs!==r){const t=rs;rs=r,le("resistiveShutdownStageChanged",{oldStage:t,newStage:r})}}function Wd(r){typeof r=="boolean"&&Or!==r&&(Or=r,le("mainPowerOffButtonDisabledChanged",{isDisabled:r}))}function nu(r,t){return typeof t!="function"?()=>{}:vr.on(r,t)}(!Et.A||Object.keys(Et.A).length===0)&&uo("A",{hue:pi,rotation:0,targetHue:pi,targetRotation:0,isDragging:!1});(!Et.B||Object.keys(Et.B).length===0)&&uo("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});const Xd=Object.freeze(Object.defineProperty({__proto__:null,emit:le,getAppStatus:Hd,getCurrentStartupPhaseNumber:Gd,getCurrentTheme:Zl,getDialBInteractionState:Ud,getDialState:Nd,getIsMainPowerOffButtonDisabled:Vd,getResistiveShutdownStage:Jl,getTargetColorProperties:kd,getTrueLensPower:Bd,setAppStatus:eu,setCurrentStartupPhaseNumber:Yd,setDialBInteractionState:zd,setIsMainPowerOffButtonDisabled:Wd,setResistiveShutdownStage:iu,setTargetColorProperties:Ql,setTheme:tu,setTrueLensPower:$d,subscribe:nu,updateDialState:uo},Symbol.toStringTag,{value:"Module"})),Wn=new Map,O={register(r,t){Wn.has(r)&&console.warn(`[ServiceLocator] Service "${r}" is being overwritten.`),Wn.set(r,t)},get(r){if(!Wn.has(r))throw new Error(`[ServiceLocator] Service "${r}" not found. Ensure it was registered in main.js before being accessed.`);return Wn.get(r)}};function jd(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function qd(){const r=jd();if(r.__xstate__)return r.__xstate__}const Kd=r=>{if(typeof window>"u")return;const t=qd();t&&t.register(r)};class la{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const su=".",Zd="",ru="",Jd="#",Qd="*",ou="xstate.init",Ds="xstate.stop";function tf(r,t){return{type:`xstate.after.${r}.${t}`}}function Pr(r,t){return{type:`xstate.done.state.${r}`,output:t}}function ef(r,t){return{type:`xstate.done.actor.${r}`,output:t,actorId:r}}function nf(r,t){return{type:`xstate.error.actor.${r}`,error:t,actorId:r}}function au(r){return{type:ou,input:r}}function De(r){setTimeout(()=>{throw r})}const sf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lu(r,t){const e=ua(r),i=ua(t);return typeof i=="string"?typeof e=="string"?i===e:!1:typeof e=="string"?e in i:Object.keys(e).every(n=>n in i?lu(e[n],i[n]):!1)}function co(r){if(cu(r))return r;const t=[];let e="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:e+=r[i+1],i++;continue;case 46:t.push(e),e="";continue}e+=r[i]}return t.push(e),t}function ua(r){if(Uf(r))return r.value;if(typeof r!="string")return r;const t=co(r);return rf(t)}function rf(r){if(r.length===1)return r[0];const t={};let e=t;for(let i=0;i<r.length-1;i++)if(i===r.length-2)e[r[i]]=r[i+1];else{const n=e;e={},n[r[i]]=e}return t}function ca(r,t){const e={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];e[s]=t(r[s],s,r,n)}return e}function uu(r){return cu(r)?r:[r]}function He(r){return r===void 0?[]:uu(r)}function xr(r,t,e,i){return typeof r=="function"?r({context:t,event:e,self:i}):r}function cu(r){return Array.isArray(r)}function of(r){return r.type.startsWith("xstate.error.actor")}function Ii(r){return uu(r).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function hu(r){if(!(r===void 0||r===Zd))return He(r)}function Mr(r,t,e){var s,o,a;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(o=i?r.error:t)==null?void 0:o.bind(n),complete:(a=i?r.complete:e)==null?void 0:a.bind(n)}}function ha(r,t){return`${t}.${r}`}function ho(r,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return r.implementations.actors[t];const[,i,n]=e,o=r.getStateNodeById(n).config.invoke;return(Array.isArray(o)?o[i]:o).src}function da(r,t){return`${r.sessionId}.${t}`}let af=0;function lf(r,t){const e=new Map,i=new Map,n=new WeakMap,s=new Set,o={},{clock:a,logger:l}=t,c={schedule:(p,u,g,f,_=Math.random().toString(36).slice(2))=>{const D={source:p,target:u,event:g,delay:f,id:_,startedAt:Date.now()},T=da(p,_);d._snapshot._scheduledEvents[T]=D;const A=a.setTimeout(()=>{delete o[T],delete d._snapshot._scheduledEvents[T],d._relay(p,u,g)},f);o[T]=A},cancel:(p,u)=>{const g=da(p,u),f=o[g];delete o[g],delete d._snapshot._scheduledEvents[g],f!==void 0&&a.clearTimeout(f)},cancelAll:p=>{for(const u in d._snapshot._scheduledEvents){const g=d._snapshot._scheduledEvents[u];g.source===p&&c.cancel(p,g.id)}}},h=p=>{if(!s.size)return;const u={...p,rootId:r.sessionId};s.forEach(g=>{var f;return(f=g.next)==null?void 0:f.call(g,u)})},d={_snapshot:{_scheduledEvents:((t==null?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${af++}`,_register:(p,u)=>(e.set(p,u),p),_unregister:p=>{e.delete(p.sessionId);const u=n.get(p);u!==void 0&&(i.delete(u),n.delete(p))},get:p=>i.get(p),_set:(p,u)=>{const g=i.get(p);if(g&&g!==u)throw new Error(`Actor with system ID '${p}' already exists.`);i.set(p,u),n.set(u,p)},inspect:p=>{const u=Mr(p);return s.add(u),{unsubscribe(){s.delete(u)}}},_sendInspectionEvent:h,_relay:(p,u,g)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:p,actorRef:u,event:g}),u._send(g)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const p=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const u in p){const{source:g,target:f,event:_,delay:D,id:T}=p[u];c.schedule(g,f,_,D,T)}},_clock:a,_logger:l};return d}let qs=!1;const fo=1;let Ot=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const uf={clock:{setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class cf{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new la(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ot.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...uf,...e},{clock:n,logger:s,parent:o,syncSnapshot:a,id:l,systemId:c,inspect:h}=i;this.system=o?o.system:lf(this,{clock:n,logger:s}),h&&!o&&this.system.inspect(Mr(h)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=(e==null?void 0:e.logger)??this.system._logger,this.clock=(e==null?void 0:e.clock)??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=i,this.src=i.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const p=this.eventListeners.get(d.type),u=this.eventListeners.get("*");if(!p&&!u)return;const g=[...p?p.values():[],...u?u.values():[]];for(const f of g)f(d)},actionExecutor:d=>{const p=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:d.type,params:d.params}}),!d.exec)return;const u=qs;try{qs=!0,d.exec(d.info,d.params)}finally{qs=u}};this._processingStatus===Ot.Running?p():this._deferred.push(p)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((e==null?void 0:e.snapshot)??(e==null?void 0:e.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){var e;try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,(e=this.options)==null?void 0:e.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(t,e){var n,s;this._snapshot=t;let i;for(;i=this._deferred.shift();)try{i()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(n=o.next)==null||n.call(o,t)}catch(a){De(a)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,t)}catch(a){De(a)}this._stopProcedure(),this._complete(),this._doneEvent=ef(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,i){var s;const n=Mr(t,e,i);if(this._processingStatus!==Ot.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(o){De(o)}break;case"error":{const o=this._snapshot.error;if(!n.error)De(o);else try{n.error(o)}catch(a){De(a)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(t,e){let i=this.eventListeners.get(t);i||(i=new Set,this.eventListeners.set(t,i));const n=e.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Ot.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ot.Running;const t=au(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,i;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(e,t),t.type===Ds&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ot.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ot.NotStarted?(this._processingStatus=Ot.Stopped,this):(this.mailbox.enqueue({type:Ds}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var t;for(const e of this.observers)try{(t=e.complete)==null||t.call(e)}catch(i){De(i)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||De(t);return}let e=!1;for(const i of this.observers){const n=i.error;e||(e=!n);try{n==null||n(t)}catch(s){De(s)}}this.observers.clear(),e&&De(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,nf(this.id,t))}_stopProcedure(){return this._processingStatus!==Ot.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new la(this._process.bind(this)),this._processingStatus=Ot.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Ot.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:Kd)(this)}toJSON(){return{xstate$$type:fo,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[sf](){return this}getSnapshot(){return this._snapshot}}function xn(r,...[t]){return new cf(r,t)}const hf=xn;function df(r,t,e,i,{sendId:n}){const s=typeof n=="function"?n(e,i):n;return[t,{sendId:s},void 0]}function ff(r,t){r.defer(()=>{r.system.scheduler.cancel(r.self,t.sendId)})}function pf(r){function t(e,i){}return t.type="xstate.cancel",t.sendId=r,t.resolve=df,t.execute=ff,t}function gf(r,t,e,i,{id:n,systemId:s,src:o,input:a,syncSnapshot:l}){const c=typeof o=="string"?ho(t.machine,o):o,h=typeof n=="function"?n(e):n;let d,p;return c&&(p=typeof a=="function"?a({context:t.context,event:e.event,self:r.self}):a,d=xn(c,{id:h,src:o,parent:r.self,syncSnapshot:l,systemId:s,input:p})),[gi(t,{children:{...t.children,[h]:d}}),{id:n,systemId:s,actorRef:d,src:o,input:p},void 0]}function _f(r,{actorRef:t}){t&&r.defer(()=>{t._processingStatus!==Ot.Stopped&&t.start()})}function mf(...[r,{id:t,systemId:e,input:i,syncSnapshot:n=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=t,s.systemId=e,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=gf,s.execute=_f,s}function Df(r,t,e,i,{actorRef:n}){const s=typeof n=="function"?n(e,i):n,o=typeof s=="string"?t.children[s]:s;let a=t.children;return o&&(a={...a},delete a[o.id]),[gi(t,{children:a}),o,void 0]}function Ef(r,t){if(t){if(r.system._unregister(t),t._processingStatus!==Ot.Running){r.stopChild(t);return}r.defer(()=>{r.stopChild(t)})}}function du(r){function t(e,i){}return t.type="xstate.stopChild",t.actorRef=r,t.resolve=Df,t.execute=Ef,t}function po(r,t,e,i){const{machine:n}=i,s=typeof r=="function",o=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return po(o,t,e,i);const a={context:t,event:e},l=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:t,event:e}):r.params:void 0;return"check"in o?o.check(i,a,o):o(a,l)}const go=r=>r.type==="atomic"||r.type==="final";function Yi(r){return Object.values(r.states).filter(t=>t.type!=="history")}function Bn(r,t){const e=[];if(t===r)return e;let i=r.parent;for(;i&&i!==t;)e.push(i),i=i.parent;return e}function Es(r){const t=new Set(r),e=pu(t);for(const i of t)if(i.type==="compound"&&(!e.get(i)||!e.get(i).length))fa(i).forEach(n=>t.add(n));else if(i.type==="parallel"){for(const n of Yi(i))if(n.type!=="history"&&!t.has(n)){const s=fa(n);for(const o of s)t.add(o)}}for(const i of t){let n=i.parent;for(;n;)t.add(n),n=n.parent}return t}function fu(r,t){const e=t.get(r);if(!e)return{};if(r.type==="compound"){const n=e[0];if(n){if(go(n))return n.key}else return{}}const i={};for(const n of e)i[n.key]=fu(n,t);return i}function pu(r){const t=new Map;for(const e of r)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function gu(r,t){const e=Es(t);return fu(r,pu(e))}function _o(r,t){return t.type==="compound"?Yi(t).some(e=>e.type==="final"&&r.has(e)):t.type==="parallel"?Yi(t).every(e=>_o(r,e)):t.type==="final"}const Is=r=>r[0]===Jd;function Sf(r,t){return r.transitions.get(t)||[...r.transitions.keys()].filter(i=>{if(i===Qd)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=t.split(".");for(let o=0;o<n.length;o++){const a=n[o],l=s[o];if(a==="*")return o===n.length-1;if(a!==l)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function yf(r){const t=r.config.after;if(!t)return[];const e=n=>{const s=tf(n,r.id),o=s.type;return r.entry.push(Au(s,{id:o,delay:n})),r.exit.push(pf(o)),o};return Object.keys(t).flatMap(n=>{const s=t[n],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+n)?n:+n,l=e(a);return He(o).map(c=>({...c,event:l,delay:a}))}).map(n=>{const{delay:s}=n;return{...ni(r,n.event,n),delay:s}})}function ni(r,t,e){const i=hu(e.target),n=e.reenter??!1,s=Cf(r,i),o={...e,actions:He(e.actions),guard:e.guard,target:s,source:r,reenter:n,eventType:t,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function Tf(r){const t=new Map;if(r.config.on)for(const e of Object.keys(r.config.on)){if(e===ru)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[e];t.set(e,Ii(i).map(n=>ni(r,e,n)))}if(r.config.onDone){const e=`xstate.done.state.${r.id}`;t.set(e,Ii(r.config.onDone).map(i=>ni(r,e,i)))}for(const e of r.invoke){if(e.onDone){const i=`xstate.done.actor.${e.id}`;t.set(i,Ii(e.onDone).map(n=>ni(r,i,n)))}if(e.onError){const i=`xstate.error.actor.${e.id}`;t.set(i,Ii(e.onError).map(n=>ni(r,i,n)))}if(e.onSnapshot){const i=`xstate.snapshot.${e.id}`;t.set(i,Ii(e.onSnapshot).map(n=>ni(r,i,n)))}}for(const e of r.after){let i=t.get(e.eventType);i||(i=[],t.set(e.eventType,i)),i.push(e)}return t}function Af(r,t){const e=typeof t=="string"?r.states[t]:t?r.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${r.id}`);const i={source:r,actions:!t||typeof t=="string"?[]:He(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...i,source:`#${r.id}`,target:e?[`#${e.id}`]:[]})};return i}function Cf(r,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Is(e))return r.machine.getStateNodeById(e);const i=e[0]===su;if(i&&!r.parent)return Mn(r,e.slice(1));const n=i?r.key+e:e;if(r.parent)try{return Mn(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function _u(r){const t=hu(r.config.target);return t?{target:t.map(e=>typeof e=="string"?Mn(r.parent,e):e)}:r.parent.initial}function ri(r){return r.type==="history"}function fa(r){const t=mu(r);for(const e of t)for(const i of Bn(e,r))t.add(i);return t}function mu(r){const t=new Set;function e(i){if(!t.has(i)){if(t.add(i),i.type==="compound")e(i.initial.target[0]);else if(i.type==="parallel")for(const n of Yi(i))e(n)}}return e(r),t}function Wi(r,t){if(Is(t))return r.machine.getStateNodeById(t);if(!r.states)throw new Error(`Unable to retrieve child state '${t}' from '${r.id}'; no child states exist.`);const e=r.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${r.id}'`);return e}function Mn(r,t){if(typeof t=="string"&&Is(t))try{return r.machine.getStateNodeById(t)}catch{}const e=co(t).slice();let i=r;for(;e.length;){const n=e.shift();if(!n.length)break;i=Wi(i,n)}return i}function Ss(r,t){if(typeof t=="string"){const n=r.states[t];if(!n)throw new Error(`State '${t}' does not exist on '${r.id}'`);return[r,n]}const e=Object.keys(t),i=e.map(n=>Wi(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,e.reduce((n,s)=>{const o=Wi(r,s);if(!o)return n;const a=Ss(o,t[s]);return n.concat(a)},[]))}function If(r,t,e,i){const s=Wi(r,t).next(e,i);return!s||!s.length?r.next(e,i):s}function wf(r,t,e,i){const n=Object.keys(t),s=Wi(r,n[0]),o=mo(s,t[n[0]],e,i);return!o||!o.length?r.next(e,i):o}function Lf(r,t,e,i){const n=[];for(const s of Object.keys(t)){const o=t[s];if(!o)continue;const a=Wi(r,s),l=mo(a,o,e,i);l&&n.push(...l)}return n.length?n:r.next(e,i)}function mo(r,t,e,i){return typeof t=="string"?If(r,t,e,i):Object.keys(t).length===1?wf(r,t,e,i):Lf(r,t,e,i)}function vf(r){return Object.keys(r.states).map(t=>r.states[t]).filter(t=>t.type==="history")}function We(r,t){let e=r;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function bf(r,t){const e=new Set(r),i=new Set(t);for(const n of e)if(i.has(n))return!0;for(const n of i)if(e.has(n))return!0;return!1}function Du(r,t,e){const i=new Set;for(const n of r){let s=!1;const o=new Set;for(const a of i)if(bf(Rr([n],t,e),Rr([a],t,e)))if(We(n.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)i.delete(a);i.add(n)}}return Array.from(i)}function Of(r){const[t,...e]=r;for(const i of Bn(t,void 0))if(e.every(n=>We(n,i)))return i}function Do(r,t){if(!r.target)return[];const e=new Set;for(const i of r.target)if(ri(i))if(t[i.id])for(const n of t[i.id])e.add(n);else for(const n of Do(_u(i),t))e.add(n);else e.add(i);return[...e]}function Eu(r,t){const e=Do(r,t);if(!e)return;if(!r.reenter&&e.every(n=>n===r.source||We(n,r.source)))return r.source;const i=Of(e.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function Rr(r,t,e){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const o=Eu(s,e);s.reenter&&s.source===o&&i.add(o);for(const a of t)We(a,o)&&i.add(a)}return[...i]}function Pf(r,t){if(r.length!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0}function Fr(r,t,e,i,n,s){if(!r.length)return t;const o=new Set(t._nodes);let a=t.historyValue;const l=Du(r,o,a);let c=t;n||([c,a]=Ff(c,i,e,l,o,a,s,e.actionExecutor)),c=Xi(c,i,e,l.flatMap(d=>d.actions),s,void 0),c=Mf(c,i,e,l,o,s,a,n);const h=[...o];c.status==="done"&&(c=Xi(c,i,e,h.sort((d,p)=>p.order-d.order).flatMap(d=>d.exit),s,void 0));try{return a===t.historyValue&&Pf(t._nodes,o)?c:gi(c,{_nodes:h,historyValue:a})}catch(d){throw d}}function xf(r,t,e,i,n){if(i.output===void 0)return;const s=Pr(n.id,n.output!==void 0&&n.parent?xr(n.output,r.context,t,e.self):void 0);return xr(i.output,r.context,s,e.self)}function Mf(r,t,e,i,n,s,o,a){let l=r;const c=new Set,h=new Set;Rf(i,o,h,c),a&&h.add(r.machine.root);const d=new Set;for(const p of[...c].sort((u,g)=>u.order-g.order)){n.add(p);const u=[];u.push(...p.entry);for(const g of p.invoke)u.push(mf(g.src,{...g,syncSnapshot:!!g.onSnapshot}));if(h.has(p)){const g=p.initial.actions;u.push(...g)}if(l=Xi(l,t,e,u,s,p.invoke.map(g=>g.id)),p.type==="final"){const g=p.parent;let f=(g==null?void 0:g.type)==="parallel"?g:g==null?void 0:g.parent,_=f||p;for((g==null?void 0:g.type)==="compound"&&s.push(Pr(g.id,p.output!==void 0?xr(p.output,l.context,t,e.self):void 0));(f==null?void 0:f.type)==="parallel"&&!d.has(f)&&_o(n,f);)d.add(f),s.push(Pr(f.id)),_=f,f=f.parent;if(f)continue;l=gi(l,{status:"done",output:xf(l,t,e,l.machine.root,_)})}}return l}function Rf(r,t,e,i){for(const n of r){const s=Eu(n,t);for(const a of n.target||[])!ri(a)&&(n.source!==a||n.source!==s||n.reenter)&&(i.add(a),e.add(a)),bi(a,t,e,i);const o=Do(n,t);for(const a of o){const l=Bn(a,s);(s==null?void 0:s.type)==="parallel"&&l.push(s),Su(i,t,e,l,!n.source.parent&&n.reenter?void 0:s)}}}function bi(r,t,e,i){var n;if(ri(r))if(t[r.id]){const s=t[r.id];for(const o of s)i.add(o),bi(o,t,e,i);for(const o of s)Ks(o,r.parent,i,t,e)}else{const s=_u(r);for(const o of s.target)i.add(o),s===((n=r.parent)==null?void 0:n.initial)&&e.add(r.parent),bi(o,t,e,i);for(const o of s.target)Ks(o,r.parent,i,t,e)}else if(r.type==="compound"){const[s]=r.initial.target;ri(s)||(i.add(s),e.add(s)),bi(s,t,e,i),Ks(s,r,i,t,e)}else if(r.type==="parallel")for(const s of Yi(r).filter(o=>!ri(o)))[...i].some(o=>We(o,s))||(ri(s)||(i.add(s),e.add(s)),bi(s,t,e,i))}function Su(r,t,e,i,n){for(const s of i)if((!n||We(s,n))&&r.add(s),s.type==="parallel")for(const o of Yi(s).filter(a=>!ri(a)))[...r].some(a=>We(a,o))||(r.add(o),bi(o,t,e,r))}function Ks(r,t,e,i,n){Su(e,i,n,Bn(r,t))}function Ff(r,t,e,i,n,s,o,a){let l=r;const c=Rr(i,n,s);c.sort((d,p)=>p.order-d.order);let h;for(const d of c)for(const p of vf(d)){let u;p.history==="deep"?u=g=>go(g)&&We(g,d):u=g=>g.parent===d,h??(h={...s}),h[p.id]=Array.from(n).filter(u)}for(const d of c)l=Xi(l,t,e,[...d.exit,...d.invoke.map(p=>du(p.id))],o,void 0),n.delete(d);return[l,h||s]}function Nf(r,t){return r.implementations.actions[t]}function yu(r,t,e,i,n,s){const{machine:o}=r;let a=r;for(const l of i){const c=typeof l=="function",h=c?l:Nf(o,typeof l=="string"?l:l.type),d={context:a.context,event:t,self:e.self,system:e.system},p=c||typeof l=="string"?void 0:"params"in l?typeof l.params=="function"?l.params({context:a.context,event:t}):l.params:void 0;if(!h||!("resolve"in h)){e.actionExecutor({type:typeof l=="string"?l:typeof l=="object"?l.type:l.name||"(anonymous)",info:d,params:p,exec:h});continue}const u=h,[g,f,_]=u.resolve(e,a,d,p,h,n);a=g,"retryResolve"in u&&(s==null||s.push([u,f])),"execute"in u&&e.actionExecutor({type:u.type,info:d,params:f,exec:u.execute.bind(null,e,f)}),_&&(a=yu(a,t,e,_,n,s))}return a}function Xi(r,t,e,i,n,s){const o=s?[]:void 0,a=yu(r,t,e,i,{internalQueue:n,deferredActorIds:s},o);return o==null||o.forEach(([l,c])=>{l.retryResolve(e,a,c)}),a}function Zs(r,t,e,i){let n=r;const s=[];function o(c,h,d){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:h,snapshot:c,_transitions:d}),s.push(c)}if(t.type===Ds)return n=gi(pa(n,t,e),{status:"stopped"}),o(n,t,[]),{snapshot:n,microstates:s};let a=t;if(a.type!==ou){const c=a,h=of(c),d=ga(c,n);if(h&&!d.length)return n=gi(r,{status:"error",error:c.error}),o(n,c,[]),{snapshot:n,microstates:s};n=Fr(d,r,e,a,!1,i),o(n,c,d)}let l=!0;for(;n.status==="active";){let c=l?kf(n,a):[];const h=c.length?n:void 0;if(!c.length){if(!i.length)break;a=i.shift(),c=ga(a,n)}n=Fr(c,n,e,a,!1,i),l=n!==h,o(n,a,c)}return n.status!=="active"&&pa(n,a,e),{snapshot:n,microstates:s}}function pa(r,t,e){return Xi(r,t,e,Object.values(r.children).map(i=>du(i)),[],void 0)}function ga(r,t){return t.machine.getTransitionData(t,r)}function kf(r,t){const e=new Set,i=r._nodes.filter(go);for(const n of i)t:for(const s of[n].concat(Bn(n,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||po(o.guard,r.context,t,r)){e.add(o);break t}}return Du(Array.from(e),new Set(r._nodes),r.historyValue)}function Bf(r,t){const e=Es(Ss(r,t));return gu(r,[...e])}function Uf(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Hf=function(t){return lu(t,this.value)},Gf=function(t){return this.tags.has(t)},Vf=function(t){const e=this.machine.getTransitionData(this,t);return!!(e!=null&&e.length)&&e.some(i=>i.target!==void 0||i.actions.length)},$f=function(){const{_nodes:t,tags:e,machine:i,getMeta:n,toJSON:s,can:o,hasTag:a,matches:l,...c}=this;return{...c,tags:Array.from(e)}},zf=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function os(r,t){return{status:r.status,output:r.output,error:r.error,machine:t,context:r.context,_nodes:r._nodes,value:gu(t.root,r._nodes),tags:new Set(r._nodes.flatMap(e=>e.tags)),children:r.children,historyValue:r.historyValue||{},matches:Hf,hasTag:Gf,can:Vf,getMeta:zf,toJSON:$f}}function gi(r,t={}){return os({...r,...t},r.machine)}function Yf(r){if(typeof r!="object"||r===null)return{};const t={};for(const e in r){const i=r[e];Array.isArray(i)&&(t[e]=i.map(n=>({id:n.id})))}return t}function Wf(r,t){const{_nodes:e,tags:i,machine:n,children:s,context:o,can:a,hasTag:l,matches:c,getMeta:h,toJSON:d,...p}=r,u={};for(const f in s){const _=s[f];u[f]={snapshot:_.getPersistedSnapshot(t),src:_.src,systemId:_._systemId,syncSnapshot:_._syncSnapshot}}return{...p,context:Tu(o),children:u,historyValue:Yf(p.historyValue)}}function Tu(r){let t;for(const e in r){const i=r[e];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)t??(t=Array.isArray(r)?r.slice():{...r}),t[e]={xstate$$type:fo,id:i.id};else{const n=Tu(i);n!==i&&(t??(t=Array.isArray(r)?r.slice():{...r}),t[e]=n)}}return t??r}function Xf(r,t,e,i,{event:n,id:s,delay:o},{internalQueue:a}){const l=t.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const c=typeof n=="function"?n(e,i):n;let h;if(typeof o=="string"){const d=l&&l[o];h=typeof d=="function"?d(e,i):d}else h=typeof o=="function"?o(e,i):o;return typeof h!="number"&&a.push(c),[t,{event:c,id:s,delay:h},void 0]}function jf(r,t){const{event:e,delay:i,id:n}=t;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,e,i,n)});return}}function Au(r,t){function e(i,n){}return e.type="xstate.raise",e.event=r,e.id=t==null?void 0:t.id,e.delay=t==null?void 0:t.delay,e.resolve=Xf,e.execute=jf,e}const _a="xstate.promise.resolve",ma="xstate.promise.reject",Xn=new WeakMap;function qf(r){return{config:r,transition:(e,i,n)=>{var s;if(e.status!=="active")return e;switch(i.type){case _a:{const o=i.data;return{...e,status:"done",output:o,input:void 0}}case ma:return{...e,status:"error",error:i.data,input:void 0};case Ds:return(s=Xn.get(n.self))==null||s.abort(),{...e,status:"stopped",input:void 0};default:return e}},start:(e,{self:i,system:n,emit:s})=>{if(e.status!=="active")return;const o=new AbortController;Xn.set(i,o),Promise.resolve(r({input:e.input,system:n,self:i,signal:o.signal,emit:s})).then(l=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:_a,data:l}))},l=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:ma,data:l}))})},getInitialSnapshot:(e,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:e=>e,restoreSnapshot:e=>e}}function Kf(r,{machine:t,context:e},i,n){const s=(o,a)=>{if(typeof o=="string"){const l=ho(t,o);if(!l)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const c=xn(l,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:typeof(a==null?void 0:a.input)=="function"?a.input({context:e,event:i,self:r.self}):a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId});return n[c.id]=c,c}else return xn(o,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId})};return(o,a)=>{const l=s(o,a);return n[l.id]=l,r.defer(()=>{l._processingStatus!==Ot.Stopped&&l.start()}),l}}function Zf(r,t,e,i,{assignment:n}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:t.context,event:e.event,spawn:Kf(r,t,e.event,s),self:r.self,system:r.system};let a={};if(typeof n=="function")a=n(o,i);else for(const c of Object.keys(n)){const h=n[c];a[c]=typeof h=="function"?h(o,i):h}const l=Object.assign({},t.context,a);return[gi(t,{context:l,children:Object.keys(s).length?{...t.children,...s}:t.children}),void 0,void 0]}function ei(r){function t(e,i){}return t.type="xstate.assign",t.assignment=r,t.resolve=Zf,t}const Da=new WeakMap;function Ti(r,t,e){let i=Da.get(r);return i?t in i||(i[t]=e()):(i={[t]:e()},Da.set(r,i)),i[t]}const Jf={},nn=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class yn{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(su),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ca(this.config.states,(i,n)=>new yn(i,{_parent:this,_key:n,_machine:this.machine})):Jf,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=He(this.config.entry).slice(),this.exit=He(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=He(t.tags).slice()}_initialize(){this.transitions=Tf(this),this.config.always&&(this.always=Ii(this.config.always).map(t=>ni(this,ru,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(nn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(nn),eventType:null})}:void 0,history:this.history,states:ca(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(nn)})),entry:this.entry.map(nn),exit:this.exit.map(nn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Ti(this,"invoke",()=>He(this.config.invoke).map((t,e)=>{const{src:i,systemId:n}=t,s=t.id??ha(this.id,e),o=typeof i=="string"?i:`xstate.invoke.${ha(this.id,e)}`;return{...t,src:o,id:s,systemId:n,toJSON(){const{onDone:a,onError:l,...c}=t;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return Ti(this,"on",()=>[...this.transitions].flatMap(([e,i])=>i.map(n=>[e,n])).reduce((e,[i,n])=>(e[i]=e[i]||[],e[i].push(n),e),{}))}get after(){return Ti(this,"delayedTransitions",()=>yf(this))}get initial(){return Ti(this,"initial",()=>Af(this,this.config.initial))}next(t,e){const i=e.type,n=[];let s;const o=Ti(this,`candidates-${i}`,()=>Sf(this,i));for(const a of o){const{guard:l}=a,c=t.context;let h=!1;try{h=!l||po(l,c,e,t)}catch(d){const p=typeof l=="string"?l:typeof l=="object"?l.type:void 0;throw new Error(`Unable to evaluate guard ${p?`'${p}' `:""}in transition for event '${i}' in state node '${this.id}':
${d.message}`)}if(h){n.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return Ti(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const i of Object.keys(t)){const n=t[i];if(n.states)for(const s of n.events)e.add(`${s}`)}return Array.from(e)})}get ownEvents(){const t=new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(t)}}const Qf="#";class Eo{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:(e==null?void 0:e.actors)??{},actions:(e==null?void 0:e.actions)??{},delays:(e==null?void 0:e.delays)??{},guards:(e==null?void 0:e.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new yn(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:i,actors:n,delays:s}=this.implementations;return new Eo(this.config,{actions:{...e,...t.actions},guards:{...i,...t.guards},actors:{...n,...t.actors},delays:{...s,...t.delays}})}resolveState(t){const e=Bf(this.root,t.value),i=Es(Ss(this.root,e));return os({_nodes:[...i],context:t.context||{},children:{},status:_o(i,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,i){return Zs(t,e,i,[]).snapshot}microstep(t,e,i){return Zs(t,e,i,[]).microstates}getTransitionData(t,e){return mo(this.root,t.value,t,e)||[]}getPreInitialState(t,e,i){const{context:n}=this.config,s=os({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?Xi(s,e,t,[ei(({spawn:a,event:l,self:c})=>n({spawn:a,input:l.input,self:c}))],i,void 0):s}getInitialSnapshot(t,e){const i=au(e),n=[],s=this.getPreInitialState(t,i,n),o=Fr([{target:[...mu(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,t,i,!0,n),{snapshot:a}=Zs(o,i,t,n);return a}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=co(t),i=e.slice(1),n=Is(e[0])?e[0].slice(Qf.length):e[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return Mn(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return Wf(t,e)}restoreSnapshot(t,e){const i={},n=t.children;Object.keys(n).forEach(d=>{const p=n[d],u=p.snapshot,g=p.src,f=typeof g=="string"?ho(this,g):g;if(!f)return;const _=xn(f,{id:d,parent:e.self,syncSnapshot:p.syncSnapshot,snapshot:u,src:g,systemId:p.systemId});i[d]=_});function s(d,p){try{return p.machine.getStateNodeById(d)}catch{try{return Mn(p,d.split("."))}catch{return d}}}function o(d,p){if(!d||typeof d!="object")return{};const u={};for(const g in d){const f=d[g];u[g]=f.map(_=>{if(_ instanceof yn)return _;if(typeof _=="object"&&"id"in _&&typeof _.id=="string"){const D=s(_.id,p);if(D instanceof yn)return D}}).filter(_=>_!==void 0),u[g].length===0&&delete u[g]}return u}const a=o(t.historyValue,this.root),l=os({...t,children:i,_nodes:Array.from(Es(Ss(this.root,t.value))),historyValue:a},this),c=new Set;function h(d,p){if(!c.has(d)){c.add(d);for(const u in d){const g=d[u];if(g&&typeof g=="object"){if("xstate$$type"in g&&g.xstate$$type===fo){d[u]=p[g.id];continue}h(g,p)}}}}return h(l.context,i),l}}function tp(r,t){return new Eo(r,t)}const ep={phase:0,name:"IDLE_BASELINE",duration:.5,animations:[]},ip={phase:1,name:"EMERGENCY_SUBSYSTEMS",terminalMessageKey:"P1_EMERGENCY_SUBSYSTEMS",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.39,duration:1,ease:"power1.inOut"},position:0},{type:"tween",target:"body",vars:{opacity:1,duration:.3,ease:"power1.inOut"},position:0},{type:"flicker",target:"terminalLcdContentElement",state:"dimly-lit",profile:"textFlickerToDimlyLit",position:.1}]},np={phase:2,name:"BACKUP_POWER",terminalMessageKey:"P2_BACKUP_POWER",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["system-power"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.05,position:.1}]},sp={phase:3,name:"MAIN_POWER_ONLINE",terminalMessageKey:"P3_MAIN_POWER_ONLINE",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"Main Power On",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelectedFast",position:.1},{type:"flicker",target:"Main Power Off",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselectedFast",position:.1}]},rp={phase:4,name:"OPTICAL_CORE_REACTIVATE",terminalMessageKey:"P4_OPTICAL_CORE_REACTIVATE",duration:1.7,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"lensEnergize",position:.1}]},op={phase:5,name:"DIAGNOSTIC_INTERFACE",terminalMessageKey:"P5_DIAGNOSTIC_INTERFACE",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.275,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["skill-scan-group","fit-eval-group"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.04,position:.1}]},ap={phase:6,name:"MOOD_INTENSITY_CONTROLS",terminalMessageKey:"P6_MOOD_INTENSITY_CONTROLS",duration:1.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.225,duration:1,ease:"power1.inOut"},position:0},{type:"call",function:r=>r.setDialsActiveState(!0),deps:["dialManager"],position:.1},{type:"tween",target:["dialA","dialB"],vars:{opacity:1,duration:.5,ease:"power1.out",stagger:.05},position:.1},{type:"flicker",target:["lcdA","lcdB"],state:"dimly-lit",profile:"lcdScreenFlickerToDimlyLit",stagger:.05,position:.2},{type:"flicker",target:"terminalContainer",state:"dimly-lit",profile:"terminalScreenFlickerToDimlyLit",position:.2}]},lp={phase:7,name:"HUE_CORRECTION_SYSTEMS",terminalMessageKey:"P7_HUE_CORRECTION_SYSTEMS",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.075,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.008,position:.1}]},up={phase:8,name:"EXTERNAL_LIGHTING_CONTROLS",terminalMessageKey:"P8_EXTERNAL_LIGHTING_CONTROLS",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:0,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["light"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.03,position:.1}]},cp={phase:9,name:"AUX_LIGHTING_LOW",terminalMessageKey:"P9_AUX_LIGHTING_LOW",duration:1,animations:[{type:"flicker",target:"Auxiliary Light Low",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelected",position:.1},{type:"flicker",target:"Auxiliary Light High",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselected",position:.1}]},hp={phase:10,name:"THEME_TRANSITION",duration:1.5,animations:[{type:"call",function:(r,t,e)=>{document.querySelectorAll(t.selectorsForDimExitAnimation).forEach(i=>{i.classList.add("animate-on-dim-exit")}),r.body.classList.add("is-transitioning-from-dim"),e.setTheme("dark")},deps:["domElements","config","appState"],position:0},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn","skill-scan-group","fit-eval-group"],state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLit",stagger:.03,position:.05}]},dp={phase:11,name:"SYSTEM_OPERATIONAL",terminalMessageKey:"P11_SYSTEM_OPERATIONAL",duration:.5,animations:[{type:"call",function:(r,t)=>{r.setGroupSelected("system-power","on"),r.setGroupSelected("light","off"),Object.keys(t.DEFAULT_ASSIGNMENT_SELECTIONS).forEach(e=>{r.setGroupSelected(e,t.DEFAULT_ASSIGNMENT_SELECTIONS[e].toString())})},deps:["buttonManager","config"],position:0},{type:"call",function:r=>r.resizeAllCanvases(!0),deps:["dialManager"],position:.1}]},Nr=[ep,ip,np,sp,rp,op,ap,lp,up,cp,hp,dp],fp=qf(async({input:r})=>O.get("phaseRunner").run(r.phaseConfig)),pp=tp({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{currentPhase:-1,isStepThroughMode:!0,errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_PHASE",actions:ei({isStepThroughMode:({event:r})=>r.isStepThroughMode,currentPhase:0,themeTransitionCleanupPerformed:!1,errorInfo:null})}}},RUNNING_PHASE:{entry:[({context:r})=>{r.currentPhase===11&&!r.themeTransitionCleanupPerformed&&O.get("startupSequenceManager")._performThemeTransitionCleanup()},ei({themeTransitionCleanupPerformed:({context:r})=>r.currentPhase===11?!0:r.themeTransitionCleanupPerformed})],invoke:{id:"phaseRunnerService",src:fp,input:({context:r})=>({phaseConfig:Nr[r.currentPhase]}),onDone:{actions:ei({currentPhase:({context:r})=>r.currentPhase+1}),target:"CHECK_SEQUENCE_STATUS"},onError:{target:"ERROR",actions:ei({errorInfo:({event:r})=>r.data})}},on:{SET_AUTO_PLAY:{actions:ei({isStepThroughMode:!1})}}},CHECK_SEQUENCE_STATUS:{always:[{target:"COMPLETE",guard:({context:r})=>r.currentPhase>=Nr.length},{target:"RUNNING_PHASE",guard:({context:r})=>!r.isStepThroughMode},{target:"PAUSED"}]},PAUSED:{on:{NEXT_STEP_REQUESTED:{target:"RUNNING_PHASE"},SET_AUTO_PLAY:{actions:[ei({isStepThroughMode:!1}),Au({type:"NEXT_STEP_REQUESTED"})]}}},COMPLETE:{type:"final",entry:()=>O.get("appState").setAppStatus("interactive")},ERROR:{entry:[({context:r})=>console.error("[FSM Error]",r.errorInfo),()=>O.get("appState").setAppStatus("error"),({context:r})=>{var t;return O.get("appState").emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",data:{content:((t=r.errorInfo)==null?void 0:t.message)||"Unknown error"}})}]}}});class gp{constructor(t,e,i,n,s){if(this.element=t,this.config=e,this.gsap=i,this.appState=n,this.configModule=s,this.debugAmbient=!1,this.debugResistive=!0,this.cssIdleDriftClassName="css-idle-drifting",!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule||console.warn(`[Button CONSTRUCTOR ${this.getIdentifier()}] configModule not available at construction.`),this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=e.isSelectedByDefault||!1,this._isPermanentlyDisabled=!1,this._isResonating=!1,this.stateTransitionEchoTween=null,this._updateAriaAttributes()}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(t,e={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:o}=e,a=o||"UnknownPhase_ButtonSetState",l=this.getIdentifier(),c=t?t.split(" ").filter(u=>u):[],h=new Set(c);let d=s;if(!d){const u=new Set;Object.values(H).flatMap(f=>f.split(" ")).forEach(f=>{this.element.classList.contains(f)&&u.add(f)});const g=new Set(c);if(this._isSelected?g.add("is-selected"):g.delete("is-selected"),this._isPermanentlyDisabled?g.add(H.PERMANENTLY_DISABLED):g.delete(H.PERMANENTLY_DISABLED),u.size!==g.size)d=!0;else for(const f of g)if(!u.has(f)){d=!0;break}}if(this.debugResistive&&this.getIdentifier().includes("MAIN PWR OFF")&&t===H.PERMANENTLY_DISABLED&&console.log(`[Button ${l} setState - ${a}] Setting to PERMANENTLY_DISABLED. stateChanged: ${d}, forceState: ${s}`),!d&&!s){i||this._updateAriaAttributes();return}if(!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(H.FLICKERING);const u=Array.from(this.element.querySelectorAll(".light"));u.length>0&&this.gsap.set(u,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"})}const p=Object.values(H).flatMap(u=>u.split(" ")).filter(u=>u&&u!=="is-selected"&&u!==H.PERMANENTLY_DISABLED);[...new Set(p)].forEach(u=>{this.element.classList.contains(u)&&this.element.classList.remove(u)}),h.forEach(u=>{u!=="is-selected"&&u!==H.PERMANENTLY_DISABLED&&this.element.classList.add(u)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this._isPermanentlyDisabled?this.element.classList.add(H.PERMANENTLY_DISABLED):this.element.classList.remove(H.PERMANENTLY_DISABLED),this.currentClasses.clear(),this.element.classList.forEach(u=>this.currentClasses.add(u)),i||this._updateAriaAttributes()}_updateAriaAttributes(){const t=this._isSelected;if(this.config.type==="toggle"?this.element.setAttribute("aria-pressed",t.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",t.toString()),this._isPermanentlyDisabled)this.element.setAttribute("aria-disabled","true"),this.element.setAttribute("tabindex","-1");else{this.element.removeAttribute("aria-disabled");const e=Array.from(this.element.classList).some(i=>i===H.ENERGIZED_UNSELECTED.split(" ")[0]||i===H.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",e?"0":"-1")}}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}isPermanentlyDisabled(){return this._isPermanentlyDisabled}setSelected(t,e={}){const{skipAnimation:i=!1,phaseContext:n="ButtonSetSelected"}=e,s=this.getIdentifier();if(this._isPermanentlyDisabled&&t===!1&&this.getIdentifier().includes("MAIN PWR OFF"))this.debugResistive&&console.log(`[Button ${s} setSelected] Allowing deselect for permanently disabled OFF button during reset.`);else if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${s} setSelected] Blocked: Button is permanently disabled.`);return}let o=!1;if(this._isSelected===t){if(t&&!this.element.classList.contains("is-selected")&&(o=!0),!t&&this.element.classList.contains("is-selected")&&(o=!0),!o)return}else this._isSelected=t;let a=H.ENERGIZED_UNSELECTED;this.element.classList.contains(H.DIMLY_LIT.split(" ")[0])?a=H.DIMLY_LIT_UNSELECTED:this.element.classList.contains(H.UNLIT.split(" ")[0])?a=H.UNLIT:this.element.classList.contains(H.ENERGIZED_UNSELECTED.split(" ")[0])&&(a=H.ENERGIZED_UNSELECTED);let l=a;this._isSelected?a===H.DIMLY_LIT_UNSELECTED?l=H.DIMLY_LIT_SELECTED:(a===H.ENERGIZED_UNSELECTED||a===H.UNLIT)&&(l=H.ENERGIZED_SELECTED):a===H.DIMLY_LIT_SELECTED?l=H.DIMLY_LIT_UNSELECTED:a===H.ENERGIZED_SELECTED&&(l=H.ENERGIZED_UNSELECTED),this.setState(l,{skipAnimation:i,phaseContext:n,forceState:!0})}handleInteraction(){const t=this.getIdentifier();if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${t} handleInteraction] Blocked: Button is permanently disabled.`);return}this.config.type==="toggle"?this.setSelected(!this._isSelected,{phaseContext:`ToggleInteract_${t}`}):this.config.type==="radio"&&(this._isSelected||this.setSelected(!0,{phaseContext:`RadioInteract_${t}`}))}setPressedVisuals(t){if(!this._isPermanentlyDisabled)if(this._pressTimeoutId&&this.element.classList.contains(H.PRESSING)&&!t&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),t){this.element.classList.add(H.PRESSING);const e=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(e)*(e.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(H.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(H.PRESSING)}setPermanentlyDisabled(t){const e=this.getIdentifier();this._isPermanentlyDisabled!==t&&(this._isPermanentlyDisabled=t,this.debugResistive&&console.log(`[Button ${e} setPermanentlyDisabled] Set to: ${t}`),t?(this._isSelected&&(this._isSelected=!1),this.setState(H.PERMANENTLY_DISABLED,{phaseContext:`PermanentlyDisable_${e}`,forceState:!0})):this.setState(H.ENERGIZED_UNSELECTED,{phaseContext:`ResetFromDisabled_${e}`,forceState:!0}),this._updateAriaAttributes())}startHarmonicResonance(){this.configModule&&(this.element.classList.contains("is-resonating")||(this._isResonating=!0,this.element.classList.add("is-resonating")))}stopHarmonicResonance(){this.configModule&&this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"))}setCssIdleLightDriftActive(t){if(!this.configModule||!this.configModule.IDLE_LIGHT_DRIFT_PARAMS)return;const e=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,i=Array.from(this.element.querySelectorAll(".light"));if(t){if(this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.add(this.cssIdleDriftClassName),i.forEach((n,s)=>{const o=this.gsap.utils.random(e.PERIOD_MIN,e.PERIOD_MAX),a=this.gsap.utils.random(0,e.PERIOD_MAX/4)+s*e.STAGGER_PER_LIGHT,l=e.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,c=l*e.OPACITY_VARIATION_FACTOR,h=Math.max(0,Math.min(1,l-c)),d=Math.max(0,Math.min(1,l+c));n.style.setProperty("--light-idle-duration",`${o.toFixed(3)}s`),n.style.setProperty("--light-idle-delay",`${a.toFixed(3)}s`),n.style.setProperty("--light-idle-opacity-start",h.toFixed(3)),n.style.setProperty("--light-idle-opacity-end",d.toFixed(3))})}else{if(!this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.remove(this.cssIdleDriftClassName)}}playStateTransitionEcho(){if(!this.configModule)return;this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill();const t=Array.from(this.element.querySelectorAll(".light"));if(!t.length)return;const e=this.configModule.STATE_TRANSITION_ECHO_PARAMS,i=this.gsap.timeline({delay:e.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null}});this.stateTransitionEchoTween=i;const n=parseFloat(getComputedStyle(t[0]).opacity);for(let s=0;s<e.NUM_PULSES;s++){const o=e.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(e.LIGHT_DECAY_FACTOR,s),a=n*(1-o),l=e.BASE_PULSE_PERIOD*Math.pow(e.PERIOD_DECAY_FACTOR,s);i.to(t,{opacity:a,duration:l/2,yoyo:!0,repeat:1,ease:"sine.out"},s===0?">":`-=${l*.3}`)}}destroy(){this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.setCssIdleLightDriftActive(!1),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function Ee(r,t,e=0){if(!r)return e;const i=r[t];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:e}function So(r,t,e={}){var C,E,v,L,I;const i=e.gsapInstance||Mi;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:e.gsapInstance,globalGsap:Mi});const y=Mi.timeline();return y.to({},{duration:.001}),{timeline:y,completionPromise:Promise.resolve()}}const n=typeof t=="string"?t:"CustomProfile",s=r&&r.length>0&&r[0]?r[0].id||r[0].ariaLabel||r[0].className.split(" ")[0]||r[0].tagName:"unknownTarget",a={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...e};let l=typeof t=="string"?{...lo[t]}:{...t};const c=new Promise(y=>{a.gsapInternalOnComplete=()=>{y()}});if(!l||Object.keys(l).length===0){console.warn(`[CAF - ${n} for ${s}] Profile not found or empty. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}l.glow={...l.glow||{}},a.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(l.glow.isButtonSelected=a.overrideGlowParams.isButtonSelected);const h=Array.isArray(r)?r.filter(y=>y):r?[r]:[];if(h.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}const d=i.timeline({onStart:()=>{a.onStart&&a.onStart()},onComplete:()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()},onUpdate:a.onUpdate});let p=h;if(l.targetProperty==="button-lights-and-frame"){const y=[];h.forEach(F=>{const M=F.querySelectorAll(a.lightTargetSelector);M.length>0&&y.push(...Array.from(M))}),y.length>0&&(p=y,i.killTweensOf(p),i.set(p,{clearProps:"all",overwrite:!0}))}else(l.targetProperty==="text-shadow-opacity-and-blur"||l.targetProperty==="element-opacity-and-box-shadow")&&(p=h,i.killTweensOf(p));if(l.amplitudeStart!==void 0&&l.amplitudeStart<=.01&&(!l.glow||Ee(l.glow,"initialOpacity",0)<=.01)){if(p.length>0&&d.set(p,{autoAlpha:0,immediateRender:!0}),l.glow&&(l.glow.opacityVar||(C=l.glow.animatedProperties)!=null&&C.opacity)){const y={};l.glow.opacityVar&&(y[l.glow.opacityVar]=0),(E=l.glow.animatedProperties)!=null&&E.opacity&&(y[l.glow.animatedProperties.opacity]=0),l.glow.sizeVar&&(y[l.glow.sizeVar]="0px"),(v=l.glow.animatedProperties)!=null&&v.blur&&(y[l.glow.animatedProperties.blur]="0px"),Object.keys(y).length>0&&d.set(h,{css:y,immediateRender:!0})}}else{if(p.length>0){const y=l.amplitudeStart!==void 0?l.amplitudeStart:0;d.set(p,{autoAlpha:y,immediateRender:!0})}if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y={},F=Ee(l.glow,"initialOpacity",0),M=Ee(l.glow,"initialSize","0px");l.glow.opacityVar&&(y[l.glow.opacityVar]=F),l.glow.sizeVar&&(y[l.glow.sizeVar]=typeof M=="number"?`${M}px`:M),(L=l.glow.animatedProperties)!=null&&L.opacity&&(y[l.glow.animatedProperties.opacity]=F),(I=l.glow.animatedProperties)!=null&&I.blur&&(y[l.glow.animatedProperties.blur]=typeof M=="number"?`${M}px`:M),Object.keys(y).length>0&&d.set(h,{css:y,immediateRender:!0})}}let g=0,f=.01;for(let y=0;y<l.numCycles;y++){const F=l.numCycles>1?y/(l.numCycles-1):1,M=l.periodStart+F*(l.periodEnd-l.periodStart),U=Math.max(.01,M*l.onDurationRatio),x=Math.max(.01,M*(1-l.onDurationRatio)),K=l.amplitudeStart+F*(l.amplitudeEnd-l.amplitudeStart);f=U;const q=Ee(l.glow,"peakOpacity",1),B=Ee(l.glow,"peakSize","5px"),G={autoAlpha:K,duration:U,ease:"power1.inOut"},st={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const te=l.glow.scaleWithAmplitude?q*K:q;l.glow.opacityVar&&(st[l.glow.opacityVar]=te),l.glow.sizeVar&&(st[l.glow.sizeVar]=typeof B=="number"?`${B}px`:B),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(st[l.glow.animatedProperties.opacity]=te),l.glow.animatedProperties.blur&&(st[l.glow.animatedProperties.blur]=typeof B=="number"?`${B}px`:B))}if(p.length>0&&d.to(p,G,g),Object.keys(st).length>0&&d.to(h,{css:st,duration:U,ease:"power1.inOut"},g),g+=U,y<l.numCycles-1){const ue={autoAlpha:l.amplitudeStart>0?l.amplitudeStart*.3:0,duration:x,ease:"power1.inOut"},z={},X=Ee(l.glow,"initialOpacity",0),J=Ee(l.glow,"initialSize","0px");l.glow&&(l.glow.colorVar||l.glow.animatedProperties)&&(l.glow.opacityVar&&(z[l.glow.opacityVar]=X),l.glow.sizeVar&&(z[l.glow.sizeVar]=typeof J=="number"?`${J}px`:J),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(z[l.glow.animatedProperties.opacity]=X),l.glow.animatedProperties.blur&&(z[l.glow.animatedProperties.blur]=typeof J=="number"?`${J}px`:J))),p.length>0&&d.to(p,ue,g),Object.keys(z).length>0&&d.to(h,{css:z,duration:x,ease:"power1.inOut"},g),g+=x}}const _=Math.max(.15,l.periodEnd*1.5),D={autoAlpha:l.amplitudeEnd,duration:_,ease:"sine.out"},T={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y=Ee(l.glow,"finalOpacity",0),F=Ee(l.glow,"finalSize","0px");l.glow.opacityVar&&(T[l.glow.opacityVar]=y),l.glow.sizeVar&&(T[l.glow.sizeVar]=typeof F=="number"?`${F}px`:F),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(T[l.glow.animatedProperties.opacity]=y),l.glow.animatedProperties.blur&&(T[l.glow.animatedProperties.blur]=typeof F=="number"?`${F}px`:F))}const A=f*.3;return p.length>0&&d.to(p,D,`>-=${A}`),Object.keys(T).length>0&&d.to(h,{css:T,duration:_,ease:"sine.out"},"<"),d.duration()===0&&d.to({},{duration:.001}),{timeline:d,completionPromise:c}}function _p(r,t){let e;return function(...n){const s=this,o=()=>{e=null,r.apply(s,n)};clearTimeout(e),e=setTimeout(o,t)}}function mp(r,t,e){return Math.min(Math.max(r,t),e)}function Dp(r,t,e,i,n){return(r-t)*(n-i)/(e-t)+i}const H={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering",PERMANENTLY_DISABLED:"is-permanently-disabled"};class Ep{constructor(){this.gsap=null,this.appState=null,this.config=null,this.aam=null,this._buttons=new Map,this._buttonGroups=new Map,this._eventListeners={},this.mainPowerOffButtonInstance=null,this.debug=!1,this.debugResistive=!0}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.config=O.get("config"),this.aam=O.get("ambientAnimationManager"),this.appState.subscribe("resistiveShutdownStageChanged",this.handleResistiveShutdownStageChange.bind(this)),this.appState.subscribe("mainPowerOffButtonDisabledChanged",this.handleMainPowerOffButtonDisabledChange.bind(this)),this.debug&&console.log("[ButtonManager INIT]")}on(t,e){typeof e=="function"&&(this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e))}emit(t,e){this._eventListeners[t]&&this._eventListeners[t].forEach(i=>i(e))}discoverButtons(t){this.debug&&console.log(`[ButtonManager] Discovering ${t==null?void 0:t.length} buttons.`),t&&t.length>0&&t.forEach(e=>this.addButton(e)),this.setInitialDimStates()}addButton(t,e=null){if(!t||this._buttons.has(t))return;const i=this._generateButtonConfig(t,e),n=new gp(t,i,this.gsap,this.appState,this.config);this._buttons.set(t,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n)),s==="system-power"&&i.value==="off"&&(this.mainPowerOffButtonInstance=n)}_generateButtonConfig(t,e=null){var a;const i=t.classList.contains("button-unit--toggle")?"toggle":t.classList.contains("button-unit--action")?"action":t.classList.contains("button-unit--radio")?"radio":"default";let n=e||((a=t.closest("[data-group-id]"))==null?void 0:a.dataset.groupId)||null;const s=t.dataset.toggleValue||t.dataset.value||null,o=t.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:o}}getAllButtonInstances(){return Array.from(this._buttons.values())}getButtonsByGroupIds(t=[]){const e=[];return this._buttons.forEach(i=>{t.includes(i.getGroupId())&&e.push(i.element)}),e}getButtonInstance(t){return this._buttons.get(t)}getButtonByAriaLabel(t){for(const e of this._buttons.values())if(e.element.ariaLabel===t)return e;return null}setInitialDimStates(){this._buttons.forEach(t=>{t.isSelected()&&t.setSelected(!1,{skipAnimation:!0}),t.setState(H.UNLIT,{skipAnimation:!0,forceState:!0})})}handleInteraction(t){const e=this._buttons.get(t);if(!e)return;const i=e.getIdentifier(),n=e.getGroupId(),s=e.getValue();if(this.debugResistive&&console.log(`[BM handleInteraction] Clicked: ${i}, Group: ${n}, Value: ${s}, IsSelected: ${e.isSelected()}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&n!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${i}`);return}if(n==="system-power"&&s==="off"){e.setPressedVisuals(!0),this.appState.emit("buttonInteracted",{button:e}),this.debugResistive&&console.log('[BM handleInteraction] Intercepted "off" button press. Emitting event only.');return}if((e.config.type==="toggle"||e.config.type==="radio")&&e.isSelected()){e.setPressedVisuals(!0),this.debugResistive&&console.log(`[BM handleInteraction] Blocked deselection for already-selected button: ${i}`);return}this.emit("beforeButtonTransition",e),e.handleInteraction(),n&&(e.config.type==="toggle"||e.config.type==="radio")&&e.isSelected()&&this._buttonGroups.get(n).forEach(o=>{o!==e&&o.isSelected()&&(this.emit("beforeButtonTransition",o),o.setSelected(!1,{phaseContext:`GroupAutoDeselect_${o.getIdentifier()}`}),this.emit("afterButtonTransition",o))}),this.appState.emit("buttonInteracted",{button:e}),this.emit("afterButtonTransition",e)}setGroupSelected(t,e){const i=this._buttonGroups.get(t);i&&i.forEach(n=>{const s=n.config.value===e;n.isSelected()!==s&&(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n))})}playFlickerToState(t,e,i){const n=this._buttons.get(t);if(!n)return{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:s,phaseContext:o="UnknownPhase",isButtonSelectedOverride:a=null,onFlickerComplete:l,tempGlowColor:c,tempTintColorClass:h}=i;this.debug&&console.log(`[BM playFlickerToState] For: ${n.getIdentifier()}, Target State: '${e}', Profile: '${s}'`);let d=H.UNLIT;s.toLowerCase().includes("fromdimlylit")?d=H.DIMLY_LIT:s.toLowerCase().includes("resist")&&(d=n.isSelected()?H.ENERGIZED_SELECTED:H.ENERGIZED_UNSELECTED),s.toLowerCase().includes("resist")||n.setState(d,{skipAnimation:!0,forceState:!0});const p=e.includes("is-selected");n.isSelected()!==p&&!s.toLowerCase().includes("resist")&&n.setSelected(p,{skipAnimation:!0,forceState:!0}),c&&t.style.setProperty("--btn-glow-color",c),h&&t.classList.add(h);const u={...i,overrideGlowParams:{isButtonSelected:typeof a=="boolean"?a:p},onTimelineComplete:()=>{this.debug&&console.log(`[BM onFlickerComplete] For: ${n.getIdentifier()}. Applying final state: '${e}'`),c&&t.style.removeProperty("--btn-glow-color"),h&&t.classList.remove(h),n.setState(e,{skipAnimation:!0,forceState:!0}),e!==H.PERMANENTLY_DISABLED&&n.playStateTransitionEcho(),this.emit("afterButtonTransition",n),l&&l()}};return So(t,s,u)}setPressedVisuals(t,e){const i=this._buttons.get(t);i&&i.setPressedVisuals(e)}setGroupDisabled(t,e){const i=this._buttonGroups.get(t);i&&i.forEach(n=>n.setPermanentlyDisabled(e))}handleResistiveShutdownStageChange({newStage:t}){if(!this.mainPowerOffButtonInstance)return;if(t===0){this.mainPowerOffButtonInstance.isPermanentlyDisabled()&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(!1),this.setGroupSelected("system-power","on");return}const e=`STAGE_${t}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[e];if(!i||!i.BUTTON_FLASH_PROFILE_NAME)return;let n=t===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE?H.PERMANENTLY_DISABLED:H.ENERGIZED_UNSELECTED;this.playFlickerToState(this.mainPowerOffButtonInstance.element,n,{profileName:i.BUTTON_FLASH_PROFILE_NAME,tempGlowColor:i.BUTTON_FLASH_GLOW_COLOR})}handleMainPowerOffButtonDisabledChange({isDisabled:t}){this.mainPowerOffButtonInstance&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(t)}}class Sp{constructor(t,e,i,n,s){if(this.containerElement=t,this.dialId=e,this.appState=i,this.configModule=n,this.gsap=s,this.canvas=this.containerElement.querySelector(`#dial-canvas-${this.dialId}`),!this.canvas){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Canvas element not found!`);return}if(this.ctx=this.canvas.getContext("2d"),!this.ctx){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Failed to get 2D context!`);return}this.computedStyleVars={},this.isDragging=!1,this.currentPointerX=0,this.gsapValueTween=null,this.isActiveDim=!1,this.dialBSettleTimer=null,this.unsubscribers=[],this._updateAndCacheComputedStyles();let o=this.appState.getDialState(this.dialId);if(!o||Object.keys(o).length===0){const a=this.dialId==="B"?0:this.configModule.DEFAULT_DIAL_A_HUE,l=this.dialId==="B"?a*this.configModule.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:0;o={id:this.dialId,hue:a,rotation:l,targetHue:a,targetRotation:l,isDragging:!1},this.appState.updateDialState(this.dialId,o)}console.log(`[Dial ${this.dialId} CONSTRUCTOR] Before initial resizeCanvas/draw. Current phase from appState: ${this.appState.getCurrentStartupPhaseNumber()}, isActiveDim: ${this.isActiveDim}`),this.resizeCanvas(!0),this._addDragListeners(),this._subscribeToAppStateEvents()}_subscribeToAppStateEvents(){this.unsubscribers.push(this.appState.subscribe("dialUpdated",this._onAppStateDialUpdate.bind(this))),this.unsubscribers.push(this.appState.subscribe("themeChanged",this._onThemeChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("appStatusChanged",this._onAppStatusChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("startupPhaseNumberChanged",this._onStartupPhaseChange.bind(this)))}_onStartupPhaseChange(t){this._draw()}resizeCanvas(t=!1){if(!this.canvas||!this.ctx)return!1;const e=window.devicePixelRatio||1,i=this.canvas.offsetWidth,n=this.canvas.offsetHeight;if(i===0||n===0)return!1;const s=Math.round(i*e),o=Math.round(n*e);let a=!1;return(this.canvas.width!==s||this.canvas.height!==o)&&(this.canvas.width=s,this.canvas.height=o,a=!0),(a||t)&&(this.ctx.setTransform(e,0,0,e,0,0),this._draw()),a}setActiveDimState(t){this.isActiveDim!==t&&(this.isActiveDim=t,document.body.classList.contains("theme-dim")?this.containerElement.classList.toggle("js-active-dim-dial",t):this.containerElement.classList.remove("js-active-dim-dial"),this._updateAndCacheComputedStyles(),this._draw())}_handleInteractionStart(t){if(this.appState.getAppStatus()!=="interactive"||this.isDragging)return;t.type==="touchstart"&&t.cancelable&&t.preventDefault(),this.isDragging=!0,this.gsapValueTween&&this.gsapValueTween.kill(),this.gsapValueTween=null,this.currentPointerX=t.touches?t.touches[0].clientX:t.clientX;const e=this.appState.getDialState(this.dialId);this.appState.updateDialState(this.dialId,{isDragging:!0,targetHue:e.hue,targetRotation:e.rotation}),this.dialId==="B"&&(this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.appState.setDialBInteractionState("dragging")),this.containerElement.style.cursor="grabbing",document.body.style.cursor="grabbing"}_handleInteractionMove(t){if(!this.isDragging||this.appState.getAppStatus()!=="interactive")return;t.type==="touchmove"&&t.cancelable&&t.preventDefault();let e=t.touches?t.touches[0].clientX:t.clientX;const i=e-this.currentPointerX,n=this.appState.getDialState(this.dialId);let s=n.targetHue+i/this.configModule.PIXELS_PER_DEGREE_HUE;const o=n.targetRotation+i/this.configModule.PIXELS_PER_DEGREE_ROTATION;this.dialId==="B"&&(s=Math.max(0,Math.min(s,359.999))),this.currentPointerX=e,this.gsapValueTween&&this.gsapValueTween.kill();const a={hue:n.hue,rotation:n.rotation};this.gsapValueTween=this.gsap.to(a,{rotation:o,hue:s,duration:this.configModule.GSAP_TWEEN_DURATION,ease:this.configModule.GSAP_TWEEN_EASE,overwrite:"auto",onUpdate:()=>{if(!this.isDragging&&this.gsapValueTween){this.gsapValueTween.kill(),this.gsapValueTween=null;return}this.appState.updateDialState(this.dialId,{hue:a.hue,rotation:a.rotation,targetHue:s,targetRotation:o}),this.dialId==="B"&&this.appState.setTrueLensPower(a.hue/359.999*100),this._draw()},onComplete:()=>{this.gsapValueTween=null}})}_handleInteractionEnd(t){if(!this.isDragging){document.body.style.cursor==="grabbing"&&(document.body.style.cursor="default");return}const e=this.dialId;this.isDragging=!1;const i=this.appState.getDialState(e);this.appState.updateDialState(e,{isDragging:!1}),this.gsapValueTween&&this.gsapValueTween.isActive()?(this.gsapValueTween.kill(),this.gsapValueTween=null,this.appState.updateDialState(e,{hue:i.targetHue,rotation:i.targetRotation}),e==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)):(Math.abs(i.hue-i.targetHue)>.01||Math.abs(i.rotation-i.targetRotation)>.01)&&(this.appState.updateDialState(e,{hue:i.targetHue,rotation:i.targetRotation}),e==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)),e==="B"&&(this.appState.setDialBInteractionState("settling"),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.dialBSettleTimer=setTimeout(()=>{this.appState.setDialBInteractionState("idle"),this.dialBSettleTimer=null},this.configModule.LENS_OSCILLATION_RESTART_DELAY)),this.containerElement.style.cursor="grab",document.body.style.cursor="default"}_addDragListeners(){this.boundHandleInteractionStart=this._handleInteractionStart.bind(this),this.boundHandleInteractionMove=this._handleInteractionMove.bind(this),this.boundHandleInteractionEnd=this._handleInteractionEnd.bind(this),this.containerElement.addEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.addEventListener("touchstart",this.boundHandleInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundHandleInteractionMove),window.addEventListener("touchmove",this.boundHandleInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundHandleInteractionEnd),window.addEventListener("touchend",this.boundHandleInteractionEnd),window.addEventListener("mouseleave",this.boundHandleInteractionEnd),window.addEventListener("touchcancel",this.boundHandleInteractionEnd)}_removeDragListeners(){this.containerElement.removeEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundHandleInteractionStart),window.removeEventListener("mousemove",this.boundHandleInteractionMove),window.removeEventListener("touchmove",this.boundHandleInteractionMove),window.removeEventListener("mouseup",this.boundHandleInteractionEnd),window.removeEventListener("touchend",this.boundHandleInteractionEnd),window.removeEventListener("mouseleave",this.boundHandleInteractionEnd),window.removeEventListener("touchcancel",this.boundHandleInteractionEnd)}_updateAndCacheComputedStyles(){if(!this.ctx)return;const t=getComputedStyle(document.documentElement),e=document.body.classList.contains("theme-dim");e&&this.isActiveDim?this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-dim-active-face-bg-l").trim()||"0.12",faceBgC:t.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",faceBgH:t.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeL:t.getPropertyValue("--dial-dim-active-ridge-l").trim()||"0.25",ridgeC:t.getPropertyValue("--dial-dim-active-ridge-c").trim()||t.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",ridgeH:t.getPropertyValue("--dial-dim-active-ridge-h").trim()||t.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeHighlightL:t.getPropertyValue("--dial-dim-active-ridge-highlight-l").trim()||"0.60",ridgeHighlightA:t.getPropertyValue("--dial-dim-active-ridge-highlight-a").trim()||"0.4",shadingStart:t.getPropertyValue("--dial-dim-active-shading-start-color").trim()||"oklch(0% 0 0 / 0.1)",shadingEnd:t.getPropertyValue("--dial-dim-active-shading-end-color").trim()||"oklch(0% 0 0 / 0.15)"}:e&&!this.isActiveDim?this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-face-bg-l").trim()||"0.01",faceBgC:t.getPropertyValue("--dial-face-bg-c").trim()||"0",faceBgH:t.getPropertyValue("--dial-face-bg-h").trim()||"0",ridgeL:t.getPropertyValue("--dial-ridge-l").trim()||"0.01",ridgeC:t.getPropertyValue("--dial-ridge-c").trim()||"0",ridgeH:t.getPropertyValue("--dial-ridge-h").trim()||"0",ridgeHighlightL:"0",ridgeHighlightA:"0",shadingStart:"oklch(0 0 0 / 0)",shadingEnd:"oklch(0 0 0 / 0)"}:this.computedStyleVars={faceBgL:t.getPropertyValue("--dial-face-bg-l").trim()||"0.20",faceBgC:t.getPropertyValue("--dial-face-bg-c").trim()||"0.005",faceBgH:t.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeL:t.getPropertyValue("--dial-ridge-l").trim()||"0.45",ridgeC:t.getPropertyValue("--dial-ridge-c").trim()||t.getPropertyValue("--dial-face-bg-c").trim()||"0.005",ridgeH:t.getPropertyValue("--dial-ridge-h").trim()||t.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeHighlightL:t.getPropertyValue("--dial-ridge-highlight-l").trim()||"0.95",ridgeHighlightA:t.getPropertyValue("--dial-ridge-highlight-a").trim()||"0.85",shadingStart:t.getPropertyValue("--dial-shading-start-color").trim()||"oklch(0% 0 0 / 0.35)",shadingEnd:t.getPropertyValue("--dial-shading-end-color").trim()||"oklch(0% 0 0 / 0.4)"}}_draw(){if(!this.ctx||!this.canvas||!this.configModule)return;if(!this.computedStyleVars.faceBgL&&(this._updateAndCacheComputedStyles(),!this.computedStyleVars.faceBgL)){console.error(`[Dial ${this.dialId} _draw] computedStyleVars.faceBgL still undefined after update. Bailing draw.`);return}const t=this.appState.getDialState(this.dialId);if(!t)return;const{rotation:e}=t,i=this.canvas.width/(window.devicePixelRatio||1),n=this.canvas.height/(window.devicePixelRatio||1);if(i===0||n===0)return;this.ctx.clearRect(0,0,i,n);const s=this.appState.getAppStatus(),o=this.appState.getCurrentStartupPhaseNumber(),a=document.body.classList.contains("theme-dim"),l=document.body.classList.contains("is-transitioning-from-dim"),c=a&&!this.isActiveDim&&s==="starting-up"&&(o===-1||o>=0&&o<6);c?this.ctx.fillStyle="oklch(0 0 0)":this.ctx.fillStyle=`oklch(${this.computedStyleVars.faceBgL} ${this.computedStyleVars.faceBgC} ${this.computedStyleVars.faceBgH})`,this.ctx.fillRect(0,0,i,n);let h;if(a&&!l?h=this.isActiveDim:h=this.isActiveDim||s==="interactive",c&&(h=!1),h){const d=2*Math.PI/this.configModule.NUM_RIDGES,p=-Math.PI/4,u=e*Math.PI/180,g=this.configModule.DIAL_GRADIENT_SCALE_FACTOR;for(let f=0;f<this.configModule.NUM_RIDGES;f++){const _=f*d+u,D=Math.cos(_),T=Math.sin(_);if(D>.03){const A=i/this.configModule.NUM_RIDGES*this.configModule.RIDGE_WIDTH_FACTOR*D,C=A*g,E=(A-C)/2,I=i/2+T*i/2-A/2+E;if(this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH})`,this.ctx.fillRect(I,0,C,n),parseFloat(this.computedStyleVars.ridgeHighlightA)>0){const y=Math.max(0,Math.cos(_-p)),F=Math.pow(y,10)*Math.pow(D,1.5);if(F>.05){const M=Math.min(1,parseFloat(this.computedStyleVars.ridgeHighlightA)*F*1.5);this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeHighlightL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH} / ${M.toFixed(3)})`;const U=I+C*.1,x=C*this.configModule.HIGHLIGHT_WIDTH_FACTOR;this.ctx.fillRect(U,0,x,n)}}}}if(this.computedStyleVars.shadingStart!=="oklch(0 0 0 / 0)"){const f=this.ctx.createLinearGradient(0,0,0,n);f.addColorStop(0,this.computedStyleVars.shadingStart),f.addColorStop(.2,"oklch(0 0 0 / 0)"),f.addColorStop(.8,"oklch(0 0 0 / 0)"),f.addColorStop(1,this.computedStyleVars.shadingEnd),this.ctx.fillStyle=f,this.ctx.fillRect(0,0,i,n)}}}_onAppStateDialUpdate(t){t&&t.id===this.dialId&&(this.isDragging||this._draw())}_onThemeChange(){this._updateAndCacheComputedStyles(),requestAnimationFrame(()=>{const t=window.devicePixelRatio||1;this.ctx&&this.ctx.setTransform(t,0,0,t,0,0),this._draw()})}_onAppStatusChange(t){this._updateAndCacheComputedStyles(),this._draw()}destroy(){this._removeDragListeners(),this.unsubscribers.forEach(t=>t()),this.unsubscribers=[],this.gsapValueTween&&this.gsapValueTween.kill(),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer)}}class yp{constructor(){this.dialInstances={},this.appState=null,this.config=null,this.gsap=null,this.dom={},this.debug=!1}init(){this.appState=O.get("appState"),this.config=O.get("config"),this.gsap=O.get("gsap"),this.dom=O.get("domElements"),this.debug&&console.log("[DialManager INIT]"),[this.dom.dialA,this.dom.dialB].forEach(e=>{if(!e)return;const i=e.dataset.dialId;i&&(this.dialInstances[i]&&this.dialInstances[i].destroy(),this.dialInstances[i]=new Sp(e,i,this.appState,this.config,this.gsap))})}setDialsActiveState(t){Object.values(this.dialInstances).forEach(e=>e.setActiveDimState(t))}resizeAllCanvases(t=!1){Object.values(this.dialInstances).forEach(e=>e.resizeCanvas(t))}}class Tp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.isOscillating=!1,this.oscillationStartTime=0,this.smoothedTrueLensPower={value:0},this.trueLensPowerTarget=0,this.oscillationFrameId=null,this.powerSmoothingTween=null,this.currentMasterHue=-1,this.lastAppliedGradientString="",this.lastVisualPowerForGradientRender=-1,this.lastHueForGradientRender=-1,this.lastSuperGlowHue=-1,this.currentLensHueProxy={value:-1},this.debouncedSetLegacyLensPowerVar=null,this.debug=!0}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[LensManager INIT]"),this.debouncedSetLegacyLensPowerVar=_p(i=>{const n=Math.max(0,Math.min(i,1.05));this.dom.root.style.setProperty("--lens-power",n.toFixed(3))},this.config.DEBOUNCE_DELAY/3);const t=this.appState.getTrueLensPower(),e=this.appState.getDialState("A");this.currentMasterHue=e?(e.hue%360+360)%360:this.config.DEFAULT_DIAL_A_HUE,this.currentLensHueProxy.value=this.currentMasterHue,this.lastHueForGradientRender=this.currentMasterHue,this._updateSuperGlowHue(this.currentMasterHue),this.smoothedTrueLensPower.value=t,this.trueLensPowerTarget=t,this.directUpdateLensVisuals(t),this.appState.subscribe("trueLensPowerChanged",i=>this._handleTrueLensPowerChange(i)),this.appState.subscribe("dialBInteractionChange",i=>this._handleDialBInteractionChange(i)),this.appState.subscribe("dialUpdated",i=>this._handleDialAUpdateForLensHue(i)),this.appState.subscribe("appStatusChanged",i=>this._handleAppStatusChangeForLens(i))}energizeLensCoreStartup(t=null,e=null){const i=t??this.config.LENS_STARTUP_TARGET_POWER,n=e??this.config.LENS_STARTUP_RAMP_DURATION,s=this.gsap.timeline(),o=this.appState.getTrueLensPower(),a={value:o*100};return o<=1e-4&&this._updateLensGradientVisuals(0),s.to(a,{value:i,duration:n/1e3,ease:"sine.inOut",onStart:()=>{this.dom.colorLensGradient.style.opacity!=="1"&&this.appState.getAppStatus()!=="loading"&&(this.dom.colorLensGradient.style.opacity="1")},onUpdate:()=>this.appState.setTrueLensPower(a.value),onComplete:()=>{const l=a.value;this.appState.setTrueLensPower(l);const c=l/100*359.999,h=c*this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG;this.appState.updateDialState("B",{hue:c,targetHue:c,rotation:h,targetRotation:h})}}),s}directUpdateLensVisuals(t){this._updateLensGradientVisuals(t),this._setLegacyLensPowerVar(t,!0)}_setLegacyLensPowerVar(t,e=!1){if(e){const i=Math.max(0,Math.min(t,1.05));this.dom.root.style.setProperty("--lens-power",i.toFixed(3))}else this.debouncedSetLegacyLensPowerVar(t)}_updateSuperGlowHue(t){const e=(Number(t)%360+360)%360;(Math.abs(e-this.lastSuperGlowHue)>=this.config.HUE_UPDATE_THRESHOLD||this.lastSuperGlowHue===-1)&&(this.dom.root.style.setProperty("--dynamic-lens-super-glow-hue",e.toFixed(1)),this.lastSuperGlowHue=e)}_handleDialAUpdateForLensHue(t){if(this.appState.getAppStatus()==="loading"||!t||t.id!=="A"||!t.state)return;const e=t.state,i=(e.hue%360+360)%360;if(this.gsap.isTweening(this.currentLensHueProxy)&&this.gsap.killTweensOf(this.currentLensHueProxy),e.isDragging){this.currentMasterHue=i,this.currentLensHueProxy.value=i,this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState();return}const n=Math.abs(i-this.currentMasterHue);if(Math.min(n,360-n)<this.config.HUE_UPDATE_THRESHOLD&&this.currentMasterHue!==-1)return;let s=this.config.LENS_OSCILLATION_HUE_SMOOTHING_DURATION,o="power1.out";const a=this.appState.getResistiveShutdownStage();if(a>0){const c=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${a}`];c&&(s=c.LENS_ANIM_DURATION_S,o=c.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}let l=i;Math.abs(l-this.currentLensHueProxy.value)>180&&(l+=l>this.currentLensHueProxy.value?-360:360),this.gsap.to(this.currentLensHueProxy,{value:l,duration:s,ease:o,onUpdate:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value),this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState()},onComplete:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value)}})}_updateLensVisualsWithCurrentState(t=!1){const e=this.smoothedTrueLensPower.value+(this.isOscillating?this._calculateOscillationOffset(performance.now()):0);this._setLegacyLensPowerVar(e,t),this._updateLensGradientVisuals(e)}_updateLensGradientVisuals(t){const e=this.dom.colorLensGradient;if(!e)return;const i=this.appState.getAppStatus(),n=t<=1e-4;if(i==="loading"||i==="error"||i==="starting-up"&&n){e.style.opacity!=="0"&&(e.style.opacity="0");return}e.style.opacity!=="1"&&(e.style.opacity="1");const s=Math.abs(t-this.lastVisualPowerForGradientRender)>=1e-4,o=Math.abs(this.currentMasterHue-this.lastHueForGradientRender)>=this.config.HUE_UPDATE_THRESHOLD;if(!s&&!o)return;const a=this.config.LENS_GRADIENT_BREAKPOINTS,l=Math.max(a[0].power,t);let c=a[0],h=a[0];for(let g=0;g<a.length;g++){if(l<=a[g].power){h=a[g],c=g>0?a[g-1]:a[0];break}g===a.length-1&&(c=h=a[g])}let d=0;h.power>c.power&&(d=(Math.max(c.power,Math.min(t,h.power))-c.power)/(h.power-c.power));const p=[];for(let g=0;g<this.config.NUM_LENS_GRADIENT_STOPS;g++){const f=c.stops[g],_=h.stops[g],D=f.l+d*(_.l-f.l),T=f.c+d*(_.c-f.c),A=f.pos+d*(_.pos-f.pos);let C=f.type==="hotspot"?this.currentMasterHue+this.config.LENS_HOTSPOT_HUE_OFFSET:this.currentMasterHue;(f.type==="darkedge"||f.type==="blackedge")&&(C=0),C=(C%360+360)%360,p.push(`oklch(${D.toFixed(3)} ${T.toFixed(3)} ${C.toFixed(1)}) ${(A*100).toFixed(2)}%`)}const u=`radial-gradient(circle at 50% 50%, ${p.join(", ")})`;e.style.background!==u&&(e.style.background=u),this.lastAppliedGradientString=u,this.lastVisualPowerForGradientRender=t,this.lastHueForGradientRender=this.currentMasterHue}_handleTrueLensPowerChange(t){this.trueLensPowerTarget=t,this.powerSmoothingTween&&this.powerSmoothingTween.kill();const e=this.appState.getAppStatus()==="starting-up",i=this.appState.getDialBInteractionState()==="idle",n=this.appState.getResistiveShutdownStage();let s=this.config.LENS_OSCILLATION_SMOOTHING_DURATION,o="power1.out";if(n>0){const a=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${n}`];a&&(s=a.LENS_ANIM_DURATION_S,o=a.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}e||!i?(this.smoothedTrueLensPower.value=this.trueLensPowerTarget,this.isOscillating||this._updateLensVisualsWithCurrentState(!0)):this.powerSmoothingTween=this.gsap.to(this.smoothedTrueLensPower,{value:this.trueLensPowerTarget,duration:s,ease:o,onUpdate:()=>this._updateLensVisualsWithCurrentState(),onComplete:()=>{this.powerSmoothingTween=null,this.isOscillating||this._updateLensVisualsWithCurrentState(!0),this.appState.getAppStatus()==="interactive"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}}),(this.trueLensPowerTarget<this.config.LENS_OSCILLATION_THRESHOLD||!i||e)&&this.isOscillating&&this._stopOscillation(),this.appState.getAppStatus()==="interactive"&&i&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}_handleDialBInteractionChange(t){t!=="idle"?(this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=this.appState.getTrueLensPower(),this._updateLensVisualsWithCurrentState(!0)):this._handleTrueLensPowerChange(this.appState.getTrueLensPower())}_handleAppStatusChangeForLens(t){if(t==="loading"||t==="error"){this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=0,this.trueLensPowerTarget=0,this._updateLensGradientVisuals(0),this._setLegacyLensPowerVar(0,!0),this.dom.lensSuperGlow&&(this.dom.lensSuperGlow.style.opacity="0");return}this._updateLensVisualsWithCurrentState(!0),this._updateSuperGlowHue(this.currentMasterHue),t==="interactive"?this.appState.getDialBInteractionState()==="idle"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation():this.isOscillating&&this._stopOscillation()}_startOscillation(){const t=this.appState.getAppStatus()==="interactive"&&this.appState.getDialBInteractionState()==="idle";this.debug&&console.log(`[LensManager _startOscillation] Attempting to start. Conditions: isOscillating=${this.isOscillating}, canOscillate=${t} (appStatus: ${this.appState.getAppStatus()}, dialBState: ${this.appState.getDialBInteractionState()}, shutdownStage: ${this.appState.getResistiveShutdownStage()})`),!(this.isOscillating||!t)&&(this.isOscillating=!0,this.oscillationStartTime=performance.now(),this.debug&&console.log("[LensManager _startOscillation] Oscillation STARTED."),this._oscillationLoop(performance.now()))}_stopOscillation(){this.isOscillating&&(this.debug&&console.log("[LensManager _stopOscillation] Oscillation STOPPED."),this.isOscillating=!1,this.oscillationFrameId&&cancelAnimationFrame(this.oscillationFrameId),this.oscillationFrameId=null,this._updateLensVisualsWithCurrentState(!0))}_calculateOscillationOffset(t){if(!this.isOscillating)return 0;const e=(t-this.oscillationStartTime)/1e3,i=Math.max(0,this.smoothedTrueLensPower.value-this.config.LENS_OSCILLATION_THRESHOLD),n=Math.min(1,i/(1-this.config.LENS_OSCILLATION_THRESHOLD)),s=this.config.LENS_OSCILLATION_AMPLITUDE_MIN+n*this.config.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,o=Dp(n,0,1,this.config.LENS_OSCILLATION_PERIOD_AT_THRESHOLD,this.config.LENS_OSCILLATION_PERIOD_AT_MAX_POWER);return o<=.001?0:Math.sin(2*Math.PI/o*e)*s}_oscillationLoop(t){this.isOscillating&&(this._updateLensVisualsWithCurrentState(),this.oscillationFrameId=requestAnimationFrame(e=>this._oscillationLoop(e)))}}class Ap{constructor(){this.body=document.body,this.appState=null,this.debug=!1}init(){this.debug&&console.log("[ThemeManager INIT]"),this.appState=O.get("appState"),this.appState.subscribe("themeChanged",t=>this.handleThemeChange(t)),this.handleThemeChange(this.appState.getCurrentTheme())}handleThemeChange(t){this.body&&(this.debug&&console.log(`[ThemeManager] Theme changing to '${t}'.`),this.body.classList.remove("theme-dim","theme-dark","theme-light"),this.body.classList.add(`theme-${t}`))}}const Cp=["lcd--unlit","js-active-dim-lcd","lcd--dimly-lit"];class Ip{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.debug=!1}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[LcdUpdater INIT]"),this.appState.subscribe("appStatusChanged",()=>this.applyCurrentStateToAllLcds()),this.appState.subscribe("startupPhaseNumberChanged",()=>this.applyCurrentStateToAllLcds()),this.appState.subscribe("trueLensPowerChanged",t=>this.updateLcdBContent(t)),this.applyCurrentStateToAllLcds()}setLcdState(t,e,i={}){const{useFlicker:n=!1,flickerProfileName:s,phaseContext:o="UnknownPhase"}=i,a=t?t.id||"UnknownLCD":"NullElement";if(this.debug&&console.log(`[LcdUpdater setLcdState - ${a} - ${o}] Called. Target: '${e}', Flicker: ${n}`),!t)return console.warn("[LcdUpdater] Attempted to set state on a null LCD container."),{timeline:this.gsap.timeline(),completionPromise:Promise.resolve()};const l=e==="dimly-lit"?"lcd--dimly-lit":e==="unlit"?"lcd--unlit":"";if(Cp.forEach(c=>t.classList.remove(c)),l&&t.classList.add(l),this.appState.emit("lcdStateChanged",{lcdId:t.id,newStateKey:e,context:o}),n&&s)return t.classList.add("is-flickering"),So(t,s,{gsapInstance:this.gsap,onTimelineComplete:()=>{t.classList.remove("is-flickering"),this._updateLcdVisibility(t,e),this.debug&&console.log(`[LcdUpdater] Flicker complete for ${a}. Final state: ${e}`)}});{this._updateLcdVisibility(t,e);const c=this.gsap.timeline();return c.to({},{duration:.001}),{timeline:c,completionPromise:Promise.resolve()}}}applyCurrentStateToAllLcds(){const t=this.appState.getAppStatus(),e=this.appState.getCurrentStartupPhaseNumber();this.debug&&console.log(`[LcdUpdater applyCurrentStateToAllLcds] AppStatus: ${t}, Phase: ${e}`);let i="unlit";t==="interactive"||t==="starting-up"&&e>=10?i="active":t==="starting-up"&&e>=6&&(i="dimly-lit"),[this.dom.lcdA,this.dom.lcdB,this.dom.terminalContainer].forEach(s=>{s&&!s.classList.contains("is-flickering")&&this.setLcdState(s,i,{phaseContext:`ApplyAll_S:${t}_P:${e}`})})}updateLcdBContent(t){if(this.dom.lcdB){const e=this.dom.lcdB.querySelector(".lcd-value");if(e){const i=`${Math.round(t*100)}%`;e.textContent!==i&&(e.textContent=i)}}}_updateLcdVisibility(t,e){const i=e==="active"||e==="dimly-lit";if(this.gsap.set(t,{autoAlpha:1}),t===this.dom.lcdB){const n=t.querySelector(".lcd-value");n&&this.gsap.set(n,{opacity:i?1:0})}else this.dom.terminalContainer}}class wp{constructor(){this.root=document.documentElement,this.appState=null,this.config=null,this.dom={},this.debug=!1}init(){this.appState=O.get("appState"),this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[DynamicStyleManager INIT]"),this.appState.subscribe("targetColorChanged",t=>this.handleTargetColorChange(t)),this.appState.subscribe("dialUpdated",t=>this.handleDialAUpdateForUIAccent(t)),this.injectLogoSVG(),this.applyInitialDynamicCSSVars()}updateDynamicCSSVar(t,e,i){if(!this.root)return;const n=(Number(e)%360+360)%360,s={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},o=parseFloat(getComputedStyle(this.root).getPropertyValue(`--dynamic-${t}-chroma-base`).trim())||s[t]||.1,a=i?0:o;this.root.style.setProperty(`--dynamic-${t}-hue`,n.toFixed(1)),this.root.style.setProperty(`--dynamic-${t}-chroma`,a.toFixed(4)),this.debug&&console.log(`[DynamicStyleManager] Set CSS vars for '${t}': Hue=${n.toFixed(1)}, Chroma=${a.toFixed(4)}`)}injectLogoSVG(){const t=this.dom.logoContainer;if(!t){console.error("[DynamicStyleManager] logoContainer element not found for SVG injection.");return}t.querySelector("svg.logo-svg")||fetch("./logo.svg").then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()}).then(e=>{if(!e||!e.trim().startsWith("<svg"))throw new Error("Invalid SVG data.");t.innerHTML=e,this.applyInitialDynamicCSSVars()}).catch(e=>{console.error("[DynamicStyleManager] Error fetching/injecting SVG logo:",e),t.innerHTML='<p style="color: #ccc; font-size: 0.8em;">Logo Load Error</p>'})}applyInitialDynamicCSSVars(){["env","lcd","logo","btn"].forEach(i=>{const n=this.appState.getTargetColorProperties(i);n&&this.updateDynamicCSSVar(i,n.hue,n.isColorless)});const t=this.appState.getDialState("A"),e=t?t.hue:this.config.DEFAULT_DIAL_A_HUE;this.updateDynamicCSSVar("ui-accent",e,!1)}handleTargetColorChange(t){!t||!t.targetKey||this.updateDynamicCSSVar(t.targetKey,t.hue,t.isColorless)}handleDialAUpdateForUIAccent(t){t&&t.id==="A"&&t.state&&this.updateDynamicCSSVar("ui-accent",t.state.hue,!1)}}class Lp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.managers={},this.dom={},this.proxies={},this.debug=!0}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.config=O.get("config"),this.dom=O.get("domElements"),this.proxies=O.get("proxies"),this.managers={buttonManager:O.get("buttonManager"),dialManager:O.get("dialManager"),lensManager:O.get("lensManager"),lcdUpdater:O.get("lcdUpdater")},this.debug&&console.log("[PhaseRunner INIT]")}run(t){return new Promise((e,i)=>{try{this.debug&&console.log(`[PhaseRunner RUN] Executing Phase ${t.phase}: ${t.name}`);const n=this.gsap.timeline({onComplete:()=>{this.debug&&console.log(`[PhaseRunner RUN] <<<< COMPLETED >>>> Phase ${t.phase}`),e()},onError:o=>i(o)});t.terminalMessageKey&&this.appState.emit("requestTerminalMessage",{type:"startup",source:t.name,messageKey:t.terminalMessageKey}),t.animations&&Array.isArray(t.animations)&&t.animations.forEach(o=>this._buildAnimation(n,o));let s=t.duration||this.config.MIN_PHASE_DURATION_FOR_STEPPING;n.duration()<s&&n.to({},{duration:s-n.duration()}),n.play()}catch(n){console.error(`[PhaseRunner RUN] Error setting up Phase ${t.phase}:`,n),i(n)}})}_buildAnimation(t,e){const i=e.position||">";switch(e.type){case"tween":this._handleTween(t,e,i);break;case"flicker":this._handleFlicker(t,e,i);break;case"call":const n=e.deps?e.deps.map(o=>O.get(o)):[];t.call(e.function,n,i);break;case"lensEnergize":const s=this.managers.lensManager.energizeLensCoreStartup(e.targetPower,e.durationMs);s&&t.add(s,i);break;default:console.warn(`[PhaseRunner] Unknown animation type: ${e.type}`)}}_handleTween(t,e,i){let n=[];if(e.target==="dimmingFactors"){n.push(this.proxies.LReductionProxy);const s=e.vars.onUpdate;e.vars.onUpdate=()=>{this.dom.root.style.setProperty("--startup-L-reduction-factor",this.proxies.LReductionProxy.value.toFixed(3)),s&&s()}}else Array.isArray(e.target)?n=e.target.map(s=>this.dom[s]).filter(Boolean):this.dom[e.target]&&n.push(this.dom[e.target]);n.length>0&&t.to(n,e.vars,i)}_handleFlicker(t,e,i){let n=[];if(e.target==="buttonGroup")n=this.managers.buttonManager.getButtonsByGroupIds(e.groups);else if(e.target==="button"&&e.selector)n=Array.from(document.querySelectorAll(e.selector));else if(Array.isArray(e.target))n=e.target.map(o=>this.dom[o]).filter(Boolean);else if(this.dom[e.target])n.push(this.dom[e.target]);else if(typeof e.target=="string"){const o=this.managers.buttonManager.getButtonByAriaLabel(e.target);o&&n.push(o.getElement())}if(n.length===0){this.debug&&console.warn("[PhaseRunner _handleFlicker] No elements found for animation target:",e.target);return}const s=e.stagger||0;n.forEach((o,a)=>{var h;const l=o.classList.contains("button-unit");let c;if(l){const d=this.managers.buttonManager.getButtonInstance(o);if(!d){this.debug&&console.warn("[PhaseRunner _handleFlicker] Could not get button instance for element:",o);return}let p=e.state,u=e.profile;if(e.profile&&e.profile.startsWith("buttonFlickerFromDimlyLitToFullyLit")){let g;e.target==="buttonGroup"?g=((h=this.config.DEFAULT_ASSIGNMENT_SELECTIONS[d.getGroupId()])==null?void 0:h.toString())===d.getValue():g=e.state.includes("is-selected");const f=e.profile.includes("Fast");g?(u=f?"buttonFlickerFromDimlyLitToFullyLitSelectedFast":"buttonFlickerFromDimlyLitToFullyLitSelected",p="is-energized is-selected"):(u=f?"buttonFlickerFromDimlyLitToFullyLitUnselectedFast":"buttonFlickerFromDimlyLitToFullyLitUnselected",p="is-energized")}c=this.managers.buttonManager.playFlickerToState(o,p,{profileName:u,phaseContext:`PhaseRunner_${u}`})}else c=this.managers.lcdUpdater.setLcdState(o,e.state,{useFlicker:!0,flickerProfileName:e.profile,phaseContext:`PhaseRunner_${e.profile}`});c&&c.timeline&&t.add(c.timeline,`${i}+=${a*s}`)})}}class vp{constructor(){this.gsap=null,this.appState=null,this.buttonManager=null,this.configModule=null,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!0,this._updateResonance=this._updateResonance.bind(this)}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.buttonManager=O.get("buttonManager"),this.configModule=O.get("config"),this.debug&&console.log("[AAM INIT] Initializing AmbientAnimationManager."),this.appState.subscribe("appStatusChanged",t=>this._handleAppStatusChange(t)),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",t=>this._handleBeforeButtonTransition(t)),this.buttonManager.on("afterButtonTransition",t=>this._handleAfterButtonTransition(t)),this.debug&&console.log("[AAM INIT] Subscribed to ButtonManager events.")):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(this.appState.getAppStatus())}_updateResonance(){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance)return;const t=this.configModule.HARMONIC_RESONANCE_PARAMS,e=this.gsap.ticker.time;this.globalResonanceParams.progress=(Math.sin(e*Math.PI*2/t.PERIOD)+1)/2;const i=this.globalResonanceParams.progress*t.LIGHT_OPACITY_DIP_FACTOR,n=t.BASE_LIGHT_OPACITY_SELECTED*(1-i);document.documentElement.style.setProperty("--harmonic-resonance-opacity-target",n.toFixed(3))}_handleAppStatusChange(t){const e=this.isActive;this.isActive=t==="interactive",this.isActive&&!e&&this.enableHarmonicResonance?this.resonanceTicker.add(this._updateResonance):!this.isActive&&e&&this.enableHarmonicResonance&&(this.resonanceTicker.remove(this._updateResonance),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target"));const i=this.buttonManager.getAllButtonInstances();for(const n of i)this.isActive?this._applyAmbientAnimation(n):(n.stopHarmonicResonance(),n.setCssIdleLightDriftActive(!1))}_handleBeforeButtonTransition(t){this.isActive&&(t.stopHarmonicResonance(),t.setCssIdleLightDriftActive(!1))}_handleAfterButtonTransition(t){this.isActive&&this._applyAmbientAnimation(t)}_applyAmbientAnimation(t){if(!this.isActive||!this.configModule)return;t.stopHarmonicResonance(),t.setCssIdleLightDriftActive(!1);const e=this.configModule.HARMONIC_RESONANCE_PARAMS;this.configModule.IDLE_LIGHT_DRIFT_PARAMS;const i=t.isSelected();t.getCurrentClasses().has(e.ELIGIBILITY_CLASS)&&(i?this.enableHarmonicResonance&&t.startHarmonicResonance():t.setCssIdleLightDriftActive(!0))}destroy(){this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target")}}class bp{constructor(t){if(!t)throw new Error("MoodMatrixDisplayManager: Target LCD container element not provided.");this.parentLcdElement=t,this.gsap=null,this.appState=null,this.config=null,this.rowsWrapper=null,this.rowElements=[],this.domCycleIndex=0,this.currentDialHue=-1,this.currentDisplaySegmentStartIndex=-1,this.isScrolling=!1,this.rowHeight=0,this.currentParentLcdState="unlit",this.debug=!1}init(){this.gsap=O.get("gsap"),this.appState=O.get("appState"),this.config=O.get("config"),this.debug&&console.log(`[MMDM INIT] Initialized for ${this.parentLcdElement.id}.`),this._initDOM(),this._cacheLayoutMetrics(),this._setupInitialState(),this._subscribeToEvents(),window.addEventListener("resize",()=>this._handleResize())}_initDOM(){this.parentLcdElement.innerHTML="",this.rowsWrapper=document.createElement("div"),this.rowsWrapper.classList.add("mood-matrix-rows-wrapper"),this.parentLcdElement.appendChild(this.rowsWrapper);for(let t=0;t<3;t++){const e=document.createElement("div");e.className="mood-matrix-row",e.innerHTML='<span class="mood-value"></span><span class="mood-spacer"> </span><span class="mood-label"></span>',this.rowsWrapper.appendChild(e),this.rowElements.push(e)}}_cacheLayoutMetrics(){if(this.rowElements.length>0&&this.rowsWrapper){const t=this.rowsWrapper.offsetHeight===0;if(t&&this.gsap.set(this.rowElements[0],{position:"relative",display:"flex",opacity:1}),this.rowHeight=this.rowElements[0].offsetHeight,t&&this.gsap.set(this.rowElements[0],{position:"absolute",display:"flex",opacity:0}),this.rowHeight===0){const e=parseFloat(getComputedStyle(this.parentLcdElement).fontSize)||16;this.rowHeight=e*(this.config.MOOD_MATRIX_ROW_HEIGHT_EM_FALLBACK||1.4)}this.rowsWrapper.style.height=`${2*this.rowHeight}px`}}_handleResize(){this._cacheLayoutMetrics();const t=this.currentDialHue%this.config.MOOD_MATRIX_SEGMENT_DEGREES,e=Math.max(0,Math.min(1,t/this.config.MOOD_MATRIX_SEGMENT_DEGREES));this._updateVisibleMoodsContent(this.currentDisplaySegmentStartIndex,e);const i=this.rowElements[(this.domCycleIndex+2)%3];this._prepBufferElement(i,this.currentDisplaySegmentStartIndex,"down")}_setupInitialState(){if(this.rowHeight===0&&this._cacheLayoutMetrics(),this.rowHeight===0)return;this.domCycleIndex=0;const t=this.rowElements[0],e=this.rowElements[1],i=this.rowElements[2];this.gsap.set(t,{y:0,opacity:1}),this.gsap.set(e,{y:this.rowHeight,opacity:1});const n=this.appState.getDialState("A");this.currentDialHue=n?n.hue:this.config.DEFAULT_DIAL_A_HUE,this.currentDisplaySegmentStartIndex=Math.floor(this.currentDialHue/this.config.MOOD_MATRIX_SEGMENT_DEGREES);const s=this.currentDialHue%this.config.MOOD_MATRIX_SEGMENT_DEGREES,o=Math.max(0,Math.min(1,s/this.config.MOOD_MATRIX_SEGMENT_DEGREES));this._updateVisibleMoodsContent(this.currentDisplaySegmentStartIndex,o),this._prepBufferElement(i,this.currentDisplaySegmentStartIndex,"down")}_subscribeToEvents(){this.appState.subscribe("dialUpdated",t=>this._handleDialAUpdate(t)),this.appState.subscribe("lcdStateChanged",t=>this._handleParentLcdStateChange(t))}_handleParentLcdStateChange(t){if(t&&t.lcdId===this.parentLcdElement.id&&t.newStateKey!==this.currentParentLcdState){this.currentParentLcdState=t.newStateKey;const e=this.currentDialHue%this.config.MOOD_MATRIX_SEGMENT_DEGREES,i=Math.max(0,Math.min(1,e/this.config.MOOD_MATRIX_SEGMENT_DEGREES));this._updateVisibleMoodsContent(this.currentDisplaySegmentStartIndex,i)}}_handleDialAUpdate({id:t,state:e}){if(t!=="A"||!e||this.isScrolling)return;const i=e.hue;if(Math.abs(i-this.currentDialHue)<.05)return;const n=this.currentDisplaySegmentStartIndex,s=Math.floor(i/this.config.MOOD_MATRIX_SEGMENT_DEGREES),o=i%this.config.MOOD_MATRIX_SEGMENT_DEGREES,a=Math.max(0,Math.min(1,(o<0?o+this.config.MOOD_MATRIX_SEGMENT_DEGREES:o)/this.config.MOOD_MATRIX_SEGMENT_DEGREES));if(this.currentDialHue=i,s!==n){this.isScrolling=!0;const l=this.config.MOOD_MATRIX_DEFINITIONS.length,c=(n%l+l)%l,h=(s%l+l)%l;let d=c===l-1&&h===0?"down":c===0&&h===l-1?"up":s>n?"down":"up";this._animateScroll(d,s,a)}else this._updateVisibleMoodsContent(this.currentDisplaySegmentStartIndex,a)}_getPeakHueForMood(t){var i;const e=this.config.MOOD_MATRIX_DEFINITIONS.indexOf(t);return e===-1?((i=this.appState.getTargetColorProperties("lcd"))==null?void 0:i.hue)||0:e*this.config.MOOD_MATRIX_SEGMENT_DEGREES%360}_updateMoodRowContent(t,e,i){if(!t)return;const n=t.querySelector(".mood-value"),s=t.querySelector(".mood-label");if(!n||!s)return;const o=this._getPeakHueForMood(i);n.textContent=this._formatPercentageString(e),n.style.setProperty("--mood-value-specific-hue",o.toFixed(1)),s.textContent=i,s.style.setProperty("--mood-label-specific-hue",o.toFixed(1)),[n,s].forEach(a=>{a.classList.remove("text-is-unlit","text-is-dimly-lit","text-is-active"),this.currentParentLcdState==="unlit"?a.classList.add("text-is-unlit"):this.currentParentLcdState==="dimly-lit"?a.classList.add("text-is-dimly-lit"):a.classList.add("text-is-active")})}_updateVisibleMoodsContent(t,e){const i=this.config.MOOD_MATRIX_DEFINITIONS.length,n=(t%i+i)%i,s=((t+1)%i+i)%i,o=this.config.MOOD_MATRIX_DEFINITIONS[n],a=this.config.MOOD_MATRIX_DEFINITIONS[s],l=this.rowElements[this.domCycleIndex%3],c=this.rowElements[(this.domCycleIndex+1)%3];this._updateMoodRowContent(l,(1-e)*100,o),this._updateMoodRowContent(c,e*100,a)}_prepBufferElement(t,e,i){if(!t)return;const n=this.config.MOOD_MATRIX_DEFINITIONS.length;let s,o;i==="down"?(s=this.config.MOOD_MATRIX_DEFINITIONS[((e+2)%n+n)%n],o=2*this.rowHeight):(s=this.config.MOOD_MATRIX_DEFINITIONS[((e-1)%n+n)%n],o=-this.rowHeight),this._updateMoodRowContent(t,0,s),this.gsap.set(t,{y:o,opacity:0})}_animateScroll(t,e,i){if(this.rowHeight===0){this.isScrolling=!1;return}const n=this.domCycleIndex,s=this.rowElements[n%3],o=this.rowElements[(n+1)%3],a=this.rowElements[(n+2)%3],l=this.config.MOOD_MATRIX_DEFINITIONS.length,c=this.config.MOOD_MATRIX_DEFINITIONS[(e%l+l)%l],h=this.config.MOOD_MATRIX_DEFINITIONS[((e+1)%l+l)%l],d=this.gsap.timeline({onComplete:()=>{this.domCycleIndex=t==="down"?(n+1)%3:(n-1+3)%3;const p=t==="down"?s:o;this._prepBufferElement(p,e,t),this._updateVisibleMoodsContent(e,i),this.isScrolling=!1,this.currentDisplaySegmentStartIndex=e}});t==="down"?(this._updateMoodRowContent(o,(1-i)*100,c),this._updateMoodRowContent(a,i*100,h),d.to(s,{y:-this.rowHeight,opacity:0,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0).to(o,{y:0,opacity:1,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0).fromTo(a,{y:2*this.rowHeight,opacity:0},{y:this.rowHeight,opacity:1,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0)):(this._updateMoodRowContent(a,(1-i)*100,c),this._updateMoodRowContent(s,i*100,h),d.to(o,{y:2*this.rowHeight,opacity:0,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0).to(s,{y:this.rowHeight,opacity:1,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0).fromTo(a,{y:-this.rowHeight,opacity:0},{y:0,opacity:1,duration:this.config.MOOD_MATRIX_SCROLL_DURATION,ease:"sine.inOut"},0))}_formatPercentageString(t){return String(Math.round(t)).padStart(3," ")+"%"}destroy(){window.removeEventListener("resize",()=>this._handleResize())}}class Op{constructor(){this.appState=null,this.config=null,this.buttonManager=null,this.debug=!0}init(){this.appState=O.get("appState"),this.config=O.get("config"),this.buttonManager=O.get("buttonManager"),this.appState.subscribe("resistiveShutdownStageChanged",t=>this.handleStageChange(t)),this.debug&&console.log("[RSC INIT]")}handlePowerOffClick(){if(this.appState.getIsMainPowerOffButtonDisabled()){this.debug&&console.log("[RSC] MAIN PWR OFF is disabled. Interaction blocked.");return}const t=this.appState.getResistiveShutdownStage();if(t<this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE){const e=t+1;this.debug&&console.log(`[RSC] Advancing resistive shutdown to stage ${e}.`),this.appState.setResistiveShutdownStage(e)}}handleStageChange({newStage:t}){if(this.debug&&console.log(`[RSC] Stage changed to ${t}`),t===0){this.appState.getIsMainPowerOffButtonDisabled()&&this.appState.setIsMainPowerOffButtonDisabled(!1);return}const e=`STAGE_${t}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[e];i&&(i.TERMINAL_MESSAGE_KEY&&this.appState.emit("requestTerminalMessage",{type:"status",messageKey:i.TERMINAL_MESSAGE_KEY}),this._updateLensTargets(i),this._updateHueAssignmentButtons(i),t===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE&&this.appState.setIsMainPowerOffButtonDisabled(!0))}_updateLensTargets(t){const e=this.appState.getDialState("A"),i=this.appState.getTrueLensPower();let n=e.hue,s=i;t.DIAL_A_HUE_TARGET_MODE==="absolute"&&(n=t.DIAL_A_HUE_VALUE),t.DIAL_B_POWER_TARGET_MODE==="increase_absolute_0_1"?s+=t.DIAL_B_POWER_VALUE:t.DIAL_B_POWER_TARGET_MODE==="absolute_100"&&(s=1),s=mp(s,0,1),this.appState.updateDialState("A",{hue:n,targetHue:n}),this.appState.setTrueLensPower(s*100);const o=s*359.999,a=o*this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG;this.appState.updateDialState("B",{hue:o,targetHue:o,rotation:a,targetRotation:a}),this.debug&&console.log(`[RSC _updateLensTargets] Synced state. New Lens Power: ${s.toFixed(3)}. New Dial B Hue: ${o.toFixed(2)}`)}_updateHueAssignmentButtons(t){if(!t.HUE_ASSIGN_TARGET_HUE)return;const e=t.HUE_ASSIGN_TARGET_HUE;let i=-1,n=360;this.config.HUE_ASSIGNMENT_ROW_HUES.forEach((s,o)=>{const a=Math.abs(s-e);a<n&&(n=a,i=o)}),i!==-1&&["btn","logo","lcd","env"].forEach(s=>{this.appState.setTargetColorProperties(s,this.config.HUE_ASSIGNMENT_ROW_HUES[i]),this.buttonManager.setGroupSelected(s,i.toString())})}}const kr=new Op,Pp={P1_EMERGENCY_SUBSYSTEMS:"INITIATING STARTUP PROTOCOL",P2_BACKUP_POWER:"> BACKUP POWER ENGAGED",P3_MAIN_POWER_ONLINE:"> MAIN POWER STABLE",P4_OPTICAL_CORE_REACTIVATE:"> OPTICAL CORE REACTIVATED",P5_DIAGNOSTIC_INTERFACE:"> DIAGNOSTICS ONLINE",P6_MOOD_INTENSITY_CONTROLS:"> MOOD CONTROLS ACTIVE",P7_HUE_CORRECTION_SYSTEMS:"> HUE SYSTEMS ALIGNED",P8_EXTERNAL_LIGHTING_CONTROLS:"> EXTERNAL LIGHTING RESPONSIVE",P9_AUX_LIGHTING_LOW:"> AUX LIGHTING: LOW INTENSITY",P11_SYSTEM_OPERATIONAL:["ALL SYSTEMS NOMINAL","HUE 9000 OPERATIONAL"]},Js={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}°","  - INTENSITY DIAL (B) SETTING: {dialBHue}°","  - ASSIGNED ENVIRONMENT HUE: {envHue}°","  - ASSIGNED LCD HUE: {lcdHue}°","  - ASSIGNED LOGO HUE: {logoHue}°","  - ASSIGNED BUTTON HUE: {btnHue}°","SYSTEM NOMINAL. AWAITING INPUT."]},Ea={dialA:r=>`MOOD DIAL SET TO ${r.value}°`,dialB:r=>`INTENSITY DIAL SET TO ${r.value}%`,envHue:r=>`ENVIRONMENT HUE ASSIGNED: ${r.hue}°`,lcdHue:r=>`LCD HUE ASSIGNED: ${r.hue}°`,logoHue:r=>`LOGO HUE ASSIGNED: ${r.hue}°`,btnHue:r=>`BUTTON HUE ASSIGNED: ${r.hue}°`,FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`,RESIST_SHUTDOWN_S1:"WARNING",RESIST_SHUTDOWN_S2:"ERROR",RESIST_SHUTDOWN_S3:"CRITICAL ERROR"};function xp(r,t={},e=null){const{type:i,source:n,data:s,messageKey:o}=r||{};if(r&&r.content&&Array.isArray(r.content))return r.content;if(r&&r.content&&typeof r.content=="string")return[r.content];switch(i){case"startup":const a=Pp[o||n]||`Unknown startup event: ${o||n}`;return Array.isArray(a)?a:[a];case"block":if(o&&Js[o]){if(o==="BTN4_MESSAGE"){const c=(e==null?void 0:e.DEFAULT_DIAL_A_HUE)??"N/A_CONF";return Js[o].map(h=>{var d,p,u,g,f,_;return h.replace("{currentTheme}",t.theme||"N/A").replace("{lensPower}",t.lensPower!==void 0?Math.round(t.lensPower*100):"N/A").replace("{dialAHue}",((d=t.dialA)==null?void 0:d.hue)!==void 0?Math.round(t.dialA.hue):String(Math.round(c))).replace("{dialBHue}",((p=t.dialB)==null?void 0:p.hue)!==void 0?Math.round(t.dialB.hue):"N/A").replace("{envHue}",((u=t.envHue)==null?void 0:u.hue)!==void 0?Math.round(t.envHue.hue):"N/A").replace("{lcdHue}",((g=t.lcdHue)==null?void 0:g.hue)!==void 0?Math.round(t.lcdHue.hue):"N/A").replace("{logoHue}",((f=t.logoHue)==null?void 0:f.hue)!==void 0?Math.round(t.logoHue.hue):"N/A").replace("{btnHue}",((_=t.btnHue)==null?void 0:_.hue)!==void 0?Math.round(t.btnHue.hue):"N/A")})}return Js[o]}return[`Unknown block message key: ${o||n}`];case"status":const l=Ea[o]||Ea[n];if(l){const c=typeof l=="function"?l(s):l;return Array.isArray(c)?c:[c]}return[`Status update from ${n||o}: ${s?JSON.stringify(s):"No data"}`];default:return[`Unknown message type: ${i} from ${n}`]}}class Mp{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._cursorElement=null,this._initialMessageFlickered=!1,this.debug=!1}init(){const t=O.get("domElements");this._terminalContainerElement=t.terminalContainer,this._terminalContentElement=t.terminalLcdContentElement,this._appState=O.get("appState"),this._configModule=O.get("config"),this._gsap=O.get("gsap"),this._setupDOM(),this._appState.subscribe("requestTerminalMessage",e=>this._handleRequestTerminalMessage(e)),this.debug&&console.log("[TerminalManager INIT]")}reset(){this._messageQueue=[],this._isTyping=!1,this._initialMessageFlickered=!1,this._terminalContentElement&&(this._terminalContentElement.innerHTML=""),this._cursorElement&&this._cursorElement.parentNode&&this._cursorElement.parentNode.removeChild(this._cursorElement)}_setupDOM(){this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this._cursorElement.textContent="▋",this._cursorElement.style.visibility="hidden",this.reset()}_handleRequestTerminalMessage(t){if(!t)return;let e={};t.messageKey==="BTN4_MESSAGE"&&(e={theme:this._appState.getCurrentTheme(),lensPower:this._appState.getTrueLensPower(),dialA:this._appState.getDialState("A"),dialB:this._appState.getDialState("B"),envHue:this._appState.getTargetColorProperties("env"),lcdHue:this._appState.getTargetColorProperties("lcd"),logoHue:this._appState.getTargetColorProperties("logo"),btnHue:this._appState.getTargetColorProperties("btn")});const i=xp(t,e,this._configModule);this._messageQueue.push({...t,content:i}),this._isTyping||this._processQueue()}async _processQueue(){if(this._messageQueue.length===0){this._isTyping=!1;return}this._isTyping=!0;const t=this._messageQueue.shift();this._gsap.getProperty(this._terminalContentElement,"opacity")<1&&this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"});const e=Math.random()*(this._configModule.TERMINAL_NEW_LINE_DELAY_MAX_MS-this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS)+this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS;await new Promise(i=>setTimeout(i,e));for(let i=0;i<t.content.length;i++){const n=t.content[i];if(this._addNewLineAndPrepareForTyping(),t.source==="EMERGENCY_SUBSYSTEMS"&&!this._initialMessageFlickered){this._currentLineElement.appendChild(this._cursorElement),this._showCursor();const s=So(this._currentLineElement,"textFlickerToDimlyLit",{gsapInstance:this._gsap});if(s.timeline){const o={duration:n.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3,text:{value:n,delimiter:""},ease:"none",onUpdate:()=>this._currentLineElement.appendChild(this._cursorElement),onComplete:()=>this._currentLineElement.appendChild(this._cursorElement)};s.timeline.to(this._currentLineElement,o,s.timeline.duration()*.25),await new Promise(a=>s.timeline.eventCallback("onComplete",a).play())}this._initialMessageFlickered=!0}else this._showCursor(),await this._typeLine(n,t.type);i<t.content.length-1&&await new Promise(s=>setTimeout(s,this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS/2))}this._hideCursor(),this._isTyping=!1,this._processQueue()}_addNewLineAndPrepareForTyping(){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines()}_typeLine(t,e="status"){return new Promise(i=>{let n;switch(e){case"block":n=this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR;break;case"startup":n=this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;break;default:n=this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR;break}const s=t.length*n/1e3;this._currentLineElement.appendChild(this._cursorElement),this._gsap.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:t,delimiter:""},ease:"none",onUpdate:()=>this._currentLineElement.appendChild(this._cursorElement),onComplete:()=>{this._currentLineElement.appendChild(this._cursorElement),i()}})})}_scrollTerminal(){this._terminalContainerElement.scrollTop=this._terminalContainerElement.scrollHeight}_limitMaxLines(){for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM&&this._terminalContentElement.firstChild;)this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_showCursor(){this._cursorElement&&this._currentLineElement&&(this._currentLineElement.appendChild(this._cursorElement),this._cursorElement.style.visibility="visible")}_hideCursor(){this._cursorElement&&(this._cursorElement.style.visibility="hidden")}}const Sa=new Mp;class Rp{constructor(){this.fsmInterpreter=null,this.previousFsmSnapshotValue=null,this.debug=!0,this.LReductionProxy={value:.85},this.opacityFactorProxy={value:.15}}init(){this.debug&&console.log("[StartupSequenceManager INIT]");const t=O.get("config");this.LReductionProxy.value=t.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,O.register("proxies",{LReductionProxy:this.LReductionProxy,opacityFactorProxy:this.opacityFactorProxy})}start(t=!0){this._resetVisualsAndState(t),this.fsmInterpreter=hf(pp),this.fsmInterpreter.subscribe(e=>{const i=JSON.stringify(e.value);(e.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(e),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"START_SEQUENCE",isStepThroughMode:t})}playNextPhase(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"NEXT_STEP_REQUESTED"})}playAllRemaining(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"SET_AUTO_PLAY"})}resetSequence(){this.start(!0)}_resetVisualsAndState(t){this.fsmInterpreter&&(this.fsmInterpreter.stop(),this.fsmInterpreter=null),this.previousFsmSnapshotValue=null;const e=O.get("domElements"),i=O.get("gsap"),n=O.get("config"),s=O.get("appState");e.body.classList.contains("pre-boot")&&e.body.classList.remove("pre-boot"),i.killTweensOf([e.body,this.LReductionProxy,this.opacityFactorProxy]),this.LReductionProxy.value=n.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,e.root.style.setProperty("--startup-L-reduction-factor",this.LReductionProxy.value.toFixed(3)),e.root.style.setProperty("--startup-opacity-factor",this.opacityFactorProxy.value.toFixed(3)),e.root.style.setProperty("--startup-opacity-factor-boosted",Math.min(1,this.opacityFactorProxy.value*1.25).toFixed(3)),s.setAppStatus("starting-up"),s.setCurrentStartupPhaseNumber(-1),s.setTheme("dim"),s.setTrueLensPower(0),s.updateDialState("A",{hue:n.DEFAULT_DIAL_A_HUE,targetHue:n.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),s.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),O.get("buttonManager").setInitialDimStates(),O.get("lensManager").directUpdateLensVisuals(0),O.get("lcdUpdater").applyCurrentStateToAllLcds(),O.get("terminalManager").reset(),i.set(e.body,{opacity:t?1:0})}_performThemeTransitionCleanup(){O.get("domElements").body.classList.remove("is-transitioning-from-dim"),document.querySelectorAll(".animate-on-dim-exit").forEach(e=>e.classList.remove("animate-on-dim-exit")),this.debug&&console.log("[SSM] Theme transition cleanup performed.")}_notifyFsmTransition(t){const e=O.get("appState"),i=O.get("debugManager"),n=this._getPhaseInfoFromSnapshot(t);e.emit("startup:phaseChanged",n),e.setCurrentStartupPhaseNumber(n.numericPhase);const s=t.matches("PAUSED")||t.matches("IDLE")||t.done;i.setNextPhaseButtonEnabled(s)}_getPhaseInfoFromSnapshot(t){const e=t.context.currentPhase,i=O.get("config").phaseConfigs,n=i&&e>=0&&e<i.length?i[e]:null;let s="N/A";t.matches("IDLE")?s="IDLE":t.matches("COMPLETE")?s="COMPLETE":t.matches("ERROR")?s="ERROR":n?s=n.name:typeof t.value=="string"?s=t.value:s=JSON.stringify(t.value);const o=i&&e+1<i.length?i[e+1]:null,a=t.nextEvents?t.nextEvents.join(", "):"N/A";return{numericPhase:e??-1,currentPhaseName:s,status:t.done?"completed":t.matches("PAUSED")?"paused":"running",description:`FSM State: ${JSON.stringify(t.value)}`,nextPhaseName:t.matches("PAUSED")&&o?o.name:a||"N/A",nextPhaseDescription:"N/A"}}}let _i=null,Bt={};function Cu(r){!Bt.statusDiv||!Bt.phaseInfoDiv||(Bt.statusDiv.textContent=`Phase: ${r.currentPhaseName} (${r.status})`,Bt.phaseInfoDiv.textContent=`Next: ${r.nextPhaseName||"None"}`)}function Fp(){_i&&_i.playNextPhase()}function Np(){_i&&_i.playAllRemaining()}function kp(){_i&&_i.resetSequence()}function Bp(r){Cu(r)}function Iu(r){Bt.nextPhaseButton&&(Bt.nextPhaseButton.disabled=!r)}function wu(r){_i=O.get("startupSequenceManager");const t=O.get("appState");Bt={statusDiv:r.debugStatusDiv,phaseInfoDiv:r.debugPhaseInfo,nextPhaseButton:r.nextPhaseButton,playAllButton:r.playAllButton,resetButton:r.resetButton},Bt.nextPhaseButton&&Bt.nextPhaseButton.addEventListener("click",Fp),Bt.playAllButton&&Bt.playAllButton.addEventListener("click",Np),Bt.resetButton&&Bt.resetButton.addEventListener("click",kp),t.subscribe("startup:phaseChanged",Bp),Cu({currentPhaseName:"Idle",status:"ready",nextPhaseName:"IDLE_BASELINE"}),Iu(!0)}const Up=Object.freeze(Object.defineProperty({__proto__:null,init:wu,setNextPhaseButtonEnabled:Iu},Symbol.toStringTag,{value:"Module"}));Mi.registerPlugin(Fn,ao,kn);const Te={root:document.documentElement,body:document.body,allButtons:Array.from(document.querySelectorAll(".button-unit")),dialA:document.getElementById("dial-canvas-container-A"),dialB:document.getElementById("dial-canvas-container-B"),lcdA:document.getElementById("hue-lcd-A"),lcdB:document.getElementById("hue-lcd-B"),terminalContainer:document.querySelector(".terminal-block .actual-lcd-screen-element"),terminalLcdContentElement:document.getElementById("terminal-lcd-content"),colorLensGradient:document.getElementById("color-lens-gradient"),lensSuperGlow:document.getElementById("lens-super-glow"),logoContainer:document.getElementById("logo-container"),hueAssignmentColumns:Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]")),mainPowerOnBtn:document.getElementById("main-power-on-btn"),auxLightLowBtn:document.getElementById("aux-light-low-btn"),debugControls:document.getElementById("debug-controls"),btnNextPhase:document.getElementById("btn-next-phase"),btnPlayAll:document.getElementById("btn-play-all"),btnResetStartup:document.getElementById("btn-reset-startup-debug"),debugPhaseStatus:document.getElementById("debug-phase-status"),debugPhaseInfo:document.getElementById("debug-phase-info")};function Hp(r){Te.hueAssignmentColumns.forEach(t=>{const e=t.dataset.assignmentTarget,i=t.querySelector(".control-group-label.label-top");t.innerHTML="",i&&t.appendChild(i);for(let n=0;n<12;n++){const s=document.createElement("div");s.className="button-unit button-unit--toggle button-unit--s",s.dataset.toggleValue=n.toString(),s.setAttribute("role","radio"),s.setAttribute("aria-label",`Assign ${e.toUpperCase()} to Hue from Row ${n+1}`),s.innerHTML='<div class="light-container" aria-hidden="true"><div class="light"></div></div><div class="button-bg-frame"></div>',t.appendChild(s),r.addButton(s,e)}})}function Gp(){nu("buttonInteracted",({button:r})=>{const t=r.getGroupId(),e=r.getValue();if(t==="light"){const i=e==="on"?"light":"dark";Zl()!==i&&tu(i)}else if(t==="system-power")e==="off"?kr.handlePowerOffClick():e==="on"&&Jl()>0&&iu(0);else if(["env","lcd","logo","btn"].includes(t)){const i=It[parseInt(e,10)];Ql(t,i)}else if(t==="skill-scan-group"||t==="fit-eval-group"){const n={"Scan Button 1":"BTN1_MESSAGE","Scan Button 2":"BTN2_MESSAGE","Scan Button 3":"BTN3_MESSAGE","Scan Button 4":"BTN4_MESSAGE"}[r.getElement().ariaLabel];n&&le("requestTerminalMessage",{type:"block",messageKey:n})}}),document.body.addEventListener("click",r=>{const t=r.target.closest(".button-unit");t&&O.get("buttonManager").handleInteraction(t)})}function Vp(){if(window.HUE9000_INITIALIZED)return;window.HUE9000_INITIALIZED=!0,console.log("[Main INIT] HUE 9000 Project Decouple Initializing..."),eu("loading");const r=new Ap,t=new Ip,e=new wp,i=new Ep,n=new yp,s=new Tp,o=new vp,a=new bp(Te.lcdA),l=new Lp,c=new Rp;O.register("gsap",Mi),O.register("appState",Xd),O.register("config",{...Rd,phaseConfigs:Nr}),O.register("domElements",Te),O.register("themeManager",r),O.register("lcdUpdater",t),O.register("dynamicStyleManager",e),O.register("buttonManager",i),O.register("dialManager",n),O.register("lensManager",s),O.register("ambientAnimationManager",o),O.register("moodMatrixDisplayManager",a),O.register("terminalManager",Sa),O.register("resistiveShutdownController",kr),O.register("phaseRunner",l),O.register("startupSequenceManager",c),O.register("debugManager",Up),c.init(),[r,t,e,i,n,s,o,a,Sa,kr,l].forEach(d=>d.init()),wu({debugStatusDiv:Te.debugPhaseStatus,debugPhaseInfo:Te.debugPhaseInfo,nextPhaseButton:Te.btnNextPhase,playAllButton:Te.btnPlayAll,resetButton:Te.btnResetStartup}),Hp(i),i.discoverButtons(Te.allButtons),Gp(),c.start(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",Vp);
