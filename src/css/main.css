/* src/css/main.css - Main CSS Import Hub */

/*
 * IMPORT ORDER:
 * 1. Base:      Foundational styles, variable contracts, utilities, and keyframes.
 * 2. Themes:    Variable overrides for different visual themes (dark, light, etc.).
 * 3. Components: Styles for individual UI components, which consume the variables.
 *
 * This order ensures the CSS cascade works as intended: components are styled
 * using the final variable values defined by the active theme.
 */

/* --- 1: Base --- */
/* Foundational styles, variables, and helpers */
@import url('./1-base/_variables-structural.css');
@import url('./1-base/_variables-theme-contract.css');
@import url('./1-base/_layout.css');
@import url('./1-base/_typography.css');
@import url('./1-base/_effects.css');
@import url('./1-base/_startup-transition.css');
@import url('./1-base/_utilities.css');


/* --- 3: Themes --- */
/* Theme-specific variable overrides. Imported after the contract, before components. */
@import url('./3-themes/theme-dim.css');
@import url('./3-themes/theme-dark.css');
@import url('./3-themes/theme-light.css');


/* --- 2: Components --- */
/* Styles for individual UI components */
@import url('./2-components/_preloader.css'); /* ADDED */
@import url('./2-components/_side-panels.css'); /* ADDED */
@import url('./2-components/_panel-bezel.css');
@import url('./2-components/_button-unit.css');
@import url('./2-components/_dial.css');
@import url('./2-components/_lcd.css');
@import url('./2-components/_logo.css');
@import url('./2-components/_lens-container.css');
@import url('./2-components/_lens-core.css');
@import url('./2-components/_lens-outer-glow.css');
@import url('./2-components/_lens-super-glow.css');
@import url('./2-components/_color-chips.css');
@import url('./2-components/_grill.css');
@import url('./2-components/_terminal.css');
@import url('./2-components/_v2-displays.css');


/* --- Base HTML/Body Styles --- */
/* Global styles applied to the root document elements */
html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;

    /* Background L values are modified by --startup-L-reduction-factor. Alphas are from theme. */
    background-color: oklch(calc(var(--body-bg-bottom-l) * (1 - var(--startup-L-reduction-factor, 0))) var(--body-bg-bottom-c) var(--body-bg-bottom-h) / var(--body-bg-bottom-a));
    /* Noise texture is applied via background-image with a multiply blend mode. */
    background-image:
        url('/public/noise.svg'), /* Noise texture overlay */
        linear-gradient(180deg,
            oklch(calc(var(--body-bg-top-l) * (1 - var(--startup-L-reduction-factor, 0))) var(--body-bg-top-c) var(--body-bg-top-h) / var(--body-bg-top-a)) 0%,
            oklch(calc(var(--body-bg-bottom-l) * (1 - var(--startup-L-reduction-factor, 0))) var(--body-bg-bottom-c) var(--body-bg-bottom-h) / var(--body-bg-bottom-a)) 100%
        );
    background-repeat: repeat, no-repeat; /* repeat for noise, no-repeat for gradient */
    background-size: 150px 150px, cover; /* size for noise, cover for gradient */
    background-position: 0 0, 0 0;
    background-blend-mode: multiply, normal; /* Multiply for noise, normal for gradient */


    color: oklch(var(--theme-text-primary-l) var(--theme-text-primary-c) var(--theme-text-primary-h) / var(--theme-text-primary-a));
    font-family: 'IBM Plex Mono', 'Inter', sans-serif;
    padding: var(--space-3xl);
    touch-action: none;
    /* FIX: Removed 'overflow: hidden' which was clipping the fixed-position side panels. */

    transition:
        color var(--transition-duration-medium) ease,
        background-color var(--transition-duration-medium) ease,
        background-image var(--transition-duration-medium) ease;
}

*, *:before, *:after {
    box-sizing: inherit;
}