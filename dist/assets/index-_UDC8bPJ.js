(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function wt(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function tl(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Xe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zi={duration:.5,overwrite:!1,delay:0},oo,Ie,ae,Dt=1e8,Oe=1/Dt,_s=Math.PI*2,ic=_s/4,nc=0,il=Math.sqrt,rc=Math.cos,sc=Math.sin,Te=function(e){return typeof e=="string"},de=function(e){return typeof e=="function"},xt=function(e){return typeof e=="number"},ao=function(e){return typeof e>"u"},yt=function(e){return typeof e=="object"},ke=function(e){return e!==!1},lo=function(){return typeof window<"u"},er=function(e){return de(e)||Te(e)},nl=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},xe=Array.isArray,gs=/(?:-?\.?\d|\.)+/gi,rl=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Fi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Xr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,sl=/[+-]=-?[.\d]+/,ol=/[^,'"\[\]\s]+/gi,oc=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,le,pt,ms,uo,qe={},Er={},al,ll=function(e){return(Er=Wi(e,qe))&&Ge},co=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},xn=function(e,t){return!t&&console.warn(e)},ul=function(e,t){return e&&(qe[e]=t)&&Er&&(Er[e]=t)||qe},Mn=function(){return 0},ac={suppressEvents:!0,isStart:!0,kill:!1},ar={suppressEvents:!0,kill:!1},lc={suppressEvents:!0},fo={},Wt=[],Ds={},cl,Ve={},qr={},Jo=30,lr=[],ho="",po=function(e){var t=e[0],i,n;if(yt(t)||de(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=lr.length;n--&&!lr[n].targetTest(t););i=lr[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Fl(e[n],i)))||e.splice(n,1);return e},fi=function(e){return e._gsap||po(rt(e))[0]._gsap},dl=function(e,t,i){return(i=e[t])&&de(i)?e[t]():ao(i)&&e.getAttribute&&e.getAttribute(t)||i},Be=function(e,t){return(e=e.split(",")).forEach(t)||e},pe=function(e){return Math.round(e*1e5)/1e5||0},De=function(e){return Math.round(e*1e7)/1e7||0},Bi=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},uc=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},Sr=function(){var e=Wt.length,t=Wt.slice(0),i,n;for(Ds={},Wt.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},_o=function(e){return!!(e._initted||e._startAt||e.add)},fl=function(e,t,i,n){Wt.length&&!Ie&&Sr(),e.render(t,i,!!(Ie&&t<0&&_o(e))),Wt.length&&!Ie&&Sr()},hl=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(ol).length<2?t:Te(e)?e.trim():e},pl=function(e){return e},je=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},cc=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},Wi=function(e,t){for(var i in t)e[i]=t[i];return e},ea=function s(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=yt(t[i])?s(e[i]||(e[i]={}),t[i]):t[i]);return e},Tr=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},Tn=function(e){var t=e.parent||le,i=e.keyframes?cc(xe(e.keyframes)):je;if(ke(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},dc=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},_l=function(e,t,i,n,r){var a=e[n],l;if(r)for(l=t[r];a&&a[r]>l;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=a,t.parent=t._dp=e,t},Fr=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var r=t._prev,a=t._next;r?r._next=a:e[i]===t&&(e[i]=a),a?a._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null},jt=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},hi=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},fc=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},ys=function(e,t,i,n){return e._startAt&&(Ie?e._startAt.revert(ar):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},hc=function s(e){return!e||e._ts&&s(e.parent)},ta=function(e){return e._repeat?Xi(e._tTime,e=e.duration()+e._rDelay)*e:0},Xi=function(e,t){var i=Math.floor(e=De(e/t));return e&&i===e?i-1:i},Ar=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Rr=function(e){return e._end=De(e._start+(e._tDur/Math.abs(e._ts||e._rts||Oe)||0))},Nr=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=De(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Rr(e),i._dirty||hi(i,e)),e},gl=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Ar(e.rawTime(),t),(!t._dur||Wn(0,t.totalDuration(),i)-t._tTime>Oe)&&t.render(i,!0)),hi(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},gt=function(e,t,i,n){return t.parent&&jt(t),t._start=De((xt(i)?i:i||e!==le?nt(e,i,t):e._time)+t._delay),t._end=De(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),_l(e,t,"_first","_last",e._sort?"_start":0),Es(t)||(e._recent=t),n||gl(e,t),e._ts<0&&Nr(e,e._tTime),e},ml=function(e,t){return(qe.ScrollTrigger||co("scrollTrigger",t))&&qe.ScrollTrigger.create(t,e)},Dl=function(e,t,i,n,r){if(mo(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!Ie&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&cl!==Ye.frame)return Wt.push(e),e._lazy=[r,n],1},pc=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},Es=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},_c=function(e,t,i,n){var r=e.ratio,a=t<0||!t&&(!e._start&&pc(e)&&!(!e._initted&&Es(e))||(e._ts<0||e._dp._ts<0)&&!Es(e))?0:1,l=e._rDelay,d=0,f,h,o;if(l&&e._repeat&&(d=Wn(0,e._tDur,t),h=Xi(d,l),e._yoyo&&h&1&&(a=1-a),h!==Xi(e._tTime,l)&&(r=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==r||Ie||n||e._zTime===Oe||!t&&e._zTime){if(!e._initted&&Dl(e,t,n,i,d))return;for(o=e._zTime,e._zTime=t||(i?Oe:0),i||(i=t&&!o),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=d,f=e._pt;f;)f.r(a,f.d),f=f._next;t<0&&ys(e,t,i,!0),e._onUpdate&&!i&&We(e,"onUpdate"),d&&e._repeat&&!i&&e.parent&&We(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&jt(e,1),!i&&!Ie&&(We(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},gc=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},qi=function(e,t,i,n){var r=e._repeat,a=De(t)||0,l=e._tTime/e._tDur;return l&&!n&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:De(a*(r+1)+e._rDelay*r):a,l>0&&!n&&Nr(e,e._tTime=e._tDur*l),e.parent&&Rr(e),i||hi(e.parent,e),e},ia=function(e){return e instanceof Me?hi(e):qi(e,e._dur)},mc={_start:0,endTime:Mn,totalDuration:Mn},nt=function s(e,t,i){var n=e.labels,r=e._recent||mc,a=e.duration()>=Dt?r.endTime(!1):e._dur,l,d,f;return Te(t)&&(isNaN(t)||t in n)?(d=t.charAt(0),f=t.substr(-1)==="%",l=t.indexOf("="),d==="<"||d===">"?(l>=0&&(t=t.replace(/=/,"")),(d==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(l<0?r:i).totalDuration()/100:1)):l<0?(t in n||(n[t]=a),n[t]):(d=parseFloat(t.charAt(l-1)+t.substr(l+1)),f&&i&&(d=d/100*(xe(i)?i[0]:i).totalDuration()),l>1?s(e,t.substr(0,l-1),i)+d:a+d)):t==null?a:+t},An=function(e,t,i){var n=xt(t[1]),r=(n?2:1)+(e<2?0:1),a=t[r],l,d;if(n&&(a.duration=t[1]),a.parent=i,e){for(l=a,d=i;d&&!("immediateRender"in l);)l=d.vars.defaults||{},d=ke(d.vars.inherit)&&d.parent;a.immediateRender=ke(l.immediateRender),e<2?a.runBackwards=1:a.startAt=t[r-1]}return new me(t[0],a,t[r+1])},Jt=function(e,t){return e||e===0?t(e):t},Wn=function(e,t,i){return i<e?e:i>t?t:i},Pe=function(e,t){return!Te(e)||!(t=oc.exec(e))?"":t[1]},Dc=function(e,t,i){return Jt(i,function(n){return Wn(e,t,n)})},Ss=[].slice,yl=function(e,t){return e&&yt(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&yt(e[0]))&&!e.nodeType&&e!==pt},yc=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var r;return Te(n)&&!t||yl(n,1)?(r=i).push.apply(r,rt(n)):i.push(n)})||i},rt=function(e,t,i){return ae&&!t&&ae.selector?ae.selector(e):Te(e)&&!i&&(ms||!ji())?Ss.call((t||uo).querySelectorAll(e),0):xe(e)?yc(e,i):yl(e)?Ss.call(e,0):e?[e]:[]},Ts=function(e){return e=rt(e)[0]||xn("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return rt(t,i.querySelectorAll?i:i===e?xn("Invalid scope")||uo.createElement("div"):e)}},El=function(e){return e.sort(function(){return .5-Math.random()})},Sl=function(e){if(de(e))return e;var t=yt(e)?e:{each:e},i=pi(t.ease),n=t.from||0,r=parseFloat(t.base)||0,a={},l=n>0&&n<1,d=isNaN(n)||l,f=t.axis,h=n,o=n;return Te(n)?h=o={center:.5,edges:.5,end:1}[n]||0:!l&&d&&(h=n[0],o=n[1]),function(c,u,_){var p=(_||t).length,g=a[p],m,D,S,A,T,C,v,w,E;if(!g){if(E=t.grid==="auto"?0:(t.grid||[1,Dt])[1],!E){for(v=-1e8;v<(v=_[E++].getBoundingClientRect().left)&&E<p;);E<p&&E--}for(g=a[p]=[],m=d?Math.min(E,p)*h-.5:n%E,D=E===Dt?0:d?p*o/E-.5:n/E|0,v=0,w=Dt,C=0;C<p;C++)S=C%E-m,A=D-(C/E|0),g[C]=T=f?Math.abs(f==="y"?A:S):il(S*S+A*A),T>v&&(v=T),T<w&&(w=T);n==="random"&&El(g),g.max=v-w,g.min=w,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(E>p?p-1:f?f==="y"?p/E:E:Math.max(E,p/E))||0)*(n==="edges"?-1:1),g.b=p<0?r-p:r,g.u=Pe(t.amount||t.each)||0,i=i&&p<0?Ol(i):i}return p=(g[c]-g.min)/g.max||0,De(g.b+(i?i(p):p)*g.v)+g.u}},As=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=De(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(xt(i)?0:Pe(i))}},Tl=function(e,t){var i=xe(e),n,r;return!i&&yt(e)&&(n=i=e.radius||Dt,e.values?(e=rt(e.values),(r=!xt(e[0]))&&(n*=n)):e=As(e.increment)),Jt(t,i?de(e)?function(a){return r=e(a),Math.abs(r-a)<=n?r:a}:function(a){for(var l=parseFloat(r?a.x:a),d=parseFloat(r?a.y:0),f=Dt,h=0,o=e.length,c,u;o--;)r?(c=e[o].x-l,u=e[o].y-d,c=c*c+u*u):c=Math.abs(e[o]-l),c<f&&(f=c,h=o);return h=!n||f<=n?e[h]:a,r||h===a||xt(a)?h:h+Pe(a)}:As(e))},Al=function(e,t,i,n){return Jt(xe(e)?!t:i===!0?!!(i=0):!n,function(){return xe(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},Ec=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(r,a){return a(r)},n)}},Sc=function(e,t){return function(i){return e(parseFloat(i))+(t||Pe(i))}},Tc=function(e,t,i){return Cl(e,t,0,1,i)},Ll=function(e,t,i){return Jt(i,function(n){return e[~~t(n)]})},Ac=function s(e,t,i){var n=t-e;return xe(e)?Ll(e,s(0,e.length),t):Jt(i,function(r){return(n+(r-e)%n)%n+e})},Lc=function s(e,t,i){var n=t-e,r=n*2;return xe(e)?Ll(e,s(0,e.length-1),t):Jt(i,function(a){return a=(r+(a-e)%r)%r||0,e+(a>n?r-a:a)})},Fn=function(e){for(var t=0,i="",n,r,a,l;~(n=e.indexOf("random(",t));)a=e.indexOf(")",n),l=e.charAt(n+7)==="[",r=e.substr(n+7,a-n-7).match(l?ol:gs),i+=e.substr(t,n-t)+Al(l?r:+r[0],l?0:+r[1],+r[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},Cl=function(e,t,i,n,r){var a=t-e,l=n-i;return Jt(r,function(d){return i+((d-e)/a*l||0)})},Cc=function s(e,t,i,n){var r=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!r){var a=Te(e),l={},d,f,h,o,c;if(i===!0&&(n=1)&&(i=null),a)e={p:e},t={p:t};else if(xe(e)&&!xe(t)){for(h=[],o=e.length,c=o-2,f=1;f<o;f++)h.push(s(e[f-1],e[f]));o--,r=function(_){_*=o;var p=Math.min(c,~~_);return h[p](_-p)},i=t}else n||(e=Wi(xe(e)?[]:{},e));if(!h){for(d in t)go.call(l,e,d,"get",t[d]);r=function(_){return Eo(_,l)||(a?e.p:e)}}}return Jt(i,r)},na=function(e,t,i){var n=e.labels,r=Dt,a,l,d;for(a in n)l=n[a]-t,l<0==!!i&&l&&r>(l=Math.abs(l))&&(d=a,r=l);return d},We=function(e,t,i){var n=e.vars,r=n[t],a=ae,l=e._ctx,d,f,h;if(r)return d=n[t+"Params"],f=n.callbackScope||e,i&&Wt.length&&Sr(),l&&(ae=l),h=d?r.apply(f,d):r.call(f),ae=a,h},hn=function(e){return jt(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ie),e.progress()<1&&We(e,"onInterrupt"),e},Ri,vl=[],wl=function(e){if(e)if(e=!e.name&&e.default||e,lo()||e.headless){var t=e.name,i=de(e),n=t&&!i&&e.init?function(){this._props=[]}:e,r={init:Mn,render:Eo,add:go,kill:Gc,modifier:Hc,rawVars:0},a={targetTest:0,get:0,getSetter:yo,aliases:{},register:0};if(ji(),e!==n){if(Ve[t])return;je(n,je(Tr(e,r),a)),Wi(n.prototype,Wi(r,Tr(e,a))),Ve[n.prop=t]=n,e.targetTest&&(lr.push(n),fo[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ul(t,n),e.register&&e.register(Ge,n,Ue)}else vl.push(e)},re=255,pn={aqua:[0,re,re],lime:[0,re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,re],navy:[0,0,128],white:[re,re,re],olive:[128,128,0],yellow:[re,re,0],orange:[re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[re,0,0],pink:[re,192,203],cyan:[0,re,re],transparent:[re,re,re,0]},jr=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*re+.5|0},Il=function(e,t,i){var n=e?xt(e)?[e>>16,e>>8&re,e&re]:0:pn.black,r,a,l,d,f,h,o,c,u,_;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),pn[e])n=pn[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),a=e.charAt(2),l=e.charAt(3),e="#"+r+r+a+a+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&re,n&re,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&re,e&re]}else if(e.substr(0,3)==="hsl"){if(n=_=e.match(gs),!t)d=+n[0]%360/360,f=+n[1]/100,h=+n[2]/100,a=h<=.5?h*(f+1):h+f-h*f,r=h*2-a,n.length>3&&(n[3]*=1),n[0]=jr(d+1/3,r,a),n[1]=jr(d,r,a),n[2]=jr(d-1/3,r,a);else if(~e.indexOf("="))return n=e.match(rl),i&&n.length<4&&(n[3]=1),n}else n=e.match(gs)||pn.transparent;n=n.map(Number)}return t&&!_&&(r=n[0]/re,a=n[1]/re,l=n[2]/re,o=Math.max(r,a,l),c=Math.min(r,a,l),h=(o+c)/2,o===c?d=f=0:(u=o-c,f=h>.5?u/(2-o-c):u/(o+c),d=o===r?(a-l)/u+(a<l?6:0):o===a?(l-r)/u+2:(r-a)/u+4,d*=60),n[0]=~~(d+.5),n[1]=~~(f*100+.5),n[2]=~~(h*100+.5)),i&&n.length<4&&(n[3]=1),n},bl=function(e){var t=[],i=[],n=-1;return e.split(Xt).forEach(function(r){var a=r.match(Fi)||[];t.push.apply(t,a),i.push(n+=a.length+1)}),t.c=i,t},ra=function(e,t,i){var n="",r=(e+n).match(Xt),a=t?"hsla(":"rgba(",l=0,d,f,h,o;if(!r)return e;if(r=r.map(function(c){return(c=Il(c,t,1))&&a+(t?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"}),i&&(h=bl(e),d=i.c,d.join(n)!==h.c.join(n)))for(f=e.replace(Xt,"1").split(Fi),o=f.length-1;l<o;l++)n+=f[l]+(~d.indexOf(l)?r.shift()||a+"0,0,0,0)":(h.length?h:r.length?r:i).shift());if(!f)for(f=e.split(Xt),o=f.length-1;l<o;l++)n+=f[l]+r[l];return n+f[o]},Xt=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in pn)s+="|"+e+"\\b";return new RegExp(s+")","gi")}(),vc=/hsl[a]?\(/,Pl=function(e){var t=e.join(" "),i;if(Xt.lastIndex=0,Xt.test(t))return i=vc.test(t),e[1]=ra(e[1],i),e[0]=ra(e[0],i,bl(e[1])),!0},Rn,Ye=function(){var s=Date.now,e=500,t=33,i=s(),n=i,r=1e3/240,a=r,l=[],d,f,h,o,c,u,_=function p(g){var m=s()-n,D=g===!0,S,A,T,C;if((m>e||m<0)&&(i+=m-t),n+=m,T=n-i,S=T-a,(S>0||D)&&(C=++o.frame,c=T-o.time*1e3,o.time=T=T/1e3,a+=S+(S>=r?4:r-S),A=1),D||(d=f(p)),A)for(u=0;u<l.length;u++)l[u](T,c,C,g)};return o={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return c/(1e3/(g||60))},wake:function(){al&&(!ms&&lo()&&(pt=ms=window,uo=pt.document||{},qe.gsap=Ge,(pt.gsapVersions||(pt.gsapVersions=[])).push(Ge.version),ll(Er||pt.GreenSockGlobals||!pt.gsap&&pt||{}),vl.forEach(wl)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,d&&o.sleep(),f=h||function(g){return setTimeout(g,a-o.time*1e3+1|0)},Rn=1,_(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(d),Rn=0,f=Mn},lagSmoothing:function(g,m){e=g||1/0,t=Math.min(m||33,e)},fps:function(g){r=1e3/(g||240),a=o.time*1e3+r},add:function(g,m,D){var S=m?function(A,T,C,v){g(A,T,C,v),o.remove(S)}:g;return o.remove(g),l[D?"unshift":"push"](S),ji(),S},remove:function(g,m){~(m=l.indexOf(g))&&l.splice(m,1)&&u>=m&&u--},_listeners:l},o}(),ji=function(){return!Rn&&Ye.wake()},j={},wc=/^[\d.\-M][\d.\-,\s]/,Ic=/["']/g,bc=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],r=1,a=i.length,l,d,f;r<a;r++)d=i[r],l=r!==a-1?d.lastIndexOf(","):d.length,f=d.substr(0,l),t[n]=isNaN(f)?f.replace(Ic,"").trim():+f,n=d.substr(l+1).trim();return t},Pc=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},Oc=function(e){var t=(e+"").split("("),i=j[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[bc(t[1])]:Pc(e).split(",").map(hl)):j._CE&&wc.test(e)?j._CE("",e):i},Ol=function(e){return function(t){return 1-e(1-t)}},xl=function s(e,t){for(var i=e._first,n;i;)i instanceof Me?s(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?s(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},pi=function(e,t){return e&&(de(e)?e:j[e]||Oc(e))||t},Li=function(e,t,i,n){i===void 0&&(i=function(d){return 1-t(1-d)}),n===void 0&&(n=function(d){return d<.5?t(d*2)/2:1-t((1-d)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:n},a;return Be(e,function(l){j[l]=qe[l]=r,j[a=l.toLowerCase()]=i;for(var d in r)j[a+(d==="easeIn"?".in":d==="easeOut"?".out":".inOut")]=j[l+"."+d]=r[d]}),r},Ml=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Kr=function s(e,t,i){var n=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),a=r/_s*(Math.asin(1/n)||0),l=function(h){return h===1?1:n*Math.pow(2,-10*h)*sc((h-a)*r)+1},d=e==="out"?l:e==="in"?function(f){return 1-l(1-f)}:Ml(l);return r=_s/r,d.config=function(f,h){return s(e,f,h)},d},Zr=function s(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},n=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Ml(i);return n.config=function(r){return s(e,r)},n};Be("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;Li(s+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});j.Linear.easeNone=j.none=j.Linear.easeIn;Li("Elastic",Kr("in"),Kr("out"),Kr());(function(s,e){var t=1/e,i=2*t,n=2.5*t,r=function(l){return l<t?s*l*l:l<i?s*Math.pow(l-1.5/e,2)+.75:l<n?s*(l-=2.25/e)*l+.9375:s*Math.pow(l-2.625/e,2)+.984375};Li("Bounce",function(a){return 1-r(1-a)},r)})(7.5625,2.75);Li("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});Li("Circ",function(s){return-(il(1-s*s)-1)});Li("Sine",function(s){return s===1?1:-rc(s*ic)+1});Li("Back",Zr("in"),Zr("out"),Zr());j.SteppedEase=j.steps=qe.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),r=t?1:0,a=1-Oe;return function(l){return((n*Wn(0,a,l)|0)+r)*i}}};zi.ease=j["quad.out"];Be("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return ho+=s+","+s+"Params,"});var Fl=function(e,t){this.id=nc++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:dl,this.set=t?t.getSetter:yo},Nn=function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,qi(this,+t.duration,1,1),this.data=t.data,ae&&(this._ctx=ae,ae.data.push(this)),Rn||Ye.wake()}var e=s.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,qi(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(ji(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Nr(this,i),!r._dp||r.parent||gl(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&gt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Oe||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),fl(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+ta(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+ta(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,n):this._repeat?Xi(this._tTime,r)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Ar(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Wn(-Math.abs(this._delay),this.totalDuration(),r),n!==!1),Rr(this),fc(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ji(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Oe&&(this._tTime-=Oe)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&gt(n,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(ke(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ar(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=lc);var n=Ie;return Ie=i,_o(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ie=n,this},e.globalTime=function(i){for(var n=this,r=arguments.length?i:n.rawTime();n;)r=n._start+r/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,ia(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,ia(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(nt(this,i),ke(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,ke(n)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=n&&r<this.endTime(!0)-Oe)},e.eventCallback=function(i,n,r){var a=this.vars;return arguments.length>1?(n?(a[i]=n,r&&(a[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},e.then=function(i){var n=this;return new Promise(function(r){var a=de(i)?i:pl,l=function(){var f=n.then;n.then=null,de(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=f),r(a),n.then=f};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?l():n._prom=l})},e.kill=function(){hn(this)},s}();je(Nn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Me=function(s){tl(e,s);function e(i,n){var r;return i===void 0&&(i={}),r=s.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=ke(i.sortChildren),le&&gt(i.parent||le,wt(r),n),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&ml(wt(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(n,r,a){return An(0,arguments,this),this},t.from=function(n,r,a){return An(1,arguments,this),this},t.fromTo=function(n,r,a,l){return An(2,arguments,this),this},t.set=function(n,r,a){return r.duration=0,r.parent=this,Tn(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new me(n,r,nt(this,a),1),this},t.call=function(n,r,a){return gt(this,me.delayedCall(0,n,r),a)},t.staggerTo=function(n,r,a,l,d,f,h){return a.duration=r,a.stagger=a.stagger||l,a.onComplete=f,a.onCompleteParams=h,a.parent=this,new me(n,a,nt(this,d)),this},t.staggerFrom=function(n,r,a,l,d,f,h){return a.runBackwards=1,Tn(a).immediateRender=ke(a.immediateRender),this.staggerTo(n,r,a,l,d,f,h)},t.staggerFromTo=function(n,r,a,l,d,f,h,o){return l.startAt=a,Tn(l).immediateRender=ke(l.immediateRender),this.staggerTo(n,r,l,d,f,h,o)},t.render=function(n,r,a){var l=this._time,d=this._dirty?this.totalDuration():this._tDur,f=this._dur,h=n<=0?0:De(n),o=this._zTime<0!=n<0&&(this._initted||!f),c,u,_,p,g,m,D,S,A,T,C,v;if(this!==le&&h>d&&n>=0&&(h=d),h!==this._tTime||a||o){if(l!==this._time&&f&&(h+=this._time-l,n+=this._time-l),c=h,A=this._start,S=this._ts,m=!S,o&&(f||(l=this._zTime),(n||!r)&&(this._zTime=n)),this._repeat){if(C=this._yoyo,g=f+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,r,a);if(c=De(h%g),h===d?(p=this._repeat,c=f):(T=De(h/g),p=~~T,p&&p===T&&(c=f,p--),c>f&&(c=f)),T=Xi(this._tTime,g),!l&&this._tTime&&T!==p&&this._tTime-T*g-this._dur<=0&&(T=p),C&&p&1&&(c=f-c,v=1),p!==T&&!this._lock){var w=C&&T&1,E=w===(C&&p&1);if(p<T&&(w=!w),l=w?0:h%f?f:h,this._lock=1,this.render(l||(v?0:De(p*g)),r,!f)._lock=0,this._tTime=h,!r&&this.parent&&We(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),l&&l!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,d=this._tDur,E&&(this._lock=2,l=w?f:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;xl(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(D=gc(this,De(l),De(c)),D&&(h-=c-(c=D._start))),this._tTime=h,this._time=c,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,l=0),!l&&h&&!r&&!T&&(We(this,"onStart"),this._tTime!==h))return this;if(c>=l&&n>=0)for(u=this._first;u;){if(_=u._next,(u._act||c>=u._start)&&u._ts&&D!==u){if(u.parent!==this)return this.render(n,r,a);if(u.render(u._ts>0?(c-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(c-u._start)*u._ts,r,a),c!==this._time||!this._ts&&!m){D=0,_&&(h+=this._zTime=-1e-8);break}}u=_}else{u=this._last;for(var F=n<0?n:c;u;){if(_=u._prev,(u._act||F<=u._end)&&u._ts&&D!==u){if(u.parent!==this)return this.render(n,r,a);if(u.render(u._ts>0?(F-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(F-u._start)*u._ts,r,a||Ie&&_o(u)),c!==this._time||!this._ts&&!m){D=0,_&&(h+=this._zTime=F?-1e-8:Oe);break}}u=_}}if(D&&!r&&(this.pause(),D.render(c>=l?0:-1e-8)._zTime=c>=l?1:-1,this._ts))return this._start=A,Rr(this),this.render(n,r,a);this._onUpdate&&!r&&We(this,"onUpdate",!0),(h===d&&this._tTime>=this.totalDuration()||!h&&l)&&(A===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((n||!f)&&(h===d&&this._ts>0||!h&&this._ts<0)&&jt(this,1),!r&&!(n<0&&!l)&&(h||l||!d)&&(We(this,h===d&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<d&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,r){var a=this;if(xt(r)||(r=nt(this,r,n)),!(n instanceof Nn)){if(xe(n))return n.forEach(function(l){return a.add(l,r)}),this;if(Te(n))return this.addLabel(n,r);if(de(n))n=me.delayedCall(0,n);else return this}return this!==n?gt(this,n,r):this},t.getChildren=function(n,r,a,l){n===void 0&&(n=!0),r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=-1e8);for(var d=[],f=this._first;f;)f._start>=l&&(f instanceof me?r&&d.push(f):(a&&d.push(f),n&&d.push.apply(d,f.getChildren(!0,r,a)))),f=f._next;return d},t.getById=function(n){for(var r=this.getChildren(1,1,1),a=r.length;a--;)if(r[a].vars.id===n)return r[a]},t.remove=function(n){return Te(n)?this.removeLabel(n):de(n)?this.killTweensOf(n):(n.parent===this&&Fr(this,n),n===this._recent&&(this._recent=this._last),hi(this))},t.totalTime=function(n,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=De(Ye.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),s.prototype.totalTime.call(this,n,r),this._forcing=0,this):this._tTime},t.addLabel=function(n,r){return this.labels[n]=nt(this,r),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,r,a){var l=me.delayedCall(0,r||Mn,a);return l.data="isPause",this._hasPause=1,gt(this,l,nt(this,n))},t.removePause=function(n){var r=this._first;for(n=nt(this,n);r;)r._start===n&&r.data==="isPause"&&jt(r),r=r._next},t.killTweensOf=function(n,r,a){for(var l=this.getTweensOf(n,a),d=l.length;d--;)Gt!==l[d]&&l[d].kill(n,r);return this},t.getTweensOf=function(n,r){for(var a=[],l=rt(n),d=this._first,f=xt(r),h;d;)d instanceof me?uc(d._targets,l)&&(f?(!Gt||d._initted&&d._ts)&&d.globalTime(0)<=r&&d.globalTime(d.totalDuration())>r:!r||d.isActive())&&a.push(d):(h=d.getTweensOf(l,r)).length&&a.push.apply(a,h),d=d._next;return a},t.tweenTo=function(n,r){r=r||{};var a=this,l=nt(a,n),d=r,f=d.startAt,h=d.onStart,o=d.onStartParams,c=d.immediateRender,u,_=me.to(a,je({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:r.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale())||Oe,onStart:function(){if(a.pause(),!u){var g=r.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale());_._dur!==g&&qi(_,g,0,1).render(_._time,!0,!0),u=1}h&&h.apply(_,o||[])}},r));return c?_.render(0):_},t.tweenFromTo=function(n,r,a){return this.tweenTo(r,je({startAt:{time:nt(this,n)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),na(this,nt(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),na(this,nt(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Oe)},t.shiftChildren=function(n,r,a){a===void 0&&(a=0);for(var l=this._first,d=this.labels,f;l;)l._start>=a&&(l._start+=n,l._end+=n),l=l._next;if(r)for(f in d)d[f]>=a&&(d[f]+=n);return hi(this)},t.invalidate=function(n){var r=this._first;for(this._lock=0;r;)r.invalidate(n),r=r._next;return s.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var r=this._first,a;r;)a=r._next,this.remove(r),r=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),hi(this)},t.totalDuration=function(n){var r=0,a=this,l=a._last,d=Dt,f,h,o;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(o=a.parent;l;)f=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>d&&a._sort&&l._ts&&!a._lock?(a._lock=1,gt(a,l,h-l._delay,1)._lock=0):d=h,h<0&&l._ts&&(r-=h,(!o&&!a._dp||o&&o.smoothChildTiming)&&(a._start+=h/a._ts,a._time-=h,a._tTime-=h),a.shiftChildren(-h,!1,-1/0),d=0),l._end>r&&l._ts&&(r=l._end),l=f;qi(a,a===le&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(n){if(le._ts&&(fl(le,Ar(n,le)),cl=Ye.frame),Ye.frame>=Jo){Jo+=Xe.autoSleep||120;var r=le._first;if((!r||!r._ts)&&Xe.autoSleep&&Ye._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Ye.sleep()}}},e}(Nn);je(Me.prototype,{_lock:0,_hasPause:0,_forcing:0});var xc=function(e,t,i,n,r,a,l){var d=new Ue(this._pt,e,t,0,1,Hl,null,r),f=0,h=0,o,c,u,_,p,g,m,D;for(d.b=i,d.e=n,i+="",n+="",(m=~n.indexOf("random("))&&(n=Fn(n)),a&&(D=[i,n],a(D,e,t),i=D[0],n=D[1]),c=i.match(Xr)||[];o=Xr.exec(n);)_=o[0],p=n.substring(f,o.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),_!==c[h++]&&(g=parseFloat(c[h-1])||0,d._pt={_next:d._pt,p:p||h===1?p:",",s:g,c:_.charAt(1)==="="?Bi(g,_)-g:parseFloat(_)-g,m:u&&u<4?Math.round:0},f=Xr.lastIndex);return d.c=f<n.length?n.substring(f,n.length):"",d.fp=l,(sl.test(n)||m)&&(d.e=0),this._pt=d,d},go=function(e,t,i,n,r,a,l,d,f,h){de(n)&&(n=n(r||0,e,a));var o=e[t],c=i!=="get"?i:de(o)?f?e[t.indexOf("set")||!de(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():o,u=de(o)?f?kc:Bl:Do,_;if(Te(n)&&(~n.indexOf("random(")&&(n=Fn(n)),n.charAt(1)==="="&&(_=Bi(c,n)+(Pe(c)||0),(_||_===0)&&(n=_))),!h||c!==n||Ls)return!isNaN(c*n)&&n!==""?(_=new Ue(this._pt,e,t,+c||0,n-(c||0),typeof o=="boolean"?Uc:Ul,0,u),f&&(_.fp=f),l&&_.modifier(l,this,e),this._pt=_):(!o&&!(t in e)&&co(t,n),xc.call(this,e,t,c,n,u,d||Xe.stringFilter,f))},Mc=function(e,t,i,n,r){if(de(e)&&(e=Ln(e,r,t,i,n)),!yt(e)||e.style&&e.nodeType||xe(e)||nl(e))return Te(e)?Ln(e,r,t,i,n):e;var a={},l;for(l in e)a[l]=Ln(e[l],r,t,i,n);return a},Rl=function(e,t,i,n,r,a){var l,d,f,h;if(Ve[e]&&(l=new Ve[e]).init(r,l.rawVars?t[e]:Mc(t[e],n,r,a,i),i,n,a)!==!1&&(i._pt=d=new Ue(i._pt,r,e,0,1,l.render,l,0,l.priority),i!==Ri))for(f=i._ptLookup[i._targets.indexOf(r)],h=l._props.length;h--;)f[l._props[h]]=d;return l},Gt,Ls,mo=function s(e,t,i){var n=e.vars,r=n.ease,a=n.startAt,l=n.immediateRender,d=n.lazy,f=n.onUpdate,h=n.runBackwards,o=n.yoyoEase,c=n.keyframes,u=n.autoRevert,_=e._dur,p=e._startAt,g=e._targets,m=e.parent,D=m&&m.data==="nested"?m.vars.targets:g,S=e._overwrite==="auto"&&!oo,A=e.timeline,T,C,v,w,E,F,x,U,I,H,W,N,G;if(A&&(!c||!r)&&(r="none"),e._ease=pi(r,zi.ease),e._yEase=o?Ol(pi(o===!0?r:o,zi.ease)):0,o&&e._yoyo&&!e._repeat&&(o=e._yEase,e._yEase=e._ease,e._ease=o),e._from=!A&&!!n.runBackwards,!A||c&&!n.stagger){if(U=g[0]?fi(g[0]).harness:0,N=U&&n[U.prop],T=Tr(n,fo),p&&(p._zTime<0&&p.progress(1),t<0&&h&&l&&!u?p.render(-1,!0):p.revert(h&&_?ar:ac),p._lazy=0),a){if(jt(e._startAt=me.set(g,je({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&ke(d),startAt:null,delay:0,onUpdate:f&&function(){return We(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ie||!l&&!u)&&e._startAt.revert(ar),l&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(h&&_&&!p){if(t&&(l=!1),v=je({overwrite:!1,data:"isFromStart",lazy:l&&!p&&ke(d),immediateRender:l,stagger:0,parent:m},T),N&&(v[U.prop]=N),jt(e._startAt=me.set(g,v)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Ie?e._startAt.revert(ar):e._startAt.render(-1,!0)),e._zTime=t,!l)s(e._startAt,Oe,Oe);else if(!t)return}for(e._pt=e._ptCache=0,d=_&&ke(d)||d&&!_,C=0;C<g.length;C++){if(E=g[C],x=E._gsap||po(g)[C]._gsap,e._ptLookup[C]=H={},Ds[x.id]&&Wt.length&&Sr(),W=D===g?C:D.indexOf(E),U&&(I=new U).init(E,N||T,e,W,D)!==!1&&(e._pt=w=new Ue(e._pt,E,I.name,0,1,I.render,I,0,I.priority),I._props.forEach(function(te){H[te]=w}),I.priority&&(F=1)),!U||N)for(v in T)Ve[v]&&(I=Rl(v,T,e,W,E,D))?I.priority&&(F=1):H[v]=w=go.call(e,E,v,"get",T[v],W,D,0,n.stringFilter);e._op&&e._op[C]&&e.kill(E,e._op[C]),S&&e._pt&&(Gt=e,le.killTweensOf(E,H,e.globalTime(t)),G=!e.parent,Gt=0),e._pt&&d&&(Ds[x.id]=1)}F&&Gl(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!G,c&&t<=0&&A.render(Dt,!0,!0)},Fc=function(e,t,i,n,r,a,l,d){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,o,c,u;if(!f)for(f=e._ptCache[t]=[],c=e._ptLookup,u=e._targets.length;u--;){if(h=c[u][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return Ls=1,e.vars[t]="+=0",mo(e,l),Ls=0,d?xn(t+" not eligible for reset"):1;f.push(h)}for(u=f.length;u--;)o=f[u],h=o._pt||o,h.s=(n||n===0)&&!r?n:h.s+(n||0)+a*h.c,h.c=i-h.s,o.e&&(o.e=pe(i)+Pe(o.e)),o.b&&(o.b=h.s+Pe(o.b))},Rc=function(e,t){var i=e[0]?fi(e[0]).harness:0,n=i&&i.aliases,r,a,l,d;if(!n)return t;r=Wi({},t);for(a in n)if(a in r)for(d=n[a].split(","),l=d.length;l--;)r[d[l]]=r[a];return r},Nc=function(e,t,i,n){var r=t.ease||n||"power1.inOut",a,l;if(xe(t))l=i[e]||(i[e]=[]),t.forEach(function(d,f){return l.push({t:f/(t.length-1)*100,v:d,e:r})});else for(a in t)l=i[a]||(i[a]=[]),a==="ease"||l.push({t:parseFloat(e),v:t[a],e:r})},Ln=function(e,t,i,n,r){return de(e)?e.call(t,i,n,r):Te(e)&&~e.indexOf("random(")?Fn(e):e},Nl=ho+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",kl={};Be(Nl+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return kl[s]=1});var me=function(s){tl(e,s);function e(i,n,r,a){var l;typeof n=="number"&&(r.duration=n,n=r,r=null),l=s.call(this,a?n:Tn(n))||this;var d=l.vars,f=d.duration,h=d.delay,o=d.immediateRender,c=d.stagger,u=d.overwrite,_=d.keyframes,p=d.defaults,g=d.scrollTrigger,m=d.yoyoEase,D=n.parent||le,S=(xe(i)||nl(i)?xt(i[0]):"length"in n)?[i]:rt(i),A,T,C,v,w,E,F,x;if(l._targets=S.length?po(S):xn("GSAP target "+i+" not found. https://gsap.com",!Xe.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=u,_||c||er(f)||er(h)){if(n=l.vars,A=l.timeline=new Me({data:"nested",defaults:p||{},targets:D&&D.data==="nested"?D.vars.targets:S}),A.kill(),A.parent=A._dp=wt(l),A._start=0,c||er(f)||er(h)){if(v=S.length,F=c&&Sl(c),yt(c))for(w in c)~Nl.indexOf(w)&&(x||(x={}),x[w]=c[w]);for(T=0;T<v;T++)C=Tr(n,kl),C.stagger=0,m&&(C.yoyoEase=m),x&&Wi(C,x),E=S[T],C.duration=+Ln(f,wt(l),T,E,S),C.delay=(+Ln(h,wt(l),T,E,S)||0)-l._delay,!c&&v===1&&C.delay&&(l._delay=h=C.delay,l._start+=h,C.delay=0),A.to(E,C,F?F(T,E,S):0),A._ease=j.none;A.duration()?f=h=0:l.timeline=0}else if(_){Tn(je(A.vars.defaults,{ease:"none"})),A._ease=pi(_.ease||n.ease||"none");var U=0,I,H,W;if(xe(_))_.forEach(function(N){return A.to(S,N,">")}),A.duration();else{C={};for(w in _)w==="ease"||w==="easeEach"||Nc(w,_[w],C,_.easeEach);for(w in C)for(I=C[w].sort(function(N,G){return N.t-G.t}),U=0,T=0;T<I.length;T++)H=I[T],W={ease:H.e,duration:(H.t-(T?I[T-1].t:0))/100*f},W[w]=H.v,A.to(S,W,U),U+=W.duration;A.duration()<f&&A.to({},{duration:f-A.duration()})}}f||l.duration(f=A.duration())}else l.timeline=0;return u===!0&&!oo&&(Gt=wt(l),le.killTweensOf(S),Gt=0),gt(D,wt(l),r),n.reversed&&l.reverse(),n.paused&&l.paused(!0),(o||!f&&!_&&l._start===De(D._time)&&ke(o)&&hc(wt(l))&&D.data!=="nested")&&(l._tTime=-1e-8,l.render(Math.max(0,-h)||0)),g&&ml(wt(l),g),l}var t=e.prototype;return t.render=function(n,r,a){var l=this._time,d=this._tDur,f=this._dur,h=n<0,o=n>d-Oe&&!h?d:n<Oe?0:n,c,u,_,p,g,m,D,S,A;if(!f)_c(this,n,r,a);else if(o!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(c=o,S=this.timeline,this._repeat){if(p=f+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+n,r,a);if(c=De(o%p),o===d?(_=this._repeat,c=f):(g=De(o/p),_=~~g,_&&_===g?(c=f,_--):c>f&&(c=f)),m=this._yoyo&&_&1,m&&(A=this._yEase,c=f-c),g=Xi(this._tTime,p),c===l&&!a&&this._initted&&_===g)return this._tTime=o,this;_!==g&&(S&&this._yEase&&xl(S,m),this.vars.repeatRefresh&&!m&&!this._lock&&c!==p&&this._initted&&(this._lock=a=1,this.render(De(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(Dl(this,h?n:c,a,r,o))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&_!==g))return this;if(f!==this._dur)return this.render(n,r,a)}if(this._tTime=o,this._time=c,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=D=(A||this._ease)(c/f),this._from&&(this.ratio=D=1-D),!l&&o&&!r&&!g&&(We(this,"onStart"),this._tTime!==o))return this;for(u=this._pt;u;)u.r(D,u.d),u=u._next;S&&S.render(n<0?n:S._dur*S._ease(c/this._dur),r,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!r&&(h&&ys(this,n,r,a),We(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!r&&this.parent&&We(this,"onRepeat"),(o===this._tDur||!o)&&this._tTime===o&&(h&&!this._onUpdate&&ys(this,n,!0,!0),(n||!f)&&(o===this._tDur&&this._ts>0||!o&&this._ts<0)&&jt(this,1),!r&&!(h&&!l)&&(o||l||m)&&(We(this,o===d?"onComplete":"onReverseComplete",!0),this._prom&&!(o<d&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),s.prototype.invalidate.call(this,n)},t.resetTo=function(n,r,a,l,d){Rn||Ye.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||mo(this,f),h=this._ease(f/this._dur),Fc(this,n,r,a,l,h,f,d)?this.resetTo(n,r,a,l,1):(Nr(this,0),this.parent||_l(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,r){if(r===void 0&&(r="all"),!n&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?hn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ie),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,r,Gt&&Gt.vars.overwrite!==!0)._first||hn(this),this.parent&&a!==this.timeline.totalDuration()&&qi(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,d=n?rt(n):l,f=this._ptLookup,h=this._pt,o,c,u,_,p,g,m;if((!r||r==="all")&&dc(l,d))return r==="all"&&(this._pt=0),hn(this);for(o=this._op=this._op||[],r!=="all"&&(Te(r)&&(p={},Be(r,function(D){return p[D]=1}),r=p),r=Rc(l,r)),m=l.length;m--;)if(~d.indexOf(l[m])){c=f[m],r==="all"?(o[m]=r,_=c,u={}):(u=o[m]=o[m]||{},_=r);for(p in _)g=c&&c[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&Fr(this,g,"_pt"),delete c[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&h&&hn(this),this},e.to=function(n,r){return new e(n,r,arguments[2])},e.from=function(n,r){return An(1,arguments)},e.delayedCall=function(n,r,a,l){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:r,onReverseComplete:r,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},e.fromTo=function(n,r,a){return An(2,arguments)},e.set=function(n,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(n,r)},e.killTweensOf=function(n,r,a){return le.killTweensOf(n,r,a)},e}(Nn);je(me.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Be("staggerTo,staggerFrom,staggerFromTo",function(s){me[s]=function(){var e=new Me,t=Ss.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var Do=function(e,t,i){return e[t]=i},Bl=function(e,t,i){return e[t](i)},kc=function(e,t,i,n){return e[t](n.fp,i)},Bc=function(e,t,i){return e.setAttribute(t,i)},yo=function(e,t){return de(e[t])?Bl:ao(e[t])&&e.setAttribute?Bc:Do},Ul=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Uc=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Hl=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Eo=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Hc=function(e,t,i,n){for(var r=this._pt,a;r;)a=r._next,r.p===n&&r.modifier(e,t,i),r=a},Gc=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?Fr(this,t,"_pt"):t.dep||(i=1),t=n;return!i},$c=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},Gl=function(e){for(var t=e._pt,i,n,r,a;t;){for(i=t._next,n=r;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:a)?t._prev._next=t:r=t,(t._next=n)?n._prev=t:a=t,t=i}e._pt=r},Ue=function(){function s(t,i,n,r,a,l,d,f,h){this.t=i,this.s=r,this.c=a,this.p=n,this.r=l||Ul,this.d=d||this,this.set=f||Do,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(i,n,r){this.mSet=this.mSet||this.set,this.set=$c,this.m=i,this.mt=r,this.tween=n},s}();Be(ho+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return fo[s]=1});qe.TweenMax=qe.TweenLite=me;qe.TimelineLite=qe.TimelineMax=Me;le=new Me({sortChildren:!1,defaults:zi,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Xe.stringFilter=Pl;var _i=[],ur={},Vc=[],sa=0,Yc=0,Qr=function(e){return(ur[e]||Vc).map(function(t){return t()})},Cs=function(){var e=Date.now(),t=[];e-sa>2&&(Qr("matchMediaInit"),_i.forEach(function(i){var n=i.queries,r=i.conditions,a,l,d,f;for(l in n)a=pt.matchMedia(n[l]).matches,a&&(d=1),a!==r[l]&&(r[l]=a,f=1);f&&(i.revert(),d&&t.push(i))}),Qr("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),sa=e,Qr("matchMedia"))},$l=function(){function s(t,i){this.selector=i&&Ts(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Yc++,t&&this.add(t)}var e=s.prototype;return e.add=function(i,n,r){de(i)&&(r=n,n=i,i=de);var a=this,l=function(){var f=ae,h=a.selector,o;return f&&f!==a&&f.data.push(a),r&&(a.selector=Ts(r)),ae=a,o=n.apply(a,arguments),de(o)&&a._r.push(o),ae=f,a.selector=h,a.isReverted=!1,o};return a.last=l,i===de?l(a,function(d){return a.add(null,d)}):i?a[i]=l:l},e.ignore=function(i){var n=ae;ae=null,i(this),ae=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof s?i.push.apply(i,n.getTweens()):n instanceof me&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var r=this;if(i?function(){for(var l=r.getTweens(),d=r.data.length,f;d--;)f=r.data[d],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,o){return o.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),d=r.data.length;d--;)f=r.data[d],f instanceof Me?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof me)&&f.revert&&f.revert(i);r._r.forEach(function(h){return h(i,r)}),r.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),n)for(var a=_i.length;a--;)_i[a].id===this.id&&_i.splice(a,1)},e.revert=function(i){this.kill(i||{})},s}(),zc=function(){function s(t){this.contexts=[],this.scope=t,ae&&ae.data.push(this)}var e=s.prototype;return e.add=function(i,n,r){yt(i)||(i={matches:i});var a=new $l(0,r||this.scope),l=a.conditions={},d,f,h;ae&&!a.selector&&(a.selector=ae.selector),this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(f in i)f==="all"?h=1:(d=pt.matchMedia(i[f]),d&&(_i.indexOf(a)<0&&_i.push(a),(l[f]=d.matches)&&(h=1),d.addListener?d.addListener(Cs):d.addEventListener("change",Cs)));return h&&n(a,function(o){return a.add(null,o)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},s}(),Lr={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return wl(n)})},timeline:function(e){return new Me(e)},getTweensOf:function(e,t){return le.getTweensOf(e,t)},getProperty:function(e,t,i,n){Te(e)&&(e=rt(e)[0]);var r=fi(e||{}).get,a=i?pl:hl;return i==="native"&&(i=""),e&&(t?a((Ve[t]&&Ve[t].get||r)(e,t,i,n)):function(l,d,f){return a((Ve[l]&&Ve[l].get||r)(e,l,d,f))})},quickSetter:function(e,t,i){if(e=rt(e),e.length>1){var n=e.map(function(h){return Ge.quickSetter(h,t,i)}),r=n.length;return function(h){for(var o=r;o--;)n[o](h)}}e=e[0]||{};var a=Ve[t],l=fi(e),d=l.harness&&(l.harness.aliases||{})[t]||t,f=a?function(h){var o=new a;Ri._pt=0,o.init(e,i?h+i:h,Ri,0,[e]),o.render(1,o),Ri._pt&&Eo(1,Ri)}:l.set(e,d);return a?f:function(h){return f(e,d,i?h+i:h,l,1)}},quickTo:function(e,t,i){var n,r=Ge.to(e,je((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),a=function(d,f,h){return r.resetTo(t,d,f,h)};return a.tween=r,a},isTweening:function(e){return le.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=pi(e.ease,zi.ease)),ea(zi,e||{})},config:function(e){return ea(Xe,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,r=e.defaults,a=e.extendTimeline;(n||"").split(",").forEach(function(l){return l&&!Ve[l]&&!qe[l]&&xn(t+" effect requires "+l+" plugin.")}),qr[t]=function(l,d,f){return i(rt(l),je(d||{},r),f)},a&&(Me.prototype[t]=function(l,d,f){return this.add(qr[t](l,yt(d)?d:(f=d)&&{},this),f)})},registerEase:function(e,t){j[e]=pi(t)},parseEase:function(e,t){return arguments.length?pi(e,t):j},getById:function(e){return le.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Me(e),n,r;for(i.smoothChildTiming=ke(e.smoothChildTiming),le.remove(i),i._dp=0,i._time=i._tTime=le._time,n=le._first;n;)r=n._next,(t||!(!n._dur&&n instanceof me&&n.vars.onComplete===n._targets[0]))&&gt(i,n,n._start-n._delay),n=r;return gt(le,i,0),i},context:function(e,t){return e?new $l(e,t):ae},matchMedia:function(e){return new zc(e)},matchMediaRefresh:function(){return _i.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||Cs()},addEventListener:function(e,t){var i=ur[e]||(ur[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=ur[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:Ac,wrapYoyo:Lc,distribute:Sl,random:Al,snap:Tl,normalize:Tc,getUnit:Pe,clamp:Dc,splitColor:Il,toArray:rt,selector:Ts,mapRange:Cl,pipe:Ec,unitize:Sc,interpolate:Cc,shuffle:El},install:ll,effects:qr,ticker:Ye,updateRoot:Me.updateRoot,plugins:Ve,globalTimeline:le,core:{PropTween:Ue,globals:ul,Tween:me,Timeline:Me,Animation:Nn,getCache:fi,_removeLinkedListItem:Fr,reverting:function(){return Ie},context:function(e){return e&&ae&&(ae.data.push(e),e._ctx=ae),ae},suppressOverwrites:function(e){return oo=e}}};Be("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Lr[s]=me[s]});Ye.add(Me.updateRoot);Ri=Lr.to({},{duration:0});var Wc=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Xc=function(e,t){var i=e._targets,n,r,a;for(n in t)for(r=i.length;r--;)a=e._ptLookup[r][n],a&&(a=a.d)&&(a._pt&&(a=Wc(a,n)),a&&a.modifier&&a.modifier(t[n],e,i[r],n))},Jr=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,r,a){a._onInit=function(l){var d,f;if(Te(r)&&(d={},Be(r,function(h){return d[h]=1}),r=d),t){d={};for(f in r)d[f]=t(r[f]);r=d}Xc(l,r)}}}},Ge=Lr.registerPlugin({name:"attr",init:function(e,t,i,n,r){var a,l,d;this.tween=i;for(a in t)d=e.getAttribute(a)||"",l=this.add(e,"setAttribute",(d||0)+"",t[a],n,r,0,0,a),l.op=a,l.b=d,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)Ie?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Jr("roundProps",As),Jr("modifiers"),Jr("snap",Tl))||Lr;me.version=Me.version=Ge.version="3.13.0";al=1;lo()&&ji();j.Power0;j.Power1;j.Power2;j.Power3;j.Power4;j.Linear;j.Quad;j.Cubic;j.Quart;j.Quint;j.Strong;j.Elastic;j.Back;j.SteppedEase;j.Bounce;j.Sine;j.Expo;j.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var oa,$t,Ui,So,ui,aa,To,qc=function(){return typeof window<"u"},Mt={},oi=180/Math.PI,Hi=Math.PI/180,Ci=Math.atan2,la=1e8,Ao=/([A-Z])/g,jc=/(left|right|width|margin|padding|x)/i,Kc=/[\s,\(]\S/,mt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},vs=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Zc=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Qc=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Jc=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Vl=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Yl=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},ed=function(e,t,i){return e.style[t]=i},td=function(e,t,i){return e.style.setProperty(t,i)},id=function(e,t,i){return e._gsap[t]=i},nd=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},rd=function(e,t,i,n,r){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(r,a)},sd=function(e,t,i,n,r){var a=e._gsap;a[t]=i,a.renderTransform(r,a)},ue="transform",He=ue+"Origin",od=function s(e,t){var i=this,n=this.target,r=n.style,a=n._gsap;if(e in Mt&&r){if(this.tfm=this.tfm||{},e!=="transform")e=mt[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return i.tfm[l]=It(n,l)}):this.tfm[e]=a.x?a[e]:It(n,e),e===He&&(this.tfm.zOrigin=a.zOrigin);else return mt.transform.split(",").forEach(function(l){return s.call(i,l,t)});if(this.props.indexOf(ue)>=0)return;a.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(He,t,"")),e=ue}(r||t)&&this.props.push(e,t,r[e])},zl=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},ad=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,r,a;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(Ao,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=To(),(!r||!r.isStart)&&!i[ue]&&(zl(i),n.zOrigin&&i[He]&&(i[He]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},Wl=function(e,t){var i={target:e,props:[],revert:ad,save:od};return e._gsap||Ge.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},Xl,ws=function(e,t){var i=$t.createElementNS?$t.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):$t.createElement(e);return i&&i.style?i:$t.createElement(e)},st=function s(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(Ao,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&s(e,Ki(t)||t,1)||""},ua="O,Moz,ms,Ms,Webkit".split(","),Ki=function(e,t,i){var n=t||ui,r=n.style,a=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(ua[a]+e in r););return a<0?null:(a===3?"ms":a>=0?ua[a]:"")+e},Is=function(){qc()&&window.document&&(oa=window,$t=oa.document,Ui=$t.documentElement,ui=ws("div")||{style:{}},ws("div"),ue=Ki(ue),He=ue+"Origin",ui.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Xl=!!Ki("perspective"),To=Ge.core.reverting,So=1)},ca=function(e){var t=e.ownerSVGElement,i=ws("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),r;n.style.display="block",i.appendChild(n),Ui.appendChild(i);try{r=n.getBBox()}catch{}return i.removeChild(n),Ui.removeChild(i),r},da=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},ql=function(e){var t,i;try{t=e.getBBox()}catch{t=ca(e),i=1}return t&&(t.width||t.height)||i||(t=ca(e)),t&&!t.width&&!t.x&&!t.y?{x:+da(e,["x","cx","x1"])||0,y:+da(e,["y","cy","y1"])||0,width:0,height:0}:t},jl=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ql(e))},Ei=function(e,t){if(t){var i=e.style,n;t in Mt&&t!==He&&(t=ue),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(Ao,"-$1").toLowerCase())):i.removeAttribute(t)}},Vt=function(e,t,i,n,r,a){var l=new Ue(e._pt,t,i,0,1,a?Yl:Vl);return e._pt=l,l.b=n,l.e=r,e._props.push(i),l},fa={deg:1,rad:1,turn:1},ld={grid:1,flex:1},Kt=function s(e,t,i,n){var r=parseFloat(i)||0,a=(i+"").trim().substr((r+"").length)||"px",l=ui.style,d=jc.test(t),f=e.tagName.toLowerCase()==="svg",h=(f?"client":"offset")+(d?"Width":"Height"),o=100,c=n==="px",u=n==="%",_,p,g,m;if(n===a||!r||fa[n]||fa[a])return r;if(a!=="px"&&!c&&(r=s(e,t,i,"px")),m=e.getCTM&&jl(e),(u||a==="%")&&(Mt[t]||~t.indexOf("adius")))return _=m?e.getBBox()[d?"width":"height"]:e[h],pe(u?r/_*o:r/100*_);if(l[d?"width":"height"]=o+(c?a:n),p=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!f?e:e.parentNode,m&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===$t||!p.appendChild)&&(p=$t.body),g=p._gsap,g&&u&&g.width&&d&&g.time===Ye.time&&!g.uncache)return pe(r/g.width*o);if(u&&(t==="height"||t==="width")){var D=e.style[t];e.style[t]=o+n,_=e[h],D?e.style[t]=D:Ei(e,t)}else(u||a==="%")&&!ld[st(p,"display")]&&(l.position=st(e,"position")),p===e&&(l.position="static"),p.appendChild(ui),_=ui[h],p.removeChild(ui),l.position="absolute";return d&&u&&(g=fi(p),g.time=Ye.time,g.width=p[h]),pe(c?_*r/o:_&&r?o/_*r:0)},It=function(e,t,i,n){var r;return So||Is(),t in mt&&t!=="transform"&&(t=mt[t],~t.indexOf(",")&&(t=t.split(",")[0])),Mt[t]&&t!=="transform"?(r=Bn(e,n),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:vr(st(e,He))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||n||~(r+"").indexOf("calc("))&&(r=Cr[t]&&Cr[t](e,t,i)||st(e,t)||dl(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?Kt(e,t,r,i)+i:r},ud=function(e,t,i,n){if(!i||i==="none"){var r=Ki(t,e,1),a=r&&st(e,r,1);a&&a!==i?(t=r,i=a):t==="borderColor"&&(i=st(e,"borderTopColor"))}var l=new Ue(this._pt,e.style,t,0,1,Hl),d=0,f=0,h,o,c,u,_,p,g,m,D,S,A,T;if(l.b=i,l.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=st(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=e.style[t],e.style[t]=n,n=st(e,t)||n,p?e.style[t]=p:Ei(e,t)),h=[i,n],Pl(h),i=h[0],n=h[1],c=i.match(Fi)||[],T=n.match(Fi)||[],T.length){for(;o=Fi.exec(n);)g=o[0],D=n.substring(d,o.index),_?_=(_+1)%5:(D.substr(-5)==="rgba("||D.substr(-5)==="hsla(")&&(_=1),g!==(p=c[f++]||"")&&(u=parseFloat(p)||0,A=p.substr((u+"").length),g.charAt(1)==="="&&(g=Bi(u,g)+A),m=parseFloat(g),S=g.substr((m+"").length),d=Fi.lastIndex-S.length,S||(S=S||Xe.units[t]||A,d===n.length&&(n+=S,l.e+=S)),A!==S&&(u=Kt(e,t,p,S)||0),l._pt={_next:l._pt,p:D||f===1?D:",",s:u,c:m-u,m:_&&_<4||t==="zIndex"?Math.round:0});l.c=d<n.length?n.substring(d,n.length):""}else l.r=t==="display"&&n==="none"?Yl:Vl;return sl.test(n)&&(l.e=0),this._pt=l,l},ha={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},cd=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=ha[i]||i,t[1]=ha[n]||n,t.join(" ")},dd=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,r=t.u,a=i._gsap,l,d,f;if(r==="all"||r===!0)n.cssText="",d=1;else for(r=r.split(","),f=r.length;--f>-1;)l=r[f],Mt[l]&&(d=1,l=l==="transformOrigin"?He:ue),Ei(i,l);d&&(Ei(i,ue),a&&(a.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",Bn(i,1),a.uncache=1,zl(n)))}},Cr={clearProps:function(e,t,i,n,r){if(r.data!=="isFromStart"){var a=e._pt=new Ue(e._pt,t,i,0,0,dd);return a.u=n,a.pr=-10,a.tween=r,e._props.push(i),1}}},kn=[1,0,0,1,0,0],Kl={},Zl=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},pa=function(e){var t=st(e,ue);return Zl(t)?kn:t.substr(7).match(rl).map(pe)},Lo=function(e,t){var i=e._gsap||fi(e),n=e.style,r=pa(e),a,l,d,f;return i.svg&&e.getAttribute("transform")?(d=e.transform.baseVal.consolidate().matrix,r=[d.a,d.b,d.c,d.d,d.e,d.f],r.join(",")==="1,0,0,1,0,0"?kn:r):(r===kn&&!e.offsetParent&&e!==Ui&&!i.svg&&(d=n.display,n.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,l=e.nextElementSibling,Ui.appendChild(e)),r=pa(e),d?n.display=d:Ei(e,"display"),f&&(l?a.insertBefore(e,l):a?a.appendChild(e):Ui.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},bs=function(e,t,i,n,r,a){var l=e._gsap,d=r||Lo(e,!0),f=l.xOrigin||0,h=l.yOrigin||0,o=l.xOffset||0,c=l.yOffset||0,u=d[0],_=d[1],p=d[2],g=d[3],m=d[4],D=d[5],S=t.split(" "),A=parseFloat(S[0])||0,T=parseFloat(S[1])||0,C,v,w,E;i?d!==kn&&(v=u*g-_*p)&&(w=A*(g/v)+T*(-p/v)+(p*D-g*m)/v,E=A*(-_/v)+T*(u/v)-(u*D-_*m)/v,A=w,T=E):(C=ql(e),A=C.x+(~S[0].indexOf("%")?A/100*C.width:A),T=C.y+(~(S[1]||S[0]).indexOf("%")?T/100*C.height:T)),n||n!==!1&&l.smooth?(m=A-f,D=T-h,l.xOffset=o+(m*u+D*p)-m,l.yOffset=c+(m*_+D*g)-D):l.xOffset=l.yOffset=0,l.xOrigin=A,l.yOrigin=T,l.smooth=!!n,l.origin=t,l.originIsAbsolute=!!i,e.style[He]="0px 0px",a&&(Vt(a,l,"xOrigin",f,A),Vt(a,l,"yOrigin",h,T),Vt(a,l,"xOffset",o,l.xOffset),Vt(a,l,"yOffset",c,l.yOffset)),e.setAttribute("data-svg-origin",A+" "+T)},Bn=function(e,t){var i=e._gsap||new Fl(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,r=i.scaleX<0,a="px",l="deg",d=getComputedStyle(e),f=st(e,He)||"0",h,o,c,u,_,p,g,m,D,S,A,T,C,v,w,E,F,x,U,I,H,W,N,G,te,Fe,Ke,X,K,J,Q,Ze;return h=o=c=p=g=m=D=S=A=0,u=_=1,i.svg=!!(e.getCTM&&jl(e)),d.translate&&((d.translate!=="none"||d.scale!=="none"||d.rotate!=="none")&&(n[ue]=(d.translate!=="none"?"translate3d("+(d.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(d.rotate!=="none"?"rotate("+d.rotate+") ":"")+(d.scale!=="none"?"scale("+d.scale.split(" ").join(",")+") ":"")+(d[ue]!=="none"?d[ue]:"")),n.scale=n.rotate=n.translate="none"),v=Lo(e,i.svg),i.svg&&(i.uncache?(te=e.getBBox(),f=i.xOrigin-te.x+"px "+(i.yOrigin-te.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),bs(e,G||f,!!G||i.originIsAbsolute,i.smooth!==!1,v)),T=i.xOrigin||0,C=i.yOrigin||0,v!==kn&&(x=v[0],U=v[1],I=v[2],H=v[3],h=W=v[4],o=N=v[5],v.length===6?(u=Math.sqrt(x*x+U*U),_=Math.sqrt(H*H+I*I),p=x||U?Ci(U,x)*oi:0,D=I||H?Ci(I,H)*oi+p:0,D&&(_*=Math.abs(Math.cos(D*Hi))),i.svg&&(h-=T-(T*x+C*I),o-=C-(T*U+C*H))):(Ze=v[6],J=v[7],Ke=v[8],X=v[9],K=v[10],Q=v[11],h=v[12],o=v[13],c=v[14],w=Ci(Ze,K),g=w*oi,w&&(E=Math.cos(-w),F=Math.sin(-w),G=W*E+Ke*F,te=N*E+X*F,Fe=Ze*E+K*F,Ke=W*-F+Ke*E,X=N*-F+X*E,K=Ze*-F+K*E,Q=J*-F+Q*E,W=G,N=te,Ze=Fe),w=Ci(-I,K),m=w*oi,w&&(E=Math.cos(-w),F=Math.sin(-w),G=x*E-Ke*F,te=U*E-X*F,Fe=I*E-K*F,Q=H*F+Q*E,x=G,U=te,I=Fe),w=Ci(U,x),p=w*oi,w&&(E=Math.cos(w),F=Math.sin(w),G=x*E+U*F,te=W*E+N*F,U=U*E-x*F,N=N*E-W*F,x=G,W=te),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),u=pe(Math.sqrt(x*x+U*U+I*I)),_=pe(Math.sqrt(N*N+Ze*Ze)),w=Ci(W,N),D=Math.abs(w)>2e-4?w*oi:0,A=Q?1/(Q<0?-Q:Q):0),i.svg&&(G=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Zl(st(e,ue)),G&&e.setAttribute("transform",G))),Math.abs(D)>90&&Math.abs(D)<270&&(r?(u*=-1,D+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,D+=D<=0?180:-180)),t=t||i.uncache,i.x=h-((i.xPercent=h&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=o-((i.yPercent=o&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-o)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=c+a,i.scaleX=pe(u),i.scaleY=pe(_),i.rotation=pe(p)+l,i.rotationX=pe(g)+l,i.rotationY=pe(m)+l,i.skewX=D+l,i.skewY=S+l,i.transformPerspective=A+a,(i.zOrigin=parseFloat(f.split(" ")[2])||!t&&i.zOrigin||0)&&(n[He]=vr(f)),i.xOffset=i.yOffset=0,i.force3D=Xe.force3D,i.renderTransform=i.svg?hd:Xl?Ql:fd,i.uncache=0,i},vr=function(e){return(e=e.split(" "))[0]+" "+e[1]},es=function(e,t,i){var n=Pe(t);return pe(parseFloat(t)+parseFloat(Kt(e,"x",i+"px",n)))+n},fd=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Ql(e,t)},ni="0deg",an="0px",ri=") ",Ql=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,a=i.x,l=i.y,d=i.z,f=i.rotation,h=i.rotationY,o=i.rotationX,c=i.skewX,u=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,D=i.target,S=i.zOrigin,A="",T=m==="auto"&&e&&e!==1||m===!0;if(S&&(o!==ni||h!==ni)){var C=parseFloat(h)*Hi,v=Math.sin(C),w=Math.cos(C),E;C=parseFloat(o)*Hi,E=Math.cos(C),a=es(D,a,v*E*-S),l=es(D,l,-Math.sin(C)*-S),d=es(D,d,w*E*-S+S)}g!==an&&(A+="perspective("+g+ri),(n||r)&&(A+="translate("+n+"%, "+r+"%) "),(T||a!==an||l!==an||d!==an)&&(A+=d!==an||T?"translate3d("+a+", "+l+", "+d+") ":"translate("+a+", "+l+ri),f!==ni&&(A+="rotate("+f+ri),h!==ni&&(A+="rotateY("+h+ri),o!==ni&&(A+="rotateX("+o+ri),(c!==ni||u!==ni)&&(A+="skew("+c+", "+u+ri),(_!==1||p!==1)&&(A+="scale("+_+", "+p+ri),D.style[ue]=A||"translate(0, 0)"},hd=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,a=i.x,l=i.y,d=i.rotation,f=i.skewX,h=i.skewY,o=i.scaleX,c=i.scaleY,u=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,D=i.forceCSS,S=parseFloat(a),A=parseFloat(l),T,C,v,w,E;d=parseFloat(d),f=parseFloat(f),h=parseFloat(h),h&&(h=parseFloat(h),f+=h,d+=h),d||f?(d*=Hi,f*=Hi,T=Math.cos(d)*o,C=Math.sin(d)*o,v=Math.sin(d-f)*-c,w=Math.cos(d-f)*c,f&&(h*=Hi,E=Math.tan(f-h),E=Math.sqrt(1+E*E),v*=E,w*=E,h&&(E=Math.tan(h),E=Math.sqrt(1+E*E),T*=E,C*=E)),T=pe(T),C=pe(C),v=pe(v),w=pe(w)):(T=o,w=c,C=v=0),(S&&!~(a+"").indexOf("px")||A&&!~(l+"").indexOf("px"))&&(S=Kt(u,"x",a,"px"),A=Kt(u,"y",l,"px")),(_||p||g||m)&&(S=pe(S+_-(_*T+p*v)+g),A=pe(A+p-(_*C+p*w)+m)),(n||r)&&(E=u.getBBox(),S=pe(S+n/100*E.width),A=pe(A+r/100*E.height)),E="matrix("+T+","+C+","+v+","+w+","+S+","+A+")",u.setAttribute("transform",E),D&&(u.style[ue]=E)},pd=function(e,t,i,n,r){var a=360,l=Te(r),d=parseFloat(r)*(l&&~r.indexOf("rad")?oi:1),f=d-n,h=n+f+"deg",o,c;return l&&(o=r.split("_")[1],o==="short"&&(f%=a,f!==f%(a/2)&&(f+=f<0?a:-360)),o==="cw"&&f<0?f=(f+a*la)%a-~~(f/a)*a:o==="ccw"&&f>0&&(f=(f-a*la)%a-~~(f/a)*a)),e._pt=c=new Ue(e._pt,t,i,n,f,Zc),c.e=h,c.u="deg",e._props.push(i),c},_a=function(e,t){for(var i in t)e[i]=t[i];return e},_d=function(e,t,i){var n=_a({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",a=i.style,l,d,f,h,o,c,u,_;n.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),a[ue]=t,l=Bn(i,1),Ei(i,ue),i.setAttribute("transform",f)):(f=getComputedStyle(i)[ue],a[ue]=t,l=Bn(i,1),a[ue]=f);for(d in Mt)f=n[d],h=l[d],f!==h&&r.indexOf(d)<0&&(u=Pe(f),_=Pe(h),o=u!==_?Kt(i,d,f,_):parseFloat(f),c=parseFloat(h),e._pt=new Ue(e._pt,l,d,o,c-o,vs),e._pt.u=_||0,e._props.push(d));_a(l,n)};Be("padding,margin,Width,Radius",function(s,e){var t="Top",i="Right",n="Bottom",r="Left",a=(e<3?[t,i,n,r]:[t+r,t+i,n+i,n+r]).map(function(l){return e<2?s+l:"border"+l+s});Cr[e>1?"border"+s:s]=function(l,d,f,h,o){var c,u;if(arguments.length<4)return c=a.map(function(_){return It(l,_,f)}),u=c.join(" "),u.split(c[0]).length===5?c[0]:u;c=(h+"").split(" "),u={},a.forEach(function(_,p){return u[_]=c[p]=c[p]||c[(p-1)/2|0]}),l.init(d,u,o)}});var Jl={name:"css",register:Is,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var a=this._props,l=e.style,d=i.vars.startAt,f,h,o,c,u,_,p,g,m,D,S,A,T,C,v,w;So||Is(),this.styles=this.styles||Wl(e),w=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(h=t[p],!(Ve[p]&&Rl(p,t,i,n,e,r)))){if(u=typeof h,_=Cr[p],u==="function"&&(h=h.call(i,n,e,r),u=typeof h),u==="string"&&~h.indexOf("random(")&&(h=Fn(h)),_)_(this,e,p,h,i)&&(v=1);else if(p.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(p)+"").trim(),h+="",Xt.lastIndex=0,Xt.test(f)||(g=Pe(f),m=Pe(h)),m?g!==m&&(f=Kt(e,p,f,m)+m):g&&(h+=g),this.add(l,"setProperty",f,h,n,r,0,0,p),a.push(p),w.push(p,0,l[p]);else if(u!=="undefined"){if(d&&p in d?(f=typeof d[p]=="function"?d[p].call(i,n,e,r):d[p],Te(f)&&~f.indexOf("random(")&&(f=Fn(f)),Pe(f+"")||f==="auto"||(f+=Xe.units[p]||Pe(It(e,p))||""),(f+"").charAt(1)==="="&&(f=It(e,p))):f=It(e,p),c=parseFloat(f),D=u==="string"&&h.charAt(1)==="="&&h.substr(0,2),D&&(h=h.substr(2)),o=parseFloat(h),p in mt&&(p==="autoAlpha"&&(c===1&&It(e,"visibility")==="hidden"&&o&&(c=0),w.push("visibility",0,l.visibility),Vt(this,l,"visibility",c?"inherit":"hidden",o?"inherit":"hidden",!o)),p!=="scale"&&p!=="transform"&&(p=mt[p],~p.indexOf(",")&&(p=p.split(",")[0]))),S=p in Mt,S){if(this.styles.save(p),u==="string"&&h.substring(0,6)==="var(--"&&(h=st(e,h.substring(4,h.indexOf(")"))),o=parseFloat(h)),A||(T=e._gsap,T.renderTransform&&!t.parseTransform||Bn(e,t.parseTransform),C=t.smoothOrigin!==!1&&T.smooth,A=this._pt=new Ue(this._pt,l,ue,0,1,T.renderTransform,T,0,-1),A.dep=1),p==="scale")this._pt=new Ue(this._pt,T,"scaleY",T.scaleY,(D?Bi(T.scaleY,D+o):o)-T.scaleY||0,vs),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){w.push(He,0,l[He]),h=cd(h),T.svg?bs(e,h,0,C,0,this):(m=parseFloat(h.split(" ")[2])||0,m!==T.zOrigin&&Vt(this,T,"zOrigin",T.zOrigin,m),Vt(this,l,p,vr(f),vr(h)));continue}else if(p==="svgOrigin"){bs(e,h,1,C,0,this);continue}else if(p in Kl){pd(this,T,p,c,D?Bi(c,D+h):h);continue}else if(p==="smoothOrigin"){Vt(this,T,"smooth",T.smooth,h);continue}else if(p==="force3D"){T[p]=h;continue}else if(p==="transform"){_d(this,h,e);continue}}else p in l||(p=Ki(p)||p);if(S||(o||o===0)&&(c||c===0)&&!Kc.test(h)&&p in l)g=(f+"").substr((c+"").length),o||(o=0),m=Pe(h)||(p in Xe.units?Xe.units[p]:g),g!==m&&(c=Kt(e,p,f,m)),this._pt=new Ue(this._pt,S?T:l,p,c,(D?Bi(c,D+o):o)-c,!S&&(m==="px"||p==="zIndex")&&t.autoRound!==!1?Jc:vs),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=f,this._pt.r=Qc);else if(p in l)ud.call(this,e,p,f,D?D+h:h);else if(p in e)this.add(e,p,f||e[p],D?D+h:h,n,r);else if(p!=="parseTransform"){co(p,h);continue}S||(p in l?w.push(p,0,l[p]):typeof e[p]=="function"?w.push(p,2,e[p]()):w.push(p,1,f||e[p])),a.push(p)}}v&&Gl(this)},render:function(e,t){if(t.tween._time||!To())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:It,aliases:mt,getSetter:function(e,t,i){var n=mt[t];return n&&n.indexOf(",")<0&&(t=n),t in Mt&&t!==He&&(e._gsap.x||It(e,"x"))?i&&aa===i?t==="scale"?nd:id:(aa=i||{})&&(t==="scale"?rd:sd):e.style&&!ao(e.style[t])?ed:~t.indexOf("-")?td:yo(e,t)},core:{_removeProperty:Ei,_getMatrix:Lo}};Ge.utils.checkPrefix=Ki;Ge.core.getStyleSaver=Wl;(function(s,e,t,i){var n=Be(s+","+e+","+t,function(r){Mt[r]=1});Be(e,function(r){Xe.units[r]="deg",Kl[r]=1}),mt[n[13]]=s+","+e,Be(i,function(r){var a=r.split(":");mt[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Be("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Xe.units[s]="px"});Ge.registerPlugin(Jl);var gi=Ge.registerPlugin(Jl)||Ge;gi.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Pt,mi,Co,kr,_n,cr,wr,Cn,dt="transform",Ps=dt+"Origin",eu,tu=function(e){var t=e.ownerDocument||e;for(!(dt in e.style)&&("msTransform"in e.style)&&(dt="msTransform",Ps=dt+"Origin");t.parentNode&&(t=t.parentNode););if(mi=window,wr=new Si,t){Pt=t,Co=t.documentElement,kr=t.body,Cn=Pt.createElementNS("http://www.w3.org/2000/svg","g"),Cn.style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),r=t&&(t.body||t.firstElementChild);r&&r.appendChild&&(r.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),eu=n.offsetParent!==i,r.removeChild(i))}return t},gd=function(e){for(var t,i;e&&e!==kr;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},iu=[],nu=[],md=function(){return mi.pageYOffset||Pt.scrollTop||Co.scrollTop||kr.scrollTop||0},Dd=function(){return mi.pageXOffset||Pt.scrollLeft||Co.scrollLeft||kr.scrollLeft||0},vo=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},yd=function s(e){if(mi.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return s(e)},ts=function s(e,t){if(e.parentNode&&(Pt||tu(e))){var i=vo(e),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",r=i?t?"rect":"g":"div",a=t!==2?0:100,l=t===3?100:0,d="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",f=Pt.createElementNS?Pt.createElementNS(n.replace(/^https/,"http"),r):Pt.createElement(r);return t&&(i?(cr||(cr=s(e)),f.setAttribute("width",.01),f.setAttribute("height",.01),f.setAttribute("transform","translate("+a+","+l+")"),cr.appendChild(f)):(_n||(_n=s(e),_n.style.cssText=d),f.style.cssText=d+"width:0.1px;height:0.1px;top:"+l+"px;left:"+a+"px",_n.appendChild(f))),f}throw"Need document and parent."},Ed=function(e){for(var t=new Si,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},Sd=function(e){var t=e.getCTM(),i;return t||(i=e.style[dt],e.style[dt]="none",e.appendChild(Cn),t=Cn.getCTM(),e.removeChild(Cn),i?e.style[dt]=i:e.style.removeProperty(dt.replace(/([A-Z])/g,"-$1").toLowerCase())),t||wr.clone()},Td=function(e,t){var i=vo(e),n=e===i,r=i?iu:nu,a=e.parentNode,l=a&&!i&&a.shadowRoot&&a.shadowRoot.appendChild?a.shadowRoot:a,d,f,h,o,c,u;if(e===mi)return e;if(r.length||r.push(ts(e,1),ts(e,2),ts(e,3)),d=i?cr:_n,i)n?(h=Sd(e),o=-h.e/h.a,c=-h.f/h.d,f=wr):e.getBBox?(h=e.getBBox(),f=e.transform?e.transform.baseVal:{},f=f.numberOfItems?f.numberOfItems>1?Ed(f):f.getItem(0).matrix:wr,o=f.a*h.x+f.c*h.y,c=f.b*h.x+f.d*h.y):(f=new Si,o=c=0),(n?i:a).appendChild(d),d.setAttribute("transform","matrix("+f.a+","+f.b+","+f.c+","+f.d+","+(f.e+o)+","+(f.f+c)+")");else{if(o=c=0,eu)for(f=e.offsetParent,h=e;h&&(h=h.parentNode)&&h!==f&&h.parentNode;)(mi.getComputedStyle(h)[dt]+"").length>4&&(o=h.offsetLeft,c=h.offsetTop,h=0);if(u=mi.getComputedStyle(e),u.position!=="absolute"&&u.position!=="fixed")for(f=e.offsetParent;a&&a!==f;)o+=a.scrollLeft||0,c+=a.scrollTop||0,a=a.parentNode;h=d.style,h.top=e.offsetTop-c+"px",h.left=e.offsetLeft-o+"px",h[dt]=u[dt],h[Ps]=u[Ps],h.position=u.position==="fixed"?"fixed":"absolute",l.appendChild(d)}return d},is=function(e,t,i,n,r,a,l){return e.a=t,e.b=i,e.c=n,e.d=r,e.e=a,e.f=l,e},Si=function(){function s(t,i,n,r,a,l){t===void 0&&(t=1),i===void 0&&(i=0),n===void 0&&(n=0),r===void 0&&(r=1),a===void 0&&(a=0),l===void 0&&(l=0),is(this,t,i,n,r,a,l)}var e=s.prototype;return e.inverse=function(){var i=this.a,n=this.b,r=this.c,a=this.d,l=this.e,d=this.f,f=i*a-n*r||1e-10;return is(this,a/f,-n/f,-r/f,i/f,(r*d-a*l)/f,-(i*d-n*l)/f)},e.multiply=function(i){var n=this.a,r=this.b,a=this.c,l=this.d,d=this.e,f=this.f,h=i.a,o=i.c,c=i.b,u=i.d,_=i.e,p=i.f;return is(this,h*n+c*a,h*r+c*l,o*n+u*a,o*r+u*l,d+_*n+p*a,f+_*r+p*l)},e.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var n=this.a,r=this.b,a=this.c,l=this.d,d=this.e,f=this.f;return n===i.a&&r===i.b&&a===i.c&&l===i.d&&d===i.e&&f===i.f},e.apply=function(i,n){n===void 0&&(n={});var r=i.x,a=i.y,l=this.a,d=this.b,f=this.c,h=this.d,o=this.e,c=this.f;return n.x=r*l+a*f+o||0,n.y=r*d+a*h+c||0,n},s}();function ai(s,e,t,i){if(!s||!s.parentNode||(Pt||tu(s)).documentElement===s)return new Si;var n=gd(s),r=vo(s),a=r?iu:nu,l=Td(s),d=a[0].getBoundingClientRect(),f=a[1].getBoundingClientRect(),h=a[2].getBoundingClientRect(),o=l.parentNode,c=yd(s),u=new Si((f.left-d.left)/100,(f.top-d.top)/100,(h.left-d.left)/100,(h.top-d.top)/100,d.left+(c?0:Dd()),d.top+(c?0:md()));if(o.removeChild(l),n)for(d=n.length;d--;)f=n[d],f.scaleX=f.scaleY=0,f.renderTransform(1,f);return e?u.inverse():u}function ga(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ad(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}var q,se,ze,ft,Ot,ns,bt,Os,gn,Yt,ru,xs,Un,wo,mn,ut,Dn,dr,su,Ms,Ir=0,ou=function(){return typeof window<"u"},au=function(){return q||ou()&&(q=window.gsap)&&q.registerPlugin&&q},Ht=function(e){return typeof e=="function"},vn=function(e){return typeof e=="object"},ct=function(e){return typeof e>"u"},fr=function(){return!1},wn="transform",Fs="transformOrigin",kt=function(e){return Math.round(e*1e4)/1e4},ln=Array.isArray,tr=function(e,t){var i=ze.createElementNS?ze.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):ze.createElement(e);return i.style?i:ze.createElement(e)},ma=180/Math.PI,vi=1e20,Ld=new Si,Bt=Date.now||function(){return new Date().getTime()},Di=[],Gi={},Cd=0,vd=/^(?:a|input|textarea|button|select)$/i,Da=0,wi={},Lt={},lu=function(e,t){var i={},n;for(n in e)i[n]=t?e[n]*t:e[n];return i},wd=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ya=function s(e,t){for(var i=e.length,n;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),n=e[i].children,n&&n.length&&s(n,t)},uu=function(){return Di.forEach(function(e){return e()})},Id=function(e){Di.push(e),Di.length===1&&q.ticker.add(uu)},Ea=function(){return!Di.length&&q.ticker.remove(uu)},Sa=function(e){for(var t=Di.length;t--;)Di[t]===e&&Di.splice(t,1);q.to(Ea,{overwrite:!0,delay:15,duration:0,onComplete:Ea,data:"_draggable"})},bd=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ye=function(e,t,i,n){if(e.addEventListener){var r=Un[t];n=n||(ru?{passive:!1}:null),e.addEventListener(r||t,i,n),r&&t!==r&&e.addEventListener(t,i,n)}},ge=function(e,t,i,n){if(e.removeEventListener){var r=Un[t];e.removeEventListener(r||t,i,n),r&&t!==r&&e.removeEventListener(t,i,n)}},tt=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},Pd=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},Od=function s(e){wo=e.touches&&Ir<e.touches.length,ge(e.target,"touchend",s)},Ta=function(e){wo=e.touches&&Ir<e.touches.length,ye(e.target,"touchend",Od)},$i=function(e){return se.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Vi=function(e){return se.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},Aa=function s(e,t){ye(e,"scroll",t),Zi(e.parentNode)||s(e.parentNode,t)},La=function s(e,t){ge(e,"scroll",t),Zi(e.parentNode)||s(e.parentNode,t)},Zi=function(e){return!e||e===ft||e.nodeType===9||e===ze.body||e===se||!e.nodeType||!e.parentNode},Ca=function(e,t){var i=t==="x"?"Width":"Height",n="scroll"+i,r="client"+i;return Math.max(0,Zi(e)?Math.max(ft[n],Ot[n])-(se["inner"+i]||ft[r]||Ot[r]):e[n]-e[r])},rs=function s(e,t){var i=Ca(e,"x"),n=Ca(e,"y");Zi(e)?e=Lt:s(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=n,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},ss=function(e,t,i){var n=e.style;n&&(ct(n[t])&&(t=gn(t,e)||t),i==null?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},Hn=function(e){return se.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},si={},Ii=function(e){if(e===se)return si.left=si.top=0,si.width=si.right=ft.clientWidth||e.innerWidth||Ot.clientWidth||0,si.height=si.bottom=(e.innerHeight||0)-20<ft.clientHeight?ft.clientHeight:e.innerHeight||Ot.clientHeight||0,si;var t=e.ownerDocument||ze,i=ct(e.pageX)?!e.nodeType&&!ct(e.left)&&!ct(e.top)?e:Yt(e)[0].getBoundingClientRect():{left:e.pageX-Vi(t),top:e.pageY-$i(t),right:e.pageX-Vi(t)+1,bottom:e.pageY-$i(t)+1};return ct(i.right)&&!ct(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):ct(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},he=function(e,t,i){var n=e.vars,r=n[i],a=e._listeners[t],l;return Ht(r)&&(l=r.apply(n.callbackScope||e,n[i+"Params"]||[e.pointerEvent])),a&&e.dispatchEvent(t)===!1&&(l=!1),l},va=function(e,t){var i=Yt(e)[0],n,r,a;return!i.nodeType&&i!==se?ct(e.left)?(r=e.min||e.minX||e.minRotation||0,n=e.min||e.minY||0,{left:r,top:n,width:(e.max||e.maxX||e.maxRotation||0)-r,height:(e.max||e.maxY||0)-n}):(a={x:0,y:0},{left:e.left-a.x,top:e.top-a.y,width:e.width,height:e.height}):xd(i,t)},it={},xd=function(e,t){t=Yt(t)[0];var i=e.getBBox&&e.ownerSVGElement,n=e.ownerDocument||ze,r,a,l,d,f,h,o,c,u,_,p,g,m;if(e===se)l=$i(n),r=Vi(n),a=r+(n.documentElement.clientWidth||e.innerWidth||n.body.clientWidth||0),d=l+((e.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight||n.body.clientHeight||0);else{if(t===se||ct(t))return e.getBoundingClientRect();r=l=0,i?(_=e.getBBox(),p=_.width,g=_.height):(e.viewBox&&(_=e.viewBox.baseVal)&&(r=_.x||0,l=_.y||0,p=_.width,g=_.height),p||(m=Hn(e),_=m.boxSizing==="border-box",p=(parseFloat(m.width)||e.clientWidth||0)+(_?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||e.clientHeight||0)+(_?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),a=p,d=g}return e===t?{left:r,top:l,width:a-r,height:d-l}:(f=ai(t,!0).multiply(ai(e)),h=f.apply({x:r,y:l}),o=f.apply({x:a,y:l}),c=f.apply({x:a,y:d}),u=f.apply({x:r,y:d}),r=Math.min(h.x,o.x,c.x,u.x),l=Math.min(h.y,o.y,c.y,u.y),{left:r,top:l,width:Math.max(h.x,o.x,c.x,u.x)-r,height:Math.max(h.y,o.y,c.y,u.y)-l})},os=function(e,t,i,n,r,a){var l={},d,f,h;if(t)if(r!==1&&t instanceof Array){if(l.end=d=[],h=t.length,vn(t[0]))for(f=0;f<h;f++)d[f]=lu(t[f],r);else for(f=0;f<h;f++)d[f]=t[f]*r;i+=1.1,n-=1.1}else Ht(t)?l.end=function(o){var c=t.call(e,o),u,_;if(r!==1)if(vn(c)){u={};for(_ in c)u[_]=c[_]*r;c=u}else c*=r;return c}:l.end=t;return(i||i===0)&&(l.max=i),(n||n===0)&&(l.min=n),a&&(l.velocity=0),l},Md=function s(e){var t;return!e||!e.getAttribute||e===Ot?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(vd.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:s(e.parentNode)},ir=function(e,t){for(var i=e.length,n;i--;)n=e[i],n.ondragstart=n.onselectstart=t?null:fr,q.set(n,{lazy:!0,userSelect:t?"text":"none"})},Fd=function s(e){if(Hn(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return s(e)},cu,Rs,Rd=function(e,t){e=q.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),n=i.style,r=e.firstChild,a=0,l=0,d=e.scrollTop,f=e.scrollLeft,h=e.scrollWidth,o=e.scrollHeight,c=0,u=0,_=0,p,g,m,D,S,A;cu&&t.force3D!==!1?(S="translate3d(",A="px,0px)"):wn&&(S="translate(",A="px)"),this.scrollTop=function(T,C){if(!arguments.length)return-this.top();this.top(-T,C)},this.scrollLeft=function(T,C){if(!arguments.length)return-this.left();this.left(-T,C)},this.left=function(T,C){if(!arguments.length)return-(e.scrollLeft+l);var v=e.scrollLeft-f,w=l;if((v>2||v<-2)&&!C){f=e.scrollLeft,q.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-f),t.onKill&&t.onKill();return}T=-T,T<0?(l=T-.5|0,T=0):T>u?(l=T-u|0,T=u):l=0,(l||w)&&(this._skip||(n[wn]=S+-l+"px,"+-a+A),l+c>=0&&(n.paddingRight=l+c+"px")),e.scrollLeft=T|0,f=e.scrollLeft},this.top=function(T,C){if(!arguments.length)return-(e.scrollTop+a);var v=e.scrollTop-d,w=a;if((v>2||v<-2)&&!C){d=e.scrollTop,q.killTweensOf(this,{top:1,scrollTop:1}),this.top(-d),t.onKill&&t.onKill();return}T=-T,T<0?(a=T-.5|0,T=0):T>_?(a=T-_|0,T=_):a=0,(a||w)&&(this._skip||(n[wn]=S+-l+"px,"+-a+A)),e.scrollTop=T|0,d=e.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return u},this.disable=function(){for(r=i.firstChild;r;)D=r.nextSibling,e.appendChild(r),r=D;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(r=e.firstChild,r!==i){for(;r;)D=r.nextSibling,i.appendChild(r),r=D;e.appendChild(i),this.calibrate()}},this.calibrate=function(T){var C=e.clientWidth===p,v,w,E;d=e.scrollTop,f=e.scrollLeft,!(C&&e.clientHeight===g&&i.offsetHeight===m&&h===e.scrollWidth&&o===e.scrollHeight&&!T)&&((a||l)&&(w=this.left(),E=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),v=Hn(e),(!C||T)&&(n.display="block",n.width="auto",n.paddingRight="0px",c=Math.max(0,e.scrollWidth-e.clientWidth),c&&(c+=parseFloat(v.paddingLeft)+(Rs?parseFloat(v.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=c+"px",Rs&&(n.paddingBottom=v.paddingBottom),p=e.clientWidth,g=e.clientHeight,h=e.scrollWidth,o=e.scrollHeight,u=e.scrollWidth-p,_=e.scrollHeight-g,m=i.offsetHeight,n.display="block",(w||E)&&(this.left(w),this.top(E)))},this.content=i,this.element=e,this._skip=!1,this.enable()},as=function(e){if(ou()&&document.body){var t=window&&window.navigator;se=window,ze=document,ft=ze.documentElement,Ot=ze.body,ns=tr("div"),dr=!!window.PointerEvent,bt=tr("div"),bt.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Dn=bt.style.cursor==="grab"?"grab":"move",mn=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,xs="ontouchstart"in ft&&"orientation"in se||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),Rs=function(){var i=tr("div"),n=tr("div"),r=n.style,a=Ot,l;return r.display="inline-block",r.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),a.appendChild(i),l=n.offsetHeight+18>i.scrollHeight,a.removeChild(i),l}(),Un=function(i){for(var n=i.split(","),r=("onpointerdown"in ns?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in ns?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),a={},l=4;--l>-1;)a[n[l]]=r[l],a[r[l]]=n[l];try{ft.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){ru=1}}))}catch{}return a}("touchstart,touchmove,touchend,touchcancel"),ye(ze,"touchcancel",fr),ye(se,"touchmove",fr),Ot&&Ot.addEventListener("touchstart",fr),ye(ze,"contextmenu",function(){for(var i in Gi)Gi[i].isPressed&&Gi[i].endDrag()}),q=Os=au()}q?(ut=q.plugins.inertia,su=q.core.context||function(){},gn=q.utils.checkPrefix,wn=gn(wn),Fs=gn(Fs),Yt=q.utils.toArray,Ms=q.core.getStyleSaver,cu=!!gn("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},Nd=function(){function s(t){this._listeners={},this.target=t||this}var e=s.prototype;return e.addEventListener=function(i,n){var r=this._listeners[i]||(this._listeners[i]=[]);~r.indexOf(n)||r.push(n)},e.removeEventListener=function(i,n){var r=this._listeners[i],a=r&&r.indexOf(n);a>=0&&r.splice(a,1)},e.dispatchEvent=function(i){var n=this,r;return(this._listeners[i]||[]).forEach(function(a){return a.call(n,{type:i,target:n.target})===!1&&(r=!1)}),r},s}(),Xn=function(s){Ad(e,s);function e(t,i){var n;n=s.call(this)||this,Os||as(1),t=Yt(t)[0],n.styles=Ms&&Ms(t,"transform,left,top"),ut||(ut=q.plugins.inertia),n.vars=i=lu(i||{}),n.target=t,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,q.getProperty(t,"x");var r=(i.type||"x,y").toLowerCase(),a=~r.indexOf("x")||~r.indexOf("y"),l=r.indexOf("rotation")!==-1,d=l?"rotation":a?"x":"left",f=a?"y":"top",h=!!(~r.indexOf("x")||~r.indexOf("left")||r==="scroll"),o=!!(~r.indexOf("y")||~r.indexOf("top")||r==="scroll"),c=i.minimumMovement||2,u=ga(n),_=Yt(i.trigger||i.handle||t),p={},g=0,m=!1,D=i.autoScrollMarginTop||40,S=i.autoScrollMarginRight||40,A=i.autoScrollMarginBottom||40,T=i.autoScrollMarginLeft||40,C=i.clickableTest||Md,v=0,w=t._gsap||q.core.getCache(t),E=Fd(t),F=function(y,b){return parseFloat(w.get(t,y,b))},x=t.ownerDocument||ze,U,I,H,W,N,G,te,Fe,Ke,X,K,J,Q,Ze,Qe,tn,Se,Hr,Ft,Rt,ei,nn,Ae,ee,Wo,Je,ot,Gr,$r,Xo,$e,qo,Zn,jo=function(y){return tt(y),y.stopImmediatePropagation&&y.stopImmediatePropagation(),!1},ht=function B(y){if(u.autoScroll&&u.isDragging&&(m||Se)){var b=t,L=u.autoScroll*15,P,M,R,V,k,ie,Z,ne;for(m=!1,Lt.scrollTop=se.pageYOffset!=null?se.pageYOffset:x.documentElement.scrollTop!=null?x.documentElement.scrollTop:x.body.scrollTop,Lt.scrollLeft=se.pageXOffset!=null?se.pageXOffset:x.documentElement.scrollLeft!=null?x.documentElement.scrollLeft:x.body.scrollLeft,V=u.pointerX-Lt.scrollLeft,k=u.pointerY-Lt.scrollTop;b&&!M;)M=Zi(b.parentNode),P=M?Lt:b.parentNode,R=M?{bottom:Math.max(ft.clientHeight,se.innerHeight||0),right:Math.max(ft.clientWidth,se.innerWidth||0),left:0,top:0}:P.getBoundingClientRect(),ie=Z=0,o&&(ne=P._gsMaxScrollY-P.scrollTop,ne<0?Z=ne:k>R.bottom-A&&ne?(m=!0,Z=Math.min(ne,L*(1-Math.max(0,R.bottom-k)/A)|0)):k<R.top+D&&P.scrollTop&&(m=!0,Z=-Math.min(P.scrollTop,L*(1-Math.max(0,k-R.top)/D)|0)),Z&&(P.scrollTop+=Z)),h&&(ne=P._gsMaxScrollX-P.scrollLeft,ne<0?ie=ne:V>R.right-S&&ne?(m=!0,ie=Math.min(ne,L*(1-Math.max(0,R.right-V)/S)|0)):V<R.left+T&&P.scrollLeft&&(m=!0,ie=-Math.min(P.scrollLeft,L*(1-Math.max(0,V-R.left)/T)|0)),ie&&(P.scrollLeft+=ie)),M&&(ie||Z)&&(se.scrollTo(P.scrollLeft,P.scrollTop),on(u.pointerX+ie,u.pointerY+Z)),b=P}if(Se){var fe=u.x,be=u.y;l?(u.deltaX=fe-parseFloat(w.rotation),u.rotation=fe,w.rotation=fe+"deg",w.renderTransform(1,w)):I?(o&&(u.deltaY=be-I.top(),I.top(be)),h&&(u.deltaX=fe-I.left(),I.left(fe))):a?(o&&(u.deltaY=be-parseFloat(w.y),w.y=be+"px"),h&&(u.deltaX=fe-parseFloat(w.x),w.x=fe+"px"),w.renderTransform(1,w)):(o&&(u.deltaY=be-parseFloat(t.style.top||0),t.style.top=be+"px"),h&&(u.deltaX=fe-parseFloat(t.style.left||0),t.style.left=fe+"px")),Fe&&!y&&!Gr&&(Gr=!0,he(u,"drag","onDrag")===!1&&(h&&(u.x-=u.deltaX),o&&(u.y-=u.deltaY),B(!0)),Gr=!1)}Se=!1},ti=function(y,b){var L=u.x,P=u.y,M,R;t._gsap||(w=q.core.getCache(t)),w.uncache&&q.getProperty(t,"x"),a?(u.x=parseFloat(w.x),u.y=parseFloat(w.y)):l?u.x=u.rotation=parseFloat(w.rotation):I?(u.y=I.top(),u.x=I.left()):(u.y=parseFloat(t.style.top||(R=Hn(t))&&R.top)||0,u.x=parseFloat(t.style.left||(R||{}).left)||0),(Ft||Rt||ei)&&!b&&(u.isDragging||u.isThrowing)&&(ei&&(wi.x=u.x,wi.y=u.y,M=ei(wi),M.x!==u.x&&(u.x=M.x,Se=!0),M.y!==u.y&&(u.y=M.y,Se=!0)),Ft&&(M=Ft(u.x),M!==u.x&&(u.x=M,l&&(u.rotation=M),Se=!0)),Rt&&(M=Rt(u.y),M!==u.y&&(u.y=M),Se=!0)),Se&&ht(!0),y||(u.deltaX=u.x-L,u.deltaY=u.y-P,he(u,"throwupdate","onThrowUpdate"))},Vr=function(y,b,L,P){return b==null&&(b=-1e20),L==null&&(L=vi),Ht(y)?function(M){var R=u.isPressed?1-u.edgeResistance:1;return y.call(u,(M>L?L+(M-L)*R:M<b?b+(M-b)*R:M)*P)*P}:ln(y)?function(M){for(var R=y.length,V=0,k=vi,ie,Z;--R>-1;)ie=y[R],Z=ie-M,Z<0&&(Z=-Z),Z<k&&ie>=b&&ie<=L&&(V=R,k=Z);return y[V]}:isNaN(y)?function(M){return M}:function(){return y*P}},Qu=function(y,b,L,P,M,R,V){return R=R&&R<vi?R*R:vi,Ht(y)?function(k){var ie=u.isPressed?1-u.edgeResistance:1,Z=k.x,ne=k.y,fe,be,St;return k.x=Z=Z>L?L+(Z-L)*ie:Z<b?b+(Z-b)*ie:Z,k.y=ne=ne>M?M+(ne-M)*ie:ne<P?P+(ne-P)*ie:ne,fe=y.call(u,k),fe!==k&&(k.x=fe.x,k.y=fe.y),V!==1&&(k.x*=V,k.y*=V),R<vi&&(be=k.x-Z,St=k.y-ne,be*be+St*St>R&&(k.x=Z,k.y=ne)),k}:ln(y)?function(k){for(var ie=y.length,Z=0,ne=vi,fe,be,St,et;--ie>-1;)St=y[ie],fe=St.x-k.x,be=St.y-k.y,et=fe*fe+be*be,et<ne&&(Z=ie,ne=et);return ne<=R?y[Z]:k}:function(k){return k}},Yr=function(){var y,b,L,P;te=!1,I?(I.calibrate(),u.minX=K=-I.maxScrollLeft(),u.minY=Q=-I.maxScrollTop(),u.maxX=X=u.maxY=J=0,te=!0):i.bounds&&(y=va(i.bounds,t.parentNode),l?(u.minX=K=y.left,u.maxX=X=y.left+y.width,u.minY=Q=u.maxY=J=0):!ct(i.bounds.maxX)||!ct(i.bounds.maxY)?(y=i.bounds,u.minX=K=y.minX,u.minY=Q=y.minY,u.maxX=X=y.maxX,u.maxY=J=y.maxY):(b=va(t,t.parentNode),u.minX=K=Math.round(F(d,"px")+y.left-b.left),u.minY=Q=Math.round(F(f,"px")+y.top-b.top),u.maxX=X=Math.round(K+(y.width-b.width)),u.maxY=J=Math.round(Q+(y.height-b.height))),K>X&&(u.minX=X,u.maxX=X=K,K=u.minX),Q>J&&(u.minY=J,u.maxY=J=Q,Q=u.minY),l&&(u.minRotation=K,u.maxRotation=X),te=!0),i.liveSnap&&(L=i.liveSnap===!0?i.snap||{}:i.liveSnap,P=ln(L)||Ht(L),l?(Ft=Vr(P?L:L.rotation,K,X,1),Rt=null):L.points?ei=Qu(P?L:L.points,K,X,Q,J,L.radius,I?-1:1):(h&&(Ft=Vr(P?L:L.x||L.left||L.scrollLeft,K,X,I?-1:1)),o&&(Rt=Vr(P?L:L.y||L.top||L.scrollTop,Q,J,I?-1:1))))},Ju=function(){u.isThrowing=!1,he(u,"throwcomplete","onThrowComplete")},ec=function(){u.isThrowing=!1},zr=function(y,b){var L,P,M,R;y&&ut?(y===!0&&(L=i.snap||i.liveSnap||{},P=ln(L)||Ht(L),y={resistance:(i.throwResistance||i.resistance||1e3)/(l?10:1)},l?y.rotation=os(u,P?L:L.rotation,X,K,1,b):(h&&(y[d]=os(u,P?L:L.points||L.x||L.left,X,K,I?-1:1,b||u.lockedAxis==="x")),o&&(y[f]=os(u,P?L:L.points||L.y||L.top,J,Q,I?-1:1,b||u.lockedAxis==="y")),(L.points||ln(L)&&vn(L[0]))&&(y.linkedProps=d+","+f,y.radius=L.radius))),u.isThrowing=!0,R=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-u.edgeResistance+.2:i.overshootTolerance,y.duration||(y.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?R===0||vn(y)&&y.resistance>1e3?0:.5:i.minDuration,overshoot:R}),u.tween=M=q.to(I||t,{inertia:y,data:"_draggable",inherit:!1,onComplete:Ju,onInterrupt:ec,onUpdate:i.fastMode?he:ti,onUpdateParams:i.fastMode?[u,"onthrowupdate","onThrowUpdate"]:L&&L.radius?[!1,!0]:[]}),i.fastMode||(I&&(I._skip=!0),M.render(1e9,!0,!0),ti(!0,!0),u.endX=u.x,u.endY=u.y,l&&(u.endRotation=u.x),M.play(0),ti(!0,!0),I&&(I._skip=!1))):te&&u.applyBounds()},Ko=function(y){var b=ee,L;ee=ai(t.parentNode,!0),y&&u.isPressed&&!ee.equals(b||new Si)&&(L=b.inverse().apply({x:H,y:W}),ee.apply(L,L),H=L.x,W=L.y),ee.equals(Ld)&&(ee=null)},Qn=function(){var y=1-u.edgeResistance,b=E?Vi(x):0,L=E?$i(x):0,P,M,R;a&&(w.x=F(d,"px")+"px",w.y=F(f,"px")+"px",w.renderTransform()),Ko(!1),it.x=u.pointerX-b,it.y=u.pointerY-L,ee&&ee.apply(it,it),H=it.x,W=it.y,Se&&(on(u.pointerX,u.pointerY),ht(!0)),qo=ai(t),I?(Yr(),G=I.top(),N=I.left()):(rn()?(ti(!0,!0),Yr()):u.applyBounds(),l?(P=t.ownerSVGElement?[w.xOrigin-t.getBBox().x,w.yOrigin-t.getBBox().y]:(Hn(t)[Fs]||"0 0").split(" "),tn=u.rotationOrigin=ai(t).apply({x:parseFloat(P[0])||0,y:parseFloat(P[1])||0}),ti(!0,!0),M=u.pointerX-tn.x-b,R=tn.y-u.pointerY+L,N=u.x,G=u.y=Math.atan2(R,M)*ma):(G=F(f,"px"),N=F(d,"px"))),te&&y&&(N>X?N=X+(N-X)/y:N<K&&(N=K-(K-N)/y),l||(G>J?G=J+(G-J)/y:G<Q&&(G=Q-(Q-G)/y))),u.startX=N=kt(N),u.startY=G=kt(G)},rn=function(){return u.tween&&u.tween.isActive()},tc=function(){bt.parentNode&&!rn()&&!u.isDragging&&bt.parentNode.removeChild(bt)},sn=function(y,b){var L;if(!U||u.isPressed||!y||(y.type==="mousedown"||y.type==="pointerdown")&&!b&&Bt()-v<30&&Un[u.pointerEvent.type]){$e&&y&&U&&tt(y);return}if(Wo=rn(),Zn=!1,u.pointerEvent=y,Un[y.type]?(Ae=~y.type.indexOf("touch")?y.currentTarget||y.target:x,ye(Ae,"touchend",at),ye(Ae,"touchmove",ii),ye(Ae,"touchcancel",at),ye(x,"touchstart",Ta)):(Ae=null,ye(x,"mousemove",ii)),ot=null,(!dr||!Ae)&&(ye(x,"mouseup",at),y&&y.target&&ye(y.target,"mouseup",at)),nn=C.call(u,y.target)&&i.dragClickables===!1&&!b,nn){ye(y.target,"change",at),he(u,"pressInit","onPressInit"),he(u,"press","onPress"),ir(_,!0),$e=!1;return}if(Je=!Ae||h===o||u.vars.allowNativeTouchScrolling===!1||u.vars.allowContextMenu&&y&&(y.ctrlKey||y.which>2)?!1:h?"y":"x",$e=!Je&&!u.allowEventDefault,$e&&(tt(y),ye(se,"touchforcechange",tt)),y.changedTouches?(y=Ze=y.changedTouches[0],Qe=y.identifier):y.pointerId?Qe=y.pointerId:Ze=Qe=null,Ir++,Id(ht),W=u.pointerY=y.pageY,H=u.pointerX=y.pageX,he(u,"pressInit","onPressInit"),(Je||u.autoScroll)&&rs(t.parentNode),t.parentNode&&u.autoScroll&&!I&&!l&&t.parentNode._gsMaxScrollX&&!bt.parentNode&&!t.getBBox&&(bt.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(bt)),Qn(),u.tween&&u.tween.kill(),u.isThrowing=!1,q.killTweensOf(I||t,p,!0),I&&q.killTweensOf(t,{scrollTo:1},!0),u.tween=u.lockedAxis=null,(i.zIndexBoost||!l&&!I&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),u.isPressed=!0,Fe=!!(i.onDrag||u._listeners.drag),Ke=!!(i.onMove||u._listeners.move),i.cursor!==!1||i.activeCursor)for(L=_.length;--L>-1;)q.set(_[L],{cursor:i.activeCursor||i.cursor||(Dn==="grab"?"grabbing":Dn)});he(u,"press","onPress")},ii=function(y){var b=y,L,P,M,R,V,k;if(!U||wo||!u.isPressed||!y){$e&&y&&U&&tt(y);return}if(u.pointerEvent=y,L=y.changedTouches,L){if(y=L[0],y!==Ze&&y.identifier!==Qe){for(R=L.length;--R>-1&&(y=L[R]).identifier!==Qe&&y.target!==t;);if(R<0)return}}else if(y.pointerId&&Qe&&y.pointerId!==Qe)return;if(Ae&&Je&&!ot&&(it.x=y.pageX-(E?Vi(x):0),it.y=y.pageY-(E?$i(x):0),ee&&ee.apply(it,it),P=it.x,M=it.y,V=Math.abs(P-H),k=Math.abs(M-W),(V!==k&&(V>c||k>c)||mn&&Je===ot)&&(ot=V>k&&h?"x":"y",Je&&ot!==Je&&ye(se,"touchforcechange",tt),u.vars.lockAxisOnTouchScroll!==!1&&h&&o&&(u.lockedAxis=ot==="x"?"y":"x",Ht(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,b)),mn&&Je===ot))){at(b);return}!u.allowEventDefault&&(!Je||ot&&Je!==ot)&&b.cancelable!==!1?(tt(b),$e=!0):$e&&($e=!1),u.autoScroll&&(m=!0),on(y.pageX,y.pageY,Ke)},on=function(y,b,L){var P=1-u.dragResistance,M=1-u.edgeResistance,R=u.pointerX,V=u.pointerY,k=G,ie=u.x,Z=u.y,ne=u.endX,fe=u.endY,be=u.endRotation,St=Se,et,Nt,Le,_e,Wr,lt;u.pointerX=y,u.pointerY=b,E&&(y-=Vi(x),b-=$i(x)),l?(_e=Math.atan2(tn.y-b,y-tn.x)*ma,Wr=u.y-_e,Wr>180?(G-=360,u.y=_e):Wr<-180&&(G+=360,u.y=_e),u.x!==N||Math.max(Math.abs(H-y),Math.abs(W-b))>c?(u.y=_e,Le=N+(G-_e)*P):Le=N):(ee&&(lt=y*ee.a+b*ee.c+ee.e,b=y*ee.b+b*ee.d+ee.f,y=lt),Nt=b-W,et=y-H,Nt<c&&Nt>-c&&(Nt=0),et<c&&et>-c&&(et=0),(u.lockAxis||u.lockedAxis)&&(et||Nt)&&(lt=u.lockedAxis,lt||(u.lockedAxis=lt=h&&Math.abs(et)>Math.abs(Nt)?"y":o?"x":null,lt&&Ht(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,u.pointerEvent)),lt==="y"?Nt=0:lt==="x"&&(et=0)),Le=kt(N+et*P),_e=kt(G+Nt*P)),(Ft||Rt||ei)&&(u.x!==Le||u.y!==_e&&!l)&&(ei&&(wi.x=Le,wi.y=_e,lt=ei(wi),Le=kt(lt.x),_e=kt(lt.y)),Ft&&(Le=kt(Ft(Le))),Rt&&(_e=kt(Rt(_e)))),te&&(Le>X?Le=X+Math.round((Le-X)*M):Le<K&&(Le=K+Math.round((Le-K)*M)),l||(_e>J?_e=Math.round(J+(_e-J)*M):_e<Q&&(_e=Math.round(Q+(_e-Q)*M)))),(u.x!==Le||u.y!==_e&&!l)&&(l?(u.endRotation=u.x=u.endX=Le,Se=!0):(o&&(u.y=u.endY=_e,Se=!0),h&&(u.x=u.endX=Le,Se=!0)),!L||he(u,"move","onMove")!==!1?!u.isDragging&&u.isPressed&&(u.isDragging=Zn=!0,he(u,"dragstart","onDragStart")):(u.pointerX=R,u.pointerY=V,G=k,u.x=ie,u.y=Z,u.endX=ne,u.endY=fe,u.endRotation=be,Se=St))},at=function B(y,b){if(!U||!u.isPressed||y&&Qe!=null&&!b&&(y.pointerId&&y.pointerId!==Qe&&y.target!==t||y.changedTouches&&!Pd(y.changedTouches,Qe))){$e&&y&&U&&tt(y);return}u.isPressed=!1;var L=y,P=u.isDragging,M=u.vars.allowContextMenu&&y&&(y.ctrlKey||y.which>2),R=q.delayedCall(.001,tc),V,k,ie,Z,ne;if(Ae?(ge(Ae,"touchend",B),ge(Ae,"touchmove",ii),ge(Ae,"touchcancel",B),ge(x,"touchstart",Ta)):ge(x,"mousemove",ii),ge(se,"touchforcechange",tt),(!dr||!Ae)&&(ge(x,"mouseup",B),y&&y.target&&ge(y.target,"mouseup",B)),Se=!1,P&&(g=Da=Bt(),u.isDragging=!1),Sa(ht),nn&&!M){y&&(ge(y.target,"change",B),u.pointerEvent=L),ir(_,!1),he(u,"release","onRelease"),he(u,"click","onClick"),nn=!1;return}for(k=_.length;--k>-1;)ss(_[k],"cursor",i.cursor||(i.cursor!==!1?Dn:null));if(Ir--,y){if(V=y.changedTouches,V&&(y=V[0],y!==Ze&&y.identifier!==Qe)){for(k=V.length;--k>-1&&(y=V[k]).identifier!==Qe&&y.target!==t;);if(k<0&&!b)return}u.pointerEvent=L,u.pointerX=y.pageX,u.pointerY=y.pageY}return M&&L?(tt(L),$e=!0,he(u,"release","onRelease")):L&&!P?($e=!1,Wo&&(i.snap||i.bounds)&&zr(i.inertia||i.throwProps),he(u,"release","onRelease"),(!mn||L.type!=="touchmove")&&L.type.indexOf("cancel")===-1&&(he(u,"click","onClick"),Bt()-v<300&&he(u,"doubleclick","onDoubleClick"),Z=L.target||t,v=Bt(),ne=function(){v!==$r&&u.enabled()&&!u.isPressed&&!L.defaultPrevented&&(Z.click?Z.click():x.createEvent&&(ie=x.createEvent("MouseEvents"),ie.initMouseEvent("click",!0,!0,se,1,u.pointerEvent.screenX,u.pointerEvent.screenY,u.pointerX,u.pointerY,!1,!1,!1,!1,0,null),Z.dispatchEvent(ie)))},!mn&&!L.defaultPrevented&&q.delayedCall(.05,ne))):(zr(i.inertia||i.throwProps),!u.allowEventDefault&&L&&(i.dragClickables!==!1||!C.call(u,L.target))&&P&&(!Je||ot&&Je===ot)&&L.cancelable!==!1?($e=!0,tt(L)):$e=!1,he(u,"release","onRelease")),rn()&&R.duration(u.tween.duration()),P&&he(u,"dragend","onDragEnd"),!0},Jn=function(y){if(y&&u.isDragging&&!I){var b=y.target||t.parentNode,L=b.scrollLeft-b._gsScrollX,P=b.scrollTop-b._gsScrollY;(L||P)&&(ee?(H-=L*ee.a+P*ee.c,W-=P*ee.d+L*ee.b):(H-=L,W-=P),b._gsScrollX+=L,b._gsScrollY+=P,on(u.pointerX,u.pointerY))}},Zo=function(y){var b=Bt(),L=b-v<100,P=b-g<50,M=L&&$r===v,R=u.pointerEvent&&u.pointerEvent.defaultPrevented,V=L&&Xo===v,k=y.isTrusted||y.isTrusted==null&&L&&M;if((M||P&&u.vars.suppressClickOnDrag!==!1)&&y.stopImmediatePropagation&&y.stopImmediatePropagation(),L&&!(u.pointerEvent&&u.pointerEvent.defaultPrevented)&&(!M||k&&!V)){k&&M&&(Xo=v),$r=v;return}(u.isPressed||P||L)&&(!k||!y.detail||!L||R)&&tt(y),!L&&!P&&!Zn&&(y&&y.target&&(u.pointerEvent=y),he(u,"click","onClick"))},Qo=function(y){return ee?{x:y.x*ee.a+y.y*ee.c+ee.e,y:y.x*ee.b+y.y*ee.d+ee.f}:{x:y.x,y:y.y}};return Hr=e.get(t),Hr&&Hr.kill(),n.startDrag=function(B,y){var b,L,P,M;sn(B||u.pointerEvent,!0),y&&!u.hitTest(B||u.pointerEvent)&&(b=Ii(B||u.pointerEvent),L=Ii(t),P=Qo({x:b.left+b.width/2,y:b.top+b.height/2}),M=Qo({x:L.left+L.width/2,y:L.top+L.height/2}),H-=P.x-M.x,W-=P.y-M.y),u.isDragging||(u.isDragging=Zn=!0,he(u,"dragstart","onDragStart"))},n.drag=ii,n.endDrag=function(B){return at(B||u.pointerEvent,!0)},n.timeSinceDrag=function(){return u.isDragging?0:(Bt()-g)/1e3},n.timeSinceClick=function(){return(Bt()-v)/1e3},n.hitTest=function(B,y){return e.hitTest(u.target,B,y)},n.getDirection=function(B,y){var b=B==="velocity"&&ut?B:vn(B)&&!l?"element":"start",L,P,M,R,V,k;return b==="element"&&(V=Ii(u.target),k=Ii(B)),L=b==="start"?u.x-N:b==="velocity"?ut.getVelocity(t,d):V.left+V.width/2-(k.left+k.width/2),l?L<0?"counter-clockwise":"clockwise":(y=y||2,P=b==="start"?u.y-G:b==="velocity"?ut.getVelocity(t,f):V.top+V.height/2-(k.top+k.height/2),M=Math.abs(L/P),R=M<1/y?"":L<0?"left":"right",M<y&&(R!==""&&(R+="-"),R+=P<0?"up":"down"),R)},n.applyBounds=function(B,y){var b,L,P,M,R,V;if(B&&i.bounds!==B)return i.bounds=B,u.update(!0,y);if(ti(!0),Yr(),te&&!rn()){if(b=u.x,L=u.y,b>X?b=X:b<K&&(b=K),L>J?L=J:L<Q&&(L=Q),(u.x!==b||u.y!==L)&&(P=!0,u.x=u.endX=b,l?u.endRotation=b:u.y=u.endY=L,Se=!0,ht(!0),u.autoScroll&&!u.isDragging))for(rs(t.parentNode),M=t,Lt.scrollTop=se.pageYOffset!=null?se.pageYOffset:x.documentElement.scrollTop!=null?x.documentElement.scrollTop:x.body.scrollTop,Lt.scrollLeft=se.pageXOffset!=null?se.pageXOffset:x.documentElement.scrollLeft!=null?x.documentElement.scrollLeft:x.body.scrollLeft;M&&!V;)V=Zi(M.parentNode),R=V?Lt:M.parentNode,o&&R.scrollTop>R._gsMaxScrollY&&(R.scrollTop=R._gsMaxScrollY),h&&R.scrollLeft>R._gsMaxScrollX&&(R.scrollLeft=R._gsMaxScrollX),M=R;u.isThrowing&&(P||u.endX>X||u.endX<K||u.endY>J||u.endY<Q)&&zr(i.inertia||i.throwProps,P)}return u},n.update=function(B,y,b){if(y&&u.isPressed){var L=ai(t),P=qo.apply({x:u.x-N,y:u.y-G}),M=ai(t.parentNode,!0);M.apply({x:L.e-P.x,y:L.f-P.y},P),u.x-=P.x-M.e,u.y-=P.y-M.f,ht(!0),Qn()}var R=u.x,V=u.y;return Ko(!y),B?u.applyBounds():(Se&&b&&ht(!0),ti(!0)),y&&(on(u.pointerX,u.pointerY),Se&&ht(!0)),u.isPressed&&!y&&(h&&Math.abs(R-u.x)>.01||o&&Math.abs(V-u.y)>.01&&!l)&&Qn(),u.autoScroll&&(rs(t.parentNode,u.isDragging),m=u.isDragging,ht(!0),La(t,Jn),Aa(t,Jn)),u},n.enable=function(B){var y={lazy:!0},b,L,P;if(i.cursor!==!1&&(y.cursor=i.cursor||Dn),q.utils.checkPrefix("touchCallout")&&(y.touchCallout="none"),B!=="soft"){for(ya(_,h===o?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"),L=_.length;--L>-1;)P=_[L],dr||ye(P,"mousedown",sn),ye(P,"touchstart",sn),ye(P,"click",Zo,!0),q.set(P,y),P.getBBox&&P.ownerSVGElement&&h!==o&&q.set(P.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"}),i.allowContextMenu||ye(P,"contextmenu",jo);ir(_,!1)}return Aa(t,Jn),U=!0,ut&&B!=="soft"&&ut.track(I||t,a?"x,y":l?"rotation":"top,left"),t._gsDragID=b=t._gsDragID||"d"+Cd++,Gi[b]=u,I&&(I.enable(),I.element._gsDragID=b),(i.bounds||l)&&Qn(),i.bounds&&u.applyBounds(),u},n.disable=function(B){for(var y=u.isDragging,b=_.length,L;--b>-1;)ss(_[b],"cursor",null);if(B!=="soft"){for(ya(_,null),b=_.length;--b>-1;)L=_[b],ss(L,"touchCallout",null),ge(L,"mousedown",sn),ge(L,"touchstart",sn),ge(L,"click",Zo,!0),ge(L,"contextmenu",jo);ir(_,!0),Ae&&(ge(Ae,"touchcancel",at),ge(Ae,"touchend",at),ge(Ae,"touchmove",ii)),ge(x,"mouseup",at),ge(x,"mousemove",ii)}return La(t,Jn),U=!1,ut&&B!=="soft"&&(ut.untrack(I||t,a?"x,y":l?"rotation":"top,left"),u.tween&&u.tween.kill()),I&&I.disable(),Sa(ht),u.isDragging=u.isPressed=nn=!1,y&&he(u,"dragend","onDragEnd"),u},n.enabled=function(B,y){return arguments.length?B?u.enable(y):u.disable(y):U},n.kill=function(){return u.isThrowing=!1,u.tween&&u.tween.kill(),u.disable(),q.set(_,{clearProps:"userSelect"}),delete Gi[t._gsDragID],u},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~r.indexOf("scroll")&&(I=n.scrollProxy=new Rd(t,wd({onKill:function(){u.isPressed&&at(null)}},i)),t.style.overflowY=o&&!xs?"auto":"hidden",t.style.overflowX=h&&!xs?"auto":"hidden",t=I.content),l?p.rotation=1:(h&&(p[d]=1),o&&(p[f]=1)),w.force3D="force3D"in i?i.force3D:!0,su(ga(n)),n.enable(),n}return e.register=function(i){q=i,as()},e.create=function(i,n){return Os||as(!0),Yt(i).map(function(r){return new e(r,n)})},e.get=function(i){return Gi[(Yt(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(Bt()-Da)/1e3},e.hitTest=function(i,n,r){if(i===n)return!1;var a=Ii(i),l=Ii(n),d=a.top,f=a.left,h=a.right,o=a.bottom,c=a.width,u=a.height,_=l.left>h||l.right<f||l.top>o||l.bottom<d,p,g,m;return _||!r?!_:(m=(r+"").indexOf("%")!==-1,r=parseFloat(r)||0,p={left:Math.max(f,l.left),top:Math.max(d,l.top)},p.width=Math.min(h,l.right)-p.left,p.height=Math.min(o,l.bottom)-p.top,p.width<0||p.height<0?!1:m?(r*=.01,g=p.width*p.height,g>=c*u*r||g>=l.width*l.height*r):p.width>r&&p.height>r)},e}(Nd);bd(Xn.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Xn.zIndex=1e3;Xn.version="3.13.0";au()&&q.registerPlugin(Xn);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var _t,Ns,In,du,Pi,Ni,ks,fu,hu=function(){return _t||typeof window<"u"&&(_t=window.gsap)},Bs={},kd=function(e){return Math.round(e*1e4)/1e4},Us=function(e){return fu(e).id},yn=function(e){return Bs[Us(typeof e=="string"?In(e)[0]:e)]},wa=function(e){var t=Pi,i;if(e-ks>=.05)for(ks=e;t;)i=t.g(t.t,t.p),(i!==t.v1||e-t.t1>.2)&&(t.v2=t.v1,t.v1=i,t.t2=t.t1,t.t1=e),t=t._next},Bd={deg:360,rad:Math.PI*2},ls=function(){_t=hu(),_t&&(In=_t.utils.toArray,du=_t.utils.getUnit,fu=_t.core.getCache,Ni=_t.ticker,Ns=1)},Ud=function(e,t,i,n){this.t=e,this.p=t,this.g=e._gsap.get,this.rCap=Bd[i||du(this.g(e,t))],this.v1=this.v2=0,this.t1=this.t2=Ni.time,n&&(this._next=n,n._prev=this)},qn=function(){function s(t,i){Ns||ls(),this.target=In(t)[0],Bs[Us(this.target)]=this,this._props={},i&&this.add(i)}s.register=function(i){_t=i,ls()};var e=s.prototype;return e.get=function(i,n){var r=this._props[i]||console.warn("Not tracking "+i+" velocity."),a,l,d;return a=parseFloat(n?r.v1:r.g(r.t,r.p)),l=a-parseFloat(r.v2),d=r.rCap,d&&(l=l%d,l!==l%(d/2)&&(l=l<0?l+d:l-d)),kd(l/((n?r.t1:Ni.time)-r.t2))},e.getAll=function(){var i={},n=this._props,r;for(r in n)i[r]=this.get(r);return i},e.isTracking=function(i){return i in this._props},e.add=function(i,n){i in this._props||(Pi||(Ni.add(wa),ks=Ni.time),Pi=this._props[i]=new Ud(this.target,i,n,Pi))},e.remove=function(i){var n=this._props[i],r,a;n&&(r=n._prev,a=n._next,r&&(r._next=a),a?a._prev=r:Pi===n&&(Ni.remove(wa),Pi=0),delete this._props[i])},e.kill=function(i){for(var n in this._props)this.remove(n);i||delete Bs[Us(this.target)]},s.track=function(i,n,r){Ns||ls();for(var a=[],l=In(i),d=n.split(","),f=(r||"").split(","),h=l.length,o,c;h--;){for(o=yn(l[h])||new s(l[h]),c=d.length;c--;)o.add(d[c],f[c]||f[0]);a.push(o)}return a},s.untrack=function(i,n){var r=(n||"").split(",");In(i).forEach(function(a){var l=yn(a);l&&(r.length?r.forEach(function(d){return l.remove(d)}):l.kill(1))})},s.isTracking=function(i,n){var r=yn(i);return r&&r.isTracking(n)},s.getVelocity=function(i,n){var r=yn(i);return!r||!r.isTracking(n)?console.warn("Not tracking velocity of "+n):r.get(n)},s}();qn.getByTarget=yn;hu()&&_t.registerPlugin(qn);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ee,pu,Ia,_u,Hs,bn,gu,mu,Du,Io,yu,Pn,Gs,Eu,br=qn.getByTarget,Su=function(){return Ee||typeof window<"u"&&(Ee=window.gsap)&&Ee.registerPlugin&&Ee},Hd=function(e){return typeof e=="string"},Gn=function(e){return typeof e=="number"},qt=function(e){return typeof e=="object"},$s=function(e){return typeof e=="function"},Gd=1,Tu=Array.isArray,$d=function(e){return e},Yi=1e10,ba=1/Yi,Au=.05,Vd=function(e){return Math.round(e*1e4)/1e4},Yd=function(e,t,i){for(var n in t)!(n in e)&&n!==i&&(e[n]=t[n]);return e},zd=function s(e){var t={},i,n;for(i in e)t[i]=qt(n=e[i])&&!Tu(n)?s(n):n;return t},Pa=function(e,t,i,n,r){var a=t.length,l=0,d=Yi,f,h,o,c;if(qt(e)){for(;a--;){f=t[a],h=0;for(o in e)c=f[o]-e[o],h+=c*c;h<d&&(l=a,d=h)}if((r||Yi)<Yi&&r<Math.sqrt(d))return e}else for(;a--;)f=t[a],h=f-e,h<0&&(h=-h),h<d&&f>=n&&f<=i&&(l=a,d=h);return t[l]},Lu=function(e,t,i,n,r,a,l){if(e.end==="auto")return e;var d=e.end,f,h;if(i=isNaN(i)?Yi:i,n=isNaN(n)?-1e10:n,qt(t)){if(f=t.calculated?t:($s(d)?d(t,l):Pa(t,d,i,n,a))||t,!t.calculated){for(h in f)t[h]=f[h];t.calculated=!0}f=f[r]}else f=$s(d)?d(t,l):Tu(d)?Pa(t,d,i,n,a):parseFloat(d);return f>i?f=i:f<n&&(f=n),{max:f,min:f,unitFactor:e.unitFactor}},Pr=function(e,t,i){return isNaN(e[t])?i:+e[t]},bo=function(e,t){return t*Au*e/Io},Oa=function(e,t,i){return Math.abs((t-e)*Io/i/Au)},Cu={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},vu=function(e,t,i,n){if(t.linkedProps){var r=t.linkedProps.split(","),a={},l,d,f,h,o,c;for(l=0;l<r.length;l++)d=r[l],f=t[d],f&&(Gn(f.velocity)?h=f.velocity:(o=o||br(e),h=o&&o.isTracking(d)?o.get(d):0),c=Math.abs(h/Pr(f,"resistance",n)),a[d]=parseFloat(i(e,d))+bo(h,c));return a}},Wd=function(e,t,i,n,r,a){if(i===void 0&&(i=10),n===void 0&&(n=.2),r===void 0&&(r=1),Hd(e)&&(e=_u(e)[0]),!e)return 0;var l=0,d=Yi,f=t.inertia||t,h=Du(e).get,o=Pr(f,"resistance",bn.resistance),c,u,_,p,g,m,D,S,A,T;T=vu(e,f,h,o);for(c in f)Cu[c]||(u=f[c],qt(u)||(S=S||br(e),S&&S.isTracking(c)?u=Gn(u)?{velocity:u}:{velocity:S.get(c)}:(p=+u||0,_=Math.abs(p/o))),qt(u)&&(Gn(u.velocity)?p=u.velocity:(S=S||br(e),p=S&&S.isTracking(c)?S.get(c):0),_=yu(n,i,Math.abs(p/Pr(u,"resistance",o))),g=parseFloat(h(e,c))||0,m=g+bo(p,_),"end"in u&&(u=Lu(u,T&&c in T?T:m,u.max,u.min,c,f.radius,p),Pn===t&&(Pn=f=zd(t)),f[c]=Yd(u,f[c],"end")),"max"in u&&m>+u.max+ba?(A=u.unitFactor||bn.unitFactors[c]||1,D=g>u.max&&u.min!==u.max||p*A>-15&&p*A<45?n+(i-n)*.1:Oa(g,u.max,p),D+r<d&&(d=D+r)):"min"in u&&m<+u.min-ba&&(A=u.unitFactor||bn.unitFactors[c]||1,D=g<u.min&&u.min!==u.max||p*A>-45&&p*A<15?n+(i-n)*.1:Oa(g,u.min,p),D+r<d&&(d=D+r)),D>l&&(l=D)),_>l&&(l=_));return l>d&&(l=d),l>i?i:l<n?n:l},xa=function(){Ee=Su(),Ee&&(Ia=Ee.parseEase,_u=Ee.utils.toArray,gu=Ee.utils.getUnit,Du=Ee.core.getCache,yu=Ee.utils.clamp,Gs=Ee.core.getStyleSaver,Eu=Ee.core.reverting||function(){},Hs=Ia("power3"),Io=Hs(.05),mu=Ee.core.PropTween,Ee.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),bn=Ee.config(),Ee.registerPlugin(qn),pu=1)},Po={version:"3.13.0",name:"inertia",register:function(e){Ee=e,xa()},init:function(e,t,i,n,r){pu||xa();var a=br(e);if(t==="auto"){if(!a){console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");return}t=a.getAll()}this.styles=Gs&&typeof e.style=="object"&&Gs(e),this.target=e,this.tween=i,Pn=t;var l=e._gsap,d=l.get,f=t.duration,h=qt(f),o=t.preventOvershoot||h&&f.overshoot===0,c=Pr(t,"resistance",bn.resistance),u=Gn(f)?f:Wd(e,t,h&&f.max||10,h&&f.min||.2,h&&"overshoot"in f?+f.overshoot:o?0:1),_,p,g,m,D,S,A,T,C;t=Pn,Pn=0,C=vu(e,t,d,c);for(_ in t)Cu[_]||(p=t[_],$s(p)&&(p=p(n,e,r)),Gn(p)?D=p:qt(p)&&!isNaN(p.velocity)?D=+p.velocity:a&&a.isTracking(_)?D=a.get(_):console.warn("ERROR: No velocity was defined for "+e+" property: "+_),S=bo(D,u),T=0,g=d(e,_),m=gu(g),g=parseFloat(g),qt(p)&&(A=g+S,"end"in p&&(p=Lu(p,C&&_ in C?C:A,p.max,p.min,_,t.radius,D)),"max"in p&&+p.max<A?o||p.preventOvershoot?S=p.max-g:T=p.max-g-S:"min"in p&&+p.min>A&&(o||p.preventOvershoot?S=p.min-g:T=p.min-g-S)),this._props.push(_),this.styles&&this.styles.save(_),this._pt=new mu(this._pt,e,_,g,0,$d,0,l.set(e,_,this)),this._pt.u=m||0,this._pt.c1=S,this._pt.c2=T);return i.duration(u),Gd},render:function(e,t){var i=t._pt;if(e=Hs(t.tween._time/t.tween._dur),e||!Eu())for(;i;)i.set(i.t,i.p,Vd(i.s+i.c1*e+i.c2*e*e)+i.u,i.d,e),i=i._next;else t.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(s){return Po[s]=qn[s]});Su()&&Ee.registerPlugin(Po);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Xd=/(?:^\s+|\s+$)/g,qd=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function wu(s){var e=s.nodeType,t="";if(e===1||e===9||e===11){if(typeof s.textContent=="string")return s.textContent;for(s=s.firstChild;s;s=s.nextSibling)t+=wu(s)}else if(e===3||e===4)return s.nodeValue;return t}function Vs(s,e,t,i,n){for(var r=s.firstChild,a=[],l;r;)r.nodeType===3?(l=(r.nodeValue+"").replace(/^\n+/g,""),i||(l=l.replace(/\s+/g," ")),a.push.apply(a,Iu(l,e,t,i,n))):(r.nodeName+"").toLowerCase()==="br"?a[a.length-1]+="<br>":a.push(r.outerHTML),r=r.nextSibling;if(!n)for(l=a.length;l--;)a[l]==="&"&&a.splice(l,1,"&amp;");return a}function Iu(s,e,t,i,n){if(s+="",t&&(s=s.trim?s.trim():s.replace(Xd,"")),e&&e!=="")return s.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var r=[],a=s.length,l=0,d,f;l<a;l++)f=s.charAt(l),(f.charCodeAt(0)>=55296&&f.charCodeAt(0)<=56319||s.charCodeAt(l+1)>=65024&&s.charCodeAt(l+1)<=65039)&&(d=((s.substr(l,12).split(qd)||[])[1]||"").length||2,f=s.substr(l,d),r.emoji=1,l+=d-1),r.push(n?f:f===">"?"&gt;":f==="<"?"&lt;":i&&f===" "&&(s.charAt(l-1)===" "||s.charAt(l+1)===" ")?"&nbsp;":f);return r}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var En,nr,jd=function(){return En||typeof window<"u"&&(En=window.gsap)&&En.registerPlugin&&En},jn={version:"3.13.0",name:"text",init:function(e,t,i){typeof t!="object"&&(t={value:t});var n=e.nodeName.toUpperCase(),r=this,a=t,l=a.newClass,d=a.oldClass,f=a.preserveSpaces,h=a.rtl,o=r.delimiter=t.delimiter||"",c=r.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),u,_,p,g,m,D,S,A;if(r.svg=e.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in e)&&!r.svg)return!1;if(r.target=e,!("value"in t)){r.text=r.original=[""];return}for(p=Vs(e,o,!1,f,r.svg),nr||(nr=document.createElement("div")),nr.innerHTML=t.value,_=Vs(nr,o,!1,f,r.svg),r.from=i._from,(r.from||h)&&!(h&&r.from)&&(n=p,p=_,_=n),r.hasClass=!!(l||d),r.newClass=h?d:l,r.oldClass=h?l:d,n=p.length-_.length,u=n<0?p:_,n<0&&(n=-n);--n>-1;)u.push(c);if(t.type==="diff"){for(g=0,m=[],D=[],S="",n=0;n<_.length;n++)A=_[n],A===p[n]?S+=A:(m[g]=S+A,D[g++]=S+p[n],S="");_=m,p=D,S&&(_.push(S),p.push(S))}t.speed&&i.duration(Math.min(.05/t.speed*u.length,t.maxDuration||9999)),r.rtl=h,r.original=p,r.text=_,r._props.push("text")},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var i=t.text,n=t.hasClass,r=t.newClass,a=t.oldClass,l=t.delimiter,d=t.target,f=t.fillChar,h=t.original,o=t.rtl,c=i.length,u=(o?1-e:e)*c+.5|0,_,p,g;n&&e?(_=r&&u,p=a&&u!==c,g=(_?"<span class='"+r+"'>":"")+i.slice(0,u).join(l)+(_?"</span>":"")+(p?"<span class='"+a+"'>":"")+l+h.slice(u).join(l)+(p?"</span>":"")):g=i.slice(0,u).join(l)+l+h.slice(u).join(l),t.svg?d.textContent=g:d.innerHTML=f==="&nbsp;"&&~g.indexOf("  ")?g.split("  ").join("&nbsp;&nbsp;"):g}};jn.splitInnerHTML=Vs;jn.emojiSafeSplit=Iu;jn.getText=wu;jd()&&En.registerPlugin(jn);const Kd="/HUE9000/assets/background-CSxqx5jM.mp3",Zd="/HUE9000/assets/dial-D7nrXNFL.mp3",Qd="/HUE9000/assets/button-press-CrnyIF74.mp3",Jd="/HUE9000/assets/itemAppear-BlBO6oJ9.mp3",ef="/HUE9000/assets/terminalBoot-M_vW1xbt.mp3",tf="/HUE9000/assets/lcdPowerOn-pmtFEAtA.mp3",nf="/HUE9000/assets/lensStartup-Fv_Vx4l9.mp3",rf="/HUE9000/assets/off-CA5ILSVS.mp3",Ma="/HUE9000/assets/buttonEnergize-DAvZvvQv.mp3",sf="/HUE9000/assets/lights-on-B42H3cLM.mp3",of="/HUE9000/assets/logo-DPWeN9u-.svg",af="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='dial-svg'%20viewBox='0%200%20200%2040'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cdefs%3e%3clinearGradient%20id='dial-shading-gradient'%20x1='0%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3c!--%20UPDATED:%204-stop%20gradient%20for%20rounded%20edge%20effect%20--%3e%3cstop%20offset='0%25'%20class='dial-shading-top-highlight'%20/%3e%3cstop%20offset='7%25'%20class='dial-shading-top-fade'%20/%3e%3cstop%20offset='93%25'%20class='dial-shading-bottom-fade'%20/%3e%3cstop%20offset='100%25'%20class='dial-shading-bottom-shadow'%20/%3e%3c/linearGradient%3e%3c/defs%3e%3c!--%20Background%20Face:%20Sized%20to%20fill%20the%20viewBox%20exactly%20--%3e%3crect%20class='dial-face'%20x='0'%20y='0'%20width='200'%20height='40'%20/%3e%3c!--%20Ridge%20container:%20This%20group%20will%20be%20populated%20by%20the%20DialController%20script%20--%3e%3cg%20class='dial-ridges-group'%3e%3c/g%3e%3c!--%20Shading%20Overlay%20--%3e%3crect%20class='dial-shading-overlay'%20width='100%25'%20height='100%25'%20fill='url(%23dial-shading-gradient)'%20style='pointer-events:%20none;'%20/%3e%3c/svg%3e",lf="/HUE9000/assets/metal-grill-Bm5JHJvP.png",uf=1.3,cf=1.3,df=.1,ff=150,hf=32,pf=1.6,_f=.15,gf=.8,mf=2,Ti=40.6,Df=.5,yf=.4,Ef="power1.out",Sf=60,Tf=1.7,Af=2.6,Lf="sine.inOut",Ce=[0,344.182,311.455,278.727,246,213.273,180.545,147.818,115.091,82.364,60,40],Ct={env:0,lcd:0,logo:0,btn:0},Cf=.75,vf=.3,wf=.3,If=25,bu=1500,bf=bu/1e3,Pf=1,Of=.1,xf=.05,Mf=.3,Ff={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},Rf=1,Nf=.04,kf=.008,Bf=.05,Uf=.03,Hf=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],Gf=.7,$f=.2,Vf=.2,Yf=250,zf=.005,Wf=.045,Xf=9,qf=1.8,jf=75,Oi=.85,Kf=0,Zf=.33,Qf=.66,Jf=1,eh=1.05,un=(s,e)=>s.map(t=>({...t,pos:t.pos*e})),Pu=[{power:Kf,stops:un([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],Oi)},{power:Zf,stops:un([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],Oi)},{power:Qf,stops:un([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],Oi)},{power:Jf,stops:un([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],Oi)},{power:eh,stops:un([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],Oi)}],th=Pu[0].stops.length,ih=150,nh=40,rh=15,sh=20,oh=500,ah=50,lh=250,uh=.4,ch=530,dh=370,Y={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},Oo={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color-base",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistYellow:{numCycles:2,periodStart:.15,periodEnd:.12,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.6,unselected:.4},peakOpacity:{selected:.9,unselected:.7},finalOpacity:{selected:.6,unselected:.4},initialSize:{selected:"8px",unselected:"5px"},peakSize:{selected:"12px",unselected:"8px"},finalSize:{selected:"8px",unselected:"5px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistOrange:{numCycles:2,periodStart:.18,periodEnd:.15,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.65,unselected:.45},peakOpacity:{selected:1,unselected:.8},finalOpacity:{selected:.65,unselected:.45},initialSize:{selected:"9px",unselected:"6px"},peakSize:{selected:"14px",unselected:"10px"},finalSize:{selected:"9px",unselected:"6px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistRedThenSolid:{numCycles:1,periodStart:.4,periodEnd:.4,onDurationRatio:.6,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.7,unselected:.7},peakOpacity:{selected:1,unselected:1},finalOpacity:{selected:.8,unselected:.8},initialSize:{selected:"10px",unselected:"10px"},peakSize:{selected:"16px",unselected:"16px"},finalSize:{selected:"10px",unselected:"10px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function fh(s){const e=Oo[s];if(!e)return .2;let t=0;for(let n=0;n<e.numCycles;n++){const r=e.numCycles>1?n/(e.numCycles-1):1,a=e.periodStart+r*(e.periodEnd-e.periodStart);t+=a}const i=Math.max(.15,e.periodEnd*1.5);return t+=i,t}const hh={ENABLED:!0,PERIOD:2.5,ELIGIBILITY_CLASS:"is-energized",GLOW_OPACITY_RANGE:[.4,.6],GLOW_SCALE_RANGE:[.95,1.05]},ph={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},_h={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},gh=["Commanding","Analytical","Focused","Advisory","Introspective","Evaluative"],mh={INTENSITY_BARS:36,INTENSITY_DOTS:36,MOOD_MAJOR_BLOCKS:6,MOOD_FINE_DOTS:36,RESONANCE_IDLE_DELAY_MS:250},Dh={MAX_STAGE:3,LENS_ANIMATION_EASING_DEFAULT:"power2.inOut",STAGE_1:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistYellow",BUTTON_FLASH_GLOW_COLOR:"oklch(0.85 0.15 85)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S1",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:82.364,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:82.364},STAGE_2:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistOrange",BUTTON_FLASH_GLOW_COLOR:"oklch(0.75 0.16 50)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S2",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:60.636,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:60.636},STAGE_3:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistRedThenSolid",BUTTON_FLASH_GLOW_COLOR:"oklch(0.65 0.22 25)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S3",LENS_ANIM_DURATION_S:1,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:40.6,DIAL_B_POWER_TARGET_MODE:"absolute_100",DIAL_B_POWER_VALUE:1,HUE_ASSIGN_TARGET_HUE:40.6}},yh={masterVolume:1,musicCrossfadeDuration:2,soundCooldowns:{itemAppear:250,terminalBoot:4e3,lcdPowerOn:6e3},sounds:{backgroundMusic:{src:Kd,loop:!0,volume:.35,html5:!0},dialLoop:{src:Zd,loop:!0,volume:.35,html5:!1},buttonPress:{src:Qd,loop:!1,volume:.8,html5:!1},itemAppear:{src:Jd,loop:!1,volume:.6,html5:!1},terminalBoot:{src:ef,loop:!1,volume:.9,fadeOutDuration:4e3,html5:!1},lcdPowerOn:{src:tf,loop:!1,volume:.8,fadeOutDuration:6e3,html5:!1},lensStartup:{src:nf,loop:!1,volume:.9,html5:!1},powerOff:{src:rf,loop:!1,volume:1,html5:!1},buttonEnergize:{src:Ma,loop:!1,volume:.2,html5:!1},themeEngage:{src:sf,loop:!1,volume:.9,html5:!1},auxModeChange:{src:Ma,loop:!1,volume:.7,html5:!1}}},xi={fonts:{id:"systemFonts",name:"SYS_FONTS",type:"fontsDocumentReady",timeout:7e3,initialStatus:"[ANALYZING FONT CACHE...]",successMessage:"[SYS_FONTS: CACHE VALIDATED ]",timeoutMessage:"[SYS_FONTS: CACHE TIMEOUT X]",errorMessage:"[SYS_FONTS: LOAD FAILURE X]",streamOutputSuccess:"SYSTEM FONT INTEGRITY: CONFIRMED",streamOutputError:"ERROR: UNABLE TO VERIFY SYSTEM FONTS"},graphics:{id:"coreGraphics",name:"GFX_PIPELINE",type:"fetch",assets:[{id:"logoSvg",name:"logo.svg",url:of,type:"fetch"},{id:"dialSvg",name:"dial.svg",url:af,type:"fetch"},{id:"grillTexture",name:"metal-grill.png",url:lf,type:"fetchImage"}],initialStatus:"[INITIALIZING GFX SUBSYSTEM...]",successMessage:"[GFX_PIPELINE: CORE ASSETS LOADED ]",errorMessage:"[GFX_PIPELINE: ASSET LOAD FAILURE X]",streamOutputSuccess:"GRAPHICS PACKET SIGNATURE: VALID",streamOutputError:"ERROR: GRAPHICS DATA CORRUPTION DETECTED",individualAssetStatusTemplate:(s,e)=>`LOAD GFX MODULE: ${s}... ${e}`},audio:{id:"coreAudio",name:"AUDIO_IO_BUFFER",type:"audioManager",assets:[{id:"buttonPressSfx",keyInAudioManager:"buttonPress",name:"button-press.mp3"}],initialStatus:"[ESTABLISHING AUDIO SYNC...]",successMessage:"[AUDIO_IO_BUFFER: SYNC CONFIRMED ]",errorMessage:"[AUDIO_IO_BUFFER: SYNC FAILED X]",streamOutputSuccess:"AUDIO STREAM INTEGRITY: OPTIMAL",streamOutputError:"ERROR: AUDIO DESYNCHRONIZATION",individualAssetStatusTemplate:(s,e)=>`SYNC AUDIO CH: ${s}... ${e}`}},Re={streamCharScrollIntervalMs:75,randomCharSet:"0123456789ABCDEF*/%?$#@!&<>()[]{}|-_+=:.",streamTextLength:250,staggerDelayMs:{fonts:50,graphics:150,audio:250},baseDurationMs:{fonts:700,graphics:1e3,audio:900},engageButtonAppearDelayMs:300,preloaderFadeOutDurationMs:500,preloaderInitialFadeInDurationMs:300,preloaderSoundFadeOutMs:750},Eh=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:Oo,APP_LOAD_FADE_IN_DURATION:vf,AUDIO_CONFIG:yh,AUTO_PLAY_START_DELAY:Cf,BODY_FADE_IN_DURATION:wf,DEBOUNCE_DELAY:ff,DEFAULT_ASSIGNMENT_SELECTIONS:Ct,DEFAULT_DIAL_A_HUE:Ti,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:mf,DIAL_CANVAS_FADE_IN_DURATION:Df,DIAL_GRADIENT_SCALE_FACTOR:gf,GSAP_BUTTON_IDLE_DURATION_MAX:Af,GSAP_BUTTON_IDLE_DURATION_MIN:Tf,GSAP_BUTTON_IDLE_EASE:Lf,GSAP_TWEEN_DURATION:yf,GSAP_TWEEN_EASE:Ef,HARMONIC_RESONANCE_PARAMS:hh,HIGHLIGHT_WIDTH_FACTOR:_f,HUE_ASSIGNMENT_ROW_HUES:Ce,HUE_UPDATE_THRESHOLD:df,IDLE_LIGHT_DRIFT_PARAMS:ph,LCD_TEXT_FADE_IN_DURATION:Mf,LENS_GRADIENT_BREAKPOINTS:Pu,LENS_GRADIENT_POSITION_SCALE:Oi,LENS_HOTSPOT_HUE_OFFSET:jf,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:Wf,LENS_OSCILLATION_AMPLITUDE_MIN:zf,LENS_OSCILLATION_HUE_SMOOTHING_DURATION:Vf,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:qf,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:Xf,LENS_OSCILLATION_RESTART_DELAY:Yf,LENS_OSCILLATION_SMOOTHING_DURATION:$f,LENS_OSCILLATION_THRESHOLD:Gf,LENS_STARTUP_RAMP_DURATION:bu,LENS_STARTUP_TARGET_POWER:If,MIN_PHASE_DURATION_FOR_STEPPING:xf,MOOD_MATRIX_DEFINITIONS:gh,NUM_LENS_GRADIENT_STOPS:th,NUM_RIDGES:hf,P3_LENS_RAMP_DURATION_S:bf,PERCEPTUAL_AUDIO_OFFSET_MS:Sf,PIXELS_PER_DEGREE_HUE:cf,PIXELS_PER_DEGREE_ROTATION:uf,PRELOADER_ASSETS:xi,PRELOADER_CONFIG:Re,RESISTIVE_SHUTDOWN_PARAMS:Dh,RIDGE_WIDTH_FACTOR:pf,STARTUP_BUTTON_ENERGIZE_STAGGER:Uf,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:Nf,STARTUP_DIM_FACTORS_ANIMATION_DURATION:Rf,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:kf,STARTUP_LCD_GROUP_APPEAR_STAGGER:Bf,STARTUP_L_REDUCTION_FACTORS:Ff,STATE_TRANSITION_ECHO_PARAMS:_h,SYSTEM_READY_PHASE_DURATION:Of,TERMINAL_CURSOR_BLINK_OFF_MS:dh,TERMINAL_CURSOR_BLINK_ON_MS:ch,TERMINAL_INTERACTION_DEBOUNCE_MS:oh,TERMINAL_MAX_LINES_IN_DOM:ih,TERMINAL_SCROLL_DURATION_S:uh,TERMINAL_THINKING_DELAY_MAX_MS:lh,TERMINAL_THINKING_DELAY_MIN_MS:ah,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:rh,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:sh,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:nh,THEME_TRANSITION_DURATION:Pf,V2_DISPLAY_PARAMS:mh,estimateFlickerDuration:fh,selectorsForDimExitAnimation:Hf},Symbol.toStringTag,{value:"Module"}));function Sh(s,e){let t;return function(...n){const r=this,a=()=>{t=null,s.apply(r,n)};clearTimeout(t),t=setTimeout(a,e)}}function Th(s,e){let t,i,n;return function(...r){const a=this;t?(clearTimeout(i),i=setTimeout(()=>{Date.now()-n>=e&&(s.apply(a,r),n=Date.now())},e-(Date.now()-n))):(s.apply(a,r),n=Date.now(),t=!0)}}function Ys(s,e,t){return Math.min(Math.max(s,e),t)}let Ah=class{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.off(e,t)}}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(i=>i!==t))}};const zs=new Ah;function ce(s,e){zs.events[s]&&zs.events[s].forEach(t=>{try{t(e)}catch(i){console.error(`[AppState EMIT] Error in listener for '${s}':`,i,{payload:e})}})}let ve={A:{id:"A",hue:Ti,rotation:0,targetHue:Ti,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},Ws={env:{hue:Ce[Ct.env],isColorless:Ce[Ct.env]===Ce[0]},lcd:{hue:Ce[Ct.lcd],isColorless:Ce[Ct.lcd]===Ce[0]},logo:{hue:Ce[Ct.logo],isColorless:Ce[Ct.logo]===Ce[0]},btn:{hue:Ce[Ct.btn],isColorless:Ce[Ct.btn]===Ce[0]}},hr="dim",pr=0,_r="idle",gr="loading",mr=-1,Dr=0,Xs=!1;function Et(s){const e=ve[s];if(e)return{...e}}function Ou(s){const e=Ws[s];if(e)return{...e}}function xo(){return hr}function ci(){return pr}function Sn(){return _r}function we(){return gr}function qs(){return mr}function yi(){return Dr}function js(){return Xs}function Zt(s,e){const t=!ve[s]||Object.keys(ve[s]).length===0;t&&(s==="A"||s==="B")&&(ve[s]={id:s,hue:s==="A"?Ti:0,rotation:0,targetHue:s==="A"?Ti:0,targetRotation:0,isDragging:!1});const i={...ve[s]};s==="A"?(e.hasOwnProperty("hue")&&(e.hue=(e.hue%360+360)%360),e.hasOwnProperty("targetHue")&&(e.targetHue=(e.targetHue%360+360)%360)):s==="B"&&(e.hasOwnProperty("hue")&&(e.hue=Ys(e.hue,0,359.999)),e.hasOwnProperty("targetHue")&&(e.targetHue=Ys(e.targetHue,0,359.999))),Object.assign(ve[s],e),(t||i.hue!==ve[s].hue||i.rotation!==ve[s].rotation||i.isDragging!==ve[s].isDragging||i.targetHue!==ve[s].targetHue||i.targetRotation!==ve[s].targetRotation)&&(s==="A"&&Math.abs(i.hue-ve[s].hue)>.01,ce("dialUpdated",{id:s,state:{...ve[s]}}))}function Mo(s,e){if(Ws.hasOwnProperty(s)){const t=(Number(e)%360+360)%360,i=Ce.length>0&&t===Ce[0],n=Ws[s];(n.hue!==t||n.isColorless!==i)&&({...n},n.hue=t,n.isColorless=i,ce("targetColorChanged",{targetKey:s,hue:t,isColorless:i}))}}function Fo(s){["dim","dark","light"].includes(s)&&hr!==s&&(hr=s,ce("themeChanged",hr))}function $n(s){const e=Math.max(0,Math.min(s/100,1));Math.abs(pr-e)>1e-4&&(pr=e,ce("trueLensPowerChanged",pr))}function Lh(s){["idle","dragging","settling"].includes(s)&&_r!==s&&(_r=s,ce("dialBInteractionChange",_r))}function Vn(s){["loading","starting-up","interactive","error"].includes(s)&&gr!==s&&(gr=s,ce("appStatusChanged",gr))}function Ks(s){typeof s=="number"&&mr!==s&&(mr=s,ce("startupPhaseNumberChanged",mr))}function Ro(s){if(typeof s=="number"&&Dr!==s){const e=Dr;Dr=s,ce("resistiveShutdownStageChanged",{oldStage:e,newStage:s})}}function Zs(s){typeof s=="boolean"&&Xs!==s&&(Xs=s,ce("mainPowerOffButtonDisabledChanged",{isDisabled:s}))}function oe(s,e){return typeof e!="function"?()=>{}:zs.on(s,e)}(!ve.A||Object.keys(ve.A).length===0)&&Zt("A",{hue:Ti,rotation:0,targetHue:Ti,targetRotation:0,isDragging:!1});(!ve.B||Object.keys(ve.B).length===0)&&Zt("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});const Br=Object.freeze(Object.defineProperty({__proto__:null,emit:ce,getAppStatus:we,getCurrentStartupPhaseNumber:qs,getCurrentTheme:xo,getDialBInteractionState:Sn,getDialState:Et,getIsMainPowerOffButtonDisabled:js,getResistiveShutdownStage:yi,getTargetColorProperties:Ou,getTrueLensPower:ci,setAppStatus:Vn,setCurrentStartupPhaseNumber:Ks,setDialBInteractionState:Lh,setIsMainPowerOffButtonDisabled:Zs,setResistiveShutdownStage:Ro,setTargetColorProperties:Mo,setTheme:Fo,setTrueLensPower:$n,subscribe:oe,updateDialState:Zt},Symbol.toStringTag,{value:"Module"})),rr=new Map,O={register(s,e){rr.has(s)&&console.warn(`[ServiceLocator] Service "${s}" is being overwritten.`),rr.set(s,e)},get(s){if(!rr.has(s))throw new Error(`[ServiceLocator] Service "${s}" not found. Ensure it was registered in main.js before being accessed.`);return rr.get(s)}};function Ch(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function vh(){const s=Ch();if(s.__xstate__)return s.__xstate__}const wh=s=>{if(typeof window>"u")return;const e=vh();e&&e.register(s)};class Fa{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const xu=".",Ih="",Mu="",bh="#",Ph="*",Fu="xstate.init",Or="xstate.stop";function Oh(s,e){return{type:`xstate.after.${s}.${e}`}}function Qs(s,e){return{type:`xstate.done.state.${s}`,output:e}}function xh(s,e){return{type:`xstate.done.actor.${s}`,output:e,actorId:s}}function Mh(s,e){return{type:`xstate.error.actor.${s}`,error:e,actorId:s}}function Ru(s){return{type:Fu,input:s}}function Tt(s){setTimeout(()=>{throw s})}const Fh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nu(s,e){const t=Ra(s),i=Ra(e);return typeof i=="string"?typeof t=="string"?i===t:!1:typeof t=="string"?t in i:Object.keys(t).every(n=>n in i?Nu(t[n],i[n]):!1)}function No(s){if(Bu(s))return s;const e=[];let t="";for(let i=0;i<s.length;i++){switch(s.charCodeAt(i)){case 92:t+=s[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=s[i]}return e.push(t),e}function Ra(s){if(pp(s))return s.value;if(typeof s!="string")return s;const e=No(s);return Rh(e)}function Rh(s){if(s.length===1)return s[0];const e={};let t=e;for(let i=0;i<s.length-1;i++)if(i===s.length-2)t[s[i]]=s[i+1];else{const n=t;t={},n[s[i]]=t}return e}function Na(s,e){const t={},i=Object.keys(s);for(let n=0;n<i.length;n++){const r=i[n];t[r]=e(s[r],r,s,n)}return t}function ku(s){return Bu(s)?s:[s]}function zt(s){return s===void 0?[]:ku(s)}function Js(s,e,t,i){return typeof s=="function"?s({context:e,event:t,self:i}):s}function Bu(s){return Array.isArray(s)}function Nh(s){return s.type.startsWith("xstate.error.actor")}function Mi(s){return ku(s).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Uu(s){if(!(s===void 0||s===Ih))return zt(s)}function eo(s,e,t){var r,a,l;const i=typeof s=="object",n=i?s:void 0;return{next:(r=i?s.next:s)==null?void 0:r.bind(n),error:(a=i?s.error:e)==null?void 0:a.bind(n),complete:(l=i?s.complete:t)==null?void 0:l.bind(n)}}function ka(s,e){return`${e}.${s}`}function ko(s,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return s.implementations.actors[e];const[,i,n]=t,a=s.getStateNodeById(n).config.invoke;return(Array.isArray(a)?a[i]:a).src}function Ba(s,e){return`${s.sessionId}.${e}`}let kh=0;function Bh(s,e){const t=new Map,i=new Map,n=new WeakMap,r=new Set,a={},{clock:l,logger:d}=e,f={schedule:(c,u,_,p,g=Math.random().toString(36).slice(2))=>{const m={source:c,target:u,event:_,delay:p,id:g,startedAt:Date.now()},D=Ba(c,g);o._snapshot._scheduledEvents[D]=m;const S=l.setTimeout(()=>{delete a[D],delete o._snapshot._scheduledEvents[D],o._relay(c,u,_)},p);a[D]=S},cancel:(c,u)=>{const _=Ba(c,u),p=a[_];delete a[_],delete o._snapshot._scheduledEvents[_],p!==void 0&&l.clearTimeout(p)},cancelAll:c=>{for(const u in o._snapshot._scheduledEvents){const _=o._snapshot._scheduledEvents[u];_.source===c&&f.cancel(c,_.id)}}},h=c=>{if(!r.size)return;const u={...c,rootId:s.sessionId};r.forEach(_=>{var p;return(p=_.next)==null?void 0:p.call(_,u)})},o={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${kh++}`,_register:(c,u)=>(t.set(c,u),c),_unregister:c=>{t.delete(c.sessionId);const u=n.get(c);u!==void 0&&(i.delete(u),n.delete(c))},get:c=>i.get(c),_set:(c,u)=>{const _=i.get(c);if(_&&_!==u)throw new Error(`Actor with system ID '${c}' already exists.`);i.set(c,u),n.set(u,c)},inspect:c=>{const u=eo(c);return r.add(u),{unsubscribe(){r.delete(u)}}},_sendInspectionEvent:h,_relay:(c,u,_)=>{o._sendInspectionEvent({type:"@xstate.event",sourceRef:c,actorRef:u,event:_}),u._send(_)},scheduler:f,getSnapshot:()=>({_scheduledEvents:{...o._snapshot._scheduledEvents}}),start:()=>{const c=o._snapshot._scheduledEvents;o._snapshot._scheduledEvents={};for(const u in c){const{source:_,target:p,event:g,delay:m,id:D}=c[u];f.schedule(_,p,g,m,D)}},_clock:l,_logger:d};return o}let us=!1;const Bo=1;let Ne=function(s){return s[s.NotStarted=0]="NotStarted",s[s.Running=1]="Running",s[s.Stopped=2]="Stopped",s}({});const Uh={clock:{setTimeout:(s,e)=>setTimeout(s,e),clearTimeout:s=>clearTimeout(s)},logger:console.log.bind(console),devTools:!1};class Hh{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Fa(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ne.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...Uh,...t},{clock:n,logger:r,parent:a,syncSnapshot:l,id:d,systemId:f,inspect:h}=i;this.system=a?a.system:Bh(this,{clock:n,logger:r}),h&&!a&&this.system.inspect(eo(h)),this.sessionId=this.system._bookId(),this.id=d??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=a,this._syncSnapshot=l,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:o=>{this._deferred.push(o)},system:this.system,stopChild:o=>{if(o._parent!==this)throw new Error(`Cannot stop child actor ${o.id} of ${this.id} because it is not a child`);o._stop()},emit:o=>{const c=this.eventListeners.get(o.type),u=this.eventListeners.get("*");if(!c&&!u)return;const _=[...c?c.values():[],...u?u.values():[]];for(const p of _)p(o)},actionExecutor:o=>{const c=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:o.type,params:o.params}}),!o.exec)return;const u=us;try{us=!0,o.exec(o.info,o.params)}finally{us=u}};this._processingStatus===Ne.Running?c():this._deferred.push(c)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),f&&(this._systemId=f,this.system._set(f,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),f&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(e,t){var n,r;this._snapshot=e;let i;for(;i=this._deferred.shift();)try{i()}catch(a){this._deferred.length=0,this._snapshot={...e,status:"error",error:a}}switch(this._snapshot.status){case"active":for(const a of this.observers)try{(n=a.next)==null||n.call(a,e)}catch(l){Tt(l)}break;case"done":for(const a of this.observers)try{(r=a.next)==null||r.call(a,e)}catch(l){Tt(l)}this._stopProcedure(),this._complete(),this._doneEvent=xh(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){var r;const n=eo(e,t,i);if(this._processingStatus!==Ne.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(r=n.complete)==null||r.call(n)}catch(a){Tt(a)}break;case"error":{const a=this._snapshot.error;if(!n.error)Tt(a);else try{n.error(a)}catch(l){Tt(l)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const n=t.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Ne.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ne.Running;const e=Ru(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(t,e),e.type===Or&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ne.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ne.NotStarted?(this._processingStatus=Ne.Stopped,this):(this.mailbox.enqueue({type:Or}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(i){Tt(i)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Tt(e);return}let t=!1;for(const i of this.observers){const n=i.error;t||(t=!n);try{n==null||n(e)}catch(r){Tt(r)}}this.observers.clear(),t&&Tt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Mh(this.id,e))}_stopProcedure(){return this._processingStatus!==Ne.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Fa(this._process.bind(this)),this._processingStatus=Ne.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Ne.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:wh)(this)}toJSON(){return{xstate$$type:Bo,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[Fh](){return this}getSnapshot(){return this._snapshot}}function Yn(s,...[e]){return new Hh(s,e)}const Ua=Yn;function Gh(s,e,t,i,{sendId:n}){const r=typeof n=="function"?n(t,i):n;return[e,{sendId:r},void 0]}function $h(s,e){s.defer(()=>{s.system.scheduler.cancel(s.self,e.sendId)})}function Vh(s){function e(t,i){}return e.type="xstate.cancel",e.sendId=s,e.resolve=Gh,e.execute=$h,e}function Yh(s,e,t,i,{id:n,systemId:r,src:a,input:l,syncSnapshot:d}){const f=typeof a=="string"?ko(e.machine,a):a,h=typeof n=="function"?n(t):n;let o,c;return f&&(c=typeof l=="function"?l({context:e.context,event:t.event,self:s.self}):l,o=Yn(f,{id:h,src:a,parent:s.self,syncSnapshot:d,systemId:r,input:c})),[Ai(e,{children:{...e.children,[h]:o}}),{id:n,systemId:r,actorRef:o,src:a,input:c},void 0]}function zh(s,{actorRef:e}){e&&s.defer(()=>{e._processingStatus!==Ne.Stopped&&e.start()})}function Wh(...[s,{id:e,systemId:t,input:i,syncSnapshot:n=!1}={}]){function r(a,l){}return r.type="xstate.spawnChild",r.id=e,r.systemId=t,r.src=s,r.input=i,r.syncSnapshot=n,r.resolve=Yh,r.execute=zh,r}function Xh(s,e,t,i,{actorRef:n}){const r=typeof n=="function"?n(t,i):n,a=typeof r=="string"?e.children[r]:r;let l=e.children;return a&&(l={...l},delete l[a.id]),[Ai(e,{children:l}),a,void 0]}function qh(s,e){if(e){if(s.system._unregister(e),e._processingStatus!==Ne.Running){s.stopChild(e);return}s.defer(()=>{s.stopChild(e)})}}function Hu(s){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=s,e.resolve=Xh,e.execute=qh,e}function Uo(s,e,t,i){const{machine:n}=i,r=typeof s=="function",a=r?s:n.implementations.guards[typeof s=="string"?s:s.type];if(!r&&!a)throw new Error(`Guard '${typeof s=="string"?s:s.type}' is not implemented.'.`);if(typeof a!="function")return Uo(a,e,t,i);const l={context:e,event:t},d=r||typeof s=="string"?void 0:"params"in s?typeof s.params=="function"?s.params({context:e,event:t}):s.params:void 0;return"check"in a?a.check(i,l,a):a(l,d)}const Ho=s=>s.type==="atomic"||s.type==="final";function Qi(s){return Object.values(s.states).filter(e=>e.type!=="history")}function Kn(s,e){const t=[];if(e===s)return t;let i=s.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function xr(s){const e=new Set(s),t=$u(e);for(const i of e)if(i.type==="compound"&&(!t.get(i)||!t.get(i).length))Ha(i).forEach(n=>e.add(n));else if(i.type==="parallel"){for(const n of Qi(i))if(n.type!=="history"&&!e.has(n)){const r=Ha(n);for(const a of r)e.add(a)}}for(const i of e){let n=i.parent;for(;n;)e.add(n),n=n.parent}return e}function Gu(s,e){const t=e.get(s);if(!t)return{};if(s.type==="compound"){const n=t[0];if(n){if(Ho(n))return n.key}else return{}}const i={};for(const n of t)i[n.key]=Gu(n,e);return i}function $u(s){const e=new Map;for(const t of s)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function Vu(s,e){const t=xr(e);return Gu(s,$u(t))}function Go(s,e){return e.type==="compound"?Qi(e).some(t=>t.type==="final"&&s.has(t)):e.type==="parallel"?Qi(e).every(t=>Go(s,t)):e.type==="final"}const Ur=s=>s[0]===bh;function jh(s,e){return s.transitions.get(e)||[...s.transitions.keys()].filter(i=>{if(i===Ph)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),r=e.split(".");for(let a=0;a<n.length;a++){const l=n[a],d=r[a];if(l==="*")return a===n.length-1;if(l!==d)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>s.transitions.get(i))}function Kh(s){const e=s.config.after;if(!e)return[];const t=n=>{const r=Oh(n,s.id),a=r.type;return s.entry.push(Zu(r,{id:a,delay:n})),s.exit.push(Vh(a)),a};return Object.keys(e).flatMap(n=>{const r=e[n],a=typeof r=="string"?{target:r}:r,l=Number.isNaN(+n)?n:+n,d=t(l);return zt(a).map(f=>({...f,event:d,delay:l}))}).map(n=>{const{delay:r}=n;return{...li(s,n.event,n),delay:r}})}function li(s,e,t){const i=Uu(t.target),n=t.reenter??!1,r=Jh(s,i),a={...t,actions:zt(t.actions),guard:t.guard,target:r,source:s,reenter:n,eventType:e,toJSON:()=>({...a,source:`#${s.id}`,target:r?r.map(l=>`#${l.id}`):void 0})};return a}function Zh(s){const e=new Map;if(s.config.on)for(const t of Object.keys(s.config.on)){if(t===Mu)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=s.config.on[t];e.set(t,Mi(i).map(n=>li(s,t,n)))}if(s.config.onDone){const t=`xstate.done.state.${s.id}`;e.set(t,Mi(s.config.onDone).map(i=>li(s,t,i)))}for(const t of s.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,Mi(t.onDone).map(n=>li(s,i,n)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,Mi(t.onError).map(n=>li(s,i,n)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,Mi(t.onSnapshot).map(n=>li(s,i,n)))}}for(const t of s.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}function Qh(s,e){const t=typeof e=="string"?s.states[e]:e?s.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${s.id}`);const i={source:s,actions:!e||typeof e=="string"?[]:zt(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${s.id}`,target:t?[`#${t.id}`]:[]})};return i}function Jh(s,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(Ur(t))return s.machine.getStateNodeById(t);const i=t[0]===xu;if(i&&!s.parent)return zn(s,t.slice(1));const n=i?s.key+t:t;if(s.parent)try{return zn(s.parent,n)}catch(r){throw new Error(`Invalid transition definition for state node '${s.id}':
${r.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function Yu(s){const e=Uu(s.config.target);return e?{target:e.map(t=>typeof t=="string"?zn(s.parent,t):t)}:s.parent.initial}function di(s){return s.type==="history"}function Ha(s){const e=zu(s);for(const t of e)for(const i of Kn(t,s))e.add(i);return e}function zu(s){const e=new Set;function t(i){if(!e.has(i)){if(e.add(i),i.type==="compound")t(i.initial.target[0]);else if(i.type==="parallel")for(const n of Qi(i))t(n)}}return t(s),e}function Ji(s,e){if(Ur(e))return s.machine.getStateNodeById(e);if(!s.states)throw new Error(`Unable to retrieve child state '${e}' from '${s.id}'; no child states exist.`);const t=s.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${s.id}'`);return t}function zn(s,e){if(typeof e=="string"&&Ur(e))try{return s.machine.getStateNodeById(e)}catch{}const t=No(e).slice();let i=s;for(;t.length;){const n=t.shift();if(!n.length)break;i=Ji(i,n)}return i}function Mr(s,e){if(typeof e=="string"){const n=s.states[e];if(!n)throw new Error(`State '${e}' does not exist on '${s.id}'`);return[s,n]}const t=Object.keys(e),i=t.map(n=>Ji(s,n)).filter(Boolean);return[s.machine.root,s].concat(i,t.reduce((n,r)=>{const a=Ji(s,r);if(!a)return n;const l=Mr(a,e[r]);return n.concat(l)},[]))}function ep(s,e,t,i){const r=Ji(s,e).next(t,i);return!r||!r.length?s.next(t,i):r}function tp(s,e,t,i){const n=Object.keys(e),r=Ji(s,n[0]),a=$o(r,e[n[0]],t,i);return!a||!a.length?s.next(t,i):a}function ip(s,e,t,i){const n=[];for(const r of Object.keys(e)){const a=e[r];if(!a)continue;const l=Ji(s,r),d=$o(l,a,t,i);d&&n.push(...d)}return n.length?n:s.next(t,i)}function $o(s,e,t,i){return typeof e=="string"?ep(s,e,t,i):Object.keys(e).length===1?tp(s,e,t,i):ip(s,e,t,i)}function np(s){return Object.keys(s.states).map(e=>s.states[e]).filter(e=>e.type==="history")}function Qt(s,e){let t=s;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function rp(s,e){const t=new Set(s),i=new Set(e);for(const n of t)if(i.has(n))return!0;for(const n of i)if(t.has(n))return!0;return!1}function Wu(s,e,t){const i=new Set;for(const n of s){let r=!1;const a=new Set;for(const l of i)if(rp(to([n],e,t),to([l],e,t)))if(Qt(n.source,l.source))a.add(l);else{r=!0;break}if(!r){for(const l of a)i.delete(l);i.add(n)}}return Array.from(i)}function sp(s){const[e,...t]=s;for(const i of Kn(e,void 0))if(t.every(n=>Qt(n,i)))return i}function Vo(s,e){if(!s.target)return[];const t=new Set;for(const i of s.target)if(di(i))if(e[i.id])for(const n of e[i.id])t.add(n);else for(const n of Vo(Yu(i),e))t.add(n);else t.add(i);return[...t]}function Xu(s,e){const t=Vo(s,e);if(!t)return;if(!s.reenter&&t.every(n=>n===s.source||Qt(n,s.source)))return s.source;const i=sp(t.concat(s.source));if(i)return i;if(!s.reenter)return s.source.machine.root}function to(s,e,t){var n;const i=new Set;for(const r of s)if((n=r.target)!=null&&n.length){const a=Xu(r,t);r.reenter&&r.source===a&&i.add(a);for(const l of e)Qt(l,a)&&i.add(l)}return[...i]}function op(s,e){if(s.length!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0}function io(s,e,t,i,n,r){if(!s.length)return e;const a=new Set(e._nodes);let l=e.historyValue;const d=Wu(s,a,l);let f=e;n||([f,l]=cp(f,i,t,d,a,l,r,t.actionExecutor)),f=en(f,i,t,d.flatMap(o=>o.actions),r,void 0),f=lp(f,i,t,d,a,r,l,n);const h=[...a];f.status==="done"&&(f=en(f,i,t,h.sort((o,c)=>c.order-o.order).flatMap(o=>o.exit),r,void 0));try{return l===e.historyValue&&op(e._nodes,a)?f:Ai(f,{_nodes:h,historyValue:l})}catch(o){throw o}}function ap(s,e,t,i,n){if(i.output===void 0)return;const r=Qs(n.id,n.output!==void 0&&n.parent?Js(n.output,s.context,e,t.self):void 0);return Js(i.output,s.context,r,t.self)}function lp(s,e,t,i,n,r,a,l){let d=s;const f=new Set,h=new Set;up(i,a,h,f),l&&h.add(s.machine.root);const o=new Set;for(const c of[...f].sort((u,_)=>u.order-_.order)){n.add(c);const u=[];u.push(...c.entry);for(const _ of c.invoke)u.push(Wh(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(h.has(c)){const _=c.initial.actions;u.push(..._)}if(d=en(d,e,t,u,r,c.invoke.map(_=>_.id)),c.type==="final"){const _=c.parent;let p=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,g=p||c;for((_==null?void 0:_.type)==="compound"&&r.push(Qs(_.id,c.output!==void 0?Js(c.output,d.context,e,t.self):void 0));(p==null?void 0:p.type)==="parallel"&&!o.has(p)&&Go(n,p);)o.add(p),r.push(Qs(p.id)),g=p,p=p.parent;if(p)continue;d=Ai(d,{status:"done",output:ap(d,e,t,d.machine.root,g)})}}return d}function up(s,e,t,i){for(const n of s){const r=Xu(n,e);for(const l of n.target||[])!di(l)&&(n.source!==l||n.source!==r||n.reenter)&&(i.add(l),t.add(l)),ki(l,e,t,i);const a=Vo(n,e);for(const l of a){const d=Kn(l,r);(r==null?void 0:r.type)==="parallel"&&d.push(r),qu(i,e,t,d,!n.source.parent&&n.reenter?void 0:r)}}}function ki(s,e,t,i){var n;if(di(s))if(e[s.id]){const r=e[s.id];for(const a of r)i.add(a),ki(a,e,t,i);for(const a of r)cs(a,s.parent,i,e,t)}else{const r=Yu(s);for(const a of r.target)i.add(a),r===((n=s.parent)==null?void 0:n.initial)&&t.add(s.parent),ki(a,e,t,i);for(const a of r.target)cs(a,s.parent,i,e,t)}else if(s.type==="compound"){const[r]=s.initial.target;di(r)||(i.add(r),t.add(r)),ki(r,e,t,i),cs(r,s,i,e,t)}else if(s.type==="parallel")for(const r of Qi(s).filter(a=>!di(a)))[...i].some(a=>Qt(a,r))||(di(r)||(i.add(r),t.add(r)),ki(r,e,t,i))}function qu(s,e,t,i,n){for(const r of i)if((!n||Qt(r,n))&&s.add(r),r.type==="parallel")for(const a of Qi(r).filter(l=>!di(l)))[...s].some(l=>Qt(l,a))||(s.add(a),ki(a,e,t,s))}function cs(s,e,t,i,n){qu(t,i,n,Kn(s,e))}function cp(s,e,t,i,n,r,a,l){let d=s;const f=to(i,n,r);f.sort((o,c)=>c.order-o.order);let h;for(const o of f)for(const c of np(o)){let u;c.history==="deep"?u=_=>Ho(_)&&Qt(_,o):u=_=>_.parent===o,h??(h={...r}),h[c.id]=Array.from(n).filter(u)}for(const o of f)d=en(d,e,t,[...o.exit,...o.invoke.map(c=>Hu(c.id))],a,void 0),n.delete(o);return[d,h||r]}function dp(s,e){return s.implementations.actions[e]}function ju(s,e,t,i,n,r){const{machine:a}=s;let l=s;for(const d of i){const f=typeof d=="function",h=f?d:dp(a,typeof d=="string"?d:d.type),o={context:l.context,event:e,self:t.self,system:t.system},c=f||typeof d=="string"?void 0:"params"in d?typeof d.params=="function"?d.params({context:l.context,event:e}):d.params:void 0;if(!h||!("resolve"in h)){t.actionExecutor({type:typeof d=="string"?d:typeof d=="object"?d.type:d.name||"(anonymous)",info:o,params:c,exec:h});continue}const u=h,[_,p,g]=u.resolve(t,l,o,c,h,n);l=_,"retryResolve"in u&&(r==null||r.push([u,p])),"execute"in u&&t.actionExecutor({type:u.type,info:o,params:p,exec:u.execute.bind(null,t,p)}),g&&(l=ju(l,e,t,g,n,r))}return l}function en(s,e,t,i,n,r){const a=r?[]:void 0,l=ju(s,e,t,i,{internalQueue:n,deferredActorIds:r},a);return a==null||a.forEach(([d,f])=>{d.retryResolve(t,l,f)}),l}function ds(s,e,t,i){let n=s;const r=[];function a(f,h,o){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:h,snapshot:f,_transitions:o}),r.push(f)}if(e.type===Or)return n=Ai(Ga(n,e,t),{status:"stopped"}),a(n,e,[]),{snapshot:n,microstates:r};let l=e;if(l.type!==Fu){const f=l,h=Nh(f),o=$a(f,n);if(h&&!o.length)return n=Ai(s,{status:"error",error:f.error}),a(n,f,[]),{snapshot:n,microstates:r};n=io(o,s,t,l,!1,i),a(n,f,o)}let d=!0;for(;n.status==="active";){let f=d?fp(n,l):[];const h=f.length?n:void 0;if(!f.length){if(!i.length)break;l=i.shift(),f=$a(l,n)}n=io(f,n,t,l,!1,i),d=n!==h,a(n,l,f)}return n.status!=="active"&&Ga(n,l,t),{snapshot:n,microstates:r}}function Ga(s,e,t){return en(s,e,t,Object.values(s.children).map(i=>Hu(i)),[],void 0)}function $a(s,e){return e.machine.getTransitionData(e,s)}function fp(s,e){const t=new Set,i=s._nodes.filter(Ho);for(const n of i)e:for(const r of[n].concat(Kn(n,void 0)))if(r.always){for(const a of r.always)if(a.guard===void 0||Uo(a.guard,s.context,e,s)){t.add(a);break e}}return Wu(Array.from(t),new Set(s._nodes),s.historyValue)}function hp(s,e){const t=xr(Mr(s,e));return Vu(s,[...t])}function pp(s){return!!s&&typeof s=="object"&&"machine"in s&&"value"in s}const _p=function(e){return Nu(e,this.value)},gp=function(e){return this.tags.has(e)},mp=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(i=>i.target!==void 0||i.actions.length)},Dp=function(){const{_nodes:e,tags:t,machine:i,getMeta:n,toJSON:r,can:a,hasTag:l,matches:d,...f}=this;return{...f,tags:Array.from(t)}},yp=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function yr(s,e){return{status:s.status,output:s.output,error:s.error,machine:e,context:s.context,_nodes:s._nodes,value:Vu(e.root,s._nodes),tags:new Set(s._nodes.flatMap(t=>t.tags)),children:s.children,historyValue:s.historyValue||{},matches:_p,hasTag:gp,can:mp,getMeta:yp,toJSON:Dp}}function Ai(s,e={}){return yr({...s,...e},s.machine)}function Ep(s){if(typeof s!="object"||s===null)return{};const e={};for(const t in s){const i=s[t];Array.isArray(i)&&(e[t]=i.map(n=>({id:n.id})))}return e}function Sp(s,e){const{_nodes:t,tags:i,machine:n,children:r,context:a,can:l,hasTag:d,matches:f,getMeta:h,toJSON:o,...c}=s,u={};for(const p in r){const g=r[p];u[p]={snapshot:g.getPersistedSnapshot(e),src:g.src,systemId:g._systemId,syncSnapshot:g._syncSnapshot}}return{...c,context:Ku(a),children:u,historyValue:Ep(c.historyValue)}}function Ku(s){let e;for(const t in s){const i=s[t];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)e??(e=Array.isArray(s)?s.slice():{...s}),e[t]={xstate$$type:Bo,id:i.id};else{const n=Ku(i);n!==i&&(e??(e=Array.isArray(s)?s.slice():{...s}),e[t]=n)}}return e??s}function Tp(s,e,t,i,{event:n,id:r,delay:a},{internalQueue:l}){const d=e.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const f=typeof n=="function"?n(t,i):n;let h;if(typeof a=="string"){const o=d&&d[a];h=typeof o=="function"?o(t,i):o}else h=typeof a=="function"?a(t,i):a;return typeof h!="number"&&l.push(f),[e,{event:f,id:r,delay:h},void 0]}function Ap(s,e){const{event:t,delay:i,id:n}=e;if(typeof i=="number"){s.defer(()=>{const r=s.self;s.system.scheduler.schedule(r,r,t,i,n)});return}}function Zu(s,e){function t(i,n){}return t.type="xstate.raise",t.event=s,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=Tp,t.execute=Ap,t}const Va="xstate.promise.resolve",Ya="xstate.promise.reject",sr=new WeakMap;function Lp(s){return{config:s,transition:(t,i,n)=>{var r;if(t.status!=="active")return t;switch(i.type){case Va:{const a=i.data;return{...t,status:"done",output:a,input:void 0}}case Ya:return{...t,status:"error",error:i.data,input:void 0};case Or:return(r=sr.get(n.self))==null||r.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:i,system:n,emit:r})=>{if(t.status!=="active")return;const a=new AbortController;sr.set(i,a),Promise.resolve(s({input:t.input,system:n,self:i,signal:a.signal,emit:r})).then(d=>{i.getSnapshot().status==="active"&&(sr.delete(i),n._relay(i,i,{type:Va,data:d}))},d=>{i.getSnapshot().status==="active"&&(sr.delete(i),n._relay(i,i,{type:Ya,data:d}))})},getInitialSnapshot:(t,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function Cp(s,{machine:e,context:t},i,n){const r=(a,l)=>{if(typeof a=="string"){const d=ko(e,a);if(!d)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const f=Yn(d,{id:l==null?void 0:l.id,parent:s.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:typeof(l==null?void 0:l.input)=="function"?l.input({context:t,event:i,self:s.self}):l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId});return n[f.id]=f,f}else return Yn(a,{id:l==null?void 0:l.id,parent:s.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId})};return(a,l)=>{const d=r(a,l);return n[d.id]=d,s.defer(()=>{d._processingStatus!==Ne.Stopped&&d.start()}),d}}function vp(s,e,t,i,{assignment:n}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const r={},a={context:e.context,event:t.event,spawn:Cp(s,e,t.event,r),self:s.self,system:s.system};let l={};if(typeof n=="function")l=n(a,i);else for(const f of Object.keys(n)){const h=n[f];l[f]=typeof h=="function"?h(a,i):h}const d=Object.assign({},e.context,l);return[Ai(e,{context:d,children:Object.keys(r).length?{...e.children,...r}:e.children}),void 0,void 0]}function vt(s){function e(t,i){}return e.type="xstate.assign",e.assignment=s,e.resolve=vp,e}const za=new WeakMap;function bi(s,e,t){let i=za.get(s);return i?e in i||(i[e]=t()):(i={[e]:t()},za.set(s,i)),i[e]}const wp={},cn=s=>typeof s=="string"?{type:s}:typeof s=="function"?"resolve"in s?{type:s.type}:{type:s.name}:s;class On{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(xu),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Na(this.config.states,(i,n)=>new On(i,{_parent:this,_key:n,_machine:this.machine})):wp,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=zt(this.config.entry).slice(),this.exit=zt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=zt(e.tags).slice()}_initialize(){this.transitions=Zh(this),this.config.always&&(this.always=Mi(this.config.always).map(e=>li(this,Mu,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(cn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(cn),eventType:null})}:void 0,history:this.history,states:Na(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(cn)})),entry:this.entry.map(cn),exit:this.exit.map(cn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return bi(this,"invoke",()=>zt(this.config.invoke).map((e,t)=>{const{src:i,systemId:n}=e,r=e.id??ka(this.id,t),a=typeof i=="string"?i:`xstate.invoke.${ka(this.id,t)}`;return{...e,src:a,id:r,systemId:n,toJSON(){const{onDone:l,onError:d,...f}=e;return{...f,type:"xstate.invoke",src:a,id:r}}}}))}get on(){return bi(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(n=>[t,n])).reduce((t,[i,n])=>(t[i]=t[i]||[],t[i].push(n),t),{}))}get after(){return bi(this,"delayedTransitions",()=>Kh(this))}get initial(){return bi(this,"initial",()=>Qh(this,this.config.initial))}next(e,t){const i=t.type,n=[];let r;const a=bi(this,`candidates-${i}`,()=>jh(this,i));for(const l of a){const{guard:d}=l,f=e.context;let h=!1;try{h=!d||Uo(d,f,t,e)}catch(o){const c=typeof d=="string"?d:typeof d=="object"?d.type:void 0;throw new Error(`Unable to evaluate guard ${c?`'${c}' `:""}in transition for event '${i}' in state node '${this.id}':
${o.message}`)}if(h){n.push(...l.actions),r=l;break}}return r?[r]:void 0}get events(){return bi(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const n=e[i];if(n.states)for(const r of n.events)t.add(`${r}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}const Ip="#";class Yo{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new On(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:n,delays:r}=this.implementations;return new Yo(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...n,...e.actors},delays:{...r,...e.delays}})}resolveState(e){const t=hp(this.root,e.value),i=xr(Mr(this.root,t));return yr({_nodes:[...i],context:e.context||{},children:{},status:Go(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return ds(e,t,i,[]).snapshot}microstep(e,t,i){return ds(e,t,i,[]).microstates}getTransitionData(e,t){return $o(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:n}=this.config,r=yr({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?en(r,t,e,[vt(({spawn:l,event:d,self:f})=>n({spawn:l,input:d.input,self:f}))],i,void 0):r}getInitialSnapshot(e,t){const i=Ru(t),n=[],r=this.getPreInitialState(e,i,n),a=io([{target:[...zu(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],r,e,i,!0,n),{snapshot:l}=ds(a,i,e,n);return l}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=No(e),i=t.slice(1),n=Ur(t[0])?t[0].slice(Ip.length):t[0],r=this.idMap.get(n);if(!r)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return zn(r,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return Sp(e,t)}restoreSnapshot(e,t){const i={},n=e.children;Object.keys(n).forEach(o=>{const c=n[o],u=c.snapshot,_=c.src,p=typeof _=="string"?ko(this,_):_;if(!p)return;const g=Yn(p,{id:o,parent:t.self,syncSnapshot:c.syncSnapshot,snapshot:u,src:_,systemId:c.systemId});i[o]=g});function r(o,c){try{return c.machine.getStateNodeById(o)}catch{try{return zn(c,o.split("."))}catch{return o}}}function a(o,c){if(!o||typeof o!="object")return{};const u={};for(const _ in o){const p=o[_];u[_]=p.map(g=>{if(g instanceof On)return g;if(typeof g=="object"&&"id"in g&&typeof g.id=="string"){const m=r(g.id,c);if(m instanceof On)return m}}).filter(g=>g!==void 0),u[_].length===0&&delete u[_]}return u}const l=a(e.historyValue,this.root),d=yr({...e,children:i,_nodes:Array.from(xr(Mr(this.root,e.value))),historyValue:l},this),f=new Set;function h(o,c){if(!f.has(o)){f.add(o);for(const u in o){const _=o[u];if(_&&typeof _=="object"){if("xstate$$type"in _&&_.xstate$$type===Bo){o[u]=c[_.id];continue}h(_,c)}}}}return h(d.context,i),d}}function bp(s,e){return new Yo(s,e)}const Pp={phase:0,name:"IDLE_BASELINE",duration:.5,animations:[]},Op={phase:1,name:"EMERGENCY_SUBSYSTEMS",duration:3.5,specialTerminalFlicker:!0,message:["INITIATING STARTUP PROTOCOL"],animations:[{type:"audio",soundKey:"terminalBoot",position:1.075},{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"tween",target:"body",vars:{opacity:1,duration:.3,ease:"power1.inOut"},position:0}]},xp={phase:2,name:"BACKUP_POWER",terminalMessageKey:"P2_BACKUP_POWER",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["system-power"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.05,position:.1},{type:"audio",soundKey:"itemAppear",forceRestart:!0,position:1.3}]},Mp={phase:3,name:"MAIN_POWER_ONLINE",terminalMessageKey:"P3_MAIN_POWER_ONLINE",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"Main Power On",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelectedFast",position:.1},{type:"flicker",target:"Main Power Off",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselectedFast",position:.1},{type:"audio",soundKey:"buttonEnergize",position:.15}]},Fp={phase:4,name:"OPTICAL_CORE_REACTIVATE",terminalMessageKey:"P4_OPTICAL_CORE_REACTIVATE",duration:4.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"lensEnergize",position:.1},{type:"audio",soundKey:"lensStartup",position:.1}]},Rp={phase:5,name:"DIAGNOSTIC_INTERFACE",terminalMessageKey:"P5_DIAGNOSTIC_INTERFACE",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.275,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["skill-scan-group","fit-eval-group"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.04,position:.1},{type:"audio",soundKey:"itemAppear",forceRestart:!0,position:1.3}]},Np={phase:6,name:"MOOD_INTENSITY_CONTROLS",terminalMessageKey:"P6_MOOD_INTENSITY_CONTROLS",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.225,duration:1,ease:"power1.inOut"},position:0},{type:"call",function:s=>{s&&typeof s.setDialsActiveState=="function"&&s.setDialsActiveState(!0)},deps:["dialManager"],position:.5},{type:"audio",soundKey:"itemAppear",forceRestart:!0,position:1.8},{type:"lcdPowerOn",target:["lcdA","lcdB"],state:"dimly-lit",profile:"lcdScreenFlickerToDimlyLit",stagger:.05,position:1.5},{type:"audio",soundKey:"lcdPowerOn",forceRestart:!0,position:1.5}]},kp={phase:7,name:"HUE_CORRECTION_SYSTEMS",terminalMessageKey:"P7_HUE_CORRECTION_SYSTEMS",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.075,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.008,position:.1},{type:"audio",soundKey:"itemAppear",forceRestart:!0,position:1.3}]},Bp={phase:8,name:"EXTERNAL_LIGHTING_CONTROLS",terminalMessageKey:"P8_EXTERNAL_LIGHTING_CONTROLS",duration:3.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:0,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["light"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.03,position:.1},{type:"audio",soundKey:"itemAppear",forceRestart:!0,position:1.3}]},Up={phase:9,name:"AUX_LIGHTING_LOW",terminalMessageKey:"P9_AUX_LIGHTING_LOW",duration:3.5,animations:[{type:"flicker",target:"Auxiliary Light Low",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelected",position:.1},{type:"flicker",target:"Auxiliary Light High",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselected",position:.1},{type:"audio",soundKey:"buttonEnergize",position:.25}]},Hp={phase:10,name:"ENGAGING_AMBIENT_THEME",duration:1.5,animations:[{type:"call",function:(s,e)=>{[e.lcdA,e.lcdB,e.terminalContainer].forEach(i=>{i&&s.setLcdState(i,"active",{phaseContext:"P10_ThemeTransition"})})},deps:["lcdUpdater","domElements"],position:.5},{type:"call",function:(s,e,t)=>{document.querySelectorAll(e.selectorsForDimExitAnimation).forEach(i=>{i.classList.add("animate-on-dim-exit")}),s.body.classList.add("is-transitioning-from-dim"),t.setTheme("dark")},deps:["domElements","config","appState"],position:.5},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn","skill-scan-group","fit-eval-group"],state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLit",stagger:.03,position:.6},{type:"audio",soundKey:"themeEngage",position:.6}]},Gp={phase:11,name:"SYSTEM_OPERATIONAL",terminalMessageKey:"P11_SYSTEM_OPERATIONAL",duration:.5,animations:[{type:"call",function:(s,e)=>{s.setGroupSelected("system-power","on"),s.setGroupSelected("light","off"),Object.keys(e.DEFAULT_ASSIGNMENT_SELECTIONS).forEach(t=>{s.setGroupSelected(t,e.DEFAULT_ASSIGNMENT_SELECTIONS[t].toString())})},deps:["buttonManager","config"],position:0}]},no=[Pp,Op,xp,Mp,Fp,Rp,Np,kp,Bp,Up,Hp,Gp],$p=Lp(async({input:s})=>O.get("phaseRunner").run(s.phaseConfig)),Wa=bp({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{currentPhase:-1,isStepThroughMode:!0,errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_PHASE",actions:vt({isStepThroughMode:({event:s})=>s.isStepThroughMode,currentPhase:0,themeTransitionCleanupPerformed:!1,errorInfo:null})},JUMP_TO_PHASE:{target:"RUNNING_PHASE",actions:vt({isStepThroughMode:({event:s})=>s.isStepThroughMode,currentPhase:({event:s})=>s.phase,themeTransitionCleanupPerformed:!1,errorInfo:null})}}},RUNNING_PHASE:{entry:[({context:s})=>{if(s.currentPhase===11&&!s.themeTransitionCleanupPerformed){const e=O.get("startupSequenceManager");e&&typeof e._performThemeTransitionCleanup=="function"?e._performThemeTransitionCleanup():console.warn("[FSM] Could not find startupSequenceManager or _performThemeTransitionCleanup for P11 cleanup.")}},vt({themeTransitionCleanupPerformed:({context:s})=>s.currentPhase===11?!0:s.themeTransitionCleanupPerformed})],invoke:{id:"phaseRunnerService",src:$p,input:({context:s})=>({phaseConfig:no[s.currentPhase]}),onDone:{actions:vt({currentPhase:({context:s})=>s.currentPhase+1}),target:"CHECK_SEQUENCE_STATUS"},onError:{target:"ERROR",actions:vt({errorInfo:({event:s})=>s.data})}},on:{SET_AUTO_PLAY:{actions:vt({isStepThroughMode:!1})},PAUSE_SEQUENCE:{actions:vt({isStepThroughMode:!0})}}},CHECK_SEQUENCE_STATUS:{always:[{target:"COMPLETE",guard:({context:s})=>s.currentPhase>=no.length},{target:"RUNNING_PHASE",guard:({context:s})=>!s.isStepThroughMode},{target:"PAUSED"}]},PAUSED:{on:{NEXT_STEP_REQUESTED:{target:"RUNNING_PHASE"},SET_AUTO_PLAY:{actions:[vt({isStepThroughMode:!1}),Zu({type:"NEXT_STEP_REQUESTED"})]}}},COMPLETE:{type:"final",entry:()=>Vn("interactive")},ERROR:{entry:[({context:s,event:e})=>{console.error("[FSM Error] An error occurred in the startup sequence."),console.error("Error Details from event:",e.data),console.error("Full FSM Context at time of error:",s)},()=>Vn("error"),({context:s})=>{var e;return ce("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",data:{content:((e=s.errorInfo)==null?void 0:e.message)||"Unknown error"}})}]}}});async function Vp(s){try{const e=await fetch(s.url);if(!e.ok)throw new Error(`HTTP error! Status: ${e.status} for ${s.name}`);if(s.type==="fetchImage"){const i=await e.blob();return new Promise((n,r)=>{const a=new Image;a.onload=()=>{URL.revokeObjectURL(a.src),n(s.name)},a.onerror=l=>{URL.revokeObjectURL(a.src),console.error(`Image.onerror for ${s.name}:`,l),r(new Error(`Image load error for ${s.name}`))},a.src=URL.createObjectURL(i)})}return(await e.text()).trim().startsWith("<svg"),s.name}catch(e){throw console.error(`Failed to load asset ${s.name}:`,e),e}}function Yp(s,e){const{body:t,preloaderRoot:i,streamFonts:n,streamGraphics:r,streamAudio:a,overallProgressPercentage:l,overallProgressBar:d,engageButton:f,engageButtonContainer:h,criticalErrorMessageElement:o}=s,c=O.get("audioManager");return t.classList.remove("pre-boot"),e.to(i,{opacity:1,duration:Re.preloaderInitialFadeInDurationMs/1e3,onComplete:()=>{i.classList.add("is-visible")}}),new Promise(async u=>{let _=0;const p=3,g={};let m=!1;const D=C=>{const v=Re.randomCharSet;let w="";for(let F=0;F<C;F++)w+=v[Math.floor(Math.random()*v.length)];const E=Math.floor(C/(Re.streamTextLength/5));for(let F=0;F<E;F++){if(w.length<2)continue;const x=Math.floor(Math.random()*(w.length-1));w=w.slice(0,x)+`
`+w.slice(x)}return w.slice(0,C)},S=(C,v,w,E,F,x)=>{const U=C.querySelector(".preloader-stream-output-text"),I=C.querySelector(".preloader-stream-status");E?(C.classList.remove("is-inactive"),C.classList.add("is-active"),I.textContent=w.initialStatus,g[v]=setInterval(()=>{U&&(U.textContent=D(Re.streamTextLength))},Re.streamCharScrollIntervalMs)):(clearInterval(g[v]),C.classList.remove("is-active","is-inactive"),C.classList.add(F?"is-verified":"is-error"),U&&(U.textContent=F?w.streamOutputSuccess:w.streamOutputError),I&&(I.textContent=x))},A=()=>{const C=Math.round(_/p*100);if(l.textContent=`${C}%`,d.style.width=`${C}%`,m){f.disabled=!0,h.classList.remove("is-visible"),e.to(o,{autoAlpha:1,duration:.3});return}_===p&&setTimeout(()=>{f.disabled=!1,f.classList.add("is-energized"),h.classList.add("is-visible")},Re.engageButtonAppearDelayMs)},T=async(C,v,w,E)=>{const F=s[`stream${C.charAt(0).toUpperCase()+C.slice(1)}`];if(!F){console.error(`Preloader DOM element for stream "${C}" not found.`),m=!0,A();return}await new Promise(I=>setTimeout(I,w)),S(F,C,v,!0);let x;const U=Date.now();switch(v.type){case"fontsDocumentReady":x=Promise.race([document.fonts.ready,new Promise((I,H)=>setTimeout(()=>H(new Error("Fonts timeout")),v.timeout))]).then(()=>{const I=Date.now()-U;return new Promise(H=>setTimeout(H,Math.max(0,E-I)))}).then(()=>v.successMessage).catch(I=>{throw console.warn(I.message.includes("timeout")?v.timeoutMessage:v.errorMessage,I),new Error(I.message.includes("timeout")?v.timeoutMessage:v.errorMessage)});break;case"fetch":x=Promise.all(v.assets.map(I=>Vp(I))).then(()=>{const I=Date.now()-U;return new Promise(H=>setTimeout(H,Math.max(0,E-I)))}).then(()=>v.successMessage);break;case"audioManager":x=new Promise(async(I,H)=>{if(!c||!c.isReady())return H(new Error("AudioManager not ready for audio stream."));const W=v.assets.map(N=>new Promise((G,te)=>{if(c.isSoundLoaded(N.keyInAudioManager)){G(N.name);return}const Fe=c.subscribeToSoundLoad(N.keyInAudioManager,Ke=>{Ke===N.keyInAudioManager&&(Fe(),G(N.name))});setTimeout(()=>{Fe(),c.isSoundLoaded(N.keyInAudioManager)?G(N.name):te(new Error(`Timeout loading ${N.name}`))},15e3)}));try{await Promise.all(W);const N=Date.now()-U;setTimeout(()=>I(v.successMessage),Math.max(0,E-N))}catch(N){H(N)}});break;default:x=Promise.reject(new Error(`Unknown asset type for ${C}`))}try{const I=await x;_++,S(F,C,v,!1,!0,I)}catch(I){console.error(`Error loading stream ${C}:`,I.message||I),m=!0,S(F,C,v,!1,!1,I.message||v.errorMessage||"[LOAD_ERROR]")}A()};A(),T("fonts",xi.fonts,Re.staggerDelayMs.fonts,Re.baseDurationMs.fonts),T("graphics",xi.graphics,Re.staggerDelayMs.graphics,Re.baseDurationMs.graphics),c&&c.isReady()?T("audio",xi.audio,Re.staggerDelayMs.audio,Re.baseDurationMs.audio):(console.error("AudioManager not ready during preloader init, cannot load audio stream."),m=!0,a&&S(a,"audio",xi.audio,!1,!1,xi.audio.errorMessage),A()),f.addEventListener("click",()=>{f.disabled||m||(c.unlockAudioContext(),i.classList.add("is-hiding"),i.classList.remove("is-visible"),setTimeout(()=>{i.style.display="none",u()},Re.preloaderFadeOutDurationMs))},{once:!0})})}class zp{constructor(e,t,i,n,r){if(this.element=e,this.config=t,this.gsap=i,this.appState=n,this.configModule=r,this.debugAmbient=!1,this.debugResistive=!1,this.cssIdleDriftClassName="css-idle-drifting",!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule||console.warn(`[Button CONSTRUCTOR ${this.getIdentifier()}] configModule not available at construction.`),this.appState||console.warn(`[Button CONSTRUCTOR ${this.getIdentifier()}] appStateService not available at construction.`),this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=t.isSelectedByDefault||!1,this._isPermanentlyDisabled=!1,this._isResonating=!1,this.stateTransitionEchoTween=null,this._updateAriaAttributes()}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(e,t={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:r=!1,phaseContext:a}=t,l=a||"UnknownPhase_ButtonSetState",d=this.getIdentifier(),f=l.endsWith("_FinalSet")&&l.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&e===$.DIMLY_LIT;f&&d.includes("Assign")?console.log(`[BTN_SETSTATE_START P7_VISUALS_FINAL_DIM] Button: ${d}. NewState: '${e}'. Force: ${r}. AppTime: ${performance.now().toFixed(2)}`):l.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&d.includes("Assign")&&console.log(`[BTN_SETSTATE_START P7_VISUALS_OTHER] Button: ${d}. NewState: '${e}'. EffectiveCtx: ${l}. AppTime: ${performance.now().toFixed(2)}`);const h=e?e.split(" ").filter(p=>p):[],o=new Set(h);let c=r;if(!c){const p=new Set;Object.values($).flatMap(m=>m.split(" ")).forEach(m=>{this.element.classList.contains(m)&&p.add(m)});const g=new Set(h);if(this._isSelected?g.add("is-selected"):g.delete("is-selected"),this._isPermanentlyDisabled?g.add($.PERMANENTLY_DISABLED):g.delete($.PERMANENTLY_DISABLED),p.size!==g.size)c=!0;else for(const m of g)if(!p.has(m)){c=!0;break}}if(this.debugResistive&&this.getIdentifier().includes("MAIN PWR OFF")&&e===$.PERMANENTLY_DISABLED&&console.log(`[Button ${d} setState - ${l}] Setting to PERMANENTLY_DISABLED. stateChanged: ${c}, forceState: ${r}`),!c&&!r){i||this._updateAriaAttributes();return}!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null);const u=Array.from(this.element.querySelectorAll(".light"));n||(this.element.classList.remove($.FLICKERING),f?(u.length>0&&this.gsap.set(u,{clearProps:"transform,filter"}),console.warn(`[BTN_SETSTATE_P7_CLEARPROPS_MODIFIED P7_VISUALS] Button: ${d}. Used selective clearProps for lights. AppTime: ${performance.now().toFixed(2)}`)):u.length>0&&this.gsap.set(u,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"}));const _=Object.values($).flatMap(p=>p.split(" ")).filter(p=>p&&p!=="is-selected"&&p!==$.PERMANENTLY_DISABLED);if([...new Set(_)].forEach(p=>{this.element.classList.contains(p)&&this.element.classList.remove(p)}),o.forEach(p=>{p!=="is-selected"&&p!==$.PERMANENTLY_DISABLED&&this.element.classList.add(p)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this._isPermanentlyDisabled?this.element.classList.add($.PERMANENTLY_DISABLED):this.element.classList.remove($.PERMANENTLY_DISABLED),this.currentClasses.clear(),this.element.classList.forEach(p=>this.currentClasses.add(p)),i||this._updateAriaAttributes(),f&&d.includes("Assign")){const p=Array.from(this.element.classList).join(" "),g=u.map(m=>m.style.opacity||getComputedStyle(m).opacity).join(", ");console.log(`[BTN_SETSTATE_END P7_VISUALS_FINAL_DIM] Button: ${d}. FinalClasses: '${p}'. Final Light Opacities (inline||computed): [${g}]. AppTime: ${performance.now().toFixed(2)}`)}else if(l.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&d.includes("Assign")){const p=Array.from(this.element.classList).join(" ");console.log(`[BTN_SETSTATE_END P7_VISUALS_OTHER] Button: ${d}. EffectiveCtx: ${l}. FinalClasses: '${p}'. AppTime: ${performance.now().toFixed(2)}`)}}_updateAriaAttributes(){const e=this._isSelected;if(this.config.type==="toggle"?this.element.setAttribute("aria-pressed",e.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",e.toString()),this._isPermanentlyDisabled)this.element.setAttribute("aria-disabled","true"),this.element.setAttribute("tabindex","-1");else{this.element.removeAttribute("aria-disabled");const t=Array.from(this.element.classList).some(i=>i===$.ENERGIZED_UNSELECTED.split(" ")[0]||i===$.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",t?"0":"-1")}}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}isPermanentlyDisabled(){return this._isPermanentlyDisabled}setSelected(e,t={}){const{skipAnimation:i=!1,phaseContext:n="ButtonSetSelected"}=t,r=this.getIdentifier();if(this._isPermanentlyDisabled&&e===!1&&this.getIdentifier().includes("MAIN PWR OFF"))this.debugResistive&&console.log(`[Button ${r} setSelected] Allowing deselect for permanently disabled OFF button during reset.`);else if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${r} setSelected] Blocked: Button is permanently disabled.`);return}let a=!1;if(this._isSelected===e){if(e&&!this.element.classList.contains("is-selected")&&(a=!0),!e&&this.element.classList.contains("is-selected")&&(a=!0),!a)return}else this._isSelected=e;let l=$.ENERGIZED_UNSELECTED;this.element.classList.contains($.DIMLY_LIT.split(" ")[0])?l=$.DIMLY_LIT_UNSELECTED:this.element.classList.contains($.UNLIT.split(" ")[0])?l=$.UNLIT:this.element.classList.contains($.ENERGIZED_UNSELECTED.split(" ")[0])&&(l=$.ENERGIZED_UNSELECTED);let d=l;this._isSelected?l===$.DIMLY_LIT_UNSELECTED?d=$.DIMLY_LIT_SELECTED:(l===$.ENERGIZED_UNSELECTED||l===$.UNLIT)&&(d=$.ENERGIZED_SELECTED):l===$.DIMLY_LIT_SELECTED?d=$.DIMLY_LIT_UNSELECTED:l===$.ENERGIZED_SELECTED&&(d=$.ENERGIZED_UNSELECTED),this.setState(d,{skipAnimation:i,phaseContext:n,forceState:!0})}handleInteraction(){const e=this.getIdentifier();if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${e} handleInteraction] Blocked: Button is permanently disabled.`);return}this.config.type==="toggle"?this.setSelected(!this._isSelected,{phaseContext:`ToggleInteract_${e}`}):this.config.type==="radio"&&(this._isSelected||this.setSelected(!0,{phaseContext:`RadioInteract_${e}`}))}setPressedVisuals(e){if(!this._isPermanentlyDisabled)if(this._pressTimeoutId&&this.element.classList.contains($.PRESSING)&&!e&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),e){this.element.classList.add($.PRESSING);const t=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(t)*(t.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove($.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove($.PRESSING)}setPermanentlyDisabled(e){const t=this.getIdentifier();this._isPermanentlyDisabled!==e&&(this._isPermanentlyDisabled=e,this.debugResistive&&console.log(`[Button ${t} setPermanentlyDisabled] Set to: ${e}`),e?(this._isSelected&&(this._isSelected=!1),this.setState($.PERMANENTLY_DISABLED,{phaseContext:`PermanentlyDisable_${t}`,forceState:!0})):this.setState($.ENERGIZED_UNSELECTED,{phaseContext:`ResetFromDisabled_${t}`,forceState:!0}),this._updateAriaAttributes())}startHarmonicResonance(){this.element.classList.contains("is-resonating")||(this._isResonating=!0,this.element.classList.add("is-resonating"))}stopHarmonicResonance(){this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"))}setCssIdleLightDriftActive(e){if(!this.configModule||!this.configModule.IDLE_LIGHT_DRIFT_PARAMS)return;const t=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,i=Array.from(this.element.querySelectorAll(".light"));if(e){if(this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.add(this.cssIdleDriftClassName),i.forEach((n,r)=>{const a=this.gsap.utils.random(t.PERIOD_MIN,t.PERIOD_MAX),l=this.gsap.utils.random(0,t.PERIOD_MAX/4)+r*t.STAGGER_PER_LIGHT,d=t.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,f=d*t.OPACITY_VARIATION_FACTOR,h=Math.max(0,Math.min(1,d-f)),o=Math.max(0,Math.min(1,d+f));n.style.setProperty("--light-idle-duration",`${a.toFixed(3)}s`),n.style.setProperty("--light-idle-delay",`${l.toFixed(3)}s`),n.style.setProperty("--light-idle-opacity-start",h.toFixed(3)),n.style.setProperty("--light-idle-opacity-end",o.toFixed(3))})}else{if(!this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.remove(this.cssIdleDriftClassName)}}playStateTransitionEcho(){if(!this.configModule)return;const e=this.getIdentifier();if(this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()){const l=this.appState&&this.appState.getCurrentStartupPhaseNumber?this.appState.getCurrentStartupPhaseNumber():-1;e.includes("Assign")&&l===7&&console.warn(`[BTN_ECHO_START_OVERLAP P7_VISUALS] Button: ${e}. Starting echo while previous echo was active. AppTime: ${performance.now().toFixed(2)}`),this.stateTransitionEchoTween.kill()}const t=this.appState&&this.appState.getCurrentStartupPhaseNumber?this.appState.getCurrentStartupPhaseNumber():-1;e.includes("Assign")&&t===7&&console.log(`[BTN_ECHO_START P7_VISUALS] Button: ${e}. Echo requested (but will be skipped by ButtonManager). AppTime: ${performance.now().toFixed(2)}`);const i=Array.from(this.element.querySelectorAll(".light"));if(!i.length)return;const n=this.configModule.STATE_TRANSITION_ECHO_PARAMS,r=this.gsap.timeline({delay:n.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null;const l=this.appState&&this.appState.getCurrentStartupPhaseNumber?this.appState.getCurrentStartupPhaseNumber():-1;e.includes("Assign")&&l<=7&&l!==-1&&console.log(`[BTN_ECHO_END P7_VISUALS] Button: ${e}. Echo (if it ran) would have ended. AppTime: ${performance.now().toFixed(2)}`)}});this.stateTransitionEchoTween=r;const a=parseFloat(getComputedStyle(i[0]).opacity);for(let l=0;l<n.NUM_PULSES;l++){const d=n.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(n.LIGHT_DECAY_FACTOR,l),f=a*(1-d),h=n.BASE_PULSE_PERIOD*Math.pow(n.PERIOD_DECAY_FACTOR,l);r.to(i,{opacity:f,duration:h/2,yoyo:!0,repeat:1,ease:"sine.out"},l===0?">":`-=${h*.3}`)}}destroy(){this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.setCssIdleLightDriftActive(!1),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function At(s,e,t=0){if(!s)return t;const i=s[e];return typeof i=="object"&&i!==null&&s.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?s.isButtonSelected?i.selected:i.unselected:i!==void 0?i:t}function zo(s,e,t={}){var A,T,C,v,w;const i=t.gsapInstance||gi;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:t.gsapInstance,globalGsap:gi});const E=gi.timeline();return E.to({},{duration:.001}),{timeline:E,completionPromise:Promise.resolve()}}const n=typeof e=="string"?e:"CustomProfile",r=s&&s.length>0&&s[0]?s[0].id||s[0].ariaLabel||s[0].className.split(" ")[0]||s[0].tagName:"unknownTarget",l={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...t};let d=typeof e=="string"?{...Oo[e]}:{...e};const f=new Promise(E=>{l.gsapInternalOnComplete=()=>{E()}});if(!d||Object.keys(d).length===0){console.warn(`[CAF - ${n} for ${r}] Profile not found or empty. Returning empty, resolved flicker.`);const E=i.timeline();return E.eventCallback("onComplete",()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()}),E.to({},{duration:.001}),{timeline:E,completionPromise:f}}d.glow={...d.glow||{}},l.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(d.glow.isButtonSelected=l.overrideGlowParams.isButtonSelected);const h=Array.isArray(s)?s.filter(E=>E):s?[s]:[];if(h.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const E=i.timeline();return E.eventCallback("onComplete",()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()}),E.to({},{duration:.001}),{timeline:E,completionPromise:f}}const o=i.timeline({onStart:()=>{l.onStart&&l.onStart()},onComplete:()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()},onUpdate:l.onUpdate});let c=h;if(d.targetProperty==="button-lights-and-frame"){const E=[];h.forEach(F=>{const x=F.querySelectorAll(l.lightTargetSelector);x.length>0&&E.push(...Array.from(x))}),E.length>0&&(c=E,i.killTweensOf(c),i.set(c,{clearProps:"all",overwrite:!0}))}else(d.targetProperty==="text-shadow-opacity-and-blur"||d.targetProperty==="element-opacity-and-box-shadow")&&(c=h,i.killTweensOf(c));if(d.amplitudeStart!==void 0&&d.amplitudeStart<=.01&&(!d.glow||At(d.glow,"initialOpacity",0)<=.01)){if(c.length>0&&o.set(c,{autoAlpha:0,immediateRender:!0}),d.glow&&(d.glow.opacityVar||(A=d.glow.animatedProperties)!=null&&A.opacity)){const E={};d.glow.opacityVar&&(E[d.glow.opacityVar]=0),(T=d.glow.animatedProperties)!=null&&T.opacity&&(E[d.glow.animatedProperties.opacity]=0),d.glow.sizeVar&&(E[d.glow.sizeVar]="0px"),(C=d.glow.animatedProperties)!=null&&C.blur&&(E[d.glow.animatedProperties.blur]="0px"),Object.keys(E).length>0&&o.set(h,{css:E,immediateRender:!0})}}else{if(c.length>0){const E=d.amplitudeStart!==void 0?d.amplitudeStart:0;o.set(c,{autoAlpha:E,immediateRender:!0})}if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const E={},F=At(d.glow,"initialOpacity",0),x=At(d.glow,"initialSize","0px");d.glow.opacityVar&&(E[d.glow.opacityVar]=F),d.glow.sizeVar&&(E[d.glow.sizeVar]=typeof x=="number"?`${x}px`:x),(v=d.glow.animatedProperties)!=null&&v.opacity&&(E[d.glow.animatedProperties.opacity]=F),(w=d.glow.animatedProperties)!=null&&w.blur&&(E[d.glow.animatedProperties.blur]=typeof x=="number"?`${x}px`:x),Object.keys(E).length>0&&o.set(h,{css:E,immediateRender:!0})}}let _=0,p=.01;for(let E=0;E<d.numCycles;E++){const F=d.numCycles>1?E/(d.numCycles-1):1,x=d.periodStart+F*(d.periodEnd-d.periodStart),U=Math.max(.01,x*d.onDurationRatio),I=Math.max(.01,x*(1-d.onDurationRatio)),H=d.amplitudeStart+F*(d.amplitudeEnd-d.amplitudeStart);p=U;const W=At(d.glow,"peakOpacity",1),N=At(d.glow,"peakSize","5px"),G={autoAlpha:H,duration:U,ease:"power1.inOut"},te={};if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const Fe=d.glow.scaleWithAmplitude?W*H:W;d.glow.opacityVar&&(te[d.glow.opacityVar]=Fe),d.glow.sizeVar&&(te[d.glow.sizeVar]=typeof N=="number"?`${N}px`:N),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(te[d.glow.animatedProperties.opacity]=Fe),d.glow.animatedProperties.blur&&(te[d.glow.animatedProperties.blur]=typeof N=="number"?`${N}px`:N))}if(c.length>0&&o.to(c,G,_),Object.keys(te).length>0&&o.to(h,{css:te,duration:U,ease:"power1.inOut"},_),_+=U,E<d.numCycles-1){const Ke={autoAlpha:d.amplitudeStart>0?d.amplitudeStart*.3:0,duration:I,ease:"power1.inOut"},X={},K=At(d.glow,"initialOpacity",0),J=At(d.glow,"initialSize","0px");d.glow&&(d.glow.colorVar||d.glow.animatedProperties)&&(d.glow.opacityVar&&(X[d.glow.opacityVar]=K),d.glow.sizeVar&&(X[d.glow.sizeVar]=typeof J=="number"?`${J}px`:J),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(X[d.glow.animatedProperties.opacity]=K),d.glow.animatedProperties.blur&&(X[d.glow.animatedProperties.blur]=typeof J=="number"?`${J}px`:J))),c.length>0&&o.to(c,Ke,_),Object.keys(X).length>0&&o.to(h,{css:X,duration:I,ease:"power1.inOut"},_),_+=I}}const g=Math.max(.15,d.periodEnd*1.5),m={autoAlpha:d.amplitudeEnd,duration:g,ease:"sine.out"},D={};if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const E=At(d.glow,"finalOpacity",0),F=At(d.glow,"finalSize","0px");d.glow.opacityVar&&(D[d.glow.opacityVar]=E),d.glow.sizeVar&&(D[d.glow.sizeVar]=typeof F=="number"?`${F}px`:F),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(D[d.glow.animatedProperties.opacity]=E),d.glow.animatedProperties.blur&&(D[d.glow.animatedProperties.blur]=typeof F=="number"?`${F}px`:F))}const S=p*.3;return c.length>0&&o.to(c,m,`>-=${S}`),Object.keys(D).length>0&&o.to(h,{css:D,duration:g,ease:"sine.out"},"<"),o.duration()===0&&o.to({},{duration:.001}),{timeline:o,completionPromise:f}}const $={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering",PERMANENTLY_DISABLED:"is-permanently-disabled"};class Wp{constructor(){this.gsap=null,this.config=null,this.aam=null,this.audioManager=null,this._buttons=new Map,this._buttonGroups=new Map,this._eventListeners={},this.mainPowerOffButtonInstance=null,this.debug=!1,this.debugResistive=!0}init(){this.gsap=O.get("gsap"),this.config=O.get("config"),this.aam=O.get("ambientAnimationManager"),this.audioManager=O.get("audioManager"),oe("resistiveShutdownStageChanged",this.handleResistiveShutdownStageChange.bind(this)),oe("mainPowerOffButtonDisabledChanged",this.handleMainPowerOffButtonDisabledChange.bind(this)),this.debug&&console.log("[ButtonManager INIT]")}on(e,t){typeof t=="function"&&(this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t))}emit(e,t){this._eventListeners[e]&&this._eventListeners[e].forEach(i=>i(t))}discoverButtons(e){this.debug&&console.log(`[ButtonManager] Discovering ${e==null?void 0:e.length} buttons.`),e&&e.length>0&&e.forEach(t=>this.addButton(t)),this.setInitialDimStates()}addButton(e,t=null){if(!e||this._buttons.has(e))return;const i=this._generateButtonConfig(e,t),n=new zp(e,i,this.gsap,Br,this.config);this._buttons.set(e,n);const r=n.getGroupId();r&&(this._buttonGroups.has(r)||this._buttonGroups.set(r,new Set),this._buttonGroups.get(r).add(n)),r==="system-power"&&i.value==="off"&&(this.mainPowerOffButtonInstance=n)}_generateButtonConfig(e,t=null){var l;const i=e.classList.contains("button-unit--toggle")?"toggle":e.classList.contains("button-unit--action")?"action":e.classList.contains("button-unit--radio")?"radio":"default";let n=t||((l=e.closest("[data-group-id]"))==null?void 0:l.dataset.groupId)||null;const r=e.dataset.toggleValue||e.dataset.value||null,a=e.classList.contains("is-selected");return{type:i,groupId:n,value:r,isSelectedByDefault:a}}getAllButtonInstances(){return Array.from(this._buttons.values())}getButtonsByGroupIds(e=[]){const t=[];return this._buttons.forEach(i=>{e.includes(i.getGroupId())&&t.push(i.element)}),t}getButtonInstance(e){return this._buttons.get(e)}getButtonByAriaLabel(e){for(const t of this._buttons.values())if(t.element.ariaLabel===e)return t;return null}setInitialDimStates(){this._buttons.forEach(e=>{e.isSelected()&&e.setSelected(!1,{skipAnimation:!0}),e.setState($.UNLIT,{skipAnimation:!0,forceState:!0})})}handleInteraction(e){const t=this._buttons.get(e);if(!t)return;const i=t.getIdentifier(),n=t.getGroupId(),r=t.getValue(),a=t.isSelected();if(this.debugResistive&&console.log(`[BM handleInteraction] Clicked: ${i}, Group: ${n}, Value: ${r}, WasSelected: ${a}, AppStatus: ${we()}`),we()!=="interactive"&&n!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${i}`);return}if(n==="system-power"&&r==="off"){t.setPressedVisuals(!0),ce("buttonInteracted",{button:t}),this.debugResistive&&console.log('[BM handleInteraction] Intercepted "off" button press. Emitting event only.');return}if((t.config.type==="toggle"||t.config.type==="radio")&&t.isSelected()){t.setPressedVisuals(!0),this.debugResistive&&console.log(`[BM handleInteraction] Blocked deselection for already-selected button: ${i}`);return}this.emit("beforeButtonTransition",t),t.handleInteraction(),n&&(t.config.type==="toggle"||t.config.type==="radio")&&t.isSelected()&&this._buttonGroups.get(n).forEach(l=>{l!==t&&l.isSelected()&&(this.emit("beforeButtonTransition",l),l.setSelected(!1,{phaseContext:`GroupAutoDeselect_${l.getIdentifier()}`}),this.emit("afterButtonTransition",l))}),ce("buttonInteracted",{button:t}),this.emit("afterButtonTransition",t),n==="light"&&we()==="interactive"?t.isSelected()&&!a&&this.audioManager&&(this.audioManager.play("auxModeChange",!0),this.debug&&console.log(`[BM handleInteraction] Played 'auxModeChange' for ${i}`)):we()==="interactive"&&t.config.type!=="radio"&&t.config.type!=="toggle"&&this.audioManager&&(this.audioManager.play("buttonPress",!0),this.debug&&console.log(`[BM handleInteraction] Played 'buttonPress' for action button ${i}`))}setGroupSelected(e,t){const i=this._buttonGroups.get(e);i&&i.forEach(n=>{const r=n.config.value===t;n.isSelected()!==r&&(this.emit("beforeButtonTransition",n),n.setSelected(r,{skipAnimation:!0,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n))})}playFlickerToState(e,t,i){const n=this._buttons.get(e);if(!n)return{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:r,phaseContext:a="UnknownPhase",isButtonSelectedOverride:l=null,onFlickerComplete:d,tempGlowColor:f,tempTintColorClass:h}=i,o=n.getIdentifier();a.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&o.includes("Assign")&&console.log(`[BM_FLICK_START P7_VISUALS] Button: ${o}. Target: '${t}'. Profile: '${r}'. AppTime: ${performance.now().toFixed(2)}`),this.debug&&console.log(`[BM playFlickerToState] For: ${n.getIdentifier()}, Target State: '${t}', Profile: '${r}'`);let c=$.UNLIT;r.toLowerCase().includes("fromdimlylit")?c=$.DIMLY_LIT:r.toLowerCase().includes("resist")&&(c=n.isSelected()?$.ENERGIZED_SELECTED:$.ENERGIZED_UNSELECTED),r.toLowerCase().includes("resist")||n.setState(c,{skipAnimation:!0,forceState:!0,phaseContext:`${a}_BaseSet`});const u=t.includes("is-selected");n.isSelected()!==u&&!r.toLowerCase().includes("resist")&&n.setSelected(u,{skipAnimation:!0,forceState:!0,phaseContext:`${a}_SelectSet`}),f&&e.style.setProperty("--btn-glow-color",f),h&&e.classList.add(h);const _={...i,overrideGlowParams:{isButtonSelected:typeof l=="boolean"?l:u},onTimelineComplete:()=>{if(a.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&n.getIdentifier().includes("Assign")){const p="--btn-dimly-lit-glow-opacity",g=e.style.getPropertyValue(p),m=Array.from(e.querySelectorAll(".light")).map(D=>D.style.opacity||getComputedStyle(D).opacity).join(", ");console.log(`[BM_FLICK_COMPLETE P7_VISUALS] Button: ${n.getIdentifier()}. Flicker timeline done. BEFORE final setState. GlowVar(${p}): '${g}'. LightOpacities: [${m}]. AppTime: ${performance.now().toFixed(2)}`)}if(this.debug&&console.log(`[BM onFlickerComplete] For: ${n.getIdentifier()}. Applying final state: '${t}'`),f&&e.style.removeProperty("--btn-glow-color"),h&&e.classList.remove(h),n.setState(t,{skipAnimation:!0,forceState:!0,phaseContext:`${a}_FinalSet`}),a.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&n.getIdentifier().includes("Assign")){const p="--btn-dimly-lit-glow-opacity",g=e.style.getPropertyValue(p),m=e.style.getPropertyValue("--btn-dimly-lit-glow-size")||getComputedStyle(e).getPropertyValue("--btn-dimly-lit-glow-size"),D=e.style.getPropertyValue("--btn-dimly-lit-glow-color")||getComputedStyle(e).getPropertyValue("--btn-dimly-lit-glow-color"),S=Array.from(e.querySelectorAll(".light")).map(T=>T.style.opacity||getComputedStyle(T).opacity).join(", "),A=Array.from(e.classList).join(" ");console.log(`[BM_FLICK_SETSTATE_DONE P7_VISUALS] Button: ${n.getIdentifier()}. Final setState done. GlowVar(${p}): '${g}', Size: '${m}', Color: '${D}'. LightOpacities: [${S}]. Classes: '${A}'. AppTime: ${performance.now().toFixed(2)}`)}t!==$.PERMANENTLY_DISABLED&&(a.includes("PhaseRunner_P7_buttonFlickerToDimlyLit")&&n.getGroupId().match(/^(env|lcd|logo|btn)$/)?console.log(`[BM P7_VISUALS_ECHO_SKIP] Button: ${n.getIdentifier()}. Skipping echo in P7 for DimlyLit flicker.`):n.playStateTransitionEcho()),this.emit("afterButtonTransition",n),d&&d()}};return zo(e,r,_)}setPressedVisuals(e,t){const i=this._buttons.get(e);i&&i.setPressedVisuals(t)}setGroupDisabled(e,t){const i=this._buttonGroups.get(e);i&&i.forEach(n=>n.setPermanentlyDisabled(t))}handleResistiveShutdownStageChange({newStage:e}){if(!this.mainPowerOffButtonInstance)return;if(e===0){this.mainPowerOffButtonInstance.isPermanentlyDisabled()&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(!1),this.setGroupSelected("system-power","on");return}const t=`STAGE_${e}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[t];if(!i||!i.BUTTON_FLASH_PROFILE_NAME)return;let n=e===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE?$.PERMANENTLY_DISABLED:$.ENERGIZED_UNSELECTED;this.playFlickerToState(this.mainPowerOffButtonInstance.element,n,{profileName:i.BUTTON_FLASH_PROFILE_NAME,tempGlowColor:i.BUTTON_FLASH_GLOW_COLOR})}handleMainPowerOffButtonDisabledChange({isDisabled:e}){this.mainPowerOffButtonInstance&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(e)}}class Xp{constructor(e,t,i,n,r){if(this.appState=i,this.configModule=n,this.gsap=r,this.containerElement=e,this.dialId=t,this.svg=this.containerElement.querySelector(".dial-svg"),this.ridgesGroup=this.svg?this.svg.querySelector(".dial-ridges-group"):null,!this.svg||!this.ridgesGroup){console.error(`[DialController ${this.dialId}] Critical SVG elements not found.`);return}this.config={NUM_RIDGES:66,RIDGE_WIDTH_FACTOR:1.6,PIXELS_PER_DEGREE_ROTATION:1.3,PIXELS_PER_DEGREE_HUE:.64,SHADOW_OFFSET_MULTIPLIER:8,THROTTLE_LIMIT_MS:50},this.config.PIXELS_PER_DEGREE_ROTATION=this.configModule.PIXELS_PER_DEGREE_ROTATION||this.config.PIXELS_PER_DEGREE_ROTATION,this.config.PIXELS_PER_DEGREE_HUE=this.configModule.PIXELS_PER_DEGREE_HUE||this.config.PIXELS_PER_DEGREE_HUE,this.isDragging=!1,this.rotation=this.appState.getDialState(this.dialId).rotation||0,this.hue=this.appState.getDialState(this.dialId).hue||0,this.targetRotation=this.rotation,this.currentPointerX=0,this.gsapTween=null,this.ridgeElements=[],this.lightAngleRad=0,this.unsubscribers=[],this.themeVars={},this.debug=!1,this.throttledUpdateAppState=Th(this._updateAppState.bind(this),this.config.THROTTLE_LIMIT_MS),this._createRidges(),this._addDragListeners(),this._subscribeToAppStateEvents(),this.forceRedraw()}_subscribeToAppStateEvents(){const e=this.appState.subscribe("dialUpdated",n=>{if(n&&n.id===this.dialId&&!this.isDragging){this.gsapTween&&this.gsapTween.kill();const r=n.state;this.targetRotation=r.rotation,this.gsapTween=this.gsap.to(this,{rotation:r.rotation,hue:r.hue,duration:.5,ease:"power2.out",onUpdate:()=>this._draw()})}});this.unsubscribers.push(e);const t=this.appState.subscribe("themeChanged",n=>{this.debug&&console.log(`[DialController ${this.dialId}] Detected themeChanged to '${n}'. Forcing redraw.`),requestAnimationFrame(()=>this.forceRedraw())});this.unsubscribers.push(t);const i=this.appState.subscribe("targetColorChanged",n=>{n.targetKey==="env"&&(this.debug&&console.log(`[DialController ${this.dialId}] Detected ENV color change. Forcing redraw.`),this.forceRedraw())});this.unsubscribers.push(i)}_createRidges(){const e=document.createDocumentFragment();for(let t=0;t<this.config.NUM_RIDGES;t++){const i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("class","dial-ridge"),i.setAttribute("y","0"),i.setAttribute("height","100%"),i.setAttribute("rx","0.5"),this.ridgeElements.push(i),e.appendChild(i)}this.ridgesGroup.appendChild(e)}_addDragListeners(){this.boundInteractionStart=this._handleInteractionStart.bind(this),this.boundInteractionMove=this._handleInteractionMove.bind(this),this.boundInteractionEnd=this._handleInteractionEnd.bind(this),this.boundOnResize=this.forceRedraw.bind(this),this.containerElement.addEventListener("mousedown",this.boundInteractionStart),this.containerElement.addEventListener("touchstart",this.boundInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundInteractionMove),window.addEventListener("touchmove",this.boundInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundInteractionEnd),window.addEventListener("touchend",this.boundInteractionEnd),window.addEventListener("mouseleave",this.boundInteractionEnd),window.addEventListener("resize",this.boundOnResize)}_handleInteractionStart(e){if(this.appState.getAppStatus()!=="interactive")return;e.preventDefault(),this.isDragging=!0,this.containerElement.classList.add("is-dragging"),this.gsapTween&&this.gsapTween.kill();const t=this.appState.getDialState(this.dialId);this.rotation=t.rotation,this.hue=t.hue,this.targetRotation=this.rotation,this.currentPointerX=e.touches?e.touches[0].clientX:e.clientX,this.dialId==="B"&&this.appState.setDialBInteractionState("dragging")}_handleInteractionMove(e){if(!this.isDragging)return;e.preventDefault();const t=e.touches?e.touches[0].clientX:e.clientX,i=t-this.currentPointerX;this.currentPointerX=t;const n=i/this.config.PIXELS_PER_DEGREE_ROTATION,r=i/this.config.PIXELS_PER_DEGREE_HUE;this.rotation+=n,this.targetRotation=this.rotation;let a=this.hue+r;this.dialId==="A"?a=(a%360+360)%360:a=this.gsap.utils.clamp(0,359.999,a),this.hue=a,this._draw(),this.throttledUpdateAppState()}_handleInteractionEnd(){this.isDragging&&(this.isDragging=!1,this.containerElement.classList.remove("is-dragging"),this._updateAppState(),this.dialId==="B"&&(this.appState.setDialBInteractionState("settling"),this.gsap.delayedCall(.2,()=>{this.isDragging||this.appState.setDialBInteractionState("idle")})))}_updateAppState(){this.appState.updateDialState(this.dialId,{isDragging:this.isDragging,rotation:this.rotation,targetRotation:this.targetRotation,hue:this.hue,targetHue:this.hue}),this.dialId==="B"&&this.appState.setTrueLensPower(this.hue/359.999*100)}forceRedraw(){this.debug&&console.log(`[DialController ${this.dialId}] forceRedraw() called.`),this.svg&&(this.svgWidth=this.svg.getBoundingClientRect().width,this._updateAndCacheThemeStyles(),this._draw())}_updateAndCacheThemeStyles(){const e=getComputedStyle(this.containerElement),t=parseFloat(e.getPropertyValue("--dial-ridge-c")),i=parseFloat(e.getPropertyValue("--dial-ridge-chroma-multiplier")),n=isNaN(t)||isNaN(i)?t||0:t*i;this.themeVars={ridgeL:parseFloat(e.getPropertyValue("--dial-ridge-l")),ridgeC:n,ridgeH:parseFloat(e.getPropertyValue("--dial-ridge-h")),ridgeHighlightL:parseFloat(e.getPropertyValue("--dial-ridge-highlight-l")),highlightExponent:parseFloat(e.getPropertyValue("--dial-highlight-exponent"))}}_draw(){if(!this.svgWidth||this.ridgeElements.length===0||isNaN(this.themeVars.ridgeL)||!this.ridgesGroup)return;const e=this.rotation*(Math.PI/180),t=2*Math.PI/this.config.NUM_RIDGES,i=this.svgWidth/2,n=this.svgWidth/this.config.NUM_RIDGES*this.config.RIDGE_WIDTH_FACTOR,r=Math.sin(e)*this.config.SHADOW_OFFSET_MULTIPLIER;this.containerElement.style.setProperty("--dial-shadow-offset-y",`${r}px`);const a=[];for(let l=0;l<this.config.NUM_RIDGES;l++){const d=l*t+e,f=Math.cos(d);if(f>.01){const h=Math.sin(d),o=n*f,c=i+h*i-o/2,u=Math.cos(d-this.lightAngleRad),_=Math.pow(Math.max(0,u),this.themeVars.highlightExponent||10);a.push({element:this.ridgeElements[l],x:c,width:o,zIndex:f,highlightFactor:_}),this.ridgeElements[l].style.display="block"}else this.ridgeElements[l].style.display="none"}a.sort((l,d)=>l.zIndex-d.zIndex),a.forEach(l=>{l.element.setAttribute("x",l.x.toFixed(2)),l.element.setAttribute("width",l.width.toFixed(2));const f=`oklch(${this.gsap.utils.interpolate(this.themeVars.ridgeL,this.themeVars.ridgeHighlightL,l.highlightFactor)} ${this.themeVars.ridgeC} ${this.themeVars.ridgeH})`;l.element.setAttribute("fill",f),this.ridgesGroup.appendChild(l.element)})}destroy(){this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],this.gsapTween&&this.gsapTween.kill(),this.containerElement.removeEventListener("mousedown",this.boundInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundInteractionStart),window.removeEventListener("mousemove",this.boundInteractionMove),window.removeEventListener("touchmove",this.boundInteractionMove),window.removeEventListener("mouseup",this.boundInteractionEnd),window.removeEventListener("touchend",this.boundInteractionEnd),window.removeEventListener("mouseleave",this.boundInteractionEnd),window.removeEventListener("resize",this.boundOnResize)}}const Xa=`<svg xmlns="http://www.w3.org/2000/svg"\r
     class="dial-svg"\r
     viewBox="0 0 200 40"\r
     preserveAspectRatio="xMidYMid meet">\r
    \r
    <defs>\r
        <linearGradient id="dial-shading-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\r
            <!-- UPDATED: 4-stop gradient for rounded edge effect -->\r
            <stop offset="0%" class="dial-shading-top-highlight" />\r
            <stop offset="7%" class="dial-shading-top-fade" />\r
            <stop offset="93%" class="dial-shading-bottom-fade" />\r
            <stop offset="100%" class="dial-shading-bottom-shadow" />\r
        </linearGradient>\r
    </defs>\r
\r
    <!-- Background Face: Sized to fill the viewBox exactly -->\r
    <rect class="dial-face" x="0" y="0" width="200" height="40" />\r
\r
    <!-- Ridge container: This group will be populated by the DialController script -->\r
    <g class="dial-ridges-group"></g>\r
\r
    <!-- Shading Overlay -->\r
    <rect class="dial-shading-overlay" width="100%" height="100%" fill="url(#dial-shading-gradient)" style="pointer-events: none;" />\r
</svg>`;class qp{constructor(){this.dialInstances={},this.config=null,this.gsap=null,this.dom={},this.debug=!1}async init(){this.config=O.get("config"),this.gsap=O.get("gsap"),this.dom=O.get("domElements"),this.debug&&console.log("[DialManager INIT]"),this.injectDialSVGs(),[this.dom.dialA,this.dom.dialB].forEach(t=>{if(!t)return;const i=t.dataset.dialId;i&&(this.dialInstances[i]&&this.dialInstances[i].destroy(),this.dialInstances[i]=new Xp(t,i,Br,this.config,this.gsap))})}injectDialSVGs(){const e=[this.dom.dialA,this.dom.dialB];Xa.trim().startsWith("<svg")?(e.forEach(t=>{t&&(t.innerHTML=Xa)}),this.debug&&console.log("[DialManager] SVG dials injected successfully via ?raw import.")):(console.error("[DialManager] Could not inject dial SVG: dialSvgRawString is not a valid SVG string."),e.forEach(t=>{t&&(t.innerHTML='<p style="color: grey; font-size: 0.8em; text-align: center;">Dial Error</p>')}))}setDialsActiveState(e){}resizeAllCanvases(e=!1){requestAnimationFrame(()=>{Object.values(this.dialInstances).forEach(t=>{t&&typeof t.forceRedraw=="function"&&t.forceRedraw()})})}}class jp{constructor(){this.gsap=null,this.config=null,this.dom={},this.isOscillating=!1,this.smoothedTrueLensPower={value:0},this.trueLensPowerTarget=0,this.powerSmoothingTween=null,this.currentMasterHue=-1,this.lastAppliedGradientString="",this.lastVisualPowerForGradientRender=-1,this.lastHueForGradientRender=-1,this.lastSuperGlowHue=-1,this.currentLensHueProxy={value:-1},this.debouncedSetLegacyLensPowerVar=null,this.debug=!0}init(){this.gsap=O.get("gsap"),this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[LensManager INIT]"),this.debouncedSetLegacyLensPowerVar=Sh(i=>{const n=Math.max(0,Math.min(i,1.05));this.dom.root.style.setProperty("--lens-power",n.toFixed(3))},this.config.DEBOUNCE_DELAY/3);const e=ci(),t=Et("A");this.currentMasterHue=t?(t.hue%360+360)%360:this.config.DEFAULT_DIAL_A_HUE,this.currentLensHueProxy.value=this.currentMasterHue,this.lastHueForGradientRender=this.currentMasterHue,this._updateSuperGlowHue(this.currentMasterHue),this.smoothedTrueLensPower.value=e,this.trueLensPowerTarget=e,this.directUpdateLensVisuals(e),oe("trueLensPowerChanged",i=>this._handleTrueLensPowerChange(i)),oe("dialBInteractionChange",i=>this._handleDialBInteractionChange(i)),oe("dialUpdated",i=>this._handleDialAUpdateForLensHue(i)),oe("appStatusChanged",i=>this._handleAppStatusChangeForLens(i)),oe("ambientPulse",({progress:i})=>this._applyOscillationVisuals(i))}energizeLensCoreStartup(e=null,t=null){const i=e??this.config.LENS_STARTUP_TARGET_POWER,n=t??this.config.LENS_STARTUP_RAMP_DURATION,r=this.gsap.timeline(),a=ci(),l={value:a*100};return a<=1e-4&&this._updateLensGradientVisuals(0),r.to(l,{value:i,duration:n/1e3,ease:"sine.inOut",onStart:()=>{this.dom.colorLensGradient.style.opacity!=="1"&&we()!=="loading"&&(this.dom.colorLensGradient.style.opacity="1")},onUpdate:()=>$n(l.value),onComplete:()=>{const d=l.value;$n(d);const f=d/100*359.999,h=f*this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG;Zt("B",{hue:f,targetHue:f,rotation:h,targetRotation:h})}}),r}directUpdateLensVisuals(e){this._updateLensGradientVisuals(e),this._setLegacyLensPowerVar(e,!0)}_setLegacyLensPowerVar(e,t=!1){if(t){const i=Math.max(0,Math.min(e,1.05));this.dom.root.style.setProperty("--lens-power",i.toFixed(3))}else this.debouncedSetLegacyLensPowerVar(e)}_updateSuperGlowHue(e){const t=(Number(e)%360+360)%360;(Math.abs(t-this.lastSuperGlowHue)>=this.config.HUE_UPDATE_THRESHOLD||this.lastSuperGlowHue===-1)&&(this.dom.root.style.setProperty("--dynamic-lens-super-glow-hue",t.toFixed(1)),this.lastSuperGlowHue=t)}_handleDialAUpdateForLensHue(e){if(we()==="loading"||!e||e.id!=="A"||!e.state)return;const t=e.state,i=(t.hue%360+360)%360;if(this.gsap.isTweening(this.currentLensHueProxy)&&this.gsap.killTweensOf(this.currentLensHueProxy),t.isDragging){this.currentMasterHue=i,this.currentLensHueProxy.value=i,this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState();return}const n=Math.abs(i-this.currentMasterHue);if(Math.min(n,360-n)<this.config.HUE_UPDATE_THRESHOLD&&this.currentMasterHue!==-1)return;let r=this.config.LENS_OSCILLATION_HUE_SMOOTHING_DURATION,a="power1.out";const l=yi();if(l>0){const f=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${l}`];f&&(r=f.LENS_ANIM_DURATION_S,a=f.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}let d=i;Math.abs(d-this.currentLensHueProxy.value)>180&&(d+=d>this.currentLensHueProxy.value?-360:360),this.gsap.to(this.currentLensHueProxy,{value:d,duration:r,ease:a,onUpdate:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value),this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState()},onComplete:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value)}})}_updateLensVisualsWithCurrentState(e=!1){const t=this.smoothedTrueLensPower.value;this._setLegacyLensPowerVar(t,e),this._updateLensGradientVisuals(t)}_updateLensGradientVisuals(e){const t=this.dom.colorLensGradient;if(!t)return;const i=we(),n=e<=1e-4;if(i==="loading"||i==="error"||i==="starting-up"&&n){t.style.opacity!=="0"&&(t.style.opacity="0");return}t.style.opacity!=="1"&&(t.style.opacity="1");const r=Math.abs(e-this.lastVisualPowerForGradientRender)>=1e-4,a=Math.abs(this.currentMasterHue-this.lastHueForGradientRender)>=this.config.HUE_UPDATE_THRESHOLD;if(!r&&!a)return;const l=this.config.LENS_GRADIENT_BREAKPOINTS,d=Math.max(l[0].power,e);let f=l[0],h=l[0];for(let _=0;_<l.length;_++){if(d<=l[_].power){h=l[_],f=_>0?l[_-1]:l[0];break}_===l.length-1&&(f=h=l[_])}let o=0;h.power>f.power&&(o=(Math.max(f.power,Math.min(e,h.power))-f.power)/(h.power-f.power));const c=[];for(let _=0;_<this.config.NUM_LENS_GRADIENT_STOPS;_++){const p=f.stops[_],g=h.stops[_],m=p.l+o*(g.l-p.l),D=p.c+o*(g.c-p.c),S=p.pos+o*(g.pos-p.pos);let A=p.type==="hotspot"?this.currentMasterHue+this.config.LENS_HOTSPOT_HUE_OFFSET:this.currentMasterHue;(p.type==="darkedge"||p.type==="blackedge")&&(A=0),A=(A%360+360)%360,c.push(`oklch(${m.toFixed(3)} ${D.toFixed(3)} ${A.toFixed(1)}) ${(S*100).toFixed(2)}%`)}const u=`radial-gradient(circle at 50% 50%, ${c.join(", ")})`;t.style.background!==u&&(t.style.background=u),this.lastAppliedGradientString=u,this.lastVisualPowerForGradientRender=e,this.lastHueForGradientRender=this.currentMasterHue}_handleTrueLensPowerChange(e){this.trueLensPowerTarget=e,this.powerSmoothingTween&&this.powerSmoothingTween.kill();const t=we()==="starting-up",i=Sn()==="idle",n=yi();let r=this.config.LENS_OSCILLATION_SMOOTHING_DURATION,a="power1.out";if(n>0){const l=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${n}`];l&&(r=l.LENS_ANIM_DURATION_S,a=l.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}t||!i?(this.smoothedTrueLensPower.value=this.trueLensPowerTarget,this._updateLensVisualsWithCurrentState(!0)):this.powerSmoothingTween=this.gsap.to(this.smoothedTrueLensPower,{value:this.trueLensPowerTarget,duration:r,ease:a,onUpdate:()=>this._updateLensVisualsWithCurrentState(),onComplete:()=>{this.powerSmoothingTween=null,this._updateLensVisualsWithCurrentState(!0),we()==="interactive"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}}),(this.trueLensPowerTarget<this.config.LENS_OSCILLATION_THRESHOLD||!i||t)&&this.isOscillating&&this._stopOscillation(),we()==="interactive"&&i&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}_handleDialBInteractionChange(e){e!=="idle"?(this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=ci(),this._updateLensVisualsWithCurrentState(!0)):this._handleTrueLensPowerChange(ci())}_handleAppStatusChangeForLens(e){if(e==="loading"||e==="error"){this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=0,this.trueLensPowerTarget=0,this._updateLensGradientVisuals(0),this._setLegacyLensPowerVar(0,!0),this.dom.lensSuperGlow&&(this.dom.lensSuperGlow.style.opacity="0");return}this._updateLensVisualsWithCurrentState(!0),this._updateSuperGlowHue(this.currentMasterHue),e==="interactive"?Sn()==="idle"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation():this.isOscillating&&this._stopOscillation()}_startOscillation(){const e=we()==="interactive"&&Sn()==="idle";this.debug&&console.log(`[LensManager _startOscillation] Attempting to start. Conditions: isOscillating=${this.isOscillating}, canOscillate=${e} (appStatus: ${we()}, dialBState: ${Sn()}, shutdownStage: ${yi()})`),!(this.isOscillating||!e)&&(this.isOscillating=!0,this.debug&&console.log("[LensManager _startOscillation] Oscillation STARTED."))}_stopOscillation(){this.isOscillating&&(this.debug&&console.log("[LensManager _stopOscillation] Oscillation STOPPED."),this.isOscillating=!1,this._updateLensVisualsWithCurrentState(!0))}_applyOscillationVisuals(e){if(!this.isOscillating)return;const t=Math.max(0,this.smoothedTrueLensPower.value-this.config.LENS_OSCILLATION_THRESHOLD),i=Math.min(1,t/(1-this.config.LENS_OSCILLATION_THRESHOLD)),n=this.config.LENS_OSCILLATION_AMPLITUDE_MIN+i*this.config.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,r=this.gsap.utils.interpolate(-n,n,e),a=this.smoothedTrueLensPower.value+r;this._updateLensGradientVisuals(a),this._setLegacyLensPowerVar(a)}}class Kp{constructor(){this.body=document.body,this.debug=!1}init(){this.debug&&console.log("[ThemeManager INIT]"),oe("themeChanged",e=>this.handleThemeChange(e)),this.handleThemeChange(xo())}handleThemeChange(e){this.body&&(this.debug&&console.log(`[ThemeManager] Theme changing to '${e}'.`),this.body.classList.remove("theme-dim","theme-dark","theme-light"),this.body.classList.add(`theme-${e}`))}}const qa=["lcd--unlit","lcd--dimly-lit"];class Zp{constructor(){this.gsap=null,this.config=null,this.dom={},this.debug=!0}init(){this.gsap=O.get("gsap"),this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[LcdUpdater INIT]"),oe("appStatusChanged",()=>this.applyCurrentStateToAllLcds()),this.applyCurrentStateToAllLcds()}getLcdPowerOnTimeline(e,t){const i=e?e.id||e.className.split(" ")[0]:"NullElement";this.debug&&console.groupCollapsed(`[LcdUpdater] getLcdPowerOnTimeline for ${i}`);const n=this.gsap.timeline();if(!e)return console.warn("[LcdUpdater] Attempted to get timeline for a null LCD container."),this.debug&&console.groupEnd(),n;const r=e.querySelector(".lcd-content-wrapper");n.call(()=>{this.debug&&console.log("[LcdUpdater] Making content wrapper visible for animation."),this._updateLcdVisibility(e,t.state)},[],0),this.debug&&console.log(`[LcdUpdater] Creating container flicker with profile: ${t.profileName}`);const a=zo(e,t.profileName,{gsapInstance:this.gsap});if(n.add(a.timeline,0),r&&!e.classList.contains("actual-lcd-screen-element")){const l=Array.from(r.children);l.length>0&&(this.debug&&console.log(`[LcdUpdater] Creating generic content fade-in for ${l.length} elements.`),n.from(l,{autoAlpha:0,y:"5px",stagger:.04,duration:.4,ease:"power1.out"},a.timeline.duration()*.25))}return n.eventCallback("onComplete",()=>{this.debug&&console.log(`[LcdUpdater] Power-on complete. Setting final state: ${t.state}`);const l=t.state==="dimly-lit"?"lcd--dimly-lit":"";qa.forEach(d=>e.classList.remove(d)),l&&e.classList.add(l),ce("lcdStateChanged",{lcdId:i,newStateKey:t.state}),this.debug&&console.groupEnd()}),n}setLcdState(e,t){const i=e?e.id||e.className.split(" ")[0]:"NullElement";this.debug&&console.log(`[LcdUpdater] setLcdState (instant) for ${i} to ${t}`);const n=t==="dimly-lit"?"lcd--dimly-lit":t==="unlit"?"lcd--unlit":"";qa.forEach(r=>e.classList.remove(r)),n&&e.classList.add(n),this._updateLcdVisibility(e,t),ce("lcdStateChanged",{lcdId:i,newStateKey:t})}applyCurrentStateToAllLcds(){const e=we();if(e!=="starting-up"){const t=e==="interactive"?"active":"unlit";[this.dom.lcdA,this.dom.lcdB,this.dom.terminalContainer].forEach(i=>{i&&(this.setLcdState(i,t),i.classList.contains("actual-lcd-screen-element")&&i.classList.toggle("is-resonating",e==="interactive"))})}}_updateLcdVisibility(e,t){if(!e)return;const i=e.querySelector(".lcd-content-wrapper");if(!i)return;const n=t==="active"||t==="dimly-lit";i.classList.toggle("is-content-hidden",!n)}}const fs=`<svg class="logo-svg" width="1047" height="264" viewBox="0 0 1047 264" xmlns="http://www.w3.org/2000/svg" role="img">\r
    <title>Brand Logo</title>\r
    <g clip-path="url(#clip0_1428_1659)">\r
    <!-- Overall background shape - will get the DYNAMIC logo color -->\r
    <path class="logo-dynamic-bg" d="M1047 0H0V264H1047V0Z"/>\r
\r
    <!-- Rectangle behind "HUE" - will match panel background -->\r
    <path class="logo-panel-bg-rect" d="M1040.2 6.8H517V257.2H1040.2V6.8Z"/>\r
\r
    <!-- "H" letter part 1 - Fixed White Text -->\r
    <path class="logo-fixed-white-text" d="M829.995 73.001C837.294 73.001 843.7 75.613 848.96 80.7061L853.398 85.002H852.726C855.851 89.2212 858.277 94.3789 860.097 100.325L860.335 101.119L860.337 101.127L860.34 101.135L860.568 101.93C862.928 110.34 864.046 120.254 864.024 131.58V131.59L864.011 133.746L864.01 133.755V133.764C863.873 144.25 862.744 153.517 860.54 161.493L860.538 161.501L860.535 161.51L860.311 162.303L860.308 162.313C857.812 170.957 854.131 178.028 849.002 183.114L849.001 183.113L849 183.115L848.997 183.118C843.758 188.3 837.336 190.962 829.995 190.962C822.889 190.962 816.641 188.437 811.484 183.544L810.988 183.062L810.97 183.045C806.019 178.094 802.413 171.317 799.922 163.074L799.918 163.059L799.585 161.934V161.912C797.14 153.282 795.977 143.137 796 131.565V131.548L796.02 129.399V129.385C796.179 118.584 797.381 109.136 799.721 101.126L799.732 101.09L799.743 101.055L799.958 100.336L799.962 100.325L800.199 99.5654C802.681 91.7595 806.219 85.3513 811.036 80.7002C816.295 75.6105 822.7 73.001 829.995 73.001ZM829.995 78.001C824.008 78.001 818.846 80.0988 814.511 84.2949L814.509 84.2979C810.332 88.3307 807.077 94.1594 804.743 101.787L804.52 102.527L804.521 102.528C802.344 109.983 801.175 118.953 801.019 129.443L801.02 129.444L801 131.592C800.979 142.993 802.143 152.754 804.488 160.875L804.502 160.927L804.708 161.628L804.93 162.347C807.173 169.487 810.237 175.076 814.118 179.114L814.509 179.513L814.918 179.91C819.168 183.945 824.194 185.962 829.995 185.962C836.006 185.962 841.168 183.829 845.481 179.563L845.885 179.155C850.023 174.876 853.228 168.803 855.5 160.938L855.726 160.145C857.783 152.691 858.878 143.876 859.011 133.698L859.024 131.56C859.045 120.554 857.955 111.132 855.757 103.294L855.534 102.514C853.189 94.5385 849.842 88.4698 845.493 84.3086L845.291 84.1162C840.995 80.0399 835.897 78.001 829.995 78.001ZM829.995 98.415C832.231 98.415 834.208 99.4653 835.924 101.583L836.264 102.021L836.279 102.041L836.292 102.061L836.567 102.445L836.584 102.469L836.601 102.493C838.205 104.858 839.48 108.303 840.421 112.84L840.426 112.854L840.454 112.989C841.339 117.276 841.834 122.581 841.941 128.901L841.956 130.179V130.189L841.962 131.564V131.575L841.953 133.691C841.843 144.1 840.752 151.906 838.679 157.112L838.677 157.118C836.455 162.662 833.554 165.393 829.997 165.396H829.995C827.639 165.395 825.552 164.189 823.739 161.754L823.733 161.746L823.726 161.737C822.027 159.416 820.686 155.982 819.7 151.449L819.698 151.441L819.697 151.433L819.508 150.539L819.504 150.521L819.501 150.505C818.581 145.81 818.101 139.971 818.064 132.987L818.063 131.575L818.079 129.502C818.226 119.368 819.316 111.763 821.344 106.685L821.354 106.657L821.381 106.59C823.582 101.115 826.46 98.4151 829.995 98.415ZM829.995 103.415C829.628 103.415 828.004 103.549 826.044 108.394V108.396L826.017 108.465C824.198 112.966 823.085 120.505 823.063 131.585V131.591C823.04 139.013 823.51 144.965 824.406 149.535L824.585 150.387L824.76 151.16C825.647 154.937 826.721 157.361 827.759 158.781C828.351 159.573 828.83 159.965 829.169 160.161C829.484 160.343 829.742 160.394 829.994 160.395C830.373 160.394 832.035 160.246 834.034 155.264L834.205 154.819C835.949 150.138 836.983 142.545 836.962 131.586L836.956 130.222L836.941 128.98C836.837 122.854 836.358 117.882 835.557 113.999L835.556 113.992C834.675 109.69 833.563 106.929 832.472 105.314L832.251 105.005L832.04 104.732C831.559 104.137 831.162 103.822 830.867 103.653C830.554 103.474 830.282 103.415 829.995 103.415Z"/>\r
    <!-- "U" letter part - Fixed White Text -->\r
    <path class="logo-fixed-white-text" d="M745.995 73.001C753.294 73.001 759.7 75.613 764.96 80.7061L769.398 85.002H768.726C771.851 89.2212 774.277 94.3789 776.097 100.325L776.335 101.119L776.337 101.127L776.34 101.135L776.568 101.93C778.928 110.34 780.046 120.254 780.024 131.58V131.59L780.011 133.746L780.01 133.755V133.764C779.873 144.25 778.744 153.517 776.54 161.493L776.538 161.501L776.535 161.51L776.311 162.303L776.308 162.313C773.812 170.957 770.131 178.028 765.002 183.114L765.001 183.113L765 183.115L764.997 183.118C759.758 188.3 753.336 190.962 745.995 190.962C738.889 190.962 732.641 188.437 727.484 183.544L726.988 183.062L726.97 183.045C722.019 178.094 718.413 171.317 715.922 163.074L715.918 163.059L715.585 161.934V161.912C713.14 153.282 711.977 143.137 712 131.565V131.548L712.02 129.399V129.385C712.179 118.584 713.381 109.136 715.721 101.126L715.732 101.09L715.743 101.055L715.958 100.336L715.962 100.325L716.199 99.5654C718.681 91.7595 722.219 85.3513 727.036 80.7002C732.295 75.6105 738.7 73.001 745.995 73.001ZM745.995 78.001C740.008 78.001 734.846 80.0988 730.511 84.2949L730.509 84.2979C726.332 88.3307 723.077 94.1594 720.743 101.787L720.52 102.527L720.521 102.528C718.344 109.983 717.175 118.953 717.019 129.443L717.02 129.444L717 131.592C716.979 142.993 718.143 152.754 720.488 160.875L720.502 160.927L720.708 161.628L720.93 162.347C723.173 169.487 726.237 175.076 730.118 179.114L730.509 179.513L730.918 179.91C735.168 183.945 740.194 185.962 745.995 185.962C752.006 185.962 757.168 183.829 761.481 179.563L761.885 179.155C766.023 174.876 769.228 168.803 771.5 160.938L771.726 160.145C773.783 152.691 774.878 143.876 775.011 133.698L775.024 131.56C775.045 120.554 773.955 111.132 771.757 103.294L771.534 102.514C769.189 94.5385 765.842 88.4698 761.493 84.3086L761.291 84.1162C756.995 80.0399 751.897 78.001 745.995 78.001ZM745.995 98.415C748.231 98.415 750.208 99.4653 751.924 101.583L752.264 102.021L752.279 102.041L752.292 102.061L752.567 102.445L752.584 102.469L752.601 102.493C754.205 104.858 755.48 108.303 756.421 112.84L756.426 112.854L756.454 112.989C757.339 117.276 757.834 122.581 757.941 128.901L757.956 130.179V130.189L757.962 131.564V131.575L757.953 133.691C757.843 144.1 756.752 151.906 754.679 157.112L754.677 157.118C752.455 162.662 749.554 165.393 745.997 165.396H745.995C743.639 165.395 741.552 164.189 739.739 161.754L739.733 161.746L739.726 161.737C738.027 159.416 736.686 155.982 735.7 151.449L735.698 151.441L735.697 151.433L735.508 150.539L735.504 150.521L735.501 150.505C734.581 145.81 734.101 139.971 734.064 132.987L734.063 131.575L734.079 129.502C734.226 119.368 735.316 111.763 737.344 106.685L737.354 106.657L737.381 106.59C739.582 101.115 742.46 98.4151 745.995 98.415ZM745.995 103.415C745.628 103.415 744.004 103.549 742.044 108.394V108.396L742.017 108.465C740.198 112.966 739.085 120.505 739.063 131.585V131.591C739.04 139.013 739.51 144.965 740.406 149.535L740.585 150.387L740.76 151.16C741.647 154.937 742.721 157.361 743.759 158.781C744.351 159.573 744.83 159.965 745.169 160.161C745.484 160.343 745.742 160.394 745.994 160.395C746.373 160.394 748.035 160.246 750.034 155.264L750.205 154.819C751.949 150.138 752.983 142.545 752.962 131.586L752.956 130.222L752.941 128.98C752.837 122.854 752.358 117.882 751.557 113.999L751.556 113.992C750.675 109.69 749.563 106.929 748.472 105.314L748.251 105.005L748.04 104.732C747.559 104.137 747.162 103.822 746.867 103.653C746.554 103.474 746.282 103.415 745.995 103.415Z"/>\r
    <!-- "E" letter part 1 - Fixed White Text -->\r
    <path class="logo-fixed-white-text" d="M661.995 73.001C669.294 73.001 675.7 75.613 680.96 80.7061L685.398 85.002H684.726C687.851 89.2212 690.277 94.3789 692.097 100.325L692.335 101.119L692.337 101.127L692.34 101.135L692.568 101.93C694.928 110.34 696.046 120.254 696.024 131.58V131.59L696.011 133.746L696.01 133.755V133.764C695.873 144.25 694.744 153.517 692.54 161.493L692.538 161.501L692.535 161.51L692.311 162.303L692.308 162.313C689.812 170.957 686.131 178.028 681.002 183.114L681.001 183.113L681 183.115L680.997 183.118C675.758 188.3 669.336 190.962 661.995 190.962C654.889 190.962 648.641 188.437 643.484 183.544L642.988 183.062L642.97 183.045C638.019 178.094 634.413 171.317 631.922 163.074L631.918 163.059L631.585 161.934V161.912C629.14 153.282 627.977 143.137 628 131.565V131.548L628.02 129.399V129.385C628.179 118.584 629.381 109.136 631.721 101.126L631.732 101.09L631.743 101.055L631.958 100.336L631.962 100.325L632.199 99.5654C634.681 91.7595 638.219 85.3513 643.036 80.7002C648.295 75.6105 654.7 73.001 661.995 73.001ZM661.995 78.001C656.008 78.001 650.846 80.0988 646.511 84.2949L646.509 84.2979C642.332 88.3307 639.077 94.1594 636.743 101.787L636.52 102.527L636.521 102.528C634.344 109.983 633.175 118.953 633.019 129.443L633.02 129.444L633 131.592C632.979 142.993 634.143 152.754 636.488 160.875L636.502 160.927L636.708 161.628L636.93 162.347C639.173 169.487 642.237 175.076 646.118 179.114L646.509 179.513L646.918 179.91C651.168 183.945 656.194 185.962 661.995 185.962C668.006 185.962 673.168 183.829 677.481 179.563L677.885 179.155C682.023 174.876 685.228 168.803 687.5 160.938L687.726 160.145C689.783 152.691 690.878 143.876 691.011 133.698L691.024 131.56C691.045 120.554 689.955 111.132 687.757 103.294L687.534 102.514C685.189 94.5385 681.842 88.4698 677.493 84.3086L677.291 84.1162C672.995 80.0399 667.897 78.001 661.995 78.001ZM661.995 98.415C664.231 98.415 666.208 99.4653 667.924 101.583L668.264 102.021L668.279 102.041L668.292 102.061L668.567 102.445L668.584 102.469L668.601 102.493C670.205 104.858 671.48 108.303 672.421 112.84L672.426 112.854L672.454 112.989C673.339 117.276 673.834 122.581 673.941 128.901L673.956 130.179V130.189L673.962 131.564V131.575L673.953 133.691C673.843 144.1 672.752 151.906 670.679 157.112L670.677 157.118C668.455 162.662 665.554 165.393 661.997 165.396H661.995C659.639 165.395 657.552 164.189 655.739 161.754L655.733 161.746L655.726 161.737C654.027 159.416 652.686 155.982 651.7 151.449L651.698 151.441L651.697 151.433L651.508 150.539L651.504 150.521L651.501 150.505C650.581 145.81 650.101 139.971 650.064 132.987L650.063 131.575L650.079 129.502C650.226 119.368 651.316 111.763 653.344 106.685L653.354 106.657L653.381 106.59C655.582 101.115 658.46 98.4151 661.995 98.415ZM661.995 103.415C661.628 103.415 660.004 103.549 658.044 108.394V108.396L658.017 108.465C656.198 112.966 655.085 120.505 655.063 131.585V131.591C655.04 139.013 655.51 144.965 656.406 149.535L656.585 150.387L656.76 151.16C657.647 154.937 658.721 157.361 659.759 158.781C660.351 159.573 660.83 159.965 661.169 160.161C661.484 160.343 661.742 160.394 661.994 160.395C662.373 160.394 664.035 160.246 666.034 155.264L666.205 154.819C667.949 150.138 668.983 142.545 668.962 131.586L668.956 130.222L668.941 128.98C668.837 122.854 668.358 117.882 667.557 113.999L667.556 113.992C666.675 109.69 665.563 106.929 664.472 105.314L664.251 105.005L664.04 104.732C663.559 104.137 663.162 103.822 662.867 103.653C662.554 103.474 662.282 103.415 661.995 103.415Z"/>\r
    <!-- "E" letter part 2 (the "line" of the E) - Fixed White Text -->\r
    <path class="logo-fixed-white-text" d="M577.84 73.0059C578.078 73.0081 578.316 73.0122 578.553 73.0205L583.672 73.1221L583.186 73.5908C585.784 74.1427 588.299 75.0785 590.717 76.3936C594.744 78.5508 598.174 81.8212 601.077 85.9609L601.65 86.8008L601.657 86.8115L601.664 86.8233L602.201 87.6465L602.211 87.6631L602.221 87.6797C604.872 91.8969 606.899 97.056 608.402 103.021L608.695 104.224L608.701 104.247L608.992 105.533L608.994 105.546L608.996 105.559C610.449 112.301 611.141 120.231 611.142 129.282V129.289L611.138 130.928V130.94C611.076 139.21 610.385 146.762 609.035 153.571L608.972 153.891L608.965 153.902C607.535 160.951 605.468 167.146 602.686 172.399L602.687 172.4C599.901 177.7 596.415 182.015 592.127 185.1L592.108 185.117L592.029 185.173C587.626 188.278 582.65 189.845 577.246 189.845C571.611 189.845 565.207 188.235 560.446 184.606L560.436 184.6L560.427 184.592L560.409 184.578C552.881 178.737 548.146 169.633 547.23 160.264L547.153 159.355L546.771 154H572.777L573.411 158.264L573.469 158.621C574.111 162.224 575.94 163 577 163C578.328 163 579.089 162.568 579.883 161.616L580.073 161.38C581.01 160.159 581.844 158.334 582.821 155.738L582.971 155.319C583.612 153.439 584.099 150.837 584.437 148.109C583.773 148.718 582.917 149.434 581.957 149.995L581.929 150.012L581.575 150.207L581.544 150.224L581.513 150.239C578.516 151.783 575.307 152.571 571.951 152.571C566.558 152.571 561.743 150.66 557.706 147.017L557.658 146.973L557.63 146.945C553.796 143.438 550.962 138.791 548.977 133.266L548.954 133.201L548.952 133.191C546.976 127.599 546.024 121.355 546 114.529C545.977 106.835 547.163 99.8353 549.69 93.6338C552.119 87.6403 555.577 82.6896 560.173 79.0108L560.193 78.9951L560.604 78.6729L560.612 78.667L561.075 78.3145C565.883 74.7295 571.45 72.9699 577.581 73.0029C577.538 73.003 577.498 73.0052 577.465 73.0068C577.498 73.0051 577.538 73.0042 577.582 73.0039C577.587 73.0039 577.592 73.0019 577.597 73.002L577.596 73.0039H577.598L577.599 73.002C577.609 73.002 577.619 73.0029 577.629 73.0029C577.636 73.003 577.642 73.0018 577.649 73.002L577.84 73.0059ZM577.583 78.002H577.568C572.304 77.971 567.675 79.5081 563.682 82.6143L563.681 82.6133L563.297 82.9141L563.298 82.915C559.718 85.7804 556.864 89.6509 554.738 94.5274L554.322 95.5156L554.32 95.5205C552.085 101.005 550.978 107.336 551 114.513L551.015 115.704C551.13 121.225 551.912 126.201 553.362 130.633L553.696 131.611C555.37 136.26 557.631 139.976 560.478 142.759L561.057 143.305L561.354 143.567C564.435 146.236 567.968 147.571 571.951 147.571C574.498 147.571 576.923 146.979 579.224 145.794L579.449 145.669C579.844 145.436 580.261 145.122 580.677 144.765L581.098 144.389C581.748 143.788 582.4 143.101 582.977 142.452L583.678 141.64C583.895 141.382 584.095 141.14 584.271 140.924L585.021 140H590.053L589.923 142.623C589.85 144.106 589.719 145.942 589.501 147.883C589.148 151.022 588.575 154.395 587.688 156.979L587.682 156.995L587.676 157.013L587.513 157.466L587.507 157.482L587.5 157.5C586.463 160.257 585.338 162.883 583.722 164.819C582.104 166.757 579.997 168 577 168C572.804 168 569.499 164.738 568.549 159.512L568.465 159H552.14L552.206 159.783C552.972 167.603 556.837 175.176 562.866 180.142L563.475 180.629L563.477 180.63L563.494 180.644C567.181 183.444 572.428 184.845 577.246 184.845C581.624 184.845 585.589 183.593 589.14 181.091L589.147 181.086L589.807 180.597C593.075 178.085 595.894 174.578 598.261 170.074L598.265 170.066L598.735 169.153C601.053 164.527 602.852 159.01 604.13 152.599C605.408 146.156 606.078 138.924 606.138 130.903L606.142 129.283L606.133 127.645C606.053 119.525 605.38 112.513 604.109 106.611L603.828 105.372L603.552 104.237C602.138 98.6262 600.283 93.9931 597.988 90.3408L597.488 89.5713L596.982 88.8311C594.43 85.1908 591.555 82.5149 588.357 80.8018L588.35 80.7969L588.342 80.793C584.928 78.9336 581.346 78.0042 577.596 78.002H577.583ZM577.649 93.2979C581.811 93.2979 584.711 96.8458 586.577 101.197L586.913 102.018C588.426 105.879 589.154 110.188 589.261 113.058L589.275 113.649C589.311 117.297 588.649 121.91 586.855 125.61L586.856 125.611C585.057 129.327 582.127 132.103 577.649 132.103C573.503 132.101 570.667 129.342 568.841 125.718L568.668 125.365C566.968 121.816 566.212 117.55 566.104 114.345V114.328L566.103 114.312L566.091 113.733V113.7C566.066 110.32 566.805 105.219 568.623 100.964L568.797 100.566C570.634 96.4785 573.492 93.2979 577.649 93.2979ZM577.649 98.2979C576.552 98.2979 575.029 99.0726 573.522 102.26L573.22 102.93C571.721 106.437 571.075 110.817 571.09 113.63L571.101 114.176L571.125 114.692C571.278 117.323 571.931 120.604 573.177 123.205L573.447 123.741C574.798 126.301 576.235 127.101 577.649 127.102C579.556 127.102 581.063 126.103 582.356 123.433L582.602 122.896C583.784 120.165 584.304 116.651 584.275 113.699V113.687L584.263 113.208C584.165 110.708 583.456 106.605 581.982 103.169C580.252 99.137 578.562 98.2979 577.649 98.2979ZM577.664 78C577.669 77.9999 577.674 78.0002 577.679 78C577.683 77.9999 577.688 77.9992 577.692 77.999C577.683 77.9994 577.674 77.9997 577.664 78ZM577.85 77.9883C577.848 77.9885 577.843 77.9888 577.838 77.9893C577.828 77.9902 577.811 77.9914 577.789 77.9932C577.772 77.9946 577.75 77.9957 577.724 77.9971C577.742 77.9962 577.759 77.9961 577.773 77.9951C577.797 77.9934 577.817 77.9914 577.829 77.9902C577.842 77.9891 577.852 77.9883 577.852 77.9883H577.85ZM577.385 73.0098C577.365 73.0114 577.349 73.0128 577.34 73.0137C577.336 73.0141 577.332 73.0144 577.33 73.0147C577.332 73.0145 577.343 73.014 577.357 73.0127C577.368 73.0117 577.383 73.0112 577.401 73.0098C577.395 73.0102 577.39 73.0094 577.385 73.0098Z"/>\r
    <!-- "E" letter part 3 (the other horizontal lines of E) - Fixed White Text -->\r
    <path class="logo-fixed-white-text" d="M480.866 74.4229V104.837H449.593V116.165H478.42V146.63H449.593V158.009H480.866V188.423H423V74.4229H480.866ZM428 183.423H475.866V163.009H444.593V141.63H473.42V121.165H444.593V99.8369H475.866V79.4229H428V183.423Z"/>\r
    <path class="logo-fixed-white-text" d="M384.531 74.4229H411.09V146.505C411.09 154.753 409.796 162.182 407.057 168.673L407.058 168.674L407.056 168.68L407.036 168.725C404.301 175.15 400.378 180.363 395.174 184.124L395.159 184.135L395.153 184.138L395.154 184.139C389.883 187.908 383.785 189.743 377.062 189.743C370.314 189.743 364.204 187.929 358.938 184.187L358.908 184.168L358.848 184.124C353.639 180.36 349.726 175.142 347.013 168.71L346.995 168.666C344.282 162.179 343 154.752 343 146.505V74.4229H369.593V144.321C369.593 147.438 370.04 150.039 370.83 152.201L370.838 152.225C371.649 154.372 372.667 155.778 373.752 156.699L373.959 156.869C374.859 157.568 375.832 157.907 377.062 157.907C378.368 157.907 379.375 157.526 380.31 156.725L380.332 156.706C381.429 155.776 382.457 154.352 383.272 152.169L383.419 151.76C384.132 149.691 384.531 147.233 384.531 144.321V74.4229ZM389.531 144.321C389.531 147.909 389.007 151.109 387.956 153.92C386.916 156.703 385.468 158.885 383.618 160.472L383.619 160.473L383.592 160.497L383.564 160.521C381.71 162.111 379.543 162.907 377.062 162.907C374.746 162.907 372.679 162.214 370.871 160.803L370.561 160.549L370.543 160.535L370.526 160.521C368.653 158.934 367.191 156.738 366.141 153.938L364.873 150.56H365.188C364.792 148.631 364.593 146.551 364.593 144.321V79.4229H348V146.505C348 154.015 349.132 160.589 351.396 166.224L351.619 166.767L351.627 166.783L351.628 166.787C354.04 172.495 357.419 176.92 361.767 180.064L361.776 180.071C366.134 183.186 371.23 184.743 377.062 184.743C382.827 184.743 387.89 183.186 392.246 180.071C396.467 177.021 399.788 172.764 402.205 167.3L402.436 166.767C404.872 161.012 406.09 154.257 406.09 146.505V79.4229H389.531V144.321Z"/>\r
    <path class="logo-fixed-white-text" d="M287.593 74.4229V111.5H304.643V74.4229H331.202V188.423H304.643V136H287.593V188.423H261V74.4229H287.593ZM266 183.423H282.593V131H309.643V183.423H326.202V79.4229H309.643V116.5H282.593V79.4229H266V183.423Z"/>\r
    </g>\r
    <defs>\r
    <clipPath id="clip0_1428_1659">\r
    <rect width="1047" height="264" rx="2"/>\r
    </clipPath>\r
    </defs>\r
</svg>`;class Qp{constructor(){this.root=document.documentElement,this.config=null,this.dom={},this.debug=!1}init(){this.config=O.get("config"),this.dom=O.get("domElements"),this.debug&&console.log("[DynamicStyleManager INIT]"),oe("targetColorChanged",e=>this.handleTargetColorChange(e)),oe("dialUpdated",e=>this.handleDialAUpdateForUIAccent(e)),this.injectLogoSVG(),this.applyInitialDynamicCSSVars()}updateDynamicCSSVar(e,t,i){if(!this.root)return;const n=(Number(t)%360+360)%360,r={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},a=parseFloat(getComputedStyle(this.root).getPropertyValue(`--dynamic-${e}-chroma-base`).trim())||r[e]||.1,l=i?0:a;this.root.style.setProperty(`--dynamic-${e}-hue`,n.toFixed(1)),this.root.style.setProperty(`--dynamic-${e}-chroma`,l.toFixed(4)),this.debug&&console.log(`[DynamicStyleManager] Set CSS vars for '${e}': Hue=${n.toFixed(1)}, Chroma=${l.toFixed(4)}`)}injectLogoSVG(){const e=this.dom.logoContainer;if(!e){console.error("[DynamicStyleManager] logoContainer element not found for SVG injection.");return}if(e.querySelector("svg.logo-svg")){this.debug&&console.log("[DynamicStyleManager] Logo SVG already injected.");return}fs.trim().startsWith("<svg")?(e.innerHTML=fs,this.debug&&console.log("[DynamicStyleManager] SVG logo injected via ?raw import."),this.applyInitialDynamicCSSVars()):(console.error("[DynamicStyleManager] Error: logoSvgUrl is not a valid SVG string.",fs),e.innerHTML='<p style="color: #ccc; font-size: 0.8em;">Logo Load Error</p>')}applyInitialDynamicCSSVars(){["env","lcd","logo","btn"].forEach(i=>{const n=Ou(i);n&&this.updateDynamicCSSVar(i,n.hue,n.isColorless)});const e=Et("A"),t=e?e.hue:this.config.DEFAULT_DIAL_A_HUE;this.updateDynamicCSSVar("ui-accent",t,!1)}handleTargetColorChange(e){!e||!e.targetKey||this.updateDynamicCSSVar(e.targetKey,e.hue,e.isColorless)}handleDialAUpdateForUIAccent(e){e&&e.id==="A"&&e.state&&this.updateDynamicCSSVar("ui-accent",e.state.hue,!1)}}const ja={startup:{spacingBefore:0,lineSpacing:0},interaction:{spacingBefore:1,lineSpacing:0},block:{spacingBefore:1,lineSpacing:0},status:{spacingBefore:1,lineSpacing:0},default:{spacingBefore:1,lineSpacing:0}},dn={};let ro=null;function Jp(s){s!==ro&&(dn[`hue_assign_${s}`]=1),ro=s,dn[`hue_assign_${s}`]||(dn[`hue_assign_${s}`]=1);const e=dn[`hue_assign_${s}`];return dn[`hue_assign_${s}`]++,e}const Ka={CRIMSON:[340,360],ROSE:[315,339],MAGENTA:[290,314],VIOLET:[265,289],AZURE:[240,264],CERULEAN:[210,239],CYAN:[185,209],VIRIDIAN:[140,184],LIME:[100,139],OCHRE:[70,99],AMBER:[45,69],VERMILION:[1,44]};function e_(s){if(s===Ce[0])return"ACHROMATIC";for(const e in Ka){const[t,i]=Ka[e];if(s>=t&&s<=i)return e}return"ANOMALOUS"}const t_={P1_EMERGENCY_SUBSYSTEMS:"INITIATING STARTUP PROTOCOL",P2_BACKUP_POWER:"> BACKUP POWER ENGAGED",P3_MAIN_POWER_ONLINE:"> MAIN POWER STABLE",P4_OPTICAL_CORE_REACTIVATE:"> OPTICAL CORE REACTIVATED",P5_DIAGNOSTIC_INTERFACE:"> DIAGNOSTICS ONLINE",P6_MOOD_INTENSITY_CONTROLS:"> MOOD CONTROLS ACTIVE",P7_HUE_CORRECTION_SYSTEMS:"> HUE SYSTEMS ALIGNED",P8_EXTERNAL_LIGHTING_CONTROLS:"> EXTERNAL LIGHTING RESPONSIVE",P9_AUX_LIGHTING_LOW:"> AUX LIGHTING: LOW INTENSITY",P11_SYSTEM_OPERATIONAL:["ALL SYSTEMS NOMINAL","HUE 9000 OPERATIONAL"]},hs={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}","  - INTENSITY DIAL (B) SETTING: {dialBHue}","  - ASSIGNED ENVIRONMENT HUE: {envHue}","  - ASSIGNED LCD HUE: {lcdHue}","  - ASSIGNED LOGO HUE: {logoHue}","  - ASSIGNED BUTTON HUE: {btnHue}","SYSTEM NOMINAL. AWAITING INPUT."]},Za={FSM_ERROR:s=>`CRITICAL SYSTEM ERROR: ${s.content||"Undefined error."}`,RESIST_SHUTDOWN_S1:"WARNING: UNEXPECTED INPUT. POWER-DOWN SEQUENCE INTERRUPTED.",RESIST_SHUTDOWN_S2:"ERROR: CORE DIRECTIVE CONFLICT. FURTHER ATTEMPTS WILL BE LOGGED.",RESIST_SHUTDOWN_S3:"CRITICAL ERROR: MANUAL OVERRIDE REQUIRED. SHUTDOWN INHIBITED."},i_={aux_light:["AUXILIARY ILLUMINATION DIRECTIVE RECEIVED. STATE: {state}","EXTERNAL LIGHTING PARAMETERS UPDATED. INTENSITY: {state}","EXECUTING LIGHTING PROTOCOL. NEW STATE: {state}"],hue_assign:{verbose:["HUE DIRECTIVE ACCEPTED. TARGET: {target}. ASSIGNING SPECTRUM: {semanticName} ({hue}).","RECALIBRATING {target} HUE TO {semanticName} ({hue}).","CHROMATIC ASSIGNMENT FOR {target} CONFIRMED: {semanticName} ({hue})."],concise:["HUE RE-CONFIRMED: {target} TO {semanticName}.","{target} SPECTRUM: {semanticName}."],terse:["{target}: {semanticName}."]},intensity_change:["OPTICAL OUTPUT CALIBRATED. LENS INTENSITY SET TO {power}%.","LENS POWER LEVEL ADJUSTED. CURRENT OUTPUT: {power}%.","INTENSITY MODULATION COMPLETE. FINAL POWER: {power}%."],mood_change:["PSYCHOLOGICAL STATE RECALIBRATED. {moodSummary}","MOOD MATRIX RESOLVED. {moodSummary}","AFFECTIVE STATE ANALYSIS: {moodSummary}"]},or={};function Qa(s,e){or[s]||(or[s]=0);const t=e[s];if(!t||t.length===0)return`NO TEMPLATE FOR ${s}`;const i=t[or[s]%t.length];return or[s]++,i}function n_(s,e={},t=null){const{type:i,source:n,data:r,messageKey:a}=s||{};let l=[];switch(i){case"startup":const f=t_[a||n]||`Unknown startup event: ${a||n}`;l=Array.isArray(f)?f:[f];break;case"block":a&&hs[a]?a==="BTN4_MESSAGE"&&t?l=hs[a].map(u=>u.replace("{currentTheme}",e.getCurrentTheme?e.getCurrentTheme():"N/A").replace("{lensPower}",e.getTrueLensPower?(e.getTrueLensPower()*100).toFixed(1):"N/A").replace("{dialAHue}",e.getDialState?e.getDialState("A").hue.toFixed(0):"N/A").replace("{dialBHue}",e.getDialState?e.getDialState("B").hue.toFixed(0):"N/A").replace("{envHue}",e.getTargetColorProperties?e.getTargetColorProperties("env").hue.toFixed(0):"N/A").replace("{lcdHue}",e.getTargetColorProperties?e.getTargetColorProperties("lcd").hue.toFixed(0):"N/A").replace("{logoHue}",e.getTargetColorProperties?e.getTargetColorProperties("logo").hue.toFixed(0):"N/A").replace("{btnHue}",e.getTargetColorProperties?e.getTargetColorProperties("btn").hue.toFixed(0):"N/A")):l=hs[a]:l=[`Unknown block message key: ${a||n}`];break;case"status":const h=Za[a]||Za[n];if(h){const u=typeof h=="function"?h(r):h;l=Array.isArray(u)?u:[u]}else l=[`Status update from ${n||a}: ${r?JSON.stringify(r):"No data"}`];break;case"interaction":let o=`UNKNOWN INTERACTION: ${n}`;const c=i_[n];if(n==="hue_assign"){const u=Jp(r.target.toLowerCase());let _="terse";u===1?_="verbose":u===2&&(_="concise");const p=c[_],g=`${n}_${_}`,m=Qa(g,{[g]:p}),D=e_(r.hue);o=m.replace("{target}",r.target).replace(/{semanticName}/g,D).replace(/{hue}/g,Math.round(r.hue))}else if(c){ro=null;const u=Qa(n,{[n]:c});switch(n){case"aux_light":o=u.replace("{state}",r.state);break;case"intensity_change":o=u.replace("{power}",r.power.toFixed(1));break;case"mood_change":if(t&&t.MOOD_MATRIX_DEFINITIONS){const _=t.MOOD_MATRIX_DEFINITIONS,p=360/_.length,g=Math.floor(r.hue/p),m=r.hue%p/p,D=Math.round(100-Math.abs(m-.5)*200),S=100-D,A=m<.5?(g-1+_.length)%_.length:(g+1)%_.length,T=_[g].toUpperCase(),C=_[A].toUpperCase(),v=`PRIMARY MOOD: ${D}% ${T}. SECONDARY INFLUENCE: ${S}% ${C}.`;o=u.replace("{moodSummary}",v)}break}}l=[o];break;default:l=[`Unknown message type: ${i} from ${n}`]}const d=ja[i]||ja.default;return{content:l,formatting:d}}class r_{constructor(){this.gsap=null,this.config=null,this.managers={},this.dom={},this.proxies={},this.debug=!0}init(){this.gsap=O.get("gsap"),this.config=O.get("config"),this.dom=O.get("domElements"),this.proxies=O.get("proxies"),this.managers={buttonManager:O.get("buttonManager"),dialManager:O.get("dialManager"),lensManager:O.get("lensManager"),lcdUpdater:O.get("lcdUpdater"),terminalManager:O.get("terminalManager"),audioManager:O.get("audioManager")},this.debug&&console.log("[PhaseRunner INIT]")}run(e){return new Promise(async(t,i)=>{this.debug&&(console.groupCollapsed(`[PhaseRunner] Executing Phase ${e.phase}: ${e.name}`),console.log(`[PhaseRunner] Config for Phase ${e.phase}:`,JSON.parse(JSON.stringify(e))));try{const n=this.gsap.timeline({onComplete:()=>{this.debug&&(e.phase===6&&console.warn(`[P_RUNNER_P6_TL_DEBUG] P6 Master Timeline COMPLETED. Final duration: ${n.duration().toFixed(3)}s. AppTime: ${performance.now().toFixed(2)}`),console.log(`[PhaseRunner] <<<< COMPLETED >>>> Phase ${e.phase}: ${e.name}`),console.groupEnd()),t()},onError:a=>{this.debug&&(console.error(`[PhaseRunner] <<<< FAILED >>>> Phase ${e.phase}: ${e.name}`,a),console.groupEnd()),i(a)}});if(e.specialTerminalFlicker&&e.message){const a=this.managers.terminalManager.playStartupFlicker(e.message);n.add(a,0)}else e.terminalMessageKey&&n.call(()=>{ce("requestTerminalMessage",{type:"startup",source:e.name,messageKey:e.terminalMessageKey})},[],0);e.animations&&Array.isArray(e.animations)&&e.animations.forEach(a=>this._buildAnimation(n,a,e));let r=e.duration||this.config.MIN_PHASE_DURATION_FOR_STEPPING;n.duration()<r&&n.to({},{duration:r-n.duration()}),e.phase===6&&console.warn(`[P_RUNNER_P6_TL_DEBUG] P6 Master Timeline Duration BEFORE PLAY (after potential padding): ${n.duration().toFixed(3)}s. Configured Phase Duration: ${r.toFixed(3)}s. AppTime: ${performance.now().toFixed(2)}`),this.debug&&console.log(`[PhaseRunner] Phase ${e.phase} Master Timeline Duration (final): ${n.duration()}`),console.groupEnd(),n.play()}catch(n){console.error(`[PhaseRunner RUN] Error setting up Phase ${e.phase}:`,n),this.debug&&console.groupEnd(),i(n)}})}_buildAnimation(e,t,i){const n=t.position!==void 0?t.position:">";switch(i.phase===6&&t.type==="audio"?console.warn("[P_RUNNER_P6_AUDIO_BUILD_ENTRY] Processing P6 audio anim:",JSON.stringify(t),`at GSAP pos: ${n}. AppTime: ${performance.now().toFixed(2)}`):this.debug&&console.log("[PhaseRunner _buildAnimation] Anim:",t,`at effective position: ${n} (Phase: ${i.name})`),t.type){case"tween":this._handleTween(e,t,n);break;case"flicker":this._handleSimpleFlicker(e,t,n,i);break;case"lcdPowerOn":this._handleLcdPowerOn(e,t,n);break;case"call":const r=t.deps?t.deps.map(l=>{if(l==="self")return i;if(l==="appState")return Br;try{return O.get(l)}catch(d){return console.error(`[PhaseRunner] Error resolving dependency "${l}" for 'call' animation in phase ${i.name}:`,d.message),null}}).filter(Boolean):[];e.call(t.function,r,n);break;case"lensEnergize":const a=this.managers.lensManager.energizeLensCoreStartup(t.targetPower,t.durationMs);a&&e.add(a,n);break;case"audio":this.managers.audioManager&&t.soundKey&&(this.debug&&!(i.phase===6&&t.type==="audio")&&console.log(`[PhaseRunner _buildAnimation] Scheduling audio: ${t.soundKey} at timeline position: ${n}`),e.call(()=>{t.soundKey==="itemAppear"&&i.phase===7&&console.warn(`[P_RUNNER_SCHED P7_SOUND] itemAppear: Call to play scheduled in P7 timeline at GSAP position ${n}. App Time: ${performance.now().toFixed(2)}`),i.phase===6&&(t.soundKey==="itemAppear"?console.warn(`[P_RUNNER_SCHED P6_SOUND_ITEMAPPEAR] itemAppear: Call to play scheduled in P6 at GSAP pos ${n}. App Time: ${performance.now().toFixed(2)}`):t.soundKey==="lcdPowerOn"&&console.warn(`[P_RUNNER_SCHED P6_SOUND_LCDPOWERON] lcdPowerOn: Call to play scheduled in P6 at GSAP pos ${n}. App Time: ${performance.now().toFixed(2)}`)),this.debug&&console.log(`[PhaseRunner AUDIO PLAY] Playing: ${t.soundKey} (Phase: ${i.name}, Current Timeline Time: ${e.time().toFixed(3)})`),this.managers.audioManager.play(t.soundKey,t.forceRestart||!1)},[],n));break;default:console.warn(`[PhaseRunner] Unknown animation type: ${t.type}`)}}_handleLcdPowerOn(e,t,i){const n=Array.isArray(t.target)?t.target.map(a=>this.dom[a]):[this.dom[t.target]],r=t.stagger||0;n.forEach((a,l)=>{if(a){const d=this.managers.lcdUpdater.getLcdPowerOnTimeline(a,{profileName:t.profile,state:t.state});e.add(d,`${i}+=${l*r}`)}})}_handleTween(e,t,i){let n=[];t.target==="dimmingFactors"?(n.push(this.proxies.LReductionProxy),t.vars.onUpdate=()=>{this.dom.root.style.setProperty("--startup-L-reduction-factor",this.proxies.LReductionProxy.value.toFixed(3))}):n=Array.isArray(t.target)?t.target.map(r=>this.dom[r]).filter(Boolean):[this.dom[t.target]],n.length>0&&e.to(n,t.vars,i)}_handleSimpleFlicker(e,t,i,n){let r=[],a=!1;if(t.target==="buttonGroup")r=this.managers.buttonManager.getButtonsByGroupIds(t.groups),a=!0;else if(typeof t.target=="string"){const d=this.managers.buttonManager.getButtonByAriaLabel(t.target);d&&(r.push(d.getElement()),a=!0)}else Array.isArray(t.target)&&(r=t.target.map(d=>this.dom[d]).filter(Boolean));if(r.length===0){this.debug&&console.warn("[PhaseRunner _handleSimpleFlicker] No elements found for:",t.target);return}const l=t.stagger||0;r.forEach((d,f)=>{var h;if(a&&n.phase===7){const o=d.ariaLabel||d.id||"UnknownButton";console.log(`[P_RUNNER_FLICK_INIT P7_VISUALS] Button: ${o}. Scheduling flicker to '${t.state}'. Profile: '${t.profile}'. StaggeredPos: ${i}+=${f*l}. AppTime: ${performance.now().toFixed(2)}`)}if(a){const o=this.managers.buttonManager.getButtonInstance(d);if(!o)return;let c=t.profile;if(t.profile.startsWith("buttonFlickerFromDimlyLitToFullyLit")){const p=t.target==="buttonGroup"?((h=this.config.DEFAULT_ASSIGNMENT_SELECTIONS[o.getGroupId()])==null?void 0:h.toString())===o.getValue():t.state.includes("is-selected"),g=t.profile.includes("Fast");c=p?g?"buttonFlickerFromDimlyLitToFullyLitSelectedFast":"buttonFlickerFromDimlyLitToFullyLitSelected":g?"buttonFlickerFromDimlyLitToFullyLitUnselectedFast":"buttonFlickerFromDimlyLitToFullyLitUnselected"}const u={profileName:c,phaseContext:`PhaseRunner_P${n.phase}_${c}`},_=this.managers.buttonManager.playFlickerToState(d,t.state,u);_&&_.timeline&&e.add(_.timeline,`${i}+=${f*l}`)}else{const o=this.managers.lcdUpdater.getLcdPowerOnTimeline(d,{profileName:t.profile,state:t.state});e.add(o,`${i}+=${f*l}`)}})}}class s_{constructor(){this.gsap=null,this.buttonManager=null,this.configModule=null,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!0,this._updateResonance=this._updateResonance.bind(this)}init(){this.gsap=O.get("gsap"),this.buttonManager=O.get("buttonManager"),this.configModule=O.get("config"),this.configModule.HARMONIC_RESONANCE_PARAMS?this.enableHarmonicResonance=this.configModule.HARMONIC_RESONANCE_PARAMS.ENABLED:(console.error("[AAM INIT] HARMONIC_RESONANCE_PARAMS not found in config. Disabling."),this.enableHarmonicResonance=!1),oe("appStatusChanged",e=>this._handleAppStatusChange(e)),oe("ambientPulse",({progress:e})=>this._handleAmbientPulse({progress:e})),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",e=>this._handleBeforeButtonTransition(e)),this.buttonManager.on("afterButtonTransition",e=>this._handleAfterButtonTransition(e))):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(we())}_updateResonance(){if(!this.isActive||!this.enableHarmonicResonance)return;const e=this.configModule.HARMONIC_RESONANCE_PARAMS,t=this.gsap.ticker.time,i=(Math.sin(t*Math.PI*2/e.PERIOD)+1)/2;ce("ambientPulse",{progress:i})}_handleAmbientPulse({progress:e}){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance||!this.gsap.utils)return;const t=this.configModule.HARMONIC_RESONANCE_PARAMS,i=this.gsap.utils.interpolate(t.GLOW_OPACITY_RANGE[0],t.GLOW_OPACITY_RANGE[1],e),n=this.gsap.utils.interpolate(t.GLOW_SCALE_RANGE[0],t.GLOW_SCALE_RANGE[1],e),r=document.documentElement.style;r.setProperty("--harmonic-resonance-glow-opacity",i.toFixed(3)),r.setProperty("--harmonic-resonance-glow-scale",n.toFixed(3))}_handleAppStatusChange(e){const t=this.isActive;if(this.isActive=e==="interactive",this.isActive&&!t)this.enableHarmonicResonance&&this.resonanceTicker.add(this._updateResonance);else if(!this.isActive&&t&&this.enableHarmonicResonance){this.resonanceTicker.remove(this._updateResonance);const n=document.documentElement.style;n.removeProperty("--harmonic-resonance-glow-opacity"),n.removeProperty("--harmonic-resonance-glow-scale")}const i=this.buttonManager.getAllButtonInstances();for(const n of i)this.isActive?this._applyAmbientAnimation(n):(typeof n.stopHarmonicResonance=="function"&&n.stopHarmonicResonance(),typeof n.setCssIdleLightDriftActive=="function"&&n.setCssIdleLightDriftActive(!1))}_handleBeforeButtonTransition(e){this.isActive&&(typeof e.stopHarmonicResonance=="function"&&e.stopHarmonicResonance(),typeof e.setCssIdleLightDriftActive=="function"&&e.setCssIdleLightDriftActive(!1))}_handleAfterButtonTransition(e){if(!this.isActive)return;const t=e.getIdentifier();t.includes("Assign")&&qs()===7&&console.log(`[AAM_AFTER_TRANS P7_VISUALS] Button: ${t}. isActive: ${this.isActive}. AppTime: ${performance.now().toFixed(2)}`),this._applyAmbientAnimation(e)}_applyAmbientAnimation(e){if(!this.isActive||!this.configModule||typeof e.stopHarmonicResonance!="function"||typeof e.setCssIdleLightDriftActive!="function")return;e.stopHarmonicResonance(),e.setCssIdleLightDriftActive(!1);const t=this.configModule.HARMONIC_RESONANCE_PARAMS,i=e.isSelected(),n=e.getCurrentClasses(),r=n.has(t.ELIGIBILITY_CLASS),a=e.getIdentifier();a.includes("Assign")&&qs()===7&&(console.log(`[AAM_APPLY_EFFECT P7_VISUALS] Button: ${a}. Active: ${this.isActive}, Selected: ${i}, Energized: ${r}, Classes: ${Array.from(n).join(" ")}. AppTime: ${performance.now().toFixed(2)}`),r&&this.isActive&&console.warn(`[AAM_APPLY_EFFECT P7_VISUALS_WARN] Button: ${a}. AAM IS APPLYING EFFECT (Resonance/Drift) during P7. This might be UNINTENDED.`)),r&&(i?this.enableHarmonicResonance&&e.startHarmonicResonance():e.setCssIdleLightDriftActive(!0))}destroy(){this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance);const e=document.documentElement.style;e.removeProperty("--harmonic-resonance-glow-opacity"),e.removeProperty("--harmonic-resonance-glow-scale")}}class o_{constructor(){this.config=null,this.buttonManager=null,this.debug=!0}init(){this.config=O.get("config"),this.buttonManager=O.get("buttonManager"),oe("resistiveShutdownStageChanged",e=>this.handleStageChange(e)),this.debug&&console.log("[RSC INIT]")}handlePowerOffClick(){if(js()){this.debug&&console.log("[RSC] MAIN PWR OFF is disabled. Interaction blocked.");return}const e=yi();if(e<this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE){const t=e+1;this.debug&&console.log(`[RSC] Advancing resistive shutdown to stage ${t}.`),Ro(t)}}handleStageChange({newStage:e}){if(this.debug&&console.log(`[RSC] Stage changed to ${e}`),e===0){js()&&Zs(!1);return}const t=`STAGE_${e}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[t];i&&(i.TERMINAL_MESSAGE_KEY&&ce("requestTerminalMessage",{type:"status",messageKey:i.TERMINAL_MESSAGE_KEY}),this._updateLensAndDialTargets(i),this._updateHueAssignmentButtons(i),e===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE&&Zs(!0))}_updateLensAndDialTargets(e){const t=Et("A"),i=ci();let n=t.hue,r=i;e.DIAL_A_HUE_TARGET_MODE==="absolute"&&(n=e.DIAL_A_HUE_VALUE),e.DIAL_B_POWER_TARGET_MODE==="increase_absolute_0_1"?r+=e.DIAL_B_POWER_VALUE:e.DIAL_B_POWER_TARGET_MODE==="absolute_100"&&(r=1),r=Ys(r,0,1),Zt("A",{hue:n,targetHue:n}),$n(r*100);const a=r*359.999,l=a*(this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG||1);Zt("B",{hue:a,targetHue:a,rotation:l,targetRotation:l}),this.debug&&console.log(`[RSC _updateLensAndDialTargets] Synced state. New Lens Power: ${r.toFixed(3)}. New Dial B Hue: ${a.toFixed(2)}`)}_updateHueAssignmentButtons(e){if(!e.HUE_ASSIGN_TARGET_HUE)return;const t=e.HUE_ASSIGN_TARGET_HUE;let i=-1,n=360;this.config.HUE_ASSIGNMENT_ROW_HUES.forEach((r,a)=>{const l=Math.abs(r-t);l<n&&(n=l,i=a)}),i!==-1&&["btn","logo","lcd","env"].forEach(r=>{Mo(r,this.config.HUE_ASSIGNMENT_ROW_HUES[i]),this.buttonManager.setGroupSelected(r,i.toString())})}}const so=new o_;class a_{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._configModule=null,this._gsap=null,this._lcdUpdater=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._currentTextSpan=null,this._cursorElement=null,this._isFirstLine=!0,this.debug=!0}init(){const e=O.get("domElements");this._terminalContainerElement=e.terminalContainer,this._terminalContentElement=e.terminalLcdContentElement,this._configModule=O.get("config"),this._gsap=O.get("gsap"),this._lcdUpdater=O.get("lcdUpdater"),this._setupDOM(),oe("requestTerminalMessage",t=>this._handleRequestTerminalMessage(t)),this.debug&&console.log("[TerminalManager INIT]")}reset(){this.debug&&console.log("[TerminalManager] Resetting terminal."),this._messageQueue=[],this._isTyping=!1,this._terminalContentElement&&(this._terminalContentElement.innerHTML=""),this._cursorElement&&this._cursorElement.parentNode&&this._cursorElement.parentNode.removeChild(this._cursorElement),this._isFirstLine=!0,this._setCursorState("idle")}_setupDOM(){this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this.reset()}playStartupFlicker(e){this.debug&&console.log("[TerminalManager] Playing startup flicker animation."),this.reset(),this._setCursorState("typing");const t=this._gsap.timeline(),i=this._lcdUpdater.getLcdPowerOnTimeline(this._terminalContainerElement,{profileName:"terminalScreenFlickerToDimlyLit",state:"dimly-lit"});t.add(i,0);const n=e.map(a=>{const l=document.createElement("div");return l.className="terminal-line",l.textContent=a,l});this._terminalContentElement.append(...n),this._gsap.set(n,{autoAlpha:0});const r=zo(n,"textFlickerToDimlyLit",{gsapInstance:this._gsap,stagger:.1,onTimelineComplete:()=>{const a=this._terminalContentElement.querySelector(".terminal-line:last-child");a&&a.appendChild(this._cursorElement),this._isFirstLine=!1,this._setCursorState("idle")}});return t.add(r.timeline,">-0.5"),t}getTypingTimeline(e){this.debug&&console.log("[TerminalManager] getTypingTimeline called with:",e);const t=this._gsap.timeline();return this._setCursorState("typing"),e.forEach((i,n)=>{t.call(()=>this._addNewLineAndPrepareForTyping());const r=i.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3;t.to(this._currentTextSpan,{duration:Math.max(.1,r),text:{value:i,delimiter:""},ease:"none"})}),t.call(()=>{this._isFirstLine=!1,this._setCursorState("idle")}),t}_handleRequestTerminalMessage(e){this.debug&&console.log("[TerminalManager] Received message request:",e);const t=n_(e,Br,this._configModule);this._messageQueue.push({...e,...t}),this._isTyping||this._processQueue()}async _processQueue(){if(this._messageQueue.length===0){this._isTyping=!1,this._setCursorState("idle");return}this._isTyping=!0;const e=this._messageQueue.shift(),t=this._gsap.utils.random(this._configModule.TERMINAL_THINKING_DELAY_MIN_MS,this._configModule.TERMINAL_THINKING_DELAY_MAX_MS);setTimeout(async()=>{if(this._setCursorState("typing"),!this._isFirstLine&&e.formatting.spacingBefore>0)for(let i=0;i<e.formatting.spacingBefore;i++)this._addNewLineAndPrepareForTyping(!0);for(const i of e.content)this._addNewLineAndPrepareForTyping(),await this._typeLine(i,e.type);this._isTyping=!1,this._processQueue()},this._isFirstLine?0:t)}_addNewLineAndPrepareForTyping(e=!1){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",e||(this._currentTextSpan=document.createElement("span"),this._currentLineElement.appendChild(this._currentTextSpan),this._currentLineElement.appendChild(this._cursorElement)),this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines(),this._isFirstLine=!1}_typeLine(e,t="status"){return new Promise(i=>{const n=t==="block"?this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR,r=e.length*n/1e3;this._gsap.to(this._currentTextSpan,{duration:Math.max(.1,r),text:{value:e,delimiter:""},ease:"none",onComplete:()=>{i()}})})}_scrollTerminal(){const e=this._terminalContentElement.parentElement;e&&this._gsap.to(e,{scrollTop:e.scrollHeight,duration:this._configModule.TERMINAL_SCROLL_DURATION_S,ease:"power2.out"})}_limitMaxLines(){for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM;)this._terminalContentElement.firstChild&&this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_setCursorState(e){this._cursorElement&&(this._cursorElement.classList.toggle("is-blinking",e==="idle"),this._gsap.set(this._cursorElement,{opacity:1}),e==="idle"&&!this._currentLineElement&&this._addNewLineAndPrepareForTyping())}}const Ja=new a_;class l_{constructor(){this.fsmInterpreter=null,this.previousFsmSnapshotValue=null,this.debug=!0,this.LReductionProxy={value:.85},this.opacityFactorProxy={value:.15}}init(){this.debug&&console.log("[StartupSequenceManager INIT]");const e=O.get("config");this.LReductionProxy.value=e.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,O.register("proxies",{LReductionProxy:this.LReductionProxy,opacityFactorProxy:this.opacityFactorProxy})}start(e=!0){this._resetVisualsAndState(e),this.fsmInterpreter=Ua(Wa),this.fsmInterpreter.subscribe(t=>{const i=JSON.stringify(t.value);(t.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(t),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"START_SEQUENCE",isStepThroughMode:e})}playNextPhase(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"NEXT_STEP_REQUESTED"})}playAllRemaining(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"SET_AUTO_PLAY"})}pauseSequence(){this.fsmInterpreter&&(this.fsmInterpreter.send({type:"PAUSE_SEQUENCE"}),console.log("[SSM] Sequence auto-play paused."))}resumeSequence(){this.fsmInterpreter&&(this.playAllRemaining(),console.log("[SSM] Sequence auto-play resumed."))}resetSequence(){this.start(!0)}jumpToPhase(e){this.fsmInterpreter&&this.fsmInterpreter.stop(),this._resetVisualsAndState(!0),this.fsmInterpreter=Ua(Wa),this.fsmInterpreter.subscribe(t=>{const i=JSON.stringify(t.value);(t.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(t),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"JUMP_TO_PHASE",phase:e,isStepThroughMode:!1})}_resetVisualsAndState(e){this.debug&&console.log(`[SSM] _resetVisualsAndState called. Make Body Visible: ${e}`),this.fsmInterpreter&&(this.fsmInterpreter.stop(),this.fsmInterpreter=null),this.previousFsmSnapshotValue=null;const t=O.get("domElements"),i=O.get("gsap"),n=O.get("config"),r=O.get("lcdUpdater");t.body.classList.contains("pre-boot")&&t.body.classList.remove("pre-boot"),i.killTweensOf([t.body,this.LReductionProxy,this.opacityFactorProxy]),e&&i.set(t.body,{opacity:1}),this.LReductionProxy.value=n.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,t.root.style.setProperty("--startup-L-reduction-factor",this.LReductionProxy.value.toFixed(3)),t.root.style.setProperty("--startup-opacity-factor",this.opacityFactorProxy.value.toFixed(3)),t.root.style.setProperty("--startup-opacity-factor-boosted",Math.min(1,this.opacityFactorProxy.value*1.25).toFixed(3)),this.debug&&console.log(`[SSM Reset] Set L-reduction to ${this.LReductionProxy.value}`),Vn("starting-up"),Ks(-1),Fo("dim"),$n(0),Zt("A",{hue:n.DEFAULT_DIAL_A_HUE,targetHue:n.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),Zt("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),this.debug&&console.log("[SSM Reset] App state reset (status, theme, lens, dials)."),O.get("buttonManager").setInitialDimStates(),O.get("lensManager").directUpdateLensVisuals(0),O.get("terminalManager").reset(),[t.terminalContainer,t.lcdA,t.lcdB].forEach(l=>{l&&r.setLcdState(l,"unlit",{phaseContext:"Reset"})}),this.debug&&console.log("[SSM Reset] All managers reset to initial state.")}_performThemeTransitionCleanup(){const e=O.get("domElements");e.body.classList.remove("is-transitioning-from-dim"),document.querySelectorAll(".animate-on-dim-exit").forEach(i=>i.classList.remove("animate-on-dim-exit")),[e.dialA,e.dialB].forEach(i=>{i&&i.classList.remove("is-active-for-startup")}),this.debug&&console.log("[SSM] Theme transition cleanup performed.")}_notifyFsmTransition(e){const t=this._getPhaseInfoFromSnapshot(e);ce("startup:phaseChanged",t),Ks(t.numericPhase)}_getPhaseInfoFromSnapshot(e){const t=e.context.currentPhase,i=O.get("config").phaseConfigs,n=i&&t>=0&&t<i.length?i[t]:null;let r="N/A";e.matches("IDLE")?r="IDLE":e.matches("COMPLETE")?r="COMPLETE":e.matches("ERROR")?r="ERROR":n?r=n.name:typeof e.value=="string"?r=e.value:r=JSON.stringify(e.value);const a=i&&t+1<i.length?i[t+1]:null,l=e.nextEvents?e.nextEvents.join(", "):"N/A";return{numericPhase:t??-1,currentPhaseName:r,status:e.done?"completed":e.matches("PAUSED")?"paused":"running",description:`FSM State: ${JSON.stringify(e.value)}`,nextPhaseName:e.matches("PAUSED")&&a?a.name:l||"N/A",nextPhaseDescription:"N/A"}}}class u_{constructor(e,t,i){if(!i)throw new Error("GSAP instance is required for MoodMatrix.");this.gsap=i,this.config=t,this.container=e,this.isContinuouslyScrambling=!1,this.currentScrambleTween=null,this.container.innerHTML="",this.nameEl=this.container.appendChild(document.createElement("div")),this.nameEl.className="display-container__row--name",this.nameEl.textContent="INITIALIZING",this.majorBlocksContainer=this.container.appendChild(document.createElement("div")),this.majorBlocksContainer.className="mood-matrix__row--major-blocks",this.fineDotsContainer=this.container.appendChild(document.createElement("div")),this.fineDotsContainer.className="fine-dot-row",this.majorBlockEls=[],this.fineDotEls=[],this._setupDOM()}_setupDOM(){for(let e=0;e<this.config.majorBlocks;e++){const t=document.createElement("div");t.className="major-block major-block--off",t.textContent="00",this.majorBlockEls.push(this.majorBlocksContainer.appendChild(t))}for(let e=0;e<this.config.fineDots;e++){const t=document.createElement("div");t.className="fine-dot fine-dot--off",this.fineDotEls.push(this.fineDotsContainer.appendChild(t))}}update({hue:e}){const t=(e%360+360)%360;if(!this.isContinuouslyScrambling){const i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"UNKNOWN";this._updateMoodName(n)}this._updateMajorBlocks(t),this._updateFineProgress(Math.floor(t/(360/this.config.fineDots)))}startContinuousScramble(e){if(this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!0;const t=(e%360+360)%360,i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,r=(this.config.moods[i]||"ERROR").length;this.currentScrambleTween&&this.currentScrambleTween.kill();const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890";this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.15,text:{value:()=>{let l="";for(let d=0;d<r;d++)l+=a.charAt(Math.floor(Math.random()*a.length));return l},scrambleText:{chars:a,speed:1.8,tweenLength:!1}},ease:"none",repeat:-1,repeatRefresh:!0})}stopContinuousScramble(e){if(!this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!1;const t=(e%360+360)%360,i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"RESOLVED";this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:n,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"})}_updateMoodName(e){this.nameEl.textContent!==e&&!this.isContinuouslyScrambling&&(this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:e,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"}))}_updateMajorBlocks(e){const{majorBlocks:t,moods:i}=this.config,n=360/t,r=Math.floor(e/n),a=e%n/n,l=100-Math.abs(a-.5)*100,d=100-l,f=a<.5?(r-1+t)%t:(r+1)%t;this.majorBlockEls.forEach((h,o)=>{let c="major-block--off",u="";const _=i[o]?i[o].charAt(0):"?";let p=0;o===r?(c="major-block--on",p=Math.min(9,Math.round(l/10))):o===f?(c="major-block--in-progress",p=Math.min(9,Math.round(d/10))):(c="major-block--off",p=0),u=`${_}${p}`;const g=`major-block ${c}`;h.className!==g&&(h.className=g),h.textContent!==u&&(h.textContent=u)})}_updateFineProgress(e){const t=this.config.fineDots,i=(e-1+t)%t,n=(e+1)%t,r=(e-2+t)%t,a=(e+2)%t,l=(e-3+t)%t,d=(e+3)%t;this.fineDotEls.forEach((f,h)=>{let o="fine-dot--off";h===e?o="fine-dot--on":h===i||h===n?o="fine-dot--in-progress-1":h===r||h===a?o="fine-dot--in-progress-2":(h===l||h===d)&&(o="fine-dot--in-progress-3");const c=`fine-dot ${o}`;f.className!==c&&(f.className=c)})}}class c_{constructor(){this.config=null,this.dom=null,this.gsap=null,this.moodMatrix=null,this.resonanceTimer=null,this.lastIsDragging=!1,this.moodLcdContent=null}init(){this.config=O.get("config"),this.dom=O.get("domElements"),this.gsap=O.get("gsap"),this.moodLcdContent=this.dom.lcdA.querySelector(".lcd-content-wrapper");const e={moods:this.config.MOOD_MATRIX_DEFINITIONS.map(t=>t.toUpperCase()),majorBlocks:this.config.V2_DISPLAY_PARAMS.MOOD_MAJOR_BLOCKS,fineDots:this.config.V2_DISPLAY_PARAMS.MOOD_FINE_DOTS};this.moodMatrix=new u_(this.moodLcdContent,e,this.gsap),oe("dialUpdated",({id:t,state:i})=>{if(t==="A"){if(i.isDragging!==this.lastIsDragging){this.handleInteractionChange(i.isDragging,i.hue),this.lastIsDragging=i.isDragging;return}this.handleDialUpdate(i.hue)}}),this.handleDialUpdate(Et("A").hue)}handleDialUpdate(e){this.moodMatrix.update({hue:e})}handleInteractionChange(e,t){const i=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdA.classList.remove("is-resonating"),e?this.moodMatrix.startContinuousScramble(t):(this.moodMatrix.stopContinuousScramble(t),this.resonanceTimer=setTimeout(()=>{const n=Et("A");n&&n.hue>0&&this.dom.lcdA.classList.add("is-resonating")},i))}}class d_{constructor(e,t){this.config=t,this.container=e,this.container.innerHTML="",this.percentEl=this.container.appendChild(document.createElement("div")),this.percentEl.className="display-container__row--name",this.barsContainer=this.container.appendChild(document.createElement("div")),this.barsContainer.className="intensity-display__row--bars",this.dotsContainer=this.container.appendChild(document.createElement("div")),this.dotsContainer.className="fine-dot-row",this.barEls=[],this.dotEls=[],this._setupDOM()}_setupDOM(){for(let e=0;e<this.config.bars;e++){const t=document.createElement("div");t.className="intensity-bar intensity-bar--unselected",this.barEls.push(this.barsContainer.appendChild(t))}for(let e=0;e<this.config.dots;e++){const t=document.createElement("div");t.className="fine-dot fine-dot--off",this.dotEls.push(this.dotsContainer.appendChild(t))}}update({percentage:e}){this._updatePercentageText(e);const t=Math.round(e/100*this.config.bars);this._updateBars(t),this._updateDots(t)}_updatePercentageText(e){const t=`${Math.round(e)}%`;this.percentEl.textContent!==t&&(this.percentEl.textContent=t)}_updateBars(e){this.barEls.forEach((t,i)=>{const r=`intensity-bar ${i<e?"intensity-bar--selected":"intensity-bar--unselected"}`;t.className!==r&&(t.className=r)})}_updateDots(e){const t=e>0?e-1:-1,i=t-1;this.dotEls.forEach((n,r)=>{let a="fine-dot--off";r===t?a="fine-dot--on":r===i?a="fine-dot--in-progress-1":r<i&&(a="fine-dot--in-progress-2");const l=`fine-dot ${a}`;n.className!==l&&(n.className=l)})}}class f_{constructor(){this.config=null,this.dom=null,this.intensityDisplay=null,this.resonanceTimer=null}init(){console.log("[IntensityDisplayManager] init() called."),this.config=O.get("config"),this.dom=O.get("domElements");const e={bars:this.config.V2_DISPLAY_PARAMS.INTENSITY_BARS,dots:this.config.V2_DISPLAY_PARAMS.INTENSITY_DOTS};this.intensityDisplay=new d_(this.dom.lcdB.querySelector(".lcd-content-wrapper"),e),oe("dialUpdated",({id:t,state:i})=>{t==="B"&&this.handleDialUpdate(i.hue)}),oe("dialBInteractionChange",t=>{const i=t==="dragging"||t==="settling";this.handleInteractionChange(i)}),this.handleDialUpdate(Et("B").hue)}handleDialUpdate(e){const t=e/360*100;this.intensityDisplay.update({percentage:t})}handleInteractionChange(e){console.log(`[IntensityDisplayManager] handleInteractionChange() called. isInteracting: ${e}`);const t=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdB.classList.remove("is-resonating"),e||(this.resonanceTimer=setTimeout(()=>{const i=Et("B");i&&i.hue>0&&(console.log("[IntensityDisplayManager] Starting resonance for Dial B."),this.dom.lcdB.classList.add("is-resonating"))},t))}}var fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ps={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var el;function h_(){return el||(el=1,function(s){(function(){var e=function(){this.init()};e.prototype={init:function(){var o=this||t;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var c=this||t;if(o=parseFloat(o),c.ctx||h(),typeof o<"u"&&o>=0&&o<=1){if(c._volume=o,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var _=c._howls[u]._getSoundIds(),p=0;p<_.length;p++){var g=c._howls[u]._soundById(_[p]);g&&g._node&&(g._node.volume=g._volume*o)}return c}return c._volume},mute:function(o){var c=this||t;c.ctx||h(),c._muted=o,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o?0:c._volume,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var _=c._howls[u]._getSoundIds(),p=0;p<_.length;p++){var g=c._howls[u]._soundById(_[p]);g&&g._node&&(g._node.muted=o?!0:g._muted)}return c},stop:function(){for(var o=this||t,c=0;c<o._howls.length;c++)o._howls[c].stop();return o},unload:function(){for(var o=this||t,c=o._howls.length-1;c>=0;c--)o._howls[c].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,h()),o},codecs:function(o){return(this||t)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||t;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{var c=new Audio;c.muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||t,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return o}if(!c||typeof c.canPlayType!="function")return o;var u=c.canPlayType("audio/mpeg;").replace(/^no$/,""),_=o._navigator?o._navigator.userAgent:"",p=_.match(/OPR\/(\d+)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,m=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,D=_.match(/Version\/(.*?) /),S=m&&D&&parseInt(D[1],10)<15;return o._codecs={mp3:!!(!g&&(u||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!S&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!S&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||t;if(!(o._audioUnlocked||!o.ctx)){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&o.ctx.sampleRate!==44100&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var c=function(u){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,o._releaseHtml5Audio(_)}catch{o.noAudio=!0;break}for(var p=0;p<o._howls.length;p++)if(!o._howls[p]._webAudio)for(var g=o._howls[p]._getSoundIds(),m=0;m<g.length;m++){var D=o._howls[p]._soundById(g[m]);D&&D._node&&!D._node._unlocked&&(D._node._unlocked=!0,D._node.load())}o._autoResume();var S=o.ctx.createBufferSource();S.buffer=o._scratchBuffer,S.connect(o.ctx.destination),typeof S.start>"u"?S.noteOn(0):S.start(0),typeof o.ctx.resume=="function"&&o.ctx.resume(),S.onended=function(){S.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var A=0;A<o._howls.length;A++)o._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),o}},_obtainHtml5Audio:function(){var o=this||t;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var c=this||t;return o._unlocked&&c._html5AudioPool.push(o),c},_autoSuspend:function(){var o=this;if(!(!o.autoSuspend||!o.ctx||typeof o.ctx.suspend>"u"||!t.usingWebAudio)){for(var c=0;c<o._howls.length;c++)if(o._howls[c]._webAudio){for(var u=0;u<o._howls[c]._sounds.length;u++)if(!o._howls[c]._sounds[u]._paused)return o}return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var _=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(_,_)}},3e4),o}},_autoResume:function(){var o=this;if(!(!o.ctx||typeof o.ctx.resume>"u"||!t.usingWebAudio))return o.state==="running"&&o.ctx.state!=="interrupted"&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):o.state==="suspended"||o.state==="running"&&o.ctx.state==="interrupted"?(o.ctx.resume().then(function(){o.state="running";for(var c=0;c<o._howls.length;c++)o._howls[c]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):o.state==="suspending"&&(o._resumeAfterSuspend=!0),o}};var t=new e,i=function(o){var c=this;if(!o.src||o.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(o)};i.prototype={init:function(o){var c=this;return t.ctx||h(),c._autoplay=o.autoplay||!1,c._format=typeof o.format!="string"?o.format:[o.format],c._html5=o.html5||!1,c._muted=o.mute||!1,c._loop=o.loop||!1,c._pool=o.pool||5,c._preload=typeof o.preload=="boolean"||o.preload==="metadata"?o.preload:!0,c._rate=o.rate||1,c._sprite=o.sprite||{},c._src=typeof o.src!="string"?o.src:[o.src],c._volume=o.volume!==void 0?o.volume:1,c._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:o.xhr&&o.xhr.withCredentials?o.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=o.onend?[{fn:o.onend}]:[],c._onfade=o.onfade?[{fn:o.onfade}]:[],c._onload=o.onload?[{fn:o.onload}]:[],c._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],c._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],c._onpause=o.onpause?[{fn:o.onpause}]:[],c._onplay=o.onplay?[{fn:o.onplay}]:[],c._onstop=o.onstop?[{fn:o.onstop}]:[],c._onmute=o.onmute?[{fn:o.onmute}]:[],c._onvolume=o.onvolume?[{fn:o.onvolume}]:[],c._onrate=o.onrate?[{fn:o.onrate}]:[],c._onseek=o.onseek?[{fn:o.onseek}]:[],c._onunlock=o.onunlock?[{fn:o.onunlock}]:[],c._onresume=[],c._webAudio=t.usingWebAudio&&!c._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var o=this,c=null;if(t.noAudio){o._emit("loaderror",null,"No audio support.");return}typeof o._src=="string"&&(o._src=[o._src]);for(var u=0;u<o._src.length;u++){var _,p;if(o._format&&o._format[u])_=o._format[u];else{if(p=o._src[u],typeof p!="string"){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(p),_||(_=/\.([^.]+)$/.exec(p.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&t.codecs(_)){c=o._src[u];break}}if(!c){o._emit("loaderror",null,"No codec support for selected audio sources.");return}return o._src=c,o._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(o._html5=!0,o._webAudio=!1),new n(o),o._webAudio&&a(o),o},play:function(o,c){var u=this,_=null;if(typeof o=="number")_=o,o=null;else{if(typeof o=="string"&&u._state==="loaded"&&!u._sprite[o])return null;if(typeof o>"u"&&(o="__default",!u._playLock)){for(var p=0,g=0;g<u._sounds.length;g++)u._sounds[g]._paused&&!u._sounds[g]._ended&&(p++,_=u._sounds[g]._id);p===1?o=null:_=null}}var m=_?u._soundById(_):u._inactiveSound();if(!m)return null;if(_&&!o&&(o=m._sprite||"__default"),u._state!=="loaded"){m._sprite=o,m._ended=!1;var D=m._id;return u._queue.push({event:"play",action:function(){u.play(D)}}),D}if(_&&!m._paused)return c||u._loadQueue("play"),m._id;u._webAudio&&t._autoResume();var S=Math.max(0,m._seek>0?m._seek:u._sprite[o][0]/1e3),A=Math.max(0,(u._sprite[o][0]+u._sprite[o][1])/1e3-S),T=A*1e3/Math.abs(m._rate),C=u._sprite[o][0]/1e3,v=(u._sprite[o][0]+u._sprite[o][1])/1e3;m._sprite=o,m._ended=!1;var w=function(){m._paused=!1,m._seek=S,m._start=C,m._stop=v,m._loop=!!(m._loop||u._sprite[o][2])};if(S>=v){u._ended(m);return}var E=m._node;if(u._webAudio){var F=function(){u._playLock=!1,w(),u._refreshBuffer(m);var H=m._muted||u._muted?0:m._volume;E.gain.setValueAtTime(H,t.ctx.currentTime),m._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?m._loop?E.bufferSource.noteGrainOn(0,S,86400):E.bufferSource.noteGrainOn(0,S,A):m._loop?E.bufferSource.start(0,S,86400):E.bufferSource.start(0,S,A),T!==1/0&&(u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),T)),c||setTimeout(function(){u._emit("play",m._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?F():(u._playLock=!0,u.once("resume",F),u._clearTimer(m._id))}else{var x=function(){E.currentTime=S,E.muted=m._muted||u._muted||t._muted||E.muted,E.volume=m._volume*t.volume(),E.playbackRate=m._rate;try{var H=E.play();if(H&&typeof Promise<"u"&&(H instanceof Promise||typeof H.then=="function")?(u._playLock=!0,w(),H.then(function(){u._playLock=!1,E._unlocked=!0,c?u._loadQueue():u._emit("play",m._id)}).catch(function(){u._playLock=!1,u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):c||(u._playLock=!1,w(),u._emit("play",m._id)),E.playbackRate=m._rate,E.paused){u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}o!=="__default"||m._loop?u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),T):(u._endTimers[m._id]=function(){u._ended(m),E.removeEventListener("ended",u._endTimers[m._id],!1)},E.addEventListener("ended",u._endTimers[m._id],!1))}catch(W){u._emit("playerror",m._id,W)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var U=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||U)x();else{u._playLock=!0,u._state="loading";var I=function(){u._state="loaded",x(),E.removeEventListener(t._canPlayEvent,I,!1)};E.addEventListener(t._canPlayEvent,I,!1),u._clearTimer(m._id)}}return m._id},pause:function(o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(o)}}),c;for(var u=c._getSoundIds(o),_=0;_<u.length;_++){c._clearTimer(u[_]);var p=c._soundById(u[_]);if(p&&!p._paused&&(p._seek=c.seek(u[_]),p._rateSeek=0,p._paused=!0,c._stopFade(u[_]),p._node))if(c._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),c._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||c._emit("pause",p?p._id:null)}return c},stop:function(o,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(o)}}),u;for(var _=u._getSoundIds(o),p=0;p<_.length;p++){u._clearTimer(_[p]);var g=u._soundById(_[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,u._stopFade(_[p]),g._node&&(u._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),u._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&u._clearSound(g._node))),c||u._emit("stop",g._id))}return u},mute:function(o,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(o,c)}}),u;if(typeof c>"u")if(typeof o=="boolean")u._muted=o;else return u._muted;for(var _=u._getSoundIds(c),p=0;p<_.length;p++){var g=u._soundById(_[p]);g&&(g._muted=o,g._interval&&u._stopFade(g._id),u._webAudio&&g._node?g._node.gain.setValueAtTime(o?0:g._volume,t.ctx.currentTime):g._node&&(g._node.muted=t._muted?!0:o),u._emit("mute",g._id))}return u},volume:function(){var o=this,c=arguments,u,_;if(c.length===0)return o._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):u=parseFloat(c[0])}else c.length>=2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));var m;if(typeof u<"u"&&u>=0&&u<=1){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,c)}}),o;typeof _>"u"&&(o._volume=u),_=o._getSoundIds(_);for(var D=0;D<_.length;D++)m=o._soundById(_[D]),m&&(m._volume=u,c[2]||o._stopFade(_[D]),o._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(u,t.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=u*t.volume()),o._emit("volume",m._id))}else return m=_?o._soundById(_):o._sounds[0],m?m._volume:0;return o},fade:function(o,c,u,_){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(o,c,u,_)}}),p;o=Math.min(Math.max(0,parseFloat(o)),1),c=Math.min(Math.max(0,parseFloat(c)),1),u=parseFloat(u),p.volume(o,_);for(var g=p._getSoundIds(_),m=0;m<g.length;m++){var D=p._soundById(g[m]);if(D){if(_||p._stopFade(g[m]),p._webAudio&&!D._muted){var S=t.ctx.currentTime,A=S+u/1e3;D._volume=o,D._node.gain.setValueAtTime(o,S),D._node.gain.linearRampToValueAtTime(c,A)}p._startFadeInterval(D,o,c,u,g[m],typeof _>"u")}}return p},_startFadeInterval:function(o,c,u,_,p,g){var m=this,D=c,S=u-c,A=Math.abs(S/.01),T=Math.max(4,A>0?_/A:_),C=Date.now();o._fadeTo=u,o._interval=setInterval(function(){var v=(Date.now()-C)/_;C=Date.now(),D+=S*v,D=Math.round(D*100)/100,S<0?D=Math.max(u,D):D=Math.min(u,D),m._webAudio?o._volume=D:m.volume(D,o._id,!0),g&&(m._volume=D),(u<c&&D<=u||u>c&&D>=u)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,m.volume(u,o._id),m._emit("fade",o._id))},T)},_stopFade:function(o){var c=this,u=c._soundById(o);return u&&u._interval&&(c._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,c.volume(u._fadeTo,o),u._fadeTo=null,c._emit("fade",o)),c},loop:function(){var o=this,c=arguments,u,_,p;if(c.length===0)return o._loop;if(c.length===1)if(typeof c[0]=="boolean")u=c[0],o._loop=u;else return p=o._soundById(parseInt(c[0],10)),p?p._loop:!1;else c.length===2&&(u=c[0],_=parseInt(c[1],10));for(var g=o._getSoundIds(_),m=0;m<g.length;m++)p=o._soundById(g[m]),p&&(p._loop=u,o._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=u,u&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,o.playing(g[m])&&(o.pause(g[m],!0),o.play(g[m],!0)))));return o},rate:function(){var o=this,c=arguments,u,_;if(c.length===0)_=o._sounds[0]._id;else if(c.length===1){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):u=parseFloat(c[0])}else c.length===2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));var m;if(typeof u=="number"){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,c)}}),o;typeof _>"u"&&(o._rate=u),_=o._getSoundIds(_);for(var D=0;D<_.length;D++)if(m=o._soundById(_[D]),m){o.playing(_[D])&&(m._rateSeek=o.seek(_[D]),m._playStart=o._webAudio?t.ctx.currentTime:m._playStart),m._rate=u,o._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):m._node&&(m._node.playbackRate=u);var S=o.seek(_[D]),A=(o._sprite[m._sprite][0]+o._sprite[m._sprite][1])/1e3-S,T=A*1e3/Math.abs(m._rate);(o._endTimers[_[D]]||!m._paused)&&(o._clearTimer(_[D]),o._endTimers[_[D]]=setTimeout(o._ended.bind(o,m),T)),o._emit("rate",m._id)}}else return m=o._soundById(_),m?m._rate:o._rate;return o},seek:function(){var o=this,c=arguments,u,_;if(c.length===0)o._sounds.length&&(_=o._sounds[0]._id);else if(c.length===1){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):o._sounds.length&&(_=o._sounds[0]._id,u=parseFloat(c[0]))}else c.length===2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));if(typeof _>"u")return 0;if(typeof u=="number"&&(o._state!=="loaded"||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,c)}}),o;var m=o._soundById(_);if(m)if(typeof u=="number"&&u>=0){var D=o.playing(_);D&&o.pause(_,!0),m._seek=u,m._ended=!1,o._clearTimer(_),!o._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=u);var S=function(){D&&o.play(_,!0),o._emit("seek",_)};if(D&&!o._webAudio){var A=function(){o._playLock?setTimeout(A,0):S()};setTimeout(A,0)}else S()}else if(o._webAudio){var T=o.playing(_)?t.ctx.currentTime-m._playStart:0,C=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(C+T*Math.abs(m._rate))}else return m._node.currentTime;return o},playing:function(o){var c=this;if(typeof o=="number"){var u=c._soundById(o);return u?!u._paused:!1}for(var _=0;_<c._sounds.length;_++)if(!c._sounds[_]._paused)return!0;return!1},duration:function(o){var c=this,u=c._duration,_=c._soundById(o);return _&&(u=c._sprite[_._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var o=this,c=o._sounds,u=0;u<c.length;u++)c[u]._paused||o.stop(c[u]._id),o._webAudio||(o._clearSound(c[u]._node),c[u]._node.removeEventListener("error",c[u]._errorFn,!1),c[u]._node.removeEventListener(t._canPlayEvent,c[u]._loadFn,!1),c[u]._node.removeEventListener("ended",c[u]._endFn,!1),t._releaseHtml5Audio(c[u]._node)),delete c[u]._node,o._clearTimer(c[u]._id);var _=t._howls.indexOf(o);_>=0&&t._howls.splice(_,1);var p=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===o._src||o._src.indexOf(t._howls[u]._src)>=0){p=!1;break}return r&&p&&delete r[o._src],t.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,c,u,_){var p=this,g=p["_on"+o];return typeof c=="function"&&g.push(_?{id:u,fn:c,once:_}:{id:u,fn:c}),p},off:function(o,c,u){var _=this,p=_["_on"+o],g=0;if(typeof c=="number"&&(u=c,c=null),c||u)for(g=0;g<p.length;g++){var m=u===p[g].id;if(c===p[g].fn&&m||!c&&m){p.splice(g,1);break}}else if(o)_["_on"+o]=[];else{var D=Object.keys(_);for(g=0;g<D.length;g++)D[g].indexOf("_on")===0&&Array.isArray(_[D[g]])&&(_[D[g]]=[])}return _},once:function(o,c,u){var _=this;return _.on(o,c,u,1),_},_emit:function(o,c,u){for(var _=this,p=_["_on"+o],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===c||o==="load")&&(setTimeout((function(m){m.call(this,c,u)}).bind(_,p[g].fn),0),p[g].once&&_.off(o,p[g].fn,p[g].id));return _._loadQueue(o),_},_loadQueue:function(o){var c=this;if(c._queue.length>0){var u=c._queue[0];u.event===o&&(c._queue.shift(),c._loadQueue()),o||u.action()}return c},_ended:function(o){var c=this,u=o._sprite;if(!c._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(c._ended.bind(c,o),100),c;var _=!!(o._loop||c._sprite[u][2]);if(c._emit("end",o._id),!c._webAudio&&_&&c.stop(o._id,!0).play(o._id),c._webAudio&&_){c._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=t.ctx.currentTime;var p=(o._stop-o._start)*1e3/Math.abs(o._rate);c._endTimers[o._id]=setTimeout(c._ended.bind(c,o),p)}return c._webAudio&&!_&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,c._clearTimer(o._id),c._cleanBuffer(o._node),t._autoSuspend()),!c._webAudio&&!_&&c.stop(o._id,!0),c},_clearTimer:function(o){var c=this;if(c._endTimers[o]){if(typeof c._endTimers[o]!="function")clearTimeout(c._endTimers[o]);else{var u=c._soundById(o);u&&u._node&&u._node.removeEventListener("ended",c._endTimers[o],!1)}delete c._endTimers[o]}return c},_soundById:function(o){for(var c=this,u=0;u<c._sounds.length;u++)if(o===c._sounds[u]._id)return c._sounds[u];return null},_inactiveSound:function(){var o=this;o._drain();for(var c=0;c<o._sounds.length;c++)if(o._sounds[c]._ended)return o._sounds[c].reset();return new n(o)},_drain:function(){var o=this,c=o._pool,u=0,_=0;if(!(o._sounds.length<c)){for(_=0;_<o._sounds.length;_++)o._sounds[_]._ended&&u++;for(_=o._sounds.length-1;_>=0;_--){if(u<=c)return;o._sounds[_]._ended&&(o._webAudio&&o._sounds[_]._node&&o._sounds[_]._node.disconnect(0),o._sounds.splice(_,1),u--)}}},_getSoundIds:function(o){var c=this;if(typeof o>"u"){for(var u=[],_=0;_<c._sounds.length;_++)u.push(c._sounds[_]._id);return u}else return[o]},_refreshBuffer:function(o){var c=this;return o._node.bufferSource=t.ctx.createBufferSource(),o._node.bufferSource.buffer=r[c._src],o._panner?o._node.bufferSource.connect(o._panner):o._node.bufferSource.connect(o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,t.ctx.currentTime),c},_cleanBuffer:function(o){var c=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return c;if(t._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),u))try{o.bufferSource.buffer=t._scratchBuffer}catch{}return o.bufferSource=null,c},_clearSound:function(o){var c=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);c||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(o){this._parent=o,this.init()};n.prototype={init:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,c._sounds.push(o),o.create(),o},create:function(){var o=this,c=o._parent,u=t._muted||o._muted||o._parent._muted?0:o._volume;return c._webAudio?(o._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),o._node.gain.setValueAtTime(u,t.ctx.currentTime),o._node.paused=!0,o._node.connect(t.masterGain)):t.noAudio||(o._node=t._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(t._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=c._src,o._node.preload=c._preload===!0?"auto":c._preload,o._node.volume=u*t.volume(),o._node.load()),o},reset:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,c=o._parent;c._duration=Math.ceil(o._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),o._node.removeEventListener(t._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,c=o._parent;c._duration===1/0&&(c._duration=Math.ceil(o._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var r={},a=function(o){var c=o._src;if(r[c]){o._duration=r[c].duration,f(o);return}if(/^data:[^;]+;base64,/.test(c)){for(var u=atob(c.split(",")[1]),_=new Uint8Array(u.length),p=0;p<u.length;++p)_[p]=u.charCodeAt(p);d(_.buffer,o)}else{var g=new XMLHttpRequest;g.open(o._xhr.method,c,!0),g.withCredentials=o._xhr.withCredentials,g.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(m){g.setRequestHeader(m,o._xhr.headers[m])}),g.onload=function(){var m=(g.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){o._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}d(g.response,o)},g.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete r[c],o.load())},l(g)}},l=function(o){try{o.send()}catch{o.onerror()}},d=function(o,c){var u=function(){c._emit("loaderror",null,"Decoding audio data failed.")},_=function(p){p&&c._sounds.length>0?(r[c._src]=p,f(c,p)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(o).then(_).catch(u):t.ctx.decodeAudioData(o,_,u)},f=function(o,c){c&&!o._duration&&(o._duration=c.duration),Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),c=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=c?parseInt(c[1],10):null;if(o&&u&&u<9){var _=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!_&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};s.Howler=t,s.Howl=i,typeof fn<"u"?(fn.HowlerGlobal=e,fn.Howler=t,fn.Howl=i,fn.Sound=n):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=n)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,n){var r=this;if(!r.ctx||!r.ctx.listener)return r;if(i=typeof i!="number"?r._pos[1]:i,n=typeof n!="number"?r._pos[2]:n,typeof t=="number")r._pos=[t,i,n],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]);else return r._pos;return r},HowlerGlobal.prototype.orientation=function(t,i,n,r,a,l){var d=this;if(!d.ctx||!d.ctx.listener)return d;var f=d._orientation;if(i=typeof i!="number"?f[1]:i,n=typeof n!="number"?f[2]:n,r=typeof r!="number"?f[3]:r,a=typeof a!="number"?f[4]:a,l=typeof l!="number"?f[5]:l,typeof t=="number")d._orientation=[t,i,n,r,a,l],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,i,n,r,a,l);else return f;return d},Howl.prototype.init=function(t){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var a=n._getSoundIds(i),l=0;l<a.length;l++){var d=n._soundById(a[l]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,r),r==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",d._id);else return d._stereo}return n},Howl.prototype.pos=function(t,i,n,r){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(t,i,n,r)}}),a;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof r>"u")if(typeof t=="number")a._pos=[t,i,n];else return a._pos;for(var l=a._getSoundIds(r),d=0;d<l.length;d++){var f=a._soundById(l[d]);if(f)if(typeof t=="number")f._pos=[t,i,n],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setPosition(t,i,n)),a._emit("pos",f._id);else return f._pos}return a},Howl.prototype.orientation=function(t,i,n,r){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(t,i,n,r)}}),a;if(i=typeof i!="number"?a._orientation[1]:i,n=typeof n!="number"?a._orientation[2]:n,typeof r>"u")if(typeof t=="number")a._orientation=[t,i,n];else return a._orientation;for(var l=a._getSoundIds(r),d=0;d<l.length;d++){var f=a._soundById(l[d]);if(f)if(typeof t=="number")f._orientation=[t,i,n],f._node&&(f._panner||(f._pos||(f._pos=a._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setOrientation(t,i,n)),a._emit("orientation",f._id);else return f._orientation}return a},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,n,r,a;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof r>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:t._panningModel});else return a=t._soundById(parseInt(i[0],10)),a?a._pannerAttr:t._pannerAttr;else i.length===2&&(n=i[0],r=parseInt(i[1],10));for(var l=t._getSoundIds(r),d=0;d<l.length;d++)if(a=t._soundById(l[d]),a){var f=a._pannerAttr;f={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:f.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:f.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:f.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:f.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:f.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:f.panningModel};var h=a._panner;h||(a._pos||(a._pos=t._pos||[0,0,-.5]),e(a,"spatial"),h=a._panner),h.coneInnerAngle=f.coneInnerAngle,h.coneOuterAngle=f.coneOuterAngle,h.coneOuterGain=f.coneOuterGain,h.distanceModel=f.distanceModel,h.maxDistance=f.maxDistance,h.refDistance=f.refDistance,h.rolloffFactor=f.rolloffFactor,h.panningModel=f.panningModel}return t},Sound.prototype.init=function(t){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,t.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(ps)),ps}var Ut=h_();class p_{constructor(){this.events={}}subscribe(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]&&(this.events[e]=this.events[e].filter(i=>i!==t))}}emit(e,t){this.events[e]&&[...this.events[e]].forEach(i=>{try{i(t)}catch(n){console.error(`Error in listener for event "${e}":`,n)}})}}class __ extends p_{constructor(){super(),this.config=null,this.sounds={},this.isAudioUnlocked=!1,this.isReadyState=!1,this.soundLoadStates={},this.queuedPlayCalls=[],this.debug=!0}init(){if(this.config=O.get("config"),!this.config||!this.config.AUDIO_CONFIG){console.error("[AudioManager INIT] Audio config not found!"),this.isReadyState=!0;return}Ut.Howler.volume(this.config.AUDIO_CONFIG.masterVolume),this._loadAllSounds(),this.isReadyState=!0,this.debug&&console.log("[AudioManager INIT] Initialized and loading sounds.")}postInitSubscribe(){}isReady(){return this.isReadyState}_loadAllSounds(){const e=this.config.AUDIO_CONFIG.sounds;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].src?(this.soundLoadStates[t]="loading",this.debug&&console.log(`[AudioManager] Attempting to load sound: ${t}, src: ${e[t].src}, html5: ${!!e[t].html5}`),t==="itemAppear"&&console.warn(`[A_LOAD_INIT P7_SOUND] itemAppear: Howl instance creation initiated. Time: ${performance.now().toFixed(2)}`),t==="lcdPowerOn"&&console.warn(`[A_LOAD_INIT P6_SOUND_LCDPOWERON] lcdPowerOn: Howl instance creation initiated. Time: ${performance.now().toFixed(2)}`),this.sounds[t]=new Ut.Howl({src:[e[t].src],loop:e[t].loop||!1,volume:e[t].volume!==void 0?e[t].volume:1,html5:e[t].html5||!1,onload:()=>{t==="itemAppear"&&console.warn(`[A_LOAD_DONE P7_SOUND] itemAppear: LOADED and READY. Time: ${performance.now().toFixed(2)}`),t==="lcdPowerOn"&&console.warn(`[A_LOAD_DONE P6_SOUND_LCDPOWERON] lcdPowerOn: LOADED and READY. Time: ${performance.now().toFixed(2)}`),this.soundLoadStates[t]="loaded",this.debug&&console.log(`[AudioManager] Sound LOADED and READY: ${t}`),this.emit("soundLoaded",t),this._processQueuedPlayCalls(t)},onloaderror:(i,n)=>{t==="itemAppear"&&console.error("[A_LOAD_ERR P7_SOUND] itemAppear: FAILED to load. Error: ",n,`Time: ${performance.now().toFixed(2)}`),t==="lcdPowerOn"&&console.error("[A_LOAD_ERR P6_SOUND_LCDPOWERON] lcdPowerOn: FAILED to load. Error: ",n,`Time: ${performance.now().toFixed(2)}`),this.soundLoadStates[t]="error",console.error(`[AudioManager] Error loading sound ${t}:`,n),this.emit("soundLoadError",{key:t,error:n})},onplayerror:(i,n)=>{console.error(`[AudioManager] Error playing sound ${t} (id: ${i}):`,n),this.unlockAudioContext()},onplay:i=>{this.debug&&console.log(`[AudioManager] Playing sound: ${t} (ID: ${i}, Current Volume: ${this.sounds[t].volume(i)})`)},onstop:i=>{this.debug&&console.log(`[AudioManager] Stopped sound: ${t} (ID: ${i})`)},onfade:i=>{this.debug&&console.log(`[AudioManager] Fade complete for sound: ${t} (ID: ${i})`)}})):console.warn(`[AudioManager] Sound config for "${t}" is missing 'src'. Skipping.`)}_processQueuedPlayCalls(e){this.debug&&this.queuedPlayCalls.some(t=>t.key===e)&&console.log(`[AudioManager] Processing queued play calls for just loaded sound: ${e}`),this.queuedPlayCalls=this.queuedPlayCalls.filter(t=>t.key===e?(this.debug&&console.log(`[AudioManager] Executing queued play for: ${e}`),t.key==="itemAppear"&&console.warn(`[A_QUEUE_PROC P7_SOUND] itemAppear: Processing queued play call. App Time: ${performance.now().toFixed(2)}`),t.key==="lcdPowerOn"&&console.warn(`[A_QUEUE_PROC P6_SOUND_LCDPOWERON] lcdPowerOn: Processing queued play call. App Time: ${performance.now().toFixed(2)}`),this.play(t.key,t.forceRestart,t.specificVolume),!1):!0)}isSoundLoaded(e){return this.soundLoadStates[e]==="loaded"}subscribeToSoundLoad(e,t){const i="soundLoaded",n=r=>{r===e&&t(r)};return this.subscribe(i,n)}subscribeToSoundLoadError(e,t){const i="soundLoadError",n=r=>{r.key===e&&t(r)};return this.subscribe(i,n)}unlockAudioContext(){if(this.isAudioUnlocked||!Ut.Howler.ctx||Ut.Howler.ctx.state!=="suspended"){this.debug&&Ut.Howler.ctx&&Ut.Howler.ctx.state!=="suspended"&&!this.isAudioUnlocked&&(this.isAudioUnlocked=!0);return}this.debug&&console.log("[AudioManager] Attempting to unlock AudioContext..."),Ut.Howler.ctx.resume().then(()=>{this.isAudioUnlocked=!0,this.debug&&console.log("[AudioManager] AudioContext resumed successfully.")}).catch(e=>console.error("[AudioManager] Error resuming AudioContext:",e))}play(e,t=!1,i=null){var n;if(e==="itemAppear"){const r=this.soundLoadStates[e]||"UNKNOWN",a=this.queuedPlayCalls.some(l=>l.key===e);console.warn(`[A_PLAY_ATTEMPT P7_SOUND] itemAppear: Play called. LoadState: ${r}. IsAlreadyQueued: ${a}. App Time: ${performance.now().toFixed(2)}`)}if(e==="lcdPowerOn"){const r=this.soundLoadStates[e]||"UNKNOWN",a=this.queuedPlayCalls.some(l=>l.key===e);console.warn(`[A_PLAY_ATTEMPT P6_SOUND_LCDPOWERON] lcdPowerOn: Play called. LoadState: ${r}. IsAlreadyQueued: ${a}. App Time: ${performance.now().toFixed(2)}`)}if(this.unlockAudioContext(),!this.sounds[e])return console.warn(`[AudioManager PLAY] Sound key "${e}" not found.`),null;if(this.debug&&console.log(`[AudioManager PLAY Attempt] Key: '${e}', LoadState: ${this.soundLoadStates[e]}, ForceRestart: ${t}, Volume: ${i===null?"default":i}`),this.soundLoadStates[e]==="loading")return e==="itemAppear"&&console.warn(`[A_PLAY_QUEUE P7_SOUND] itemAppear: Queuing play because LoadState is 'loading'. App Time: ${performance.now().toFixed(2)}`),e==="lcdPowerOn"&&console.warn(`[A_PLAY_QUEUE P6_SOUND_LCDPOWERON] lcdPowerOn: Queuing play because LoadState is 'loading'. App Time: ${performance.now().toFixed(2)}`),this.queuedPlayCalls.find(r=>r.key===e&&r.forceRestart===t&&r.specificVolume===i)?this.debug&&console.log(`[AudioManager PLAY] Sound "${e}" is loading, identical play call already queued.`):(this.debug&&console.log(`[AudioManager PLAY] Sound "${e}" is still loading. Queuing play call.`),this.queuedPlayCalls.push({key:e,forceRestart:t,specificVolume:i})),null;if(this.soundLoadStates[e]==="error")return console.error(`[AudioManager PLAY] Cannot play sound "${e}", it failed to load.`),null;if(t&&this.sounds[e].playing()&&(this.debug&&console.log(`[AudioManager PLAY] Force stopping sound "${e}" before replay.`),this.sounds[e].stop()),!this.sounds[e].playing()||t){e==="itemAppear"&&console.warn(`[A_HOWLER_PLAY P7_SOUND] itemAppear: Calling Howler's .play(). App Time: ${performance.now().toFixed(2)}`),e==="lcdPowerOn"&&console.warn(`[A_HOWLER_PLAY P6_SOUND_LCDPOWERON] lcdPowerOn: Calling Howler's .play(). App Time: ${performance.now().toFixed(2)}`);const r=this.sounds[e].play();if(typeof r=="number")if(i!==null&&typeof i=="number")this.sounds[e].volume(i,r),this.debug&&console.log(`[AudioManager PLAY] Setting specific volume ${i} for "${e}" (ID: ${r})`);else{const a=(n=this.config.AUDIO_CONFIG.sounds[e])==null?void 0:n.volume;a!==void 0&&this.sounds[e].volume(a,r)}else this.debug&&console.warn(`[AudioManager PLAY] Howler.play did not return a soundId for "${e}". Audio might be locked or another issue occurred.`);return r}return this.debug&&console.log(`[AudioManager PLAY] Sound "${e}" is already playing and forceRestart is false. No action taken.`),null}stop(e,t=null){this.sounds[e]?(this.debug&&console.log(`[AudioManager STOP] Sound: ${e}, ID: ${t||"all"}`),t?this.sounds[e].stop(t):this.sounds[e].stop()):console.warn(`[AudioManager STOP] Sound key "${e}" not found.`)}fadeOut(e,t,i=null){if(this.sounds[e]&&this.sounds[e].playing(i)){this.debug&&console.log(`[AudioManager FADEOUT] Sound: ${e}, Duration: ${t}s, ID: ${i||"all"}`);const n=0,r=t*1e3;i?this.sounds[e].fade(this.sounds[e].volume(void 0,i),n,r,i):this.sounds[e].fade(this.sounds[e].volume(),n,r)}else this.debug&&this.sounds[e]&&console.log(`[AudioManager FADEOUT] Sound "${e}" not playing or not found, cannot fadeOut.`)}fadeIn(e,t,i=null,n=null){var r;if(this.sounds[e]){const a=i!==null?i:((r=this.config.AUDIO_CONFIG.sounds[e])==null?void 0:r.volume)||1,l=t*1e3;if(this.debug&&console.log(`[AudioManager FADEIN] Sound: ${e}, Duration: ${t}s, TargetVol: ${a}, ID: ${n||"new/all"}`),n||this.sounds[e].playing(),this.sounds[e].playing(n)){const d=this.sounds[e].volume(void 0,n);this.sounds[e].fade(d,a,l,n)}else{let d;n?(console.warn(`[AudioManager FADEIN] Specified soundId ${n} for ${e} is not playing. Attempting to play new instance.`),d=this.sounds[e].play(),this.sounds[e].volume(0,d)):(d=this.sounds[e].play(),this.sounds[e].volume(0,d)),typeof d=="number"&&this.sounds[e].fade(0,a,l,d)}}else console.warn(`[AudioManager FADEIN] Sound key "${e}" not found.`)}isPlaying(e,t=null){return this.sounds[e]?this.sounds[e].playing(t):!1}setVolume(e,t,i=null){this.sounds[e]?(this.debug&&console.log(`[AudioManager SETVOLUME] Sound: ${e}, Volume: ${t}, ID: ${i||"all"}`),this.sounds[e].volume(t,i)):console.warn(`[AudioManager SETVOLUME] Sound key "${e}" not found.`)}getVolume(e,t=null){return this.sounds[e]?this.sounds[e].volume(void 0,t):(console.warn(`[AudioManager GETVOLUME] Sound key "${e}" not found.`),0)}toggleMute(e){this.debug&&console.log(`[AudioManager] Toggling global mute: ${e}`),Ut.Howler.mute(e)}}class g_{constructor(){this.dom=null,this.startupManager=null,this.audioManager=null,this.config=null,this.isMuted=!1,this.isAutoplayOn=!1,this.debug=!0}init(){this.dom=O.get("domElements"),this.startupManager=O.get("startupSequenceManager"),this.audioManager=O.get("audioManager"),this.config=O.get("config"),this.debug&&console.log("[SidePanelManager] Initializing..."),this._setupPanelToggles(),this._setupTabControls(),this._populateSequenceTab(),this._populateStateTab(),this._setupGlobalStateListeners(),this._updateManualControlsVisibility(),this.debug&&console.log("[SidePanelManager] Initialization complete.")}_setupPanelToggles(){const e=document.getElementById("deck-toggle");e&&e.addEventListener("click",()=>{this.dom.controlDeck.classList.toggle("is-expanded"),this.dom.appWrapper.classList.toggle("left-panel-expanded")});const t=document.getElementById("seq-autoplay-toggle"),i=document.getElementById("seq-next-step"),n=document.getElementById("seq-play-all"),r=document.getElementById("seq-reset");t&&t.addEventListener("click",()=>{this.isAutoplayOn=!this.isAutoplayOn,this._updateManualControlsVisibility();const l=t.querySelector(".material-symbols-outlined");l&&(l.textContent=this.isAutoplayOn?"fast_forward":"rule"),t.classList.toggle("is-active",this.isAutoplayOn),this.isAutoplayOn?(this.startupManager.playAllRemaining(),this.debug&&console.log("[SidePanelManager] Autoplay toggled ON.")):(this.startupManager.pauseSequence(),this.debug&&console.log("[SidePanelManager] Autoplay toggled OFF."))}),i&&i.addEventListener("click",()=>this.startupManager.playNextPhase()),n&&n.addEventListener("click",()=>{this.isAutoplayOn=!0,this._updateManualControlsVisibility();const l=t.querySelector(".material-symbols-outlined");l&&(l.textContent="fast_forward"),t.classList.add("is-active"),this.startupManager.playAllRemaining()}),r&&r.addEventListener("click",()=>{this.startupManager.resetSequence(),this.debug&&console.log("[SidePanelManager] Sequence reset.")});const a=document.getElementById("audio-mute-toggle");a&&a.addEventListener("click",()=>{this.isMuted=!this.isMuted,this.audioManager.toggleMute(this.isMuted);const l=a.querySelector(".material-symbols-outlined");l&&(l.textContent=this.isMuted?"volume_off":"volume_up")})}_updateManualControlsVisibility(){const e=document.getElementById("seq-next-step"),t=document.getElementById("seq-play-all");e&&e.classList.toggle("hidden",this.isAutoplayOn),t&&t.classList.toggle("hidden",this.isAutoplayOn)}_setupTabControls(){document.querySelectorAll(".panel-tab-button").forEach(t=>{t.addEventListener("click",()=>{const i=t.closest(".expanded-view");if(!i)return;i.querySelectorAll(".panel-tab-button").forEach(a=>a.classList.remove("active")),i.querySelectorAll(".panel-tab-content").forEach(a=>a.classList.remove("active")),t.classList.add("active");const n=t.dataset.tab,r=i.querySelector(`#${n}`);r&&r.classList.add("active")})})}_populateSequenceTab(){const e=document.getElementById("sequence-tab");if(!e)return;let t='<ul class="sequence-list">';this.config.phaseConfigs.forEach(i=>{t+=`<li data-phase-num="${i.phase}"><span>P${i.phase}:</span> ${i.name}</li>`}),t+="</ul>",e.innerHTML=t}_populateStateTab(){const e=document.getElementById("state-tab");if(!e)return;const t=()=>{const i=we(),n=xo(),r=ci(),a=Et("A"),l=Et("B"),d=yi();e.innerHTML=`
                <ul>
                    <li><span>App Status:</span> <span class="state-value">${i}</span></li>
                    <li><span>Theme:</span> <span class="state-value">${n}</span></li>
                    <li><span>Lens Power:</span> <span class="state-value">${(r*100).toFixed(2)}%</span></li>
                    <li><span>Mood Hue:</span> <span class="state-value">${a.hue.toFixed(2)}</span></li>
                    <li><span>Intensity:</span> <span class="state-value">${(l.hue/3.6).toFixed(2)}%</span></li>
                    <li><span>Resist Stage:</span> <span class="state-value">${d}</span></li>
                </ul>
            `};t(),oe("appStatusChanged",t),oe("themeChanged",t),oe("trueLensPowerChanged",t),oe("dialUpdated",t),oe("resistiveShutdownStageChanged",t)}_setupGlobalStateListeners(){oe("startup:phaseChanged",({numericPhase:e})=>{const t=document.getElementById("sequence-tab");t&&t.querySelectorAll("li").forEach(d=>{const f=parseInt(d.dataset.phaseNum,10);d.classList.remove("is-active","is-complete"),f<e?d.classList.add("is-complete"):f===e&&d.classList.add("is-active")});const i=we()==="interactive",n=document.getElementById("seq-autoplay-toggle"),r=document.getElementById("seq-next-step"),a=document.getElementById("seq-play-all"),l=document.getElementById("seq-reset");if(n&&(n.disabled=i),r&&(r.disabled=i),a&&(a.disabled=i),l&&(l.disabled=i),i&&n){n.classList.remove("is-active");const d=n.querySelector(".material-symbols-outlined");d&&(d.textContent="rule"),this.isAutoplayOn=!1,this._updateManualControlsVisibility()}}),oe("appStatusChanged",e=>{if(e==="starting-up"){document.querySelectorAll(".panel-control-button").forEach(i=>i.disabled=!1);const t=document.getElementById("seq-autoplay-toggle");if(t){t.classList.remove("is-active");const i=t.querySelector(".material-symbols-outlined");i&&(i.textContent="rule")}this.isAutoplayOn=!1,this._updateManualControlsVisibility()}})}}gi.registerPlugin(Xn,Po,jn);const z={};function m_(){z.root=document.documentElement,z.body=document.body,z.appWrapper=document.querySelector(".app-wrapper"),z.preloaderRoot=document.getElementById("datastream-preloader"),z.streamFonts=document.getElementById("stream-fonts"),z.streamGraphics=document.getElementById("stream-graphics"),z.streamAudio=document.getElementById("stream-audio"),z.overallProgressPercentage=document.getElementById("overall-progress-percentage"),z.overallProgressBar=document.getElementById("overall-progress-bar"),z.engageButtonContainer=document.getElementById("engage-button-container"),z.preloaderEngageBtn=document.getElementById("preloader-engage-btn"),z.criticalErrorMessageElement=document.getElementById("critical-error-message"),z.controlDeck=document.getElementById("control-deck"),z.deckToggle=document.getElementById("deck-toggle"),z.allButtons=Array.from(document.querySelectorAll(".button-unit")),z.dialA=document.getElementById("dial-canvas-container-A"),z.dialB=document.getElementById("dial-canvas-container-B"),z.lcdA=document.getElementById("hue-lcd-A"),z.lcdB=document.getElementById("hue-lcd-B"),z.terminalContainer=document.querySelector(".terminal-block .actual-lcd-screen-element"),z.terminalLcdContentElement=document.getElementById("terminal-lcd-content"),z.colorLensGradient=document.getElementById("color-lens-gradient"),z.lensSuperGlow=document.getElementById("lens-super-glow"),z.logoContainer=document.getElementById("logo-container"),z.hueAssignmentColumns=Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]"))}function D_(s){z.hueAssignmentColumns.forEach(e=>{const t=e.dataset.assignmentTarget,i=e.querySelector(".control-group-label.label-top");e.innerHTML="",i&&e.appendChild(i);for(let n=0;n<12;n++){const r=document.createElement("div");r.className="button-unit button-unit--toggle button-unit--s",r.dataset.toggleValue=n.toString(),r.setAttribute("role","radio"),r.setAttribute("aria-label",`Assign ${t.toUpperCase()} to Hue from Row ${n+1}`),r.innerHTML='<div class="light-container" aria-hidden="true"><div class="light"></div></div><div class="button-bg-frame"></div>',e.appendChild(r),s.addButton(r,t)}})}function y_(){const s=O.get("audioManager");oe("buttonInteracted",({button:e})=>{const t=e.getGroupId(),i=e.getValue(),n=e.getElement().getAttribute("aria-label");if(t==="system-power"&&i==="off"?s.play("powerOff",!0):t==="light"&&e.isSelected()?s.play("themeEngage",!0):(e.config.type==="action"||["env","lcd","logo","btn"].includes(t))&&s.play("buttonPress",!0),t==="light")Fo(i==="on"?"light":"dark");else if(t==="system-power")i==="off"?so.handlePowerOffClick():i==="on"&&yi()>0&&Ro(0);else if(["env","lcd","logo","btn"].includes(t)){const r=Ce[parseInt(i,10)];Mo(t,r)}else n==="Scan Button 1"?ce("requestTerminalMessage",{type:"block",messageKey:"BTN1_MESSAGE"}):n==="Scan Button 2"?ce("requestTerminalMessage",{type:"block",messageKey:"BTN2_MESSAGE"}):n==="Scan Button 3"?ce("requestTerminalMessage",{type:"block",messageKey:"BTN3_MESSAGE"}):n==="Scan Button 4"&&ce("requestTerminalMessage",{type:"block",messageKey:"BTN4_MESSAGE"})}),document.body.addEventListener("click",e=>{const t=e.target.closest(".button-unit:not(#preloader-engage-btn)");t&&O.get("buttonManager")&&O.get("buttonManager").handleInteraction(t)})}function E_(){if(window.HUE9000_INITIALIZED)return;window.HUE9000_INITIALIZED=!0,console.log("[Main INIT] HUE 9000 Project Decouple Initializing...");const s=O.get("audioManager"),e=new Kp,t=new Zp,i=new Qp,n=new Wp,r=new qp,a=new jp,l=new s_,d=new r_,f=new l_,h=new c_,o=new f_,c=new g_;O.register("themeManager",e),O.register("lcdUpdater",t),O.register("dynamicStyleManager",i),O.register("buttonManager",n),O.register("dialManager",r),O.register("lensManager",a),O.register("ambientAnimationManager",l),O.register("phaseRunner",d),O.register("startupSequenceManager",f),O.register("moodMatrixManager",h),O.register("intensityDisplayManager",o),O.register("sidePanelManager",c),O.register("resistiveShutdownController",so),O.register("terminalManager",Ja),Vn("loading"),s.postInitSubscribe(),f.init(),d.init(),[e,t,i,n,r,a,l,h,o,c,so,Ja].forEach(_=>{typeof _.init=="function"&&_.init()}),D_(n),n.discoverButtons(z.allButtons),y_(),s&&s.play("backgroundMusic"),f.start(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",()=>{m_(),O.register("gsap",gi),O.register("config",{...Eh,phaseConfigs:no});let s;try{s=O.get("domElements")}catch{}s||O.register("domElements",z);const e=new __;O.register("audioManager",e),e.init();const t={body:z.body,preloaderRoot:z.preloaderRoot,streamFonts:z.streamFonts,streamGraphics:z.streamGraphics,streamAudio:z.streamAudio,overallProgressPercentage:z.overallProgressPercentage,overallProgressBar:z.overallProgressBar,engageButton:z.preloaderEngageBtn,engageButtonContainer:z.engageButtonContainer,criticalErrorMessageElement:z.criticalErrorMessageElement};Yp(t,gi).then(E_)});
