(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function Te(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Aa(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var $t={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Bi={duration:.5,overwrite:!1,delay:0},Ur,At,rt,ge=1e8,bt=1/ge,Js=Math.PI*2,Fu=Js/4,Ru=0,Ca=Math.sqrt,Nu=Math.cos,ku=Math.sin,Et=function(t){return typeof t=="string"},lt=function(t){return typeof t=="function"},be=function(t){return typeof t=="number"},Gr=function(t){return typeof t>"u"},_e=function(t){return typeof t=="object"},Ot=function(t){return t!==!1},Hr=function(){return typeof window<"u"},$n=function(t){return lt(t)||Et(t)},Ia=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Lt=Array.isArray,tr=/(?:-?\.?\d|\.)+/gi,wa=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ms=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ba=/[+-]=-?[.\d]+/,La=/[^,'"\[\]\s]+/gi,Bu=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ot,he,er,$r,Vt={},as={},va,Pa=function(t){return(as=Ui(t,Vt))&&Rt},Vr=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Tn=function(t,e){return!e&&console.warn(t)},Oa=function(t,e){return t&&(Vt[t]=e)&&as&&(as[t]=e)||Vt},An=function(){return 0},Uu={suppressEvents:!0,isStart:!0,kill:!1},jn={suppressEvents:!0,kill:!1},Gu={suppressEvents:!0},Yr={},He=[],ir={},xa,kt={},Fs={},vo=30,qn=[],zr="",Wr=function(t){var e=t[0],i,n;if(_e(e)||lt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=qn.length;n--&&!qn[n].targetTest(e););i=qn[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new il(t[n],i)))||t.splice(n,1);return t},oi=function(t){return t._gsap||Wr(Qt(t))[0]._gsap},Ma=function(t,e,i){return(i=t[e])&&lt(i)?t[e]():Gr(i)&&t.getAttribute&&t.getAttribute(e)||i},xt=function(t,e){return(t=t.split(",")).forEach(e)||t},ht=function(t){return Math.round(t*1e5)/1e5||0},gt=function(t){return Math.round(t*1e7)/1e7||0},Pi=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},Hu=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},ls=function(){var t=He.length,e=He.slice(0),i,n;for(ir={},He.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Xr=function(t){return!!(t._initted||t._startAt||t.add)},Fa=function(t,e,i,n){He.length&&!At&&ls(),t.render(e,i,!!(At&&e<0&&Xr(t))),He.length&&!At&&ls()},Ra=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(La).length<2?e:Et(t)?t.trim():t},Na=function(t){return t},Yt=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},$u=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},Ui=function(t,e){for(var i in e)t[i]=e[i];return t},Po=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=_e(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},us=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},fn=function(t){var e=t.parent||ot,i=t.keyframes?$u(Lt(t.keyframes)):Yt;if(Ot(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Vu=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},ka=function(t,e,i,n,s){var o=t[n],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},ys=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},Ye=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ai=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Yu=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},nr=function(t,e,i,n){return t._startAt&&(At?t._startAt.revert(jn):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},zu=function r(t){return!t||t._ts&&r(t.parent)},Oo=function(t){return t._repeat?Gi(t._tTime,t=t.duration()+t._rDelay)*t:0},Gi=function(t,e){var i=Math.floor(t=gt(t/e));return t&&i===t?i-1:i},cs=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ts=function(t){return t._end=gt(t._start+(t._tDur/Math.abs(t._ts||t._rts||bt)||0))},As=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=gt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ts(t),i._dirty||ai(i,t)),t},Ba=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=cs(t.rawTime(),e),(!e._dur||Fn(0,e.totalDuration(),i)-e._tTime>bt)&&e.render(i,!0)),ai(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},de=function(t,e,i,n){return e.parent&&Ye(e),e._start=gt((be(i)?i:i||t!==ot?Zt(t,i,e):t._time)+e._delay),e._end=gt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),ka(t,e,"_first","_last",t._sort?"_start":0),sr(e)||(t._recent=e),n||Ba(t,e),t._ts<0&&As(t,t._tTime),t},Ua=function(t,e){return(Vt.ScrollTrigger||Vr("scrollTrigger",e))&&Vt.ScrollTrigger.create(e,t)},Ga=function(t,e,i,n,s){if(qr(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!At&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&xa!==Ut.frame)return He.push(t),t._lazy=[s,n],1},Wu=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},sr=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Xu=function(t,e,i,n){var s=t.ratio,o=e<0||!e&&(!t._start&&Wu(t)&&!(!t._initted&&sr(t))||(t._ts<0||t._dp._ts<0)&&!sr(t))?0:1,a=t._rDelay,l=0,c,h,f;if(a&&t._repeat&&(l=Fn(0,t._tDur,e),h=Gi(l,a),t._yoyo&&h&1&&(o=1-o),h!==Gi(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||At||n||t._zTime===bt||!e&&t._zTime){if(!t._initted&&Ga(t,e,n,i,l))return;for(f=t._zTime,t._zTime=e||(i?bt:0),i||(i=e&&!f),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&nr(t,e,i,!0),t._onUpdate&&!i&&Ht(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Ht(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Ye(t,1),!i&&!At&&(Ht(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},ju=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Hi=function(t,e,i,n){var s=t._repeat,o=gt(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:gt(o*(s+1)+t._rDelay*s):o,a>0&&!n&&As(t,t._tTime=t._tDur*a),t.parent&&Ts(t),i||ai(t.parent,t),t},xo=function(t){return t instanceof vt?ai(t):Hi(t,t._dur)},qu={_start:0,endTime:An,totalDuration:An},Zt=function r(t,e,i){var n=t.labels,s=t._recent||qu,o=t.duration()>=ge?s.endTime(!1):t._dur,a,l,c;return Et(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),c=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),c&&i&&(l=l/100*(Lt(i)?i[0]:i).totalDuration()),a>1?r(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},dn=function(t,e,i){var n=be(e[1]),s=(n?2:1)+(t<2?0:1),o=e[s],a,l;if(n&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ot(l.vars.inherit)&&l.parent;o.immediateRender=Ot(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new pt(e[0],o,e[s+1])},Xe=function(t,e){return t||t===0?e(t):e},Fn=function(t,e,i){return i<t?t:i>e?e:i},wt=function(t,e){return!Et(t)||!(e=Bu.exec(t))?"":e[1]},Ku=function(t,e,i){return Xe(i,function(n){return Fn(t,e,n)})},rr=[].slice,Ha=function(t,e){return t&&_e(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&_e(t[0]))&&!t.nodeType&&t!==he},Zu=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return Et(n)&&!e||Ha(n,1)?(s=i).push.apply(s,Qt(n)):i.push(n)})||i},Qt=function(t,e,i){return rt&&!e&&rt.selector?rt.selector(t):Et(t)&&!i&&(er||!$i())?rr.call((e||$r).querySelectorAll(t),0):Lt(t)?Zu(t,i):Ha(t)?rr.call(t,0):t?[t]:[]},or=function(t){return t=Qt(t)[0]||Tn("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Qt(e,i.querySelectorAll?i:i===t?Tn("Invalid scope")||$r.createElement("div"):t)}},$a=function(t){return t.sort(function(){return .5-Math.random()})},Va=function(t){if(lt(t))return t;var e=_e(t)?t:{each:t},i=li(e.ease),n=e.from||0,s=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,c=e.axis,h=n,f=n;return Et(n)?h=f={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(h=n[0],f=n[1]),function(d,u,g){var p=(g||e).length,_=o[p],S,T,A,C,D,L,b,I,y;if(!_){if(y=e.grid==="auto"?0:(e.grid||[1,ge])[1],!y){for(b=-1e8;b<(b=g[y++].getBoundingClientRect().left)&&y<p;);y<p&&y--}for(_=o[p]=[],S=l?Math.min(y,p)*h-.5:n%y,T=y===ge?0:l?p*f/y-.5:n/y|0,b=0,I=ge,L=0;L<p;L++)A=L%y-S,C=T-(L/y|0),_[L]=D=c?Math.abs(c==="y"?C:A):Ca(A*A+C*C),D>b&&(b=D),D<I&&(I=D);n==="random"&&$a(_),_.max=b-I,_.min=I,_.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(y>p?p-1:c?c==="y"?p/y:y:Math.max(y,p/y))||0)*(n==="edges"?-1:1),_.b=p<0?s-p:s,_.u=wt(e.amount||e.each)||0,i=i&&p<0?Ja(i):i}return p=(_[d]-_.min)/_.max||0,gt(_.b+(i?i(p):p)*_.v)+_.u}},ar=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=gt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(be(i)?0:wt(i))}},Ya=function(t,e){var i=Lt(t),n,s;return!i&&_e(t)&&(n=i=t.radius||ge,t.values?(t=Qt(t.values),(s=!be(t[0]))&&(n*=n)):t=ar(t.increment)),Xe(e,i?lt(t)?function(o){return s=t(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=ge,h=0,f=t.length,d,u;f--;)s?(d=t[f].x-a,u=t[f].y-l,d=d*d+u*u):d=Math.abs(t[f]-a),d<c&&(c=d,h=f);return h=!n||c<=n?t[h]:o,s||h===o||be(o)?h:h+wt(o)}:ar(t))},za=function(t,e,i,n){return Xe(Lt(t)?!e:i===!0?!!(i=0):!n,function(){return Lt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},Qu=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,o){return o(s)},n)}},Ju=function(t,e){return function(i){return t(parseFloat(i))+(e||wt(i))}},tc=function(t,e,i){return Xa(t,e,0,1,i)},Wa=function(t,e,i){return Xe(i,function(n){return t[~~e(n)]})},ec=function r(t,e,i){var n=e-t;return Lt(t)?Wa(t,r(0,t.length),e):Xe(i,function(s){return(n+(s-t)%n)%n+t})},ic=function r(t,e,i){var n=e-t,s=n*2;return Lt(t)?Wa(t,r(0,t.length-1),e):Xe(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>n?s-o:o)})},Cn=function(t){for(var e=0,i="",n,s,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",s=t.substr(n+7,o-n-7).match(a?La:tr),i+=t.substr(e,n-e)+za(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},Xa=function(t,e,i,n,s){var o=e-t,a=n-i;return Xe(s,function(l){return i+((l-t)/o*a||0)})},nc=function r(t,e,i,n){var s=isNaN(t+e)?0:function(u){return(1-u)*t+u*e};if(!s){var o=Et(t),a={},l,c,h,f,d;if(i===!0&&(n=1)&&(i=null),o)t={p:t},e={p:e};else if(Lt(t)&&!Lt(e)){for(h=[],f=t.length,d=f-2,c=1;c<f;c++)h.push(r(t[c-1],t[c]));f--,s=function(g){g*=f;var p=Math.min(d,~~g);return h[p](g-p)},i=e}else n||(t=Ui(Lt(t)?[]:{},t));if(!h){for(l in e)jr.call(a,t,l,"get",e[l]);s=function(g){return Qr(g,a)||(o?t.p:t)}}}return Xe(i,s)},Mo=function(t,e,i){var n=t.labels,s=ge,o,a,l;for(o in n)a=n[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ht=function(t,e,i){var n=t.vars,s=n[e],o=rt,a=t._ctx,l,c,h;if(s)return l=n[e+"Params"],c=n.callbackScope||t,i&&He.length&&ls(),a&&(rt=a),h=l?s.apply(c,l):s.call(c),rt=o,h},sn=function(t){return Ye(t),t.scrollTrigger&&t.scrollTrigger.kill(!!At),t.progress()<1&&Ht(t,"onInterrupt"),t},bi,ja=[],qa=function(t){if(t)if(t=!t.name&&t.default||t,Hr()||t.headless){var e=t.name,i=lt(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:An,render:Qr,add:jr,kill:Ec,modifier:Dc,rawVars:0},o={targetTest:0,get:0,getSetter:Zr,aliases:{},register:0};if($i(),t!==n){if(kt[e])return;Yt(n,Yt(us(t,s),o)),Ui(n.prototype,Ui(s,us(t,o))),kt[n.prop=e]=n,t.targetTest&&(qn.push(n),Yr[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Oa(e,n),t.register&&t.register(Rt,n,Mt)}else ja.push(t)},it=255,rn={aqua:[0,it,it],lime:[0,it,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,it],navy:[0,0,128],white:[it,it,it],olive:[128,128,0],yellow:[it,it,0],orange:[it,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[it,0,0],pink:[it,192,203],cyan:[0,it,it],transparent:[it,it,it,0]},Rs=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*it+.5|0},Ka=function(t,e,i){var n=t?be(t)?[t>>16,t>>8&it,t&it]:0:rn.black,s,o,a,l,c,h,f,d,u,g;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),rn[t])n=rn[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&it,n&it,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&it,t&it]}else if(t.substr(0,3)==="hsl"){if(n=g=t.match(tr),!e)l=+n[0]%360/360,c=+n[1]/100,h=+n[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,n.length>3&&(n[3]*=1),n[0]=Rs(l+1/3,s,o),n[1]=Rs(l,s,o),n[2]=Rs(l-1/3,s,o);else if(~t.indexOf("="))return n=t.match(wa),i&&n.length<4&&(n[3]=1),n}else n=t.match(tr)||rn.transparent;n=n.map(Number)}return e&&!g&&(s=n[0]/it,o=n[1]/it,a=n[2]/it,f=Math.max(s,o,a),d=Math.min(s,o,a),h=(f+d)/2,f===d?l=c=0:(u=f-d,c=h>.5?u/(2-f-d):u/(f+d),l=f===s?(o-a)/u+(o<a?6:0):f===o?(a-s)/u+2:(s-o)/u+4,l*=60),n[0]=~~(l+.5),n[1]=~~(c*100+.5),n[2]=~~(h*100+.5)),i&&n.length<4&&(n[3]=1),n},Za=function(t){var e=[],i=[],n=-1;return t.split($e).forEach(function(s){var o=s.match(wi)||[];e.push.apply(e,o),i.push(n+=o.length+1)}),e.c=i,e},Fo=function(t,e,i){var n="",s=(t+n).match($e),o=e?"hsla(":"rgba(",a=0,l,c,h,f;if(!s)return t;if(s=s.map(function(d){return(d=Ka(d,e,1))&&o+(e?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(h=Za(t),l=i.c,l.join(n)!==h.c.join(n)))for(c=t.replace($e,"1").split(wi),f=c.length-1;a<f;a++)n+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!c)for(c=t.split($e),f=c.length-1;a<f;a++)n+=c[a]+s[a];return n+c[f]},$e=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in rn)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),sc=/hsl[a]?\(/,Qa=function(t){var e=t.join(" "),i;if($e.lastIndex=0,$e.test(e))return i=sc.test(e),t[1]=Fo(t[1],i),t[0]=Fo(t[0],i,Za(t[1])),!0},In,Ut=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,c,h,f,d,u,g=function p(_){var S=r()-n,T=_===!0,A,C,D,L;if((S>t||S<0)&&(i+=S-e),n+=S,D=n-i,A=D-o,(A>0||T)&&(L=++f.frame,d=D-f.time*1e3,f.time=D=D/1e3,o+=A+(A>=s?4:s-A),C=1),T||(l=c(p)),C)for(u=0;u<a.length;u++)a[u](D,d,L,_)};return f={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(_){return d/(1e3/(_||60))},wake:function(){va&&(!er&&Hr()&&(he=er=window,$r=he.document||{},Vt.gsap=Rt,(he.gsapVersions||(he.gsapVersions=[])).push(Rt.version),Pa(as||he.GreenSockGlobals||!he.gsap&&he||{}),ja.forEach(qa)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=h||function(_){return setTimeout(_,o-f.time*1e3+1|0)},In=1,g(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),In=0,c=An},lagSmoothing:function(_,S){t=_||1/0,e=Math.min(S||33,t)},fps:function(_){s=1e3/(_||240),o=f.time*1e3+s},add:function(_,S,T){var A=S?function(C,D,L,b){_(C,D,L,b),f.remove(A)}:_;return f.remove(_),a[T?"unshift":"push"](A),$i(),A},remove:function(_,S){~(S=a.indexOf(_))&&a.splice(S,1)&&u>=S&&u--},_listeners:a},f}(),$i=function(){return!In&&Ut.wake()},W={},rc=/^[\d.\-M][\d.\-,\s]/,oc=/["']/g,ac=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),e[n]=isNaN(c)?c.replace(oc,"").trim():+c,n=l.substr(a+1).trim();return e},lc=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},uc=function(t){var e=(t+"").split("("),i=W[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[ac(e[1])]:lc(t).split(",").map(Ra)):W._CE&&rc.test(t)?W._CE("",t):i},Ja=function(t){return function(e){return 1-t(1-e)}},tl=function r(t,e){for(var i=t._first,n;i;)i instanceof vt?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},li=function(t,e){return t&&(lt(t)?t:W[t]||uc(t))||e},mi=function(t,e,i,n){i===void 0&&(i=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},o;return xt(t,function(a){W[a]=Vt[a]=s,W[o=a.toLowerCase()]=i;for(var l in s)W[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=W[a+"."+l]=s[l]}),s},el=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ns=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/Js*(Math.asin(1/n)||0),a=function(h){return h===1?1:n*Math.pow(2,-10*h)*ku((h-o)*s)+1},l=t==="out"?a:t==="in"?function(c){return 1-a(1-c)}:el(a);return s=Js/s,l.config=function(c,h){return r(t,c,h)},l},ks=function r(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:el(i);return n.config=function(s){return r(t,s)},n};xt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;mi(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});W.Linear.easeNone=W.none=W.Linear.easeIn;mi("Elastic",Ns("in"),Ns("out"),Ns());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(a){return a<e?r*a*a:a<i?r*Math.pow(a-1.5/t,2)+.75:a<n?r*(a-=2.25/t)*a+.9375:r*Math.pow(a-2.625/t,2)+.984375};mi("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);mi("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});mi("Circ",function(r){return-(Ca(1-r*r)-1)});mi("Sine",function(r){return r===1?1:-Nu(r*Fu)+1});mi("Back",ks("in"),ks("out"),ks());W.SteppedEase=W.steps=Vt.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,o=1-bt;return function(a){return((n*Fn(0,o,a)|0)+s)*i}}};Bi.ease=W["quad.out"];xt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return zr+=r+","+r+"Params,"});var il=function(t,e){this.id=Ru++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Ma,this.set=e?e.getSetter:Zr},wn=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Hi(this,+e.duration,1,1),this.data=e.data,rt&&(this._ctx=rt,rt.data.push(this)),In||Ut.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Hi(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if($i(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(As(this,i),!s._dp||s.parent||Ba(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&de(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===bt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Fa(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Oo(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Oo(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Gi(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?cs(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Fn(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),Ts(this),Yu(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):($i(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==bt&&(this._tTime-=bt)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&de(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Ot(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cs(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Gu);var n=At;return At=i,Xr(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),At=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,xo(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,xo(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(Zt(this,i),Ot(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Ot(n)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-bt)},t.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},t.then=function(i){var n=this;return new Promise(function(s){var o=lt(i)?i:Na,a=function(){var c=n.then;n.then=null,lt(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=c),s(o),n.then=c};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){sn(this)},r}();Yt(wn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var vt=function(r){Aa(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ot(i.sortChildren),ot&&de(i.parent||ot,Te(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Ua(Te(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,o){return dn(0,arguments,this),this},e.from=function(n,s,o){return dn(1,arguments,this),this},e.fromTo=function(n,s,o,a){return dn(2,arguments,this),this},e.set=function(n,s,o){return s.duration=0,s.parent=this,fn(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new pt(n,s,Zt(this,o),1),this},e.call=function(n,s,o){return de(this,pt.delayedCall(0,n,s),o)},e.staggerTo=function(n,s,o,a,l,c,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new pt(n,o,Zt(this,l)),this},e.staggerFrom=function(n,s,o,a,l,c,h){return o.runBackwards=1,fn(o).immediateRender=Ot(o.immediateRender),this.staggerTo(n,s,o,a,l,c,h)},e.staggerFromTo=function(n,s,o,a,l,c,h,f){return a.startAt=o,fn(a).immediateRender=Ot(a.immediateRender),this.staggerTo(n,s,a,l,c,h,f)},e.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=n<=0?0:gt(n),f=this._zTime<0!=n<0&&(this._initted||!c),d,u,g,p,_,S,T,A,C,D,L,b;if(this!==ot&&h>l&&n>=0&&(h=l),h!==this._tTime||o||f){if(a!==this._time&&c&&(h+=this._time-a,n+=this._time-a),d=h,C=this._start,A=this._ts,S=!A,f&&(c||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(L=this._yoyo,_=c+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(_*100+n,s,o);if(d=gt(h%_),h===l?(p=this._repeat,d=c):(D=gt(h/_),p=~~D,p&&p===D&&(d=c,p--),d>c&&(d=c)),D=Gi(this._tTime,_),!a&&this._tTime&&D!==p&&this._tTime-D*_-this._dur<=0&&(D=p),L&&p&1&&(d=c-d,b=1),p!==D&&!this._lock){var I=L&&D&1,y=I===(L&&p&1);if(p<D&&(I=!I),a=I?0:h%c?c:h,this._lock=1,this.render(a||(b?0:gt(p*_)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Ht(this,"onRepeat"),this.vars.repeatRefresh&&!b&&(this.invalidate()._lock=1),a&&a!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,y&&(this._lock=2,a=I?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!b&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;tl(this,b)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(T=ju(this,gt(a),gt(d)),T&&(h-=d-(d=T._start))),this._tTime=h,this._time=d,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&h&&!s&&!D&&(Ht(this,"onStart"),this._tTime!==h))return this;if(d>=a&&n>=0)for(u=this._first;u;){if(g=u._next,(u._act||d>=u._start)&&u._ts&&T!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(d-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(d-u._start)*u._ts,s,o),d!==this._time||!this._ts&&!S){T=0,g&&(h+=this._zTime=-1e-8);break}}u=g}else{u=this._last;for(var k=n<0?n:d;u;){if(g=u._prev,(u._act||k<=u._end)&&u._ts&&T!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(k-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(k-u._start)*u._ts,s,o||At&&Xr(u)),d!==this._time||!this._ts&&!S){T=0,g&&(h+=this._zTime=k?-1e-8:bt);break}}u=g}}if(T&&!s&&(this.pause(),T.render(d>=a?0:-1e-8)._zTime=d>=a?1:-1,this._ts))return this._start=C,Ts(this),this.render(n,s,o);this._onUpdate&&!s&&Ht(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(C===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((n||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&Ye(this,1),!s&&!(n<0&&!a)&&(h||a||!l)&&(Ht(this,h===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var o=this;if(be(s)||(s=Zt(this,s,n)),!(n instanceof wn)){if(Lt(n))return n.forEach(function(a){return o.add(a,s)}),this;if(Et(n))return this.addLabel(n,s);if(lt(n))n=pt.delayedCall(0,n);else return this}return this!==n?de(this,n,s):this},e.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof pt?s&&l.push(c):(o&&l.push(c),n&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},e.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},e.remove=function(n){return Et(n)?this.removeLabel(n):lt(n)?this.killTweensOf(n):(n.parent===this&&ys(this,n),n===this._recent&&(this._recent=this._last),ai(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=gt(Ut.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=Zt(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,o){var a=pt.delayedCall(0,s||An,o);return a.data="isPause",this._hasPause=1,de(this,a,Zt(this,n))},e.removePause=function(n){var s=this._first;for(n=Zt(this,n);s;)s._start===n&&s.data==="isPause"&&Ye(s),s=s._next},e.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)Ne!==a[l]&&a[l].kill(n,s);return this},e.getTweensOf=function(n,s){for(var o=[],a=Qt(n),l=this._first,c=be(s),h;l;)l instanceof pt?Hu(l._targets,a)&&(c?(!Ne||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},e.tweenTo=function(n,s){s=s||{};var o=this,a=Zt(o,n),l=s,c=l.startAt,h=l.onStart,f=l.onStartParams,d=l.immediateRender,u,g=pt.to(o,Yt({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||bt,onStart:function(){if(o.pause(),!u){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==_&&Hi(g,_,0,1).render(g._time,!0,!0),u=1}h&&h.apply(g,f||[])}},s));return d?g.render(0):g},e.tweenFromTo=function(n,s,o){return this.tweenTo(s,Yt({startAt:{time:Zt(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),Mo(this,Zt(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),Mo(this,Zt(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+bt)},e.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=n);return ai(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ai(this)},e.totalDuration=function(n){var s=0,o=this,a=o._last,l=ge,c,h,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(f=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,de(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;Hi(o,o===ot&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(ot._ts&&(Fa(ot,cs(n,ot)),xa=Ut.frame),Ut.frame>=vo){vo+=$t.autoSleep||120;var s=ot._first;if((!s||!s._ts)&&$t.autoSleep&&Ut._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ut.sleep()}}},t}(wn);Yt(vt.prototype,{_lock:0,_hasPause:0,_forcing:0});var cc=function(t,e,i,n,s,o,a){var l=new Mt(this._pt,t,e,0,1,ll,null,s),c=0,h=0,f,d,u,g,p,_,S,T;for(l.b=i,l.e=n,i+="",n+="",(S=~n.indexOf("random("))&&(n=Cn(n)),o&&(T=[i,n],o(T,t,e),i=T[0],n=T[1]),d=i.match(Ms)||[];f=Ms.exec(n);)g=f[0],p=n.substring(c,f.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),g!==d[h++]&&(_=parseFloat(d[h-1])||0,l._pt={_next:l._pt,p:p||h===1?p:",",s:_,c:g.charAt(1)==="="?Pi(_,g)-_:parseFloat(g)-_,m:u&&u<4?Math.round:0},c=Ms.lastIndex);return l.c=c<n.length?n.substring(c,n.length):"",l.fp=a,(ba.test(n)||S)&&(l.e=0),this._pt=l,l},jr=function(t,e,i,n,s,o,a,l,c,h){lt(n)&&(n=n(s||0,t,o));var f=t[e],d=i!=="get"?i:lt(f)?c?t[e.indexOf("set")||!lt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():f,u=lt(f)?c?gc:ol:Kr,g;if(Et(n)&&(~n.indexOf("random(")&&(n=Cn(n)),n.charAt(1)==="="&&(g=Pi(d,n)+(wt(d)||0),(g||g===0)&&(n=g))),!h||d!==n||lr)return!isNaN(d*n)&&n!==""?(g=new Mt(this._pt,t,e,+d||0,n-(d||0),typeof f=="boolean"?mc:al,0,u),c&&(g.fp=c),a&&g.modifier(a,this,t),this._pt=g):(!f&&!(e in t)&&Vr(e,n),cc.call(this,t,e,d,n,u,l||$t.stringFilter,c))},hc=function(t,e,i,n,s){if(lt(t)&&(t=pn(t,s,e,i,n)),!_e(t)||t.style&&t.nodeType||Lt(t)||Ia(t))return Et(t)?pn(t,s,e,i,n):t;var o={},a;for(a in t)o[a]=pn(t[a],s,e,i,n);return o},nl=function(t,e,i,n,s,o){var a,l,c,h;if(kt[t]&&(a=new kt[t]).init(s,a.rawVars?e[t]:hc(e[t],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new Mt(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==bi))for(c=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)c[a._props[h]]=l;return a},Ne,lr,qr=function r(t,e,i){var n=t.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,c=n.onUpdate,h=n.runBackwards,f=n.yoyoEase,d=n.keyframes,u=n.autoRevert,g=t._dur,p=t._startAt,_=t._targets,S=t.parent,T=S&&S.data==="nested"?S.vars.targets:_,A=t._overwrite==="auto"&&!Ur,C=t.timeline,D,L,b,I,y,k,M,G,x,K,q,B,H;if(C&&(!d||!s)&&(s="none"),t._ease=li(s,Bi.ease),t._yEase=f?Ja(li(f===!0?s:f,Bi.ease)):0,f&&t._yoyo&&!t._repeat&&(f=t._yEase,t._yEase=t._ease,t._ease=f),t._from=!C&&!!n.runBackwards,!C||d&&!n.stagger){if(G=_[0]?oi(_[0]).harness:0,B=G&&n[G.prop],D=us(n,Yr),p&&(p._zTime<0&&p.progress(1),e<0&&h&&a&&!u?p.render(-1,!0):p.revert(h&&g?jn:Uu),p._lazy=0),o){if(Ye(t._startAt=pt.set(_,Yt({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!p&&Ot(l),startAt:null,delay:0,onUpdate:c&&function(){return Ht(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At||!a&&!u)&&t._startAt.revert(jn),a&&g&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(h&&g&&!p){if(e&&(a=!1),b=Yt({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Ot(l),immediateRender:a,stagger:0,parent:S},D),B&&(b[G.prop]=B),Ye(t._startAt=pt.set(_,b)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At?t._startAt.revert(jn):t._startAt.render(-1,!0)),t._zTime=e,!a)r(t._startAt,bt,bt);else if(!e)return}for(t._pt=t._ptCache=0,l=g&&Ot(l)||l&&!g,L=0;L<_.length;L++){if(y=_[L],M=y._gsap||Wr(_)[L]._gsap,t._ptLookup[L]=K={},ir[M.id]&&He.length&&ls(),q=T===_?L:T.indexOf(y),G&&(x=new G).init(y,B||D,t,q,T)!==!1&&(t._pt=I=new Mt(t._pt,y,x.name,0,1,x.render,x,0,x.priority),x._props.forEach(function(st){K[st]=I}),x.priority&&(k=1)),!G||B)for(b in D)kt[b]&&(x=nl(b,D,t,q,y,T))?x.priority&&(k=1):K[b]=I=jr.call(t,y,b,"get",D[b],q,T,0,n.stringFilter);t._op&&t._op[L]&&t.kill(y,t._op[L]),A&&t._pt&&(Ne=t,ot.killTweensOf(y,K,t.globalTime(e)),H=!t.parent,Ne=0),t._pt&&l&&(ir[M.id]=1)}k&&ul(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!H,d&&e<=0&&C.render(ge,!0,!0)},fc=function(t,e,i,n,s,o,a,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,f,d,u;if(!c)for(c=t._ptCache[e]=[],d=t._ptLookup,u=t._targets.length;u--;){if(h=d[u][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return lr=1,t.vars[e]="+=0",qr(t,a),lr=0,l?Tn(e+" not eligible for reset"):1;c.push(h)}for(u=c.length;u--;)f=c[u],h=f._pt||f,h.s=(n||n===0)&&!s?n:h.s+(n||0)+o*h.c,h.c=i-h.s,f.e&&(f.e=ht(i)+wt(f.e)),f.b&&(f.b=h.s+wt(f.b))},dc=function(t,e){var i=t[0]?oi(t[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return e;s=Ui({},e);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},pc=function(t,e,i,n){var s=e.ease||n||"power1.inOut",o,a;if(Lt(e))a=i[t]||(i[t]=[]),e.forEach(function(l,c){return a.push({t:c/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},pn=function(t,e,i,n,s){return lt(t)?t.call(e,i,n,s):Et(t)&&~t.indexOf("random(")?Cn(t):t},sl=zr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",rl={};xt(sl+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return rl[r]=1});var pt=function(r){Aa(t,r);function t(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:fn(n))||this;var l=a.vars,c=l.duration,h=l.delay,f=l.immediateRender,d=l.stagger,u=l.overwrite,g=l.keyframes,p=l.defaults,_=l.scrollTrigger,S=l.yoyoEase,T=n.parent||ot,A=(Lt(i)||Ia(i)?be(i[0]):"length"in n)?[i]:Qt(i),C,D,L,b,I,y,k,M;if(a._targets=A.length?Wr(A):Tn("GSAP target "+i+" not found. https://gsap.com",!$t.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=u,g||d||$n(c)||$n(h)){if(n=a.vars,C=a.timeline=new vt({data:"nested",defaults:p||{},targets:T&&T.data==="nested"?T.vars.targets:A}),C.kill(),C.parent=C._dp=Te(a),C._start=0,d||$n(c)||$n(h)){if(b=A.length,k=d&&Va(d),_e(d))for(I in d)~sl.indexOf(I)&&(M||(M={}),M[I]=d[I]);for(D=0;D<b;D++)L=us(n,rl),L.stagger=0,S&&(L.yoyoEase=S),M&&Ui(L,M),y=A[D],L.duration=+pn(c,Te(a),D,y,A),L.delay=(+pn(h,Te(a),D,y,A)||0)-a._delay,!d&&b===1&&L.delay&&(a._delay=h=L.delay,a._start+=h,L.delay=0),C.to(y,L,k?k(D,y,A):0),C._ease=W.none;C.duration()?c=h=0:a.timeline=0}else if(g){fn(Yt(C.vars.defaults,{ease:"none"})),C._ease=li(g.ease||n.ease||"none");var G=0,x,K,q;if(Lt(g))g.forEach(function(B){return C.to(A,B,">")}),C.duration();else{L={};for(I in g)I==="ease"||I==="easeEach"||pc(I,g[I],L,g.easeEach);for(I in L)for(x=L[I].sort(function(B,H){return B.t-H.t}),G=0,D=0;D<x.length;D++)K=x[D],q={ease:K.e,duration:(K.t-(D?x[D-1].t:0))/100*c},q[I]=K.v,C.to(A,q,G),G+=q.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||a.duration(c=C.duration())}else a.timeline=0;return u===!0&&!Ur&&(Ne=Te(a),ot.killTweensOf(A),Ne=0),de(T,Te(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(f||!c&&!g&&a._start===gt(T._time)&&Ot(f)&&zu(Te(a))&&T.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-h)||0)),_&&Ua(Te(a),_),a}var e=t.prototype;return e.render=function(n,s,o){var a=this._time,l=this._tDur,c=this._dur,h=n<0,f=n>l-bt&&!h?l:n<bt?0:n,d,u,g,p,_,S,T,A,C;if(!c)Xu(this,n,s,o);else if(f!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(d=f,A=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+n,s,o);if(d=gt(f%p),f===l?(g=this._repeat,d=c):(_=gt(f/p),g=~~_,g&&g===_?(d=c,g--):d>c&&(d=c)),S=this._yoyo&&g&1,S&&(C=this._yEase,d=c-d),_=Gi(this._tTime,p),d===a&&!o&&this._initted&&g===_)return this._tTime=f,this;g!==_&&(A&&this._yEase&&tl(A,S),this.vars.repeatRefresh&&!S&&!this._lock&&d!==p&&this._initted&&(this._lock=o=1,this.render(gt(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(Ga(this,h?n:d,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==_))return this;if(c!==this._dur)return this.render(n,s,o)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=T=(C||this._ease)(d/c),this._from&&(this.ratio=T=1-T),!a&&f&&!s&&!_&&(Ht(this,"onStart"),this._tTime!==f))return this;for(u=this._pt;u;)u.r(T,u.d),u=u._next;A&&A.render(n<0?n:A._dur*A._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(h&&nr(this,n,s,o),Ht(this,"onUpdate")),this._repeat&&g!==_&&this.vars.onRepeat&&!s&&this.parent&&Ht(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(h&&!this._onUpdate&&nr(this,n,!0,!0),(n||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&Ye(this,1),!s&&!(h&&!a)&&(f||a||S)&&(Ht(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,o,a,l){In||Ut.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||qr(this,c),h=this._ease(c/this._dur),fc(this,n,s,o,a,h,c,l)?this.resetTo(n,s,o,a,1):(As(this,0),this.parent||ka(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?sn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!At),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Ne&&Ne.vars.overwrite!==!0)._first||sn(this),this.parent&&o!==this.timeline.totalDuration()&&Hi(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?Qt(n):a,c=this._ptLookup,h=this._pt,f,d,u,g,p,_,S;if((!s||s==="all")&&Vu(a,l))return s==="all"&&(this._pt=0),sn(this);for(f=this._op=this._op||[],s!=="all"&&(Et(s)&&(p={},xt(s,function(T){return p[T]=1}),s=p),s=dc(a,s)),S=a.length;S--;)if(~l.indexOf(a[S])){d=c[S],s==="all"?(f[S]=s,g=d,u={}):(u=f[S]=f[S]||{},g=s);for(p in g)_=d&&d[p],_&&((!("kill"in _.d)||_.d.kill(p)===!0)&&ys(this,_,"_pt"),delete d[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&h&&sn(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return dn(1,arguments)},t.delayedCall=function(n,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,s,o){return dn(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,o){return ot.killTweensOf(n,s,o)},t}(wn);Yt(pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});xt("staggerTo,staggerFrom,staggerFromTo",function(r){pt[r]=function(){var t=new vt,e=rr.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var Kr=function(t,e,i){return t[e]=i},ol=function(t,e,i){return t[e](i)},gc=function(t,e,i,n){return t[e](n.fp,i)},_c=function(t,e,i){return t.setAttribute(e,i)},Zr=function(t,e){return lt(t[e])?ol:Gr(t[e])&&t.setAttribute?_c:Kr},al=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},mc=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ll=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},Qr=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Dc=function(t,e,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(t,e,i),s=o},Ec=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?ys(this,e,"_pt"):e.dep||(i=1),e=n;return!i},Sc=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},ul=function(t){for(var e=t._pt,i,n,s,o;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:o=e,e=i}t._pt=s},Mt=function(){function r(e,i,n,s,o,a,l,c,h){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||al,this.d=l||this,this.set=c||Kr,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=Sc,this.m=i,this.mt=s,this.tween=n},r}();xt(zr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Yr[r]=1});Vt.TweenMax=Vt.TweenLite=pt;Vt.TimelineLite=Vt.TimelineMax=vt;ot=new vt({sortChildren:!1,defaults:Bi,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});$t.stringFilter=Qa;var ui=[],Kn={},yc=[],Ro=0,Tc=0,Bs=function(t){return(Kn[t]||yc).map(function(e){return e()})},ur=function(){var t=Date.now(),e=[];t-Ro>2&&(Bs("matchMediaInit"),ui.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,c;for(a in n)o=he.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&e.push(i))}),Bs("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Ro=t,Bs("matchMedia"))},cl=function(){function r(e,i){this.selector=i&&or(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Tc++,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){lt(i)&&(s=n,n=i,i=lt);var o=this,a=function(){var c=rt,h=o.selector,f;return c&&c!==o&&c.data.push(o),s&&(o.selector=or(s)),rt=o,f=n.apply(o,arguments),lt(f)&&o._r.push(f),rt=c,o.selector=h,o.isReverted=!1,f};return o.last=a,i===lt?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var n=rt;rt=null,i(this),rt=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof pt&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,f){return f.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof vt?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof pt)&&c.revert&&c.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=ui.length;o--;)ui[o].id===this.id&&ui.splice(o,1)},t.revert=function(i){this.kill(i||{})},r}(),Ac=function(){function r(e){this.contexts=[],this.scope=e,rt&&rt.data.push(this)}var t=r.prototype;return t.add=function(i,n,s){_e(i)||(i={matches:i});var o=new cl(0,s||this.scope),a=o.conditions={},l,c,h;rt&&!o.selector&&(o.selector=rt.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(c in i)c==="all"?h=1:(l=he.matchMedia(i[c]),l&&(ui.indexOf(o)<0&&ui.push(o),(a[c]=l.matches)&&(h=1),l.addListener?l.addListener(ur):l.addEventListener("change",ur)));return h&&n(o,function(f){return o.add(null,f)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),hs={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return qa(n)})},timeline:function(t){return new vt(t)},getTweensOf:function(t,e){return ot.getTweensOf(t,e)},getProperty:function(t,e,i,n){Et(t)&&(t=Qt(t)[0]);var s=oi(t||{}).get,o=i?Na:Ra;return i==="native"&&(i=""),t&&(e?o((kt[e]&&kt[e].get||s)(t,e,i,n)):function(a,l,c){return o((kt[a]&&kt[a].get||s)(t,a,l,c))})},quickSetter:function(t,e,i){if(t=Qt(t),t.length>1){var n=t.map(function(h){return Rt.quickSetter(h,e,i)}),s=n.length;return function(h){for(var f=s;f--;)n[f](h)}}t=t[0]||{};var o=kt[e],a=oi(t),l=a.harness&&(a.harness.aliases||{})[e]||e,c=o?function(h){var f=new o;bi._pt=0,f.init(t,i?h+i:h,bi,0,[t]),f.render(1,f),bi._pt&&Qr(1,bi)}:a.set(t,l);return o?c:function(h){return c(t,l,i?h+i:h,a,1)}},quickTo:function(t,e,i){var n,s=Rt.to(t,Yt((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,c,h){return s.resetTo(e,l,c,h)};return o.tween=s,o},isTweening:function(t){return ot.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=li(t.ease,Bi.ease)),Po(Bi,t||{})},config:function(t){return Po($t,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!kt[a]&&!Vt[a]&&Tn(e+" effect requires "+a+" plugin.")}),Fs[e]=function(a,l,c){return i(Qt(a),Yt(l||{},s),c)},o&&(vt.prototype[e]=function(a,l,c){return this.add(Fs[e](a,_e(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){W[t]=li(e)},parseEase:function(t,e){return arguments.length?li(t,e):W},getById:function(t){return ot.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new vt(t),n,s;for(i.smoothChildTiming=Ot(t.smoothChildTiming),ot.remove(i),i._dp=0,i._time=i._tTime=ot._time,n=ot._first;n;)s=n._next,(e||!(!n._dur&&n instanceof pt&&n.vars.onComplete===n._targets[0]))&&de(i,n,n._start-n._delay),n=s;return de(ot,i,0),i},context:function(t,e){return t?new cl(t,e):rt},matchMedia:function(t){return new Ac(t)},matchMediaRefresh:function(){return ui.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||ur()},addEventListener:function(t,e){var i=Kn[t]||(Kn[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Kn[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:ec,wrapYoyo:ic,distribute:Va,random:za,snap:Ya,normalize:tc,getUnit:wt,clamp:Ku,splitColor:Ka,toArray:Qt,selector:or,mapRange:Xa,pipe:Qu,unitize:Ju,interpolate:nc,shuffle:$a},install:Pa,effects:Fs,ticker:Ut,updateRoot:vt.updateRoot,plugins:kt,globalTimeline:ot,core:{PropTween:Mt,globals:Oa,Tween:pt,Timeline:vt,Animation:wn,getCache:oi,_removeLinkedListItem:ys,reverting:function(){return At},context:function(t){return t&&rt&&(rt.data.push(t),t._ctx=rt),rt},suppressOverwrites:function(t){return Ur=t}}};xt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return hs[r]=pt[r]});Ut.add(vt.updateRoot);bi=hs.to({},{duration:0});var Cc=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Ic=function(t,e){var i=t._targets,n,s,o;for(n in e)for(s=i.length;s--;)o=t._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=Cc(o,n)),o&&o.modifier&&o.modifier(e[n],t,i[s],n))},Us=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,c;if(Et(s)&&(l={},xt(s,function(h){return l[h]=1}),s=l),e){l={};for(c in s)l[c]=e(s[c]);s=l}Ic(a,s)}}}},Rt=hs.registerPlugin({name:"attr",init:function(t,e,i,n,s){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)At?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Us("roundProps",ar),Us("modifiers"),Us("snap",Ya))||hs;pt.version=vt.version=Rt.version="3.13.0";va=1;Hr()&&$i();W.Power0;W.Power1;W.Power2;W.Power3;W.Power4;W.Linear;W.Quad;W.Cubic;W.Quart;W.Quint;W.Strong;W.Elastic;W.Back;W.SteppedEase;W.Bounce;W.Sine;W.Expo;W.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var No,ke,Oi,Jr,si,ko,to,wc=function(){return typeof window<"u"},Le={},ti=180/Math.PI,xi=Math.PI/180,Di=Math.atan2,Bo=1e8,eo=/([A-Z])/g,bc=/(left|right|width|margin|padding|x)/i,Lc=/[\s,\(]\S/,pe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},cr=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},vc=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Pc=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Oc=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},hl=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},fl=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},xc=function(t,e,i){return t.style[e]=i},Mc=function(t,e,i){return t.style.setProperty(e,i)},Fc=function(t,e,i){return t._gsap[e]=i},Rc=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Nc=function(t,e,i,n,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},kc=function(t,e,i,n,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},at="transform",Ft=at+"Origin",Bc=function r(t,e){var i=this,n=this.target,s=n.style,o=n._gsap;if(t in Le&&s){if(this.tfm=this.tfm||{},t!=="transform")t=pe[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=Ae(n,a)}):this.tfm[t]=o.x?o[t]:Ae(n,t),t===Ft&&(this.tfm.zOrigin=o.zOrigin);else return pe.transform.split(",").forEach(function(a){return r.call(i,a,e)});if(this.props.indexOf(at)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Ft,e,"")),t=at}(s||e)&&this.props.push(t,e,s[t])},dl=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Uc=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(eo,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=to(),(!s||!s.isStart)&&!i[at]&&(dl(i),n.zOrigin&&i[Ft]&&(i[Ft]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},pl=function(t,e){var i={target:t,props:[],revert:Uc,save:Bc};return t._gsap||Rt.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},gl,hr=function(t,e){var i=ke.createElementNS?ke.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ke.createElement(t);return i&&i.style?i:ke.createElement(t)},Jt=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(eo,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,Vi(e)||e,1)||""},Uo="O,Moz,ms,Ms,Webkit".split(","),Vi=function(t,e,i){var n=e||si,s=n.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Uo[o]+t in s););return o<0?null:(o===3?"ms":o>=0?Uo[o]:"")+t},fr=function(){wc()&&window.document&&(No=window,ke=No.document,Oi=ke.documentElement,si=hr("div")||{style:{}},hr("div"),at=Vi(at),Ft=at+"Origin",si.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",gl=!!Vi("perspective"),to=Rt.core.reverting,Jr=1)},Go=function(t){var e=t.ownerSVGElement,i=hr("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),Oi.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),Oi.removeChild(i),s},Ho=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},_l=function(t){var e,i;try{e=t.getBBox()}catch{e=Go(t),i=1}return e&&(e.width||e.height)||i||(e=Go(t)),e&&!e.width&&!e.x&&!e.y?{x:+Ho(t,["x","cx","x1"])||0,y:+Ho(t,["y","cy","y1"])||0,width:0,height:0}:e},ml=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&_l(t))},fi=function(t,e){if(e){var i=t.style,n;e in Le&&e!==Ft&&(e=at),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(eo,"-$1").toLowerCase())):i.removeAttribute(e)}},Be=function(t,e,i,n,s,o){var a=new Mt(t._pt,e,i,0,1,o?fl:hl);return t._pt=a,a.b=n,a.e=s,t._props.push(i),a},$o={deg:1,rad:1,turn:1},Gc={grid:1,flex:1},ze=function r(t,e,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=si.style,l=bc.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),f=100,d=n==="px",u=n==="%",g,p,_,S;if(n===o||!s||$o[n]||$o[o])return s;if(o!=="px"&&!d&&(s=r(t,e,i,"px")),S=t.getCTM&&ml(t),(u||o==="%")&&(Le[e]||~e.indexOf("adius")))return g=S?t.getBBox()[l?"width":"height"]:t[h],ht(u?s/g*f:s/100*g);if(a[l?"width":"height"]=f+(d?o:n),p=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!c?t:t.parentNode,S&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===ke||!p.appendChild)&&(p=ke.body),_=p._gsap,_&&u&&_.width&&l&&_.time===Ut.time&&!_.uncache)return ht(s/_.width*f);if(u&&(e==="height"||e==="width")){var T=t.style[e];t.style[e]=f+n,g=t[h],T?t.style[e]=T:fi(t,e)}else(u||o==="%")&&!Gc[Jt(p,"display")]&&(a.position=Jt(t,"position")),p===t&&(a.position="static"),p.appendChild(si),g=si[h],p.removeChild(si),a.position="absolute";return l&&u&&(_=oi(p),_.time=Ut.time,_.width=p[h]),ht(d?g*s/f:g&&s?f/g*s:0)},Ae=function(t,e,i,n){var s;return Jr||fr(),e in pe&&e!=="transform"&&(e=pe[e],~e.indexOf(",")&&(e=e.split(",")[0])),Le[e]&&e!=="transform"?(s=Ln(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:ds(Jt(t,Ft))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=fs[e]&&fs[e](t,e,i)||Jt(t,e)||Ma(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?ze(t,e,s,i)+i:s},Hc=function(t,e,i,n){if(!i||i==="none"){var s=Vi(e,t,1),o=s&&Jt(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=Jt(t,"borderTopColor"))}var a=new Mt(this._pt,t.style,e,0,1,ll),l=0,c=0,h,f,d,u,g,p,_,S,T,A,C,D;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Jt(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=t.style[e],t.style[e]=n,n=Jt(t,e)||n,p?t.style[e]=p:fi(t,e)),h=[i,n],Qa(h),i=h[0],n=h[1],d=i.match(wi)||[],D=n.match(wi)||[],D.length){for(;f=wi.exec(n);)_=f[0],T=n.substring(l,f.index),g?g=(g+1)%5:(T.substr(-5)==="rgba("||T.substr(-5)==="hsla(")&&(g=1),_!==(p=d[c++]||"")&&(u=parseFloat(p)||0,C=p.substr((u+"").length),_.charAt(1)==="="&&(_=Pi(u,_)+C),S=parseFloat(_),A=_.substr((S+"").length),l=wi.lastIndex-A.length,A||(A=A||$t.units[e]||C,l===n.length&&(n+=A,a.e+=A)),C!==A&&(u=ze(t,e,p,A)||0),a._pt={_next:a._pt,p:T||c===1?T:",",s:u,c:S-u,m:g&&g<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?fl:hl;return ba.test(n)&&(a.e=0),this._pt=a,a},Vo={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},$c=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=Vo[i]||i,e[1]=Vo[n]||n,e.join(" ")},Vc=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Le[a]&&(l=1,a=a==="transformOrigin"?Ft:at),fi(i,a);l&&(fi(i,at),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",Ln(i,1),o.uncache=1,dl(n)))}},fs={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var o=t._pt=new Mt(t._pt,e,i,0,0,Vc);return o.u=n,o.pr=-10,o.tween=s,t._props.push(i),1}}},bn=[1,0,0,1,0,0],Dl={},El=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Yo=function(t){var e=Jt(t,at);return El(e)?bn:e.substr(7).match(wa).map(ht)},io=function(t,e){var i=t._gsap||oi(t),n=t.style,s=Yo(t),o,a,l,c;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?bn:s):(s===bn&&!t.offsetParent&&t!==Oi&&!i.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(c=1,a=t.nextElementSibling,Oi.appendChild(t)),s=Yo(t),l?n.display=l:fi(t,"display"),c&&(a?o.insertBefore(t,a):o?o.appendChild(t):Oi.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},dr=function(t,e,i,n,s,o){var a=t._gsap,l=s||io(t,!0),c=a.xOrigin||0,h=a.yOrigin||0,f=a.xOffset||0,d=a.yOffset||0,u=l[0],g=l[1],p=l[2],_=l[3],S=l[4],T=l[5],A=e.split(" "),C=parseFloat(A[0])||0,D=parseFloat(A[1])||0,L,b,I,y;i?l!==bn&&(b=u*_-g*p)&&(I=C*(_/b)+D*(-p/b)+(p*T-_*S)/b,y=C*(-g/b)+D*(u/b)-(u*T-g*S)/b,C=I,D=y):(L=_l(t),C=L.x+(~A[0].indexOf("%")?C/100*L.width:C),D=L.y+(~(A[1]||A[0]).indexOf("%")?D/100*L.height:D)),n||n!==!1&&a.smooth?(S=C-c,T=D-h,a.xOffset=f+(S*u+T*p)-S,a.yOffset=d+(S*g+T*_)-T):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=D,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!i,t.style[Ft]="0px 0px",o&&(Be(o,a,"xOrigin",c,C),Be(o,a,"yOrigin",h,D),Be(o,a,"xOffset",f,a.xOffset),Be(o,a,"yOffset",d,a.yOffset)),t.setAttribute("data-svg-origin",C+" "+D)},Ln=function(t,e){var i=t._gsap||new il(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),c=Jt(t,Ft)||"0",h,f,d,u,g,p,_,S,T,A,C,D,L,b,I,y,k,M,G,x,K,q,B,H,st,te,ue,Y,X,Q,Z,zt;return h=f=d=p=_=S=T=A=C=0,u=g=1,i.svg=!!(t.getCTM&&ml(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[at]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[at]!=="none"?l[at]:"")),n.scale=n.rotate=n.translate="none"),b=io(t,i.svg),i.svg&&(i.uncache?(st=t.getBBox(),c=i.xOrigin-st.x+"px "+(i.yOrigin-st.y)+"px",H=""):H=!e&&t.getAttribute("data-svg-origin"),dr(t,H||c,!!H||i.originIsAbsolute,i.smooth!==!1,b)),D=i.xOrigin||0,L=i.yOrigin||0,b!==bn&&(M=b[0],G=b[1],x=b[2],K=b[3],h=q=b[4],f=B=b[5],b.length===6?(u=Math.sqrt(M*M+G*G),g=Math.sqrt(K*K+x*x),p=M||G?Di(G,M)*ti:0,T=x||K?Di(x,K)*ti+p:0,T&&(g*=Math.abs(Math.cos(T*xi))),i.svg&&(h-=D-(D*M+L*x),f-=L-(D*G+L*K))):(zt=b[6],Q=b[7],ue=b[8],Y=b[9],X=b[10],Z=b[11],h=b[12],f=b[13],d=b[14],I=Di(zt,X),_=I*ti,I&&(y=Math.cos(-I),k=Math.sin(-I),H=q*y+ue*k,st=B*y+Y*k,te=zt*y+X*k,ue=q*-k+ue*y,Y=B*-k+Y*y,X=zt*-k+X*y,Z=Q*-k+Z*y,q=H,B=st,zt=te),I=Di(-x,X),S=I*ti,I&&(y=Math.cos(-I),k=Math.sin(-I),H=M*y-ue*k,st=G*y-Y*k,te=x*y-X*k,Z=K*k+Z*y,M=H,G=st,x=te),I=Di(G,M),p=I*ti,I&&(y=Math.cos(I),k=Math.sin(I),H=M*y+G*k,st=q*y+B*k,G=G*y-M*k,B=B*y-q*k,M=H,q=st),_&&Math.abs(_)+Math.abs(p)>359.9&&(_=p=0,S=180-S),u=ht(Math.sqrt(M*M+G*G+x*x)),g=ht(Math.sqrt(B*B+zt*zt)),I=Di(q,B),T=Math.abs(I)>2e-4?I*ti:0,C=Z?1/(Z<0?-Z:Z):0),i.svg&&(H=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!El(Jt(t,at)),H&&t.setAttribute("transform",H))),Math.abs(T)>90&&Math.abs(T)<270&&(s?(u*=-1,T+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,T+=T<=0?180:-180)),e=e||i.uncache,i.x=h-((i.xPercent=h&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=f-((i.yPercent=f&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=ht(u),i.scaleY=ht(g),i.rotation=ht(p)+a,i.rotationX=ht(_)+a,i.rotationY=ht(S)+a,i.skewX=T+a,i.skewY=A+a,i.transformPerspective=C+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!e&&i.zOrigin||0)&&(n[Ft]=ds(c)),i.xOffset=i.yOffset=0,i.force3D=$t.force3D,i.renderTransform=i.svg?zc:gl?Sl:Yc,i.uncache=0,i},ds=function(t){return(t=t.split(" "))[0]+" "+t[1]},Gs=function(t,e,i){var n=wt(e);return ht(parseFloat(e)+parseFloat(ze(t,"x",i+"px",n)))+n},Yc=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Sl(t,e)},Ze="0deg",Ji="0px",Qe=") ",Sl=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,h=i.rotationY,f=i.rotationX,d=i.skewX,u=i.skewY,g=i.scaleX,p=i.scaleY,_=i.transformPerspective,S=i.force3D,T=i.target,A=i.zOrigin,C="",D=S==="auto"&&t&&t!==1||S===!0;if(A&&(f!==Ze||h!==Ze)){var L=parseFloat(h)*xi,b=Math.sin(L),I=Math.cos(L),y;L=parseFloat(f)*xi,y=Math.cos(L),o=Gs(T,o,b*y*-A),a=Gs(T,a,-Math.sin(L)*-A),l=Gs(T,l,I*y*-A+A)}_!==Ji&&(C+="perspective("+_+Qe),(n||s)&&(C+="translate("+n+"%, "+s+"%) "),(D||o!==Ji||a!==Ji||l!==Ji)&&(C+=l!==Ji||D?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Qe),c!==Ze&&(C+="rotate("+c+Qe),h!==Ze&&(C+="rotateY("+h+Qe),f!==Ze&&(C+="rotateX("+f+Qe),(d!==Ze||u!==Ze)&&(C+="skew("+d+", "+u+Qe),(g!==1||p!==1)&&(C+="scale("+g+", "+p+Qe),T.style[at]=C||"translate(0, 0)"},zc=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,h=i.skewY,f=i.scaleX,d=i.scaleY,u=i.target,g=i.xOrigin,p=i.yOrigin,_=i.xOffset,S=i.yOffset,T=i.forceCSS,A=parseFloat(o),C=parseFloat(a),D,L,b,I,y;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=xi,c*=xi,D=Math.cos(l)*f,L=Math.sin(l)*f,b=Math.sin(l-c)*-d,I=Math.cos(l-c)*d,c&&(h*=xi,y=Math.tan(c-h),y=Math.sqrt(1+y*y),b*=y,I*=y,h&&(y=Math.tan(h),y=Math.sqrt(1+y*y),D*=y,L*=y)),D=ht(D),L=ht(L),b=ht(b),I=ht(I)):(D=f,I=d,L=b=0),(A&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(A=ze(u,"x",o,"px"),C=ze(u,"y",a,"px")),(g||p||_||S)&&(A=ht(A+g-(g*D+p*b)+_),C=ht(C+p-(g*L+p*I)+S)),(n||s)&&(y=u.getBBox(),A=ht(A+n/100*y.width),C=ht(C+s/100*y.height)),y="matrix("+D+","+L+","+b+","+I+","+A+","+C+")",u.setAttribute("transform",y),T&&(u.style[at]=y)},Wc=function(t,e,i,n,s){var o=360,a=Et(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?ti:1),c=l-n,h=n+c+"deg",f,d;return a&&(f=s.split("_")[1],f==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),f==="cw"&&c<0?c=(c+o*Bo)%o-~~(c/o)*o:f==="ccw"&&c>0&&(c=(c-o*Bo)%o-~~(c/o)*o)),t._pt=d=new Mt(t._pt,e,i,n,c,vc),d.e=h,d.u="deg",t._props.push(i),d},zo=function(t,e){for(var i in e)t[i]=e[i];return t},Xc=function(t,e,i){var n=zo({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,h,f,d,u,g;n.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[at]=e,a=Ln(i,1),fi(i,at),i.setAttribute("transform",c)):(c=getComputedStyle(i)[at],o[at]=e,a=Ln(i,1),o[at]=c);for(l in Le)c=n[l],h=a[l],c!==h&&s.indexOf(l)<0&&(u=wt(c),g=wt(h),f=u!==g?ze(i,l,c,g):parseFloat(c),d=parseFloat(h),t._pt=new Mt(t._pt,a,l,f,d-f,cr),t._pt.u=g||0,t._props.push(l));zo(a,n)};xt("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",o=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(a){return t<2?r+a:"border"+a+r});fs[t>1?"border"+r:r]=function(a,l,c,h,f){var d,u;if(arguments.length<4)return d=o.map(function(g){return Ae(a,g,c)}),u=d.join(" "),u.split(d[0]).length===5?d[0]:u;d=(h+"").split(" "),u={},o.forEach(function(g,p){return u[g]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(l,u,f)}});var yl={name:"css",register:fr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var o=this._props,a=t.style,l=i.vars.startAt,c,h,f,d,u,g,p,_,S,T,A,C,D,L,b,I;Jr||fr(),this.styles=this.styles||pl(t),I=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(h=e[p],!(kt[p]&&nl(p,e,i,n,t,s)))){if(u=typeof h,g=fs[p],u==="function"&&(h=h.call(i,n,t,s),u=typeof h),u==="string"&&~h.indexOf("random(")&&(h=Cn(h)),g)g(this,t,p,h,i)&&(b=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",$e.lastIndex=0,$e.test(c)||(_=wt(c),S=wt(h)),S?_!==S&&(c=ze(t,p,c,S)+S):_&&(h+=_),this.add(a,"setProperty",c,h,n,s,0,0,p),o.push(p),I.push(p,0,a[p]);else if(u!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,n,t,s):l[p],Et(c)&&~c.indexOf("random(")&&(c=Cn(c)),wt(c+"")||c==="auto"||(c+=$t.units[p]||wt(Ae(t,p))||""),(c+"").charAt(1)==="="&&(c=Ae(t,p))):c=Ae(t,p),d=parseFloat(c),T=u==="string"&&h.charAt(1)==="="&&h.substr(0,2),T&&(h=h.substr(2)),f=parseFloat(h),p in pe&&(p==="autoAlpha"&&(d===1&&Ae(t,"visibility")==="hidden"&&f&&(d=0),I.push("visibility",0,a.visibility),Be(this,a,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),p!=="scale"&&p!=="transform"&&(p=pe[p],~p.indexOf(",")&&(p=p.split(",")[0]))),A=p in Le,A){if(this.styles.save(p),u==="string"&&h.substring(0,6)==="var(--"&&(h=Jt(t,h.substring(4,h.indexOf(")"))),f=parseFloat(h)),C||(D=t._gsap,D.renderTransform&&!e.parseTransform||Ln(t,e.parseTransform),L=e.smoothOrigin!==!1&&D.smooth,C=this._pt=new Mt(this._pt,a,at,0,1,D.renderTransform,D,0,-1),C.dep=1),p==="scale")this._pt=new Mt(this._pt,D,"scaleY",D.scaleY,(T?Pi(D.scaleY,T+f):f)-D.scaleY||0,cr),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){I.push(Ft,0,a[Ft]),h=$c(h),D.svg?dr(t,h,0,L,0,this):(S=parseFloat(h.split(" ")[2])||0,S!==D.zOrigin&&Be(this,D,"zOrigin",D.zOrigin,S),Be(this,a,p,ds(c),ds(h)));continue}else if(p==="svgOrigin"){dr(t,h,1,L,0,this);continue}else if(p in Dl){Wc(this,D,p,d,T?Pi(d,T+h):h);continue}else if(p==="smoothOrigin"){Be(this,D,"smooth",D.smooth,h);continue}else if(p==="force3D"){D[p]=h;continue}else if(p==="transform"){Xc(this,h,t);continue}}else p in a||(p=Vi(p)||p);if(A||(f||f===0)&&(d||d===0)&&!Lc.test(h)&&p in a)_=(c+"").substr((d+"").length),f||(f=0),S=wt(h)||(p in $t.units?$t.units[p]:_),_!==S&&(d=ze(t,p,c,S)),this._pt=new Mt(this._pt,A?D:a,p,d,(T?Pi(d,T+f):f)-d,!A&&(S==="px"||p==="zIndex")&&e.autoRound!==!1?Oc:cr),this._pt.u=S||0,_!==S&&S!=="%"&&(this._pt.b=c,this._pt.r=Pc);else if(p in a)Hc.call(this,t,p,c,T?T+h:h);else if(p in t)this.add(t,p,c||t[p],T?T+h:h,n,s);else if(p!=="parseTransform"){Vr(p,h);continue}A||(p in a?I.push(p,0,a[p]):typeof t[p]=="function"?I.push(p,2,t[p]()):I.push(p,1,c||t[p])),o.push(p)}}b&&ul(this)},render:function(t,e){if(e.tween._time||!to())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ae,aliases:pe,getSetter:function(t,e,i){var n=pe[e];return n&&n.indexOf(",")<0&&(e=n),e in Le&&e!==Ft&&(t._gsap.x||Ae(t,"x"))?i&&ko===i?e==="scale"?Rc:Fc:(ko=i||{})&&(e==="scale"?Nc:kc):t.style&&!Gr(t.style[e])?xc:~e.indexOf("-")?Mc:Zr(t,e)},core:{_removeProperty:fi,_getMatrix:io}};Rt.utils.checkPrefix=Vi;Rt.core.getStyleSaver=pl;(function(r,t,e,i){var n=xt(r+","+t+","+e,function(s){Le[s]=1});xt(t,function(s){$t.units[s]="deg",Dl[s]=1}),pe[n[13]]=r+","+t,xt(i,function(s){var o=s.split(":");pe[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");xt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){$t.units[r]="px"});Rt.registerPlugin(yl);var Mi=Rt.registerPlugin(yl)||Rt;Mi.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ie,ci,no,Cs,on,Zn,ps,gn,oe="transform",pr=oe+"Origin",Tl,Al=function(t){var e=t.ownerDocument||t;for(!(oe in t.style)&&("msTransform"in t.style)&&(oe="msTransform",pr=oe+"Origin");e.parentNode&&(e=e.parentNode););if(ci=window,ps=new di,e){Ie=e,no=e.documentElement,Cs=e.body,gn=Ie.createElementNS("http://www.w3.org/2000/svg","g"),gn.style.transform="none";var i=e.createElement("div"),n=e.createElement("div"),s=e&&(e.body||e.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Tl=n.offsetParent!==i,s.removeChild(i))}return e},jc=function(t){for(var e,i;t&&t!==Cs;)i=t._gsap,i&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),e?e.push(i):e=[i]),t=t.parentNode;return e},Cl=[],Il=[],qc=function(){return ci.pageYOffset||Ie.scrollTop||no.scrollTop||Cs.scrollTop||0},Kc=function(){return ci.pageXOffset||Ie.scrollLeft||no.scrollLeft||Cs.scrollLeft||0},so=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},Zc=function r(t){if(ci.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},Hs=function r(t,e){if(t.parentNode&&(Ie||Al(t))){var i=so(t),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?e?"rect":"g":"div",o=e!==2?0:100,a=e===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=Ie.createElementNS?Ie.createElementNS(n.replace(/^https/,"http"),s):Ie.createElement(s);return e&&(i?(Zn||(Zn=r(t)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),Zn.appendChild(c)):(on||(on=r(t),on.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",on.appendChild(c))),c}throw"Need document and parent."},Qc=function(t){for(var e=new di,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e},Jc=function(t){var e=t.getCTM(),i;return e||(i=t.style[oe],t.style[oe]="none",t.appendChild(gn),e=gn.getCTM(),t.removeChild(gn),i?t.style[oe]=i:t.style.removeProperty(oe.replace(/([A-Z])/g,"-$1").toLowerCase())),e||ps.clone()},th=function(t,e){var i=so(t),n=t===i,s=i?Cl:Il,o=t.parentNode,a=o&&!i&&o.shadowRoot&&o.shadowRoot.appendChild?o.shadowRoot:o,l,c,h,f,d,u;if(t===ci)return t;if(s.length||s.push(Hs(t,1),Hs(t,2),Hs(t,3)),l=i?Zn:on,i)n?(h=Jc(t),f=-h.e/h.a,d=-h.f/h.d,c=ps):t.getBBox?(h=t.getBBox(),c=t.transform?t.transform.baseVal:{},c=c.numberOfItems?c.numberOfItems>1?Qc(c):c.getItem(0).matrix:ps,f=c.a*h.x+c.c*h.y,d=c.b*h.x+c.d*h.y):(c=new di,f=d=0),(n?i:o).appendChild(l),l.setAttribute("transform","matrix("+c.a+","+c.b+","+c.c+","+c.d+","+(c.e+f)+","+(c.f+d)+")");else{if(f=d=0,Tl)for(c=t.offsetParent,h=t;h&&(h=h.parentNode)&&h!==c&&h.parentNode;)(ci.getComputedStyle(h)[oe]+"").length>4&&(f=h.offsetLeft,d=h.offsetTop,h=0);if(u=ci.getComputedStyle(t),u.position!=="absolute"&&u.position!=="fixed")for(c=t.offsetParent;o&&o!==c;)f+=o.scrollLeft||0,d+=o.scrollTop||0,o=o.parentNode;h=l.style,h.top=t.offsetTop-d+"px",h.left=t.offsetLeft-f+"px",h[oe]=u[oe],h[pr]=u[pr],h.position=u.position==="fixed"?"fixed":"absolute",a.appendChild(l)}return l},$s=function(t,e,i,n,s,o,a){return t.a=e,t.b=i,t.c=n,t.d=s,t.e=o,t.f=a,t},di=function(){function r(e,i,n,s,o,a){e===void 0&&(e=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),$s(this,e,i,n,s,o,a)}var t=r.prototype;return t.inverse=function(){var i=this.a,n=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=i*o-n*s||1e-10;return $s(this,o/c,-n/c,-s/c,i/c,(s*l-o*a)/c,-(i*l-n*a)/c)},t.multiply=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f,h=i.a,f=i.c,d=i.b,u=i.d,g=i.e,p=i.f;return $s(this,h*n+d*o,h*s+d*a,f*n+u*o,f*s+u*a,l+g*n+p*o,c+g*s+p*a)},t.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f;return n===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&c===i.f},t.apply=function(i,n){n===void 0&&(n={});var s=i.x,o=i.y,a=this.a,l=this.b,c=this.c,h=this.d,f=this.e,d=this.f;return n.x=s*a+o*c+f||0,n.y=s*l+o*h+d||0,n},r}();function ii(r,t,e,i){if(!r||!r.parentNode||(Ie||Al(r)).documentElement===r)return new di;var n=jc(r),s=so(r),o=s?Cl:Il,a=th(r),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),h=o[2].getBoundingClientRect(),f=a.parentNode,d=Zc(r),u=new di((c.left-l.left)/100,(c.top-l.top)/100,(h.left-l.left)/100,(h.top-l.top)/100,l.left+(d?0:Kc()),l.top+(d?0:qc()));if(f.removeChild(a),n)for(l=n.length;l--;)c=n[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return t?u.inverse():u}function Wo(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function eh(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var z,nt,Gt,ae,we,Vs,Ce,gr,an,Ue,wl,_r,vn,ro,ln,se,un,Qn,bl,mr,gs=0,Ll=function(){return typeof window<"u"},vl=function(){return z||Ll()&&(z=window.gsap)&&z.registerPlugin&&z},Re=function(t){return typeof t=="function"},_n=function(t){return typeof t=="object"},re=function(t){return typeof t>"u"},Jn=function(){return!1},mn="transform",Dr="transformOrigin",xe=function(t){return Math.round(t*1e4)/1e4},tn=Array.isArray,Vn=function(t,e){var i=Gt.createElementNS?Gt.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),t):Gt.createElement(t);return i.style?i:Gt.createElement(t)},Xo=180/Math.PI,Ei=1e20,ih=new di,Me=Date.now||function(){return new Date().getTime()},hi=[],Fi={},nh=0,sh=/^(?:a|input|textarea|button|select)$/i,jo=0,Si={},Se={},Pl=function(t,e){var i={},n;for(n in t)i[n]=e?t[n]*e:t[n];return i},rh=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},qo=function r(t,e){for(var i=t.length,n;i--;)e?t[i].style.touchAction=e:t[i].style.removeProperty("touch-action"),n=t[i].children,n&&n.length&&r(n,e)},Ol=function(){return hi.forEach(function(t){return t()})},oh=function(t){hi.push(t),hi.length===1&&z.ticker.add(Ol)},Ko=function(){return!hi.length&&z.ticker.remove(Ol)},Zo=function(t){for(var e=hi.length;e--;)hi[e]===t&&hi.splice(e,1);z.to(Ko,{overwrite:!0,delay:15,duration:0,onComplete:Ko,data:"_draggable"})},ah=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},_t=function(t,e,i,n){if(t.addEventListener){var s=vn[e];n=n||(wl?{passive:!1}:null),t.addEventListener(s||e,i,n),s&&e!==s&&t.addEventListener(e,i,n)}},dt=function(t,e,i,n){if(t.removeEventListener){var s=vn[e];t.removeEventListener(s||e,i,n),s&&e!==s&&t.removeEventListener(e,i,n)}},qt=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},lh=function(t,e){for(var i=t.length;i--;)if(t[i].identifier===e)return!0},uh=function r(t){ro=t.touches&&gs<t.touches.length,dt(t.target,"touchend",r)},Qo=function(t){ro=t.touches&&gs<t.touches.length,_t(t.target,"touchend",uh)},Ri=function(t){return nt.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},Ni=function(t){return nt.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},Jo=function r(t,e){_t(t,"scroll",e),Yi(t.parentNode)||r(t.parentNode,e)},ta=function r(t,e){dt(t,"scroll",e),Yi(t.parentNode)||r(t.parentNode,e)},Yi=function(t){return!t||t===ae||t.nodeType===9||t===Gt.body||t===nt||!t.nodeType||!t.parentNode},ea=function(t,e){var i=e==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,Yi(t)?Math.max(ae[n],we[n])-(nt["inner"+i]||ae[s]||we[s]):t[n]-t[s])},Ys=function r(t,e){var i=ea(t,"x"),n=ea(t,"y");Yi(t)?t=Se:r(t.parentNode,e),t._gsMaxScrollX=i,t._gsMaxScrollY=n,e||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},zs=function(t,e,i){var n=t.style;n&&(re(n[e])&&(e=an(e,t)||e),i==null?n.removeProperty&&n.removeProperty(e.replace(/([A-Z])/g,"-$1").toLowerCase()):n[e]=i)},Pn=function(t){return nt.getComputedStyle(t instanceof Element?t:t.host||(t.parentNode||{}).host||t)},Je={},yi=function(t){if(t===nt)return Je.left=Je.top=0,Je.width=Je.right=ae.clientWidth||t.innerWidth||we.clientWidth||0,Je.height=Je.bottom=(t.innerHeight||0)-20<ae.clientHeight?ae.clientHeight:t.innerHeight||we.clientHeight||0,Je;var e=t.ownerDocument||Gt,i=re(t.pageX)?!t.nodeType&&!re(t.left)&&!re(t.top)?t:Ue(t)[0].getBoundingClientRect():{left:t.pageX-Ni(e),top:t.pageY-Ri(e),right:t.pageX-Ni(e)+1,bottom:t.pageY-Ri(e)+1};return re(i.right)&&!re(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):re(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},ct=function(t,e,i){var n=t.vars,s=n[i],o=t._listeners[e],a;return Re(s)&&(a=s.apply(n.callbackScope||t,n[i+"Params"]||[t.pointerEvent])),o&&t.dispatchEvent(e)===!1&&(a=!1),a},ia=function(t,e){var i=Ue(t)[0],n,s,o;return!i.nodeType&&i!==nt?re(t.left)?(s=t.min||t.minX||t.minRotation||0,n=t.min||t.minY||0,{left:s,top:n,width:(t.max||t.maxX||t.maxRotation||0)-s,height:(t.max||t.maxY||0)-n}):(o={x:0,y:0},{left:t.left-o.x,top:t.top-o.y,width:t.width,height:t.height}):ch(i,e)},Kt={},ch=function(t,e){e=Ue(e)[0];var i=t.getBBox&&t.ownerSVGElement,n=t.ownerDocument||Gt,s,o,a,l,c,h,f,d,u,g,p,_,S;if(t===nt)a=Ri(n),s=Ni(n),o=s+(n.documentElement.clientWidth||t.innerWidth||n.body.clientWidth||0),l=a+((t.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:t.innerHeight||n.body.clientHeight||0);else{if(e===nt||re(e))return t.getBoundingClientRect();s=a=0,i?(g=t.getBBox(),p=g.width,_=g.height):(t.viewBox&&(g=t.viewBox.baseVal)&&(s=g.x||0,a=g.y||0,p=g.width,_=g.height),p||(S=Pn(t),g=S.boxSizing==="border-box",p=(parseFloat(S.width)||t.clientWidth||0)+(g?0:parseFloat(S.borderLeftWidth)+parseFloat(S.borderRightWidth)),_=(parseFloat(S.height)||t.clientHeight||0)+(g?0:parseFloat(S.borderTopWidth)+parseFloat(S.borderBottomWidth)))),o=p,l=_}return t===e?{left:s,top:a,width:o-s,height:l-a}:(c=ii(e,!0).multiply(ii(t)),h=c.apply({x:s,y:a}),f=c.apply({x:o,y:a}),d=c.apply({x:o,y:l}),u=c.apply({x:s,y:l}),s=Math.min(h.x,f.x,d.x,u.x),a=Math.min(h.y,f.y,d.y,u.y),{left:s,top:a,width:Math.max(h.x,f.x,d.x,u.x)-s,height:Math.max(h.y,f.y,d.y,u.y)-a})},Ws=function(t,e,i,n,s,o){var a={},l,c,h;if(e)if(s!==1&&e instanceof Array){if(a.end=l=[],h=e.length,_n(e[0]))for(c=0;c<h;c++)l[c]=Pl(e[c],s);else for(c=0;c<h;c++)l[c]=e[c]*s;i+=1.1,n-=1.1}else Re(e)?a.end=function(f){var d=e.call(t,f),u,g;if(s!==1)if(_n(d)){u={};for(g in d)u[g]=d[g]*s;d=u}else d*=s;return d}:a.end=e;return(i||i===0)&&(a.max=i),(n||n===0)&&(a.min=n),o&&(a.velocity=0),a},hh=function r(t){var e;return!t||!t.getAttribute||t===we?!1:(e=t.getAttribute("data-clickable"))==="true"||e!=="false"&&(sh.test(t.nodeName+"")||t.getAttribute("contentEditable")==="true")?!0:r(t.parentNode)},Yn=function(t,e){for(var i=t.length,n;i--;)n=t[i],n.ondragstart=n.onselectstart=e?null:Jn,z.set(n,{lazy:!0,userSelect:e?"text":"none"})},fh=function r(t){if(Pn(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return r(t)},xl,Er,dh=function(t,e){t=z.utils.toArray(t)[0],e=e||{};var i=document.createElement("div"),n=i.style,s=t.firstChild,o=0,a=0,l=t.scrollTop,c=t.scrollLeft,h=t.scrollWidth,f=t.scrollHeight,d=0,u=0,g=0,p,_,S,T,A,C;xl&&e.force3D!==!1?(A="translate3d(",C="px,0px)"):mn&&(A="translate(",C="px)"),this.scrollTop=function(D,L){if(!arguments.length)return-this.top();this.top(-D,L)},this.scrollLeft=function(D,L){if(!arguments.length)return-this.left();this.left(-D,L)},this.left=function(D,L){if(!arguments.length)return-(t.scrollLeft+a);var b=t.scrollLeft-c,I=a;if((b>2||b<-2)&&!L){c=t.scrollLeft,z.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),e.onKill&&e.onKill();return}D=-D,D<0?(a=D-.5|0,D=0):D>u?(a=D-u|0,D=u):a=0,(a||I)&&(this._skip||(n[mn]=A+-a+"px,"+-o+C),a+d>=0&&(n.paddingRight=a+d+"px")),t.scrollLeft=D|0,c=t.scrollLeft},this.top=function(D,L){if(!arguments.length)return-(t.scrollTop+o);var b=t.scrollTop-l,I=o;if((b>2||b<-2)&&!L){l=t.scrollTop,z.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),e.onKill&&e.onKill();return}D=-D,D<0?(o=D-.5|0,D=0):D>g?(o=D-g|0,D=g):o=0,(o||I)&&(this._skip||(n[mn]=A+-a+"px,"+-o+C)),t.scrollTop=D|0,l=t.scrollTop},this.maxScrollTop=function(){return g},this.maxScrollLeft=function(){return u},this.disable=function(){for(s=i.firstChild;s;)T=s.nextSibling,t.appendChild(s),s=T;t===i.parentNode&&t.removeChild(i)},this.enable=function(){if(s=t.firstChild,s!==i){for(;s;)T=s.nextSibling,i.appendChild(s),s=T;t.appendChild(i),this.calibrate()}},this.calibrate=function(D){var L=t.clientWidth===p,b,I,y;l=t.scrollTop,c=t.scrollLeft,!(L&&t.clientHeight===_&&i.offsetHeight===S&&h===t.scrollWidth&&f===t.scrollHeight&&!D)&&((o||a)&&(I=this.left(),y=this.top(),this.left(-t.scrollLeft),this.top(-t.scrollTop)),b=Pn(t),(!L||D)&&(n.display="block",n.width="auto",n.paddingRight="0px",d=Math.max(0,t.scrollWidth-t.clientWidth),d&&(d+=parseFloat(b.paddingLeft)+(Er?parseFloat(b.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=d+"px",Er&&(n.paddingBottom=b.paddingBottom),p=t.clientWidth,_=t.clientHeight,h=t.scrollWidth,f=t.scrollHeight,u=t.scrollWidth-p,g=t.scrollHeight-_,S=i.offsetHeight,n.display="block",(I||y)&&(this.left(I),this.top(y)))},this.content=i,this.element=t,this._skip=!1,this.enable()},Xs=function(t){if(Ll()&&document.body){var e=window&&window.navigator;nt=window,Gt=document,ae=Gt.documentElement,we=Gt.body,Vs=Vn("div"),Qn=!!window.PointerEvent,Ce=Vn("div"),Ce.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",un=Ce.style.cursor==="grab"?"grab":"move",ln=e&&e.userAgent.toLowerCase().indexOf("android")!==-1,_r="ontouchstart"in ae&&"orientation"in nt||e&&(e.MaxTouchPoints>0||e.msMaxTouchPoints>0),Er=function(){var i=Vn("div"),n=Vn("div"),s=n.style,o=we,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),o.appendChild(i),a=n.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),vn=function(i){for(var n=i.split(","),s=("onpointerdown"in Vs?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in Vs?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[n[a]]=s[a],o[s[a]]=n[a];try{ae.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){wl=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),_t(Gt,"touchcancel",Jn),_t(nt,"touchmove",Jn),we&&we.addEventListener("touchstart",Jn),_t(Gt,"contextmenu",function(){for(var i in Fi)Fi[i].isPressed&&Fi[i].endDrag()}),z=gr=vl()}z?(se=z.plugins.inertia,bl=z.core.context||function(){},an=z.utils.checkPrefix,mn=an(mn),Dr=an(Dr),Ue=z.utils.toArray,mr=z.core.getStyleSaver,xl=!!an("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},ph=function(){function r(e){this._listeners={},this.target=e||this}var t=r.prototype;return t.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},t.removeEventListener=function(i,n){var s=this._listeners[i],o=s&&s.indexOf(n);o>=0&&s.splice(o,1)},t.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),Rn=function(r){eh(t,r);function t(e,i){var n;n=r.call(this)||this,gr||Xs(1),e=Ue(e)[0],n.styles=mr&&mr(e,"transform,left,top"),se||(se=z.plugins.inertia),n.vars=i=Pl(i||{}),n.target=e,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,z.getProperty(e,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",c=o?"y":"top",h=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),f=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),d=i.minimumMovement||2,u=Wo(n),g=Ue(i.trigger||i.handle||e),p={},_=0,S=!1,T=i.autoScrollMarginTop||40,A=i.autoScrollMarginRight||40,C=i.autoScrollMarginBottom||40,D=i.autoScrollMarginLeft||40,L=i.clickableTest||hh,b=0,I=e._gsap||z.core.getCache(e),y=fh(e),k=function(m,w){return parseFloat(I.get(e,m,w))},M=e.ownerDocument||Gt,G,x,K,q,B,H,st,te,ue,Y,X,Q,Z,zt,Wt,ji,Dt,ws,ve,Pe,je,qi,St,J,To,Xt,ee,bs,Ls,Ao,Nt,Co,Un,Io=function(m){return qt(m),m.stopImmediatePropagation&&m.stopImmediatePropagation(),!1},ce=function N(m){if(u.autoScroll&&u.isDragging&&(S||Dt)){var w=e,E=u.autoScroll*15,P,O,F,$,R,tt,j,et;for(S=!1,Se.scrollTop=nt.pageYOffset!=null?nt.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,Se.scrollLeft=nt.pageXOffset!=null?nt.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft,$=u.pointerX-Se.scrollLeft,R=u.pointerY-Se.scrollTop;w&&!O;)O=Yi(w.parentNode),P=O?Se:w.parentNode,F=O?{bottom:Math.max(ae.clientHeight,nt.innerHeight||0),right:Math.max(ae.clientWidth,nt.innerWidth||0),left:0,top:0}:P.getBoundingClientRect(),tt=j=0,f&&(et=P._gsMaxScrollY-P.scrollTop,et<0?j=et:R>F.bottom-C&&et?(S=!0,j=Math.min(et,E*(1-Math.max(0,F.bottom-R)/C)|0)):R<F.top+T&&P.scrollTop&&(S=!0,j=-Math.min(P.scrollTop,E*(1-Math.max(0,R-F.top)/T)|0)),j&&(P.scrollTop+=j)),h&&(et=P._gsMaxScrollX-P.scrollLeft,et<0?tt=et:$>F.right-A&&et?(S=!0,tt=Math.min(et,E*(1-Math.max(0,F.right-$)/A)|0)):$<F.left+D&&P.scrollLeft&&(S=!0,tt=-Math.min(P.scrollLeft,E*(1-Math.max(0,$-F.left)/D)|0)),tt&&(P.scrollLeft+=tt)),O&&(tt||j)&&(nt.scrollTo(P.scrollLeft,P.scrollTop),Qi(u.pointerX+tt,u.pointerY+j)),w=P}if(Dt){var ut=u.x,Ct=u.y;a?(u.deltaX=ut-parseFloat(I.rotation),u.rotation=ut,I.rotation=ut+"deg",I.renderTransform(1,I)):x?(f&&(u.deltaY=Ct-x.top(),x.top(Ct)),h&&(u.deltaX=ut-x.left(),x.left(ut))):o?(f&&(u.deltaY=Ct-parseFloat(I.y),I.y=Ct+"px"),h&&(u.deltaX=ut-parseFloat(I.x),I.x=ut+"px"),I.renderTransform(1,I)):(f&&(u.deltaY=Ct-parseFloat(e.style.top||0),e.style.top=Ct+"px"),h&&(u.deltaX=ut-parseFloat(e.style.left||0),e.style.left=ut+"px")),te&&!m&&!bs&&(bs=!0,ct(u,"drag","onDrag")===!1&&(h&&(u.x-=u.deltaX),f&&(u.y-=u.deltaY),N(!0)),bs=!1)}Dt=!1},qe=function(m,w){var E=u.x,P=u.y,O,F;e._gsap||(I=z.core.getCache(e)),I.uncache&&z.getProperty(e,"x"),o?(u.x=parseFloat(I.x),u.y=parseFloat(I.y)):a?u.x=u.rotation=parseFloat(I.rotation):x?(u.y=x.top(),u.x=x.left()):(u.y=parseFloat(e.style.top||(F=Pn(e))&&F.top)||0,u.x=parseFloat(e.style.left||(F||{}).left)||0),(ve||Pe||je)&&!w&&(u.isDragging||u.isThrowing)&&(je&&(Si.x=u.x,Si.y=u.y,O=je(Si),O.x!==u.x&&(u.x=O.x,Dt=!0),O.y!==u.y&&(u.y=O.y,Dt=!0)),ve&&(O=ve(u.x),O!==u.x&&(u.x=O,a&&(u.rotation=O),Dt=!0)),Pe&&(O=Pe(u.y),O!==u.y&&(u.y=O),Dt=!0)),Dt&&ce(!0),m||(u.deltaX=u.x-E,u.deltaY=u.y-P,ct(u,"throwupdate","onThrowUpdate"))},vs=function(m,w,E,P){return w==null&&(w=-1e20),E==null&&(E=Ei),Re(m)?function(O){var F=u.isPressed?1-u.edgeResistance:1;return m.call(u,(O>E?E+(O-E)*F:O<w?w+(O-w)*F:O)*P)*P}:tn(m)?function(O){for(var F=m.length,$=0,R=Ei,tt,j;--F>-1;)tt=m[F],j=tt-O,j<0&&(j=-j),j<R&&tt>=w&&tt<=E&&($=F,R=j);return m[$]}:isNaN(m)?function(O){return O}:function(){return m*P}},Pu=function(m,w,E,P,O,F,$){return F=F&&F<Ei?F*F:Ei,Re(m)?function(R){var tt=u.isPressed?1-u.edgeResistance:1,j=R.x,et=R.y,ut,Ct,me;return R.x=j=j>E?E+(j-E)*tt:j<w?w+(j-w)*tt:j,R.y=et=et>O?O+(et-O)*tt:et<P?P+(et-P)*tt:et,ut=m.call(u,R),ut!==R&&(R.x=ut.x,R.y=ut.y),$!==1&&(R.x*=$,R.y*=$),F<Ei&&(Ct=R.x-j,me=R.y-et,Ct*Ct+me*me>F&&(R.x=j,R.y=et)),R}:tn(m)?function(R){for(var tt=m.length,j=0,et=Ei,ut,Ct,me,jt;--tt>-1;)me=m[tt],ut=me.x-R.x,Ct=me.y-R.y,jt=ut*ut+Ct*Ct,jt<et&&(j=tt,et=jt);return et<=F?m[j]:R}:function(R){return R}},Ps=function(){var m,w,E,P;st=!1,x?(x.calibrate(),u.minX=X=-x.maxScrollLeft(),u.minY=Z=-x.maxScrollTop(),u.maxX=Y=u.maxY=Q=0,st=!0):i.bounds&&(m=ia(i.bounds,e.parentNode),a?(u.minX=X=m.left,u.maxX=Y=m.left+m.width,u.minY=Z=u.maxY=Q=0):!re(i.bounds.maxX)||!re(i.bounds.maxY)?(m=i.bounds,u.minX=X=m.minX,u.minY=Z=m.minY,u.maxX=Y=m.maxX,u.maxY=Q=m.maxY):(w=ia(e,e.parentNode),u.minX=X=Math.round(k(l,"px")+m.left-w.left),u.minY=Z=Math.round(k(c,"px")+m.top-w.top),u.maxX=Y=Math.round(X+(m.width-w.width)),u.maxY=Q=Math.round(Z+(m.height-w.height))),X>Y&&(u.minX=Y,u.maxX=Y=X,X=u.minX),Z>Q&&(u.minY=Q,u.maxY=Q=Z,Z=u.minY),a&&(u.minRotation=X,u.maxRotation=Y),st=!0),i.liveSnap&&(E=i.liveSnap===!0?i.snap||{}:i.liveSnap,P=tn(E)||Re(E),a?(ve=vs(P?E:E.rotation,X,Y,1),Pe=null):E.points?je=Pu(P?E:E.points,X,Y,Z,Q,E.radius,x?-1:1):(h&&(ve=vs(P?E:E.x||E.left||E.scrollLeft,X,Y,x?-1:1)),f&&(Pe=vs(P?E:E.y||E.top||E.scrollTop,Z,Q,x?-1:1))))},Ou=function(){u.isThrowing=!1,ct(u,"throwcomplete","onThrowComplete")},xu=function(){u.isThrowing=!1},Os=function(m,w){var E,P,O,F;m&&se?(m===!0&&(E=i.snap||i.liveSnap||{},P=tn(E)||Re(E),m={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?m.rotation=Ws(u,P?E:E.rotation,Y,X,1,w):(h&&(m[l]=Ws(u,P?E:E.points||E.x||E.left,Y,X,x?-1:1,w||u.lockedAxis==="x")),f&&(m[c]=Ws(u,P?E:E.points||E.y||E.top,Q,Z,x?-1:1,w||u.lockedAxis==="y")),(E.points||tn(E)&&_n(E[0]))&&(m.linkedProps=l+","+c,m.radius=E.radius))),u.isThrowing=!0,F=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-u.edgeResistance+.2:i.overshootTolerance,m.duration||(m.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?F===0||_n(m)&&m.resistance>1e3?0:.5:i.minDuration,overshoot:F}),u.tween=O=z.to(x||e,{inertia:m,data:"_draggable",inherit:!1,onComplete:Ou,onInterrupt:xu,onUpdate:i.fastMode?ct:qe,onUpdateParams:i.fastMode?[u,"onthrowupdate","onThrowUpdate"]:E&&E.radius?[!1,!0]:[]}),i.fastMode||(x&&(x._skip=!0),O.render(1e9,!0,!0),qe(!0,!0),u.endX=u.x,u.endY=u.y,a&&(u.endRotation=u.x),O.play(0),qe(!0,!0),x&&(x._skip=!1))):st&&u.applyBounds()},wo=function(m){var w=J,E;J=ii(e.parentNode,!0),m&&u.isPressed&&!J.equals(w||new di)&&(E=w.inverse().apply({x:K,y:q}),J.apply(E,E),K=E.x,q=E.y),J.equals(ih)&&(J=null)},Gn=function(){var m=1-u.edgeResistance,w=y?Ni(M):0,E=y?Ri(M):0,P,O,F;o&&(I.x=k(l,"px")+"px",I.y=k(c,"px")+"px",I.renderTransform()),wo(!1),Kt.x=u.pointerX-w,Kt.y=u.pointerY-E,J&&J.apply(Kt,Kt),K=Kt.x,q=Kt.y,Dt&&(Qi(u.pointerX,u.pointerY),ce(!0)),Co=ii(e),x?(Ps(),H=x.top(),B=x.left()):(Ki()?(qe(!0,!0),Ps()):u.applyBounds(),a?(P=e.ownerSVGElement?[I.xOrigin-e.getBBox().x,I.yOrigin-e.getBBox().y]:(Pn(e)[Dr]||"0 0").split(" "),ji=u.rotationOrigin=ii(e).apply({x:parseFloat(P[0])||0,y:parseFloat(P[1])||0}),qe(!0,!0),O=u.pointerX-ji.x-w,F=ji.y-u.pointerY+E,B=u.x,H=u.y=Math.atan2(F,O)*Xo):(H=k(c,"px"),B=k(l,"px"))),st&&m&&(B>Y?B=Y+(B-Y)/m:B<X&&(B=X-(X-B)/m),a||(H>Q?H=Q+(H-Q)/m:H<Z&&(H=Z-(Z-H)/m))),u.startX=B=xe(B),u.startY=H=xe(H)},Ki=function(){return u.tween&&u.tween.isActive()},Mu=function(){Ce.parentNode&&!Ki()&&!u.isDragging&&Ce.parentNode.removeChild(Ce)},Zi=function(m,w){var E;if(!G||u.isPressed||!m||(m.type==="mousedown"||m.type==="pointerdown")&&!w&&Me()-b<30&&vn[u.pointerEvent.type]){Nt&&m&&G&&qt(m);return}if(To=Ki(),Un=!1,u.pointerEvent=m,vn[m.type]?(St=~m.type.indexOf("touch")?m.currentTarget||m.target:M,_t(St,"touchend",ie),_t(St,"touchmove",Ke),_t(St,"touchcancel",ie),_t(M,"touchstart",Qo)):(St=null,_t(M,"mousemove",Ke)),ee=null,(!Qn||!St)&&(_t(M,"mouseup",ie),m&&m.target&&_t(m.target,"mouseup",ie)),qi=L.call(u,m.target)&&i.dragClickables===!1&&!w,qi){_t(m.target,"change",ie),ct(u,"pressInit","onPressInit"),ct(u,"press","onPress"),Yn(g,!0),Nt=!1;return}if(Xt=!St||h===f||u.vars.allowNativeTouchScrolling===!1||u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2)?!1:h?"y":"x",Nt=!Xt&&!u.allowEventDefault,Nt&&(qt(m),_t(nt,"touchforcechange",qt)),m.changedTouches?(m=zt=m.changedTouches[0],Wt=m.identifier):m.pointerId?Wt=m.pointerId:zt=Wt=null,gs++,oh(ce),q=u.pointerY=m.pageY,K=u.pointerX=m.pageX,ct(u,"pressInit","onPressInit"),(Xt||u.autoScroll)&&Ys(e.parentNode),e.parentNode&&u.autoScroll&&!x&&!a&&e.parentNode._gsMaxScrollX&&!Ce.parentNode&&!e.getBBox&&(Ce.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(Ce)),Gn(),u.tween&&u.tween.kill(),u.isThrowing=!1,z.killTweensOf(x||e,p,!0),x&&z.killTweensOf(e,{scrollTo:1},!0),u.tween=u.lockedAxis=null,(i.zIndexBoost||!a&&!x&&i.zIndexBoost!==!1)&&(e.style.zIndex=t.zIndex++),u.isPressed=!0,te=!!(i.onDrag||u._listeners.drag),ue=!!(i.onMove||u._listeners.move),i.cursor!==!1||i.activeCursor)for(E=g.length;--E>-1;)z.set(g[E],{cursor:i.activeCursor||i.cursor||(un==="grab"?"grabbing":un)});ct(u,"press","onPress")},Ke=function(m){var w=m,E,P,O,F,$,R;if(!G||ro||!u.isPressed||!m){Nt&&m&&G&&qt(m);return}if(u.pointerEvent=m,E=m.changedTouches,E){if(m=E[0],m!==zt&&m.identifier!==Wt){for(F=E.length;--F>-1&&(m=E[F]).identifier!==Wt&&m.target!==e;);if(F<0)return}}else if(m.pointerId&&Wt&&m.pointerId!==Wt)return;if(St&&Xt&&!ee&&(Kt.x=m.pageX-(y?Ni(M):0),Kt.y=m.pageY-(y?Ri(M):0),J&&J.apply(Kt,Kt),P=Kt.x,O=Kt.y,$=Math.abs(P-K),R=Math.abs(O-q),($!==R&&($>d||R>d)||ln&&Xt===ee)&&(ee=$>R&&h?"x":"y",Xt&&ee!==Xt&&_t(nt,"touchforcechange",qt),u.vars.lockAxisOnTouchScroll!==!1&&h&&f&&(u.lockedAxis=ee==="x"?"y":"x",Re(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,w)),ln&&Xt===ee))){ie(w);return}!u.allowEventDefault&&(!Xt||ee&&Xt!==ee)&&w.cancelable!==!1?(qt(w),Nt=!0):Nt&&(Nt=!1),u.autoScroll&&(S=!0),Qi(m.pageX,m.pageY,ue)},Qi=function(m,w,E){var P=1-u.dragResistance,O=1-u.edgeResistance,F=u.pointerX,$=u.pointerY,R=H,tt=u.x,j=u.y,et=u.endX,ut=u.endY,Ct=u.endRotation,me=Dt,jt,Oe,yt,ft,xs,ne;u.pointerX=m,u.pointerY=w,y&&(m-=Ni(M),w-=Ri(M)),a?(ft=Math.atan2(ji.y-w,m-ji.x)*Xo,xs=u.y-ft,xs>180?(H-=360,u.y=ft):xs<-180&&(H+=360,u.y=ft),u.x!==B||Math.max(Math.abs(K-m),Math.abs(q-w))>d?(u.y=ft,yt=B+(H-ft)*P):yt=B):(J&&(ne=m*J.a+w*J.c+J.e,w=m*J.b+w*J.d+J.f,m=ne),Oe=w-q,jt=m-K,Oe<d&&Oe>-d&&(Oe=0),jt<d&&jt>-d&&(jt=0),(u.lockAxis||u.lockedAxis)&&(jt||Oe)&&(ne=u.lockedAxis,ne||(u.lockedAxis=ne=h&&Math.abs(jt)>Math.abs(Oe)?"y":f?"x":null,ne&&Re(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,u.pointerEvent)),ne==="y"?Oe=0:ne==="x"&&(jt=0)),yt=xe(B+jt*P),ft=xe(H+Oe*P)),(ve||Pe||je)&&(u.x!==yt||u.y!==ft&&!a)&&(je&&(Si.x=yt,Si.y=ft,ne=je(Si),yt=xe(ne.x),ft=xe(ne.y)),ve&&(yt=xe(ve(yt))),Pe&&(ft=xe(Pe(ft)))),st&&(yt>Y?yt=Y+Math.round((yt-Y)*O):yt<X&&(yt=X+Math.round((yt-X)*O)),a||(ft>Q?ft=Math.round(Q+(ft-Q)*O):ft<Z&&(ft=Math.round(Z+(ft-Z)*O)))),(u.x!==yt||u.y!==ft&&!a)&&(a?(u.endRotation=u.x=u.endX=yt,Dt=!0):(f&&(u.y=u.endY=ft,Dt=!0),h&&(u.x=u.endX=yt,Dt=!0)),!E||ct(u,"move","onMove")!==!1?!u.isDragging&&u.isPressed&&(u.isDragging=Un=!0,ct(u,"dragstart","onDragStart")):(u.pointerX=F,u.pointerY=$,H=R,u.x=tt,u.y=j,u.endX=et,u.endY=ut,u.endRotation=Ct,Dt=me))},ie=function N(m,w){if(!G||!u.isPressed||m&&Wt!=null&&!w&&(m.pointerId&&m.pointerId!==Wt&&m.target!==e||m.changedTouches&&!lh(m.changedTouches,Wt))){Nt&&m&&G&&qt(m);return}u.isPressed=!1;var E=m,P=u.isDragging,O=u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2),F=z.delayedCall(.001,Mu),$,R,tt,j,et;if(St?(dt(St,"touchend",N),dt(St,"touchmove",Ke),dt(St,"touchcancel",N),dt(M,"touchstart",Qo)):dt(M,"mousemove",Ke),dt(nt,"touchforcechange",qt),(!Qn||!St)&&(dt(M,"mouseup",N),m&&m.target&&dt(m.target,"mouseup",N)),Dt=!1,P&&(_=jo=Me(),u.isDragging=!1),Zo(ce),qi&&!O){m&&(dt(m.target,"change",N),u.pointerEvent=E),Yn(g,!1),ct(u,"release","onRelease"),ct(u,"click","onClick"),qi=!1;return}for(R=g.length;--R>-1;)zs(g[R],"cursor",i.cursor||(i.cursor!==!1?un:null));if(gs--,m){if($=m.changedTouches,$&&(m=$[0],m!==zt&&m.identifier!==Wt)){for(R=$.length;--R>-1&&(m=$[R]).identifier!==Wt&&m.target!==e;);if(R<0&&!w)return}u.pointerEvent=E,u.pointerX=m.pageX,u.pointerY=m.pageY}return O&&E?(qt(E),Nt=!0,ct(u,"release","onRelease")):E&&!P?(Nt=!1,To&&(i.snap||i.bounds)&&Os(i.inertia||i.throwProps),ct(u,"release","onRelease"),(!ln||E.type!=="touchmove")&&E.type.indexOf("cancel")===-1&&(ct(u,"click","onClick"),Me()-b<300&&ct(u,"doubleclick","onDoubleClick"),j=E.target||e,b=Me(),et=function(){b!==Ls&&u.enabled()&&!u.isPressed&&!E.defaultPrevented&&(j.click?j.click():M.createEvent&&(tt=M.createEvent("MouseEvents"),tt.initMouseEvent("click",!0,!0,nt,1,u.pointerEvent.screenX,u.pointerEvent.screenY,u.pointerX,u.pointerY,!1,!1,!1,!1,0,null),j.dispatchEvent(tt)))},!ln&&!E.defaultPrevented&&z.delayedCall(.05,et))):(Os(i.inertia||i.throwProps),!u.allowEventDefault&&E&&(i.dragClickables!==!1||!L.call(u,E.target))&&P&&(!Xt||ee&&Xt===ee)&&E.cancelable!==!1?(Nt=!0,qt(E)):Nt=!1,ct(u,"release","onRelease")),Ki()&&F.duration(u.tween.duration()),P&&ct(u,"dragend","onDragEnd"),!0},Hn=function(m){if(m&&u.isDragging&&!x){var w=m.target||e.parentNode,E=w.scrollLeft-w._gsScrollX,P=w.scrollTop-w._gsScrollY;(E||P)&&(J?(K-=E*J.a+P*J.c,q-=P*J.d+E*J.b):(K-=E,q-=P),w._gsScrollX+=E,w._gsScrollY+=P,Qi(u.pointerX,u.pointerY))}},bo=function(m){var w=Me(),E=w-b<100,P=w-_<50,O=E&&Ls===b,F=u.pointerEvent&&u.pointerEvent.defaultPrevented,$=E&&Ao===b,R=m.isTrusted||m.isTrusted==null&&E&&O;if((O||P&&u.vars.suppressClickOnDrag!==!1)&&m.stopImmediatePropagation&&m.stopImmediatePropagation(),E&&!(u.pointerEvent&&u.pointerEvent.defaultPrevented)&&(!O||R&&!$)){R&&O&&(Ao=b),Ls=b;return}(u.isPressed||P||E)&&(!R||!m.detail||!E||F)&&qt(m),!E&&!P&&!Un&&(m&&m.target&&(u.pointerEvent=m),ct(u,"click","onClick"))},Lo=function(m){return J?{x:m.x*J.a+m.y*J.c+J.e,y:m.x*J.b+m.y*J.d+J.f}:{x:m.x,y:m.y}};return ws=t.get(e),ws&&ws.kill(),n.startDrag=function(N,m){var w,E,P,O;Zi(N||u.pointerEvent,!0),m&&!u.hitTest(N||u.pointerEvent)&&(w=yi(N||u.pointerEvent),E=yi(e),P=Lo({x:w.left+w.width/2,y:w.top+w.height/2}),O=Lo({x:E.left+E.width/2,y:E.top+E.height/2}),K-=P.x-O.x,q-=P.y-O.y),u.isDragging||(u.isDragging=Un=!0,ct(u,"dragstart","onDragStart"))},n.drag=Ke,n.endDrag=function(N){return ie(N||u.pointerEvent,!0)},n.timeSinceDrag=function(){return u.isDragging?0:(Me()-_)/1e3},n.timeSinceClick=function(){return(Me()-b)/1e3},n.hitTest=function(N,m){return t.hitTest(u.target,N,m)},n.getDirection=function(N,m){var w=N==="velocity"&&se?N:_n(N)&&!a?"element":"start",E,P,O,F,$,R;return w==="element"&&($=yi(u.target),R=yi(N)),E=w==="start"?u.x-B:w==="velocity"?se.getVelocity(e,l):$.left+$.width/2-(R.left+R.width/2),a?E<0?"counter-clockwise":"clockwise":(m=m||2,P=w==="start"?u.y-H:w==="velocity"?se.getVelocity(e,c):$.top+$.height/2-(R.top+R.height/2),O=Math.abs(E/P),F=O<1/m?"":E<0?"left":"right",O<m&&(F!==""&&(F+="-"),F+=P<0?"up":"down"),F)},n.applyBounds=function(N,m){var w,E,P,O,F,$;if(N&&i.bounds!==N)return i.bounds=N,u.update(!0,m);if(qe(!0),Ps(),st&&!Ki()){if(w=u.x,E=u.y,w>Y?w=Y:w<X&&(w=X),E>Q?E=Q:E<Z&&(E=Z),(u.x!==w||u.y!==E)&&(P=!0,u.x=u.endX=w,a?u.endRotation=w:u.y=u.endY=E,Dt=!0,ce(!0),u.autoScroll&&!u.isDragging))for(Ys(e.parentNode),O=e,Se.scrollTop=nt.pageYOffset!=null?nt.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,Se.scrollLeft=nt.pageXOffset!=null?nt.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft;O&&!$;)$=Yi(O.parentNode),F=$?Se:O.parentNode,f&&F.scrollTop>F._gsMaxScrollY&&(F.scrollTop=F._gsMaxScrollY),h&&F.scrollLeft>F._gsMaxScrollX&&(F.scrollLeft=F._gsMaxScrollX),O=F;u.isThrowing&&(P||u.endX>Y||u.endX<X||u.endY>Q||u.endY<Z)&&Os(i.inertia||i.throwProps,P)}return u},n.update=function(N,m,w){if(m&&u.isPressed){var E=ii(e),P=Co.apply({x:u.x-B,y:u.y-H}),O=ii(e.parentNode,!0);O.apply({x:E.e-P.x,y:E.f-P.y},P),u.x-=P.x-O.e,u.y-=P.y-O.f,ce(!0),Gn()}var F=u.x,$=u.y;return wo(!m),N?u.applyBounds():(Dt&&w&&ce(!0),qe(!0)),m&&(Qi(u.pointerX,u.pointerY),Dt&&ce(!0)),u.isPressed&&!m&&(h&&Math.abs(F-u.x)>.01||f&&Math.abs($-u.y)>.01&&!a)&&Gn(),u.autoScroll&&(Ys(e.parentNode,u.isDragging),S=u.isDragging,ce(!0),ta(e,Hn),Jo(e,Hn)),u},n.enable=function(N){var m={lazy:!0},w,E,P;if(i.cursor!==!1&&(m.cursor=i.cursor||un),z.utils.checkPrefix("touchCallout")&&(m.touchCallout="none"),N!=="soft"){for(qo(g,h===f?"none":i.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"),E=g.length;--E>-1;)P=g[E],Qn||_t(P,"mousedown",Zi),_t(P,"touchstart",Zi),_t(P,"click",bo,!0),z.set(P,m),P.getBBox&&P.ownerSVGElement&&h!==f&&z.set(P.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"}),i.allowContextMenu||_t(P,"contextmenu",Io);Yn(g,!1)}return Jo(e,Hn),G=!0,se&&N!=="soft"&&se.track(x||e,o?"x,y":a?"rotation":"top,left"),e._gsDragID=w=e._gsDragID||"d"+nh++,Fi[w]=u,x&&(x.enable(),x.element._gsDragID=w),(i.bounds||a)&&Gn(),i.bounds&&u.applyBounds(),u},n.disable=function(N){for(var m=u.isDragging,w=g.length,E;--w>-1;)zs(g[w],"cursor",null);if(N!=="soft"){for(qo(g,null),w=g.length;--w>-1;)E=g[w],zs(E,"touchCallout",null),dt(E,"mousedown",Zi),dt(E,"touchstart",Zi),dt(E,"click",bo,!0),dt(E,"contextmenu",Io);Yn(g,!0),St&&(dt(St,"touchcancel",ie),dt(St,"touchend",ie),dt(St,"touchmove",Ke)),dt(M,"mouseup",ie),dt(M,"mousemove",Ke)}return ta(e,Hn),G=!1,se&&N!=="soft"&&(se.untrack(x||e,o?"x,y":a?"rotation":"top,left"),u.tween&&u.tween.kill()),x&&x.disable(),Zo(ce),u.isDragging=u.isPressed=qi=!1,m&&ct(u,"dragend","onDragEnd"),u},n.enabled=function(N,m){return arguments.length?N?u.enable(m):u.disable(m):G},n.kill=function(){return u.isThrowing=!1,u.tween&&u.tween.kill(),u.disable(),z.set(g,{clearProps:"userSelect"}),delete Fi[e._gsDragID],u},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(x=n.scrollProxy=new dh(e,rh({onKill:function(){u.isPressed&&ie(null)}},i)),e.style.overflowY=f&&!_r?"auto":"hidden",e.style.overflowX=h&&!_r?"auto":"hidden",e=x.content),a?p.rotation=1:(h&&(p[l]=1),f&&(p[c]=1)),I.force3D="force3D"in i?i.force3D:!0,bl(Wo(n)),n.enable(),n}return t.register=function(i){z=i,Xs()},t.create=function(i,n){return gr||Xs(!0),Ue(i).map(function(s){return new t(s,n)})},t.get=function(i){return Fi[(Ue(i)[0]||{})._gsDragID]},t.timeSinceDrag=function(){return(Me()-jo)/1e3},t.hitTest=function(i,n,s){if(i===n)return!1;var o=yi(i),a=yi(n),l=o.top,c=o.left,h=o.right,f=o.bottom,d=o.width,u=o.height,g=a.left>h||a.right<c||a.top>f||a.bottom<l,p,_,S;return g||!s?!g:(S=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(c,a.left),top:Math.max(l,a.top)},p.width=Math.min(h,a.right)-p.left,p.height=Math.min(f,a.bottom)-p.top,p.width<0||p.height<0?!1:S?(s*=.01,_=p.width*p.height,_>=d*u*s||_>=a.width*a.height*s):p.width>s&&p.height>s)},t}(ph);ah(Rn.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Rn.zIndex=1e3;Rn.version="3.13.0";vl()&&z.registerPlugin(Rn);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var fe,Sr,Dn,Ml,Ai,Li,yr,Fl,Rl=function(){return fe||typeof window<"u"&&(fe=window.gsap)},Tr={},gh=function(t){return Math.round(t*1e4)/1e4},Ar=function(t){return Fl(t).id},cn=function(t){return Tr[Ar(typeof t=="string"?Dn(t)[0]:t)]},na=function(t){var e=Ai,i;if(t-yr>=.05)for(yr=t;e;)i=e.g(e.t,e.p),(i!==e.v1||t-e.t1>.2)&&(e.v2=e.v1,e.v1=i,e.t2=e.t1,e.t1=t),e=e._next},_h={deg:360,rad:Math.PI*2},js=function(){fe=Rl(),fe&&(Dn=fe.utils.toArray,Ml=fe.utils.getUnit,Fl=fe.core.getCache,Li=fe.ticker,Sr=1)},mh=function(t,e,i,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=_h[i||Ml(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=Li.time,n&&(this._next=n,n._prev=this)},Nn=function(){function r(e,i){Sr||js(),this.target=Dn(e)[0],Tr[Ar(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){fe=i,js()};var t=r.prototype;return t.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),o,a,l;return o=parseFloat(n?s.v1:s.g(s.t,s.p)),a=o-parseFloat(s.v2),l=s.rCap,l&&(a=a%l,a!==a%(l/2)&&(a=a<0?a+l:a-l)),gh(a/((n?s.t1:Li.time)-s.t2))},t.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},t.isTracking=function(i){return i in this._props},t.add=function(i,n){i in this._props||(Ai||(Li.add(na),yr=Li.time),Ai=this._props[i]=new mh(this.target,i,n,Ai))},t.remove=function(i){var n=this._props[i],s,o;n&&(s=n._prev,o=n._next,s&&(s._next=o),o?o._prev=s:Ai===n&&(Li.remove(na),Ai=0),delete this._props[i])},t.kill=function(i){for(var n in this._props)this.remove(n);i||delete Tr[Ar(this.target)]},r.track=function(i,n,s){Sr||js();for(var o=[],a=Dn(i),l=n.split(","),c=(s||"").split(","),h=a.length,f,d;h--;){for(f=cn(a[h])||new r(a[h]),d=l.length;d--;)f.add(l[d],c[d]||c[0]);o.push(f)}return o},r.untrack=function(i,n){var s=(n||"").split(",");Dn(i).forEach(function(o){var a=cn(o);a&&(s.length?s.forEach(function(l){return a.remove(l)}):a.kill(1))})},r.isTracking=function(i,n){var s=cn(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=cn(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();Nn.getByTarget=cn;Rl()&&fe.registerPlugin(Nn);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var mt,Nl,sa,kl,Cr,En,Bl,Ul,Gl,oo,Hl,Sn,Ir,$l,_s=Nn.getByTarget,Vl=function(){return mt||typeof window<"u"&&(mt=window.gsap)&&mt.registerPlugin&&mt},Dh=function(t){return typeof t=="string"},On=function(t){return typeof t=="number"},Ve=function(t){return typeof t=="object"},wr=function(t){return typeof t=="function"},Eh=1,Yl=Array.isArray,Sh=function(t){return t},ki=1e10,ra=1/ki,zl=.05,yh=function(t){return Math.round(t*1e4)/1e4},Th=function(t,e,i){for(var n in e)!(n in t)&&n!==i&&(t[n]=e[n]);return t},Ah=function r(t){var e={},i,n;for(i in t)e[i]=Ve(n=t[i])&&!Yl(n)?r(n):n;return e},oa=function(t,e,i,n,s){var o=e.length,a=0,l=ki,c,h,f,d;if(Ve(t)){for(;o--;){c=e[o],h=0;for(f in t)d=c[f]-t[f],h+=d*d;h<l&&(a=o,l=h)}if((s||ki)<ki&&s<Math.sqrt(l))return t}else for(;o--;)c=e[o],h=c-t,h<0&&(h=-h),h<l&&c>=n&&c<=i&&(a=o,l=h);return e[a]},Wl=function(t,e,i,n,s,o,a){if(t.end==="auto")return t;var l=t.end,c,h;if(i=isNaN(i)?ki:i,n=isNaN(n)?-1e10:n,Ve(e)){if(c=e.calculated?e:(wr(l)?l(e,a):oa(e,l,i,n,o))||e,!e.calculated){for(h in c)e[h]=c[h];e.calculated=!0}c=c[s]}else c=wr(l)?l(e,a):Yl(l)?oa(e,l,i,n,o):parseFloat(l);return c>i?c=i:c<n&&(c=n),{max:c,min:c,unitFactor:t.unitFactor}},ms=function(t,e,i){return isNaN(t[e])?i:+t[e]},ao=function(t,e){return e*zl*t/oo},aa=function(t,e,i){return Math.abs((e-t)*oo/i/zl)},Xl={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},jl=function(t,e,i,n){if(e.linkedProps){var s=e.linkedProps.split(","),o={},a,l,c,h,f,d;for(a=0;a<s.length;a++)l=s[a],c=e[l],c&&(On(c.velocity)?h=c.velocity:(f=f||_s(t),h=f&&f.isTracking(l)?f.get(l):0),d=Math.abs(h/ms(c,"resistance",n)),o[l]=parseFloat(i(t,l))+ao(h,d));return o}},Ch=function(t,e,i,n,s,o){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),Dh(t)&&(t=kl(t)[0]),!t)return 0;var a=0,l=ki,c=e.inertia||e,h=Gl(t).get,f=ms(c,"resistance",En.resistance),d,u,g,p,_,S,T,A,C,D;D=jl(t,c,h,f);for(d in c)Xl[d]||(u=c[d],Ve(u)||(A=A||_s(t),A&&A.isTracking(d)?u=On(u)?{velocity:u}:{velocity:A.get(d)}:(p=+u||0,g=Math.abs(p/f))),Ve(u)&&(On(u.velocity)?p=u.velocity:(A=A||_s(t),p=A&&A.isTracking(d)?A.get(d):0),g=Hl(n,i,Math.abs(p/ms(u,"resistance",f))),_=parseFloat(h(t,d))||0,S=_+ao(p,g),"end"in u&&(u=Wl(u,D&&d in D?D:S,u.max,u.min,d,c.radius,p),Sn===e&&(Sn=c=Ah(e)),c[d]=Th(u,c[d],"end")),"max"in u&&S>+u.max+ra?(C=u.unitFactor||En.unitFactors[d]||1,T=_>u.max&&u.min!==u.max||p*C>-15&&p*C<45?n+(i-n)*.1:aa(_,u.max,p),T+s<l&&(l=T+s)):"min"in u&&S<+u.min-ra&&(C=u.unitFactor||En.unitFactors[d]||1,T=_<u.min&&u.min!==u.max||p*C>-45&&p*C<15?n+(i-n)*.1:aa(_,u.min,p),T+s<l&&(l=T+s)),T>a&&(a=T)),g>a&&(a=g));return a>l&&(a=l),a>i?i:a<n?n:a},la=function(){mt=Vl(),mt&&(sa=mt.parseEase,kl=mt.utils.toArray,Bl=mt.utils.getUnit,Gl=mt.core.getCache,Hl=mt.utils.clamp,Ir=mt.core.getStyleSaver,$l=mt.core.reverting||function(){},Cr=sa("power3"),oo=Cr(.05),Ul=mt.core.PropTween,mt.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),En=mt.config(),mt.registerPlugin(Nn),Nl=1)},lo={version:"3.13.0",name:"inertia",register:function(t){mt=t,la()},init:function(t,e,i,n,s){Nl||la();var o=_s(t);if(e==="auto"){if(!o){console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");return}e=o.getAll()}this.styles=Ir&&typeof t.style=="object"&&Ir(t),this.target=t,this.tween=i,Sn=e;var a=t._gsap,l=a.get,c=e.duration,h=Ve(c),f=e.preventOvershoot||h&&c.overshoot===0,d=ms(e,"resistance",En.resistance),u=On(c)?c:Ch(t,e,h&&c.max||10,h&&c.min||.2,h&&"overshoot"in c?+c.overshoot:f?0:1),g,p,_,S,T,A,C,D,L;e=Sn,Sn=0,L=jl(t,e,l,d);for(g in e)Xl[g]||(p=e[g],wr(p)&&(p=p(n,t,s)),On(p)?T=p:Ve(p)&&!isNaN(p.velocity)?T=+p.velocity:o&&o.isTracking(g)?T=o.get(g):console.warn("ERROR: No velocity was defined for "+t+" property: "+g),A=ao(T,u),D=0,_=l(t,g),S=Bl(_),_=parseFloat(_),Ve(p)&&(C=_+A,"end"in p&&(p=Wl(p,L&&g in L?L:C,p.max,p.min,g,e.radius,T)),"max"in p&&+p.max<C?f||p.preventOvershoot?A=p.max-_:D=p.max-_-A:"min"in p&&+p.min>C&&(f||p.preventOvershoot?A=p.min-_:D=p.min-_-A)),this._props.push(g),this.styles&&this.styles.save(g),this._pt=new Ul(this._pt,t,g,_,0,Sh,0,a.set(t,g,this)),this._pt.u=S||0,this._pt.c1=A,this._pt.c2=D);return i.duration(u),Eh},render:function(t,e){var i=e._pt;if(t=Cr(e.tween._time/e.tween._dur),t||!$l())for(;i;)i.set(i.t,i.p,yh(i.s+i.c1*t+i.c2*t*t)+i.u,i.d,t),i=i._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return lo[r]=Nn[r]});Vl()&&mt.registerPlugin(lo);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ih=/(?:^\s+|\s+$)/g,wh=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function ql(r){var t=r.nodeType,e="";if(t===1||t===9||t===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)e+=ql(r)}else if(t===3||t===4)return r.nodeValue;return e}function br(r,t,e,i,n){for(var s=r.firstChild,o=[],a;s;)s.nodeType===3?(a=(s.nodeValue+"").replace(/^\n+/g,""),i||(a=a.replace(/\s+/g," ")),o.push.apply(o,Kl(a,t,e,i,n))):(s.nodeName+"").toLowerCase()==="br"?o[o.length-1]+="<br>":o.push(s.outerHTML),s=s.nextSibling;if(!n)for(a=o.length;a--;)o[a]==="&"&&o.splice(a,1,"&amp;");return o}function Kl(r,t,e,i,n){if(r+="",e&&(r=r.trim?r.trim():r.replace(Ih,"")),t&&t!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var s=[],o=r.length,a=0,l,c;a<o;a++)c=r.charAt(a),(c.charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319||r.charCodeAt(a+1)>=65024&&r.charCodeAt(a+1)<=65039)&&(l=((r.substr(a,12).split(wh)||[])[1]||"").length||2,c=r.substr(a,l),s.emoji=1,a+=l-1),s.push(n?c:c===">"?"&gt;":c==="<"?"&lt;":i&&c===" "&&(r.charAt(a-1)===" "||r.charAt(a+1)===" ")?"&nbsp;":c);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var hn,zn,bh=function(){return hn||typeof window<"u"&&(hn=window.gsap)&&hn.registerPlugin&&hn},kn={version:"3.13.0",name:"text",init:function(t,e,i){typeof e!="object"&&(e={value:e});var n=t.nodeName.toUpperCase(),s=this,o=e,a=o.newClass,l=o.oldClass,c=o.preserveSpaces,h=o.rtl,f=s.delimiter=e.delimiter||"",d=s.fillChar=e.fillChar||(e.padSpace?"&nbsp;":""),u,g,p,_,S,T,A,C;if(s.svg=t.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in t)&&!s.svg)return!1;if(s.target=t,!("value"in e)){s.text=s.original=[""];return}for(p=br(t,f,!1,c,s.svg),zn||(zn=document.createElement("div")),zn.innerHTML=e.value,g=br(zn,f,!1,c,s.svg),s.from=i._from,(s.from||h)&&!(h&&s.from)&&(n=p,p=g,g=n),s.hasClass=!!(a||l),s.newClass=h?l:a,s.oldClass=h?a:l,n=p.length-g.length,u=n<0?p:g,n<0&&(n=-n);--n>-1;)u.push(d);if(e.type==="diff"){for(_=0,S=[],T=[],A="",n=0;n<g.length;n++)C=g[n],C===p[n]?A+=C:(S[_]=A+C,T[_++]=A+p[n],A="");g=S,p=T,A&&(g.push(A),p.push(A))}e.speed&&i.duration(Math.min(.05/e.speed*u.length,e.maxDuration||9999)),s.rtl=h,s.original=p,s.text=g,s._props.push("text")},render:function(t,e){t>1?t=1:t<0&&(t=0),e.from&&(t=1-t);var i=e.text,n=e.hasClass,s=e.newClass,o=e.oldClass,a=e.delimiter,l=e.target,c=e.fillChar,h=e.original,f=e.rtl,d=i.length,u=(f?1-t:t)*d+.5|0,g,p,_;n&&t?(g=s&&u,p=o&&u!==d,_=(g?"<span class='"+s+"'>":"")+i.slice(0,u).join(a)+(g?"</span>":"")+(p?"<span class='"+o+"'>":"")+a+h.slice(u).join(a)+(p?"</span>":"")):_=i.slice(0,u).join(a)+a+h.slice(u).join(a),e.svg?l.textContent=_:l.innerHTML=c==="&nbsp;"&&~_.indexOf("  ")?_.split("  ").join("&nbsp;&nbsp;"):_}};kn.splitInnerHTML=br;kn.emojiSafeSplit=Kl;kn.getText=ql;bh()&&hn.registerPlugin(kn);const Lh=1.3,vh=1.3,Ph=.1,Oh=150,xh=32,Mh=1.6,Fh=.15,Rh=.8,Nh=2,pi=40.6,kh=.5,Bh=.4,Uh="power1.out",Gh=1.7,Hh=2.6,$h="sine.inOut",It=[0,344.182,311.455,278.727,246,213.273,180.545,147.818,115.091,82.364,60,40],ye={env:0,lcd:0,logo:0,btn:0},Vh=.75,Yh=.3,zh=.3,Wh=25,Zl=1500,Xh=Zl/1e3,jh=1,qh=.1,Kh=.05,Zh=.3,Qh={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},Jh=1,tf=.04,ef=.008,nf=.05,sf=.03,rf=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],of=.7,af=.2,lf=.2,uf=250,cf=.005,hf=.045,ff=9,df=1.8,pf=75,Ci=.85,gf=0,_f=.33,mf=.66,Df=1,Ef=1.05,en=(r,t)=>r.map(e=>({...e,pos:e.pos*t})),Ql=[{power:gf,stops:en([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:_f,stops:en([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:mf,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:Df,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],Ci)},{power:Ef,stops:en([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],Ci)}],Sf=Ql[0].stops.length,yf=150,Tf=40,Af=15,Cf=20,If=50,wf=150,bf=530,Lf=370,V={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},uo={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color-base",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:1,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!1},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:V.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:V.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:V.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:V.DIMLY_LIT.amplitudeEnd,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:V.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:V.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:V.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:V.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:V.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:V.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:V.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:V.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistYellow:{numCycles:2,periodStart:.15,periodEnd:.12,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.6,unselected:.4},peakOpacity:{selected:.9,unselected:.7},finalOpacity:{selected:.6,unselected:.4},initialSize:{selected:"8px",unselected:"5px"},peakSize:{selected:"12px",unselected:"8px"},finalSize:{selected:"8px",unselected:"5px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistOrange:{numCycles:2,periodStart:.18,periodEnd:.15,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.65,unselected:.45},peakOpacity:{selected:1,unselected:.8},finalOpacity:{selected:.65,unselected:.45},initialSize:{selected:"9px",unselected:"6px"},peakSize:{selected:"14px",unselected:"10px"},finalSize:{selected:"9px",unselected:"6px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistRedThenSolid:{numCycles:1,periodStart:.4,periodEnd:.4,onDurationRatio:.6,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.7,unselected:.7},peakOpacity:{selected:1,unselected:1},finalOpacity:{selected:.8,unselected:.8},initialSize:{selected:"10px",unselected:"10px"},peakSize:{selected:"16px",unselected:"16px"},finalSize:{selected:"10px",unselected:"10px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function vf(r){const t=uo[r];if(!t)return .2;let e=0;for(let n=0;n<t.numCycles;n++){const s=t.numCycles>1?n/(t.numCycles-1):1,o=t.periodStart+s*(t.periodEnd-t.periodStart);e+=o}const i=Math.max(.15,t.periodEnd*1.5);return e+=i,e}const Pf={ENABLED:!0,PERIOD:2.5,ELIGIBILITY_CLASS:"is-energized",GLOW_OPACITY_RANGE:[.4,.6],GLOW_SCALE_RANGE:[.95,1.05]},Of={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},xf={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},Mf=["Commanding","Analytical","Focused","Advisory","Introspective","Evaluative"],Ff={INTENSITY_BARS:36,INTENSITY_DOTS:36,MOOD_MAJOR_BLOCKS:6,MOOD_FINE_DOTS:36,RESONANCE_IDLE_DELAY_MS:250},Rf={MAX_STAGE:3,LENS_ANIMATION_EASING_DEFAULT:"power2.inOut",STAGE_1:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistYellow",BUTTON_FLASH_GLOW_COLOR:"oklch(0.85 0.15 85)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S1",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:82.364,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:82.364},STAGE_2:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistOrange",BUTTON_FLASH_GLOW_COLOR:"oklch(0.75 0.16 50)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S2",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:60.636,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:60.636},STAGE_3:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistRedThenSolid",BUTTON_FLASH_GLOW_COLOR:"oklch(0.65 0.22 25)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S3",LENS_ANIM_DURATION_S:1,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:40.6,DIAL_B_POWER_TARGET_MODE:"absolute_100",DIAL_B_POWER_VALUE:1,HUE_ASSIGN_TARGET_HUE:40.6}},Nf=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:uo,APP_LOAD_FADE_IN_DURATION:Yh,AUTO_PLAY_START_DELAY:Vh,BODY_FADE_IN_DURATION:zh,DEBOUNCE_DELAY:Oh,DEFAULT_ASSIGNMENT_SELECTIONS:ye,DEFAULT_DIAL_A_HUE:pi,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:Nh,DIAL_CANVAS_FADE_IN_DURATION:kh,DIAL_GRADIENT_SCALE_FACTOR:Rh,GSAP_BUTTON_IDLE_DURATION_MAX:Hh,GSAP_BUTTON_IDLE_DURATION_MIN:Gh,GSAP_BUTTON_IDLE_EASE:$h,GSAP_TWEEN_DURATION:Bh,GSAP_TWEEN_EASE:Uh,HARMONIC_RESONANCE_PARAMS:Pf,HIGHLIGHT_WIDTH_FACTOR:Fh,HUE_ASSIGNMENT_ROW_HUES:It,HUE_UPDATE_THRESHOLD:Ph,IDLE_LIGHT_DRIFT_PARAMS:Of,LCD_TEXT_FADE_IN_DURATION:Zh,LENS_GRADIENT_BREAKPOINTS:Ql,LENS_GRADIENT_POSITION_SCALE:Ci,LENS_HOTSPOT_HUE_OFFSET:pf,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:hf,LENS_OSCILLATION_AMPLITUDE_MIN:cf,LENS_OSCILLATION_HUE_SMOOTHING_DURATION:lf,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:df,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:ff,LENS_OSCILLATION_RESTART_DELAY:uf,LENS_OSCILLATION_SMOOTHING_DURATION:af,LENS_OSCILLATION_THRESHOLD:of,LENS_STARTUP_RAMP_DURATION:Zl,LENS_STARTUP_TARGET_POWER:Wh,MIN_PHASE_DURATION_for_STEPPING:Kh,MOOD_MATRIX_DEFINITIONS:Mf,NUM_LENS_GRADIENT_STOPS:Sf,NUM_RIDGES:xh,P3_LENS_RAMP_DURATION_S:Xh,PIXELS_PER_DEGREE_HUE:vh,PIXELS_PER_DEGREE_ROTATION:Lh,RESISTIVE_SHUTDOWN_PARAMS:Rf,RIDGE_WIDTH_FACTOR:Mh,STARTUP_BUTTON_ENERGIZE_STAGGER:sf,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:tf,STARTUP_DIM_FACTORS_ANIMATION_DURATION:Jh,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:ef,STARTUP_LCD_GROUP_APPEAR_STAGGER:nf,STARTUP_L_REDUCTION_FACTORS:Qh,STATE_TRANSITION_ECHO_PARAMS:xf,SYSTEM_READY_PHASE_DURATION:qh,TERMINAL_CURSOR_BLINK_OFF_MS:Lf,TERMINAL_CURSOR_BLINK_ON_MS:bf,TERMINAL_MAX_LINES_IN_DOM:yf,TERMINAL_NEW_LINE_DELAY_MAX_MS:wf,TERMINAL_NEW_LINE_DELAY_MIN_MS:If,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:Af,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:Cf,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:Tf,THEME_TRANSITION_DURATION:jh,V2_DISPLAY_PARAMS:Ff,estimateFlickerDuration:vf,selectorsForDimExitAnimation:rf},Symbol.toStringTag,{value:"Module"}));function kf(r,t){let e;return function(...n){const s=this,o=()=>{e=null,r.apply(s,n)};clearTimeout(e),e=setTimeout(o,t)}}function Bf(r,t){let e,i,n;return function(...s){const o=this;e?(clearTimeout(i),i=setTimeout(()=>{Date.now()-n>=t&&(r.apply(o,s),n=Date.now())},t-(Date.now()-n))):(r.apply(o,s),n=Date.now(),e=!0)}}function Lr(r,t,e){return Math.min(Math.max(r,t),e)}class Uf{constructor(){this.events={}}on(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),()=>{this.off(t,e)}}off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(i=>i!==e))}}const vr=new Uf;function le(r,t){vr.events[r]&&vr.events[r].forEach(e=>{try{e(t)}catch(i){console.error(`[AppState EMIT] Error in listener for '${r}':`,i,{payload:t})}})}let Tt={A:{id:"A",hue:pi,rotation:0,targetHue:pi,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},Pr={env:{hue:It[ye.env],isColorless:It[ye.env]===It[0]},lcd:{hue:It[ye.lcd],isColorless:It[ye.lcd]===It[0]},logo:{hue:It[ye.logo],isColorless:It[ye.logo]===It[0]},btn:{hue:It[ye.btn],isColorless:It[ye.btn]===It[0]}},ts="dim",es=0,is="idle",ns="loading",ss=-1,rs=0,Or=!1;function Gf(r){const t=Tt[r];if(t)return{...t}}function Hf(r){const t=Pr[r];if(t)return{...t}}function Jl(){return ts}function $f(){return es}function Vf(){return is}function Yf(){return ns}function zf(){return ss}function tu(){return rs}function Wf(){return Or}function co(r,t){const e=!Tt[r]||Object.keys(Tt[r]).length===0;e&&(r==="A"||r==="B")&&(Tt[r]={id:r,hue:r==="A"?pi:0,rotation:0,targetHue:r==="A"?pi:0,targetRotation:0,isDragging:!1});const i={...Tt[r]};r==="A"?(t.hasOwnProperty("hue")&&(t.hue=(t.hue%360+360)%360),t.hasOwnProperty("targetHue")&&(t.targetHue=(t.targetHue%360+360)%360)):r==="B"&&(t.hasOwnProperty("hue")&&(t.hue=Lr(t.hue,0,359.999)),t.hasOwnProperty("targetHue")&&(t.targetHue=Lr(t.targetHue,0,359.999))),Object.assign(Tt[r],t),(e||i.hue!==Tt[r].hue||i.rotation!==Tt[r].rotation||i.isDragging!==Tt[r].isDragging||i.targetHue!==Tt[r].targetHue||i.targetRotation!==Tt[r].targetRotation)&&(r==="A"&&Math.abs(i.hue-Tt[r].hue)>.01,le("dialUpdated",{id:r,state:{...Tt[r]}}))}function eu(r,t){if(Pr.hasOwnProperty(r)){const e=(Number(t)%360+360)%360,i=It.length>0&&e===It[0],n=Pr[r];(n.hue!==e||n.isColorless!==i)&&({...n},n.hue=e,n.isColorless=i,le("targetColorChanged",{targetKey:r,hue:e,isColorless:i}))}}function iu(r){["dim","dark","light"].includes(r)&&ts!==r&&(ts=r,le("themeChanged",ts))}function Xf(r){const t=Math.max(0,Math.min(r/100,1));Math.abs(es-t)>1e-4&&(es=t,le("trueLensPowerChanged",es))}function jf(r){["idle","dragging","settling"].includes(r)&&is!==r&&(is=r,le("dialBInteractionChange",is))}function nu(r){["loading","starting-up","interactive","error"].includes(r)&&ns!==r&&(ns=r,le("appStatusChanged",ns))}function qf(r){typeof r=="number"&&ss!==r&&(ss=r,le("startupPhaseNumberChanged",ss))}function su(r){if(typeof r=="number"&&rs!==r){const t=rs;rs=r,le("resistiveShutdownStageChanged",{oldStage:t,newStage:r})}}function Kf(r){typeof r=="boolean"&&Or!==r&&(Or=r,le("mainPowerOffButtonDisabledChanged",{isDisabled:r}))}function ru(r,t){return typeof t!="function"?()=>{}:vr.on(r,t)}(!Tt.A||Object.keys(Tt.A).length===0)&&co("A",{hue:pi,rotation:0,targetHue:pi,targetRotation:0,isDragging:!1});(!Tt.B||Object.keys(Tt.B).length===0)&&co("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});const Zf=Object.freeze(Object.defineProperty({__proto__:null,emit:le,getAppStatus:Yf,getCurrentStartupPhaseNumber:zf,getCurrentTheme:Jl,getDialBInteractionState:Vf,getDialState:Gf,getIsMainPowerOffButtonDisabled:Wf,getResistiveShutdownStage:tu,getTargetColorProperties:Hf,getTrueLensPower:$f,setAppStatus:nu,setCurrentStartupPhaseNumber:qf,setDialBInteractionState:jf,setIsMainPowerOffButtonDisabled:Kf,setResistiveShutdownStage:su,setTargetColorProperties:eu,setTheme:iu,setTrueLensPower:Xf,subscribe:ru,updateDialState:co},Symbol.toStringTag,{value:"Module"})),Wn=new Map,v={register(r,t){Wn.has(r)&&console.warn(`[ServiceLocator] Service "${r}" is being overwritten.`),Wn.set(r,t)},get(r){if(!Wn.has(r))throw new Error(`[ServiceLocator] Service "${r}" not found. Ensure it was registered in main.js before being accessed.`);return Wn.get(r)}};function Qf(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Jf(){const r=Qf();if(r.__xstate__)return r.__xstate__}const td=r=>{if(typeof window>"u")return;const t=Jf();t&&t.register(r)};class ua{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const ou=".",ed="",au="",id="#",nd="*",lu="xstate.init",Ds="xstate.stop";function sd(r,t){return{type:`xstate.after.${r}.${t}`}}function xr(r,t){return{type:`xstate.done.state.${r}`,output:t}}function rd(r,t){return{type:`xstate.done.actor.${r}`,output:t,actorId:r}}function od(r,t){return{type:`xstate.error.actor.${r}`,error:t,actorId:r}}function uu(r){return{type:lu,input:r}}function De(r){setTimeout(()=>{throw r})}const ad=typeof Symbol=="function"&&Symbol.observable||"@@observable";function cu(r,t){const e=ca(r),i=ca(t);return typeof i=="string"?typeof e=="string"?i===e:!1:typeof e=="string"?e in i:Object.keys(e).every(n=>n in i?cu(e[n],i[n]):!1)}function ho(r){if(fu(r))return r;const t=[];let e="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:e+=r[i+1],i++;continue;case 46:t.push(e),e="";continue}e+=r[i]}return t.push(e),t}function ca(r){if($d(r))return r.value;if(typeof r!="string")return r;const t=ho(r);return ld(t)}function ld(r){if(r.length===1)return r[0];const t={};let e=t;for(let i=0;i<r.length-1;i++)if(i===r.length-2)e[r[i]]=r[i+1];else{const n=e;e={},n[r[i]]=e}return t}function ha(r,t){const e={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];e[s]=t(r[s],s,r,n)}return e}function hu(r){return fu(r)?r:[r]}function Ge(r){return r===void 0?[]:hu(r)}function Mr(r,t,e,i){return typeof r=="function"?r({context:t,event:e,self:i}):r}function fu(r){return Array.isArray(r)}function ud(r){return r.type.startsWith("xstate.error.actor")}function Ii(r){return hu(r).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function du(r){if(!(r===void 0||r===ed))return Ge(r)}function Fr(r,t,e){var s,o,a;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(o=i?r.error:t)==null?void 0:o.bind(n),complete:(a=i?r.complete:e)==null?void 0:a.bind(n)}}function fa(r,t){return`${t}.${r}`}function fo(r,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return r.implementations.actors[t];const[,i,n]=e,o=r.getStateNodeById(n).config.invoke;return(Array.isArray(o)?o[i]:o).src}function da(r,t){return`${r.sessionId}.${t}`}let cd=0;function hd(r,t){const e=new Map,i=new Map,n=new WeakMap,s=new Set,o={},{clock:a,logger:l}=t,c={schedule:(d,u,g,p,_=Math.random().toString(36).slice(2))=>{const S={source:d,target:u,event:g,delay:p,id:_,startedAt:Date.now()},T=da(d,_);f._snapshot._scheduledEvents[T]=S;const A=a.setTimeout(()=>{delete o[T],delete f._snapshot._scheduledEvents[T],f._relay(d,u,g)},p);o[T]=A},cancel:(d,u)=>{const g=da(d,u),p=o[g];delete o[g],delete f._snapshot._scheduledEvents[g],p!==void 0&&a.clearTimeout(p)},cancelAll:d=>{for(const u in f._snapshot._scheduledEvents){const g=f._snapshot._scheduledEvents[u];g.source===d&&c.cancel(d,g.id)}}},h=d=>{if(!s.size)return;const u={...d,rootId:r.sessionId};s.forEach(g=>{var p;return(p=g.next)==null?void 0:p.call(g,u)})},f={_snapshot:{_scheduledEvents:((t==null?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${cd++}`,_register:(d,u)=>(e.set(d,u),d),_unregister:d=>{e.delete(d.sessionId);const u=n.get(d);u!==void 0&&(i.delete(u),n.delete(d))},get:d=>i.get(d),_set:(d,u)=>{const g=i.get(d);if(g&&g!==u)throw new Error(`Actor with system ID '${d}' already exists.`);i.set(d,u),n.set(u,d)},inspect:d=>{const u=Fr(d);return s.add(u),{unsubscribe(){s.delete(u)}}},_sendInspectionEvent:h,_relay:(d,u,g)=>{f._sendInspectionEvent({type:"@xstate.event",sourceRef:d,actorRef:u,event:g}),u._send(g)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...f._snapshot._scheduledEvents}}),start:()=>{const d=f._snapshot._scheduledEvents;f._snapshot._scheduledEvents={};for(const u in d){const{source:g,target:p,event:_,delay:S,id:T}=d[u];c.schedule(g,p,_,S,T)}},_clock:a,_logger:l};return f}let qs=!1;const po=1;let Pt=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const fd={clock:{setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class dd{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new ua(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Pt.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...fd,...e},{clock:n,logger:s,parent:o,syncSnapshot:a,id:l,systemId:c,inspect:h}=i;this.system=o?o.system:hd(this,{clock:n,logger:s}),h&&!o&&this.system.inspect(Fr(h)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=(e==null?void 0:e.logger)??this.system._logger,this.clock=(e==null?void 0:e.clock)??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=i,this.src=i.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:f=>{this._deferred.push(f)},system:this.system,stopChild:f=>{if(f._parent!==this)throw new Error(`Cannot stop child actor ${f.id} of ${this.id} because it is not a child`);f._stop()},emit:f=>{const d=this.eventListeners.get(f.type),u=this.eventListeners.get("*");if(!d&&!u)return;const g=[...d?d.values():[],...u?u.values():[]];for(const p of g)p(f)},actionExecutor:f=>{const d=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:f.type,params:f.params}}),!f.exec)return;const u=qs;try{qs=!0,f.exec(f.info,f.params)}finally{qs=u}};this._processingStatus===Pt.Running?d():this._deferred.push(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((e==null?void 0:e.snapshot)??(e==null?void 0:e.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){var e;try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,(e=this.options)==null?void 0:e.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(t,e){var n,s;this._snapshot=t;let i;for(;i=this._deferred.shift();)try{i()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(n=o.next)==null||n.call(o,t)}catch(a){De(a)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,t)}catch(a){De(a)}this._stopProcedure(),this._complete(),this._doneEvent=rd(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,i){var s;const n=Fr(t,e,i);if(this._processingStatus!==Pt.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(o){De(o)}break;case"error":{const o=this._snapshot.error;if(!n.error)De(o);else try{n.error(o)}catch(a){De(a)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(t,e){let i=this.eventListeners.get(t);i||(i=new Set,this.eventListeners.set(t,i));const n=e.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Pt.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Pt.Running;const t=uu(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,i;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(e,t),t.type===Ds&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Pt.Stopped?this:(this.mailbox.clear(),this._processingStatus===Pt.NotStarted?(this._processingStatus=Pt.Stopped,this):(this.mailbox.enqueue({type:Ds}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var t;for(const e of this.observers)try{(t=e.complete)==null||t.call(e)}catch(i){De(i)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||De(t);return}let e=!1;for(const i of this.observers){const n=i.error;e||(e=!n);try{n==null||n(t)}catch(s){De(s)}}this.observers.clear(),e&&De(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,od(this.id,t))}_stopProcedure(){return this._processingStatus!==Pt.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new ua(this._process.bind(this)),this._processingStatus=Pt.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Pt.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:td)(this)}toJSON(){return{xstate$$type:po,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[ad](){return this}getSnapshot(){return this._snapshot}}function xn(r,...[t]){return new dd(r,t)}const pd=xn;function gd(r,t,e,i,{sendId:n}){const s=typeof n=="function"?n(e,i):n;return[t,{sendId:s},void 0]}function _d(r,t){r.defer(()=>{r.system.scheduler.cancel(r.self,t.sendId)})}function md(r){function t(e,i){}return t.type="xstate.cancel",t.sendId=r,t.resolve=gd,t.execute=_d,t}function Dd(r,t,e,i,{id:n,systemId:s,src:o,input:a,syncSnapshot:l}){const c=typeof o=="string"?fo(t.machine,o):o,h=typeof n=="function"?n(e):n;let f,d;return c&&(d=typeof a=="function"?a({context:t.context,event:e.event,self:r.self}):a,f=xn(c,{id:h,src:o,parent:r.self,syncSnapshot:l,systemId:s,input:d})),[gi(t,{children:{...t.children,[h]:f}}),{id:n,systemId:s,actorRef:f,src:o,input:d},void 0]}function Ed(r,{actorRef:t}){t&&r.defer(()=>{t._processingStatus!==Pt.Stopped&&t.start()})}function Sd(...[r,{id:t,systemId:e,input:i,syncSnapshot:n=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=t,s.systemId=e,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=Dd,s.execute=Ed,s}function yd(r,t,e,i,{actorRef:n}){const s=typeof n=="function"?n(e,i):n,o=typeof s=="string"?t.children[s]:s;let a=t.children;return o&&(a={...a},delete a[o.id]),[gi(t,{children:a}),o,void 0]}function Td(r,t){if(t){if(r.system._unregister(t),t._processingStatus!==Pt.Running){r.stopChild(t);return}r.defer(()=>{r.stopChild(t)})}}function pu(r){function t(e,i){}return t.type="xstate.stopChild",t.actorRef=r,t.resolve=yd,t.execute=Td,t}function go(r,t,e,i){const{machine:n}=i,s=typeof r=="function",o=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return go(o,t,e,i);const a={context:t,event:e},l=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:t,event:e}):r.params:void 0;return"check"in o?o.check(i,a,o):o(a,l)}const _o=r=>r.type==="atomic"||r.type==="final";function zi(r){return Object.values(r.states).filter(t=>t.type!=="history")}function Bn(r,t){const e=[];if(t===r)return e;let i=r.parent;for(;i&&i!==t;)e.push(i),i=i.parent;return e}function Es(r){const t=new Set(r),e=_u(t);for(const i of t)if(i.type==="compound"&&(!e.get(i)||!e.get(i).length))pa(i).forEach(n=>t.add(n));else if(i.type==="parallel"){for(const n of zi(i))if(n.type!=="history"&&!t.has(n)){const s=pa(n);for(const o of s)t.add(o)}}for(const i of t){let n=i.parent;for(;n;)t.add(n),n=n.parent}return t}function gu(r,t){const e=t.get(r);if(!e)return{};if(r.type==="compound"){const n=e[0];if(n){if(_o(n))return n.key}else return{}}const i={};for(const n of e)i[n.key]=gu(n,t);return i}function _u(r){const t=new Map;for(const e of r)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function mu(r,t){const e=Es(t);return gu(r,_u(e))}function mo(r,t){return t.type==="compound"?zi(t).some(e=>e.type==="final"&&r.has(e)):t.type==="parallel"?zi(t).every(e=>mo(r,e)):t.type==="final"}const Is=r=>r[0]===id;function Ad(r,t){return r.transitions.get(t)||[...r.transitions.keys()].filter(i=>{if(i===nd)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=t.split(".");for(let o=0;o<n.length;o++){const a=n[o],l=s[o];if(a==="*")return o===n.length-1;if(a!==l)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function Cd(r){const t=r.config.after;if(!t)return[];const e=n=>{const s=sd(n,r.id),o=s.type;return r.entry.push(Iu(s,{id:o,delay:n})),r.exit.push(md(o)),o};return Object.keys(t).flatMap(n=>{const s=t[n],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+n)?n:+n,l=e(a);return Ge(o).map(c=>({...c,event:l,delay:a}))}).map(n=>{const{delay:s}=n;return{...ni(r,n.event,n),delay:s}})}function ni(r,t,e){const i=du(e.target),n=e.reenter??!1,s=bd(r,i),o={...e,actions:Ge(e.actions),guard:e.guard,target:s,source:r,reenter:n,eventType:t,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function Id(r){const t=new Map;if(r.config.on)for(const e of Object.keys(r.config.on)){if(e===au)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[e];t.set(e,Ii(i).map(n=>ni(r,e,n)))}if(r.config.onDone){const e=`xstate.done.state.${r.id}`;t.set(e,Ii(r.config.onDone).map(i=>ni(r,e,i)))}for(const e of r.invoke){if(e.onDone){const i=`xstate.done.actor.${e.id}`;t.set(i,Ii(e.onDone).map(n=>ni(r,i,n)))}if(e.onError){const i=`xstate.error.actor.${e.id}`;t.set(i,Ii(e.onError).map(n=>ni(r,i,n)))}if(e.onSnapshot){const i=`xstate.snapshot.${e.id}`;t.set(i,Ii(e.onSnapshot).map(n=>ni(r,i,n)))}}for(const e of r.after){let i=t.get(e.eventType);i||(i=[],t.set(e.eventType,i)),i.push(e)}return t}function wd(r,t){const e=typeof t=="string"?r.states[t]:t?r.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${r.id}`);const i={source:r,actions:!t||typeof t=="string"?[]:Ge(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...i,source:`#${r.id}`,target:e?[`#${e.id}`]:[]})};return i}function bd(r,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Is(e))return r.machine.getStateNodeById(e);const i=e[0]===ou;if(i&&!r.parent)return Mn(r,e.slice(1));const n=i?r.key+e:e;if(r.parent)try{return Mn(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function Du(r){const t=du(r.config.target);return t?{target:t.map(e=>typeof e=="string"?Mn(r.parent,e):e)}:r.parent.initial}function ri(r){return r.type==="history"}function pa(r){const t=Eu(r);for(const e of t)for(const i of Bn(e,r))t.add(i);return t}function Eu(r){const t=new Set;function e(i){if(!t.has(i)){if(t.add(i),i.type==="compound")e(i.initial.target[0]);else if(i.type==="parallel")for(const n of zi(i))e(n)}}return e(r),t}function Wi(r,t){if(Is(t))return r.machine.getStateNodeById(t);if(!r.states)throw new Error(`Unable to retrieve child state '${t}' from '${r.id}'; no child states exist.`);const e=r.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${r.id}'`);return e}function Mn(r,t){if(typeof t=="string"&&Is(t))try{return r.machine.getStateNodeById(t)}catch{}const e=ho(t).slice();let i=r;for(;e.length;){const n=e.shift();if(!n.length)break;i=Wi(i,n)}return i}function Ss(r,t){if(typeof t=="string"){const n=r.states[t];if(!n)throw new Error(`State '${t}' does not exist on '${r.id}'`);return[r,n]}const e=Object.keys(t),i=e.map(n=>Wi(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,e.reduce((n,s)=>{const o=Wi(r,s);if(!o)return n;const a=Ss(o,t[s]);return n.concat(a)},[]))}function Ld(r,t,e,i){const s=Wi(r,t).next(e,i);return!s||!s.length?r.next(e,i):s}function vd(r,t,e,i){const n=Object.keys(t),s=Wi(r,n[0]),o=Do(s,t[n[0]],e,i);return!o||!o.length?r.next(e,i):o}function Pd(r,t,e,i){const n=[];for(const s of Object.keys(t)){const o=t[s];if(!o)continue;const a=Wi(r,s),l=Do(a,o,e,i);l&&n.push(...l)}return n.length?n:r.next(e,i)}function Do(r,t,e,i){return typeof t=="string"?Ld(r,t,e,i):Object.keys(t).length===1?vd(r,t,e,i):Pd(r,t,e,i)}function Od(r){return Object.keys(r.states).map(t=>r.states[t]).filter(t=>t.type==="history")}function We(r,t){let e=r;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function xd(r,t){const e=new Set(r),i=new Set(t);for(const n of e)if(i.has(n))return!0;for(const n of i)if(e.has(n))return!0;return!1}function Su(r,t,e){const i=new Set;for(const n of r){let s=!1;const o=new Set;for(const a of i)if(xd(Rr([n],t,e),Rr([a],t,e)))if(We(n.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)i.delete(a);i.add(n)}}return Array.from(i)}function Md(r){const[t,...e]=r;for(const i of Bn(t,void 0))if(e.every(n=>We(n,i)))return i}function Eo(r,t){if(!r.target)return[];const e=new Set;for(const i of r.target)if(ri(i))if(t[i.id])for(const n of t[i.id])e.add(n);else for(const n of Eo(Du(i),t))e.add(n);else e.add(i);return[...e]}function yu(r,t){const e=Eo(r,t);if(!e)return;if(!r.reenter&&e.every(n=>n===r.source||We(n,r.source)))return r.source;const i=Md(e.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function Rr(r,t,e){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const o=yu(s,e);s.reenter&&s.source===o&&i.add(o);for(const a of t)We(a,o)&&i.add(a)}return[...i]}function Fd(r,t){if(r.length!==t.size)return!1;for(const e of r)if(!t.has(e))return!1;return!0}function Nr(r,t,e,i,n,s){if(!r.length)return t;const o=new Set(t._nodes);let a=t.historyValue;const l=Su(r,o,a);let c=t;n||([c,a]=Bd(c,i,e,l,o,a,s,e.actionExecutor)),c=Xi(c,i,e,l.flatMap(f=>f.actions),s,void 0),c=Nd(c,i,e,l,o,s,a,n);const h=[...o];c.status==="done"&&(c=Xi(c,i,e,h.sort((f,d)=>d.order-f.order).flatMap(f=>f.exit),s,void 0));try{return a===t.historyValue&&Fd(t._nodes,o)?c:gi(c,{_nodes:h,historyValue:a})}catch(f){throw f}}function Rd(r,t,e,i,n){if(i.output===void 0)return;const s=xr(n.id,n.output!==void 0&&n.parent?Mr(n.output,r.context,t,e.self):void 0);return Mr(i.output,r.context,s,e.self)}function Nd(r,t,e,i,n,s,o,a){let l=r;const c=new Set,h=new Set;kd(i,o,h,c),a&&h.add(r.machine.root);const f=new Set;for(const d of[...c].sort((u,g)=>u.order-g.order)){n.add(d);const u=[];u.push(...d.entry);for(const g of d.invoke)u.push(Sd(g.src,{...g,syncSnapshot:!!g.onSnapshot}));if(h.has(d)){const g=d.initial.actions;u.push(...g)}if(l=Xi(l,t,e,u,s,d.invoke.map(g=>g.id)),d.type==="final"){const g=d.parent;let p=(g==null?void 0:g.type)==="parallel"?g:g==null?void 0:g.parent,_=p||d;for((g==null?void 0:g.type)==="compound"&&s.push(xr(g.id,d.output!==void 0?Mr(d.output,l.context,t,e.self):void 0));(p==null?void 0:p.type)==="parallel"&&!f.has(p)&&mo(n,p);)f.add(p),s.push(xr(p.id)),_=p,p=p.parent;if(p)continue;l=gi(l,{status:"done",output:Rd(l,t,e,l.machine.root,_)})}}return l}function kd(r,t,e,i){for(const n of r){const s=yu(n,t);for(const a of n.target||[])!ri(a)&&(n.source!==a||n.source!==s||n.reenter)&&(i.add(a),e.add(a)),vi(a,t,e,i);const o=Eo(n,t);for(const a of o){const l=Bn(a,s);(s==null?void 0:s.type)==="parallel"&&l.push(s),Tu(i,t,e,l,!n.source.parent&&n.reenter?void 0:s)}}}function vi(r,t,e,i){var n;if(ri(r))if(t[r.id]){const s=t[r.id];for(const o of s)i.add(o),vi(o,t,e,i);for(const o of s)Ks(o,r.parent,i,t,e)}else{const s=Du(r);for(const o of s.target)i.add(o),s===((n=r.parent)==null?void 0:n.initial)&&e.add(r.parent),vi(o,t,e,i);for(const o of s.target)Ks(o,r.parent,i,t,e)}else if(r.type==="compound"){const[s]=r.initial.target;ri(s)||(i.add(s),e.add(s)),vi(s,t,e,i),Ks(s,r,i,t,e)}else if(r.type==="parallel")for(const s of zi(r).filter(o=>!ri(o)))[...i].some(o=>We(o,s))||(ri(s)||(i.add(s),e.add(s)),vi(s,t,e,i))}function Tu(r,t,e,i,n){for(const s of i)if((!n||We(s,n))&&r.add(s),s.type==="parallel")for(const o of zi(s).filter(a=>!ri(a)))[...r].some(a=>We(a,o))||(r.add(o),vi(o,t,e,r))}function Ks(r,t,e,i,n){Tu(e,i,n,Bn(r,t))}function Bd(r,t,e,i,n,s,o,a){let l=r;const c=Rr(i,n,s);c.sort((f,d)=>d.order-f.order);let h;for(const f of c)for(const d of Od(f)){let u;d.history==="deep"?u=g=>_o(g)&&We(g,f):u=g=>g.parent===f,h??(h={...s}),h[d.id]=Array.from(n).filter(u)}for(const f of c)l=Xi(l,t,e,[...f.exit,...f.invoke.map(d=>pu(d.id))],o,void 0),n.delete(f);return[l,h||s]}function Ud(r,t){return r.implementations.actions[t]}function Au(r,t,e,i,n,s){const{machine:o}=r;let a=r;for(const l of i){const c=typeof l=="function",h=c?l:Ud(o,typeof l=="string"?l:l.type),f={context:a.context,event:t,self:e.self,system:e.system},d=c||typeof l=="string"?void 0:"params"in l?typeof l.params=="function"?l.params({context:a.context,event:t}):l.params:void 0;if(!h||!("resolve"in h)){e.actionExecutor({type:typeof l=="string"?l:typeof l=="object"?l.type:l.name||"(anonymous)",info:f,params:d,exec:h});continue}const u=h,[g,p,_]=u.resolve(e,a,f,d,h,n);a=g,"retryResolve"in u&&(s==null||s.push([u,p])),"execute"in u&&e.actionExecutor({type:u.type,info:f,params:p,exec:u.execute.bind(null,e,p)}),_&&(a=Au(a,t,e,_,n,s))}return a}function Xi(r,t,e,i,n,s){const o=s?[]:void 0,a=Au(r,t,e,i,{internalQueue:n,deferredActorIds:s},o);return o==null||o.forEach(([l,c])=>{l.retryResolve(e,a,c)}),a}function Zs(r,t,e,i){let n=r;const s=[];function o(c,h,f){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:h,snapshot:c,_transitions:f}),s.push(c)}if(t.type===Ds)return n=gi(ga(n,t,e),{status:"stopped"}),o(n,t,[]),{snapshot:n,microstates:s};let a=t;if(a.type!==lu){const c=a,h=ud(c),f=_a(c,n);if(h&&!f.length)return n=gi(r,{status:"error",error:c.error}),o(n,c,[]),{snapshot:n,microstates:s};n=Nr(f,r,e,a,!1,i),o(n,c,f)}let l=!0;for(;n.status==="active";){let c=l?Gd(n,a):[];const h=c.length?n:void 0;if(!c.length){if(!i.length)break;a=i.shift(),c=_a(a,n)}n=Nr(c,n,e,a,!1,i),l=n!==h,o(n,a,c)}return n.status!=="active"&&ga(n,a,e),{snapshot:n,microstates:s}}function ga(r,t,e){return Xi(r,t,e,Object.values(r.children).map(i=>pu(i)),[],void 0)}function _a(r,t){return t.machine.getTransitionData(t,r)}function Gd(r,t){const e=new Set,i=r._nodes.filter(_o);for(const n of i)t:for(const s of[n].concat(Bn(n,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||go(o.guard,r.context,t,r)){e.add(o);break t}}return Su(Array.from(e),new Set(r._nodes),r.historyValue)}function Hd(r,t){const e=Es(Ss(r,t));return mu(r,[...e])}function $d(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Vd=function(t){return cu(t,this.value)},Yd=function(t){return this.tags.has(t)},zd=function(t){const e=this.machine.getTransitionData(this,t);return!!(e!=null&&e.length)&&e.some(i=>i.target!==void 0||i.actions.length)},Wd=function(){const{_nodes:t,tags:e,machine:i,getMeta:n,toJSON:s,can:o,hasTag:a,matches:l,...c}=this;return{...c,tags:Array.from(e)}},Xd=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function os(r,t){return{status:r.status,output:r.output,error:r.error,machine:t,context:r.context,_nodes:r._nodes,value:mu(t.root,r._nodes),tags:new Set(r._nodes.flatMap(e=>e.tags)),children:r.children,historyValue:r.historyValue||{},matches:Vd,hasTag:Yd,can:zd,getMeta:Xd,toJSON:Wd}}function gi(r,t={}){return os({...r,...t},r.machine)}function jd(r){if(typeof r!="object"||r===null)return{};const t={};for(const e in r){const i=r[e];Array.isArray(i)&&(t[e]=i.map(n=>({id:n.id})))}return t}function qd(r,t){const{_nodes:e,tags:i,machine:n,children:s,context:o,can:a,hasTag:l,matches:c,getMeta:h,toJSON:f,...d}=r,u={};for(const p in s){const _=s[p];u[p]={snapshot:_.getPersistedSnapshot(t),src:_.src,systemId:_._systemId,syncSnapshot:_._syncSnapshot}}return{...d,context:Cu(o),children:u,historyValue:jd(d.historyValue)}}function Cu(r){let t;for(const e in r){const i=r[e];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)t??(t=Array.isArray(r)?r.slice():{...r}),t[e]={xstate$$type:po,id:i.id};else{const n=Cu(i);n!==i&&(t??(t=Array.isArray(r)?r.slice():{...r}),t[e]=n)}}return t??r}function Kd(r,t,e,i,{event:n,id:s,delay:o},{internalQueue:a}){const l=t.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const c=typeof n=="function"?n(e,i):n;let h;if(typeof o=="string"){const f=l&&l[o];h=typeof f=="function"?f(e,i):f}else h=typeof o=="function"?o(e,i):o;return typeof h!="number"&&a.push(c),[t,{event:c,id:s,delay:h},void 0]}function Zd(r,t){const{event:e,delay:i,id:n}=t;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,e,i,n)});return}}function Iu(r,t){function e(i,n){}return e.type="xstate.raise",e.event=r,e.id=t==null?void 0:t.id,e.delay=t==null?void 0:t.delay,e.resolve=Kd,e.execute=Zd,e}const ma="xstate.promise.resolve",Da="xstate.promise.reject",Xn=new WeakMap;function Qd(r){return{config:r,transition:(e,i,n)=>{var s;if(e.status!=="active")return e;switch(i.type){case ma:{const o=i.data;return{...e,status:"done",output:o,input:void 0}}case Da:return{...e,status:"error",error:i.data,input:void 0};case Ds:return(s=Xn.get(n.self))==null||s.abort(),{...e,status:"stopped",input:void 0};default:return e}},start:(e,{self:i,system:n,emit:s})=>{if(e.status!=="active")return;const o=new AbortController;Xn.set(i,o),Promise.resolve(r({input:e.input,system:n,self:i,signal:o.signal,emit:s})).then(l=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:ma,data:l}))},l=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:Da,data:l}))})},getInitialSnapshot:(e,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:e=>e,restoreSnapshot:e=>e}}function Jd(r,{machine:t,context:e},i,n){const s=(o,a)=>{if(typeof o=="string"){const l=fo(t,o);if(!l)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const c=xn(l,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:typeof(a==null?void 0:a.input)=="function"?a.input({context:e,event:i,self:r.self}):a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId});return n[c.id]=c,c}else return xn(o,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId})};return(o,a)=>{const l=s(o,a);return n[l.id]=l,r.defer(()=>{l._processingStatus!==Pt.Stopped&&l.start()}),l}}function tp(r,t,e,i,{assignment:n}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:t.context,event:e.event,spawn:Jd(r,t,e.event,s),self:r.self,system:r.system};let a={};if(typeof n=="function")a=n(o,i);else for(const c of Object.keys(n)){const h=n[c];a[c]=typeof h=="function"?h(o,i):h}const l=Object.assign({},t.context,a);return[gi(t,{context:l,children:Object.keys(s).length?{...t.children,...s}:t.children}),void 0,void 0]}function ei(r){function t(e,i){}return t.type="xstate.assign",t.assignment=r,t.resolve=tp,t}const Ea=new WeakMap;function Ti(r,t,e){let i=Ea.get(r);return i?t in i||(i[t]=e()):(i={[t]:e()},Ea.set(r,i)),i[t]}const ep={},nn=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class yn{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(ou),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ha(this.config.states,(i,n)=>new yn(i,{_parent:this,_key:n,_machine:this.machine})):ep,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Ge(this.config.entry).slice(),this.exit=Ge(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Ge(t.tags).slice()}_initialize(){this.transitions=Id(this),this.config.always&&(this.always=Ii(this.config.always).map(t=>ni(this,au,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(nn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(nn),eventType:null})}:void 0,history:this.history,states:ha(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(nn)})),entry:this.entry.map(nn),exit:this.exit.map(nn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Ti(this,"invoke",()=>Ge(this.config.invoke).map((t,e)=>{const{src:i,systemId:n}=t,s=t.id??fa(this.id,e),o=typeof i=="string"?i:`xstate.invoke.${fa(this.id,e)}`;return{...t,src:o,id:s,systemId:n,toJSON(){const{onDone:a,onError:l,...c}=t;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return Ti(this,"on",()=>[...this.transitions].flatMap(([e,i])=>i.map(n=>[e,n])).reduce((e,[i,n])=>(e[i]=e[i]||[],e[i].push(n),e),{}))}get after(){return Ti(this,"delayedTransitions",()=>Cd(this))}get initial(){return Ti(this,"initial",()=>wd(this,this.config.initial))}next(t,e){const i=e.type,n=[];let s;const o=Ti(this,`candidates-${i}`,()=>Ad(this,i));for(const a of o){const{guard:l}=a,c=t.context;let h=!1;try{h=!l||go(l,c,e,t)}catch(f){const d=typeof l=="string"?l:typeof l=="object"?l.type:void 0;throw new Error(`Unable to evaluate guard ${d?`'${d}' `:""}in transition for event '${i}' in state node '${this.id}':
${f.message}`)}if(h){n.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return Ti(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const i of Object.keys(t)){const n=t[i];if(n.states)for(const s of n.events)e.add(`${s}`)}return Array.from(e)})}get ownEvents(){const t=new Set([...this.transitions.keys()].filter(e=>this.transitions.get(e).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(t)}}const ip="#";class So{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:(e==null?void 0:e.actors)??{},actions:(e==null?void 0:e.actions)??{},delays:(e==null?void 0:e.delays)??{},guards:(e==null?void 0:e.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new yn(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:i,actors:n,delays:s}=this.implementations;return new So(this.config,{actions:{...e,...t.actions},guards:{...i,...t.guards},actors:{...n,...t.actors},delays:{...s,...t.delays}})}resolveState(t){const e=Hd(this.root,t.value),i=Es(Ss(this.root,e));return os({_nodes:[...i],context:t.context||{},children:{},status:mo(i,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,i){return Zs(t,e,i,[]).snapshot}microstep(t,e,i){return Zs(t,e,i,[]).microstates}getTransitionData(t,e){return Do(this.root,t.value,t,e)||[]}getPreInitialState(t,e,i){const{context:n}=this.config,s=os({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?Xi(s,e,t,[ei(({spawn:a,event:l,self:c})=>n({spawn:a,input:l.input,self:c}))],i,void 0):s}getInitialSnapshot(t,e){const i=uu(e),n=[],s=this.getPreInitialState(t,i,n),o=Nr([{target:[...Eu(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,t,i,!0,n),{snapshot:a}=Zs(o,i,t,n);return a}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=ho(t),i=e.slice(1),n=Is(e[0])?e[0].slice(ip.length):e[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return Mn(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return qd(t,e)}restoreSnapshot(t,e){const i={},n=t.children;Object.keys(n).forEach(f=>{const d=n[f],u=d.snapshot,g=d.src,p=typeof g=="string"?fo(this,g):g;if(!p)return;const _=xn(p,{id:f,parent:e.self,syncSnapshot:d.syncSnapshot,snapshot:u,src:g,systemId:d.systemId});i[f]=_});function s(f,d){try{return d.machine.getStateNodeById(f)}catch{try{return Mn(d,f.split("."))}catch{return f}}}function o(f,d){if(!f||typeof f!="object")return{};const u={};for(const g in f){const p=f[g];u[g]=p.map(_=>{if(_ instanceof yn)return _;if(typeof _=="object"&&"id"in _&&typeof _.id=="string"){const S=s(_.id,d);if(S instanceof yn)return S}}).filter(_=>_!==void 0),u[g].length===0&&delete u[g]}return u}const a=o(t.historyValue,this.root),l=os({...t,children:i,_nodes:Array.from(Es(Ss(this.root,t.value))),historyValue:a},this),c=new Set;function h(f,d){if(!c.has(f)){c.add(f);for(const u in f){const g=f[u];if(g&&typeof g=="object"){if("xstate$$type"in g&&g.xstate$$type===po){f[u]=d[g.id];continue}h(g,d)}}}}return h(l.context,i),l}}function np(r,t){return new So(r,t)}const sp={phase:0,name:"IDLE_BASELINE",duration:.5,animations:[]},rp={phase:1,name:"EMERGENCY_SUBSYSTEMS",terminalMessageKey:"P1_EMERGENCY_SUBSYSTEMS",duration:2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"tween",target:"body",vars:{opacity:1,duration:.3,ease:"power1.inOut"},position:0}]},op={phase:2,name:"BACKUP_POWER",terminalMessageKey:"P2_BACKUP_POWER",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["system-power"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.05,position:.1}]},ap={phase:3,name:"MAIN_POWER_ONLINE",terminalMessageKey:"P3_MAIN_POWER_ONLINE",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"Main Power On",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelectedFast",position:.1},{type:"flicker",target:"Main Power Off",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselectedFast",position:.1}]},lp={phase:4,name:"OPTICAL_CORE_REACTIVATE",terminalMessageKey:"P4_OPTICAL_CORE_REACTIVATE",duration:1.7,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"lensEnergize",position:.1}]},up={phase:5,name:"DIAGNOSTIC_INTERFACE",terminalMessageKey:"P5_DIAGNOSTIC_INTERFACE",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.275,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["skill-scan-group","fit-eval-group"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.04,position:.1}]},cp={phase:6,name:"MOOD_INTENSITY_CONTROLS",terminalMessageKey:"P6_MOOD_INTENSITY_CONTROLS",duration:1.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.225,duration:1,ease:"power1.inOut"},position:0},{type:"lcdPowerOn",target:["lcdA","lcdB"],state:"dimly-lit",profile:"lcdScreenFlickerToDimlyLit",stagger:.05,position:.2}]},hp={phase:7,name:"HUE_CORRECTION_SYSTEMS",terminalMessageKey:"P7_HUE_CORRECTION_SYSTEMS",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.075,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.008,position:.1}]},fp={phase:8,name:"EXTERNAL_LIGHTING_CONTROLS",terminalMessageKey:"P8_EXTERNAL_LIGHTING_CONTROLS",duration:1.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:0,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["light"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.03,position:.1}]},dp={phase:9,name:"AUX_LIGHTING_LOW",terminalMessageKey:"P9_AUX_LIGHTING_LOW",duration:1,animations:[{type:"flicker",target:"Auxiliary Light Low",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelected",position:.1},{type:"flicker",target:"Auxiliary Light High",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselected",position:.1}]},pp={phase:10,name:"THEME_TRANSITION",duration:1.5,animations:[{type:"call",function:(r,t)=>{[t.lcdA,t.lcdB,t.terminalContainer].forEach(i=>{i&&r.setLcdState(i,"active",{phaseContext:"P10_ThemeTransition"})})},deps:["lcdUpdater","domElements"],position:0},{type:"call",function:(r,t,e)=>{document.querySelectorAll(t.selectorsForDimExitAnimation).forEach(i=>{i.classList.add("animate-on-dim-exit")}),r.body.classList.add("is-transitioning-from-dim"),e.setTheme("dark")},deps:["domElements","config","appState"],position:.05},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn","skill-scan-group","fit-eval-group"],state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLit",stagger:.03,position:.1}]},gp={phase:11,name:"SYSTEM_OPERATIONAL",terminalMessageKey:"P11_SYSTEM_OPERATIONAL",duration:.5,animations:[{type:"call",function:(r,t)=>{r.setGroupSelected("system-power","on"),r.setGroupSelected("light","off"),Object.keys(t.DEFAULT_ASSIGNMENT_SELECTIONS).forEach(e=>{r.setGroupSelected(e,t.DEFAULT_ASSIGNMENT_SELECTIONS[e].toString())})},deps:["buttonManager","config"],position:0}]},kr=[sp,rp,op,ap,lp,up,cp,hp,fp,dp,pp,gp],_p=Qd(async({input:r})=>v.get("phaseRunner").run(r.phaseConfig)),mp=np({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{currentPhase:-1,isStepThroughMode:!0,errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_PHASE",actions:ei({isStepThroughMode:({event:r})=>r.isStepThroughMode,currentPhase:0,themeTransitionCleanupPerformed:!1,errorInfo:null})}}},RUNNING_PHASE:{entry:[({context:r})=>{r.currentPhase===11&&!r.themeTransitionCleanupPerformed&&v.get("startupSequenceManager")._performThemeTransitionCleanup()},ei({themeTransitionCleanupPerformed:({context:r})=>r.currentPhase===11?!0:r.themeTransitionCleanupPerformed})],invoke:{id:"phaseRunnerService",src:_p,input:({context:r})=>({phaseConfig:kr[r.currentPhase]}),onDone:{actions:ei({currentPhase:({context:r})=>r.currentPhase+1}),target:"CHECK_SEQUENCE_STATUS"},onError:{target:"ERROR",actions:ei({errorInfo:({event:r})=>r.data})}},on:{SET_AUTO_PLAY:{actions:ei({isStepThroughMode:!1})}}},CHECK_SEQUENCE_STATUS:{always:[{target:"COMPLETE",guard:({context:r})=>r.currentPhase>=kr.length},{target:"RUNNING_PHASE",guard:({context:r})=>!r.isStepThroughMode},{target:"PAUSED"}]},PAUSED:{on:{NEXT_STEP_REQUESTED:{target:"RUNNING_PHASE"},SET_AUTO_PLAY:{actions:[ei({isStepThroughMode:!1}),Iu({type:"NEXT_STEP_REQUESTED"})]}}},COMPLETE:{type:"final",entry:()=>v.get("appState").setAppStatus("interactive")},ERROR:{entry:[({context:r})=>console.error("[FSM Error]",r.errorInfo),()=>v.get("appState").setAppStatus("error"),({context:r})=>{var t;return v.get("appState").emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",data:{content:((t=r.errorInfo)==null?void 0:t.message)||"Unknown error"}})}]}}});class Dp{constructor(t,e,i,n,s){if(this.element=t,this.config=e,this.gsap=i,this.appState=n,this.configModule=s,this.debugAmbient=!1,this.debugResistive=!1,this.cssIdleDriftClassName="css-idle-drifting",!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule||console.warn(`[Button CONSTRUCTOR ${this.getIdentifier()}] configModule not available at construction.`),this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=e.isSelectedByDefault||!1,this._isPermanentlyDisabled=!1,this._isResonating=!1,this.stateTransitionEchoTween=null,this._updateAriaAttributes()}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(t,e={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:o}=e,a=o||"UnknownPhase_ButtonSetState",l=this.getIdentifier(),c=t?t.split(" ").filter(u=>u):[],h=new Set(c);let f=s;if(!f){const u=new Set;Object.values(U).flatMap(p=>p.split(" ")).forEach(p=>{this.element.classList.contains(p)&&u.add(p)});const g=new Set(c);if(this._isSelected?g.add("is-selected"):g.delete("is-selected"),this._isPermanentlyDisabled?g.add(U.PERMANENTLY_DISABLED):g.delete(U.PERMANENTLY_DISABLED),u.size!==g.size)f=!0;else for(const p of g)if(!u.has(p)){f=!0;break}}if(this.debugResistive&&this.getIdentifier().includes("MAIN PWR OFF")&&t===U.PERMANENTLY_DISABLED&&console.log(`[Button ${l} setState - ${a}] Setting to PERMANENTLY_DISABLED. stateChanged: ${f}, forceState: ${s}`),!f&&!s){i||this._updateAriaAttributes();return}if(!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(U.FLICKERING);const u=Array.from(this.element.querySelectorAll(".light"));u.length>0&&this.gsap.set(u,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"})}const d=Object.values(U).flatMap(u=>u.split(" ")).filter(u=>u&&u!=="is-selected"&&u!==U.PERMANENTLY_DISABLED);[...new Set(d)].forEach(u=>{this.element.classList.contains(u)&&this.element.classList.remove(u)}),h.forEach(u=>{u!=="is-selected"&&u!==U.PERMANENTLY_DISABLED&&this.element.classList.add(u)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this._isPermanentlyDisabled?this.element.classList.add(U.PERMANENTLY_DISABLED):this.element.classList.remove(U.PERMANENTLY_DISABLED),this.currentClasses.clear(),this.element.classList.forEach(u=>this.currentClasses.add(u)),i||this._updateAriaAttributes()}_updateAriaAttributes(){const t=this._isSelected;if(this.config.type==="toggle"?this.element.setAttribute("aria-pressed",t.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",t.toString()),this._isPermanentlyDisabled)this.element.setAttribute("aria-disabled","true"),this.element.setAttribute("tabindex","-1");else{this.element.removeAttribute("aria-disabled");const e=Array.from(this.element.classList).some(i=>i===U.ENERGIZED_UNSELECTED.split(" ")[0]||i===U.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",e?"0":"-1")}}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}isPermanentlyDisabled(){return this._isPermanentlyDisabled}setSelected(t,e={}){const{skipAnimation:i=!1,phaseContext:n="ButtonSetSelected"}=e,s=this.getIdentifier();if(this._isPermanentlyDisabled&&t===!1&&this.getIdentifier().includes("MAIN PWR OFF"))this.debugResistive&&console.log(`[Button ${s} setSelected] Allowing deselect for permanently disabled OFF button during reset.`);else if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${s} setSelected] Blocked: Button is permanently disabled.`);return}let o=!1;if(this._isSelected===t){if(t&&!this.element.classList.contains("is-selected")&&(o=!0),!t&&this.element.classList.contains("is-selected")&&(o=!0),!o)return}else this._isSelected=t;let a=U.ENERGIZED_UNSELECTED;this.element.classList.contains(U.DIMLY_LIT.split(" ")[0])?a=U.DIMLY_LIT_UNSELECTED:this.element.classList.contains(U.UNLIT.split(" ")[0])?a=U.UNLIT:this.element.classList.contains(U.ENERGIZED_UNSELECTED.split(" ")[0])&&(a=U.ENERGIZED_UNSELECTED);let l=a;this._isSelected?a===U.DIMLY_LIT_UNSELECTED?l=U.DIMLY_LIT_SELECTED:(a===U.ENERGIZED_UNSELECTED||a===U.UNLIT)&&(l=U.ENERGIZED_SELECTED):a===U.DIMLY_LIT_SELECTED?l=U.DIMLY_LIT_UNSELECTED:a===U.ENERGIZED_SELECTED&&(l=U.ENERGIZED_UNSELECTED),this.setState(l,{skipAnimation:i,phaseContext:n,forceState:!0})}handleInteraction(){const t=this.getIdentifier();if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${t} handleInteraction] Blocked: Button is permanently disabled.`);return}this.config.type==="toggle"?this.setSelected(!this._isSelected,{phaseContext:`ToggleInteract_${t}`}):this.config.type==="radio"&&(this._isSelected||this.setSelected(!0,{phaseContext:`RadioInteract_${t}`}))}setPressedVisuals(t){if(!this._isPermanentlyDisabled)if(this._pressTimeoutId&&this.element.classList.contains(U.PRESSING)&&!t&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),t){this.element.classList.add(U.PRESSING);const e=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(e)*(e.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(U.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(U.PRESSING)}setPermanentlyDisabled(t){const e=this.getIdentifier();this._isPermanentlyDisabled!==t&&(this._isPermanentlyDisabled=t,this.debugResistive&&console.log(`[Button ${e} setPermanentlyDisabled] Set to: ${t}`),t?(this._isSelected&&(this._isSelected=!1),this.setState(U.PERMANENTLY_DISABLED,{phaseContext:`PermanentlyDisable_${e}`,forceState:!0})):this.setState(U.ENERGIZED_UNSELECTED,{phaseContext:`ResetFromDisabled_${e}`,forceState:!0}),this._updateAriaAttributes())}startHarmonicResonance(){this.element.classList.contains("is-resonating")||(this._isResonating=!0,this.element.classList.add("is-resonating"))}stopHarmonicResonance(){this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"))}setCssIdleLightDriftActive(t){if(!this.configModule||!this.configModule.IDLE_LIGHT_DRIFT_PARAMS)return;const e=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,i=Array.from(this.element.querySelectorAll(".light"));if(t){if(this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.add(this.cssIdleDriftClassName),i.forEach((n,s)=>{const o=this.gsap.utils.random(e.PERIOD_MIN,e.PERIOD_MAX),a=this.gsap.utils.random(0,e.PERIOD_MAX/4)+s*e.STAGGER_PER_LIGHT,l=e.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,c=l*e.OPACITY_VARIATION_FACTOR,h=Math.max(0,Math.min(1,l-c)),f=Math.max(0,Math.min(1,l+c));n.style.setProperty("--light-idle-duration",`${o.toFixed(3)}s`),n.style.setProperty("--light-idle-delay",`${a.toFixed(3)}s`),n.style.setProperty("--light-idle-opacity-start",h.toFixed(3)),n.style.setProperty("--light-idle-opacity-end",f.toFixed(3))})}else{if(!this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.remove(this.cssIdleDriftClassName)}}playStateTransitionEcho(){if(!this.configModule)return;this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill();const t=Array.from(this.element.querySelectorAll(".light"));if(!t.length)return;const e=this.configModule.STATE_TRANSITION_ECHO_PARAMS,i=this.gsap.timeline({delay:e.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null}});this.stateTransitionEchoTween=i;const n=parseFloat(getComputedStyle(t[0]).opacity);for(let s=0;s<e.NUM_PULSES;s++){const o=e.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(e.LIGHT_DECAY_FACTOR,s),a=n*(1-o),l=e.BASE_PULSE_PERIOD*Math.pow(e.PERIOD_DECAY_FACTOR,s);i.to(t,{opacity:a,duration:l/2,yoyo:!0,repeat:1,ease:"sine.out"},s===0?">":`-=${l*.3}`)}}destroy(){this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.setCssIdleLightDriftActive(!1),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function Ee(r,t,e=0){if(!r)return e;const i=r[t];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:e}function yo(r,t,e={}){var C,D,L,b,I;const i=e.gsapInstance||Mi;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:e.gsapInstance,globalGsap:Mi});const y=Mi.timeline();return y.to({},{duration:.001}),{timeline:y,completionPromise:Promise.resolve()}}const n=typeof t=="string"?t:"CustomProfile",s=r&&r.length>0&&r[0]?r[0].id||r[0].ariaLabel||r[0].className.split(" ")[0]||r[0].tagName:"unknownTarget",a={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...e};let l=typeof t=="string"?{...uo[t]}:{...t};const c=new Promise(y=>{a.gsapInternalOnComplete=()=>{y()}});if(!l||Object.keys(l).length===0){console.warn(`[CAF - ${n} for ${s}] Profile not found or empty. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}l.glow={...l.glow||{}},a.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(l.glow.isButtonSelected=a.overrideGlowParams.isButtonSelected);const h=Array.isArray(r)?r.filter(y=>y):r?[r]:[];if(h.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}const f=i.timeline({onStart:()=>{a.onStart&&a.onStart()},onComplete:()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()},onUpdate:a.onUpdate});let d=h;if(l.targetProperty==="button-lights-and-frame"){const y=[];h.forEach(k=>{const M=k.querySelectorAll(a.lightTargetSelector);M.length>0&&y.push(...Array.from(M))}),y.length>0&&(d=y,i.killTweensOf(d),i.set(d,{clearProps:"all",overwrite:!0}))}else(l.targetProperty==="text-shadow-opacity-and-blur"||l.targetProperty==="element-opacity-and-box-shadow")&&(d=h,i.killTweensOf(d));if(l.amplitudeStart!==void 0&&l.amplitudeStart<=.01&&(!l.glow||Ee(l.glow,"initialOpacity",0)<=.01)){if(d.length>0&&f.set(d,{autoAlpha:0,immediateRender:!0}),l.glow&&(l.glow.opacityVar||(C=l.glow.animatedProperties)!=null&&C.opacity)){const y={};l.glow.opacityVar&&(y[l.glow.opacityVar]=0),(D=l.glow.animatedProperties)!=null&&D.opacity&&(y[l.glow.animatedProperties.opacity]=0),l.glow.sizeVar&&(y[l.glow.sizeVar]="0px"),(L=l.glow.animatedProperties)!=null&&L.blur&&(y[l.glow.animatedProperties.blur]="0px"),Object.keys(y).length>0&&f.set(h,{css:y,immediateRender:!0})}}else{if(d.length>0){const y=l.amplitudeStart!==void 0?l.amplitudeStart:0;f.set(d,{autoAlpha:y,immediateRender:!0})}if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y={},k=Ee(l.glow,"initialOpacity",0),M=Ee(l.glow,"initialSize","0px");l.glow.opacityVar&&(y[l.glow.opacityVar]=k),l.glow.sizeVar&&(y[l.glow.sizeVar]=typeof M=="number"?`${M}px`:M),(b=l.glow.animatedProperties)!=null&&b.opacity&&(y[l.glow.animatedProperties.opacity]=k),(I=l.glow.animatedProperties)!=null&&I.blur&&(y[l.glow.animatedProperties.blur]=typeof M=="number"?`${M}px`:M),Object.keys(y).length>0&&f.set(h,{css:y,immediateRender:!0})}}let g=0,p=.01;for(let y=0;y<l.numCycles;y++){const k=l.numCycles>1?y/(l.numCycles-1):1,M=l.periodStart+k*(l.periodEnd-l.periodStart),G=Math.max(.01,M*l.onDurationRatio),x=Math.max(.01,M*(1-l.onDurationRatio)),K=l.amplitudeStart+k*(l.amplitudeEnd-l.amplitudeStart);p=G;const q=Ee(l.glow,"peakOpacity",1),B=Ee(l.glow,"peakSize","5px"),H={autoAlpha:K,duration:G,ease:"power1.inOut"},st={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const te=l.glow.scaleWithAmplitude?q*K:q;l.glow.opacityVar&&(st[l.glow.opacityVar]=te),l.glow.sizeVar&&(st[l.glow.sizeVar]=typeof B=="number"?`${B}px`:B),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(st[l.glow.animatedProperties.opacity]=te),l.glow.animatedProperties.blur&&(st[l.glow.animatedProperties.blur]=typeof B=="number"?`${B}px`:B))}if(d.length>0&&f.to(d,H,g),Object.keys(st).length>0&&f.to(h,{css:st,duration:G,ease:"power1.inOut"},g),g+=G,y<l.numCycles-1){const ue={autoAlpha:l.amplitudeStart>0?l.amplitudeStart*.3:0,duration:x,ease:"power1.inOut"},Y={},X=Ee(l.glow,"initialOpacity",0),Q=Ee(l.glow,"initialSize","0px");l.glow&&(l.glow.colorVar||l.glow.animatedProperties)&&(l.glow.opacityVar&&(Y[l.glow.opacityVar]=X),l.glow.sizeVar&&(Y[l.glow.sizeVar]=typeof Q=="number"?`${Q}px`:Q),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(Y[l.glow.animatedProperties.opacity]=X),l.glow.animatedProperties.blur&&(Y[l.glow.animatedProperties.blur]=typeof Q=="number"?`${Q}px`:Q))),d.length>0&&f.to(d,ue,g),Object.keys(Y).length>0&&f.to(h,{css:Y,duration:x,ease:"power1.inOut"},g),g+=x}}const _=Math.max(.15,l.periodEnd*1.5),S={autoAlpha:l.amplitudeEnd,duration:_,ease:"sine.out"},T={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y=Ee(l.glow,"finalOpacity",0),k=Ee(l.glow,"finalSize","0px");l.glow.opacityVar&&(T[l.glow.opacityVar]=y),l.glow.sizeVar&&(T[l.glow.sizeVar]=typeof k=="number"?`${k}px`:k),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(T[l.glow.animatedProperties.opacity]=y),l.glow.animatedProperties.blur&&(T[l.glow.animatedProperties.blur]=typeof k=="number"?`${k}px`:k))}const A=p*.3;return d.length>0&&f.to(d,S,`>-=${A}`),Object.keys(T).length>0&&f.to(h,{css:T,duration:_,ease:"sine.out"},"<"),f.duration()===0&&f.to({},{duration:.001}),{timeline:f,completionPromise:c}}const U={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering",PERMANENTLY_DISABLED:"is-permanently-disabled"};class Ep{constructor(){this.gsap=null,this.appState=null,this.config=null,this.aam=null,this._buttons=new Map,this._buttonGroups=new Map,this._eventListeners={},this.mainPowerOffButtonInstance=null,this.debug=!1,this.debugResistive=!0}init(){this.gsap=v.get("gsap"),this.appState=v.get("appState"),this.config=v.get("config"),this.aam=v.get("ambientAnimationManager"),this.appState.subscribe("resistiveShutdownStageChanged",this.handleResistiveShutdownStageChange.bind(this)),this.appState.subscribe("mainPowerOffButtonDisabledChanged",this.handleMainPowerOffButtonDisabledChange.bind(this)),this.debug&&console.log("[ButtonManager INIT]")}on(t,e){typeof e=="function"&&(this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e))}emit(t,e){this._eventListeners[t]&&this._eventListeners[t].forEach(i=>i(e))}discoverButtons(t){this.debug&&console.log(`[ButtonManager] Discovering ${t==null?void 0:t.length} buttons.`),t&&t.length>0&&t.forEach(e=>this.addButton(e)),this.setInitialDimStates()}addButton(t,e=null){if(!t||this._buttons.has(t))return;const i=this._generateButtonConfig(t,e),n=new Dp(t,i,this.gsap,this.appState,this.config);this._buttons.set(t,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n)),s==="system-power"&&i.value==="off"&&(this.mainPowerOffButtonInstance=n)}_generateButtonConfig(t,e=null){var a;const i=t.classList.contains("button-unit--toggle")?"toggle":t.classList.contains("button-unit--action")?"action":t.classList.contains("button-unit--radio")?"radio":"default";let n=e||((a=t.closest("[data-group-id]"))==null?void 0:a.dataset.groupId)||null;const s=t.dataset.toggleValue||t.dataset.value||null,o=t.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:o}}getAllButtonInstances(){return Array.from(this._buttons.values())}getButtonsByGroupIds(t=[]){const e=[];return this._buttons.forEach(i=>{t.includes(i.getGroupId())&&e.push(i.element)}),e}getButtonInstance(t){return this._buttons.get(t)}getButtonByAriaLabel(t){for(const e of this._buttons.values())if(e.element.ariaLabel===t)return e;return null}setInitialDimStates(){this._buttons.forEach(t=>{t.isSelected()&&t.setSelected(!1,{skipAnimation:!0}),t.setState(U.UNLIT,{skipAnimation:!0,forceState:!0})})}handleInteraction(t){const e=this._buttons.get(t);if(!e)return;const i=e.getIdentifier(),n=e.getGroupId(),s=e.getValue();if(this.debugResistive&&console.log(`[BM handleInteraction] Clicked: ${i}, Group: ${n}, Value: ${s}, IsSelected: ${e.isSelected()}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&n!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${i}`);return}if(n==="system-power"&&s==="off"){e.setPressedVisuals(!0),this.appState.emit("buttonInteracted",{button:e}),this.debugResistive&&console.log('[BM handleInteraction] Intercepted "off" button press. Emitting event only.');return}if((e.config.type==="toggle"||e.config.type==="radio")&&e.isSelected()){e.setPressedVisuals(!0),this.debugResistive&&console.log(`[BM handleInteraction] Blocked deselection for already-selected button: ${i}`);return}this.emit("beforeButtonTransition",e),e.handleInteraction(),n&&(e.config.type==="toggle"||e.config.type==="radio")&&e.isSelected()&&this._buttonGroups.get(n).forEach(o=>{o!==e&&o.isSelected()&&(this.emit("beforeButtonTransition",o),o.setSelected(!1,{phaseContext:`GroupAutoDeselect_${o.getIdentifier()}`}),this.emit("afterButtonTransition",o))}),this.appState.emit("buttonInteracted",{button:e}),this.emit("afterButtonTransition",e)}setGroupSelected(t,e){const i=this._buttonGroups.get(t);i&&i.forEach(n=>{const s=n.config.value===e;n.isSelected()!==s&&(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n))})}playFlickerToState(t,e,i){const n=this._buttons.get(t);if(!n)return{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:s,phaseContext:o="UnknownPhase",isButtonSelectedOverride:a=null,onFlickerComplete:l,tempGlowColor:c,tempTintColorClass:h}=i;this.debug&&console.log(`[BM playFlickerToState] For: ${n.getIdentifier()}, Target State: '${e}', Profile: '${s}'`);let f=U.UNLIT;s.toLowerCase().includes("fromdimlylit")?f=U.DIMLY_LIT:s.toLowerCase().includes("resist")&&(f=n.isSelected()?U.ENERGIZED_SELECTED:U.ENERGIZED_UNSELECTED),s.toLowerCase().includes("resist")||n.setState(f,{skipAnimation:!0,forceState:!0});const d=e.includes("is-selected");n.isSelected()!==d&&!s.toLowerCase().includes("resist")&&n.setSelected(d,{skipAnimation:!0,forceState:!0}),c&&t.style.setProperty("--btn-glow-color",c),h&&t.classList.add(h);const u={...i,overrideGlowParams:{isButtonSelected:typeof a=="boolean"?a:d},onTimelineComplete:()=>{this.debug&&console.log(`[BM onFlickerComplete] For: ${n.getIdentifier()}. Applying final state: '${e}'`),c&&t.style.removeProperty("--btn-glow-color"),h&&t.classList.remove(h),n.setState(e,{skipAnimation:!0,forceState:!0}),e!==U.PERMANENTLY_DISABLED&&n.playStateTransitionEcho(),this.emit("afterButtonTransition",n),l&&l()}};return yo(t,s,u)}setPressedVisuals(t,e){const i=this._buttons.get(t);i&&i.setPressedVisuals(e)}setGroupDisabled(t,e){const i=this._buttonGroups.get(t);i&&i.forEach(n=>n.setPermanentlyDisabled(e))}handleResistiveShutdownStageChange({newStage:t}){if(!this.mainPowerOffButtonInstance)return;if(t===0){this.mainPowerOffButtonInstance.isPermanentlyDisabled()&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(!1),this.setGroupSelected("system-power","on");return}const e=`STAGE_${t}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[e];if(!i||!i.BUTTON_FLASH_PROFILE_NAME)return;let n=t===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE?U.PERMANENTLY_DISABLED:U.ENERGIZED_UNSELECTED;this.playFlickerToState(this.mainPowerOffButtonInstance.element,n,{profileName:i.BUTTON_FLASH_PROFILE_NAME,tempGlowColor:i.BUTTON_FLASH_GLOW_COLOR})}handleMainPowerOffButtonDisabledChange({isDisabled:t}){this.mainPowerOffButtonInstance&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(t)}}class Sp{constructor(t,e){if(this.appState=v.get("appState"),this.configModule=v.get("config"),this.gsap=v.get("gsap"),this.containerElement=t,this.dialId=e,this.svg=this.containerElement.querySelector(".dial-svg"),this.ridgesGroup=this.svg?this.svg.querySelector(".dial-ridges-group"):null,!this.svg||!this.ridgesGroup){console.error(`[DialController ${this.dialId}] Critical SVG elements not found.`);return}this.config={NUM_RIDGES:66,RIDGE_WIDTH_FACTOR:1.6,PIXELS_PER_DEGREE_ROTATION:1.3,PIXELS_PER_DEGREE_HUE:.64,SHADOW_OFFSET_MULTIPLIER:8,THROTTLE_LIMIT_MS:50},this.isDragging=!1,this.rotation=this.appState.getDialState(this.dialId).rotation||0,this.hue=this.appState.getDialState(this.dialId).hue||0,this.targetRotation=this.rotation,this.currentPointerX=0,this.gsapTween=null,this.ridgeElements=[],this.lightAngleRad=0,this.unsubscribers=[],this.themeVars={},this.debug=!1,this.throttledUpdateAppState=Bf(this._updateAppState.bind(this),this.config.THROTTLE_LIMIT_MS),this._createRidges(),this._addDragListeners(),this._subscribeToAppStateEvents(),this.forceRedraw()}_subscribeToAppStateEvents(){const t=this.appState.subscribe("dialUpdated",n=>{if(n&&n.id===this.dialId&&!this.isDragging){this.gsapTween&&this.gsapTween.kill();const s=n.state;this.targetRotation=s.rotation,this.gsapTween=this.gsap.to(this,{rotation:s.rotation,hue:s.hue,duration:.5,ease:"power2.out",onUpdate:()=>this._draw()})}});this.unsubscribers.push(t);const e=this.appState.subscribe("themeChanged",n=>{this.debug&&console.log(`[DialController ${this.dialId}] Detected themeChanged to '${n}'. Forcing redraw.`),requestAnimationFrame(()=>this.forceRedraw())});this.unsubscribers.push(e);const i=this.appState.subscribe("targetColorChanged",n=>{n.targetKey==="env"&&(this.debug&&console.log(`[DialController ${this.dialId}] Detected ENV color change. Forcing redraw.`),this.forceRedraw())});this.unsubscribers.push(i)}_createRidges(){const t=document.createDocumentFragment();for(let e=0;e<this.config.NUM_RIDGES;e++){const i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("class","dial-ridge"),i.setAttribute("y","0"),i.setAttribute("height","100%"),i.setAttribute("rx","0.5"),this.ridgeElements.push(i),t.appendChild(i)}this.ridgesGroup.appendChild(t)}_addDragListeners(){this.boundInteractionStart=this._handleInteractionStart.bind(this),this.boundInteractionMove=this._handleInteractionMove.bind(this),this.boundInteractionEnd=this._handleInteractionEnd.bind(this),this.boundOnResize=this.forceRedraw.bind(this),this.containerElement.addEventListener("mousedown",this.boundInteractionStart),this.containerElement.addEventListener("touchstart",this.boundInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundInteractionMove),window.addEventListener("touchmove",this.boundInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundInteractionEnd),window.addEventListener("touchend",this.boundInteractionEnd),window.addEventListener("mouseleave",this.boundInteractionEnd),window.addEventListener("resize",this.boundOnResize)}_handleInteractionStart(t){if(this.appState.getAppStatus()!=="interactive")return;t.preventDefault(),this.isDragging=!0,this.containerElement.classList.add("is-dragging"),this.gsapTween&&this.gsapTween.kill();const e=this.appState.getDialState(this.dialId);this.rotation=e.rotation,this.hue=e.hue,this.targetRotation=this.rotation,this.currentPointerX=t.touches?t.touches[0].clientX:t.clientX,this.dialId==="B"&&this.appState.setDialBInteractionState("dragging")}_handleInteractionMove(t){if(!this.isDragging)return;t.preventDefault();const e=t.touches?t.touches[0].clientX:t.clientX,i=e-this.currentPointerX;this.currentPointerX=e;const n=i/this.config.PIXELS_PER_DEGREE_ROTATION,s=i/this.config.PIXELS_PER_DEGREE_HUE;this.rotation+=n,this.targetRotation=this.rotation;let o=this.hue+s;this.dialId==="A"?o=(o%360+360)%360:o=this.gsap.utils.clamp(0,359.999,o),this.hue=o,this._draw(),this.throttledUpdateAppState()}_handleInteractionEnd(){this.isDragging&&(this.isDragging=!1,this.containerElement.classList.remove("is-dragging"),this._updateAppState(),this.dialId==="B"&&(this.appState.setDialBInteractionState("settling"),this.gsap.delayedCall(.2,()=>{this.isDragging||this.appState.setDialBInteractionState("idle")})))}_updateAppState(){this.appState.updateDialState(this.dialId,{isDragging:this.isDragging,rotation:this.rotation,targetRotation:this.targetRotation,hue:this.hue,targetHue:this.hue}),this.dialId==="B"&&this.appState.setTrueLensPower(this.hue/359.999*100)}forceRedraw(){this.debug&&console.log(`[DialController ${this.dialId}] forceRedraw() called.`),this.svgWidth=this.svg.getBoundingClientRect().width,this._updateAndCacheThemeStyles(),this._draw()}_updateAndCacheThemeStyles(){const t=getComputedStyle(this.containerElement),e=parseFloat(t.getPropertyValue("--dial-ridge-c")),i=parseFloat(t.getPropertyValue("--dial-ridge-chroma-multiplier")),n=isNaN(e)||isNaN(i)?e||0:e*i;this.themeVars={ridgeL:parseFloat(t.getPropertyValue("--dial-ridge-l")),ridgeC:n,ridgeH:parseFloat(t.getPropertyValue("--dial-ridge-h")),ridgeHighlightL:parseFloat(t.getPropertyValue("--dial-ridge-highlight-l")),highlightExponent:parseFloat(t.getPropertyValue("--dial-highlight-exponent"))}}_draw(){if(!this.svgWidth||this.ridgeElements.length===0||isNaN(this.themeVars.ridgeL))return;const t=this.rotation*(Math.PI/180),e=2*Math.PI/this.config.NUM_RIDGES,i=this.svgWidth/2,n=this.svgWidth/this.config.NUM_RIDGES*this.config.RIDGE_WIDTH_FACTOR,s=Math.sin(t)*this.config.SHADOW_OFFSET_MULTIPLIER;this.containerElement.style.setProperty("--dial-shadow-offset-y",`${s}px`);const o=[];for(let a=0;a<this.config.NUM_RIDGES;a++){const l=a*e+t,c=Math.cos(l);if(c>.01){const h=Math.sin(l),f=n*c,d=i+h*i-f/2,u=Math.cos(l-this.lightAngleRad),g=Math.pow(Math.max(0,u),this.themeVars.highlightExponent||10);o.push({element:this.ridgeElements[a],x:d,width:f,zIndex:c,highlightFactor:g}),this.ridgeElements[a].style.display="block"}else this.ridgeElements[a].style.display="none"}o.sort((a,l)=>a.zIndex-l.zIndex),o.forEach(a=>{a.element.setAttribute("x",a.x.toFixed(2)),a.element.setAttribute("width",a.width.toFixed(2));const c=`oklch(${this.gsap.utils.interpolate(this.themeVars.ridgeL,this.themeVars.ridgeHighlightL,a.highlightFactor)} ${this.themeVars.ridgeC} ${this.themeVars.ridgeH})`;a.element.setAttribute("fill",c),this.ridgesGroup.appendChild(a.element)})}destroy(){this.unsubscribers.forEach(t=>t()),this.unsubscribers=[],this.gsapTween&&this.gsapTween.kill(),this.containerElement.removeEventListener("mousedown",this.boundInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundInteractionStart),window.removeEventListener("mousemove",this.boundInteractionMove),window.removeEventListener("touchmove",this.boundInteractionMove),window.removeEventListener("mouseup",this.boundInteractionEnd),window.removeEventListener("touchend",this.boundInteractionEnd),window.removeEventListener("mouseleave",this.boundInteractionEnd),window.removeEventListener("resize",this.boundOnResize)}}class yp{constructor(){this.dialInstances={},this.appState=null,this.config=null,this.gsap=null,this.dom={},this.debug=!1}async init(){this.appState=v.get("appState"),this.config=v.get("config"),this.gsap=v.get("gsap"),this.dom=v.get("domElements"),this.debug&&console.log("[DialManager INIT]");try{await this.injectDialSVGs(),[this.dom.dialA,this.dom.dialB].forEach(e=>{if(!e)return;const i=e.dataset.dialId;i&&(this.dialInstances[i]&&this.dialInstances[i].destroy(),this.dialInstances[i]=new Sp(e,i))})}catch(t){console.error("[DialManager] Failed to initialize dials due to SVG injection error:",t)}}async injectDialSVGs(){try{const t=await fetch("./dial.svg");if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const e=await t.text();[this.dom.dialA,this.dom.dialB].forEach(n=>{n&&(n.innerHTML=e)}),this.debug&&console.log("[DialManager] SVG dials injected successfully.")}catch(t){throw console.error("[DialManager] Could not fetch or inject dial.svg:",t),[this.dom.dialA,this.dom.dialB].forEach(i=>{i&&(i.innerHTML='<p style="color: grey; font-size: 0.8em; text-align: center;">Dial Error</p>')}),t}}setDialsActiveState(t){}resizeAllCanvases(t=!1){requestAnimationFrame(()=>{Object.values(this.dialInstances).forEach(e=>{e&&typeof e.forceRedraw=="function"&&e.forceRedraw()})})}}class Tp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.isOscillating=!1,this.smoothedTrueLensPower={value:0},this.trueLensPowerTarget=0,this.powerSmoothingTween=null,this.currentMasterHue=-1,this.lastAppliedGradientString="",this.lastVisualPowerForGradientRender=-1,this.lastHueForGradientRender=-1,this.lastSuperGlowHue=-1,this.currentLensHueProxy={value:-1},this.debouncedSetLegacyLensPowerVar=null,this.debug=!0}init(){this.gsap=v.get("gsap"),this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements"),this.debug&&console.log("[LensManager INIT]"),this.debouncedSetLegacyLensPowerVar=kf(i=>{const n=Math.max(0,Math.min(i,1.05));this.dom.root.style.setProperty("--lens-power",n.toFixed(3))},this.config.DEBOUNCE_DELAY/3);const t=this.appState.getTrueLensPower(),e=this.appState.getDialState("A");this.currentMasterHue=e?(e.hue%360+360)%360:this.config.DEFAULT_DIAL_A_HUE,this.currentLensHueProxy.value=this.currentMasterHue,this.lastHueForGradientRender=this.currentMasterHue,this._updateSuperGlowHue(this.currentMasterHue),this.smoothedTrueLensPower.value=t,this.trueLensPowerTarget=t,this.directUpdateLensVisuals(t),this.appState.subscribe("trueLensPowerChanged",i=>this._handleTrueLensPowerChange(i)),this.appState.subscribe("dialBInteractionChange",i=>this._handleDialBInteractionChange(i)),this.appState.subscribe("dialUpdated",i=>this._handleDialAUpdateForLensHue(i)),this.appState.subscribe("appStatusChanged",i=>this._handleAppStatusChangeForLens(i)),this.appState.subscribe("ambientPulse",({progress:i})=>this._applyOscillationVisuals(i))}energizeLensCoreStartup(t=null,e=null){const i=t??this.config.LENS_STARTUP_TARGET_POWER,n=e??this.config.LENS_STARTUP_RAMP_DURATION,s=this.gsap.timeline(),o=this.appState.getTrueLensPower(),a={value:o*100};return o<=1e-4&&this._updateLensGradientVisuals(0),s.to(a,{value:i,duration:n/1e3,ease:"sine.inOut",onStart:()=>{this.dom.colorLensGradient.style.opacity!=="1"&&this.appState.getAppStatus()!=="loading"&&(this.dom.colorLensGradient.style.opacity="1")},onUpdate:()=>this.appState.setTrueLensPower(a.value),onComplete:()=>{const l=a.value;this.appState.setTrueLensPower(l);const c=l/100*359.999,h=c*this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG;this.appState.updateDialState("B",{hue:c,targetHue:c,rotation:h,targetRotation:h})}}),s}directUpdateLensVisuals(t){this._updateLensGradientVisuals(t),this._setLegacyLensPowerVar(t,!0)}_setLegacyLensPowerVar(t,e=!1){if(e){const i=Math.max(0,Math.min(t,1.05));this.dom.root.style.setProperty("--lens-power",i.toFixed(3))}else this.debouncedSetLegacyLensPowerVar(t)}_updateSuperGlowHue(t){const e=(Number(t)%360+360)%360;(Math.abs(e-this.lastSuperGlowHue)>=this.config.HUE_UPDATE_THRESHOLD||this.lastSuperGlowHue===-1)&&(this.dom.root.style.setProperty("--dynamic-lens-super-glow-hue",e.toFixed(1)),this.lastSuperGlowHue=e)}_handleDialAUpdateForLensHue(t){if(this.appState.getAppStatus()==="loading"||!t||t.id!=="A"||!t.state)return;const e=t.state,i=(e.hue%360+360)%360;if(this.gsap.isTweening(this.currentLensHueProxy)&&this.gsap.killTweensOf(this.currentLensHueProxy),e.isDragging){this.currentMasterHue=i,this.currentLensHueProxy.value=i,this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState();return}const n=Math.abs(i-this.currentMasterHue);if(Math.min(n,360-n)<this.config.HUE_UPDATE_THRESHOLD&&this.currentMasterHue!==-1)return;let s=this.config.LENS_OSCILLATION_HUE_SMOOTHING_DURATION,o="power1.out";const a=this.appState.getResistiveShutdownStage();if(a>0){const c=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${a}`];c&&(s=c.LENS_ANIM_DURATION_S,o=c.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}let l=i;Math.abs(l-this.currentLensHueProxy.value)>180&&(l+=l>this.currentLensHueProxy.value?-360:360),this.gsap.to(this.currentLensHueProxy,{value:l,duration:s,ease:o,onUpdate:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value),this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState()},onComplete:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value)}})}_updateLensVisualsWithCurrentState(t=!1){const e=this.smoothedTrueLensPower.value;this._setLegacyLensPowerVar(e,t),this._updateLensGradientVisuals(e)}_updateLensGradientVisuals(t){const e=this.dom.colorLensGradient;if(!e)return;const i=this.appState.getAppStatus(),n=t<=1e-4;if(i==="loading"||i==="error"||i==="starting-up"&&n){e.style.opacity!=="0"&&(e.style.opacity="0");return}e.style.opacity!=="1"&&(e.style.opacity="1");const s=Math.abs(t-this.lastVisualPowerForGradientRender)>=1e-4,o=Math.abs(this.currentMasterHue-this.lastHueForGradientRender)>=this.config.HUE_UPDATE_THRESHOLD;if(!s&&!o)return;const a=this.config.LENS_GRADIENT_BREAKPOINTS,l=Math.max(a[0].power,t);let c=a[0],h=a[0];for(let g=0;g<a.length;g++){if(l<=a[g].power){h=a[g],c=g>0?a[g-1]:a[0];break}g===a.length-1&&(c=h=a[g])}let f=0;h.power>c.power&&(f=(Math.max(c.power,Math.min(t,h.power))-c.power)/(h.power-c.power));const d=[];for(let g=0;g<this.config.NUM_LENS_GRADIENT_STOPS;g++){const p=c.stops[g],_=h.stops[g],S=p.l+f*(_.l-p.l),T=p.c+f*(_.c-p.c),A=p.pos+f*(_.pos-p.pos);let C=p.type==="hotspot"?this.currentMasterHue+this.config.LENS_HOTSPOT_HUE_OFFSET:this.currentMasterHue;(p.type==="darkedge"||p.type==="blackedge")&&(C=0),C=(C%360+360)%360,d.push(`oklch(${S.toFixed(3)} ${T.toFixed(3)} ${C.toFixed(1)}) ${(A*100).toFixed(2)}%`)}const u=`radial-gradient(circle at 50% 50%, ${d.join(", ")})`;e.style.background!==u&&(e.style.background=u),this.lastAppliedGradientString=u,this.lastVisualPowerForGradientRender=t,this.lastHueForGradientRender=this.currentMasterHue}_handleTrueLensPowerChange(t){this.trueLensPowerTarget=t,this.powerSmoothingTween&&this.powerSmoothingTween.kill();const e=this.appState.getAppStatus()==="starting-up",i=this.appState.getDialBInteractionState()==="idle",n=this.appState.getResistiveShutdownStage();let s=this.config.LENS_OSCILLATION_SMOOTHING_DURATION,o="power1.out";if(n>0){const a=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${n}`];a&&(s=a.LENS_ANIM_DURATION_S,o=a.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}e||!i?(this.smoothedTrueLensPower.value=this.trueLensPowerTarget,this._updateLensVisualsWithCurrentState(!0)):this.powerSmoothingTween=this.gsap.to(this.smoothedTrueLensPower,{value:this.trueLensPowerTarget,duration:s,ease:o,onUpdate:()=>this._updateLensVisualsWithCurrentState(),onComplete:()=>{this.powerSmoothingTween=null,this._updateLensVisualsWithCurrentState(!0),this.appState.getAppStatus()==="interactive"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}}),(this.trueLensPowerTarget<this.config.LENS_OSCILLATION_THRESHOLD||!i||e)&&this.isOscillating&&this._stopOscillation(),this.appState.getAppStatus()==="interactive"&&i&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}_handleDialBInteractionChange(t){t!=="idle"?(this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=this.appState.getTrueLensPower(),this._updateLensVisualsWithCurrentState(!0)):this._handleTrueLensPowerChange(this.appState.getTrueLensPower())}_handleAppStatusChangeForLens(t){if(t==="loading"||t==="error"){this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=0,this.trueLensPowerTarget=0,this._updateLensGradientVisuals(0),this._setLegacyLensPowerVar(0,!0),this.dom.lensSuperGlow&&(this.dom.lensSuperGlow.style.opacity="0");return}this._updateLensVisualsWithCurrentState(!0),this._updateSuperGlowHue(this.currentMasterHue),t==="interactive"?this.appState.getDialBInteractionState()==="idle"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation():this.isOscillating&&this._stopOscillation()}_startOscillation(){const t=this.appState.getAppStatus()==="interactive"&&this.appState.getDialBInteractionState()==="idle";this.debug&&console.log(`[LensManager _startOscillation] Attempting to start. Conditions: isOscillating=${this.isOscillating}, canOscillate=${t} (appStatus: ${this.appState.getAppStatus()}, dialBState: ${this.appState.getDialBInteractionState()}, shutdownStage: ${this.appState.getResistiveShutdownStage()})`),!(this.isOscillating||!t)&&(this.isOscillating=!0,this.debug&&console.log("[LensManager _startOscillation] Oscillation STARTED."))}_stopOscillation(){this.isOscillating&&(this.debug&&console.log("[LensManager _stopOscillation] Oscillation STOPPED."),this.isOscillating=!1,this._updateLensVisualsWithCurrentState(!0))}_applyOscillationVisuals(t){if(!this.isOscillating)return;const e=Math.max(0,this.smoothedTrueLensPower.value-this.config.LENS_OSCILLATION_THRESHOLD),i=Math.min(1,e/(1-this.config.LENS_OSCILLATION_THRESHOLD)),n=this.config.LENS_OSCILLATION_AMPLITUDE_MIN+i*this.config.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,s=this.gsap.utils.interpolate(-n,n,t),o=this.smoothedTrueLensPower.value+s;this._updateLensGradientVisuals(o),this._setLegacyLensPowerVar(o)}}class Ap{constructor(){this.body=document.body,this.appState=null,this.debug=!1}init(){this.debug&&console.log("[ThemeManager INIT]"),this.appState=v.get("appState"),this.appState.subscribe("themeChanged",t=>this.handleThemeChange(t)),this.handleThemeChange(this.appState.getCurrentTheme())}handleThemeChange(t){this.body&&(this.debug&&console.log(`[ThemeManager] Theme changing to '${t}'.`),this.body.classList.remove("theme-dim","theme-dark","theme-light"),this.body.classList.add(`theme-${t}`))}}const Sa=["lcd--unlit","lcd--dimly-lit"];class Cp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.debug=!0}init(){this.gsap=v.get("gsap"),this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements"),this.debug&&console.log("[LcdUpdater INIT]"),this.appState.subscribe("appStatusChanged",()=>this.applyCurrentStateToAllLcds()),this.applyCurrentStateToAllLcds()}getLcdPowerOnTimeline(t,e){const{profileName:i,state:n}=e,s=t?t.id||t.className.split(" ")[0]:"NullElement";this.debug&&console.groupCollapsed(`[LcdUpdater] getLcdPowerOnTimeline for ${s}`);const o=this.gsap.timeline();if(!t)return console.warn("[LcdUpdater] Attempted to get timeline for a null LCD container."),this.debug&&console.groupEnd(),o;const a=t.querySelector(".lcd-content-wrapper");o.call(()=>{this.debug&&console.log("[LcdUpdater] Making content wrapper visible for animation."),this._updateLcdVisibility(t,n)},[],0),this.debug&&console.log(`[LcdUpdater] Creating container flicker with profile: ${i}`);const l=yo(t,i,{gsapInstance:this.gsap});if(o.add(l.timeline,0),a&&!t.classList.contains("actual-lcd-screen-element")){const c=Array.from(a.children);c.length>0&&(this.debug&&console.log(`[LcdUpdater] Creating generic content fade-in for ${c.length} elements.`),o.from(c,{autoAlpha:0,y:"5px",stagger:.04,duration:.4,ease:"power1.out"},l.timeline.duration()*.25))}return o.eventCallback("onComplete",()=>{this.debug&&console.log(`[LcdUpdater] Power-on complete. Setting final state: ${n}`);const c=n==="dimly-lit"?"lcd--dimly-lit":"";Sa.forEach(h=>t.classList.remove(h)),c&&t.classList.add(c),this.appState.emit("lcdStateChanged",{lcdId:t.id,newStateKey:n}),this.debug&&console.groupEnd()}),o}setLcdState(t,e){this.debug&&console.log(`[LcdUpdater] setLcdState (instant) for ${t.id} to ${e}`);const i=e==="dimly-lit"?"lcd--dimly-lit":e==="unlit"?"lcd--unlit":"";Sa.forEach(n=>t.classList.remove(n)),i&&t.classList.add(i),this._updateLcdVisibility(t,e),this.appState.emit("lcdStateChanged",{lcdId:t.id,newStateKey:e})}applyCurrentStateToAllLcds(){const t=this.appState.getAppStatus();if(t!=="starting-up"){const e=t==="interactive"?"active":"unlit";[this.dom.lcdA,this.dom.lcdB,this.dom.terminalContainer].forEach(i=>{i&&(this.setLcdState(i,e),i.classList.contains("actual-lcd-screen-element")&&i.classList.toggle("is-resonating",t==="interactive"))})}}_updateLcdVisibility(t,e){const i=t.querySelector(".lcd-content-wrapper");if(!i)return;const n=e==="active"||e==="dimly-lit";i.classList.toggle("is-content-hidden",!n)}}class Ip{constructor(){this.root=document.documentElement,this.appState=null,this.config=null,this.dom={},this.debug=!1}init(){this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements"),this.debug&&console.log("[DynamicStyleManager INIT]"),this.appState.subscribe("targetColorChanged",t=>this.handleTargetColorChange(t)),this.appState.subscribe("dialUpdated",t=>this.handleDialAUpdateForUIAccent(t)),this.injectLogoSVG(),this.applyInitialDynamicCSSVars()}updateDynamicCSSVar(t,e,i){if(!this.root)return;const n=(Number(e)%360+360)%360,s={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},o=parseFloat(getComputedStyle(this.root).getPropertyValue(`--dynamic-${t}-chroma-base`).trim())||s[t]||.1,a=i?0:o;this.root.style.setProperty(`--dynamic-${t}-hue`,n.toFixed(1)),this.root.style.setProperty(`--dynamic-${t}-chroma`,a.toFixed(4)),this.debug&&console.log(`[DynamicStyleManager] Set CSS vars for '${t}': Hue=${n.toFixed(1)}, Chroma=${a.toFixed(4)}`)}injectLogoSVG(){const t=this.dom.logoContainer;if(!t){console.error("[DynamicStyleManager] logoContainer element not found for SVG injection.");return}t.querySelector("svg.logo-svg")||fetch("./logo.svg").then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()}).then(e=>{if(!e||!e.trim().startsWith("<svg"))throw new Error("Invalid SVG data.");t.innerHTML=e,this.applyInitialDynamicCSSVars()}).catch(e=>{console.error("[DynamicStyleManager] Error fetching/injecting SVG logo:",e),t.innerHTML='<p style="color: #ccc; font-size: 0.8em;">Logo Load Error</p>'})}applyInitialDynamicCSSVars(){["env","lcd","logo","btn"].forEach(i=>{const n=this.appState.getTargetColorProperties(i);n&&this.updateDynamicCSSVar(i,n.hue,n.isColorless)});const t=this.appState.getDialState("A"),e=t?t.hue:this.config.DEFAULT_DIAL_A_HUE;this.updateDynamicCSSVar("ui-accent",e,!1)}handleTargetColorChange(t){!t||!t.targetKey||this.updateDynamicCSSVar(t.targetKey,t.hue,t.isColorless)}handleDialAUpdateForUIAccent(t){t&&t.id==="A"&&t.state&&this.updateDynamicCSSVar("ui-accent",t.state.hue,!1)}}const wp={P1_EMERGENCY_SUBSYSTEMS:"INITIATING STARTUP PROTOCOL",P2_BACKUP_POWER:"> BACKUP POWER ENGAGED",P3_MAIN_POWER_ONLINE:"> MAIN POWER STABLE",P4_OPTICAL_CORE_REACTIVATE:"> OPTICAL CORE REACTIVATED",P5_DIAGNOSTIC_INTERFACE:"> DIAGNOSTICS ONLINE",P6_MOOD_INTENSITY_CONTROLS:"> MOOD CONTROLS ACTIVE",P7_HUE_CORRECTION_SYSTEMS:"> HUE SYSTEMS ALIGNED",P8_EXTERNAL_LIGHTING_CONTROLS:"> EXTERNAL LIGHTING RESPONSIVE",P9_AUX_LIGHTING_LOW:"> AUX LIGHTING: LOW INTENSITY",P11_SYSTEM_OPERATIONAL:["ALL SYSTEMS NOMINAL","HUE 9000 OPERATIONAL"]},Qs={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}°","  - INTENSITY DIAL (B) SETTING: {dialBHue}°","  - ASSIGNED ENVIRONMENT HUE: {envHue}°","  - ASSIGNED LCD HUE: {lcdHue}°","  - ASSIGNED LOGO HUE: {logoHue}°","  - ASSIGNED BUTTON HUE: {btnHue}°","SYSTEM NOMINAL. AWAITING INPUT."]},ya={dialA:r=>`MOOD DIAL SET TO ${r.value}°`,dialB:r=>`INTENSITY DIAL SET TO ${r.value}%`,envHue:r=>`ENVIRONMENT HUE ASSIGNED: ${r.hue}°`,lcdHue:r=>`LCD HUE ASSIGNED: ${r.hue}°`,logoHue:r=>`LOGO HUE ASSIGNED: ${r.hue}°`,btnHue:r=>`BUTTON HUE ASSIGNED: ${r.hue}°`,FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`,RESIST_SHUTDOWN_S1:"WARNING",RESIST_SHUTDOWN_S2:"ERROR",RESIST_SHUTDOWN_S3:"CRITICAL ERROR"};function wu(r,t={},e=null){const{type:i,source:n,data:s,messageKey:o}=r||{};if(r&&r.content&&Array.isArray(r.content))return r.content;if(r&&r.content&&typeof r.content=="string")return[r.content];switch(i){case"startup":const a=wp[o||n]||`Unknown startup event: ${o||n}`;return Array.isArray(a)?a:[a];case"block":if(o&&Qs[o]){if(o==="BTN4_MESSAGE"){const c=(e==null?void 0:e.DEFAULT_DIAL_A_HUE)??"N/A_CONF";return Qs[o].map(h=>{var f,d,u,g,p,_;return h.replace("{currentTheme}",t.theme||"N/A").replace("{lensPower}",t.lensPower!==void 0?Math.round(t.lensPower*100):"N/A").replace("{dialAHue}",((f=t.dialA)==null?void 0:f.hue)!==void 0?Math.round(t.dialA.hue):String(Math.round(c))).replace("{dialBHue}",((d=t.dialB)==null?void 0:d.hue)!==void 0?Math.round(t.dialB.hue):"N/A").replace("{envHue}",((u=t.envHue)==null?void 0:u.hue)!==void 0?Math.round(t.envHue.hue):"N/A").replace("{lcdHue}",((g=t.lcdHue)==null?void 0:g.hue)!==void 0?Math.round(t.lcdHue.hue):"N/A").replace("{logoHue}",((p=t.logoHue)==null?void 0:p.hue)!==void 0?Math.round(t.logoHue.hue):"N/A").replace("{btnHue}",((_=t.btnHue)==null?void 0:_.hue)!==void 0?Math.round(t.btnHue.hue):"N/A")})}return Qs[o]}return[`Unknown block message key: ${o||n}`];case"status":const l=ya[o]||ya[n];if(l){const c=typeof l=="function"?l(s):l;return Array.isArray(c)?c:[c]}return[`Status update from ${n||o}: ${s?JSON.stringify(s):"No data"}`];default:return[`Unknown message type: ${i} from ${n}`]}}class bp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.managers={},this.dom={},this.proxies={},this.debug=!0}init(){this.gsap=v.get("gsap"),this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements"),this.proxies=v.get("proxies"),this.managers={buttonManager:v.get("buttonManager"),dialManager:v.get("dialManager"),lensManager:v.get("lensManager"),lcdUpdater:v.get("lcdUpdater"),terminalManager:v.get("terminalManager")},this.debug&&console.log("[PhaseRunner INIT]")}run(t){return new Promise((e,i)=>{this.debug&&console.group(`[PhaseRunner] Executing Phase ${t.phase}: ${t.name}`);try{const n=this.gsap.timeline({onComplete:()=>{this.debug&&(console.log(`[PhaseRunner] <<<< COMPLETED >>>> Phase ${t.phase}: ${t.name}`),console.groupEnd()),e()},onError:o=>{this.debug&&(console.error(`[PhaseRunner] <<<< FAILED >>>> Phase ${t.phase}: ${t.name}`,o),console.groupEnd()),i(o)}});if(t.terminalMessageKey)if(this.debug&&console.log(`[PhaseRunner] Phase has terminalMessageKey: ${t.terminalMessageKey}`),t.phase===1){const o=this.gsap.timeline(),a=wu({type:"startup",messageKey:t.terminalMessageKey},{},this.config),l=this.managers.lcdUpdater.getLcdPowerOnTimeline(this.dom.terminalContainer,{profileName:"terminalScreenFlickerToDimlyLit",state:"dimly-lit"});o.add(l,0);const c=this.gsap.timeline(),h=[];a.forEach(d=>{const u=document.createElement("div");u.className="terminal-line",u.textContent=d,h.push(u)}),c.call(()=>{this.managers.terminalManager.reset(),this.dom.terminalLcdContentElement.append(...h),this.gsap.set(h,{autoAlpha:0})},[],0);const f=yo(h,"textFlickerToDimlyLit",{gsapInstance:this.gsap,stagger:.1});c.add(f.timeline,">"),o.add(c,l.duration()*.2),n.add(o,0)}else this.appState.emit("requestTerminalMessage",{type:"startup",source:t.name,messageKey:t.terminalMessageKey});t.animations&&Array.isArray(t.animations)&&t.animations.forEach(o=>this._buildAnimation(n,o));let s=t.duration||this.config.MIN_PHASE_DURATION_FOR_STEPPING;n.duration()<s&&n.to({},{duration:s-n.duration()}),n.play()}catch(n){console.error(`[PhaseRunner RUN] Error setting up Phase ${t.phase}:`,n),this.debug&&console.groupEnd(),i(n)}})}_buildAnimation(t,e){const i=e.position||">";switch(this.debug&&console.log("[PhaseRunner] Building animation:",e),e.type){case"tween":this._handleTween(t,e,i);break;case"flicker":this._handleSimpleFlicker(t,e,i);break;case"lcdPowerOn":this._handleLcdPowerOn(t,e,i);break;case"call":const n=e.deps?e.deps.map(o=>v.get(o)):[];t.call(e.function,n,i);break;case"lensEnergize":const s=this.managers.lensManager.energizeLensCoreStartup(e.targetPower,e.durationMs);s&&t.add(s,i);break;default:console.warn(`[PhaseRunner] Unknown animation type: ${e.type}`)}}_handleLcdPowerOn(t,e,i){const n=Array.isArray(e.target)?e.target.map(o=>this.dom[o]):[this.dom[e.target]],s=e.stagger||0;n.forEach((o,a)=>{if(o){const l=this.managers.lcdUpdater.getLcdPowerOnTimeline(o,{profileName:e.profile,state:e.state});t.add(l,`${i}+=${a*s}`)}})}_handleTween(t,e,i){let n=[];e.target==="dimmingFactors"?(n.push(this.proxies.LReductionProxy),e.vars.onUpdate=()=>{this.dom.root.style.setProperty("--startup-L-reduction-factor",this.proxies.LReductionProxy.value.toFixed(3))}):n=Array.isArray(e.target)?e.target.map(s=>this.dom[s]).filter(Boolean):[this.dom[e.target]],n.length>0&&t.to(n,e.vars,i)}_handleSimpleFlicker(t,e,i){let n=[],s=!1;if(e.target==="buttonGroup")n=this.managers.buttonManager.getButtonsByGroupIds(e.groups),s=!0;else if(typeof e.target=="string"){const a=this.managers.buttonManager.getButtonByAriaLabel(e.target);a&&(n.push(a.getElement()),s=!0)}else Array.isArray(e.target)&&(n=e.target.map(a=>this.dom[a]).filter(Boolean));if(n.length===0){this.debug&&console.warn("[PhaseRunner _handleSimpleFlicker] No elements found for:",e.target);return}const o=e.stagger||0;n.forEach((a,l)=>{var c;if(s){const h=this.managers.buttonManager.getButtonInstance(a);if(!h)return;let f=e.profile;if(e.profile.startsWith("buttonFlickerFromDimlyLitToFullyLit")){const u=e.target==="buttonGroup"?((c=this.config.DEFAULT_ASSIGNMENT_SELECTIONS[h.getGroupId()])==null?void 0:c.toString())===h.getValue():e.state.includes("is-selected"),g=e.profile.includes("Fast");f=u?g?"buttonFlickerFromDimlyLitToFullyLitSelectedFast":"buttonFlickerFromDimlyLitToFullyLitSelected":g?"buttonFlickerFromDimlyLitToFullyLitUnselectedFast":"buttonFlickerFromDimlyLitToFullyLitUnselected"}const d=this.managers.buttonManager.playFlickerToState(a,e.state,{profileName:f,phaseContext:`PhaseRunner_${f}`});d&&d.timeline&&t.add(d.timeline,`${i}+=${l*o}`)}else{const h=this.managers.lcdUpdater.getLcdPowerOnTimeline(a,{profileName:e.profile,state:e.state});t.add(h,`${i}+=${l*o}`)}})}}class Lp{constructor(){this.gsap=null,this.appState=null,this.buttonManager=null,this.configModule=null,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!0,this._updateResonance=this._updateResonance.bind(this)}init(){this.gsap=v.get("gsap"),this.appState=v.get("appState"),this.buttonManager=v.get("buttonManager"),this.configModule=v.get("config"),this.configModule.HARMONIC_RESONANCE_PARAMS?this.enableHarmonicResonance=this.configModule.HARMONIC_RESONANCE_PARAMS.ENABLED:(console.error("[AAM INIT] HARMONIC_RESONANCE_PARAMS not found in config. Disabling."),this.enableHarmonicResonance=!1),this.appState.subscribe("appStatusChanged",t=>this._handleAppStatusChange(t)),this.appState.subscribe("ambientPulse",({progress:t})=>this._handleAmbientPulse({progress:t})),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",t=>this._handleBeforeButtonTransition(t)),this.buttonManager.on("afterButtonTransition",t=>this._handleAfterButtonTransition(t))):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(this.appState.getAppStatus())}_updateResonance(){if(!this.isActive||!this.enableHarmonicResonance)return;const t=this.configModule.HARMONIC_RESONANCE_PARAMS,e=this.gsap.ticker.time,i=(Math.sin(e*Math.PI*2/t.PERIOD)+1)/2;this.appState.emit("ambientPulse",{progress:i})}_handleAmbientPulse({progress:t}){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance||!this.gsap.utils)return;const e=this.configModule.HARMONIC_RESONANCE_PARAMS,i=this.gsap.utils.interpolate(e.GLOW_OPACITY_RANGE[0],e.GLOW_OPACITY_RANGE[1],t),n=this.gsap.utils.interpolate(e.GLOW_SCALE_RANGE[0],e.GLOW_SCALE_RANGE[1],t),s=document.documentElement.style;s.setProperty("--harmonic-resonance-glow-opacity",i.toFixed(3)),s.setProperty("--harmonic-resonance-glow-scale",n.toFixed(3))}_handleAppStatusChange(t){const e=this.isActive;if(this.isActive=t==="interactive",this.isActive&&!e)this.enableHarmonicResonance&&this.resonanceTicker.add(this._updateResonance);else if(!this.isActive&&e&&this.enableHarmonicResonance){this.resonanceTicker.remove(this._updateResonance);const n=document.documentElement.style;n.removeProperty("--harmonic-resonance-glow-opacity"),n.removeProperty("--harmonic-resonance-glow-scale")}const i=this.buttonManager.getAllButtonInstances();for(const n of i)this.isActive?this._applyAmbientAnimation(n):(typeof n.stopHarmonicResonance=="function"&&n.stopHarmonicResonance(),typeof n.setCssIdleLightDriftActive=="function"&&n.setCssIdleLightDriftActive(!1))}_handleBeforeButtonTransition(t){this.isActive&&(typeof t.stopHarmonicResonance=="function"&&t.stopHarmonicResonance(),typeof t.setCssIdleLightDriftActive=="function"&&t.setCssIdleLightDriftActive(!1))}_handleAfterButtonTransition(t){this.isActive&&this._applyAmbientAnimation(t)}_applyAmbientAnimation(t){if(!this.isActive||!this.configModule||typeof t.stopHarmonicResonance!="function"||typeof t.setCssIdleLightDriftActive!="function")return;t.stopHarmonicResonance(),t.setCssIdleLightDriftActive(!1);const e=this.configModule.HARMONIC_RESONANCE_PARAMS,i=t.isSelected();t.getCurrentClasses().has(e.ELIGIBILITY_CLASS)&&(i?this.enableHarmonicResonance&&t.startHarmonicResonance():t.setCssIdleLightDriftActive(!0))}destroy(){this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance);const t=document.documentElement.style;t.removeProperty("--harmonic-resonance-glow-opacity"),t.removeProperty("--harmonic-resonance-glow-scale")}}class vp{constructor(){this.appState=null,this.config=null,this.buttonManager=null,this.debug=!0}init(){this.appState=v.get("appState"),this.config=v.get("config"),this.buttonManager=v.get("buttonManager"),this.appState.subscribe("resistiveShutdownStageChanged",t=>this.handleStageChange(t)),this.debug&&console.log("[RSC INIT]")}handlePowerOffClick(){if(this.appState.getIsMainPowerOffButtonDisabled()){this.debug&&console.log("[RSC] MAIN PWR OFF is disabled. Interaction blocked.");return}const t=this.appState.getResistiveShutdownStage();if(t<this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE){const e=t+1;this.debug&&console.log(`[RSC] Advancing resistive shutdown to stage ${e}.`),this.appState.setResistiveShutdownStage(e)}}handleStageChange({newStage:t}){if(this.debug&&console.log(`[RSC] Stage changed to ${t}`),t===0){this.appState.getIsMainPowerOffButtonDisabled()&&this.appState.setIsMainPowerOffButtonDisabled(!1);return}const e=`STAGE_${t}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[e];i&&(i.TERMINAL_MESSAGE_KEY&&this.appState.emit("requestTerminalMessage",{type:"status",messageKey:i.TERMINAL_MESSAGE_KEY}),this._updateLensAndDialTargets(i),this._updateHueAssignmentButtons(i),t===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE&&this.appState.setIsMainPowerOffButtonDisabled(!0))}_updateLensAndDialTargets(t){const e=this.appState.getDialState("A"),i=this.appState.getTrueLensPower();let n=e.hue,s=i;t.DIAL_A_HUE_TARGET_MODE==="absolute"&&(n=t.DIAL_A_HUE_VALUE),t.DIAL_B_POWER_TARGET_MODE==="increase_absolute_0_1"?s+=t.DIAL_B_POWER_VALUE:t.DIAL_B_POWER_TARGET_MODE==="absolute_100"&&(s=1),s=Lr(s,0,1),this.appState.updateDialState("A",{hue:n,targetHue:n}),this.appState.setTrueLensPower(s*100);const o=s*359.999,a=o*(this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG||1);this.appState.updateDialState("B",{hue:o,targetHue:o,rotation:a,targetRotation:a}),this.debug&&console.log(`[RSC _updateLensAndDialTargets] Synced state. New Lens Power: ${s.toFixed(3)}. New Dial B Hue: ${o.toFixed(2)}`)}_updateHueAssignmentButtons(t){if(!t.HUE_ASSIGN_TARGET_HUE)return;const e=t.HUE_ASSIGN_TARGET_HUE;let i=-1,n=360;this.config.HUE_ASSIGNMENT_ROW_HUES.forEach((s,o)=>{const a=Math.abs(s-e);a<n&&(n=a,i=o)}),i!==-1&&["btn","logo","lcd","env"].forEach(s=>{this.appState.setTargetColorProperties(s,this.config.HUE_ASSIGNMENT_ROW_HUES[i]),this.buttonManager.setGroupSelected(s,i.toString())})}}const Br=new vp;class Pp{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._cursorElement=null,this.debug=!0}init(){const t=v.get("domElements");this._terminalContainerElement=t.terminalContainer,this._terminalContentElement=t.terminalLcdContentElement,this._appState=v.get("appState"),this._configModule=v.get("config"),this._gsap=v.get("gsap"),this._setupDOM(),this._appState.subscribe("requestTerminalMessage",e=>this._handleRequestTerminalMessage(e)),this.debug&&console.log("[TerminalManager INIT]")}reset(){this.debug&&console.log("[TerminalManager] Resetting terminal."),this._messageQueue=[],this._isTyping=!1,this._terminalContentElement&&(this._terminalContentElement.innerHTML=""),this._cursorElement&&this._cursorElement.parentNode&&this._cursorElement.parentNode.removeChild(this._cursorElement),this._setCursorState("idle")}_setupDOM(){this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this.reset()}getTypingTimeline(t){this.debug&&console.log("[TerminalManager] getTypingTimeline called with:",t);const e=this._gsap.timeline();return this._setCursorState("typing"),t.forEach((i,n)=>{e.call(()=>this._addNewLineAndPrepareForTyping());const s=i.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3;e.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:i,delimiter:""},ease:"none",onUpdate:()=>this._currentLineElement.appendChild(this._cursorElement),onComplete:()=>this._currentLineElement.appendChild(this._cursorElement)})}),e.call(()=>this._setCursorState("idle")),e}_handleRequestTerminalMessage(t){this.debug&&console.log("[TerminalManager] Received message request:",t);const e=wu(t,{},this._configModule);this._messageQueue.push({...t,content:e}),this._isTyping||this._processQueue()}async _processQueue(){if(this._messageQueue.length===0){this._isTyping=!1,this._setCursorState("idle");return}this._isTyping=!0;const t=this._messageQueue.shift();this._setCursorState("typing");for(const e of t.content)this._addNewLineAndPrepareForTyping(),await this._typeLine(e,t.type);this._isTyping=!1,this._processQueue()}_addNewLineAndPrepareForTyping(){this._cursorElement&&this._cursorElement.parentNode&&this._cursorElement.parentNode.removeChild(this._cursorElement),this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines(),this._currentLineElement.appendChild(this._cursorElement)}_typeLine(t,e="status"){return new Promise(i=>{const n=e==="block"?this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR,s=t.length*n/1e3;this._gsap.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:t,delimiter:""},ease:"none",onUpdate:()=>this._currentLineElement.appendChild(this._cursorElement),onComplete:()=>{this._currentLineElement.appendChild(this._cursorElement),i()}})})}_scrollTerminal(){const t=this._terminalContentElement.parentElement;t&&(t.scrollTop=t.scrollHeight)}_limitMaxLines(){for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM;)this._terminalContentElement.firstChild&&this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_setCursorState(t){this._cursorElement&&(this._cursorElement.classList.toggle("is-blinking",t==="idle"),this._gsap.set(this._cursorElement,{opacity:1}),t==="idle"&&!this._currentLineElement&&this._addNewLineAndPrepareForTyping())}}const Ta=new Pp;class Op{constructor(){this.fsmInterpreter=null,this.previousFsmSnapshotValue=null,this.debug=!0,this.LReductionProxy={value:.85},this.opacityFactorProxy={value:.15}}init(){this.debug&&console.log("[StartupSequenceManager INIT]");const t=v.get("config");this.LReductionProxy.value=t.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,v.register("proxies",{LReductionProxy:this.LReductionProxy,opacityFactorProxy:this.opacityFactorProxy})}start(t=!0){this._resetVisualsAndState(t),this.fsmInterpreter=pd(mp),this.fsmInterpreter.subscribe(e=>{const i=JSON.stringify(e.value);(e.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(e),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"START_SEQUENCE",isStepThroughMode:t})}playNextPhase(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"NEXT_STEP_REQUESTED"})}playAllRemaining(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"SET_AUTO_PLAY"})}resetSequence(){this.start(!0)}_resetVisualsAndState(t){this.fsmInterpreter&&(this.fsmInterpreter.stop(),this.fsmInterpreter=null),this.previousFsmSnapshotValue=null;const e=v.get("domElements"),i=v.get("gsap"),n=v.get("config"),s=v.get("appState"),o=v.get("lcdUpdater");e.body.classList.contains("pre-boot")&&e.body.classList.remove("pre-boot"),i.killTweensOf([e.body,this.LReductionProxy,this.opacityFactorProxy]),this.LReductionProxy.value=n.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,e.root.style.setProperty("--startup-L-reduction-factor",this.LReductionProxy.value.toFixed(3)),e.root.style.setProperty("--startup-opacity-factor",this.opacityFactorProxy.value.toFixed(3)),e.root.style.setProperty("--startup-opacity-factor-boosted",Math.min(1,this.opacityFactorProxy.value*1.25).toFixed(3)),s.setAppStatus("starting-up"),s.setCurrentStartupPhaseNumber(-1),s.setTheme("dim"),s.setTrueLensPower(0),s.updateDialState("A",{hue:n.DEFAULT_DIAL_A_HUE,targetHue:n.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),s.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),v.get("buttonManager").setInitialDimStates(),v.get("lensManager").directUpdateLensVisuals(0),v.get("terminalManager").reset(),[e.terminalContainer,e.lcdA,e.lcdB].forEach(l=>{l&&o.setLcdState(l,"unlit",{phaseContext:"Reset"})}),i.set(e.body,{opacity:t?1:0})}_performThemeTransitionCleanup(){const t=v.get("domElements");t.body.classList.remove("is-transitioning-from-dim"),document.querySelectorAll(".animate-on-dim-exit").forEach(i=>i.classList.remove("animate-on-dim-exit")),[t.dialA,t.dialB].forEach(i=>{i&&i.classList.remove("is-active-for-startup")}),this.debug&&console.log("[SSM] Theme transition cleanup performed.")}_notifyFsmTransition(t){const e=v.get("appState"),i=v.get("debugManager"),n=this._getPhaseInfoFromSnapshot(t);e.emit("startup:phaseChanged",n),e.setCurrentStartupPhaseNumber(n.numericPhase);const s=t.matches("PAUSED")||t.matches("IDLE")||t.done;i.setNextPhaseButtonEnabled(s)}_getPhaseInfoFromSnapshot(t){const e=t.context.currentPhase,i=v.get("config").phaseConfigs,n=i&&e>=0&&e<i.length?i[e]:null;let s="N/A";t.matches("IDLE")?s="IDLE":t.matches("COMPLETE")?s="COMPLETE":t.matches("ERROR")?s="ERROR":n?s=n.name:typeof t.value=="string"?s=t.value:s=JSON.stringify(t.value);const o=i&&e+1<i.length?i[e+1]:null,a=t.nextEvents?t.nextEvents.join(", "):"N/A";return{numericPhase:e??-1,currentPhaseName:s,status:t.done?"completed":t.matches("PAUSED")?"paused":"running",description:`FSM State: ${JSON.stringify(t.value)}`,nextPhaseName:t.matches("PAUSED")&&o?o.name:a||"N/A",nextPhaseDescription:"N/A"}}}let _i=null,Bt={};function bu(r){!Bt.statusDiv||!Bt.phaseInfoDiv||(Bt.statusDiv.textContent=`Phase: ${r.currentPhaseName} (${r.status})`,Bt.phaseInfoDiv.textContent=`Next: ${r.nextPhaseName||"None"}`)}function xp(){_i&&_i.playNextPhase()}function Mp(){_i&&_i.playAllRemaining()}function Fp(){_i&&_i.resetSequence()}function Rp(r){bu(r)}function Lu(r){Bt.nextPhaseButton&&(Bt.nextPhaseButton.disabled=!r)}function vu(r){_i=v.get("startupSequenceManager");const t=v.get("appState");Bt={statusDiv:r.debugStatusDiv,phaseInfoDiv:r.debugPhaseInfo,nextPhaseButton:r.nextPhaseButton,playAllButton:r.playAllButton,resetButton:r.resetButton},Bt.nextPhaseButton&&Bt.nextPhaseButton.addEventListener("click",xp),Bt.playAllButton&&Bt.playAllButton.addEventListener("click",Mp),Bt.resetButton&&Bt.resetButton.addEventListener("click",Fp),t.subscribe("startup:phaseChanged",Rp),bu({currentPhaseName:"Idle",status:"ready",nextPhaseName:"IDLE_BASELINE"}),Lu(!0)}const Np=Object.freeze(Object.defineProperty({__proto__:null,init:vu,setNextPhaseButtonEnabled:Lu},Symbol.toStringTag,{value:"Module"}));class kp{constructor(t,e,i){if(!i)throw new Error("GSAP instance is required for MoodMatrix.");this.gsap=i,this.config=e,this.container=t,this.isContinuouslyScrambling=!1,this.currentScrambleTween=null,this.container.innerHTML="",this.nameEl=this.container.appendChild(document.createElement("div")),this.nameEl.className="display-container__row--name",this.nameEl.textContent="INITIALIZING",this.majorBlocksContainer=this.container.appendChild(document.createElement("div")),this.majorBlocksContainer.className="mood-matrix__row--major-blocks",this.fineDotsContainer=this.container.appendChild(document.createElement("div")),this.fineDotsContainer.className="fine-dot-row",this.majorBlockEls=[],this.fineDotEls=[],this._setupDOM()}_setupDOM(){for(let t=0;t<this.config.majorBlocks;t++){const e=document.createElement("div");e.className="major-block major-block--off",e.textContent="00",this.majorBlockEls.push(this.majorBlocksContainer.appendChild(e))}for(let t=0;t<this.config.fineDots;t++){const e=document.createElement("div");e.className="fine-dot fine-dot--off",this.fineDotEls.push(this.fineDotsContainer.appendChild(e))}}update({hue:t}){const e=(t%360+360)%360;if(!this.isContinuouslyScrambling){const i=Math.floor(e/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"UNKNOWN";this._updateMoodName(n)}this._updateMajorBlocks(e),this._updateFineProgress(Math.floor(e/(360/this.config.fineDots)))}startContinuousScramble(t){if(this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!0;const e=(t%360+360)%360,i=Math.floor(e/(360/this.config.majorBlocks))%this.config.majorBlocks,s=(this.config.moods[i]||"ERROR").length;this.currentScrambleTween&&this.currentScrambleTween.kill();const o="ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890";this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.15,text:{value:()=>{let a="";for(let l=0;l<s;l++)a+=o.charAt(Math.floor(Math.random()*o.length));return a},scrambleText:{chars:o,speed:1.8,tweenLength:!1}},ease:"none",repeat:-1,repeatRefresh:!0})}stopContinuousScramble(t){if(!this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!1;const e=(t%360+360)%360,i=Math.floor(e/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"RESOLVED";this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:n,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"})}_updateMoodName(t){this.nameEl.textContent!==t&&!this.isContinuouslyScrambling&&(this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:t,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"}))}_updateMajorBlocks(t){const{majorBlocks:e,moods:i}=this.config,n=360/e,s=Math.floor(t/n),o=t%n/n,a=100-Math.abs(o-.5)*100,l=100-a,c=o<.5?(s-1+e)%e:(s+1)%e;this.majorBlockEls.forEach((h,f)=>{let d="major-block--off",u="";const g=i[f]?i[f].charAt(0):"?";let p=0;f===s?(d="major-block--on",p=Math.min(9,Math.round(a/10))):f===c?(d="major-block--in-progress",p=Math.min(9,Math.round(l/10))):(d="major-block--off",p=0),u=`${g}${p}`;const _=`major-block ${d}`;h.className!==_&&(h.className=_),h.textContent!==u&&(h.textContent=u)})}_updateFineProgress(t){const e=this.config.fineDots,i=(t-1+e)%e,n=(t+1)%e,s=(t-2+e)%e,o=(t+2)%e,a=(t-3+e)%e,l=(t+3)%e;this.fineDotEls.forEach((c,h)=>{let f="fine-dot--off";h===t?f="fine-dot--on":h===i||h===n?f="fine-dot--in-progress-1":h===s||h===o?f="fine-dot--in-progress-2":(h===a||h===l)&&(f="fine-dot--in-progress-3");const d=`fine-dot ${f}`;c.className!==d&&(c.className=d)})}}class Bp{constructor(){this.appState=null,this.config=null,this.dom=null,this.gsap=null,this.moodMatrix=null,this.resonanceTimer=null,this.lastIsDragging=!1,this.moodLcdContent=null}init(){this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements"),this.gsap=v.get("gsap"),this.moodLcdContent=this.dom.lcdA.querySelector(".lcd-content-wrapper");const t={moods:this.config.MOOD_MATRIX_DEFINITIONS.map(e=>e.toUpperCase()),majorBlocks:this.config.V2_DISPLAY_PARAMS.MOOD_MAJOR_BLOCKS,fineDots:this.config.V2_DISPLAY_PARAMS.MOOD_FINE_DOTS};this.moodMatrix=new kp(this.moodLcdContent,t,this.gsap),this.appState.subscribe("dialUpdated",({id:e,state:i})=>{if(e==="A"){if(i.isDragging!==this.lastIsDragging){this.handleInteractionChange(i.isDragging,i.hue),this.lastIsDragging=i.isDragging;return}this.handleDialUpdate(i.hue)}}),this.handleDialUpdate(this.appState.getDialState("A").hue)}handleDialUpdate(t){this.moodMatrix.update({hue:t})}handleInteractionChange(t,e){const i=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdA.classList.remove("is-resonating"),t?this.moodMatrix.startContinuousScramble(e):(this.moodMatrix.stopContinuousScramble(e),this.resonanceTimer=setTimeout(()=>{const n=this.appState.getDialState("A");n&&n.hue>0&&this.dom.lcdA.classList.add("is-resonating")},i))}}class Up{constructor(t,e){this.config=e,this.container=t,this.container.innerHTML="",this.percentEl=this.container.appendChild(document.createElement("div")),this.percentEl.className="display-container__row--name",this.barsContainer=this.container.appendChild(document.createElement("div")),this.barsContainer.className="intensity-display__row--bars",this.dotsContainer=this.container.appendChild(document.createElement("div")),this.dotsContainer.className="fine-dot-row",this.barEls=[],this.dotEls=[],this._setupDOM()}_setupDOM(){for(let t=0;t<this.config.bars;t++){const e=document.createElement("div");e.className="intensity-bar intensity-bar--unselected",this.barEls.push(this.barsContainer.appendChild(e))}for(let t=0;t<this.config.dots;t++){const e=document.createElement("div");e.className="fine-dot fine-dot--off",this.dotEls.push(this.dotsContainer.appendChild(e))}}update({percentage:t}){this._updatePercentageText(t);const e=Math.round(t/100*this.config.bars);this._updateBars(e),this._updateDots(e)}_updatePercentageText(t){const e=`${Math.round(t)}%`;this.percentEl.textContent!==e&&(this.percentEl.textContent=e)}_updateBars(t){this.barEls.forEach((e,i)=>{const s=`intensity-bar ${i<t?"intensity-bar--selected":"intensity-bar--unselected"}`;e.className!==s&&(e.className=s)})}_updateDots(t){const e=t>0?t-1:-1,i=e-1;this.dotEls.forEach((n,s)=>{let o="fine-dot--off";s===e?o="fine-dot--on":s===i?o="fine-dot--in-progress-1":s<i&&(o="fine-dot--in-progress-2");const a=`fine-dot ${o}`;n.className!==a&&(n.className=a)})}}class Gp{constructor(){this.appState=null,this.config=null,this.dom=null,this.intensityDisplay=null,this.resonanceTimer=null}init(){console.log("[IntensityDisplayManager] init() called."),this.appState=v.get("appState"),this.config=v.get("config"),this.dom=v.get("domElements");const t={bars:this.config.V2_DISPLAY_PARAMS.INTENSITY_BARS,dots:this.config.V2_DISPLAY_PARAMS.INTENSITY_DOTS};this.intensityDisplay=new Up(this.dom.lcdB.querySelector(".lcd-content-wrapper"),t),this.appState.subscribe("dialUpdated",({id:e,state:i})=>{e==="B"&&this.handleDialUpdate(i.hue)}),this.appState.subscribe("dialBInteractionChange",e=>{const i=e==="dragging"||e==="settling";this.handleInteractionChange(i)}),this.handleDialUpdate(this.appState.getDialState("B").hue)}handleDialUpdate(t){const e=t/360*100;this.intensityDisplay.update({percentage:e})}handleInteractionChange(t){console.log(`[IntensityDisplayManager] handleInteractionChange() called. isInteracting: ${t}`);const e=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdB.classList.remove("is-resonating"),t||(this.resonanceTimer=setTimeout(()=>{const i=this.appState.getDialState("B");i&&i.hue>0&&(console.log("[IntensityDisplayManager] Starting resonance for Dial B."),this.dom.lcdB.classList.add("is-resonating"))},e))}}Mi.registerPlugin(Rn,lo,kn);const Fe={root:document.documentElement,body:document.body,allButtons:Array.from(document.querySelectorAll(".button-unit")),dialA:document.getElementById("dial-canvas-container-A"),dialB:document.getElementById("dial-canvas-container-B"),lcdA:document.getElementById("hue-lcd-A"),lcdB:document.getElementById("hue-lcd-B"),terminalContainer:document.querySelector(".terminal-block .actual-lcd-screen-element"),terminalLcdContentElement:document.getElementById("terminal-lcd-content"),colorLensGradient:document.getElementById("color-lens-gradient"),lensSuperGlow:document.getElementById("lens-super-glow"),logoContainer:document.getElementById("logo-container"),hueAssignmentColumns:Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]")),mainPowerOnBtn:document.getElementById("main-power-on-btn"),auxLightLowBtn:document.getElementById("aux-light-low-btn"),debugControls:document.getElementById("debug-controls"),btnNextPhase:document.getElementById("btn-next-phase"),btnPlayAll:document.getElementById("btn-play-all"),btnResetStartup:document.getElementById("btn-reset-startup-debug"),debugPhaseStatus:document.getElementById("debug-phase-status"),debugPhaseInfo:document.getElementById("debug-phase-info")};function Hp(r){Fe.hueAssignmentColumns.forEach(t=>{const e=t.dataset.assignmentTarget,i=t.querySelector(".control-group-label.label-top");t.innerHTML="",i&&t.appendChild(i);for(let n=0;n<12;n++){const s=document.createElement("div");s.className="button-unit button-unit--toggle button-unit--s",s.dataset.toggleValue=n.toString(),s.setAttribute("role","radio"),s.setAttribute("aria-label",`Assign ${e.toUpperCase()} to Hue from Row ${n+1}`),s.innerHTML='<div class="light-container" aria-hidden="true"><div class="light"></div></div><div class="button-bg-frame"></div>',t.appendChild(s),r.addButton(s,e)}})}function $p(){ru("buttonInteracted",({button:r})=>{const t=r.getGroupId(),e=r.getValue();if(t==="light"){const i=e==="on"?"light":"dark";Jl()!==i&&iu(i)}else if(t==="system-power")e==="off"?Br.handlePowerOffClick():e==="on"&&tu()>0&&su(0);else if(["env","lcd","logo","btn"].includes(t)){const i=It[parseInt(e,10)];eu(t,i)}else if(t==="skill-scan-group"||t==="fit-eval-group"){const n={"Scan Button 1":"BTN1_MESSAGE","Scan Button 2":"BTN2_MESSAGE","Scan Button 3":"BTN3_MESSAGE","Scan Button 4":"BTN4_MESSAGE"}[r.getElement().ariaLabel];n&&le("requestTerminalMessage",{type:"block",messageKey:n})}}),document.body.addEventListener("click",r=>{const t=r.target.closest(".button-unit");t&&v.get("buttonManager").handleInteraction(t)})}function Vp(){if(window.HUE9000_INITIALIZED)return;window.HUE9000_INITIALIZED=!0,console.log("[Main INIT] HUE 9000 Project Decouple Initializing..."),nu("loading");const r=new Ap,t=new Cp,e=new Ip,i=new Ep,n=new yp,s=new Tp,o=new Lp,a=new bp,l=new Op,c=new Bp,h=new Gp;v.register("gsap",Mi),v.register("appState",Zf),v.register("config",{...Nf,phaseConfigs:kr}),v.register("domElements",Fe),v.register("themeManager",r),v.register("lcdUpdater",t),v.register("dynamicStyleManager",e),v.register("buttonManager",i),v.register("dialManager",n),v.register("lensManager",s),v.register("ambientAnimationManager",o),v.register("terminalManager",Ta),v.register("resistiveShutdownController",Br),v.register("phaseRunner",a),v.register("startupSequenceManager",l),v.register("debugManager",Np),v.register("moodMatrixManager",c),v.register("intensityDisplayManager",h),l.init(),[r,t,e,i,n,s,o,Ta,Br,a,c,h].forEach(d=>{typeof d.init=="function"&&d.init()}),vu({debugStatusDiv:Fe.debugPhaseStatus,debugPhaseInfo:Fe.debugPhaseInfo,nextPhaseButton:Fe.btnNextPhase,playAllButton:Fe.btnPlayAll,resetButton:Fe.btnResetStartup}),Hp(i),i.discoverButtons(Fe.allButtons),$p(),l.start(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",Vp);
