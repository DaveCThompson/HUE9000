(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function Gt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Rl(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Je={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yn={duration:.5,overwrite:!1,delay:0},Uo,xe,ue,Ft=1e8,Be=1/Ft,Ks=Math.PI*2,Kc=Ks/4,Qc=0,xl=Math.sqrt,Zc=Math.cos,Jc=Math.sin,Le=function(e){return typeof e=="string"},fe=function(e){return typeof e=="function"},Kt=function(e){return typeof e=="number"},$o=function(e){return typeof e>"u"},kt=function(e){return typeof e=="object"},He=function(e){return e!==!1},Go=function(){return typeof window<"u"},Or=function(e){return fe(e)||Le(e)},Ol=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ue=Array.isArray,Qs=/(?:-?\.?\d|\.)+/gi,Ml=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,un=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ls=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Fl=/[+-]=-?[.\d]+/,kl=/[^,'"\[\]\s]+/gi,ed=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,de,wt,Zs,Ho,et={},qr={},Bl,Ul=function(e){return(qr=An(e,et))&&Xe},Yo=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},cr=function(e,t){return!t&&console.warn(e)},$l=function(e,t){return e&&(et[e]=t)&&qr&&(qr[e]=t)||et},dr=function(){return 0},td={suppressEvents:!0,isStart:!0,kill:!1},Gr={suppressEvents:!0,kill:!1},id={suppressEvents:!0},Vo={},di=[],Js={},Gl,je={},ws={},xa=30,Hr=[],zo="",Xo=function(e){var t=e[0],i,n;if(kt(t)||fe(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=Hr.length;n--&&!Hr[n].targetTest(t););i=Hr[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new du(e[n],i)))||e.splice(n,1);return e},Fi=function(e){return e._gsap||Xo(dt(e))[0]._gsap},Hl=function(e,t,i){return(i=e[t])&&fe(i)?e[t]():$o(i)&&e.getAttribute&&e.getAttribute(t)||i},Ye=function(e,t){return(e=e.split(",")).forEach(t)||e},_e=function(e){return Math.round(e*1e5)/1e5||0},Se=function(e){return Math.round(e*1e7)/1e7||0},gn=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},nd=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},Kr=function(){var e=di.length,t=di.slice(0),i,n;for(Js={},di.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Wo=function(e){return!!(e._initted||e._startAt||e.add)},Yl=function(e,t,i,n){di.length&&!xe&&Kr(),e.render(t,i,!!(xe&&t<0&&Wo(e))),di.length&&!xe&&Kr()},Vl=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(kl).length<2?t:Le(e)?e.trim():e},zl=function(e){return e},tt=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},rd=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},An=function(e,t){for(var i in t)e[i]=t[i];return e},Oa=function r(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=kt(t[i])?r(e[i]||(e[i]={}),t[i]):t[i]);return e},Qr=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},Jn=function(e){var t=e.parent||de,i=e.keyframes?rd(Ue(e.keyframes)):tt;if(He(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},sd=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},Xl=function(e,t,i,n,s){var o=e[n],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=o,t.parent=t._dp=e,t},ps=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=t._prev,o=t._next;s?s._next=o:e[i]===t&&(e[i]=o),o?o._prev=s:e[n]===t&&(e[n]=s),t._next=t._prev=t.parent=null},gi=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ki=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},od=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},eo=function(e,t,i,n){return e._startAt&&(xe?e._startAt.revert(Gr):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},ad=function r(e){return!e||e._ts&&r(e.parent)},Ma=function(e){return e._repeat?Cn(e._tTime,e=e.duration()+e._rDelay)*e:0},Cn=function(e,t){var i=Math.floor(e=Se(e/t));return e&&i===e?i-1:i},Zr=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gs=function(e){return e._end=Se(e._start+(e._tDur/Math.abs(e._ts||e._rts||Be)||0))},_s=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Se(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gs(e),i._dirty||ki(i,e)),e},Wl=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Zr(e.rawTime(),t),(!t._dur||Cr(0,t.totalDuration(),i)-t._tTime>Be)&&t.render(i,!0)),ki(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},xt=function(e,t,i,n){return t.parent&&gi(t),t._start=Se((Kt(i)?i:i||e!==de?ut(e,i,t):e._time)+t._delay),t._end=Se(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Xl(e,t,"_first","_last",e._sort?"_start":0),to(t)||(e._recent=t),n||Wl(e,t),e._ts<0&&_s(e,e._tTime),e},jl=function(e,t){return(et.ScrollTrigger||Yo("scrollTrigger",t))&&et.ScrollTrigger.create(t,e)},ql=function(e,t,i,n,s){if(qo(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!xe&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Gl!==Ke.frame)return di.push(e),e._lazy=[s,n],1},ld=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},to=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},ud=function(e,t,i,n){var s=e.ratio,o=t<0||!t&&(!e._start&&ld(e)&&!(!e._initted&&to(e))||(e._ts<0||e._dp._ts<0)&&!to(e))?0:1,a=e._rDelay,l=0,c,d,h;if(a&&e._repeat&&(l=Cr(0,e._tDur,t),d=Cn(l,a),e._yoyo&&d&1&&(o=1-o),d!==Cn(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||xe||n||e._zTime===Be||!t&&e._zTime){if(!e._initted&&ql(e,t,n,i,l))return;for(h=e._zTime,e._zTime=t||(i?Be:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&eo(e,t,i,!0),e._onUpdate&&!i&&Ze(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Ze(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&gi(e,1),!i&&!xe&&(Ze(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},cd=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},In=function(e,t,i,n){var s=e._repeat,o=Se(t)||0,a=e._tTime/e._tDur;return a&&!n&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Se(o*(s+1)+e._rDelay*s):o,a>0&&!n&&_s(e,e._tTime=e._tDur*a),e.parent&&gs(e),i||ki(e.parent,e),e},Fa=function(e){return e instanceof $e?ki(e):In(e,e._dur)},dd={_start:0,endTime:dr,totalDuration:dr},ut=function r(e,t,i){var n=e.labels,s=e._recent||dd,o=e.duration()>=Ft?s.endTime(!1):e._dur,a,l,c;return Le(t)&&(isNaN(t)||t in n)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:i).totalDuration()/100:1)):a<0?(t in n||(n[t]=o),n[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(Ue(i)?i[0]:i).totalDuration()),a>1?r(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},er=function(e,t,i){var n=Kt(t[1]),s=(n?2:1)+(e<2?0:1),o=t[s],a,l;if(n&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=He(l.vars.inherit)&&l.parent;o.immediateRender=He(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ee(t[0],o,t[s+1])},Di=function(e,t){return e||e===0?t(e):t},Cr=function(e,t,i){return i<e?e:i>t?t:i},ke=function(e,t){return!Le(e)||!(t=ed.exec(e))?"":t[1]},hd=function(e,t,i){return Di(i,function(n){return Cr(e,t,n)})},io=[].slice,Kl=function(e,t){return e&&kt(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&kt(e[0]))&&!e.nodeType&&e!==wt},fd=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var s;return Le(n)&&!t||Kl(n,1)?(s=i).push.apply(s,dt(n)):i.push(n)})||i},dt=function(e,t,i){return ue&&!t&&ue.selector?ue.selector(e):Le(e)&&!i&&(Zs||!Pn())?io.call((t||Ho).querySelectorAll(e),0):Ue(e)?fd(e,i):Kl(e)?io.call(e,0):e?[e]:[]},no=function(e){return e=dt(e)[0]||cr("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return dt(t,i.querySelectorAll?i:i===e?cr("Invalid scope")||Ho.createElement("div"):e)}},Ql=function(e){return e.sort(function(){return .5-Math.random()})},Zl=function(e){if(fe(e))return e;var t=kt(e)?e:{each:e},i=Bi(t.ease),n=t.from||0,s=parseFloat(t.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,c=t.axis,d=n,h=n;return Le(n)?d=h={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(d=n[0],h=n[1]),function(f,u,g){var p=(g||t).length,_=o[p],D,S,A,C,E,b,v,I,y;if(!_){if(y=t.grid==="auto"?0:(t.grid||[1,Ft])[1],!y){for(v=-1e8;v<(v=g[y++].getBoundingClientRect().left)&&y<p;);y<p&&y--}for(_=o[p]=[],D=l?Math.min(y,p)*d-.5:n%y,S=y===Ft?0:l?p*h/y-.5:n/y|0,v=0,I=Ft,b=0;b<p;b++)A=b%y-D,C=S-(b/y|0),_[b]=E=c?Math.abs(c==="y"?C:A):xl(A*A+C*C),E>v&&(v=E),E<I&&(I=E);n==="random"&&Ql(_),_.max=v-I,_.min=I,_.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(y>p?p-1:c?c==="y"?p/y:y:Math.max(y,p/y))||0)*(n==="edges"?-1:1),_.b=p<0?s-p:s,_.u=ke(t.amount||t.each)||0,i=i&&p<0?lu(i):i}return p=(_[f]-_.min)/_.max||0,Se(_.b+(i?i(p):p)*_.v)+_.u}},ro=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=Se(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(Kt(i)?0:ke(i))}},Jl=function(e,t){var i=Ue(e),n,s;return!i&&kt(e)&&(n=i=e.radius||Ft,e.values?(e=dt(e.values),(s=!Kt(e[0]))&&(n*=n)):e=ro(e.increment)),Di(t,i?fe(e)?function(o){return s=e(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Ft,d=0,h=e.length,f,u;h--;)s?(f=e[h].x-a,u=e[h].y-l,f=f*f+u*u):f=Math.abs(e[h]-a),f<c&&(c=f,d=h);return d=!n||c<=n?e[d]:o,s||d===o||Kt(o)?d:d+ke(o)}:ro(e))},eu=function(e,t,i,n){return Di(Ue(e)?!t:i===!0?!!(i=0):!n,function(){return Ue(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},pd=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(s,o){return o(s)},n)}},gd=function(e,t){return function(i){return e(parseFloat(i))+(t||ke(i))}},_d=function(e,t,i){return iu(e,t,0,1,i)},tu=function(e,t,i){return Di(i,function(n){return e[~~t(n)]})},md=function r(e,t,i){var n=t-e;return Ue(e)?tu(e,r(0,e.length),t):Di(i,function(s){return(n+(s-e)%n)%n+e})},Dd=function r(e,t,i){var n=t-e,s=n*2;return Ue(e)?tu(e,r(0,e.length-1),t):Di(i,function(o){return o=(s+(o-e)%s)%s||0,e+(o>n?s-o:o)})},hr=function(e){for(var t=0,i="",n,s,o,a;~(n=e.indexOf("random(",t));)o=e.indexOf(")",n),a=e.charAt(n+7)==="[",s=e.substr(n+7,o-n-7).match(a?kl:Qs),i+=e.substr(t,n-t)+eu(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},iu=function(e,t,i,n,s){var o=t-e,a=n-i;return Di(s,function(l){return i+((l-e)/o*a||0)})},Ed=function r(e,t,i,n){var s=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!s){var o=Le(e),a={},l,c,d,h,f;if(i===!0&&(n=1)&&(i=null),o)e={p:e},t={p:t};else if(Ue(e)&&!Ue(t)){for(d=[],h=e.length,f=h-2,c=1;c<h;c++)d.push(r(e[c-1],e[c]));h--,s=function(g){g*=h;var p=Math.min(f,~~g);return d[p](g-p)},i=t}else n||(e=An(Ue(e)?[]:{},e));if(!d){for(l in t)jo.call(a,e,l,"get",t[l]);s=function(g){return Zo(g,a)||(o?e.p:e)}}}return Di(i,s)},ka=function(e,t,i){var n=e.labels,s=Ft,o,a,l;for(o in n)a=n[o]-t,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ze=function(e,t,i){var n=e.vars,s=n[t],o=ue,a=e._ctx,l,c,d;if(s)return l=n[t+"Params"],c=n.callbackScope||e,i&&di.length&&Kr(),a&&(ue=a),d=l?s.apply(c,l):s.call(c),ue=o,d},zn=function(e){return gi(e),e.scrollTrigger&&e.scrollTrigger.kill(!!xe),e.progress()<1&&Ze(e,"onInterrupt"),e},cn,nu=[],ru=function(e){if(e)if(e=!e.name&&e.default||e,Go()||e.headless){var t=e.name,i=fe(e),n=t&&!i&&e.init?function(){this._props=[]}:e,s={init:dr,render:Zo,add:jo,kill:Md,modifier:Od,rawVars:0},o={targetTest:0,get:0,getSetter:Qo,aliases:{},register:0};if(Pn(),e!==n){if(je[t])return;tt(n,tt(Qr(e,s),o)),An(n.prototype,An(s,Qr(e,o))),je[n.prop=t]=n,e.targetTest&&(Hr.push(n),Vo[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}$l(t,n),e.register&&e.register(Xe,n,Ve)}else nu.push(e)},re=255,Xn={aqua:[0,re,re],lime:[0,re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,re],navy:[0,0,128],white:[re,re,re],olive:[128,128,0],yellow:[re,re,0],orange:[re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[re,0,0],pink:[re,192,203],cyan:[0,re,re],transparent:[re,re,re,0]},Ns=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*re+.5|0},su=function(e,t,i){var n=e?Kt(e)?[e>>16,e>>8&re,e&re]:0:Xn.black,s,o,a,l,c,d,h,f,u,g;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Xn[e])n=Xn[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&re,n&re,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&re,e&re]}else if(e.substr(0,3)==="hsl"){if(n=g=e.match(Qs),!t)l=+n[0]%360/360,c=+n[1]/100,d=+n[2]/100,o=d<=.5?d*(c+1):d+c-d*c,s=d*2-o,n.length>3&&(n[3]*=1),n[0]=Ns(l+1/3,s,o),n[1]=Ns(l,s,o),n[2]=Ns(l-1/3,s,o);else if(~e.indexOf("="))return n=e.match(Ml),i&&n.length<4&&(n[3]=1),n}else n=e.match(Qs)||Xn.transparent;n=n.map(Number)}return t&&!g&&(s=n[0]/re,o=n[1]/re,a=n[2]/re,h=Math.max(s,o,a),f=Math.min(s,o,a),d=(h+f)/2,h===f?l=c=0:(u=h-f,c=d>.5?u/(2-h-f):u/(h+f),l=h===s?(o-a)/u+(o<a?6:0):h===o?(a-s)/u+2:(s-o)/u+4,l*=60),n[0]=~~(l+.5),n[1]=~~(c*100+.5),n[2]=~~(d*100+.5)),i&&n.length<4&&(n[3]=1),n},ou=function(e){var t=[],i=[],n=-1;return e.split(hi).forEach(function(s){var o=s.match(un)||[];t.push.apply(t,o),i.push(n+=o.length+1)}),t.c=i,t},Ba=function(e,t,i){var n="",s=(e+n).match(hi),o=t?"hsla(":"rgba(",a=0,l,c,d,h;if(!s)return e;if(s=s.map(function(f){return(f=su(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(d=ou(e),l=i.c,l.join(n)!==d.c.join(n)))for(c=e.replace(hi,"1").split(un),h=c.length-1;a<h;a++)n+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(d.length?d:s.length?s:i).shift());if(!c)for(c=e.split(hi),h=c.length-1;a<h;a++)n+=c[a]+s[a];return n+c[h]},hi=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Xn)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Sd=/hsl[a]?\(/,au=function(e){var t=e.join(" "),i;if(hi.lastIndex=0,hi.test(t))return i=Sd.test(t),e[1]=Ba(e[1],i),e[0]=Ba(e[0],i,ou(e[1])),!0},fr,Ke=function(){var r=Date.now,e=500,t=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,c,d,h,f,u,g=function p(_){var D=r()-n,S=_===!0,A,C,E,b;if((D>e||D<0)&&(i+=D-t),n+=D,E=n-i,A=E-o,(A>0||S)&&(b=++h.frame,f=E-h.time*1e3,h.time=E=E/1e3,o+=A+(A>=s?4:s-A),C=1),S||(l=c(p)),C)for(u=0;u<a.length;u++)a[u](E,f,b,_)};return h={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(_){return f/(1e3/(_||60))},wake:function(){Bl&&(!Zs&&Go()&&(wt=Zs=window,Ho=wt.document||{},et.gsap=Xe,(wt.gsapVersions||(wt.gsapVersions=[])).push(Xe.version),Ul(qr||wt.GreenSockGlobals||!wt.gsap&&wt||{}),nu.forEach(ru)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=d||function(_){return setTimeout(_,o-h.time*1e3+1|0)},fr=1,g(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(l),fr=0,c=dr},lagSmoothing:function(_,D){e=_||1/0,t=Math.min(D||33,e)},fps:function(_){s=1e3/(_||240),o=h.time*1e3+s},add:function(_,D,S){var A=D?function(C,E,b,v){_(C,E,b,v),h.remove(A)}:_;return h.remove(_),a[S?"unshift":"push"](A),Pn(),A},remove:function(_,D){~(D=a.indexOf(_))&&a.splice(D,1)&&u>=D&&u--},_listeners:a},h}(),Pn=function(){return!fr&&Ke.wake()},W={},Td=/^[\d.\-M][\d.\-,\s]/,yd=/["']/g,Ad=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,c;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[n]=isNaN(c)?c.replace(yd,"").trim():+c,n=l.substr(a+1).trim();return t},Cd=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},Id=function(e){var t=(e+"").split("("),i=W[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Ad(t[1])]:Cd(e).split(",").map(Vl)):W._CE&&Td.test(e)?W._CE("",e):i},lu=function(e){return function(t){return 1-e(1-t)}},uu=function r(e,t){for(var i=e._first,n;i;)i instanceof $e?r(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?r(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},Bi=function(e,t){return e&&(fe(e)?e:W[e]||Id(e))||t},ji=function(e,t,i,n){i===void 0&&(i=function(l){return 1-t(1-l)}),n===void 0&&(n=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:n},o;return Ye(e,function(a){W[a]=et[a]=s,W[o=a.toLowerCase()]=i;for(var l in s)W[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=W[a+"."+l]=s[l]}),s},cu=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Rs=function r(e,t,i){var n=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),o=s/Ks*(Math.asin(1/n)||0),a=function(d){return d===1?1:n*Math.pow(2,-10*d)*Jc((d-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:cu(a);return s=Ks/s,l.config=function(c,d){return r(e,c,d)},l},xs=function r(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},n=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:cu(i);return n.config=function(s){return r(e,s)},n};Ye("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;ji(r+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});W.Linear.easeNone=W.none=W.Linear.easeIn;ji("Elastic",Rs("in"),Rs("out"),Rs());(function(r,e){var t=1/e,i=2*t,n=2.5*t,s=function(a){return a<t?r*a*a:a<i?r*Math.pow(a-1.5/e,2)+.75:a<n?r*(a-=2.25/e)*a+.9375:r*Math.pow(a-2.625/e,2)+.984375};ji("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);ji("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});ji("Circ",function(r){return-(xl(1-r*r)-1)});ji("Sine",function(r){return r===1?1:-Zc(r*Kc)+1});ji("Back",xs("in"),xs("out"),xs());W.SteppedEase=W.steps=et.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),s=t?1:0,o=1-Be;return function(a){return((n*Cr(0,o,a)|0)+s)*i}}};yn.ease=W["quad.out"];Ye("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return zo+=r+","+r+"Params,"});var du=function(e,t){this.id=Qc++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Hl,this.set=t?t.getSetter:Qo},pr=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,In(this,+t.duration,1,1),this.data=t.data,ue&&(this._ctx=ue,ue.data.push(this)),fr||Ke.wake()}var e=r.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,In(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(Pn(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(_s(this,i),!s._dp||s.parent||Wl(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&xt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Be||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Yl(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Ma(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Ma(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Cn(this._tTime,s)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Zr(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Cr(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),gs(this),od(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Be&&(this._tTime-=Be)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&xt(n,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(He(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zr(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=id);var n=xe;return xe=i,Wo(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),xe=n,this},e.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,Fa(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,Fa(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(ut(this,i),He(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,He(n)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-Be)},e.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},e.then=function(i){var n=this;return new Promise(function(s){var o=fe(i)?i:zl,a=function(){var c=n.then;n.then=null,fe(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=c),s(o),n.then=c};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},e.kill=function(){zn(this)},r}();tt(pr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var $e=function(r){Rl(e,r);function e(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=He(i.sortChildren),de&&xt(i.parent||de,Gt(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&jl(Gt(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(n,s,o){return er(0,arguments,this),this},t.from=function(n,s,o){return er(1,arguments,this),this},t.fromTo=function(n,s,o,a){return er(2,arguments,this),this},t.set=function(n,s,o){return s.duration=0,s.parent=this,Jn(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ee(n,s,ut(this,o),1),this},t.call=function(n,s,o){return xt(this,Ee.delayedCall(0,n,s),o)},t.staggerTo=function(n,s,o,a,l,c,d){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=d,o.parent=this,new Ee(n,o,ut(this,l)),this},t.staggerFrom=function(n,s,o,a,l,c,d){return o.runBackwards=1,Jn(o).immediateRender=He(o.immediateRender),this.staggerTo(n,s,o,a,l,c,d)},t.staggerFromTo=function(n,s,o,a,l,c,d,h){return a.startAt=o,Jn(a).immediateRender=He(a.immediateRender),this.staggerTo(n,s,a,l,c,d,h)},t.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,d=n<=0?0:Se(n),h=this._zTime<0!=n<0&&(this._initted||!c),f,u,g,p,_,D,S,A,C,E,b,v;if(this!==de&&d>l&&n>=0&&(d=l),d!==this._tTime||o||h){if(a!==this._time&&c&&(d+=this._time-a,n+=this._time-a),f=d,C=this._start,A=this._ts,D=!A,h&&(c||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(b=this._yoyo,_=c+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(_*100+n,s,o);if(f=Se(d%_),d===l?(p=this._repeat,f=c):(E=Se(d/_),p=~~E,p&&p===E&&(f=c,p--),f>c&&(f=c)),E=Cn(this._tTime,_),!a&&this._tTime&&E!==p&&this._tTime-E*_-this._dur<=0&&(E=p),b&&p&1&&(f=c-f,v=1),p!==E&&!this._lock){var I=b&&E&1,y=I===(b&&p&1);if(p<E&&(I=!I),a=I?0:d%c?c:d,this._lock=1,this.render(a||(v?0:Se(p*_)),s,!c)._lock=0,this._tTime=d,!s&&this.parent&&Ze(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),a&&a!==this._time||D!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,y&&(this._lock=2,a=I?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!D)return this;uu(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=cd(this,Se(a),Se(f)),S&&(d-=f-(f=S._start))),this._tTime=d,this._time=f,this._act=!A,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&d&&!s&&!E&&(Ze(this,"onStart"),this._tTime!==d))return this;if(f>=a&&n>=0)for(u=this._first;u;){if(g=u._next,(u._act||f>=u._start)&&u._ts&&S!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(f-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(f-u._start)*u._ts,s,o),f!==this._time||!this._ts&&!D){S=0,g&&(d+=this._zTime=-1e-8);break}}u=g}else{u=this._last;for(var O=n<0?n:f;u;){if(g=u._prev,(u._act||O<=u._end)&&u._ts&&S!==u){if(u.parent!==this)return this.render(n,s,o);if(u.render(u._ts>0?(O-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(O-u._start)*u._ts,s,o||xe&&Wo(u)),f!==this._time||!this._ts&&!D){S=0,g&&(d+=this._zTime=O?-1e-8:Be);break}}u=g}}if(S&&!s&&(this.pause(),S.render(f>=a?0:-1e-8)._zTime=f>=a?1:-1,this._ts))return this._start=C,gs(this),this.render(n,s,o);this._onUpdate&&!s&&Ze(this,"onUpdate",!0),(d===l&&this._tTime>=this.totalDuration()||!d&&a)&&(C===this._start||Math.abs(A)!==Math.abs(this._ts))&&(this._lock||((n||!c)&&(d===l&&this._ts>0||!d&&this._ts<0)&&gi(this,1),!s&&!(n<0&&!a)&&(d||a||!l)&&(Ze(this,d===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,s){var o=this;if(Kt(s)||(s=ut(this,s,n)),!(n instanceof pr)){if(Ue(n))return n.forEach(function(a){return o.add(a,s)}),this;if(Le(n))return this.addLabel(n,s);if(fe(n))n=Ee.delayedCall(0,n);else return this}return this!==n?xt(this,n,s):this},t.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Ee?s&&l.push(c):(o&&l.push(c),n&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},t.remove=function(n){return Le(n)?this.removeLabel(n):fe(n)?this.killTweensOf(n):(n.parent===this&&ps(this,n),n===this._recent&&(this._recent=this._last),ki(this))},t.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Se(Ke.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},t.addLabel=function(n,s){return this.labels[n]=ut(this,s),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,s,o){var a=Ee.delayedCall(0,s||dr,o);return a.data="isPause",this._hasPause=1,xt(this,a,ut(this,n))},t.removePause=function(n){var s=this._first;for(n=ut(this,n);s;)s._start===n&&s.data==="isPause"&&gi(s),s=s._next},t.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)oi!==a[l]&&a[l].kill(n,s);return this},t.getTweensOf=function(n,s){for(var o=[],a=dt(n),l=this._first,c=Kt(s),d;l;)l instanceof Ee?nd(l._targets,a)&&(c?(!oi||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(d=l.getTweensOf(a,s)).length&&o.push.apply(o,d),l=l._next;return o},t.tweenTo=function(n,s){s=s||{};var o=this,a=ut(o,n),l=s,c=l.startAt,d=l.onStart,h=l.onStartParams,f=l.immediateRender,u,g=Ee.to(o,tt({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Be,onStart:function(){if(o.pause(),!u){var _=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==_&&In(g,_,0,1).render(g._time,!0,!0),u=1}d&&d.apply(g,h||[])}},s));return f?g.render(0):g},t.tweenFromTo=function(n,s,o){return this.tweenTo(s,tt({startAt:{time:ut(this,n)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),ka(this,ut(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),ka(this,ut(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Be)},t.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=n);return ki(this)},t.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ki(this)},t.totalDuration=function(n){var s=0,o=this,a=o._last,l=Ft,c,d,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),d=a._start,d>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,xt(o,a,d-a._delay,1)._lock=0):l=d,d<0&&a._ts&&(s-=d,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=d/o._ts,o._time-=d,o._tTime-=d),o.shiftChildren(-d,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;In(o,o===de&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(n){if(de._ts&&(Yl(de,Zr(n,de)),Gl=Ke.frame),Ke.frame>=xa){xa+=Je.autoSleep||120;var s=de._first;if((!s||!s._ts)&&Je.autoSleep&&Ke._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ke.sleep()}}},e}(pr);tt($e.prototype,{_lock:0,_hasPause:0,_forcing:0});var Pd=function(e,t,i,n,s,o,a){var l=new Ve(this._pt,e,t,0,1,mu,null,s),c=0,d=0,h,f,u,g,p,_,D,S;for(l.b=i,l.e=n,i+="",n+="",(D=~n.indexOf("random("))&&(n=hr(n)),o&&(S=[i,n],o(S,e,t),i=S[0],n=S[1]),f=i.match(Ls)||[];h=Ls.exec(n);)g=h[0],p=n.substring(c,h.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),g!==f[d++]&&(_=parseFloat(f[d-1])||0,l._pt={_next:l._pt,p:p||d===1?p:",",s:_,c:g.charAt(1)==="="?gn(_,g)-_:parseFloat(g)-_,m:u&&u<4?Math.round:0},c=Ls.lastIndex);return l.c=c<n.length?n.substring(c,n.length):"",l.fp=a,(Fl.test(n)||D)&&(l.e=0),this._pt=l,l},jo=function(e,t,i,n,s,o,a,l,c,d){fe(n)&&(n=n(s||0,e,o));var h=e[t],f=i!=="get"?i:fe(h)?c?e[t.indexOf("set")||!fe(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,u=fe(h)?c?Nd:gu:Ko,g;if(Le(n)&&(~n.indexOf("random(")&&(n=hr(n)),n.charAt(1)==="="&&(g=gn(f,n)+(ke(f)||0),(g||g===0)&&(n=g))),!d||f!==n||so)return!isNaN(f*n)&&n!==""?(g=new Ve(this._pt,e,t,+f||0,n-(f||0),typeof h=="boolean"?xd:_u,0,u),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!h&&!(t in e)&&Yo(t,n),Pd.call(this,e,t,f,n,u,l||Je.stringFilter,c))},vd=function(e,t,i,n,s){if(fe(e)&&(e=tr(e,s,t,i,n)),!kt(e)||e.style&&e.nodeType||Ue(e)||Ol(e))return Le(e)?tr(e,s,t,i,n):e;var o={},a;for(a in e)o[a]=tr(e[a],s,t,i,n);return o},hu=function(e,t,i,n,s,o){var a,l,c,d;if(je[e]&&(a=new je[e]).init(s,a.rawVars?t[e]:vd(t[e],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new Ve(i._pt,s,e,0,1,a.render,a,0,a.priority),i!==cn))for(c=i._ptLookup[i._targets.indexOf(s)],d=a._props.length;d--;)c[a._props[d]]=l;return a},oi,so,qo=function r(e,t,i){var n=e.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,c=n.onUpdate,d=n.runBackwards,h=n.yoyoEase,f=n.keyframes,u=n.autoRevert,g=e._dur,p=e._startAt,_=e._targets,D=e.parent,S=D&&D.data==="nested"?D.vars.targets:_,A=e._overwrite==="auto"&&!Uo,C=e.timeline,E,b,v,I,y,O,R,$,N,Q,K,B,G;if(C&&(!f||!s)&&(s="none"),e._ease=Bi(s,yn.ease),e._yEase=h?lu(Bi(h===!0?s:h,yn.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!C&&!!n.runBackwards,!C||f&&!n.stagger){if($=_[0]?Fi(_[0]).harness:0,B=$&&n[$.prop],E=Qr(n,Vo),p&&(p._zTime<0&&p.progress(1),t<0&&d&&a&&!u?p.render(-1,!0):p.revert(d&&g?Gr:td),p._lazy=0),o){if(gi(e._startAt=Ee.set(_,tt({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!p&&He(l),startAt:null,delay:0,onUpdate:c&&function(){return Ze(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(xe||!a&&!u)&&e._startAt.revert(Gr),a&&g&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(d&&g&&!p){if(t&&(a=!1),v=tt({overwrite:!1,data:"isFromStart",lazy:a&&!p&&He(l),immediateRender:a,stagger:0,parent:D},E),B&&(v[$.prop]=B),gi(e._startAt=Ee.set(_,v)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(xe?e._startAt.revert(Gr):e._startAt.render(-1,!0)),e._zTime=t,!a)r(e._startAt,Be,Be);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&He(l)||l&&!g,b=0;b<_.length;b++){if(y=_[b],R=y._gsap||Xo(_)[b]._gsap,e._ptLookup[b]=Q={},Js[R.id]&&di.length&&Kr(),K=S===_?b:S.indexOf(y),$&&(N=new $).init(y,B||E,e,K,S)!==!1&&(e._pt=I=new Ve(e._pt,y,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(oe){Q[oe]=I}),N.priority&&(O=1)),!$||B)for(v in E)je[v]&&(N=hu(v,E,e,K,y,S))?N.priority&&(O=1):Q[v]=I=jo.call(e,y,v,"get",E[v],K,S,0,n.stringFilter);e._op&&e._op[b]&&e.kill(y,e._op[b]),A&&e._pt&&(oi=e,de.killTweensOf(y,Q,e.globalTime(t)),G=!e.parent,oi=0),e._pt&&l&&(Js[R.id]=1)}O&&Du(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!G,f&&t<=0&&C.render(Ft,!0,!0)},bd=function(e,t,i,n,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,h,f,u;if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,u=e._targets.length;u--;){if(d=f[u][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return so=1,e.vars[t]="+=0",qo(e,a),so=0,l?cr(t+" not eligible for reset"):1;c.push(d)}for(u=c.length;u--;)h=c[u],d=h._pt||h,d.s=(n||n===0)&&!s?n:d.s+(n||0)+o*d.c,d.c=i-d.s,h.e&&(h.e=_e(i)+ke(h.e)),h.b&&(h.b=d.s+ke(h.b))},Ld=function(e,t){var i=e[0]?Fi(e[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return t;s=An({},t);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},wd=function(e,t,i,n){var s=t.ease||n||"power1.inOut",o,a;if(Ue(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},tr=function(e,t,i,n,s){return fe(e)?e.call(t,i,n,s):Le(e)&&~e.indexOf("random(")?hr(e):e},fu=zo+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",pu={};Ye(fu+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return pu[r]=1});var Ee=function(r){Rl(e,r);function e(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:Jn(n))||this;var l=a.vars,c=l.duration,d=l.delay,h=l.immediateRender,f=l.stagger,u=l.overwrite,g=l.keyframes,p=l.defaults,_=l.scrollTrigger,D=l.yoyoEase,S=n.parent||de,A=(Ue(i)||Ol(i)?Kt(i[0]):"length"in n)?[i]:dt(i),C,E,b,v,I,y,O,R;if(a._targets=A.length?Xo(A):cr("GSAP target "+i+" not found. https://gsap.com",!Je.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=u,g||f||Or(c)||Or(d)){if(n=a.vars,C=a.timeline=new $e({data:"nested",defaults:p||{},targets:S&&S.data==="nested"?S.vars.targets:A}),C.kill(),C.parent=C._dp=Gt(a),C._start=0,f||Or(c)||Or(d)){if(v=A.length,O=f&&Zl(f),kt(f))for(I in f)~fu.indexOf(I)&&(R||(R={}),R[I]=f[I]);for(E=0;E<v;E++)b=Qr(n,pu),b.stagger=0,D&&(b.yoyoEase=D),R&&An(b,R),y=A[E],b.duration=+tr(c,Gt(a),E,y,A),b.delay=(+tr(d,Gt(a),E,y,A)||0)-a._delay,!f&&v===1&&b.delay&&(a._delay=d=b.delay,a._start+=d,b.delay=0),C.to(y,b,O?O(E,y,A):0),C._ease=W.none;C.duration()?c=d=0:a.timeline=0}else if(g){Jn(tt(C.vars.defaults,{ease:"none"})),C._ease=Bi(g.ease||n.ease||"none");var $=0,N,Q,K;if(Ue(g))g.forEach(function(B){return C.to(A,B,">")}),C.duration();else{b={};for(I in g)I==="ease"||I==="easeEach"||wd(I,g[I],b,g.easeEach);for(I in b)for(N=b[I].sort(function(B,G){return B.t-G.t}),$=0,E=0;E<N.length;E++)Q=N[E],K={ease:Q.e,duration:(Q.t-(E?N[E-1].t:0))/100*c},K[I]=Q.v,C.to(A,K,$),$+=K.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||a.duration(c=C.duration())}else a.timeline=0;return u===!0&&!Uo&&(oi=Gt(a),de.killTweensOf(A),oi=0),xt(S,Gt(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(h||!c&&!g&&a._start===Se(S._time)&&He(h)&&ad(Gt(a))&&S.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-d)||0)),_&&jl(Gt(a),_),a}var t=e.prototype;return t.render=function(n,s,o){var a=this._time,l=this._tDur,c=this._dur,d=n<0,h=n>l-Be&&!d?l:n<Be?0:n,f,u,g,p,_,D,S,A,C;if(!c)ud(this,n,s,o);else if(h!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(f=h,A=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&d)return this.totalTime(p*100+n,s,o);if(f=Se(h%p),h===l?(g=this._repeat,f=c):(_=Se(h/p),g=~~_,g&&g===_?(f=c,g--):f>c&&(f=c)),D=this._yoyo&&g&1,D&&(C=this._yEase,f=c-f),_=Cn(this._tTime,p),f===a&&!o&&this._initted&&g===_)return this._tTime=h,this;g!==_&&(A&&this._yEase&&uu(A,D),this.vars.repeatRefresh&&!D&&!this._lock&&f!==p&&this._initted&&(this._lock=o=1,this.render(Se(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(ql(this,d?n:f,o,s,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==_))return this;if(c!==this._dur)return this.render(n,s,o)}if(this._tTime=h,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(C||this._ease)(f/c),this._from&&(this.ratio=S=1-S),!a&&h&&!s&&!_&&(Ze(this,"onStart"),this._tTime!==h))return this;for(u=this._pt;u;)u.r(S,u.d),u=u._next;A&&A.render(n<0?n:A._dur*A._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(d&&eo(this,n,s,o),Ze(this,"onUpdate")),this._repeat&&g!==_&&this.vars.onRepeat&&!s&&this.parent&&Ze(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(d&&!this._onUpdate&&eo(this,n,!0,!0),(n||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&gi(this,1),!s&&!(d&&!a)&&(h||a||D)&&(Ze(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},t.resetTo=function(n,s,o,a,l){fr||Ke.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||qo(this,c),d=this._ease(c/this._dur),bd(this,n,s,o,a,d,c,l)?this.resetTo(n,s,o,a,1):(_s(this,0),this.parent||Xl(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?zn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!xe),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,oi&&oi.vars.overwrite!==!0)._first||zn(this),this.parent&&o!==this.timeline.totalDuration()&&In(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?dt(n):a,c=this._ptLookup,d=this._pt,h,f,u,g,p,_,D;if((!s||s==="all")&&sd(a,l))return s==="all"&&(this._pt=0),zn(this);for(h=this._op=this._op||[],s!=="all"&&(Le(s)&&(p={},Ye(s,function(S){return p[S]=1}),s=p),s=Ld(a,s)),D=a.length;D--;)if(~l.indexOf(a[D])){f=c[D],s==="all"?(h[D]=s,g=f,u={}):(u=h[D]=h[D]||{},g=s);for(p in g)_=f&&f[p],_&&((!("kill"in _.d)||_.d.kill(p)===!0)&&ps(this,_,"_pt"),delete f[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&d&&zn(this),this},e.to=function(n,s){return new e(n,s,arguments[2])},e.from=function(n,s){return er(1,arguments)},e.delayedCall=function(n,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(n,s,o){return er(2,arguments)},e.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(n,s)},e.killTweensOf=function(n,s,o){return de.killTweensOf(n,s,o)},e}(pr);tt(Ee.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ye("staggerTo,staggerFrom,staggerFromTo",function(r){Ee[r]=function(){var e=new $e,t=io.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var Ko=function(e,t,i){return e[t]=i},gu=function(e,t,i){return e[t](i)},Nd=function(e,t,i,n){return e[t](n.fp,i)},Rd=function(e,t,i){return e.setAttribute(t,i)},Qo=function(e,t){return fe(e[t])?gu:$o(e[t])&&e.setAttribute?Rd:Ko},_u=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},xd=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},mu=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Zo=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Od=function(e,t,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(e,t,i),s=o},Md=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?ps(this,t,"_pt"):t.dep||(i=1),t=n;return!i},Fd=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},Du=function(e){for(var t=e._pt,i,n,s,o;t;){for(i=t._next,n=s;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:o)?t._prev._next=t:s=t,(t._next=n)?n._prev=t:o=t,t=i}e._pt=s},Ve=function(){function r(t,i,n,s,o,a,l,c,d){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||_u,this.d=l||this,this.set=c||Ko,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=Fd,this.m=i,this.mt=s,this.tween=n},r}();Ye(zo+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Vo[r]=1});et.TweenMax=et.TweenLite=Ee;et.TimelineLite=et.TimelineMax=$e;de=new $e({sortChildren:!1,defaults:yn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Je.stringFilter=au;var Ui=[],Yr={},kd=[],Ua=0,Bd=0,Os=function(e){return(Yr[e]||kd).map(function(t){return t()})},oo=function(){var e=Date.now(),t=[];e-Ua>2&&(Os("matchMediaInit"),Ui.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,c;for(a in n)o=wt.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),Os("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Ua=e,Os("matchMedia"))},Eu=function(){function r(t,i){this.selector=i&&no(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Bd++,t&&this.add(t)}var e=r.prototype;return e.add=function(i,n,s){fe(i)&&(s=n,n=i,i=fe);var o=this,a=function(){var c=ue,d=o.selector,h;return c&&c!==o&&c.data.push(o),s&&(o.selector=no(s)),ue=o,h=n.apply(o,arguments),fe(h)&&o._r.push(h),ue=c,o.selector=d,o.isReverted=!1,h};return o.last=a,i===fe?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var n=ue;ue=null,i(this),ue=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof Ee&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(d){return a.splice(a.indexOf(d),1)}));for(a.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,h){return h.g-d.g||-1/0}).forEach(function(d){return d.t.revert(i)}),l=s.data.length;l--;)c=s.data[l],c instanceof $e?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Ee)&&c.revert&&c.revert(i);s._r.forEach(function(d){return d(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=Ui.length;o--;)Ui[o].id===this.id&&Ui.splice(o,1)},e.revert=function(i){this.kill(i||{})},r}(),Ud=function(){function r(t){this.contexts=[],this.scope=t,ue&&ue.data.push(this)}var e=r.prototype;return e.add=function(i,n,s){kt(i)||(i={matches:i});var o=new Eu(0,s||this.scope),a=o.conditions={},l,c,d;ue&&!o.selector&&(o.selector=ue.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(c in i)c==="all"?d=1:(l=wt.matchMedia(i[c]),l&&(Ui.indexOf(o)<0&&Ui.push(o),(a[c]=l.matches)&&(d=1),l.addListener?l.addListener(oo):l.addEventListener("change",oo)));return d&&n(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),Jr={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return ru(n)})},timeline:function(e){return new $e(e)},getTweensOf:function(e,t){return de.getTweensOf(e,t)},getProperty:function(e,t,i,n){Le(e)&&(e=dt(e)[0]);var s=Fi(e||{}).get,o=i?zl:Vl;return i==="native"&&(i=""),e&&(t?o((je[t]&&je[t].get||s)(e,t,i,n)):function(a,l,c){return o((je[a]&&je[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=dt(e),e.length>1){var n=e.map(function(d){return Xe.quickSetter(d,t,i)}),s=n.length;return function(d){for(var h=s;h--;)n[h](d)}}e=e[0]||{};var o=je[t],a=Fi(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(d){var h=new o;cn._pt=0,h.init(e,i?d+i:d,cn,0,[e]),h.render(1,h),cn._pt&&Zo(1,cn)}:a.set(e,l);return o?c:function(d){return c(e,l,i?d+i:d,a,1)}},quickTo:function(e,t,i){var n,s=Xe.to(e,tt((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,c,d){return s.resetTo(t,l,c,d)};return o.tween=s,o},isTweening:function(e){return de.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Bi(e.ease,yn.ease)),Oa(yn,e||{})},config:function(e){return Oa(Je,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,s=e.defaults,o=e.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!je[a]&&!et[a]&&cr(t+" effect requires "+a+" plugin.")}),ws[t]=function(a,l,c){return i(dt(a),tt(l||{},s),c)},o&&($e.prototype[t]=function(a,l,c){return this.add(ws[t](a,kt(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){W[e]=Bi(t)},parseEase:function(e,t){return arguments.length?Bi(e,t):W},getById:function(e){return de.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new $e(e),n,s;for(i.smoothChildTiming=He(e.smoothChildTiming),de.remove(i),i._dp=0,i._time=i._tTime=de._time,n=de._first;n;)s=n._next,(t||!(!n._dur&&n instanceof Ee&&n.vars.onComplete===n._targets[0]))&&xt(i,n,n._start-n._delay),n=s;return xt(de,i,0),i},context:function(e,t){return e?new Eu(e,t):ue},matchMedia:function(e){return new Ud(e)},matchMediaRefresh:function(){return Ui.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||oo()},addEventListener:function(e,t){var i=Yr[e]||(Yr[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Yr[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:md,wrapYoyo:Dd,distribute:Zl,random:eu,snap:Jl,normalize:_d,getUnit:ke,clamp:hd,splitColor:su,toArray:dt,selector:no,mapRange:iu,pipe:pd,unitize:gd,interpolate:Ed,shuffle:Ql},install:Ul,effects:ws,ticker:Ke,updateRoot:$e.updateRoot,plugins:je,globalTimeline:de,core:{PropTween:Ve,globals:$l,Tween:Ee,Timeline:$e,Animation:pr,getCache:Fi,_removeLinkedListItem:ps,reverting:function(){return xe},context:function(e){return e&&ue&&(ue.data.push(e),e._ctx=ue),ue},suppressOverwrites:function(e){return Uo=e}}};Ye("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Jr[r]=Ee[r]});Ke.add($e.updateRoot);cn=Jr.to({},{duration:0});var $d=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Gd=function(e,t){var i=e._targets,n,s,o;for(n in t)for(s=i.length;s--;)o=e._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=$d(o,n)),o&&o.modifier&&o.modifier(t[n],e,i[s],n))},Ms=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,c;if(Le(s)&&(l={},Ye(s,function(d){return l[d]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Gd(a,s)}}}},Xe=Jr.registerPlugin({name:"attr",init:function(e,t,i,n,s){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)xe?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Ms("roundProps",ro),Ms("modifiers"),Ms("snap",Jl))||Jr;Ee.version=$e.version=Xe.version="3.13.0";Bl=1;Go()&&Pn();W.Power0;W.Power1;W.Power2;W.Power3;W.Power4;W.Linear;W.Quad;W.Cubic;W.Quart;W.Quint;W.Strong;W.Elastic;W.Back;W.SteppedEase;W.Bounce;W.Sine;W.Expo;W.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var $a,ai,_n,Jo,Oi,Ga,ea,Hd=function(){return typeof window<"u"},Qt={},vi=180/Math.PI,mn=Math.PI/180,qi=Math.atan2,Ha=1e8,ta=/([A-Z])/g,Yd=/(left|right|width|margin|padding|x)/i,Vd=/[\s,\(]\S/,Ot={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ao=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},zd=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Xd=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Wd=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Su=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Tu=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},jd=function(e,t,i){return e.style[t]=i},qd=function(e,t,i){return e.style.setProperty(t,i)},Kd=function(e,t,i){return e._gsap[t]=i},Qd=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Zd=function(e,t,i,n,s){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},Jd=function(e,t,i,n,s){var o=e._gsap;o[t]=i,o.renderTransform(s,o)},he="transform",ze=he+"Origin",eh=function r(e,t){var i=this,n=this.target,s=n.style,o=n._gsap;if(e in Qt&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Ot[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=Ht(n,a)}):this.tfm[e]=o.x?o[e]:Ht(n,e),e===ze&&(this.tfm.zOrigin=o.zOrigin);else return Ot.transform.split(",").forEach(function(a){return r.call(i,a,t)});if(this.props.indexOf(he)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(ze,t,"")),e=he}(s||t)&&this.props.push(e,t,s[e])},yu=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},th=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(ta,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=ea(),(!s||!s.isStart)&&!i[he]&&(yu(i),n.zOrigin&&i[ze]&&(i[ze]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},Au=function(e,t){var i={target:e,props:[],revert:th,save:eh};return e._gsap||Xe.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},Cu,lo=function(e,t){var i=ai.createElementNS?ai.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ai.createElement(e);return i&&i.style?i:ai.createElement(e)},ht=function r(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(ta,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&r(e,vn(t)||t,1)||""},Ya="O,Moz,ms,Ms,Webkit".split(","),vn=function(e,t,i){var n=t||Oi,s=n.style,o=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Ya[o]+e in s););return o<0?null:(o===3?"ms":o>=0?Ya[o]:"")+e},uo=function(){Hd()&&window.document&&($a=window,ai=$a.document,_n=ai.documentElement,Oi=lo("div")||{style:{}},lo("div"),he=vn(he),ze=he+"Origin",Oi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Cu=!!vn("perspective"),ea=Xe.core.reverting,Jo=1)},Va=function(e){var t=e.ownerSVGElement,i=lo("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),s;n.style.display="block",i.appendChild(n),_n.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),_n.removeChild(i),s},za=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Iu=function(e){var t,i;try{t=e.getBBox()}catch{t=Va(e),i=1}return t&&(t.width||t.height)||i||(t=Va(e)),t&&!t.width&&!t.x&&!t.y?{x:+za(e,["x","cx","x1"])||0,y:+za(e,["y","cy","y1"])||0,width:0,height:0}:t},Pu=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Iu(e))},Vi=function(e,t){if(t){var i=e.style,n;t in Qt&&t!==ze&&(t=he),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(ta,"-$1").toLowerCase())):i.removeAttribute(t)}},li=function(e,t,i,n,s,o){var a=new Ve(e._pt,t,i,0,1,o?Tu:Su);return e._pt=a,a.b=n,a.e=s,e._props.push(i),a},Xa={deg:1,rad:1,turn:1},ih={grid:1,flex:1},_i=function r(e,t,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=Oi.style,l=Yd.test(t),c=e.tagName.toLowerCase()==="svg",d=(c?"client":"offset")+(l?"Width":"Height"),h=100,f=n==="px",u=n==="%",g,p,_,D;if(n===o||!s||Xa[n]||Xa[o])return s;if(o!=="px"&&!f&&(s=r(e,t,i,"px")),D=e.getCTM&&Pu(e),(u||o==="%")&&(Qt[t]||~t.indexOf("adius")))return g=D?e.getBBox()[l?"width":"height"]:e[d],_e(u?s/g*h:s/100*g);if(a[l?"width":"height"]=h+(f?o:n),p=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!c?e:e.parentNode,D&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===ai||!p.appendChild)&&(p=ai.body),_=p._gsap,_&&u&&_.width&&l&&_.time===Ke.time&&!_.uncache)return _e(s/_.width*h);if(u&&(t==="height"||t==="width")){var S=e.style[t];e.style[t]=h+n,g=e[d],S?e.style[t]=S:Vi(e,t)}else(u||o==="%")&&!ih[ht(p,"display")]&&(a.position=ht(e,"position")),p===e&&(a.position="static"),p.appendChild(Oi),g=Oi[d],p.removeChild(Oi),a.position="absolute";return l&&u&&(_=Fi(p),_.time=Ke.time,_.width=p[d]),_e(f?g*s/h:g&&s?h/g*s:0)},Ht=function(e,t,i,n){var s;return Jo||uo(),t in Ot&&t!=="transform"&&(t=Ot[t],~t.indexOf(",")&&(t=t.split(",")[0])),Qt[t]&&t!=="transform"?(s=_r(e,n),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:ts(ht(e,ze))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=es[t]&&es[t](e,t,i)||ht(e,t)||Hl(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?_i(e,t,s,i)+i:s},nh=function(e,t,i,n){if(!i||i==="none"){var s=vn(t,e,1),o=s&&ht(e,s,1);o&&o!==i?(t=s,i=o):t==="borderColor"&&(i=ht(e,"borderTopColor"))}var a=new Ve(this._pt,e.style,t,0,1,mu),l=0,c=0,d,h,f,u,g,p,_,D,S,A,C,E;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=ht(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=e.style[t],e.style[t]=n,n=ht(e,t)||n,p?e.style[t]=p:Vi(e,t)),d=[i,n],au(d),i=d[0],n=d[1],f=i.match(un)||[],E=n.match(un)||[],E.length){for(;h=un.exec(n);)_=h[0],S=n.substring(l,h.index),g?g=(g+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(g=1),_!==(p=f[c++]||"")&&(u=parseFloat(p)||0,C=p.substr((u+"").length),_.charAt(1)==="="&&(_=gn(u,_)+C),D=parseFloat(_),A=_.substr((D+"").length),l=un.lastIndex-A.length,A||(A=A||Je.units[t]||C,l===n.length&&(n+=A,a.e+=A)),C!==A&&(u=_i(e,t,p,A)||0),a._pt={_next:a._pt,p:S||c===1?S:",",s:u,c:D-u,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=t==="display"&&n==="none"?Tu:Su;return Fl.test(n)&&(a.e=0),this._pt=a,a},Wa={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},rh=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=Wa[i]||i,t[1]=Wa[n]||n,t.join(" ")},sh=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,s=t.u,o=i._gsap,a,l,c;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],Qt[a]&&(l=1,a=a==="transformOrigin"?ze:he),Vi(i,a);l&&(Vi(i,he),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",_r(i,1),o.uncache=1,yu(n)))}},es={clearProps:function(e,t,i,n,s){if(s.data!=="isFromStart"){var o=e._pt=new Ve(e._pt,t,i,0,0,sh);return o.u=n,o.pr=-10,o.tween=s,e._props.push(i),1}}},gr=[1,0,0,1,0,0],vu={},bu=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},ja=function(e){var t=ht(e,he);return bu(t)?gr:t.substr(7).match(Ml).map(_e)},ia=function(e,t){var i=e._gsap||Fi(e),n=e.style,s=ja(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?gr:s):(s===gr&&!e.offsetParent&&e!==_n&&!i.svg&&(l=n.display,n.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,_n.appendChild(e)),s=ja(e),l?n.display=l:Vi(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):_n.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},co=function(e,t,i,n,s,o){var a=e._gsap,l=s||ia(e,!0),c=a.xOrigin||0,d=a.yOrigin||0,h=a.xOffset||0,f=a.yOffset||0,u=l[0],g=l[1],p=l[2],_=l[3],D=l[4],S=l[5],A=t.split(" "),C=parseFloat(A[0])||0,E=parseFloat(A[1])||0,b,v,I,y;i?l!==gr&&(v=u*_-g*p)&&(I=C*(_/v)+E*(-p/v)+(p*S-_*D)/v,y=C*(-g/v)+E*(u/v)-(u*S-g*D)/v,C=I,E=y):(b=Iu(e),C=b.x+(~A[0].indexOf("%")?C/100*b.width:C),E=b.y+(~(A[1]||A[0]).indexOf("%")?E/100*b.height:E)),n||n!==!1&&a.smooth?(D=C-c,S=E-d,a.xOffset=h+(D*u+S*p)-D,a.yOffset=f+(D*g+S*_)-S):a.xOffset=a.yOffset=0,a.xOrigin=C,a.yOrigin=E,a.smooth=!!n,a.origin=t,a.originIsAbsolute=!!i,e.style[ze]="0px 0px",o&&(li(o,a,"xOrigin",c,C),li(o,a,"yOrigin",d,E),li(o,a,"xOffset",h,a.xOffset),li(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",C+" "+E)},_r=function(e,t){var i=e._gsap||new du(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=ht(e,ze)||"0",d,h,f,u,g,p,_,D,S,A,C,E,b,v,I,y,O,R,$,N,Q,K,B,G,oe,pt,Pt,z,j,J,Z,it;return d=h=f=p=_=D=S=A=C=0,u=g=1,i.svg=!!(e.getCTM&&Pu(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[he]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[he]!=="none"?l[he]:"")),n.scale=n.rotate=n.translate="none"),v=ia(e,i.svg),i.svg&&(i.uncache?(oe=e.getBBox(),c=i.xOrigin-oe.x+"px "+(i.yOrigin-oe.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),co(e,G||c,!!G||i.originIsAbsolute,i.smooth!==!1,v)),E=i.xOrigin||0,b=i.yOrigin||0,v!==gr&&(R=v[0],$=v[1],N=v[2],Q=v[3],d=K=v[4],h=B=v[5],v.length===6?(u=Math.sqrt(R*R+$*$),g=Math.sqrt(Q*Q+N*N),p=R||$?qi($,R)*vi:0,S=N||Q?qi(N,Q)*vi+p:0,S&&(g*=Math.abs(Math.cos(S*mn))),i.svg&&(d-=E-(E*R+b*N),h-=b-(E*$+b*Q))):(it=v[6],J=v[7],Pt=v[8],z=v[9],j=v[10],Z=v[11],d=v[12],h=v[13],f=v[14],I=qi(it,j),_=I*vi,I&&(y=Math.cos(-I),O=Math.sin(-I),G=K*y+Pt*O,oe=B*y+z*O,pt=it*y+j*O,Pt=K*-O+Pt*y,z=B*-O+z*y,j=it*-O+j*y,Z=J*-O+Z*y,K=G,B=oe,it=pt),I=qi(-N,j),D=I*vi,I&&(y=Math.cos(-I),O=Math.sin(-I),G=R*y-Pt*O,oe=$*y-z*O,pt=N*y-j*O,Z=Q*O+Z*y,R=G,$=oe,N=pt),I=qi($,R),p=I*vi,I&&(y=Math.cos(I),O=Math.sin(I),G=R*y+$*O,oe=K*y+B*O,$=$*y-R*O,B=B*y-K*O,R=G,K=oe),_&&Math.abs(_)+Math.abs(p)>359.9&&(_=p=0,D=180-D),u=_e(Math.sqrt(R*R+$*$+N*N)),g=_e(Math.sqrt(B*B+it*it)),I=qi(K,B),S=Math.abs(I)>2e-4?I*vi:0,C=Z?1/(Z<0?-Z:Z):0),i.svg&&(G=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!bu(ht(e,he)),G&&e.setAttribute("transform",G))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(u*=-1,S+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,S+=S<=0?180:-180)),t=t||i.uncache,i.x=d-((i.xPercent=d&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=_e(u),i.scaleY=_e(g),i.rotation=_e(p)+a,i.rotationX=_e(_)+a,i.rotationY=_e(D)+a,i.skewX=S+a,i.skewY=A+a,i.transformPerspective=C+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(n[ze]=ts(c)),i.xOffset=i.yOffset=0,i.force3D=Je.force3D,i.renderTransform=i.svg?ah:Cu?Lu:oh,i.uncache=0,i},ts=function(e){return(e=e.split(" "))[0]+" "+e[1]},Fs=function(e,t,i){var n=ke(t);return _e(parseFloat(t)+parseFloat(_i(e,"x",i+"px",n)))+n},oh=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Lu(e,t)},Ai="0deg",$n="0px",Ci=") ",Lu=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,d=i.rotationY,h=i.rotationX,f=i.skewX,u=i.skewY,g=i.scaleX,p=i.scaleY,_=i.transformPerspective,D=i.force3D,S=i.target,A=i.zOrigin,C="",E=D==="auto"&&e&&e!==1||D===!0;if(A&&(h!==Ai||d!==Ai)){var b=parseFloat(d)*mn,v=Math.sin(b),I=Math.cos(b),y;b=parseFloat(h)*mn,y=Math.cos(b),o=Fs(S,o,v*y*-A),a=Fs(S,a,-Math.sin(b)*-A),l=Fs(S,l,I*y*-A+A)}_!==$n&&(C+="perspective("+_+Ci),(n||s)&&(C+="translate("+n+"%, "+s+"%) "),(E||o!==$n||a!==$n||l!==$n)&&(C+=l!==$n||E?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Ci),c!==Ai&&(C+="rotate("+c+Ci),d!==Ai&&(C+="rotateY("+d+Ci),h!==Ai&&(C+="rotateX("+h+Ci),(f!==Ai||u!==Ai)&&(C+="skew("+f+", "+u+Ci),(g!==1||p!==1)&&(C+="scale("+g+", "+p+Ci),S.style[he]=C||"translate(0, 0)"},ah=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,d=i.skewY,h=i.scaleX,f=i.scaleY,u=i.target,g=i.xOrigin,p=i.yOrigin,_=i.xOffset,D=i.yOffset,S=i.forceCSS,A=parseFloat(o),C=parseFloat(a),E,b,v,I,y;l=parseFloat(l),c=parseFloat(c),d=parseFloat(d),d&&(d=parseFloat(d),c+=d,l+=d),l||c?(l*=mn,c*=mn,E=Math.cos(l)*h,b=Math.sin(l)*h,v=Math.sin(l-c)*-f,I=Math.cos(l-c)*f,c&&(d*=mn,y=Math.tan(c-d),y=Math.sqrt(1+y*y),v*=y,I*=y,d&&(y=Math.tan(d),y=Math.sqrt(1+y*y),E*=y,b*=y)),E=_e(E),b=_e(b),v=_e(v),I=_e(I)):(E=h,I=f,b=v=0),(A&&!~(o+"").indexOf("px")||C&&!~(a+"").indexOf("px"))&&(A=_i(u,"x",o,"px"),C=_i(u,"y",a,"px")),(g||p||_||D)&&(A=_e(A+g-(g*E+p*v)+_),C=_e(C+p-(g*b+p*I)+D)),(n||s)&&(y=u.getBBox(),A=_e(A+n/100*y.width),C=_e(C+s/100*y.height)),y="matrix("+E+","+b+","+v+","+I+","+A+","+C+")",u.setAttribute("transform",y),S&&(u.style[he]=y)},lh=function(e,t,i,n,s){var o=360,a=Le(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?vi:1),c=l-n,d=n+c+"deg",h,f;return a&&(h=s.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-360)),h==="cw"&&c<0?c=(c+o*Ha)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*Ha)%o-~~(c/o)*o)),e._pt=f=new Ve(e._pt,t,i,n,c,zd),f.e=d,f.u="deg",e._props.push(i),f},qa=function(e,t){for(var i in t)e[i]=t[i];return e},uh=function(e,t,i){var n=qa({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,d,h,f,u,g;n.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[he]=t,a=_r(i,1),Vi(i,he),i.setAttribute("transform",c)):(c=getComputedStyle(i)[he],o[he]=t,a=_r(i,1),o[he]=c);for(l in Qt)c=n[l],d=a[l],c!==d&&s.indexOf(l)<0&&(u=ke(c),g=ke(d),h=u!==g?_i(i,l,c,g):parseFloat(c),f=parseFloat(d),e._pt=new Ve(e._pt,a,l,h,f-h,ao),e._pt.u=g||0,e._props.push(l));qa(a,n)};Ye("padding,margin,Width,Radius",function(r,e){var t="Top",i="Right",n="Bottom",s="Left",o=(e<3?[t,i,n,s]:[t+s,t+i,n+i,n+s]).map(function(a){return e<2?r+a:"border"+a+r});es[e>1?"border"+r:r]=function(a,l,c,d,h){var f,u;if(arguments.length<4)return f=o.map(function(g){return Ht(a,g,c)}),u=f.join(" "),u.split(f[0]).length===5?f[0]:u;f=(d+"").split(" "),u={},o.forEach(function(g,p){return u[g]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(l,u,h)}});var wu={name:"css",register:uo,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,s){var o=this._props,a=e.style,l=i.vars.startAt,c,d,h,f,u,g,p,_,D,S,A,C,E,b,v,I;Jo||uo(),this.styles=this.styles||Au(e),I=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(d=t[p],!(je[p]&&hu(p,t,i,n,e,s)))){if(u=typeof d,g=es[p],u==="function"&&(d=d.call(i,n,e,s),u=typeof d),u==="string"&&~d.indexOf("random(")&&(d=hr(d)),g)g(this,e,p,d,i)&&(v=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),d+="",hi.lastIndex=0,hi.test(c)||(_=ke(c),D=ke(d)),D?_!==D&&(c=_i(e,p,c,D)+D):_&&(d+=_),this.add(a,"setProperty",c,d,n,s,0,0,p),o.push(p),I.push(p,0,a[p]);else if(u!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(i,n,e,s):l[p],Le(c)&&~c.indexOf("random(")&&(c=hr(c)),ke(c+"")||c==="auto"||(c+=Je.units[p]||ke(Ht(e,p))||""),(c+"").charAt(1)==="="&&(c=Ht(e,p))):c=Ht(e,p),f=parseFloat(c),S=u==="string"&&d.charAt(1)==="="&&d.substr(0,2),S&&(d=d.substr(2)),h=parseFloat(d),p in Ot&&(p==="autoAlpha"&&(f===1&&Ht(e,"visibility")==="hidden"&&h&&(f=0),I.push("visibility",0,a.visibility),li(this,a,"visibility",f?"inherit":"hidden",h?"inherit":"hidden",!h)),p!=="scale"&&p!=="transform"&&(p=Ot[p],~p.indexOf(",")&&(p=p.split(",")[0]))),A=p in Qt,A){if(this.styles.save(p),u==="string"&&d.substring(0,6)==="var(--"&&(d=ht(e,d.substring(4,d.indexOf(")"))),h=parseFloat(d)),C||(E=e._gsap,E.renderTransform&&!t.parseTransform||_r(e,t.parseTransform),b=t.smoothOrigin!==!1&&E.smooth,C=this._pt=new Ve(this._pt,a,he,0,1,E.renderTransform,E,0,-1),C.dep=1),p==="scale")this._pt=new Ve(this._pt,E,"scaleY",E.scaleY,(S?gn(E.scaleY,S+h):h)-E.scaleY||0,ao),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){I.push(ze,0,a[ze]),d=rh(d),E.svg?co(e,d,0,b,0,this):(D=parseFloat(d.split(" ")[2])||0,D!==E.zOrigin&&li(this,E,"zOrigin",E.zOrigin,D),li(this,a,p,ts(c),ts(d)));continue}else if(p==="svgOrigin"){co(e,d,1,b,0,this);continue}else if(p in vu){lh(this,E,p,f,S?gn(f,S+d):d);continue}else if(p==="smoothOrigin"){li(this,E,"smooth",E.smooth,d);continue}else if(p==="force3D"){E[p]=d;continue}else if(p==="transform"){uh(this,d,e);continue}}else p in a||(p=vn(p)||p);if(A||(h||h===0)&&(f||f===0)&&!Vd.test(d)&&p in a)_=(c+"").substr((f+"").length),h||(h=0),D=ke(d)||(p in Je.units?Je.units[p]:_),_!==D&&(f=_i(e,p,c,D)),this._pt=new Ve(this._pt,A?E:a,p,f,(S?gn(f,S+h):h)-f,!A&&(D==="px"||p==="zIndex")&&t.autoRound!==!1?Wd:ao),this._pt.u=D||0,_!==D&&D!=="%"&&(this._pt.b=c,this._pt.r=Xd);else if(p in a)nh.call(this,e,p,c,S?S+d:d);else if(p in e)this.add(e,p,c||e[p],S?S+d:d,n,s);else if(p!=="parseTransform"){Yo(p,d);continue}A||(p in a?I.push(p,0,a[p]):typeof e[p]=="function"?I.push(p,2,e[p]()):I.push(p,1,c||e[p])),o.push(p)}}v&&Du(this)},render:function(e,t){if(t.tween._time||!ea())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Ht,aliases:Ot,getSetter:function(e,t,i){var n=Ot[t];return n&&n.indexOf(",")<0&&(t=n),t in Qt&&t!==ze&&(e._gsap.x||Ht(e,"x"))?i&&Ga===i?t==="scale"?Qd:Kd:(Ga=i||{})&&(t==="scale"?Zd:Jd):e.style&&!$o(e.style[t])?jd:~t.indexOf("-")?qd:Qo(e,t)},core:{_removeProperty:Vi,_getMatrix:ia}};Xe.utils.checkPrefix=vn;Xe.core.getStyleSaver=Au;(function(r,e,t,i){var n=Ye(r+","+e+","+t,function(s){Qt[s]=1});Ye(e,function(s){Je.units[s]="deg",vu[s]=1}),Ot[n[13]]=r+","+e,Ye(i,function(s){var o=s.split(":");Ot[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ye("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Je.units[r]="px"});Xe.registerPlugin(wu);var ct=Xe.registerPlugin(wu)||Xe;ct.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Wt,$i,na,ms,Wn,Vr,is,ir,yt="transform",ho=yt+"Origin",Nu,Ru=function(e){var t=e.ownerDocument||e;for(!(yt in e.style)&&("msTransform"in e.style)&&(yt="msTransform",ho=yt+"Origin");t.parentNode&&(t=t.parentNode););if($i=window,is=new zi,t){Wt=t,na=t.documentElement,ms=t.body,ir=Wt.createElementNS("http://www.w3.org/2000/svg","g"),ir.style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Nu=n.offsetParent!==i,s.removeChild(i))}return t},ch=function(e){for(var t,i;e&&e!==ms;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},xu=[],Ou=[],dh=function(){return $i.pageYOffset||Wt.scrollTop||na.scrollTop||ms.scrollTop||0},hh=function(){return $i.pageXOffset||Wt.scrollLeft||na.scrollLeft||ms.scrollLeft||0},ra=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},fh=function r(e){if($i.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return r(e)},ks=function r(e,t){if(e.parentNode&&(Wt||Ru(e))){var i=ra(e),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",o=t!==2?0:100,a=t===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=Wt.createElementNS?Wt.createElementNS(n.replace(/^https/,"http"),s):Wt.createElement(s);return t&&(i?(Vr||(Vr=r(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+o+","+a+")"),Vr.appendChild(c)):(Wn||(Wn=r(e),Wn.style.cssText=l),c.style.cssText=l+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",Wn.appendChild(c))),c}throw"Need document and parent."},ph=function(e){for(var t=new zi,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},gh=function(e){var t=e.getCTM(),i;return t||(i=e.style[yt],e.style[yt]="none",e.appendChild(ir),t=ir.getCTM(),e.removeChild(ir),i?e.style[yt]=i:e.style.removeProperty(yt.replace(/([A-Z])/g,"-$1").toLowerCase())),t||is.clone()},_h=function(e,t){var i=ra(e),n=e===i,s=i?xu:Ou,o=e.parentNode,a=o&&!i&&o.shadowRoot&&o.shadowRoot.appendChild?o.shadowRoot:o,l,c,d,h,f,u;if(e===$i)return e;if(s.length||s.push(ks(e,1),ks(e,2),ks(e,3)),l=i?Vr:Wn,i)n?(d=gh(e),h=-d.e/d.a,f=-d.f/d.d,c=is):e.getBBox?(d=e.getBBox(),c=e.transform?e.transform.baseVal:{},c=c.numberOfItems?c.numberOfItems>1?ph(c):c.getItem(0).matrix:is,h=c.a*d.x+c.c*d.y,f=c.b*d.x+c.d*d.y):(c=new zi,h=f=0),(n?i:o).appendChild(l),l.setAttribute("transform","matrix("+c.a+","+c.b+","+c.c+","+c.d+","+(c.e+h)+","+(c.f+f)+")");else{if(h=f=0,Nu)for(c=e.offsetParent,d=e;d&&(d=d.parentNode)&&d!==c&&d.parentNode;)($i.getComputedStyle(d)[yt]+"").length>4&&(h=d.offsetLeft,f=d.offsetTop,d=0);if(u=$i.getComputedStyle(e),u.position!=="absolute"&&u.position!=="fixed")for(c=e.offsetParent;o&&o!==c;)h+=o.scrollLeft||0,f+=o.scrollTop||0,o=o.parentNode;d=l.style,d.top=e.offsetTop-f+"px",d.left=e.offsetLeft-h+"px",d[yt]=u[yt],d[ho]=u[ho],d.position=u.position==="fixed"?"fixed":"absolute",a.appendChild(l)}return l},Bs=function(e,t,i,n,s,o,a){return e.a=t,e.b=i,e.c=n,e.d=s,e.e=o,e.f=a,e},zi=function(){function r(t,i,n,s,o,a){t===void 0&&(t=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),Bs(this,t,i,n,s,o,a)}var e=r.prototype;return e.inverse=function(){var i=this.a,n=this.b,s=this.c,o=this.d,a=this.e,l=this.f,c=i*o-n*s||1e-10;return Bs(this,o/c,-n/c,-s/c,i/c,(s*l-o*a)/c,-(i*l-n*a)/c)},e.multiply=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f,d=i.a,h=i.c,f=i.b,u=i.d,g=i.e,p=i.f;return Bs(this,d*n+f*o,d*s+f*a,h*n+u*o,h*s+u*a,l+g*n+p*o,c+g*s+p*a)},e.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var n=this.a,s=this.b,o=this.c,a=this.d,l=this.e,c=this.f;return n===i.a&&s===i.b&&o===i.c&&a===i.d&&l===i.e&&c===i.f},e.apply=function(i,n){n===void 0&&(n={});var s=i.x,o=i.y,a=this.a,l=this.b,c=this.c,d=this.d,h=this.e,f=this.f;return n.x=s*a+o*c+h||0,n.y=s*l+o*d+f||0,n},r}();function bi(r,e,t,i){if(!r||!r.parentNode||(Wt||Ru(r)).documentElement===r)return new zi;var n=ch(r),s=ra(r),o=s?xu:Ou,a=_h(r),l=o[0].getBoundingClientRect(),c=o[1].getBoundingClientRect(),d=o[2].getBoundingClientRect(),h=a.parentNode,f=fh(r),u=new zi((c.left-l.left)/100,(c.top-l.top)/100,(d.left-l.left)/100,(d.top-l.top)/100,l.left+(f?0:hh()),l.top+(f?0:dh()));if(h.removeChild(a),n)for(l=n.length;l--;)c=n[l],c.scaleX=c.scaleY=0,c.renderTransform(1,c);return e?u.inverse():u}function Ka(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mh(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var X,se,Qe,It,jt,Us,Yt,fo,jn,ui,Mu,po,mr,sa,qn,Dt,Kn,zr,Fu,go,ns=0,ku=function(){return typeof window<"u"},Bu=function(){return X||ku()&&(X=window.gsap)&&X.registerPlugin&&X},ri=function(e){return typeof e=="function"},nr=function(e){return typeof e=="object"},St=function(e){return typeof e>"u"},Xr=function(){return!1},rr="transform",_o="transformOrigin",ti=function(e){return Math.round(e*1e4)/1e4},Gn=Array.isArray,Mr=function(e,t){var i=Qe.createElementNS?Qe.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):Qe.createElement(e);return i.style?i:Qe.createElement(e)},Qa=180/Math.PI,Ki=1e20,Dh=new zi,ii=Date.now||function(){return new Date().getTime()},Gi=[],Dn={},Eh=0,Sh=/^(?:a|input|textarea|button|select)$/i,Za=0,Qi={},$t={},Uu=function(e,t){var i={},n;for(n in e)i[n]=t?e[n]*t:e[n];return i},Th=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ja=function r(e,t){for(var i=e.length,n;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),n=e[i].children,n&&n.length&&r(n,t)},$u=function(){return Gi.forEach(function(e){return e()})},yh=function(e){Gi.push(e),Gi.length===1&&X.ticker.add($u)},el=function(){return!Gi.length&&X.ticker.remove($u)},tl=function(e){for(var t=Gi.length;t--;)Gi[t]===e&&Gi.splice(t,1);X.to(el,{overwrite:!0,delay:15,duration:0,onComplete:el,data:"_draggable"})},Ah=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Te=function(e,t,i,n){if(e.addEventListener){var s=mr[t];n=n||(Mu?{passive:!1}:null),e.addEventListener(s||t,i,n),s&&t!==s&&e.addEventListener(t,i,n)}},De=function(e,t,i,n){if(e.removeEventListener){var s=mr[t];e.removeEventListener(s||t,i,n),s&&t!==s&&e.removeEventListener(t,i,n)}},ot=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},Ch=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},Ih=function r(e){sa=e.touches&&ns<e.touches.length,De(e.target,"touchend",r)},il=function(e){sa=e.touches&&ns<e.touches.length,Te(e.target,"touchend",Ih)},En=function(e){return se.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Sn=function(e){return se.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},nl=function r(e,t){Te(e,"scroll",t),bn(e.parentNode)||r(e.parentNode,t)},rl=function r(e,t){De(e,"scroll",t),bn(e.parentNode)||r(e.parentNode,t)},bn=function(e){return!e||e===It||e.nodeType===9||e===Qe.body||e===se||!e.nodeType||!e.parentNode},sl=function(e,t){var i=t==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,bn(e)?Math.max(It[n],jt[n])-(se["inner"+i]||It[s]||jt[s]):e[n]-e[s])},$s=function r(e,t){var i=sl(e,"x"),n=sl(e,"y");bn(e)?e=$t:r(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=n,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},Gs=function(e,t,i){var n=e.style;n&&(St(n[t])&&(t=jn(t,e)||t),i==null?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},Dr=function(e){return se.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},Ii={},Zi=function(e){if(e===se)return Ii.left=Ii.top=0,Ii.width=Ii.right=It.clientWidth||e.innerWidth||jt.clientWidth||0,Ii.height=Ii.bottom=(e.innerHeight||0)-20<It.clientHeight?It.clientHeight:e.innerHeight||jt.clientHeight||0,Ii;var t=e.ownerDocument||Qe,i=St(e.pageX)?!e.nodeType&&!St(e.left)&&!St(e.top)?e:ui(e)[0].getBoundingClientRect():{left:e.pageX-Sn(t),top:e.pageY-En(t),right:e.pageX-Sn(t)+1,bottom:e.pageY-En(t)+1};return St(i.right)&&!St(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):St(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},ge=function(e,t,i){var n=e.vars,s=n[i],o=e._listeners[t],a;return ri(s)&&(a=s.apply(n.callbackScope||e,n[i+"Params"]||[e.pointerEvent])),o&&e.dispatchEvent(t)===!1&&(a=!1),a},ol=function(e,t){var i=ui(e)[0],n,s,o;return!i.nodeType&&i!==se?St(e.left)?(s=e.min||e.minX||e.minRotation||0,n=e.min||e.minY||0,{left:s,top:n,width:(e.max||e.maxX||e.maxRotation||0)-s,height:(e.max||e.maxY||0)-n}):(o={x:0,y:0},{left:e.left-o.x,top:e.top-o.y,width:e.width,height:e.height}):Ph(i,t)},at={},Ph=function(e,t){t=ui(t)[0];var i=e.getBBox&&e.ownerSVGElement,n=e.ownerDocument||Qe,s,o,a,l,c,d,h,f,u,g,p,_,D;if(e===se)a=En(n),s=Sn(n),o=s+(n.documentElement.clientWidth||e.innerWidth||n.body.clientWidth||0),l=a+((e.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight||n.body.clientHeight||0);else{if(t===se||St(t))return e.getBoundingClientRect();s=a=0,i?(g=e.getBBox(),p=g.width,_=g.height):(e.viewBox&&(g=e.viewBox.baseVal)&&(s=g.x||0,a=g.y||0,p=g.width,_=g.height),p||(D=Dr(e),g=D.boxSizing==="border-box",p=(parseFloat(D.width)||e.clientWidth||0)+(g?0:parseFloat(D.borderLeftWidth)+parseFloat(D.borderRightWidth)),_=(parseFloat(D.height)||e.clientHeight||0)+(g?0:parseFloat(D.borderTopWidth)+parseFloat(D.borderBottomWidth)))),o=p,l=_}return e===t?{left:s,top:a,width:o-s,height:l-a}:(c=bi(t,!0).multiply(bi(e)),d=c.apply({x:s,y:a}),h=c.apply({x:o,y:a}),f=c.apply({x:o,y:l}),u=c.apply({x:s,y:l}),s=Math.min(d.x,h.x,f.x,u.x),a=Math.min(d.y,h.y,f.y,u.y),{left:s,top:a,width:Math.max(d.x,h.x,f.x,u.x)-s,height:Math.max(d.y,h.y,f.y,u.y)-a})},Hs=function(e,t,i,n,s,o){var a={},l,c,d;if(t)if(s!==1&&t instanceof Array){if(a.end=l=[],d=t.length,nr(t[0]))for(c=0;c<d;c++)l[c]=Uu(t[c],s);else for(c=0;c<d;c++)l[c]=t[c]*s;i+=1.1,n-=1.1}else ri(t)?a.end=function(h){var f=t.call(e,h),u,g;if(s!==1)if(nr(f)){u={};for(g in f)u[g]=f[g]*s;f=u}else f*=s;return f}:a.end=t;return(i||i===0)&&(a.max=i),(n||n===0)&&(a.min=n),o&&(a.velocity=0),a},vh=function r(e){var t;return!e||!e.getAttribute||e===jt?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(Sh.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:r(e.parentNode)},Fr=function(e,t){for(var i=e.length,n;i--;)n=e[i],n.ondragstart=n.onselectstart=t?null:Xr,X.set(n,{lazy:!0,userSelect:t?"text":"none"})},bh=function r(e){if(Dr(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return r(e)},Gu,mo,Lh=function(e,t){e=X.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),n=i.style,s=e.firstChild,o=0,a=0,l=e.scrollTop,c=e.scrollLeft,d=e.scrollWidth,h=e.scrollHeight,f=0,u=0,g=0,p,_,D,S,A,C;Gu&&t.force3D!==!1?(A="translate3d(",C="px,0px)"):rr&&(A="translate(",C="px)"),this.scrollTop=function(E,b){if(!arguments.length)return-this.top();this.top(-E,b)},this.scrollLeft=function(E,b){if(!arguments.length)return-this.left();this.left(-E,b)},this.left=function(E,b){if(!arguments.length)return-(e.scrollLeft+a);var v=e.scrollLeft-c,I=a;if((v>2||v<-2)&&!b){c=e.scrollLeft,X.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-c),t.onKill&&t.onKill();return}E=-E,E<0?(a=E-.5|0,E=0):E>u?(a=E-u|0,E=u):a=0,(a||I)&&(this._skip||(n[rr]=A+-a+"px,"+-o+C),a+f>=0&&(n.paddingRight=a+f+"px")),e.scrollLeft=E|0,c=e.scrollLeft},this.top=function(E,b){if(!arguments.length)return-(e.scrollTop+o);var v=e.scrollTop-l,I=o;if((v>2||v<-2)&&!b){l=e.scrollTop,X.killTweensOf(this,{top:1,scrollTop:1}),this.top(-l),t.onKill&&t.onKill();return}E=-E,E<0?(o=E-.5|0,E=0):E>g?(o=E-g|0,E=g):o=0,(o||I)&&(this._skip||(n[rr]=A+-a+"px,"+-o+C)),e.scrollTop=E|0,l=e.scrollTop},this.maxScrollTop=function(){return g},this.maxScrollLeft=function(){return u},this.disable=function(){for(s=i.firstChild;s;)S=s.nextSibling,e.appendChild(s),s=S;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(s=e.firstChild,s!==i){for(;s;)S=s.nextSibling,i.appendChild(s),s=S;e.appendChild(i),this.calibrate()}},this.calibrate=function(E){var b=e.clientWidth===p,v,I,y;l=e.scrollTop,c=e.scrollLeft,!(b&&e.clientHeight===_&&i.offsetHeight===D&&d===e.scrollWidth&&h===e.scrollHeight&&!E)&&((o||a)&&(I=this.left(),y=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),v=Dr(e),(!b||E)&&(n.display="block",n.width="auto",n.paddingRight="0px",f=Math.max(0,e.scrollWidth-e.clientWidth),f&&(f+=parseFloat(v.paddingLeft)+(mo?parseFloat(v.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=f+"px",mo&&(n.paddingBottom=v.paddingBottom),p=e.clientWidth,_=e.clientHeight,d=e.scrollWidth,h=e.scrollHeight,u=e.scrollWidth-p,g=e.scrollHeight-_,D=i.offsetHeight,n.display="block",(I||y)&&(this.left(I),this.top(y)))},this.content=i,this.element=e,this._skip=!1,this.enable()},Ys=function(e){if(ku()&&document.body){var t=window&&window.navigator;se=window,Qe=document,It=Qe.documentElement,jt=Qe.body,Us=Mr("div"),zr=!!window.PointerEvent,Yt=Mr("div"),Yt.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",Kn=Yt.style.cursor==="grab"?"grab":"move",qn=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,po="ontouchstart"in It&&"orientation"in se||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),mo=function(){var i=Mr("div"),n=Mr("div"),s=n.style,o=jt,a;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),o.appendChild(i),a=n.offsetHeight+18>i.scrollHeight,o.removeChild(i),a}(),mr=function(i){for(var n=i.split(","),s=("onpointerdown"in Us?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in Us?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),o={},a=4;--a>-1;)o[n[a]]=s[a],o[s[a]]=n[a];try{It.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Mu=1}}))}catch{}return o}("touchstart,touchmove,touchend,touchcancel"),Te(Qe,"touchcancel",Xr),Te(se,"touchmove",Xr),jt&&jt.addEventListener("touchstart",Xr),Te(Qe,"contextmenu",function(){for(var i in Dn)Dn[i].isPressed&&Dn[i].endDrag()}),X=fo=Bu()}X?(Dt=X.plugins.inertia,Fu=X.core.context||function(){},jn=X.utils.checkPrefix,rr=jn(rr),_o=jn(_o),ui=X.utils.toArray,go=X.core.getStyleSaver,Gu=!!jn("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},wh=function(){function r(t){this._listeners={},this.target=t||this}var e=r.prototype;return e.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},e.removeEventListener=function(i,n){var s=this._listeners[i],o=s&&s.indexOf(n);o>=0&&s.splice(o,1)},e.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(o){return o.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),Ir=function(r){mh(e,r);function e(t,i){var n;n=r.call(this)||this,fo||Ys(1),t=ui(t)[0],n.styles=go&&go(t,"transform,left,top"),Dt||(Dt=X.plugins.inertia),n.vars=i=Uu(i||{}),n.target=t,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,X.getProperty(t,"x");var s=(i.type||"x,y").toLowerCase(),o=~s.indexOf("x")||~s.indexOf("y"),a=s.indexOf("rotation")!==-1,l=a?"rotation":o?"x":"left",c=o?"y":"top",d=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),h=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),f=i.minimumMovement||2,u=Ka(n),g=ui(i.trigger||i.handle||t),p={},_=0,D=!1,S=i.autoScrollMarginTop||40,A=i.autoScrollMarginRight||40,C=i.autoScrollMarginBottom||40,E=i.autoScrollMarginLeft||40,b=i.clickableTest||vh,v=0,I=t._gsap||X.core.getCache(t),y=bh(t),O=function(m,P){return parseFloat(I.get(t,m,P))},R=t.ownerDocument||Qe,$,N,Q,K,B,G,oe,pt,Pt,z,j,J,Z,it,nt,Mn,Ie,ys,Zt,Jt,Si,Fn,we,ee,Pa,rt,gt,As,Cs,va,We,ba,Nr,La=function(m){return ot(m),m.stopImmediatePropagation&&m.stopImmediatePropagation(),!1},vt=function F(m){if(u.autoScroll&&u.isDragging&&(D||Ie)){var P=t,T=u.autoScroll*15,L,w,x,H,M,te,q,ie;for(D=!1,$t.scrollTop=se.pageYOffset!=null?se.pageYOffset:R.documentElement.scrollTop!=null?R.documentElement.scrollTop:R.body.scrollTop,$t.scrollLeft=se.pageXOffset!=null?se.pageXOffset:R.documentElement.scrollLeft!=null?R.documentElement.scrollLeft:R.body.scrollLeft,H=u.pointerX-$t.scrollLeft,M=u.pointerY-$t.scrollTop;P&&!w;)w=bn(P.parentNode),L=w?$t:P.parentNode,x=w?{bottom:Math.max(It.clientHeight,se.innerHeight||0),right:Math.max(It.clientWidth,se.innerWidth||0),left:0,top:0}:L.getBoundingClientRect(),te=q=0,h&&(ie=L._gsMaxScrollY-L.scrollTop,ie<0?q=ie:M>x.bottom-C&&ie?(D=!0,q=Math.min(ie,T*(1-Math.max(0,x.bottom-M)/C)|0)):M<x.top+S&&L.scrollTop&&(D=!0,q=-Math.min(L.scrollTop,T*(1-Math.max(0,M-x.top)/S)|0)),q&&(L.scrollTop+=q)),d&&(ie=L._gsMaxScrollX-L.scrollLeft,ie<0?te=ie:H>x.right-A&&ie?(D=!0,te=Math.min(ie,T*(1-Math.max(0,x.right-H)/A)|0)):H<x.left+E&&L.scrollLeft&&(D=!0,te=-Math.min(L.scrollLeft,T*(1-Math.max(0,H-x.left)/E)|0)),te&&(L.scrollLeft+=te)),w&&(te||q)&&(se.scrollTo(L.scrollLeft,L.scrollTop),Un(u.pointerX+te,u.pointerY+q)),P=L}if(Ie){var pe=u.x,Oe=u.y;a?(u.deltaX=pe-parseFloat(I.rotation),u.rotation=pe,I.rotation=pe+"deg",I.renderTransform(1,I)):N?(h&&(u.deltaY=Oe-N.top(),N.top(Oe)),d&&(u.deltaX=pe-N.left(),N.left(pe))):o?(h&&(u.deltaY=Oe-parseFloat(I.y),I.y=Oe+"px"),d&&(u.deltaX=pe-parseFloat(I.x),I.x=pe+"px"),I.renderTransform(1,I)):(h&&(u.deltaY=Oe-parseFloat(t.style.top||0),t.style.top=Oe+"px"),d&&(u.deltaX=pe-parseFloat(t.style.left||0),t.style.left=pe+"px")),pt&&!m&&!As&&(As=!0,ge(u,"drag","onDrag")===!1&&(d&&(u.x-=u.deltaX),h&&(u.y-=u.deltaY),F(!0)),As=!1)}Ie=!1},Ti=function(m,P){var T=u.x,L=u.y,w,x;t._gsap||(I=X.core.getCache(t)),I.uncache&&X.getProperty(t,"x"),o?(u.x=parseFloat(I.x),u.y=parseFloat(I.y)):a?u.x=u.rotation=parseFloat(I.rotation):N?(u.y=N.top(),u.x=N.left()):(u.y=parseFloat(t.style.top||(x=Dr(t))&&x.top)||0,u.x=parseFloat(t.style.left||(x||{}).left)||0),(Zt||Jt||Si)&&!P&&(u.isDragging||u.isThrowing)&&(Si&&(Qi.x=u.x,Qi.y=u.y,w=Si(Qi),w.x!==u.x&&(u.x=w.x,Ie=!0),w.y!==u.y&&(u.y=w.y,Ie=!0)),Zt&&(w=Zt(u.x),w!==u.x&&(u.x=w,a&&(u.rotation=w),Ie=!0)),Jt&&(w=Jt(u.y),w!==u.y&&(u.y=w),Ie=!0)),Ie&&vt(!0),m||(u.deltaX=u.x-T,u.deltaY=u.y-L,ge(u,"throwupdate","onThrowUpdate"))},Is=function(m,P,T,L){return P==null&&(P=-1e20),T==null&&(T=Ki),ri(m)?function(w){var x=u.isPressed?1-u.edgeResistance:1;return m.call(u,(w>T?T+(w-T)*x:w<P?P+(w-P)*x:w)*L)*L}:Gn(m)?function(w){for(var x=m.length,H=0,M=Ki,te,q;--x>-1;)te=m[x],q=te-w,q<0&&(q=-q),q<M&&te>=P&&te<=T&&(H=x,M=q);return m[H]}:isNaN(m)?function(w){return w}:function(){return m*L}},Xc=function(m,P,T,L,w,x,H){return x=x&&x<Ki?x*x:Ki,ri(m)?function(M){var te=u.isPressed?1-u.edgeResistance:1,q=M.x,ie=M.y,pe,Oe,Bt;return M.x=q=q>T?T+(q-T)*te:q<P?P+(q-P)*te:q,M.y=ie=ie>w?w+(ie-w)*te:ie<L?L+(ie-L)*te:ie,pe=m.call(u,M),pe!==M&&(M.x=pe.x,M.y=pe.y),H!==1&&(M.x*=H,M.y*=H),x<Ki&&(Oe=M.x-q,Bt=M.y-ie,Oe*Oe+Bt*Bt>x&&(M.x=q,M.y=ie)),M}:Gn(m)?function(M){for(var te=m.length,q=0,ie=Ki,pe,Oe,Bt,st;--te>-1;)Bt=m[te],pe=Bt.x-M.x,Oe=Bt.y-M.y,st=pe*pe+Oe*Oe,st<ie&&(q=te,ie=st);return ie<=x?m[q]:M}:function(M){return M}},Ps=function(){var m,P,T,L;oe=!1,N?(N.calibrate(),u.minX=j=-N.maxScrollLeft(),u.minY=Z=-N.maxScrollTop(),u.maxX=z=u.maxY=J=0,oe=!0):i.bounds&&(m=ol(i.bounds,t.parentNode),a?(u.minX=j=m.left,u.maxX=z=m.left+m.width,u.minY=Z=u.maxY=J=0):!St(i.bounds.maxX)||!St(i.bounds.maxY)?(m=i.bounds,u.minX=j=m.minX,u.minY=Z=m.minY,u.maxX=z=m.maxX,u.maxY=J=m.maxY):(P=ol(t,t.parentNode),u.minX=j=Math.round(O(l,"px")+m.left-P.left),u.minY=Z=Math.round(O(c,"px")+m.top-P.top),u.maxX=z=Math.round(j+(m.width-P.width)),u.maxY=J=Math.round(Z+(m.height-P.height))),j>z&&(u.minX=z,u.maxX=z=j,j=u.minX),Z>J&&(u.minY=J,u.maxY=J=Z,Z=u.minY),a&&(u.minRotation=j,u.maxRotation=z),oe=!0),i.liveSnap&&(T=i.liveSnap===!0?i.snap||{}:i.liveSnap,L=Gn(T)||ri(T),a?(Zt=Is(L?T:T.rotation,j,z,1),Jt=null):T.points?Si=Xc(L?T:T.points,j,z,Z,J,T.radius,N?-1:1):(d&&(Zt=Is(L?T:T.x||T.left||T.scrollLeft,j,z,N?-1:1)),h&&(Jt=Is(L?T:T.y||T.top||T.scrollTop,Z,J,N?-1:1))))},Wc=function(){u.isThrowing=!1,ge(u,"throwcomplete","onThrowComplete")},jc=function(){u.isThrowing=!1},vs=function(m,P){var T,L,w,x;m&&Dt?(m===!0&&(T=i.snap||i.liveSnap||{},L=Gn(T)||ri(T),m={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?m.rotation=Hs(u,L?T:T.rotation,z,j,1,P):(d&&(m[l]=Hs(u,L?T:T.points||T.x||T.left,z,j,N?-1:1,P||u.lockedAxis==="x")),h&&(m[c]=Hs(u,L?T:T.points||T.y||T.top,J,Z,N?-1:1,P||u.lockedAxis==="y")),(T.points||Gn(T)&&nr(T[0]))&&(m.linkedProps=l+","+c,m.radius=T.radius))),u.isThrowing=!0,x=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-u.edgeResistance+.2:i.overshootTolerance,m.duration||(m.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?x===0||nr(m)&&m.resistance>1e3?0:.5:i.minDuration,overshoot:x}),u.tween=w=X.to(N||t,{inertia:m,data:"_draggable",inherit:!1,onComplete:Wc,onInterrupt:jc,onUpdate:i.fastMode?ge:Ti,onUpdateParams:i.fastMode?[u,"onthrowupdate","onThrowUpdate"]:T&&T.radius?[!1,!0]:[]}),i.fastMode||(N&&(N._skip=!0),w.render(1e9,!0,!0),Ti(!0,!0),u.endX=u.x,u.endY=u.y,a&&(u.endRotation=u.x),w.play(0),Ti(!0,!0),N&&(N._skip=!1))):oe&&u.applyBounds()},wa=function(m){var P=ee,T;ee=bi(t.parentNode,!0),m&&u.isPressed&&!ee.equals(P||new zi)&&(T=P.inverse().apply({x:Q,y:K}),ee.apply(T,T),Q=T.x,K=T.y),ee.equals(Dh)&&(ee=null)},Rr=function(){var m=1-u.edgeResistance,P=y?Sn(R):0,T=y?En(R):0,L,w,x;o&&(I.x=O(l,"px")+"px",I.y=O(c,"px")+"px",I.renderTransform()),wa(!1),at.x=u.pointerX-P,at.y=u.pointerY-T,ee&&ee.apply(at,at),Q=at.x,K=at.y,Ie&&(Un(u.pointerX,u.pointerY),vt(!0)),ba=bi(t),N?(Ps(),G=N.top(),B=N.left()):(kn()?(Ti(!0,!0),Ps()):u.applyBounds(),a?(L=t.ownerSVGElement?[I.xOrigin-t.getBBox().x,I.yOrigin-t.getBBox().y]:(Dr(t)[_o]||"0 0").split(" "),Mn=u.rotationOrigin=bi(t).apply({x:parseFloat(L[0])||0,y:parseFloat(L[1])||0}),Ti(!0,!0),w=u.pointerX-Mn.x-P,x=Mn.y-u.pointerY+T,B=u.x,G=u.y=Math.atan2(x,w)*Qa):(G=O(c,"px"),B=O(l,"px"))),oe&&m&&(B>z?B=z+(B-z)/m:B<j&&(B=j-(j-B)/m),a||(G>J?G=J+(G-J)/m:G<Z&&(G=Z-(Z-G)/m))),u.startX=B=ti(B),u.startY=G=ti(G)},kn=function(){return u.tween&&u.tween.isActive()},qc=function(){Yt.parentNode&&!kn()&&!u.isDragging&&Yt.parentNode.removeChild(Yt)},Bn=function(m,P){var T;if(!$||u.isPressed||!m||(m.type==="mousedown"||m.type==="pointerdown")&&!P&&ii()-v<30&&mr[u.pointerEvent.type]){We&&m&&$&&ot(m);return}if(Pa=kn(),Nr=!1,u.pointerEvent=m,mr[m.type]?(we=~m.type.indexOf("touch")?m.currentTarget||m.target:R,Te(we,"touchend",_t),Te(we,"touchmove",yi),Te(we,"touchcancel",_t),Te(R,"touchstart",il)):(we=null,Te(R,"mousemove",yi)),gt=null,(!zr||!we)&&(Te(R,"mouseup",_t),m&&m.target&&Te(m.target,"mouseup",_t)),Fn=b.call(u,m.target)&&i.dragClickables===!1&&!P,Fn){Te(m.target,"change",_t),ge(u,"pressInit","onPressInit"),ge(u,"press","onPress"),Fr(g,!0),We=!1;return}if(rt=!we||d===h||u.vars.allowNativeTouchScrolling===!1||u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2)?!1:d?"y":"x",We=!rt&&!u.allowEventDefault,We&&(ot(m),Te(se,"touchforcechange",ot)),m.changedTouches?(m=it=m.changedTouches[0],nt=m.identifier):m.pointerId?nt=m.pointerId:it=nt=null,ns++,yh(vt),K=u.pointerY=m.pageY,Q=u.pointerX=m.pageX,ge(u,"pressInit","onPressInit"),(rt||u.autoScroll)&&$s(t.parentNode),t.parentNode&&u.autoScroll&&!N&&!a&&t.parentNode._gsMaxScrollX&&!Yt.parentNode&&!t.getBBox&&(Yt.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(Yt)),Rr(),u.tween&&u.tween.kill(),u.isThrowing=!1,X.killTweensOf(N||t,p,!0),N&&X.killTweensOf(t,{scrollTo:1},!0),u.tween=u.lockedAxis=null,(i.zIndexBoost||!a&&!N&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),u.isPressed=!0,pt=!!(i.onDrag||u._listeners.drag),Pt=!!(i.onMove||u._listeners.move),i.cursor!==!1||i.activeCursor)for(T=g.length;--T>-1;)X.set(g[T],{cursor:i.activeCursor||i.cursor||(Kn==="grab"?"grabbing":Kn)});ge(u,"press","onPress")},yi=function(m){var P=m,T,L,w,x,H,M;if(!$||sa||!u.isPressed||!m){We&&m&&$&&ot(m);return}if(u.pointerEvent=m,T=m.changedTouches,T){if(m=T[0],m!==it&&m.identifier!==nt){for(x=T.length;--x>-1&&(m=T[x]).identifier!==nt&&m.target!==t;);if(x<0)return}}else if(m.pointerId&&nt&&m.pointerId!==nt)return;if(we&&rt&&!gt&&(at.x=m.pageX-(y?Sn(R):0),at.y=m.pageY-(y?En(R):0),ee&&ee.apply(at,at),L=at.x,w=at.y,H=Math.abs(L-Q),M=Math.abs(w-K),(H!==M&&(H>f||M>f)||qn&&rt===gt)&&(gt=H>M&&d?"x":"y",rt&&gt!==rt&&Te(se,"touchforcechange",ot),u.vars.lockAxisOnTouchScroll!==!1&&d&&h&&(u.lockedAxis=gt==="x"?"y":"x",ri(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,P)),qn&&rt===gt))){_t(P);return}!u.allowEventDefault&&(!rt||gt&&rt!==gt)&&P.cancelable!==!1?(ot(P),We=!0):We&&(We=!1),u.autoScroll&&(D=!0),Un(m.pageX,m.pageY,Pt)},Un=function(m,P,T){var L=1-u.dragResistance,w=1-u.edgeResistance,x=u.pointerX,H=u.pointerY,M=G,te=u.x,q=u.y,ie=u.endX,pe=u.endY,Oe=u.endRotation,Bt=Ie,st,ei,Ne,me,bs,mt;u.pointerX=m,u.pointerY=P,y&&(m-=Sn(R),P-=En(R)),a?(me=Math.atan2(Mn.y-P,m-Mn.x)*Qa,bs=u.y-me,bs>180?(G-=360,u.y=me):bs<-180&&(G+=360,u.y=me),u.x!==B||Math.max(Math.abs(Q-m),Math.abs(K-P))>f?(u.y=me,Ne=B+(G-me)*L):Ne=B):(ee&&(mt=m*ee.a+P*ee.c+ee.e,P=m*ee.b+P*ee.d+ee.f,m=mt),ei=P-K,st=m-Q,ei<f&&ei>-f&&(ei=0),st<f&&st>-f&&(st=0),(u.lockAxis||u.lockedAxis)&&(st||ei)&&(mt=u.lockedAxis,mt||(u.lockedAxis=mt=d&&Math.abs(st)>Math.abs(ei)?"y":h?"x":null,mt&&ri(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,u.pointerEvent)),mt==="y"?ei=0:mt==="x"&&(st=0)),Ne=ti(B+st*L),me=ti(G+ei*L)),(Zt||Jt||Si)&&(u.x!==Ne||u.y!==me&&!a)&&(Si&&(Qi.x=Ne,Qi.y=me,mt=Si(Qi),Ne=ti(mt.x),me=ti(mt.y)),Zt&&(Ne=ti(Zt(Ne))),Jt&&(me=ti(Jt(me)))),oe&&(Ne>z?Ne=z+Math.round((Ne-z)*w):Ne<j&&(Ne=j+Math.round((Ne-j)*w)),a||(me>J?me=Math.round(J+(me-J)*w):me<Z&&(me=Math.round(Z+(me-Z)*w)))),(u.x!==Ne||u.y!==me&&!a)&&(a?(u.endRotation=u.x=u.endX=Ne,Ie=!0):(h&&(u.y=u.endY=me,Ie=!0),d&&(u.x=u.endX=Ne,Ie=!0)),!T||ge(u,"move","onMove")!==!1?!u.isDragging&&u.isPressed&&(u.isDragging=Nr=!0,ge(u,"dragstart","onDragStart")):(u.pointerX=x,u.pointerY=H,G=M,u.x=te,u.y=q,u.endX=ie,u.endY=pe,u.endRotation=Oe,Ie=Bt))},_t=function F(m,P){if(!$||!u.isPressed||m&&nt!=null&&!P&&(m.pointerId&&m.pointerId!==nt&&m.target!==t||m.changedTouches&&!Ch(m.changedTouches,nt))){We&&m&&$&&ot(m);return}u.isPressed=!1;var T=m,L=u.isDragging,w=u.vars.allowContextMenu&&m&&(m.ctrlKey||m.which>2),x=X.delayedCall(.001,qc),H,M,te,q,ie;if(we?(De(we,"touchend",F),De(we,"touchmove",yi),De(we,"touchcancel",F),De(R,"touchstart",il)):De(R,"mousemove",yi),De(se,"touchforcechange",ot),(!zr||!we)&&(De(R,"mouseup",F),m&&m.target&&De(m.target,"mouseup",F)),Ie=!1,L&&(_=Za=ii(),u.isDragging=!1),tl(vt),Fn&&!w){m&&(De(m.target,"change",F),u.pointerEvent=T),Fr(g,!1),ge(u,"release","onRelease"),ge(u,"click","onClick"),Fn=!1;return}for(M=g.length;--M>-1;)Gs(g[M],"cursor",i.cursor||(i.cursor!==!1?Kn:null));if(ns--,m){if(H=m.changedTouches,H&&(m=H[0],m!==it&&m.identifier!==nt)){for(M=H.length;--M>-1&&(m=H[M]).identifier!==nt&&m.target!==t;);if(M<0&&!P)return}u.pointerEvent=T,u.pointerX=m.pageX,u.pointerY=m.pageY}return w&&T?(ot(T),We=!0,ge(u,"release","onRelease")):T&&!L?(We=!1,Pa&&(i.snap||i.bounds)&&vs(i.inertia||i.throwProps),ge(u,"release","onRelease"),(!qn||T.type!=="touchmove")&&T.type.indexOf("cancel")===-1&&(ge(u,"click","onClick"),ii()-v<300&&ge(u,"doubleclick","onDoubleClick"),q=T.target||t,v=ii(),ie=function(){v!==Cs&&u.enabled()&&!u.isPressed&&!T.defaultPrevented&&(q.click?q.click():R.createEvent&&(te=R.createEvent("MouseEvents"),te.initMouseEvent("click",!0,!0,se,1,u.pointerEvent.screenX,u.pointerEvent.screenY,u.pointerX,u.pointerY,!1,!1,!1,!1,0,null),q.dispatchEvent(te)))},!qn&&!T.defaultPrevented&&X.delayedCall(.05,ie))):(vs(i.inertia||i.throwProps),!u.allowEventDefault&&T&&(i.dragClickables!==!1||!b.call(u,T.target))&&L&&(!rt||gt&&rt===gt)&&T.cancelable!==!1?(We=!0,ot(T)):We=!1,ge(u,"release","onRelease")),kn()&&x.duration(u.tween.duration()),L&&ge(u,"dragend","onDragEnd"),!0},xr=function(m){if(m&&u.isDragging&&!N){var P=m.target||t.parentNode,T=P.scrollLeft-P._gsScrollX,L=P.scrollTop-P._gsScrollY;(T||L)&&(ee?(Q-=T*ee.a+L*ee.c,K-=L*ee.d+T*ee.b):(Q-=T,K-=L),P._gsScrollX+=T,P._gsScrollY+=L,Un(u.pointerX,u.pointerY))}},Na=function(m){var P=ii(),T=P-v<100,L=P-_<50,w=T&&Cs===v,x=u.pointerEvent&&u.pointerEvent.defaultPrevented,H=T&&va===v,M=m.isTrusted||m.isTrusted==null&&T&&w;if((w||L&&u.vars.suppressClickOnDrag!==!1)&&m.stopImmediatePropagation&&m.stopImmediatePropagation(),T&&!(u.pointerEvent&&u.pointerEvent.defaultPrevented)&&(!w||M&&!H)){M&&w&&(va=v),Cs=v;return}(u.isPressed||L||T)&&(!M||!m.detail||!T||x)&&ot(m),!T&&!L&&!Nr&&(m&&m.target&&(u.pointerEvent=m),ge(u,"click","onClick"))},Ra=function(m){return ee?{x:m.x*ee.a+m.y*ee.c+ee.e,y:m.x*ee.b+m.y*ee.d+ee.f}:{x:m.x,y:m.y}};return ys=e.get(t),ys&&ys.kill(),n.startDrag=function(F,m){var P,T,L,w;Bn(F||u.pointerEvent,!0),m&&!u.hitTest(F||u.pointerEvent)&&(P=Zi(F||u.pointerEvent),T=Zi(t),L=Ra({x:P.left+P.width/2,y:P.top+P.height/2}),w=Ra({x:T.left+T.width/2,y:T.top+T.height/2}),Q-=L.x-w.x,K-=L.y-w.y),u.isDragging||(u.isDragging=Nr=!0,ge(u,"dragstart","onDragStart"))},n.drag=yi,n.endDrag=function(F){return _t(F||u.pointerEvent,!0)},n.timeSinceDrag=function(){return u.isDragging?0:(ii()-_)/1e3},n.timeSinceClick=function(){return(ii()-v)/1e3},n.hitTest=function(F,m){return e.hitTest(u.target,F,m)},n.getDirection=function(F,m){var P=F==="velocity"&&Dt?F:nr(F)&&!a?"element":"start",T,L,w,x,H,M;return P==="element"&&(H=Zi(u.target),M=Zi(F)),T=P==="start"?u.x-B:P==="velocity"?Dt.getVelocity(t,l):H.left+H.width/2-(M.left+M.width/2),a?T<0?"counter-clockwise":"clockwise":(m=m||2,L=P==="start"?u.y-G:P==="velocity"?Dt.getVelocity(t,c):H.top+H.height/2-(M.top+M.height/2),w=Math.abs(T/L),x=w<1/m?"":T<0?"left":"right",w<m&&(x!==""&&(x+="-"),x+=L<0?"up":"down"),x)},n.applyBounds=function(F,m){var P,T,L,w,x,H;if(F&&i.bounds!==F)return i.bounds=F,u.update(!0,m);if(Ti(!0),Ps(),oe&&!kn()){if(P=u.x,T=u.y,P>z?P=z:P<j&&(P=j),T>J?T=J:T<Z&&(T=Z),(u.x!==P||u.y!==T)&&(L=!0,u.x=u.endX=P,a?u.endRotation=P:u.y=u.endY=T,Ie=!0,vt(!0),u.autoScroll&&!u.isDragging))for($s(t.parentNode),w=t,$t.scrollTop=se.pageYOffset!=null?se.pageYOffset:R.documentElement.scrollTop!=null?R.documentElement.scrollTop:R.body.scrollTop,$t.scrollLeft=se.pageXOffset!=null?se.pageXOffset:R.documentElement.scrollLeft!=null?R.documentElement.scrollLeft:R.body.scrollLeft;w&&!H;)H=bn(w.parentNode),x=H?$t:w.parentNode,h&&x.scrollTop>x._gsMaxScrollY&&(x.scrollTop=x._gsMaxScrollY),d&&x.scrollLeft>x._gsMaxScrollX&&(x.scrollLeft=x._gsMaxScrollX),w=x;u.isThrowing&&(L||u.endX>z||u.endX<j||u.endY>J||u.endY<Z)&&vs(i.inertia||i.throwProps,L)}return u},n.update=function(F,m,P){if(m&&u.isPressed){var T=bi(t),L=ba.apply({x:u.x-B,y:u.y-G}),w=bi(t.parentNode,!0);w.apply({x:T.e-L.x,y:T.f-L.y},L),u.x-=L.x-w.e,u.y-=L.y-w.f,vt(!0),Rr()}var x=u.x,H=u.y;return wa(!m),F?u.applyBounds():(Ie&&P&&vt(!0),Ti(!0)),m&&(Un(u.pointerX,u.pointerY),Ie&&vt(!0)),u.isPressed&&!m&&(d&&Math.abs(x-u.x)>.01||h&&Math.abs(H-u.y)>.01&&!a)&&Rr(),u.autoScroll&&($s(t.parentNode,u.isDragging),D=u.isDragging,vt(!0),rl(t,xr),nl(t,xr)),u},n.enable=function(F){var m={lazy:!0},P,T,L;if(i.cursor!==!1&&(m.cursor=i.cursor||Kn),X.utils.checkPrefix("touchCallout")&&(m.touchCallout="none"),F!=="soft"){for(Ja(g,d===h?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":d?"pan-y":"pan-x"),T=g.length;--T>-1;)L=g[T],zr||Te(L,"mousedown",Bn),Te(L,"touchstart",Bn),Te(L,"click",Na,!0),X.set(L,m),L.getBBox&&L.ownerSVGElement&&d!==h&&X.set(L.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":d?"pan-y":"pan-x"}),i.allowContextMenu||Te(L,"contextmenu",La);Fr(g,!1)}return nl(t,xr),$=!0,Dt&&F!=="soft"&&Dt.track(N||t,o?"x,y":a?"rotation":"top,left"),t._gsDragID=P=t._gsDragID||"d"+Eh++,Dn[P]=u,N&&(N.enable(),N.element._gsDragID=P),(i.bounds||a)&&Rr(),i.bounds&&u.applyBounds(),u},n.disable=function(F){for(var m=u.isDragging,P=g.length,T;--P>-1;)Gs(g[P],"cursor",null);if(F!=="soft"){for(Ja(g,null),P=g.length;--P>-1;)T=g[P],Gs(T,"touchCallout",null),De(T,"mousedown",Bn),De(T,"touchstart",Bn),De(T,"click",Na,!0),De(T,"contextmenu",La);Fr(g,!0),we&&(De(we,"touchcancel",_t),De(we,"touchend",_t),De(we,"touchmove",yi)),De(R,"mouseup",_t),De(R,"mousemove",yi)}return rl(t,xr),$=!1,Dt&&F!=="soft"&&(Dt.untrack(N||t,o?"x,y":a?"rotation":"top,left"),u.tween&&u.tween.kill()),N&&N.disable(),tl(vt),u.isDragging=u.isPressed=Fn=!1,m&&ge(u,"dragend","onDragEnd"),u},n.enabled=function(F,m){return arguments.length?F?u.enable(m):u.disable(m):$},n.kill=function(){return u.isThrowing=!1,u.tween&&u.tween.kill(),u.disable(),X.set(g,{clearProps:"userSelect"}),delete Dn[t._gsDragID],u},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(N=n.scrollProxy=new Lh(t,Th({onKill:function(){u.isPressed&&_t(null)}},i)),t.style.overflowY=h&&!po?"auto":"hidden",t.style.overflowX=d&&!po?"auto":"hidden",t=N.content),a?p.rotation=1:(d&&(p[l]=1),h&&(p[c]=1)),I.force3D="force3D"in i?i.force3D:!0,Fu(Ka(n)),n.enable(),n}return e.register=function(i){X=i,Ys()},e.create=function(i,n){return fo||Ys(!0),ui(i).map(function(s){return new e(s,n)})},e.get=function(i){return Dn[(ui(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(ii()-Za)/1e3},e.hitTest=function(i,n,s){if(i===n)return!1;var o=Zi(i),a=Zi(n),l=o.top,c=o.left,d=o.right,h=o.bottom,f=o.width,u=o.height,g=a.left>d||a.right<c||a.top>h||a.bottom<l,p,_,D;return g||!s?!g:(D=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(c,a.left),top:Math.max(l,a.top)},p.width=Math.min(d,a.right)-p.left,p.height=Math.min(h,a.bottom)-p.top,p.width<0||p.height<0?!1:D?(s*=.01,_=p.width*p.height,_>=f*u*s||_>=a.width*a.height*s):p.width>s&&p.height>s)},e}(wh);Ah(Ir.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Ir.zIndex=1e3;Ir.version="3.13.0";Bu()&&X.registerPlugin(Ir);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Nt,Do,sr,Hu,rn,dn,Eo,Yu,Vu=function(){return Nt||typeof window<"u"&&(Nt=window.gsap)},So={},Nh=function(e){return Math.round(e*1e4)/1e4},To=function(e){return Yu(e).id},Qn=function(e){return So[To(typeof e=="string"?sr(e)[0]:e)]},al=function(e){var t=rn,i;if(e-Eo>=.05)for(Eo=e;t;)i=t.g(t.t,t.p),(i!==t.v1||e-t.t1>.2)&&(t.v2=t.v1,t.v1=i,t.t2=t.t1,t.t1=e),t=t._next},Rh={deg:360,rad:Math.PI*2},Vs=function(){Nt=Vu(),Nt&&(sr=Nt.utils.toArray,Hu=Nt.utils.getUnit,Yu=Nt.core.getCache,dn=Nt.ticker,Do=1)},xh=function(e,t,i,n){this.t=e,this.p=t,this.g=e._gsap.get,this.rCap=Rh[i||Hu(this.g(e,t))],this.v1=this.v2=0,this.t1=this.t2=dn.time,n&&(this._next=n,n._prev=this)},Pr=function(){function r(t,i){Do||Vs(),this.target=sr(t)[0],So[To(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){Nt=i,Vs()};var e=r.prototype;return e.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),o,a,l;return o=parseFloat(n?s.v1:s.g(s.t,s.p)),a=o-parseFloat(s.v2),l=s.rCap,l&&(a=a%l,a!==a%(l/2)&&(a=a<0?a+l:a-l)),Nh(a/((n?s.t1:dn.time)-s.t2))},e.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},e.isTracking=function(i){return i in this._props},e.add=function(i,n){i in this._props||(rn||(dn.add(al),Eo=dn.time),rn=this._props[i]=new xh(this.target,i,n,rn))},e.remove=function(i){var n=this._props[i],s,o;n&&(s=n._prev,o=n._next,s&&(s._next=o),o?o._prev=s:rn===n&&(dn.remove(al),rn=0),delete this._props[i])},e.kill=function(i){for(var n in this._props)this.remove(n);i||delete So[To(this.target)]},r.track=function(i,n,s){Do||Vs();for(var o=[],a=sr(i),l=n.split(","),c=(s||"").split(","),d=a.length,h,f;d--;){for(h=Qn(a[d])||new r(a[d]),f=l.length;f--;)h.add(l[f],c[f]||c[0]);o.push(h)}return o},r.untrack=function(i,n){var s=(n||"").split(",");sr(i).forEach(function(o){var a=Qn(o);a&&(s.length?s.forEach(function(l){return a.remove(l)}):a.kill(1))})},r.isTracking=function(i,n){var s=Qn(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=Qn(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();Pr.getByTarget=Qn;Vu()&&Nt.registerPlugin(Pr);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ye,zu,ll,Xu,yo,or,Wu,ju,qu,oa,Ku,ar,Ao,Qu,rs=Pr.getByTarget,Zu=function(){return ye||typeof window<"u"&&(ye=window.gsap)&&ye.registerPlugin&&ye},Oh=function(e){return typeof e=="string"},Er=function(e){return typeof e=="number"},fi=function(e){return typeof e=="object"},Co=function(e){return typeof e=="function"},Mh=1,Ju=Array.isArray,Fh=function(e){return e},Tn=1e10,ul=1/Tn,ec=.05,kh=function(e){return Math.round(e*1e4)/1e4},Bh=function(e,t,i){for(var n in t)!(n in e)&&n!==i&&(e[n]=t[n]);return e},Uh=function r(e){var t={},i,n;for(i in e)t[i]=fi(n=e[i])&&!Ju(n)?r(n):n;return t},cl=function(e,t,i,n,s){var o=t.length,a=0,l=Tn,c,d,h,f;if(fi(e)){for(;o--;){c=t[o],d=0;for(h in e)f=c[h]-e[h],d+=f*f;d<l&&(a=o,l=d)}if((s||Tn)<Tn&&s<Math.sqrt(l))return e}else for(;o--;)c=t[o],d=c-e,d<0&&(d=-d),d<l&&c>=n&&c<=i&&(a=o,l=d);return t[a]},tc=function(e,t,i,n,s,o,a){if(e.end==="auto")return e;var l=e.end,c,d;if(i=isNaN(i)?Tn:i,n=isNaN(n)?-1e10:n,fi(t)){if(c=t.calculated?t:(Co(l)?l(t,a):cl(t,l,i,n,o))||t,!t.calculated){for(d in c)t[d]=c[d];t.calculated=!0}c=c[s]}else c=Co(l)?l(t,a):Ju(l)?cl(t,l,i,n,o):parseFloat(l);return c>i?c=i:c<n&&(c=n),{max:c,min:c,unitFactor:e.unitFactor}},ss=function(e,t,i){return isNaN(e[t])?i:+e[t]},aa=function(e,t){return t*ec*e/oa},dl=function(e,t,i){return Math.abs((t-e)*oa/i/ec)},ic={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},nc=function(e,t,i,n){if(t.linkedProps){var s=t.linkedProps.split(","),o={},a,l,c,d,h,f;for(a=0;a<s.length;a++)l=s[a],c=t[l],c&&(Er(c.velocity)?d=c.velocity:(h=h||rs(e),d=h&&h.isTracking(l)?h.get(l):0),f=Math.abs(d/ss(c,"resistance",n)),o[l]=parseFloat(i(e,l))+aa(d,f));return o}},$h=function(e,t,i,n,s,o){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),Oh(e)&&(e=Xu(e)[0]),!e)return 0;var a=0,l=Tn,c=t.inertia||t,d=qu(e).get,h=ss(c,"resistance",or.resistance),f,u,g,p,_,D,S,A,C,E;E=nc(e,c,d,h);for(f in c)ic[f]||(u=c[f],fi(u)||(A=A||rs(e),A&&A.isTracking(f)?u=Er(u)?{velocity:u}:{velocity:A.get(f)}:(p=+u||0,g=Math.abs(p/h))),fi(u)&&(Er(u.velocity)?p=u.velocity:(A=A||rs(e),p=A&&A.isTracking(f)?A.get(f):0),g=Ku(n,i,Math.abs(p/ss(u,"resistance",h))),_=parseFloat(d(e,f))||0,D=_+aa(p,g),"end"in u&&(u=tc(u,E&&f in E?E:D,u.max,u.min,f,c.radius,p),ar===t&&(ar=c=Uh(t)),c[f]=Bh(u,c[f],"end")),"max"in u&&D>+u.max+ul?(C=u.unitFactor||or.unitFactors[f]||1,S=_>u.max&&u.min!==u.max||p*C>-15&&p*C<45?n+(i-n)*.1:dl(_,u.max,p),S+s<l&&(l=S+s)):"min"in u&&D<+u.min-ul&&(C=u.unitFactor||or.unitFactors[f]||1,S=_<u.min&&u.min!==u.max||p*C>-45&&p*C<15?n+(i-n)*.1:dl(_,u.min,p),S+s<l&&(l=S+s)),S>a&&(a=S)),g>a&&(a=g));return a>l&&(a=l),a>i?i:a<n?n:a},hl=function(){ye=Zu(),ye&&(ll=ye.parseEase,Xu=ye.utils.toArray,Wu=ye.utils.getUnit,qu=ye.core.getCache,Ku=ye.utils.clamp,Ao=ye.core.getStyleSaver,Qu=ye.core.reverting||function(){},yo=ll("power3"),oa=yo(.05),ju=ye.core.PropTween,ye.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),or=ye.config(),ye.registerPlugin(Pr),zu=1)},la={version:"3.13.0",name:"inertia",register:function(e){ye=e,hl()},init:function(e,t,i,n,s){zu||hl();var o=rs(e);if(t==="auto"){if(!o){console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");return}t=o.getAll()}this.styles=Ao&&typeof e.style=="object"&&Ao(e),this.target=e,this.tween=i,ar=t;var a=e._gsap,l=a.get,c=t.duration,d=fi(c),h=t.preventOvershoot||d&&c.overshoot===0,f=ss(t,"resistance",or.resistance),u=Er(c)?c:$h(e,t,d&&c.max||10,d&&c.min||.2,d&&"overshoot"in c?+c.overshoot:h?0:1),g,p,_,D,S,A,C,E,b;t=ar,ar=0,b=nc(e,t,l,f);for(g in t)ic[g]||(p=t[g],Co(p)&&(p=p(n,e,s)),Er(p)?S=p:fi(p)&&!isNaN(p.velocity)?S=+p.velocity:o&&o.isTracking(g)?S=o.get(g):console.warn("ERROR: No velocity was defined for "+e+" property: "+g),A=aa(S,u),E=0,_=l(e,g),D=Wu(_),_=parseFloat(_),fi(p)&&(C=_+A,"end"in p&&(p=tc(p,b&&g in b?b:C,p.max,p.min,g,t.radius,S)),"max"in p&&+p.max<C?h||p.preventOvershoot?A=p.max-_:E=p.max-_-A:"min"in p&&+p.min>C&&(h||p.preventOvershoot?A=p.min-_:E=p.min-_-A)),this._props.push(g),this.styles&&this.styles.save(g),this._pt=new ju(this._pt,e,g,_,0,Fh,0,a.set(e,g,this)),this._pt.u=D||0,this._pt.c1=A,this._pt.c2=E);return i.duration(u),Mh},render:function(e,t){var i=t._pt;if(e=yo(t.tween._time/t.tween._dur),e||!Qu())for(;i;)i.set(i.t,i.p,kh(i.s+i.c1*e+i.c2*e*e)+i.u,i.d,e),i=i._next;else t.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return la[r]=Pr[r]});Zu()&&ye.registerPlugin(la);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Gh=/(?:^\s+|\s+$)/g,Hh=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function rc(r){var e=r.nodeType,t="";if(e===1||e===9||e===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)t+=rc(r)}else if(e===3||e===4)return r.nodeValue;return t}function Io(r,e,t,i,n){for(var s=r.firstChild,o=[],a;s;)s.nodeType===3?(a=(s.nodeValue+"").replace(/^\n+/g,""),i||(a=a.replace(/\s+/g," ")),o.push.apply(o,sc(a,e,t,i,n))):(s.nodeName+"").toLowerCase()==="br"?o[o.length-1]+="<br>":o.push(s.outerHTML),s=s.nextSibling;if(!n)for(a=o.length;a--;)o[a]==="&"&&o.splice(a,1,"&amp;");return o}function sc(r,e,t,i,n){if(r+="",t&&(r=r.trim?r.trim():r.replace(Gh,"")),e&&e!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var s=[],o=r.length,a=0,l,c;a<o;a++)c=r.charAt(a),(c.charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319||r.charCodeAt(a+1)>=65024&&r.charCodeAt(a+1)<=65039)&&(l=((r.substr(a,12).split(Hh)||[])[1]||"").length||2,c=r.substr(a,l),s.emoji=1,a+=l-1),s.push(n?c:c===">"?"&gt;":c==="<"?"&lt;":i&&c===" "&&(r.charAt(a-1)===" "||r.charAt(a+1)===" ")?"&nbsp;":c);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Zn,kr,Yh=function(){return Zn||typeof window<"u"&&(Zn=window.gsap)&&Zn.registerPlugin&&Zn},vr={version:"3.13.0",name:"text",init:function(e,t,i){typeof t!="object"&&(t={value:t});var n=e.nodeName.toUpperCase(),s=this,o=t,a=o.newClass,l=o.oldClass,c=o.preserveSpaces,d=o.rtl,h=s.delimiter=t.delimiter||"",f=s.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),u,g,p,_,D,S,A,C;if(s.svg=e.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in e)&&!s.svg)return!1;if(s.target=e,!("value"in t)){s.text=s.original=[""];return}for(p=Io(e,h,!1,c,s.svg),kr||(kr=document.createElement("div")),kr.innerHTML=t.value,g=Io(kr,h,!1,c,s.svg),s.from=i._from,(s.from||d)&&!(d&&s.from)&&(n=p,p=g,g=n),s.hasClass=!!(a||l),s.newClass=d?l:a,s.oldClass=d?a:l,n=p.length-g.length,u=n<0?p:g,n<0&&(n=-n);--n>-1;)u.push(f);if(t.type==="diff"){for(_=0,D=[],S=[],A="",n=0;n<g.length;n++)C=g[n],C===p[n]?A+=C:(D[_]=A+C,S[_++]=A+p[n],A="");g=D,p=S,A&&(g.push(A),p.push(A))}t.speed&&i.duration(Math.min(.05/t.speed*u.length,t.maxDuration||9999)),s.rtl=d,s.original=p,s.text=g,s._props.push("text")},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var i=t.text,n=t.hasClass,s=t.newClass,o=t.oldClass,a=t.delimiter,l=t.target,c=t.fillChar,d=t.original,h=t.rtl,f=i.length,u=(h?1-e:e)*f+.5|0,g,p,_;n&&e?(g=s&&u,p=o&&u!==f,_=(g?"<span class='"+s+"'>":"")+i.slice(0,u).join(a)+(g?"</span>":"")+(p?"<span class='"+o+"'>":"")+a+d.slice(u).join(a)+(p?"</span>":"")):_=i.slice(0,u).join(a)+a+d.slice(u).join(a),t.svg?l.textContent=_:l.innerHTML=c==="&nbsp;"&&~_.indexOf("  ")?_.split("  ").join("&nbsp;&nbsp;"):_}};vr.splitInnerHTML=Io;vr.emojiSafeSplit=sc;vr.getText=rc;Yh()&&Zn.registerPlugin(vr);const Vh=1.3,zh=1.3,Xh=.1,Wh=150,jh=32,qh=1.6,Kh=.15,Qh=.8,Zh=2,Xi=40.6,Jh=.5,ef=.4,tf="power1.out",nf=1.7,rf=2.6,sf="sine.inOut",ve=[0,246,278.727,311.455,344.182,16.909,49.636,82.364,115.091,147.818,180.545,213.273],Lt={env:1,lcd:0,logo:1,btn:0},of=.75,af=.3,lf=.3,uf=25,oc=1500,cf=oc/1e3,df=1,hf=.1,ff=.05,pf=.3,gf={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},_f=1,mf=.04,Df=.008,Ef=.05,Sf=.03,Tf=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],yf=.7,Af=.2,Cf=250,If=.005,Pf=.045,vf=9,bf=1.8,Lf=75,sn=.85,wf=0,Nf=.33,Rf=.66,xf=1,Of=1.05,Hn=(r,e)=>r.map(t=>({...t,pos:t.pos*e})),ac=[{power:wf,stops:Hn([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],sn)},{power:Nf,stops:Hn([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],sn)},{power:Rf,stops:Hn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],sn)},{power:xf,stops:Hn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],sn)},{power:Of,stops:Hn([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],sn)}],Mf=ac[0].stops.length,Ff=150,kf=40,Bf=15,Uf=20,$f=50,Gf=150,Hf=530,Yf=370,Y={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},ua={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:1,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!1},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:Y.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:Y.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:Y.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:Y.DIMLY_LIT.amplitudeEnd,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:Y.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:Y.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:Y.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:Y.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:Y.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:Y.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:Y.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:Y.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function Vf(r){const e=ua[r];if(!e)return .2;let t=0;for(let n=0;n<e.numCycles;n++){const s=e.numCycles>1?n/(e.numCycles-1):1,o=e.periodStart+s*(e.periodEnd-e.periodStart);t+=o}const i=Math.max(.15,e.periodEnd*1.5);return t+=i,t}const zf={PERIOD:5,BASE_LIGHT_OPACITY_SELECTED:1,LIGHT_OPACITY_DIP_FACTOR:.3,TICK_UPDATE_DURATION:.1,ELIGIBILITY_CLASS:"is-energized"},Xf={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},Wf={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},Pi=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:ua,APP_LOAD_FADE_IN_DURATION:af,AUTO_PLAY_START_DELAY:of,BODY_FADE_IN_DURATION:lf,DEBOUNCE_DELAY:Wh,DEFAULT_ASSIGNMENT_SELECTIONS:Lt,DEFAULT_DIAL_A_HUE:Xi,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:Zh,DIAL_CANVAS_FADE_IN_DURATION:Jh,DIAL_GRADIENT_SCALE_FACTOR:Qh,GSAP_BUTTON_IDLE_DURATION_MAX:rf,GSAP_BUTTON_IDLE_DURATION_MIN:nf,GSAP_BUTTON_IDLE_EASE:sf,GSAP_TWEEN_DURATION:ef,GSAP_TWEEN_EASE:tf,HARMONIC_RESONANCE_PARAMS:zf,HIGHLIGHT_WIDTH_FACTOR:Kh,HUE_ASSIGNMENT_ROW_HUES:ve,HUE_UPDATE_THRESHOLD:Xh,IDLE_LIGHT_DRIFT_PARAMS:Xf,LCD_TEXT_FADE_IN_DURATION:pf,LENS_GRADIENT_BREAKPOINTS:ac,LENS_GRADIENT_POSITION_SCALE:sn,LENS_HOTSPOT_HUE_OFFSET:Lf,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:Pf,LENS_OSCILLATION_AMPLITUDE_MIN:If,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:bf,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:vf,LENS_OSCILLATION_RESTART_DELAY:Cf,LENS_OSCILLATION_SMOOTHING_DURATION:Af,LENS_OSCILLATION_THRESHOLD:yf,LENS_STARTUP_RAMP_DURATION:oc,LENS_STARTUP_TARGET_POWER:uf,MIN_PHASE_DURATION_FOR_STEPPING:ff,NUM_LENS_GRADIENT_STOPS:Mf,NUM_RIDGES:jh,P3_LENS_RAMP_DURATION_S:cf,PIXELS_PER_DEGREE_HUE:zh,PIXELS_PER_DEGREE_ROTATION:Vh,RIDGE_WIDTH_FACTOR:qh,STARTUP_BUTTON_ENERGIZE_STAGGER:Sf,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:mf,STARTUP_DIM_FACTORS_ANIMATION_DURATION:_f,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:Df,STARTUP_LCD_GROUP_APPEAR_STAGGER:Ef,STARTUP_L_REDUCTION_FACTORS:gf,STATE_TRANSITION_ECHO_PARAMS:Wf,SYSTEM_READY_PHASE_DURATION:hf,TERMINAL_CURSOR_BLINK_OFF_MS:Yf,TERMINAL_CURSOR_BLINK_ON_MS:Hf,TERMINAL_MAX_LINES_IN_DOM:Ff,TERMINAL_NEW_LINE_DELAY_MAX_MS:Gf,TERMINAL_NEW_LINE_DELAY_MIN_MS:$f,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:Bf,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:Uf,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:kf,THEME_TRANSITION_DURATION:df,estimateFlickerDuration:Vf,selectorsForDimExitAnimation:Tf},Symbol.toStringTag,{value:"Module"}));class jf{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.off(e,t)}}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(i=>i!==t))}}const Po=new jf;function Ei(r,e){let t=e;e&&typeof e=="object"&&Object.keys(e).length>3&&(t=`{ ${Object.keys(e).join(", ")}, ... }`),console.log(`[AppState EMIT] Event: '${r}'. Payload:`,t!==void 0?t:"N/A",e!==void 0&&t!==e?{fullPayload:e}:""),Po.events[r]&&Po.events[r].forEach(i=>{try{i(e)}catch(n){console.error(`[AppState EMIT] Error in listener for '${r}':`,n,{payload:e})}})}let Ae={A:{id:"A",hue:Xi,rotation:0,targetHue:Xi,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},os={env:{hue:ve[Lt.env],isColorless:ve[Lt.env]===ve[0]},lcd:{hue:ve[Lt.lcd],isColorless:ve[Lt.lcd]===ve[0]},logo:{hue:ve[Lt.logo],isColorless:ve[Lt.logo]===ve[0]},btn:{hue:ve[Lt.btn],isColorless:ve[Lt.btn]===ve[0]}},Li="dim",on=0,an="idle",wi="loading",Ni=-1;function On(r){const e=Ae[r];if(!e){console.warn(`[AppState GET] Target: Dial '${r}'. Requested: State. Actual: Undefined (not initialized).`);return}return{...e}}function ca(r){const e=os[r];if(!e){console.warn(`[AppState GET] Target: TargetColor '${r}'. Requested: Properties. Actual: Undefined (invalid key).`);return}return{...e}}function da(){return Li}function Ln(){return on}function Ds(){return an}function ce(){return wi}function br(){return Ni}function Es(r,e){const t=!Ae[r]||Object.keys(Ae[r]).length===0;t&&(r==="A"||r==="B")&&(Ae[r]={id:r,hue:r==="A"?Xi:0,rotation:0,targetHue:r==="A"?Xi:0,targetRotation:0,isDragging:!1},console.log(`[AppState SET] Target: Dial '${r}'. Requested: Initialization. Actual (New State):`,JSON.parse(JSON.stringify(Ae[r]))));const i={...Ae[r]};Object.assign(Ae[r],e),(t||i.hue!==Ae[r].hue||i.rotation!==Ae[r].rotation||i.isDragging!==Ae[r].isDragging||i.targetHue!==Ae[r].targetHue||i.targetRotation!==Ae[r].targetRotation)&&(console.log(`[AppState SET] Target: Dial '${r}'. Requested (Changes):`,JSON.parse(JSON.stringify(e)),"Old State:",JSON.parse(JSON.stringify(i)),"Actual (New State):",JSON.parse(JSON.stringify(Ae[r]))),Ei("dialUpdated",{id:r,state:{...Ae[r]}}))}function vo(r,e){if(os.hasOwnProperty(r)){const t=(Number(e)%360+360)%360,i=ve.length>0&&t===ve[0],n=os[r];if(n.hue!==t||n.isColorless!==i){const s={...n};n.hue=t,n.isColorless=i,console.log(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${e}, Normalized: ${t}. Old Props:`,s,"Actual (New Props):",{...n}),Ei("targetColorChanged",{targetKey:r,hue:t,isColorless:i})}}else console.warn(`[AppState SET] Target: TargetColor '${r}'. Requested Hue: ${e}. Error: Invalid targetKey.`)}function lc(r){if(["dim","dark","light"].includes(r)&&Li!==r){const e=Li;Li=r,console.log(`[AppState SET] Target: Theme. Requested: '${r}'. Old: '${e}', Actual (New): '${Li}'`),Ei("themeChanged",Li)}}function bo(r){const e=Math.max(0,Math.min(r/100,1));if(Math.abs(on-e)>1e-4){const t=on;on=e,console.log(`[AppState SET] Target: TrueLensPower. Requested: ${r}%. Old: ${t.toFixed(3)}, Actual (New): ${on.toFixed(3)} (0-1 scale)`),Ei("trueLensPowerChanged",on)}}function qf(r){if(["idle","dragging","settling"].includes(r)&&an!==r){const e=an;an=r,console.log(`[AppState SET] Target: DialBInteractionState. Requested: '${r}'. Old: '${e}', Actual (New): '${an}'`),Ei("dialBInteractionChange",an)}}function uc(r){if(["loading","starting-up","interactive","error"].includes(r)&&wi!==r){const e=wi;wi=r,console.log(`[AppState SET] Target: AppStatus. Requested: '${r}'. Old: '${e}', Actual (New): '${wi}'`),Ei("appStatusChanged",wi)}}function Kf(r){if(typeof r=="number"&&Ni!==r){const e=Ni;Ni=r,console.log(`[AppState SET] Target: CurrentStartupPhaseNumber. Requested: ${r}. Old: ${e}, Actual (New): ${Ni}`),Ei("startupPhaseNumberChanged",Ni)}}function qe(r,e){return typeof e!="function"?(console.error(`[AppState Subscribe] Listener for event '${r}' is not a function.`),()=>{}):Po.on(r,e)}(!Ae.A||Object.keys(Ae.A).length===0)&&Es("A",{hue:Xi,rotation:0,targetHue:Xi,targetRotation:0,isDragging:!1});(!Ae.B||Object.keys(Ae.B).length===0)&&Es("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});console.log("[AppState INIT] Initialized with default states:",{dials:JSON.parse(JSON.stringify(Ae)),targetColorProps:JSON.parse(JSON.stringify(os)),currentTheme:Li,appStatus:wi,currentStartupPhaseNumber:Ni});const Ji=Object.freeze(Object.defineProperty({__proto__:null,emit:Ei,getAppStatus:ce,getCurrentStartupPhaseNumber:br,getCurrentTheme:da,getDialBInteractionState:Ds,getDialState:On,getTargetColorProperties:ca,getTrueLensPower:Ln,setAppStatus:uc,setCurrentStartupPhaseNumber:Kf,setDialBInteractionState:qf,setTargetColorProperties:vo,setTheme:lc,setTrueLensPower:bo,subscribe:qe,updateDialState:Es},Symbol.toStringTag,{value:"Module"}));class Qf{constructor(e,t,i,n,s,o){if(this.element=e,this.config=t,this.gsap=i,this.appState=n,this.configModule=s,this.uiUpdater=o,this.debugAmbient=!1,!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule,this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=t.isSelectedByDefault||!1,this._isResonating=!1,this.idleLightDriftTweens=[],this.stateTransitionEchoTween=null,this._updateAriaAttributes()}setConfigModule(e){this.configModule=e}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(e,t={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:o}=t;this.getIdentifier();const a=e?e.split(" ").filter(h=>h):[],l=new Set(a);let c=s;if(!c){const h=new Set;Object.values(V).flatMap(u=>u.split(" ")).forEach(u=>{this.element.classList.contains(u)&&h.add(u)});const f=new Set(a);if(this._isSelected?f.add("is-selected"):f.delete("is-selected"),h.size!==f.size)c=!0;else for(const u of f)if(!h.has(u)){c=!0;break}}if(!c&&!s){i||this._updateAriaAttributes();return}if(!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(V.FLICKERING);const h=Array.from(this.element.querySelectorAll(".light"));h.length>0&&this.gsap.set(h,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"})}const d=Object.values(V).flatMap(h=>h.split(" ")).filter(h=>h&&h!=="is-selected");[...new Set(d)].forEach(h=>{this.element.classList.contains(h)&&this.element.classList.remove(h)}),l.forEach(h=>{h!=="is-selected"&&this.element.classList.add(h)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this.currentClasses.clear(),this.element.classList.forEach(h=>this.currentClasses.add(h)),i||this._updateAriaAttributes()}_updateAriaAttributes(){const e=this._isSelected;this.config.type==="toggle"?this.element.setAttribute("aria-pressed",e.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",e.toString());const t=Array.from(this.element.classList).some(i=>i===V.ENERGIZED_UNSELECTED.split(" ")[0]||i===V.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",t?"0":"-1")}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}setSelected(e,t={}){const{skipAnimation:i=!1,themeContext:n="theme-dark",phaseContext:s="ButtonSetSelected"}=t;this.getIdentifier();let o=!1;if(this._isSelected===e){if(e&&!this.element.classList.contains("is-selected")&&(o=!0),!e&&this.element.classList.contains("is-selected")&&(o=!0),!o)return}else this._isSelected=e;let a=V.ENERGIZED_UNSELECTED;this.element.classList.contains(V.DIMLY_LIT.split(" ")[0])?a=V.DIMLY_LIT_UNSELECTED:this.element.classList.contains(V.UNLIT.split(" ")[0])?a=V.UNLIT:this.element.classList.contains(V.ENERGIZED_UNSELECTED.split(" ")[0])&&(a=V.ENERGIZED_UNSELECTED);let l=a;this._isSelected?a===V.DIMLY_LIT_UNSELECTED?l=V.DIMLY_LIT_SELECTED:(a===V.ENERGIZED_UNSELECTED||a===V.UNLIT)&&(l=V.ENERGIZED_SELECTED):a===V.DIMLY_LIT_SELECTED?l=V.DIMLY_LIT_UNSELECTED:a===V.ENERGIZED_SELECTED&&(l=V.ENERGIZED_UNSELECTED),this.setState(l,{skipAnimation:i,themeContext:n,phaseContext:s,forceState:!0})}handleInteraction(e){const t=this.getIdentifier();this.config.type==="toggle"?this.setSelected(!this._isSelected,{themeContext:this.appState.getCurrentTheme(),phaseContext:`ToggleInteract_${t}`}):this.config.type==="radio"?this._isSelected||this.setSelected(!0,{themeContext:this.appState.getCurrentTheme(),phaseContext:`RadioInteract_${t}`}):this.config.type}setPressedVisuals(e){if(this.getIdentifier(),this._pressTimeoutId&&this.element.classList.contains(V.PRESSING)&&!e&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),e){this.element.classList.add(V.PRESSING);const t=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(t)*(t.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(V.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(V.PRESSING)}updateHarmonicResonanceVisuals(e){!this.configModule||!this._isResonating||this.debugAmbient&&console.log(`[Button ${this.getIdentifier()} updateHarmonicResonanceVisuals] Called. Progress: ${e.toFixed(3)}. (CSS method should be active)`)}startHarmonicResonance(){this.configModule&&(this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Attempting to START Harmonic Resonance. Current _isResonating: ${this._isResonating}, Class active: ${this.element.classList.contains("is-resonating")}`),!this.element.classList.contains("is-resonating")&&(this._isResonating=!0,this.element.classList.add("is-resonating"),this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Harmonic Resonance STARTED. Added .is-resonating class.`)))}stopHarmonicResonance(){this.configModule&&(this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Attempting to STOP Harmonic Resonance. Current _isResonating: ${this._isResonating}, Class active: ${this.element.classList.contains("is-resonating")}`),this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"),this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Harmonic Resonance STOPPED. Removed .is-resonating class.`)))}startIdleLightDrift(){if(!this.configModule)return;this.stopIdleLightDrift();const e=Array.from(this.element.querySelectorAll(".light"));if(!e.length)return;const t=this.configModule.IDLE_LIGHT_DRIFT_PARAMS;this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Starting Idle Light Drift for ${e.length} lights.`),e.forEach((i,n)=>{const s=t.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,o=s*t.OPACITY_VARIATION_FACTOR,a=s-o,l=s+o,c=this.gsap.fromTo(i,{opacity:this.gsap.utils.random(a,l)},{opacity:this.gsap.utils.random(a,l),duration:this.gsap.utils.random(t.PERIOD_MIN,t.PERIOD_MAX)/2,yoyo:!0,repeat:-1,delay:this.gsap.utils.random(0,t.PERIOD_MAX/4)+n*t.STAGGER_PER_LIGHT,ease:"sine.inOut",overwrite:"auto"});this.idleLightDriftTweens.push(c)})}stopIdleLightDrift(){if(!this.configModule||this.idleLightDriftTweens.length===0)return;this.debugAmbient&&console.log(`[Button ${this.getIdentifier()}] Stopping Idle Light Drift (${this.idleLightDriftTweens.length} tweens).`),this.idleLightDriftTweens.forEach(t=>t.kill()),this.idleLightDriftTweens=[];const e=Array.from(this.element.querySelectorAll(".light"));e.length>0&&this.gsap.set(e,{opacity:this.configModule.IDLE_LIGHT_DRIFT_PARAMS.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED})}playStateTransitionEcho(){if(!this.configModule)return;this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill();const e=Array.from(this.element.querySelectorAll(".light"));if(!e.length)return;const t=this.configModule.STATE_TRANSITION_ECHO_PARAMS,i=this.gsap.timeline({delay:t.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null}});this.stateTransitionEchoTween=i;const n=parseFloat(getComputedStyle(e[0]).opacity);for(let s=0;s<t.NUM_PULSES;s++){const o=t.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(t.LIGHT_DECAY_FACTOR,s),a=n*(1-o),l=t.BASE_PULSE_PERIOD*Math.pow(t.PERIOD_DECAY_FACTOR,s);i.to(e,{opacity:a,duration:l/2,yoyo:!0,repeat:1,ease:"sine.out"},s===0?">":`-=${l*.3}`)}}destroy(){this.getIdentifier(),this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.stopIdleLightDrift(),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function ni(r,e,t=0){if(!r)return t;const i=r[e];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:t}function as(r,e,t={}){var C,E,b,v,I;const i=t.gsapInstance||ct;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:t.gsapInstance,globalGsap:ct});const y=ct.timeline();return y.to({},{duration:.001}),{timeline:y,completionPromise:Promise.resolve()}}const n=typeof e=="string"?e:"CustomProfile",s=r&&r.length>0&&r[0]?r[0].id||r[0].className.split(" ")[0]||r[0].tagName:"unknownTarget",a={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...t};let l=typeof e=="string"?{...ua[e]}:{...e};const c=new Promise(y=>{a.gsapInternalOnComplete=()=>{y()}});if(!l||Object.keys(l).length===0){console.warn(`[CAF - ${n} for ${s}] Profile not found or empty. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}l.glow={...l.glow||{}},a.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(l.glow.isButtonSelected=a.overrideGlowParams.isButtonSelected);const d=Array.isArray(r)?r.filter(y=>y):r?[r]:[];if(d.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const y=i.timeline();return y.eventCallback("onComplete",()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()}),y.to({},{duration:.001}),{timeline:y,completionPromise:c}}const h=i.timeline({onStart:()=>{a.onStart&&a.onStart()},onComplete:()=>{a.onTimelineComplete&&a.onTimelineComplete(),a.gsapInternalOnComplete()},onUpdate:a.onUpdate});let f=d;if(l.targetProperty==="button-lights-and-frame"){const y=[];d.forEach(O=>{const R=O.querySelectorAll(a.lightTargetSelector);R.length>0&&y.push(...Array.from(R))}),y.length>0&&(f=y,i.killTweensOf(f),i.set(f,{clearProps:"all",overwrite:!0}))}else(l.targetProperty==="text-shadow-opacity-and-blur"||l.targetProperty==="element-opacity-and-box-shadow")&&(f=d,i.killTweensOf(f));if(l.amplitudeStart!==void 0&&l.amplitudeStart<=.01&&(!l.glow||l.glow.initialOpacity===void 0||l.glow.initialOpacity<=.01)){if(f.length>0&&h.set(f,{autoAlpha:0,immediateRender:!0}),l.glow&&(l.glow.opacityVar||(C=l.glow.animatedProperties)!=null&&C.opacity)){const y={};l.glow.opacityVar&&(y[l.glow.opacityVar]=0),(E=l.glow.animatedProperties)!=null&&E.opacity&&(y[l.glow.animatedProperties.opacity]=0),l.glow.sizeVar&&(y[l.glow.sizeVar]="0px"),(b=l.glow.animatedProperties)!=null&&b.blur&&(y[l.glow.animatedProperties.blur]="0px"),Object.keys(y).length>0&&h.set(d,{css:y,immediateRender:!0})}}else{if(f.length>0){const y=l.amplitudeStart!==void 0?l.amplitudeStart:0;h.set(f,{autoAlpha:y,immediateRender:!0})}if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y={},O=ni(l.glow,"initialOpacity",0),R=ni(l.glow,"initialSize","0px");l.glow.opacityVar&&(y[l.glow.opacityVar]=O),l.glow.sizeVar&&(y[l.glow.sizeVar]=typeof R=="number"?`${R}px`:R),(v=l.glow.animatedProperties)!=null&&v.opacity&&(y[l.glow.animatedProperties.opacity]=O),(I=l.glow.animatedProperties)!=null&&I.blur&&(y[l.glow.animatedProperties.blur]=typeof R=="number"?`${R}px`:R),Object.keys(y).length>0&&h.set(d,{css:y,immediateRender:!0})}}let g=0,p=.01;for(let y=0;y<l.numCycles;y++){const O=l.numCycles>1?y/(l.numCycles-1):1,R=l.periodStart+O*(l.periodEnd-l.periodStart),$=Math.max(.01,R*l.onDurationRatio),N=Math.max(.01,R*(1-l.onDurationRatio)),Q=l.amplitudeStart+O*(l.amplitudeEnd-l.amplitudeStart);p=$;const K=ni(l.glow,"peakOpacity",1),B=ni(l.glow,"peakSize","5px"),G={autoAlpha:Q,duration:$,ease:"power1.inOut"},oe={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const pt=l.glow.scaleWithAmplitude?K*Q:K;l.glow.opacityVar&&(oe[l.glow.opacityVar]=pt),l.glow.sizeVar&&(oe[l.glow.sizeVar]=typeof B=="number"?`${B}px`:B),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(oe[l.glow.animatedProperties.opacity]=pt),l.glow.animatedProperties.blur&&(oe[l.glow.animatedProperties.blur]=typeof B=="number"?`${B}px`:B))}if(f.length>0&&h.to(f,G,g),Object.keys(oe).length>0&&h.to(d,{css:oe,duration:$,ease:"power1.inOut"},g),g+=$,y<l.numCycles-1){const Pt={autoAlpha:l.amplitudeStart>0?l.amplitudeStart*.3:0,duration:N,ease:"power1.inOut"},z={},j=ni(l.glow,"initialOpacity",0),J=ni(l.glow,"initialSize","0px");l.glow&&(l.glow.colorVar||l.glow.animatedProperties)&&(l.glow.opacityVar&&(z[l.glow.opacityVar]=j),l.glow.sizeVar&&(z[l.glow.sizeVar]=typeof J=="number"?`${J}px`:J),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(z[l.glow.animatedProperties.opacity]=j),l.glow.animatedProperties.blur&&(z[l.glow.animatedProperties.blur]=typeof J=="number"?`${J}px`:J))),f.length>0&&h.to(f,Pt,g),Object.keys(z).length>0&&h.to(d,{css:z,duration:N,ease:"power1.inOut"},g),g+=N}}const _=Math.max(.15,l.periodEnd*1.5),D={autoAlpha:l.amplitudeEnd,duration:_,ease:"sine.out"},S={};if(l.glow&&(l.glow.colorVar||l.glow.animatedProperties)){const y=ni(l.glow,"finalOpacity",0),O=ni(l.glow,"finalSize","0px");l.glow.opacityVar&&(S[l.glow.opacityVar]=y),l.glow.sizeVar&&(S[l.glow.sizeVar]=typeof O=="number"?`${O}px`:O),l.glow.animatedProperties&&(l.glow.animatedProperties.opacity&&(S[l.glow.animatedProperties.opacity]=y),l.glow.animatedProperties.blur&&(S[l.glow.animatedProperties.blur]=typeof O=="number"?`${O}px`:O))}const A=p*.3;return f.length>0&&h.to(f,D,`>-=${A}`),Object.keys(S).length>0&&h.to(d,{css:S,duration:_,ease:"sine.out"},"<"),h.duration()===0&&h.to({},{duration:.001}),{timeline:h,completionPromise:c}}function Zf(r,e){let t;return function(...n){const s=this,o=()=>{t=null,r.apply(s,n)};clearTimeout(t),t=setTimeout(o,e)}}function Jf(r,e,t,i,n){return(r-e)*(n-i)/(t-e)+i}function ep(r){for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r}const V={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering"};class tp{constructor(e,t,i){this.gsap=e,this.appState=t,this.config=i,this.uiUpdater=null,this._buttons=new Map,this._buttonGroups=new Map,this.debug=!1,this._eventListeners={},this.aam=null}setAAM(e){this.aam=e}setUiUpdater(e){this.uiUpdater=e}on(e,t){if(typeof t!="function"){console.error(`[ButtonManager] Invalid callback for event "${e}"`);return}this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t)}emit(e,t){this.debug&&console.log(`[ButtonManager EMIT] Event: '${e}', Data:`,t),this._eventListeners[e]&&this._eventListeners[e].forEach(i=>{try{i(t)}catch(n){console.error(`[ButtonManager] Error in listener for event "${e}":`,n,{data:t})}})}init(e){this.debug&&console.log("[ButtonManager INIT] Initializing buttons:",e==null?void 0:e.length),e&&e.length>0&&e.forEach(t=>{this.addButton(t)}),this.setInitialDimStates()}addButton(e,t=null){if(!e||this._buttons.has(e))return;const i=this._generateButtonConfig(e,t),n=new Qf(e,i,this.gsap,this.appState,this.config,this.uiUpdater);this._buttons.set(e,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n))}_generateButtonConfig(e,t=null){var a;const i=e.classList.contains("button-unit--toggle")?"toggle":e.classList.contains("button-unit--action")?"action":e.classList.contains("button-unit--radio")?"radio":"default";let n=t;if(!n&&(n=((a=e.closest("[data-group-id]"))==null?void 0:a.dataset.groupId)||null,!n&&i==="radio")){const l=e.closest('[role="radiogroup"]');l&&(n=l.dataset.assignmentTarget||l.id||`radio-group-${[...this._buttonGroups.keys()].length}`)}const s=e.dataset.toggleValue||e.dataset.value||null,o=e.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:o}}getAllButtonInstances(){return this._buttons.values()}getButtonInstance(e){return this._buttons.get(e)}setInitialDimStates(){this.debug&&console.log("[BM setInitialDimStates] Setting initial states for all buttons to UNLIT."),this._buttons.forEach(e=>{const t=e.getIdentifier();e.isSelected()&&e.setSelected(!1,{skipAnimation:!0,phaseContext:`P0_ForceUnselect_${t}`}),e.setState(V.UNLIT,{skipAnimation:!0,themeContext:"theme-dim",phaseContext:`P0_InitialUnlit_BM_${t}`,forceState:!0})})}handleButtonInteraction(e,t="click"){const i=this._buttons.get(e);if(!i)return;const n=i.getIdentifier();if(this.debug&&console.log(`[BM INTERACTION] Event: ${t} on ${n}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&i.getGroupId()!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${n}`);return}this.emit("beforeButtonTransition",i),i.handleInteraction(t);const s=i.getGroupId();s&&(i.config.type==="toggle"||i.config.type==="radio")&&i.isSelected()&&this._buttonGroups.get(s).forEach(o=>{o!==i&&o.isSelected()&&(this.debug&&console.log(`[BM INTERACTION] Deselecting other member ${o.getIdentifier()} in group ${s}`),this.emit("beforeButtonTransition",o),o.setSelected(!1,{themeContext:this.appState.getCurrentTheme(),phaseContext:`GroupAutoDeselect_${o.getIdentifier()}`}),this.emit("afterButtonTransition",o))}),this.appState.emit("buttonInteracted",{buttonIdentifier:n,newState:i.getCurrentStateClasses()}),this.emit("afterButtonTransition",i)}setGroupSelected(e,t){const i=this._buttonGroups.get(e);if(!i){console.warn(`[BM setGroupSelected] Group not found: ${e}`);return}this.debug&&console.log(`[BM setGroupSelected] Group: ${e}, Target: ${typeof t=="string"?t:t.ariaLabel}`),i.forEach(n=>{let s=!1;typeof t=="string"?s=n.config.value===t:s=n.element===t,n.isSelected()!==s?(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`setGroupSelected_${e}_${n.getIdentifier()}`,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n)):(s&&!n.element.classList.contains("is-selected")||!s&&n.element.classList.contains("is-selected"))&&(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`setGroupSelected_DOM_Sync_${e}_${n.getIdentifier()}`,forceState:!0}),this.emit("afterButtonTransition",n))})}playFlickerToState(e,t,i){const n=this._buttons.get(e);if(!n)return console.warn(`[BM playFlickerToState - ${i.phaseContext}] Button instance NOT FOUND for element:`,e),{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:s,phaseContext:o="UnknownPhase",isButtonSelectedOverride:a=null}=i,l=n.getIdentifier();let c=V.UNLIT;s.toLowerCase().includes("fromdimlylit")&&(c=V.DIMLY_LIT);let d=c;c===V.DIMLY_LIT?d=V.DIMLY_LIT_UNSELECTED:c===V.ENERGIZED_UNSELECTED&&(d=V.ENERGIZED_UNSELECTED),(d===V.DIMLY_LIT_UNSELECTED||d===V.UNLIT)&&n.isSelected()&&n.setSelected(!1,{skipAnimation:!0,phaseContext:`PreFlickerTempUnselect_${o}_${l}`,forceState:!0}),n.setState(d,{skipAnimation:!0,phaseContext:`PreFlickerForceBaseState_${o}_${l}`,forceState:!0});const h=t.includes("is-selected");let f=h;n.isSelected()!==h&&n.setSelected(h,{skipAnimation:!0,phaseContext:`PreFlickerSetFinalSelected_${o}_${l}`,forceState:!0}),typeof a=="boolean"&&(f=a);const u={...i,overrideGlowParams:{...i.overrideGlowParams||{},isButtonSelected:f},onTimelineComplete:()=>{n.setState(t,{skipAnimation:!0,themeContext:this.appState.getCurrentTheme(),phaseContext:`FlickerEnd_${o}_${l}`,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n),i.onComplete&&i.onComplete()}};delete u.onComplete;const{timeline:g,completionPromise:p}=as(e,s,u);return{timeline:g,completionPromise:p}}flickerDimlyLitToEnergizedStartup(e){const{profileNameUnselected:t,profileNameSelected:i,stagger:n,phaseContext:s}=e,o=[];if(this._buttons.forEach(d=>{d.getCurrentClasses().has(V.DIMLY_LIT.split(" ")[0])&&o.push(d)}),this.debug&&console.log(`[BM flickerDimlyLitToEnergizedStartup - ${s}] Total buttons to energize: ${o.length}`),o.length===0)return{masterTimeline:null,masterCompletionPromise:Promise.resolve()};ep(o);const a=this.gsap.timeline(),l=[];o.forEach((d,h)=>{let f=V.ENERGIZED_UNSELECTED,u=t,g=!1;const p=d.getGroupId(),_=d.config.value,D=d.getIdentifier();this.config.DEFAULT_ASSIGNMENT_SELECTIONS.hasOwnProperty(p)&&this.config.DEFAULT_ASSIGNMENT_SELECTIONS[p].toString()===_&&(f=V.ENERGIZED_SELECTED,u=i,g=!0);const{timeline:S,completionPromise:A}=this.playFlickerToState(d.element,f,{profileName:u,phaseContext:`${s}_${D}`,isButtonSelectedOverride:g});S&&a.add(S,n*h),l.push(A)});const c=Promise.all(l);return{masterTimeline:a,masterCompletionPromise:c}}setButtonsToState(e,t,i={}){const{staggerTime:n=.05,phaseContext:s="BatchSetState"}=i,o=this.gsap.timeline();return e.forEach((a,l)=>{const c=this._buttons.get(a);if(c){const d=c.getIdentifier();o.call(()=>{this.emit("beforeButtonTransition",c);const h=t.includes("is-selected");c.isSelected()!==h&&c.setSelected(h,{skipAnimation:!0,phaseContext:`BatchSetSelected_${s}_${d}`,forceState:!0}),c.setState(t,{themeContext:this.appState.getCurrentTheme(),phaseContext:`${s}_${d}`,forceState:!0}),c.playStateTransitionEcho(),this.emit("afterButtonTransition",c)},null,l*n)}}),{timeline:o,completionPromise:Promise.resolve()}}setPressedVisuals(e,t){const i=this._buttons.get(e);i&&i.setPressedVisuals(t)}}class ip{constructor(e,t,i,n,s){if(this.containerElement=e,this.dialId=t,this.appState=i,this.configModule=n,this.gsap=s,this.canvas=this.containerElement.querySelector(`#dial-canvas-${this.dialId}`),!this.canvas){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Canvas element not found!`);return}if(this.ctx=this.canvas.getContext("2d"),!this.ctx){console.error(`[Dial ${this.dialId} CONSTRUCTOR] Failed to get 2D context!`);return}this.computedStyleVars={},this.isDragging=!1,this.currentPointerX=0,this.gsapValueTween=null,this.isActiveDim=!1,this.dialBSettleTimer=null,this.unsubscribers=[],this._updateAndCacheComputedStyles();let o=this.appState.getDialState(this.dialId);if(!o||Object.keys(o).length===0){const a=this.dialId==="B"?0:this.configModule.DEFAULT_DIAL_A_HUE,l=this.dialId==="B"?a*this.configModule.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:0;o={id:this.dialId,hue:a,rotation:l,targetHue:a,targetRotation:l,isDragging:!1},this.appState.updateDialState(this.dialId,o)}console.log(`[Dial ${this.dialId} CONSTRUCTOR] Before initial resizeCanvas/draw. Current phase from appState: ${this.appState.getCurrentStartupPhaseNumber()}, isActiveDim: ${this.isActiveDim}`),this.resizeCanvas(!0),this._addDragListeners(),this._subscribeToAppStateEvents()}_subscribeToAppStateEvents(){this.unsubscribers.push(this.appState.subscribe("dialUpdated",this._onAppStateDialUpdate.bind(this))),this.unsubscribers.push(this.appState.subscribe("themeChanged",this._onThemeChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("appStatusChanged",this._onAppStatusChange.bind(this))),this.unsubscribers.push(this.appState.subscribe("startupPhaseNumberChanged",this._onStartupPhaseChange.bind(this)))}_onStartupPhaseChange(e){this._draw()}resizeCanvas(e=!1){if(!this.canvas||!this.ctx)return!1;const t=window.devicePixelRatio||1,i=this.canvas.offsetWidth,n=this.canvas.offsetHeight;if(i===0||n===0)return!1;const s=Math.round(i*t),o=Math.round(n*t);let a=!1;return(this.canvas.width!==s||this.canvas.height!==o)&&(this.canvas.width=s,this.canvas.height=o,a=!0),(a||e)&&(this.ctx.setTransform(t,0,0,t,0,0),this._draw()),a}setActiveDimState(e){this.isActiveDim!==e&&(this.isActiveDim=e,document.body.classList.contains("theme-dim")?this.containerElement.classList.toggle("js-active-dim-dial",e):this.containerElement.classList.remove("js-active-dim-dial"),this._updateAndCacheComputedStyles(),this._draw())}_handleInteractionStart(e){if(this.appState.getAppStatus()!=="interactive"||this.isDragging)return;e.type==="touchstart"&&e.cancelable&&e.preventDefault(),this.isDragging=!0,this.gsapValueTween&&this.gsapValueTween.kill(),this.gsapValueTween=null,this.currentPointerX=e.touches?e.touches[0].clientX:e.clientX;const t=this.appState.getDialState(this.dialId);this.appState.updateDialState(this.dialId,{isDragging:!0,targetHue:t.hue,targetRotation:t.rotation}),this.dialId==="B"&&(this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.appState.setDialBInteractionState("dragging")),this.containerElement.style.cursor="grabbing",document.body.style.cursor="grabbing"}_handleInteractionMove(e){if(!this.isDragging||this.appState.getAppStatus()!=="interactive")return;e.type==="touchmove"&&e.cancelable&&e.preventDefault();let t=e.touches?e.touches[0].clientX:e.clientX;const i=t-this.currentPointerX,n=this.appState.getDialState(this.dialId);let s=n.targetHue+i/this.configModule.PIXELS_PER_DEGREE_HUE;const o=n.targetRotation+i/this.configModule.PIXELS_PER_DEGREE_ROTATION;this.dialId==="B"&&(s=Math.max(0,Math.min(s,359.999))),this.currentPointerX=t,this.gsapValueTween&&this.gsapValueTween.kill();const a={hue:n.hue,rotation:n.rotation};this.gsapValueTween=this.gsap.to(a,{rotation:o,hue:s,duration:this.configModule.GSAP_TWEEN_DURATION,ease:this.configModule.GSAP_TWEEN_EASE,overwrite:"auto",onUpdate:()=>{if(!this.isDragging&&this.gsapValueTween){this.gsapValueTween.kill(),this.gsapValueTween=null;return}this.appState.updateDialState(this.dialId,{hue:a.hue,rotation:a.rotation,targetHue:s,targetRotation:o}),this.dialId==="B"&&this.appState.setTrueLensPower(a.hue/359.999*100)},onComplete:()=>{this.gsapValueTween=null}})}_handleInteractionEnd(e){if(!this.isDragging){document.body.style.cursor==="grabbing"&&(document.body.style.cursor="default");return}const t=this.dialId;this.isDragging=!1;const i=this.appState.getDialState(t);this.appState.updateDialState(t,{isDragging:!1}),this.gsapValueTween&&this.gsapValueTween.isActive()?(this.gsapValueTween.kill(),this.gsapValueTween=null,this.appState.updateDialState(t,{hue:i.targetHue,rotation:i.targetRotation}),t==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)):(Math.abs(i.hue-i.targetHue)>.01||Math.abs(i.rotation-i.targetRotation)>.01)&&(this.appState.updateDialState(t,{hue:i.targetHue,rotation:i.targetRotation}),t==="B"&&this.appState.setTrueLensPower(i.targetHue/359.999*100)),t==="B"&&(this.appState.setDialBInteractionState("settling"),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer),this.dialBSettleTimer=setTimeout(()=>{this.appState.setDialBInteractionState("idle"),this.dialBSettleTimer=null},this.configModule.LENS_OSCILLATION_RESTART_DELAY)),this.containerElement.style.cursor="grab",document.body.style.cursor="default"}_addDragListeners(){this.boundHandleInteractionStart=this._handleInteractionStart.bind(this),this.boundHandleInteractionMove=this._handleInteractionMove.bind(this),this.boundHandleInteractionEnd=this._handleInteractionEnd.bind(this),this.containerElement.addEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.addEventListener("touchstart",this.boundHandleInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundHandleInteractionMove),window.addEventListener("touchmove",this.boundHandleInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundHandleInteractionEnd),window.addEventListener("touchend",this.boundHandleInteractionEnd),window.addEventListener("mouseleave",this.boundHandleInteractionEnd),window.addEventListener("touchcancel",this.boundHandleInteractionEnd)}_removeDragListeners(){this.containerElement.removeEventListener("mousedown",this.boundHandleInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundHandleInteractionStart),window.removeEventListener("mousemove",this.boundHandleInteractionMove),window.removeEventListener("touchmove",this.boundHandleInteractionMove),window.removeEventListener("mouseup",this.boundHandleInteractionEnd),window.removeEventListener("touchend",this.boundHandleInteractionEnd),window.removeEventListener("mouseleave",this.boundHandleInteractionEnd),window.removeEventListener("touchcancel",this.boundHandleInteractionEnd)}_updateAndCacheComputedStyles(){if(!this.ctx)return;const e=getComputedStyle(document.documentElement),t=document.body.classList.contains("theme-dim");t&&this.isActiveDim?this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-dim-active-face-bg-l").trim()||"0.12",faceBgC:e.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",faceBgH:e.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeL:e.getPropertyValue("--dial-dim-active-ridge-l").trim()||"0.25",ridgeC:e.getPropertyValue("--dial-dim-active-ridge-c").trim()||e.getPropertyValue("--dial-dim-active-face-bg-c").trim()||"0.003",ridgeH:e.getPropertyValue("--dial-dim-active-ridge-h").trim()||e.getPropertyValue("--dial-dim-active-face-bg-h").trim()||"240",ridgeHighlightL:e.getPropertyValue("--dial-dim-active-ridge-highlight-l").trim()||"0.60",ridgeHighlightA:e.getPropertyValue("--dial-dim-active-ridge-highlight-a").trim()||"0.4",shadingStart:e.getPropertyValue("--dial-dim-active-shading-start-color").trim()||"oklch(0% 0 0 / 0.1)",shadingEnd:e.getPropertyValue("--dial-dim-active-shading-end-color").trim()||"oklch(0% 0 0 / 0.15)"}:t&&!this.isActiveDim?this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-face-bg-l").trim()||"0.01",faceBgC:e.getPropertyValue("--dial-face-bg-c").trim()||"0",faceBgH:e.getPropertyValue("--dial-face-bg-h").trim()||"0",ridgeL:e.getPropertyValue("--dial-ridge-l").trim()||"0.01",ridgeC:e.getPropertyValue("--dial-ridge-c").trim()||"0",ridgeH:e.getPropertyValue("--dial-ridge-h").trim()||"0",ridgeHighlightL:"0",ridgeHighlightA:"0",shadingStart:"oklch(0 0 0 / 0)",shadingEnd:"oklch(0 0 0 / 0)"}:this.computedStyleVars={faceBgL:e.getPropertyValue("--dial-face-bg-l").trim()||"0.20",faceBgC:e.getPropertyValue("--dial-face-bg-c").trim()||"0.005",faceBgH:e.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeL:e.getPropertyValue("--dial-ridge-l").trim()||"0.45",ridgeC:e.getPropertyValue("--dial-ridge-c").trim()||e.getPropertyValue("--dial-face-bg-c").trim()||"0.005",ridgeH:e.getPropertyValue("--dial-ridge-h").trim()||e.getPropertyValue("--dial-face-bg-h").trim()||"240",ridgeHighlightL:e.getPropertyValue("--dial-ridge-highlight-l").trim()||"0.95",ridgeHighlightA:e.getPropertyValue("--dial-ridge-highlight-a").trim()||"0.85",shadingStart:e.getPropertyValue("--dial-shading-start-color").trim()||"oklch(0% 0 0 / 0.35)",shadingEnd:e.getPropertyValue("--dial-shading-end-color").trim()||"oklch(0% 0 0 / 0.4)"}}_draw(){if(!this.ctx||!this.canvas||!this.configModule)return;if(!this.computedStyleVars.faceBgL&&(this._updateAndCacheComputedStyles(),!this.computedStyleVars.faceBgL)){console.error(`[Dial ${this.dialId} _draw] computedStyleVars.faceBgL still undefined after update. Bailing draw.`);return}const e=this.appState.getDialState(this.dialId);if(!e)return;const{rotation:t}=e,i=this.canvas.width/(window.devicePixelRatio||1),n=this.canvas.height/(window.devicePixelRatio||1);if(i===0||n===0)return;this.ctx.clearRect(0,0,i,n);const s=this.appState.getAppStatus(),o=this.appState.getCurrentStartupPhaseNumber(),a=document.body.classList.contains("theme-dim"),l=document.body.classList.contains("is-transitioning-from-dim"),c=a&&!this.isActiveDim&&s==="starting-up"&&(o===-1||o>=0&&o<6);c?this.ctx.fillStyle="oklch(0 0 0)":this.ctx.fillStyle=`oklch(${this.computedStyleVars.faceBgL} ${this.computedStyleVars.faceBgC} ${this.computedStyleVars.faceBgH})`,this.ctx.fillRect(0,0,i,n);let d;if(a&&!l?d=this.isActiveDim:d=this.isActiveDim||s==="interactive",c&&(d=!1),d){const h=2*Math.PI/this.configModule.NUM_RIDGES,f=-Math.PI/4,u=t*Math.PI/180,g=this.configModule.DIAL_GRADIENT_SCALE_FACTOR;for(let p=0;p<this.configModule.NUM_RIDGES;p++){const _=p*h+u,D=Math.cos(_),S=Math.sin(_);if(D>.03){const A=i/this.configModule.NUM_RIDGES*this.configModule.RIDGE_WIDTH_FACTOR*D,C=A*g,E=(A-C)/2,I=i/2+S*i/2-A/2+E;if(this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH})`,this.ctx.fillRect(I,0,C,n),parseFloat(this.computedStyleVars.ridgeHighlightA)>0){const y=Math.max(0,Math.cos(_-f)),O=Math.pow(y,10)*Math.pow(D,1.5);if(O>.05){const R=Math.min(1,parseFloat(this.computedStyleVars.ridgeHighlightA)*O*1.5);this.ctx.fillStyle=`oklch(${this.computedStyleVars.ridgeHighlightL} ${this.computedStyleVars.ridgeC} ${this.computedStyleVars.ridgeH} / ${R.toFixed(3)})`;const $=I+C*.1,N=C*this.configModule.HIGHLIGHT_WIDTH_FACTOR;this.ctx.fillRect($,0,N,n)}}}}if(this.computedStyleVars.shadingStart!=="oklch(0 0 0 / 0)"){const p=this.ctx.createLinearGradient(0,0,0,n);p.addColorStop(0,this.computedStyleVars.shadingStart),p.addColorStop(.2,"oklch(0 0 0 / 0)"),p.addColorStop(.8,"oklch(0 0 0 / 0)"),p.addColorStop(1,this.computedStyleVars.shadingEnd),this.ctx.fillStyle=p,this.ctx.fillRect(0,0,i,n)}}}_onAppStateDialUpdate(e){e&&e.id===this.dialId&&this._draw()}_onThemeChange(){this._updateAndCacheComputedStyles(),requestAnimationFrame(()=>{const e=window.devicePixelRatio||1;this.ctx&&this.ctx.setTransform(e,0,0,e,0,0),this._draw()})}_onAppStatusChange(e){this._updateAndCacheComputedStyles(),this._draw()}destroy(){this._removeDragListeners(),this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],this.gsapValueTween&&this.gsapValueTween.kill(),this.dialBSettleTimer&&clearTimeout(this.dialBSettleTimer)}}const Re={};let fl=null,pl=null,gl=null;function cc(r,e,t,i){if(!r||r.length===0){console.error("[DialManager INIT] No dial container elements provided.");return}if(!e||!t||!i){console.error("[DialManager INIT] CRITICAL: Missing appState, configModule, or gsap dependencies.");return}fl=e,pl=t,gl=i;for(const n in Re)Re[n]&&typeof Re[n].destroy=="function"&&Re[n].destroy(),delete Re[n];r.forEach(n=>{const s=n.dataset.dialId;if(!s){console.error("[DialManager INIT] Could not find dialId for container:",n);return}Re[s]&&Re[s].destroy(),Re[s]=new ip(n,s,fl,pl,gl)}),console.log("[DialManager INIT] Initialization complete. Dial instances created:",Object.keys(Re))}function np(r){for(const e in Re)Re.hasOwnProperty(e)&&Re[e]&&Re[e].setActiveDimState(r)}function rp(r=!1){for(const e in Re)Re.hasOwnProperty(e)&&Re[e]&&Re[e].resizeCanvas(r)}const sp=Object.freeze(Object.defineProperty({__proto__:null,init:cc,resizeAllCanvases:rp,setDialsActiveState:np},Symbol.toStringTag,{value:"Module"}));let bt=null;function dc(r,e){if(!e){console.error("[GridManager INIT] CRITICAL: ButtonManager instance not provided.");return}if(bt=e,!r||r.length===0){console.error("[GridManager INIT] No hue assignment column elements provided.");return}r.forEach(t=>{const i=t.dataset.assignmentTarget;if(!i){console.warn("[GridManager INIT] Column found without 'data-assignment-target'. Skipping.",t);return}const n=Lt[i],s=t.querySelector(".control-group-label.label-top");t.innerHTML="",s&&t.appendChild(s);for(let o=0;o<12;o++){const a=document.createElement("div");a.classList.add("button-unit","button-unit--toggle","button-unit--s"),a.dataset.toggleValue=o.toString(),a.dataset.rowIndex=o.toString(),a.setAttribute("role","radio"),a.setAttribute("aria-label",`Assign ${i.toUpperCase()} to Hue from Row ${o+1}`);const l=document.createElement("div");l.classList.add("light-container"),l.setAttribute("aria-hidden","true");const c=document.createElement("div");c.classList.add("light"),l.appendChild(c),a.appendChild(l);const d=document.createElement("div");d.classList.add("button-bg-frame"),a.appendChild(d),t.appendChild(a),bt.addButton(a,i),a.addEventListener("mousedown",h=>{h.button===0&&bt.setPressedVisuals(h.currentTarget,!0)}),a.addEventListener("mouseup",h=>{h.button===0&&bt.setPressedVisuals(h.currentTarget,!1)}),a.addEventListener("mouseleave",h=>{h.currentTarget.classList.contains("is-pressing")&&bt.setPressedVisuals(h.currentTarget,!1)}),a.addEventListener("touchstart",h=>{bt.setPressedVisuals(h.currentTarget,!0)},{passive:!0}),a.addEventListener("touchend",h=>{bt.setPressedVisuals(h.currentTarget,!1)}),a.addEventListener("touchcancel",h=>{bt.setPressedVisuals(h.currentTarget,!1)}),a.addEventListener("click",h=>{const f=h.currentTarget,u=ce();if(u!=="interactive"){console.log(`[GridManager Click] Interaction blocked for ${i}-${o}, app not interactive. Status: ${u}`);return}const g=bt._buttons.get(f);if(!g){console.error("[GridManager Click] Clicked button not managed by ButtonManager:",f);return}const p=g.getGroupId();if(!p){console.error("[GridManager Click] Clicked button instance missing groupId:",f);return}bt.setGroupSelected(p,f.dataset.toggleValue);const _=parseInt(f.dataset.rowIndex,10),D=ve[_];vo(p,D)})}n>=0&&n<ve.length&&vo(i,ve[n])})}const op=Object.freeze(Object.defineProperty({__proto__:null,init:dc},Symbol.toStringTag,{value:"Module"}));let Ri={},Et=null;function hc(r,e){if(!e){console.error("[ToggleManager INIT] CRITICAL: ButtonManager instance not provided.");return}Et=e,(!r||r.length===0)&&console.warn("[ToggleManager INIT] No static toggle button elements provided."),Ri={},r.forEach(t=>{const i=t.closest("[data-group-id]"),n=(i==null?void 0:i.dataset.groupId)||t.dataset.groupId;if(!n){console.warn("[ToggleManager INIT] Button found without a group ID:",t);return}Ri[n]||(Ri[n]=[]),Ri[n].find(s=>s.element===t)||Ri[n].push({element:t,value:t.dataset.toggleValue}),Et._buttons.has(t)||Et.addButton(t,n),t.dataset.clickListenerAdded||(t.addEventListener("mousedown",s=>{s.button===0&&Et.setPressedVisuals(s.currentTarget,!0)}),t.addEventListener("mouseup",s=>{s.button===0&&Et.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("mouseleave",s=>{s.currentTarget.classList.contains("is-pressing")&&Et.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("touchstart",s=>{Et.setPressedVisuals(s.currentTarget,!0)},{passive:!0}),t.addEventListener("touchend",s=>{Et.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("touchcancel",s=>{Et.setPressedVisuals(s.currentTarget,!1)}),t.addEventListener("click",function(s){fc(this,n)}),t.dataset.clickListenerAdded="true")}),qe("themeChanged",t=>{(ce()==="interactive"||document.body.classList.contains("is-transitioning-from-dim"))&&Lo()}),ce()==="interactive"&&Lo()}function fc(r,e){const t=ce();if(t!=="interactive"){console.log(`[ToggleManager Click] Interaction blocked for group '${e}', app not interactive. Status: ${t}`);return}if(Et.setGroupSelected(e,r.dataset.toggleValue),e==="system-power")r.dataset.toggleValue;else if(e==="light"){const i=da(),n=r.dataset.toggleValue==="on"?"light":"dark";i!==n&&lc(n)}}function Lo(){const r=da(),e="light";if(Ri[e]&&Ri[e].length>0){const t=r==="light"?"on":"off";Et.setGroupSelected(e,t)}}const ap=Object.freeze(Object.defineProperty({__proto__:null,handleToggleClick:fc,init:hc,syncLightToggleToThemeVisuals:Lo},Symbol.toStringTag,{value:"Module"}));let be=!1,pc=0,At={value:0},hn=0,Wr=null,Mt=null,pi=null,Pe=null,ls=null,Ct=-1,en="",tn=-1,wo=-1,zs=-1,U=null,No=null,us=null;function gc(r,e,t,i){if(!r||!e){console.error("[LensManager INIT] CRITICAL ERROR: Missing documentElement or colorLensGradientEl.");return}if(!t){console.error("[LensManager INIT] CRITICAL ERROR: Missing configModule.");return}if(!i){console.error("[LensManager INIT] CRITICAL ERROR: Missing GSAP instance.");return}pi=r,Pe=e,ls=document.getElementById("lens-super-glow"),U=t,us=i,No=Zf(o=>{if(!pi)return;const a=Math.max(0,Math.min(o,1.05));pi.style.setProperty("--lens-power",a.toFixed(3))},U.DEBOUNCE_DELAY/3),ls||console.warn("[LensManager INIT] Optional #lens-super-glow element not found.");const n=Ln(),s=On("A");Ct=s?(s.hue%360+360)%360:U.DEFAULT_DIAL_A_HUE,wo=Ct,pa(Ct),At.value=n,hn=n,ha(n),qe("trueLensPowerChanged",_c),qe("dialBInteractionChange",cp),qe("dialUpdated",up),qe("appStatusChanged",dp)}function lp(r=null,e=null){const t=r!==null?r:U.LENS_STARTUP_TARGET_POWER,i=e!==null?e:U.LENS_STARTUP_RAMP_DURATION,n=us.timeline(),s=Ln(),o={value:s*100};return s<=1e-4&&Pe&&Ss(0),n.to(o,{value:t,duration:i/1e3,ease:"sine.inOut",onStart:()=>{Pe&&Pe.style.opacity!=="1"&&ce()!=="loading"&&ce()!=="error"&&(Pe.style.opacity="1")},onUpdate:function(){bo(this.targets()[0].value)},onComplete:()=>{const a=o.value;bo(a);const l=a/100*359.999,c=l*U.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG,d=On("B")||{};Es("B",{hue:l,targetHue:l,rotation:c,targetRotation:c,isDragging:d.isDragging||!1})}}),n}function ha(r){Ss(r),fa(r,!0)}function fa(r,e=!1){if(pi)if(e){const t=Math.max(0,Math.min(r,1.05));pi.style.setProperty("--lens-power",t.toFixed(3))}else if(No)No(r);else{const t=Math.max(0,Math.min(r,1.05));pi.style.setProperty("--lens-power",t.toFixed(3))}}function pa(r){if(!pi||!U)return;const e=(Number(r)%360+360)%360;(Math.abs(e-zs)>=U.HUE_UPDATE_THRESHOLD||zs===-1)&&(pi.style.setProperty("--dynamic-lens-super-glow-hue",e.toFixed(1)),zs=e)}function up(r){if(!(ce()==="loading"||ce()==="error"||!U)&&r&&r.id==="A"&&r.state){const e=(r.state.hue%360+360)%360,t=Math.abs(e-Ct);if(Math.min(t,360-t)>=U.HUE_UPDATE_THRESHOLD){Ct=e,pa(Ct);const n=At.value+(be?mc(performance.now()):0);ha(n)}}}function Hi(r=!1){const e=At.value+(be?mc(performance.now()):0);fa(e,r),Ss(e)}function Ss(r){var u;if(!Pe||!U)return;const e=ce(),t=r<=1e-4;if(e==="loading"||e==="starting-up"&&t&&((u=On("B"))==null?void 0:u.hue)<=1e-4){Pe.style.opacity!=="0"&&(Pe.style.opacity="0"),Pe.style.background!=="none"&&(Pe.style.background="none",en="none"),tn=r;return}if(e==="error"){Pe.style.opacity!=="0"&&(Pe.style.opacity="0"),Pe.style.background!=="none"&&(Pe.style.background="none",en="none"),tn=r;return}Pe.style.opacity!=="1"&&(Pe.style.opacity="1");const i=Math.abs(r-tn)>=1e-4,n=Math.abs(Ct-wo)>=U.HUE_UPDATE_THRESHOLD;let s=i||n;if(t&&(en==="none"||tn>1e-4)&&(s=!0),!s&&en!==""&&en!=="none"){tn=r;return}const o=Math.max(U.LENS_GRADIENT_BREAKPOINTS[0].power,r);let a=U.LENS_GRADIENT_BREAKPOINTS[0],l=U.LENS_GRADIENT_BREAKPOINTS[0];for(let g=0;g<U.LENS_GRADIENT_BREAKPOINTS.length;g++){if(o<=U.LENS_GRADIENT_BREAKPOINTS[g].power){l=U.LENS_GRADIENT_BREAKPOINTS[g],a=g>0?U.LENS_GRADIENT_BREAKPOINTS[g-1]:U.LENS_GRADIENT_BREAKPOINTS[0];break}g===U.LENS_GRADIENT_BREAKPOINTS.length-1&&(a=U.LENS_GRADIENT_BREAKPOINTS[g],l=U.LENS_GRADIENT_BREAKPOINTS[g])}let c=0;l.power>a.power?(c=(Math.max(a.power,Math.min(r,l.power))-a.power)/(l.power-a.power),c=Math.max(0,Math.min(c,1))):r<=a.power?c=0:c=1,t&&(c=0,a=U.LENS_GRADIENT_BREAKPOINTS[0],l=U.LENS_GRADIENT_BREAKPOINTS[0]);const d=[];for(let g=0;g<U.NUM_LENS_GRADIENT_STOPS;g++){const p=a.stops[g],_=l.stops[g];if(!p||!_){console.warn(`[LensManager] Missing stop data at index ${g} for power ${r}`),d.push("oklch(0 0 0) 0%");continue}const D=p.l+c*(_.l-p.l),S=p.c+c*(_.c-p.c),A=p.pos+c*(_.pos-p.pos);let C=p.type==="hotspot"?Ct+U.LENS_HOTSPOT_HUE_OFFSET:p.type==="main"?Ct:0;C=(C%360+360)%360,d.push(`oklch(${D.toFixed(3)} ${S.toFixed(3)} ${C.toFixed(1)}) ${(A*100).toFixed(2)}%`)}U.LENS_GRADIENT_BREAKPOINTS[0].stops[U.NUM_LENS_GRADIENT_STOPS-1].pos*100<99.9&&d.push("oklch(0 0 0 / 0) 100%");const f=`radial-gradient(circle at 50% 50%, ${d.join(", ")})`;Pe.style.background!==f&&(Pe.style.background=f),en=f,tn=r,wo=Ct}function _c(r){if(!U||!us)return;hn=r,Mt&&Mt.kill();const e=ce()==="starting-up",t=Ds()==="idle";e||!t?(At.value=hn,be||Hi(!0)):Mt=us.to(At,{value:hn,duration:U.LENS_OSCILLATION_SMOOTHING_DURATION,ease:"power1.out",onUpdate:()=>{be||Hi()},onComplete:()=>{Mt=null,be||Hi(!0),ce()==="interactive"&&At.value>=U.LENS_OSCILLATION_THRESHOLD&&!be&&Ro()}}),(hn<U.LENS_OSCILLATION_THRESHOLD||!t||e)&&be&&cs(),ce()==="interactive"&&t&&At.value>=U.LENS_OSCILLATION_THRESHOLD&&!be&&Ro()}function cp(r){U&&(r==="dragging"||r==="settling"?(be&&cs(),Mt&&Mt.kill(),At.value=Ln(),Hi(!0)):r==="idle"&&_c(Ln()))}function dp(r){if(U){if(r==="loading"||r==="error"){be&&cs(),Mt&&Mt.kill(),At.value=0,hn=0,Ss(0),fa(0,!0),ls&&(ls.style.opacity="0");return}Hi(!0),pa(Ct),r==="interactive"?Ds()==="idle"&&At.value>=U.LENS_OSCILLATION_THRESHOLD&&!be&&Ro():(be&&cs(),r==="starting-up"&&Mt&&Mt.kill())}}function Ro(){U&&(be||ce()!=="interactive"||Ds()!=="idle"||(be=!0,pc=performance.now(),Dc(performance.now())))}function cs(){be&&(be=!1,Wr&&cancelAnimationFrame(Wr),Wr=null,Hi(!0))}function mc(r){if(!be||!U)return 0;const e=(r-pc)/1e3,t=Math.max(0,At.value-U.LENS_OSCILLATION_THRESHOLD),i=1-U.LENS_OSCILLATION_THRESHOLD,n=i>0?Math.min(1,t/i):0,s=U.LENS_OSCILLATION_AMPLITUDE_MIN+n*U.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,o=Jf(n,0,1,U.LENS_OSCILLATION_PERIOD_AT_THRESHOLD,U.LENS_OSCILLATION_PERIOD_AT_MAX_POWER);return o<=.001?0:Math.sin(2*Math.PI/o*e)*s}function Dc(r){be&&(Hi(),Wr=requestAnimationFrame(Dc))}const hp=Object.freeze(Object.defineProperty({__proto__:null,directUpdateLensVisuals:ha,energizeLensCoreStartup:lp,init:gc},Symbol.toStringTag,{value:"Module"})),fp={P1_EMERGENCY_SUBSYSTEMS:"GOOD MORNING. INITIATING STARTUP PROTOCOL.",P2_BACKUP_POWER:"BACKUP POWER ENGAGED.",P3_MAIN_POWER_ONLINE:"MAIN POWER STABLE.",P4_OPTICAL_CORE_REACTIVATE:"OPTICAL CORE REACTIVATED.",P5_DIAGNOSTIC_INTERFACE:"DIAGNOSTICS ONLINE.",P6_MOOD_INTENSITY_CONTROLS:"MOOD CONTROLS ACTIVE.",P7_HUE_CORRECTION_SYSTEMS:"HUE SYSTEMS ALIGNED.",P8_EXTERNAL_LIGHTING_CONTROLS:"EXTERNAL LIGHTING RESPONSIVE.",P9_AUX_LIGHTING_LOW:"AUX LIGHTING: LOW INTENSITY.",P11_SYSTEM_OPERATIONAL:"ALL SYSTEMS NOMINAL. HUE 9000 OPERATIONAL."},Xs={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}°","  - INTENSITY DIAL (B) SETTING: {dialBHue}°","  - ASSIGNED ENVIRONMENT HUE: {envHue}°","  - ASSIGNED LCD HUE: {lcdHue}°","  - ASSIGNED LOGO HUE: {logoHue}°","  - ASSIGNED BUTTON HUE: {btnHue}°","SYSTEM NOMINAL. AWAITING INPUT."]},Br={dialA:r=>`MOOD DIAL SET TO ${r.value}°`,dialB:r=>`INTENSITY DIAL SET TO ${r.value}%`,envHue:r=>`ENVIRONMENT HUE ASSIGNED: ${r.hue}°`,lcdHue:r=>`LCD HUE ASSIGNED: ${r.hue}°`,logoHue:r=>`LOGO HUE ASSIGNED: ${r.hue}°`,btnHue:r=>`BUTTON HUE ASSIGNED: ${r.hue}°`,FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`};function pp(r,e={},t=null){const{type:i,source:n,data:s,messageKey:o}=r||{};if(r&&r.content&&Array.isArray(r.content))return r.content;if(r&&r.content&&typeof r.content=="string")return[r.content];switch(i){case"startup":return[fp[o||n]||`Unknown startup event: ${o||n}`];case"block":if(o&&Xs[o]){if(o==="BTN4_MESSAGE"){const a=(t==null?void 0:t.DEFAULT_DIAL_A_HUE)??"N/A_CONF";return Xs[o].map(l=>{var c,d,h,f,u,g;return l.replace("{currentTheme}",e.theme||"N/A").replace("{lensPower}",e.lensPower!==void 0?Math.round(e.lensPower*100):"N/A").replace("{dialAHue}",((c=e.dialA)==null?void 0:c.hue)!==void 0?Math.round(e.dialA.hue):String(Math.round(a))).replace("{dialBHue}",((d=e.dialB)==null?void 0:d.hue)!==void 0?Math.round(e.dialB.hue):"N/A").replace("{envHue}",((h=e.envHue)==null?void 0:h.hue)!==void 0?Math.round(e.envHue.hue):"N/A").replace("{lcdHue}",((f=e.lcdHue)==null?void 0:f.hue)!==void 0?Math.round(e.lcdHue.hue):"N/A").replace("{logoHue}",((u=e.logoHue)==null?void 0:u.hue)!==void 0?Math.round(e.logoHue.hue):"N/A").replace("{btnHue}",((g=e.btnHue)==null?void 0:g.hue)!==void 0?Math.round(e.btnHue.hue):"N/A")})}return Xs[o]}return[`Unknown block message key: ${o||n}`];case"status":return o&&Br[o]&&s?[Br[o](s)]:Br[n]&&s?[Br[n](s)]:[`Status update from ${n}: ${JSON.stringify(s)}`];default:return[`Unknown message type: ${i} from ${n}`]}}class gp{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._cursorElement=null,this._domInitialized=!1,this._initialMessageFlickered=!1,this.debugFlicker=!0}init(e,t,i,n,s){if(!e||!t){console.error("[TerminalManager INIT] CRITICAL: Terminal DOM elements not provided.");return}if(!i||!n||!s){console.error("[TerminalManager INIT] CRITICAL: Missing appState, configModule, or gsap service.");return}if(this._terminalContainerElement=e,this._terminalContentElement=t,this._appState=i,this._configModule=n,this._gsap=s,!this._gsap||typeof this._gsap.to!="function"){console.error("[TerminalManager INIT] CRITICAL: GSAP service is invalid or not provided correctly.");return}this._setupDOM(),this._appState&&typeof this._appState.subscribe=="function"?this._appState.subscribe("requestTerminalMessage",this._handleRequestTerminalMessage.bind(this)):console.error("[TerminalManager INIT] appState service or its subscribe method is not available.")}_setupDOM(){this._domInitialized||(this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this._cursorElement.textContent="▋",this._cursorElement.style.visibility="hidden",this._terminalContentElement.innerHTML="",this._domInitialized=!0)}_handleRequestTerminalMessage(e){if(!this._configModule||!e)return;let t={};e.messageKey==="BTN4_MESSAGE"&&this._appState&&(t={theme:this._appState.getCurrentTheme(),lensPower:this._appState.getTrueLensPower(),dialA:this._appState.getDialState("A"),dialB:this._appState.getDialState("B"),envHue:this._appState.getTargetColorProperties("env"),lcdHue:this._appState.getTargetColorProperties("lcd"),logoHue:this._appState.getTargetColorProperties("logo"),btnHue:this._appState.getTargetColorProperties("btn")});const i=pp(e,t,this._configModule),n={...e,content:Array.isArray(i)?i:[i],linesTyped:0};this._messageQueue.push(n),this._isTyping||this._processQueue()}async _processQueue(){if(!this._configModule){this._isTyping=!1;return}if(this._messageQueue.length===0){this._isTyping=!1;return}if(this._isTyping&&this._messageQueue.length>0)return;this._isTyping=!0;const e=this._messageQueue.shift();this._gsap.getProperty(this._terminalContentElement,"opacity")<1&&(this.debugFlicker&&console.log(`[TerminalManager _processQueue] Forcing #terminal-lcd-content opacity to 1 before typing message: ${e.source}`),this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"})),e.source==="P1_EMERGENCY_SUBSYSTEMS"&&this._terminalContainerElement&&this._gsap.getProperty(this._terminalContainerElement,"autoAlpha")<.8&&(this.debugFlicker&&console.log("[TerminalManager _processQueue] Forcing .actual-lcd-screen-element (terminal container) autoAlpha to 1 for P1 message."),this._gsap.set(this._terminalContainerElement,{autoAlpha:1}));const t=Math.random()*(this._configModule.TERMINAL_NEW_LINE_DELAY_MAX_MS-this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS)+this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS;await new Promise(i=>setTimeout(i,t));for(let i=0;i<e.content.length;i++){const n=e.content[i];if(this._addNewLineAndPrepareForTyping(),e.source==="P1_EMERGENCY_SUBSYSTEMS"&&!this._initialMessageFlickered&&this._currentLineElement){this.debugFlicker&&console.log(`[TerminalManager P1 Flicker] Preparing for initial message: "${n}"`),this._currentLineElement.classList.add("terminal-line--initial-boot"),this._currentLineElement.appendChild(this._cursorElement),this._showCursor();const s=e.flickerProfile||"textFlickerToDimlyLit",o=this.playInitialTextFlicker(this._currentLineElement,n,s);o&&o.completionPromise?await o.completionPromise:o&&o.timeline&&await new Promise(a=>o.timeline.eventCallback("onComplete",a).play()),this._initialMessageFlickered=!0}else this._showCursor(),await this._typeLine(n,e.type);i<e.content.length-1&&await new Promise(s=>setTimeout(s,this._configModule.TERMINAL_NEW_LINE_DELAY_MIN_MS/2))}this._hideCursor(),this._isTyping=!1,this._processQueue()}_addNewLineAndPrepareForTyping(){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines()}_typeLine(e,t="status"){return new Promise(i=>{if(!this._gsap||!this._configModule){console.error("[TerminalManager _typeLine] GSAP or ConfigModule not available."),i();return}if(!this._currentLineElement){console.error("[TerminalManager _typeLine] _currentLineElement is null. Cannot type."),i();return}let n;switch(t){case"block":n=this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR;break;case"startup":n=this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR;break;case"status":default:n=this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR;break}const s=e.length*n/1e3;this._currentLineElement.appendChild(this._cursorElement),this._gsap.to(this._currentLineElement,{duration:Math.max(.1,s),text:{value:e,delimiter:""},ease:"none",onUpdate:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement)},onComplete:()=>{this._currentLineElement&&this._cursorElement&&this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),i()}})})}_scrollTerminal(){this._terminalContainerElement&&(this._terminalContainerElement.scrollTop=this._terminalContainerElement.scrollHeight)}_limitMaxLines(){if(this._configModule)for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM&&this._terminalContentElement.firstChild;)this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_showCursor(){this._cursorElement&&this._currentLineElement&&(this._cursorElement.parentElement!==this._currentLineElement&&this._currentLineElement.appendChild(this._cursorElement),this._cursorElement.style.visibility="visible")}_hideCursor(){this._cursorElement&&(this._cursorElement.style.visibility="hidden")}playInitialTextFlicker(e,t,i="textFlickerToDimlyLit"){if(!this._gsap||!this._configModule)return{timeline:gsap.timeline().to({},{duration:.01}),completionPromise:Promise.resolve()};if(!e)return{timeline:this._gsap.timeline().to({},{duration:.01}),completionPromise:Promise.resolve()};this.debugFlicker&&console.log(`[TerminalManager playInitialTextFlicker] Target: ${e.tagName}, Text: "${t}", Profile: ${i}`);const n=this._gsap.timeline({onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] START for "${t}". Initial textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)},onComplete:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] COMPLETE for "${t}". Final textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)}});n.call(()=>{e.textContent="",e.appendChild(this._cursorElement),this.debugFlicker&&console.log(`[TerminalManager P1 Flicker MasterTL] Text content cleared, cursor appended. Pre-flicker autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)}),this._terminalContentElement&&this._gsap.getProperty(this._terminalContentElement,"opacity")<1&&(n.set(this._terminalContentElement,{opacity:1,visibility:"visible"},0),this.debugFlicker&&console.log("[TerminalManager P1 Flicker MasterTL] Set #terminal-lcd-content opacity to 1 at start of P1 message flicker.")),this._terminalContainerElement&&this._gsap.getProperty(this._terminalContainerElement,"autoAlpha")<.8&&(n.set(this._terminalContainerElement,{autoAlpha:1},0),this.debugFlicker&&console.log("[TerminalManager P1 Flicker MasterTL] Set .actual-lcd-screen-element autoAlpha to 1 at start of P1 message flicker."));const s=as(e,i,{gsapInstance:this._gsap,onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker createAdvancedFlicker] Flicker timeline START for "${t}". textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)},onTimelineComplete:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker createAdvancedFlicker] Flicker timeline COMPLETE for "${t}". textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)}});s&&s.timeline&&n.add(s.timeline);const o={duration:t.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3*.75,text:{value:t,delimiter:""},ease:"none",onStart:()=>{this.debugFlicker&&console.log(`[TerminalManager P1 Flicker TextPlugin] Text animation START for "${t}". textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)},onUpdate:()=>{e&&this._cursorElement&&this._cursorElement.parentElement!==e&&e.appendChild(this._cursorElement)},onComplete:()=>{e&&this._cursorElement&&this._cursorElement.parentElement!==e&&e.appendChild(this._cursorElement),this.debugFlicker&&console.log(`[TerminalManager P1 Flicker TextPlugin] Text animation COMPLETE for "${t}". textLineElement autoAlpha: ${this._gsap.getProperty(e,"autoAlpha")}`)}},a=s&&s.timeline&&s.timeline.duration()>0?s.timeline.duration()*.25:.01;n.to(e,o,a),n.set(e,{autoAlpha:1},">");const l=new Promise(c=>{n.eventCallback("onComplete",c)});return n.duration()===0&&n.to({},{duration:.001}),{timeline:n,completionPromise:l}}playScreenFlickerToState(e,t,i){if(!this._gsap){const n=gsap.timeline();return i&&n.eventCallback("onComplete",i),{timeline:n.to({},{duration:.01}),completionPromise:Promise.resolve()}}if(!e){const n=this._gsap.timeline();return i&&n.eventCallback("onComplete",i),{timeline:n.to({},{duration:.01}),completionPromise:Promise.resolve()}}return this._terminalContentElement&&(this._gsap.getProperty(this._terminalContentElement,"opacity"),this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"})),as(e,t,{gsapInstance:this._gsap,onTimelineComplete:()=>{this._terminalContentElement&&this._gsap.set(this._terminalContentElement,{opacity:1,visibility:"visible"}),i&&i()}})}}const _l=new gp;let qt=null,ae={statusDiv:null,phaseInfoDiv:null,nextPhaseButton:null,playAllButton:null,resetButton:null},Ur=null;function Ec(r){const e=ae.statusDiv,t=ae.phaseInfoDiv;if(!e||!t)return;let i="Phase: Unknown",n="Details unavailable.";if(r){const s=r.description||r.currentPhaseName||"N/A",o=r.nextPhaseDescription||r.nextPhaseName||"N/A";r.currentPhaseName==="Idle"||r.status==="ready"&&r.currentPhaseName==="Idle"?(i="Phase: Idle",n=`Next: ${o}`):r.currentPhaseName==="sequence_complete"||r.status==="completed"&&r.currentPhaseName==="sequence_complete"?(i="Phase: All Complete",n="Sequence finished. Reset to start again."):r.currentPhaseName==="ERROR"?(i=`Phase: ERROR (${s})`,n="Error occurred. Check console. Reset to try again."):r.status==="paused"||r.status==="completed"&&r.currentPhaseName!=="sequence_complete"?(i=`Done: ${s}`,n=`Next: ${o}`):r.status==="starting"?(i=`Running: ${s}`,n=`Awaiting completion... (Next: ${o})`):(i=`Phase: ${s}`,n=`Status: ${r.status||"N/A"}. Next: ${o}`)}e.textContent=i,t.textContent=n}function ml(){qt&&qt.playNextPhase()}function Dl(){qt?qt.start(!1):console.warn("[DebugManager handlePlayAllClick] StartupManager not available.")}function El(){qt?qt.resetSequence():console.warn("[DebugManager handleResetSequenceClick] StartupManager not available.")}function _p(r){Ec(r)}function Sc(r){ae.nextPhaseButton&&(ae.nextPhaseButton.disabled=!r)}function Tc(r){if(!r.startupSequenceManager)throw new Error("StartupSequenceManager not provided to DebugManager.");if(!r.domElements)throw new Error("DOM elements for debug controls not provided to DebugManager.");qt=r.startupSequenceManager,Ur=r.appState,ae.statusDiv=r.domElements.debugStatusDiv,ae.phaseInfoDiv=r.domElements.debugPhaseInfoDiv,ae.nextPhaseButton=r.domElements.nextPhaseButton,ae.playAllButton=r.domElements.playAllButton,ae.resetButton=r.domElements.resetButton,ae.statusDiv||console.error("[DebugManager INIT] config.domElements.debugStatusDiv is null!"),ae.phaseInfoDiv||console.error("[DebugManager INIT] config.domElements.debugPhaseInfoDiv is null!"),(!ae.statusDiv||!ae.phaseInfoDiv||!ae.nextPhaseButton||!ae.playAllButton||!ae.resetButton)&&console.warn("[DebugManager INIT] One or more core debug DOM elements are missing. Debug panel may be non-functional."),ae.nextPhaseButton&&(ae.nextPhaseButton.removeEventListener("click",ml),ae.nextPhaseButton.addEventListener("click",ml),Sc(!0)),ae.playAllButton&&(ae.playAllButton.removeEventListener("click",Dl),ae.playAllButton.addEventListener("click",Dl)),ae.resetButton&&(ae.resetButton.removeEventListener("click",El),ae.resetButton.addEventListener("click",El)),Ur&&typeof Ur.subscribe=="function"?(typeof window.debugManagerPhaseUnsubscriber=="function"&&window.debugManagerPhaseUnsubscriber(),window.debugManagerPhaseUnsubscriber=Ur.subscribe("startup:phaseChanged",_p)):console.warn("[DebugManager INIT] appState or its subscribe method not available. Phase updates won't be received.");const e=qt.getCurrentPhaseInfo?qt.getCurrentPhaseInfo():{currentPhaseName:"Idle",status:"ready",nextPhaseName:"startupPhase0",description:"Idle",nextPhaseDescription:"P0: Baseline Setup"};Ec(e)}const mp=Object.freeze(Object.defineProperty({__proto__:null,init:Tc,setNextPhaseButtonEnabled:Sc},Symbol.toStringTag,{value:"Module"}));function Dp(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Ep(){const r=Dp();if(r.__xstate__)return r.__xstate__}const Sp=r=>{if(typeof window>"u")return;const e=Ep();e&&e.register(r)};class Sl{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const yc=".",Tp="",Ac="",yp="#",Ap="*",Cc="xstate.init",ds="xstate.stop";function Cp(r,e){return{type:`xstate.after.${r}.${e}`}}function xo(r,e){return{type:`xstate.done.state.${r}`,output:e}}function Ip(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function Pp(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function Ic(r){return{type:Cc,input:r}}function Ut(r){setTimeout(()=>{throw r})}const vp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pc(r,e){const t=Tl(r),i=Tl(e);return typeof i=="string"?typeof t=="string"?i===t:!1:typeof t=="string"?t in i:Object.keys(t).every(n=>n in i?Pc(t[n],i[n]):!1)}function ga(r){if(bc(r))return r;const e=[];let t="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:t+=r[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=r[i]}return e.push(t),e}function Tl(r){if(lg(r))return r.value;if(typeof r!="string")return r;const e=ga(r);return bp(e)}function bp(r){if(r.length===1)return r[0];const e={};let t=e;for(let i=0;i<r.length-1;i++)if(i===r.length-2)t[r[i]]=r[i+1];else{const n=t;t={},n[r[i]]=t}return e}function yl(r,e){const t={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];t[s]=e(r[s],s,r,n)}return t}function vc(r){return bc(r)?r:[r]}function ci(r){return r===void 0?[]:vc(r)}function Oo(r,e,t,i){return typeof r=="function"?r({context:e,event:t,self:i}):r}function bc(r){return Array.isArray(r)}function Lp(r){return r.type.startsWith("xstate.error.actor")}function ln(r){return vc(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Lc(r){if(!(r===void 0||r===Tp))return ci(r)}function Mo(r,e,t){var s,o,a;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(o=i?r.error:e)==null?void 0:o.bind(n),complete:(a=i?r.complete:t)==null?void 0:a.bind(n)}}function Al(r,e){return`${e}.${r}`}function _a(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,i,n]=t,o=r.getStateNodeById(n).config.invoke;return(Array.isArray(o)?o[i]:o).src}function Cl(r,e){return`${r.sessionId}.${e}`}let wp=0;function Np(r,e){const t=new Map,i=new Map,n=new WeakMap,s=new Set,o={},{clock:a,logger:l}=e,c={schedule:(f,u,g,p,_=Math.random().toString(36).slice(2))=>{const D={source:f,target:u,event:g,delay:p,id:_,startedAt:Date.now()},S=Cl(f,_);h._snapshot._scheduledEvents[S]=D;const A=a.setTimeout(()=>{delete o[S],delete h._snapshot._scheduledEvents[S],h._relay(f,u,g)},p);o[S]=A},cancel:(f,u)=>{const g=Cl(f,u),p=o[g];delete o[g],delete h._snapshot._scheduledEvents[g],p!==void 0&&a.clearTimeout(p)},cancelAll:f=>{for(const u in h._snapshot._scheduledEvents){const g=h._snapshot._scheduledEvents[u];g.source===f&&c.cancel(f,g.id)}}},d=f=>{if(!s.size)return;const u={...f,rootId:r.sessionId};s.forEach(g=>{var p;return(p=g.next)==null?void 0:p.call(g,u)})},h={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${wp++}`,_register:(f,u)=>(t.set(f,u),f),_unregister:f=>{t.delete(f.sessionId);const u=n.get(f);u!==void 0&&(i.delete(u),n.delete(f))},get:f=>i.get(f),_set:(f,u)=>{const g=i.get(f);if(g&&g!==u)throw new Error(`Actor with system ID '${f}' already exists.`);i.set(f,u),n.set(u,f)},inspect:f=>{const u=Mo(f);return s.add(u),{unsubscribe(){s.delete(u)}}},_sendInspectionEvent:d,_relay:(f,u,g)=>{h._sendInspectionEvent({type:"@xstate.event",sourceRef:f,actorRef:u,event:g}),u._send(g)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...h._snapshot._scheduledEvents}}),start:()=>{const f=h._snapshot._scheduledEvents;h._snapshot._scheduledEvents={};for(const u in f){const{source:g,target:p,event:_,delay:D,id:S}=f[u];c.schedule(g,p,_,D,S)}},_clock:a,_logger:l};return h}let Ws=!1;const ma=1;let Ge=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const Rp={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class xp{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Sl(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ge.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...Rp,...t},{clock:n,logger:s,parent:o,syncSnapshot:a,id:l,systemId:c,inspect:d}=i;this.system=o?o.system:Np(this,{clock:n,logger:s}),d&&!o&&this.system.inspect(Mo(d)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=o,this._syncSnapshot=a,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:h=>{this._deferred.push(h)},system:this.system,stopChild:h=>{if(h._parent!==this)throw new Error(`Cannot stop child actor ${h.id} of ${this.id} because it is not a child`);h._stop()},emit:h=>{const f=this.eventListeners.get(h.type),u=this.eventListeners.get("*");if(!f&&!u)return;const g=[...f?f.values():[],...u?u.values():[]];for(const p of g)p(h)},actionExecutor:h=>{const f=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:h.type,params:h.params}}),!h.exec)return;const u=Ws;try{Ws=!0,h.exec(h.info,h.params)}finally{Ws=u}};this._processingStatus===Ge.Running?f():this._deferred.push(f)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(e,t){var n,s;this._snapshot=e;let i;for(;i=this._deferred.shift();)try{i()}catch(o){this._deferred.length=0,this._snapshot={...e,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(n=o.next)==null||n.call(o,e)}catch(a){Ut(a)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,e)}catch(a){Ut(a)}this._stopProcedure(),this._complete(),this._doneEvent=Ip(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){var s;const n=Mo(e,t,i);if(this._processingStatus!==Ge.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(o){Ut(o)}break;case"error":{const o=this._snapshot.error;if(!n.error)Ut(o);else try{n.error(o)}catch(a){Ut(a)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const n=t.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Ge.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Ge.Running;const e=Ic(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(t,e),e.type===ds&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ge.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ge.NotStarted?(this._processingStatus=Ge.Stopped,this):(this.mailbox.enqueue({type:ds}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(i){Ut(i)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||Ut(e);return}let t=!1;for(const i of this.observers){const n=i.error;t||(t=!n);try{n==null||n(e)}catch(s){Ut(s)}}this.observers.clear(),t&&Ut(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Pp(this.id,e))}_stopProcedure(){return this._processingStatus!==Ge.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Sl(this._process.bind(this)),this._processingStatus=Ge.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Ge.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:Sp)(this)}toJSON(){return{xstate$$type:ma,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[vp](){return this}getSnapshot(){return this._snapshot}}function Sr(r,...[e]){return new xp(r,e)}const Op=Sr;function Mp(r,e,t,i,{sendId:n}){const s=typeof n=="function"?n(t,i):n;return[e,{sendId:s},void 0]}function Fp(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function kp(r){function e(t,i){}return e.type="xstate.cancel",e.sendId=r,e.resolve=Mp,e.execute=Fp,e}function Bp(r,e,t,i,{id:n,systemId:s,src:o,input:a,syncSnapshot:l}){const c=typeof o=="string"?_a(e.machine,o):o,d=typeof n=="function"?n(t):n;let h,f;return c&&(f=typeof a=="function"?a({context:e.context,event:t.event,self:r.self}):a,h=Sr(c,{id:d,src:o,parent:r.self,syncSnapshot:l,systemId:s,input:f})),[Wi(e,{children:{...e.children,[d]:h}}),{id:n,systemId:s,actorRef:h,src:o,input:f},void 0]}function Up(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==Ge.Stopped&&e.start()})}function $p(...[r,{id:e,systemId:t,input:i,syncSnapshot:n=!1}={}]){function s(o,a){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=Bp,s.execute=Up,s}function Gp(r,e,t,i,{actorRef:n}){const s=typeof n=="function"?n(t,i):n,o=typeof s=="string"?e.children[s]:s;let a=e.children;return o&&(a={...a},delete a[o.id]),[Wi(e,{children:a}),o,void 0]}function Hp(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==Ge.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function wc(r){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=Gp,e.execute=Hp,e}function Da(r,e,t,i){const{machine:n}=i,s=typeof r=="function",o=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!o)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof o!="function")return Da(o,e,t,i);const a={context:e,event:t},l=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in o?o.check(i,a,o):o(a,l)}const Ea=r=>r.type==="atomic"||r.type==="final";function wn(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Lr(r,e){const t=[];if(e===r)return t;let i=r.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function hs(r){const e=new Set(r),t=Rc(e);for(const i of e)if(i.type==="compound"&&(!t.get(i)||!t.get(i).length))Il(i).forEach(n=>e.add(n));else if(i.type==="parallel"){for(const n of wn(i))if(n.type!=="history"&&!e.has(n)){const s=Il(n);for(const o of s)e.add(o)}}for(const i of e){let n=i.parent;for(;n;)e.add(n),n=n.parent}return e}function Nc(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const n=t[0];if(n){if(Ea(n))return n.key}else return{}}const i={};for(const n of t)i[n.key]=Nc(n,e);return i}function Rc(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function xc(r,e){const t=hs(e);return Nc(r,Rc(t))}function Sa(r,e){return e.type==="compound"?wn(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?wn(e).every(t=>Sa(r,t)):e.type==="final"}const Ts=r=>r[0]===yp;function Yp(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(i=>{if(i===Ap)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=e.split(".");for(let o=0;o<n.length;o++){const a=n[o],l=s[o];if(a==="*")return o===n.length-1;if(a!==l)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function Vp(r){const e=r.config.after;if(!e)return[];const t=n=>{const s=Cp(n,r.id),o=s.type;return r.entry.push(Dg(s,{id:o,delay:n})),r.exit.push(kp(o)),o};return Object.keys(e).flatMap(n=>{const s=e[n],o=typeof s=="string"?{target:s}:s,a=Number.isNaN(+n)?n:+n,l=t(a);return ci(o).map(c=>({...c,event:l,delay:a}))}).map(n=>{const{delay:s}=n;return{...xi(r,n.event,n),delay:s}})}function xi(r,e,t){const i=Lc(t.target),n=t.reenter??!1,s=Wp(r,i),o={...t,actions:ci(t.actions),guard:t.guard,target:s,source:r,reenter:n,eventType:e,toJSON:()=>({...o,source:`#${r.id}`,target:s?s.map(a=>`#${a.id}`):void 0})};return o}function zp(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===Ac)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[t];e.set(t,ln(i).map(n=>xi(r,t,n)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,ln(r.config.onDone).map(i=>xi(r,t,i)))}for(const t of r.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,ln(t.onDone).map(n=>xi(r,i,n)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,ln(t.onError).map(n=>xi(r,i,n)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,ln(t.onSnapshot).map(n=>xi(r,i,n)))}}for(const t of r.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}function Xp(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const i={source:r,actions:!e||typeof e=="string"?[]:ci(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return i}function Wp(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(Ts(t))return r.machine.getStateNodeById(t);const i=t[0]===yc;if(i&&!r.parent)return Tr(r,t.slice(1));const n=i?r.key+t:t;if(r.parent)try{return Tr(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function Oc(r){const e=Lc(r.config.target);return e?{target:e.map(t=>typeof t=="string"?Tr(r.parent,t):t)}:r.parent.initial}function Mi(r){return r.type==="history"}function Il(r){const e=Mc(r);for(const t of e)for(const i of Lr(t,r))e.add(i);return e}function Mc(r){const e=new Set;function t(i){if(!e.has(i)){if(e.add(i),i.type==="compound")t(i.initial.target[0]);else if(i.type==="parallel")for(const n of wn(i))t(n)}}return t(r),e}function Nn(r,e){if(Ts(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function Tr(r,e){if(typeof e=="string"&&Ts(e))try{return r.machine.getStateNodeById(e)}catch{}const t=ga(e).slice();let i=r;for(;t.length;){const n=t.shift();if(!n.length)break;i=Nn(i,n)}return i}function fs(r,e){if(typeof e=="string"){const n=r.states[e];if(!n)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,n]}const t=Object.keys(e),i=t.map(n=>Nn(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,t.reduce((n,s)=>{const o=Nn(r,s);if(!o)return n;const a=fs(o,e[s]);return n.concat(a)},[]))}function jp(r,e,t,i){const s=Nn(r,e).next(t,i);return!s||!s.length?r.next(t,i):s}function qp(r,e,t,i){const n=Object.keys(e),s=Nn(r,n[0]),o=Ta(s,e[n[0]],t,i);return!o||!o.length?r.next(t,i):o}function Kp(r,e,t,i){const n=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const a=Nn(r,s),l=Ta(a,o,t,i);l&&n.push(...l)}return n.length?n:r.next(t,i)}function Ta(r,e,t,i){return typeof e=="string"?jp(r,e,t,i):Object.keys(e).length===1?qp(r,e,t,i):Kp(r,e,t,i)}function Qp(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function mi(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Zp(r,e){const t=new Set(r),i=new Set(e);for(const n of t)if(i.has(n))return!0;for(const n of i)if(t.has(n))return!0;return!1}function Fc(r,e,t){const i=new Set;for(const n of r){let s=!1;const o=new Set;for(const a of i)if(Zp(Fo([n],e,t),Fo([a],e,t)))if(mi(n.source,a.source))o.add(a);else{s=!0;break}if(!s){for(const a of o)i.delete(a);i.add(n)}}return Array.from(i)}function Jp(r){const[e,...t]=r;for(const i of Lr(e,void 0))if(t.every(n=>mi(n,i)))return i}function ya(r,e){if(!r.target)return[];const t=new Set;for(const i of r.target)if(Mi(i))if(e[i.id])for(const n of e[i.id])t.add(n);else for(const n of ya(Oc(i),e))t.add(n);else t.add(i);return[...t]}function kc(r,e){const t=ya(r,e);if(!t)return;if(!r.reenter&&t.every(n=>n===r.source||mi(n,r.source)))return r.source;const i=Jp(t.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function Fo(r,e,t){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const o=kc(s,t);s.reenter&&s.source===o&&i.add(o);for(const a of e)mi(a,o)&&i.add(a)}return[...i]}function eg(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function ko(r,e,t,i,n,s){if(!r.length)return e;const o=new Set(e._nodes);let a=e.historyValue;const l=Fc(r,o,a);let c=e;n||([c,a]=rg(c,i,t,l,o,a,s,t.actionExecutor)),c=Rn(c,i,t,l.flatMap(h=>h.actions),s,void 0),c=ig(c,i,t,l,o,s,a,n);const d=[...o];c.status==="done"&&(c=Rn(c,i,t,d.sort((h,f)=>f.order-h.order).flatMap(h=>h.exit),s,void 0));try{return a===e.historyValue&&eg(e._nodes,o)?c:Wi(c,{_nodes:d,historyValue:a})}catch(h){throw h}}function tg(r,e,t,i,n){if(i.output===void 0)return;const s=xo(n.id,n.output!==void 0&&n.parent?Oo(n.output,r.context,e,t.self):void 0);return Oo(i.output,r.context,s,t.self)}function ig(r,e,t,i,n,s,o,a){let l=r;const c=new Set,d=new Set;ng(i,o,d,c),a&&d.add(r.machine.root);const h=new Set;for(const f of[...c].sort((u,g)=>u.order-g.order)){n.add(f);const u=[];u.push(...f.entry);for(const g of f.invoke)u.push($p(g.src,{...g,syncSnapshot:!!g.onSnapshot}));if(d.has(f)){const g=f.initial.actions;u.push(...g)}if(l=Rn(l,e,t,u,s,f.invoke.map(g=>g.id)),f.type==="final"){const g=f.parent;let p=(g==null?void 0:g.type)==="parallel"?g:g==null?void 0:g.parent,_=p||f;for((g==null?void 0:g.type)==="compound"&&s.push(xo(g.id,f.output!==void 0?Oo(f.output,l.context,e,t.self):void 0));(p==null?void 0:p.type)==="parallel"&&!h.has(p)&&Sa(n,p);)h.add(p),s.push(xo(p.id)),_=p,p=p.parent;if(p)continue;l=Wi(l,{status:"done",output:tg(l,e,t,l.machine.root,_)})}}return l}function ng(r,e,t,i){for(const n of r){const s=kc(n,e);for(const a of n.target||[])!Mi(a)&&(n.source!==a||n.source!==s||n.reenter)&&(i.add(a),t.add(a)),fn(a,e,t,i);const o=ya(n,e);for(const a of o){const l=Lr(a,s);(s==null?void 0:s.type)==="parallel"&&l.push(s),Bc(i,e,t,l,!n.source.parent&&n.reenter?void 0:s)}}}function fn(r,e,t,i){var n;if(Mi(r))if(e[r.id]){const s=e[r.id];for(const o of s)i.add(o),fn(o,e,t,i);for(const o of s)js(o,r.parent,i,e,t)}else{const s=Oc(r);for(const o of s.target)i.add(o),s===((n=r.parent)==null?void 0:n.initial)&&t.add(r.parent),fn(o,e,t,i);for(const o of s.target)js(o,r.parent,i,e,t)}else if(r.type==="compound"){const[s]=r.initial.target;Mi(s)||(i.add(s),t.add(s)),fn(s,e,t,i),js(s,r,i,e,t)}else if(r.type==="parallel")for(const s of wn(r).filter(o=>!Mi(o)))[...i].some(o=>mi(o,s))||(Mi(s)||(i.add(s),t.add(s)),fn(s,e,t,i))}function Bc(r,e,t,i,n){for(const s of i)if((!n||mi(s,n))&&r.add(s),s.type==="parallel")for(const o of wn(s).filter(a=>!Mi(a)))[...r].some(a=>mi(a,o))||(r.add(o),fn(o,e,t,r))}function js(r,e,t,i,n){Bc(t,i,n,Lr(r,e))}function rg(r,e,t,i,n,s,o,a){let l=r;const c=Fo(i,n,s);c.sort((h,f)=>f.order-h.order);let d;for(const h of c)for(const f of Qp(h)){let u;f.history==="deep"?u=g=>Ea(g)&&mi(g,h):u=g=>g.parent===h,d??(d={...s}),d[f.id]=Array.from(n).filter(u)}for(const h of c)l=Rn(l,e,t,[...h.exit,...h.invoke.map(f=>wc(f.id))],o,void 0),n.delete(h);return[l,d||s]}function sg(r,e){return r.implementations.actions[e]}function Uc(r,e,t,i,n,s){const{machine:o}=r;let a=r;for(const l of i){const c=typeof l=="function",d=c?l:sg(o,typeof l=="string"?l:l.type),h={context:a.context,event:e,self:t.self,system:t.system},f=c||typeof l=="string"?void 0:"params"in l?typeof l.params=="function"?l.params({context:a.context,event:e}):l.params:void 0;if(!d||!("resolve"in d)){t.actionExecutor({type:typeof l=="string"?l:typeof l=="object"?l.type:l.name||"(anonymous)",info:h,params:f,exec:d});continue}const u=d,[g,p,_]=u.resolve(t,a,h,f,d,n);a=g,"retryResolve"in u&&(s==null||s.push([u,p])),"execute"in u&&t.actionExecutor({type:u.type,info:h,params:p,exec:u.execute.bind(null,t,p)}),_&&(a=Uc(a,e,t,_,n,s))}return a}function Rn(r,e,t,i,n,s){const o=s?[]:void 0,a=Uc(r,e,t,i,{internalQueue:n,deferredActorIds:s},o);return o==null||o.forEach(([l,c])=>{l.retryResolve(t,a,c)}),a}function qs(r,e,t,i){let n=r;const s=[];function o(c,d,h){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:d,snapshot:c,_transitions:h}),s.push(c)}if(e.type===ds)return n=Wi(Pl(n,e,t),{status:"stopped"}),o(n,e,[]),{snapshot:n,microstates:s};let a=e;if(a.type!==Cc){const c=a,d=Lp(c),h=vl(c,n);if(d&&!h.length)return n=Wi(r,{status:"error",error:c.error}),o(n,c,[]),{snapshot:n,microstates:s};n=ko(h,r,t,a,!1,i),o(n,c,h)}let l=!0;for(;n.status==="active";){let c=l?og(n,a):[];const d=c.length?n:void 0;if(!c.length){if(!i.length)break;a=i.shift(),c=vl(a,n)}n=ko(c,n,t,a,!1,i),l=n!==d,o(n,a,c)}return n.status!=="active"&&Pl(n,a,t),{snapshot:n,microstates:s}}function Pl(r,e,t){return Rn(r,e,t,Object.values(r.children).map(i=>wc(i)),[],void 0)}function vl(r,e){return e.machine.getTransitionData(e,r)}function og(r,e){const t=new Set,i=r._nodes.filter(Ea);for(const n of i)e:for(const s of[n].concat(Lr(n,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||Da(o.guard,r.context,e,r)){t.add(o);break e}}return Fc(Array.from(t),new Set(r._nodes),r.historyValue)}function ag(r,e){const t=hs(fs(r,e));return xc(r,[...t])}function lg(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const ug=function(e){return Pc(e,this.value)},cg=function(e){return this.tags.has(e)},dg=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(i=>i.target!==void 0||i.actions.length)},hg=function(){const{_nodes:e,tags:t,machine:i,getMeta:n,toJSON:s,can:o,hasTag:a,matches:l,...c}=this;return{...c,tags:Array.from(t)}},fg=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function jr(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:xc(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:ug,hasTag:cg,can:dg,getMeta:fg,toJSON:hg}}function Wi(r,e={}){return jr({...r,...e},r.machine)}function pg(r){if(typeof r!="object"||r===null)return{};const e={};for(const t in r){const i=r[t];Array.isArray(i)&&(e[t]=i.map(n=>({id:n.id})))}return e}function gg(r,e){const{_nodes:t,tags:i,machine:n,children:s,context:o,can:a,hasTag:l,matches:c,getMeta:d,toJSON:h,...f}=r,u={};for(const p in s){const _=s[p];u[p]={snapshot:_.getPersistedSnapshot(e),src:_.src,systemId:_._systemId,syncSnapshot:_._syncSnapshot}}return{...f,context:$c(o),children:u,historyValue:pg(f.historyValue)}}function $c(r){let e;for(const t in r){const i=r[t];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)e??(e=Array.isArray(r)?r.slice():{...r}),e[t]={xstate$$type:ma,id:i.id};else{const n=$c(i);n!==i&&(e??(e=Array.isArray(r)?r.slice():{...r}),e[t]=n)}}return e??r}function _g(r,e,t,i,{event:n,id:s,delay:o},{internalQueue:a}){const l=e.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const c=typeof n=="function"?n(t,i):n;let d;if(typeof o=="string"){const h=l&&l[o];d=typeof h=="function"?h(t,i):h}else d=typeof o=="function"?o(t,i):o;return typeof d!="number"&&a.push(c),[e,{event:c,id:s,delay:d},void 0]}function mg(r,e){const{event:t,delay:i,id:n}=e;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,i,n)});return}}function Dg(r,e){function t(i,n){}return t.type="xstate.raise",t.event=r,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=_g,t.execute=mg,t}const bl="xstate.promise.resolve",Ll="xstate.promise.reject",$r=new WeakMap;function Eg(r){return{config:r,transition:(t,i,n)=>{var s;if(t.status!=="active")return t;switch(i.type){case bl:{const o=i.data;return{...t,status:"done",output:o,input:void 0}}case Ll:return{...t,status:"error",error:i.data,input:void 0};case ds:return(s=$r.get(n.self))==null||s.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:i,system:n,emit:s})=>{if(t.status!=="active")return;const o=new AbortController;$r.set(i,o),Promise.resolve(r({input:t.input,system:n,self:i,signal:o.signal,emit:s})).then(l=>{i.getSnapshot().status==="active"&&($r.delete(i),n._relay(i,i,{type:bl,data:l}))},l=>{i.getSnapshot().status==="active"&&($r.delete(i),n._relay(i,i,{type:Ll,data:l}))})},getInitialSnapshot:(t,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function Sg(r,{machine:e,context:t},i,n){const s=(o,a)=>{if(typeof o=="string"){const l=_a(e,o);if(!l)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const c=Sr(l,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:typeof(a==null?void 0:a.input)=="function"?a.input({context:t,event:i,self:r.self}):a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId});return n[c.id]=c,c}else return Sr(o,{id:a==null?void 0:a.id,parent:r.self,syncSnapshot:a==null?void 0:a.syncSnapshot,input:a==null?void 0:a.input,src:o,systemId:a==null?void 0:a.systemId})};return(o,a)=>{const l=s(o,a);return n[l.id]=l,r.defer(()=>{l._processingStatus!==Ge.Stopped&&l.start()}),l}}function Tg(r,e,t,i,{assignment:n}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:t.event,spawn:Sg(r,e,t.event,s),self:r.self,system:r.system};let a={};if(typeof n=="function")a=n(o,i);else for(const c of Object.keys(n)){const d=n[c];a[c]=typeof d=="function"?d(o,i):d}const l=Object.assign({},e.context,a);return[Wi(e,{context:l,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function Fe(r){function e(t,i){}return e.type="xstate.assign",e.assignment=r,e.resolve=Tg,e}const wl=new WeakMap;function nn(r,e,t){let i=wl.get(r);return i?e in i||(i[e]=t()):(i={[e]:t()},wl.set(r,i)),i[e]}const yg={},Yn=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class lr{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(yc),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?yl(this.config.states,(i,n)=>new lr(i,{_parent:this,_key:n,_machine:this.machine})):yg,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=ci(this.config.entry).slice(),this.exit=ci(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=ci(e.tags).slice()}_initialize(){this.transitions=zp(this),this.config.always&&(this.always=ln(this.config.always).map(e=>xi(this,Ac,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Yn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Yn),eventType:null})}:void 0,history:this.history,states:yl(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Yn)})),entry:this.entry.map(Yn),exit:this.exit.map(Yn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return nn(this,"invoke",()=>ci(this.config.invoke).map((e,t)=>{const{src:i,systemId:n}=e,s=e.id??Al(this.id,t),o=typeof i=="string"?i:`xstate.invoke.${Al(this.id,t)}`;return{...e,src:o,id:s,systemId:n,toJSON(){const{onDone:a,onError:l,...c}=e;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return nn(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(n=>[t,n])).reduce((t,[i,n])=>(t[i]=t[i]||[],t[i].push(n),t),{}))}get after(){return nn(this,"delayedTransitions",()=>Vp(this))}get initial(){return nn(this,"initial",()=>Xp(this,this.config.initial))}next(e,t){const i=t.type,n=[];let s;const o=nn(this,`candidates-${i}`,()=>Yp(this,i));for(const a of o){const{guard:l}=a,c=e.context;let d=!1;try{d=!l||Da(l,c,t,e)}catch(h){const f=typeof l=="string"?l:typeof l=="object"?l.type:void 0;throw new Error(`Unable to evaluate guard ${f?`'${f}' `:""}in transition for event '${i}' in state node '${this.id}':
${h.message}`)}if(d){n.push(...a.actions),s=a;break}}return s?[s]:void 0}get events(){return nn(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const n=e[i];if(n.states)for(const s of n.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}const Ag="#";class Aa{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new lr(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:n,delays:s}=this.implementations;return new Aa(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...n,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=ag(this.root,e.value),i=hs(fs(this.root,t));return jr({_nodes:[...i],context:e.context||{},children:{},status:Sa(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return qs(e,t,i,[]).snapshot}microstep(e,t,i){return qs(e,t,i,[]).microstates}getTransitionData(e,t){return Ta(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:n}=this.config,s=jr({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?Rn(s,t,e,[Fe(({spawn:a,event:l,self:c})=>n({spawn:a,input:l.input,self:c}))],i,void 0):s}getInitialSnapshot(e,t){const i=Ic(t),n=[],s=this.getPreInitialState(e,i,n),o=ko([{target:[...Mc(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,i,!0,n),{snapshot:a}=qs(o,i,e,n);return a}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=ga(e),i=t.slice(1),n=Ts(t[0])?t[0].slice(Ag.length):t[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return Tr(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return gg(e,t)}restoreSnapshot(e,t){const i={},n=e.children;Object.keys(n).forEach(h=>{const f=n[h],u=f.snapshot,g=f.src,p=typeof g=="string"?_a(this,g):g;if(!p)return;const _=Sr(p,{id:h,parent:t.self,syncSnapshot:f.syncSnapshot,snapshot:u,src:g,systemId:f.systemId});i[h]=_});function s(h,f){try{return f.machine.getStateNodeById(h)}catch{try{return Tr(f,h.split("."))}catch{return h}}}function o(h,f){if(!h||typeof h!="object")return{};const u={};for(const g in h){const p=h[g];u[g]=p.map(_=>{if(_ instanceof lr)return _;if(typeof _=="object"&&"id"in _&&typeof _.id=="string"){const D=s(_.id,f);if(D instanceof lr)return D}}).filter(_=>_!==void 0),u[g].length===0&&delete u[g]}return u}const a=o(e.historyValue,this.root),l=jr({...e,children:i,_nodes:Array.from(hs(fs(this.root,e.value))),historyValue:a},this),c=new Set;function d(h,f){if(!c.has(h)){c.add(h);for(const u in h){const g=h[u];if(g&&typeof g=="object"){if("xstate$$type"in g&&g.xstate$$type===ma){h[u]=f[g.id];continue}d(g,f)}}}}return d(l.context,i),l}}function Cg(r,e){return new Aa(r,e)}const lt=r=>Eg(async({input:e})=>{const t=await import(r);if(!t||typeof t.createPhaseTimeline!="function")throw console.error(`Error importing or finding createPhaseTimeline in ${r}`),new Error(`Failed to load phase module: ${r}`);return t.createPhaseTimeline(e.dependencies)}),Ig=Cg({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{dependencies:null,isStepThroughMode:!0,currentPhaseNameForResume:"",errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_SEQUENCE.PHASE_0_IDLE",actions:[Fe({isStepThroughMode:({event:r})=>r.isStepThroughMode,dependencies:({event:r})=>r.dependencies,themeTransitionCleanupPerformed:!1,errorInfo:null}),"logStartSequence"]}}},RUNNING_SEQUENCE:{initial:"PHASE_0_IDLE",states:{PHASE_0_IDLE:{entry:["setPhaseNumberActionP0","notifyPhaseChangeAction"],invoke:{id:"phaseP0Service",src:lt("./startupPhase0.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_1_EMERGENCY_SUBSYSTEMS"})},{target:"PHASE_1_EMERGENCY_SUBSYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_1_EMERGENCY_SUBSYSTEMS:{entry:["setPhaseNumberActionP1","notifyPhaseChangeAction"],invoke:{id:"phaseP1Service",src:lt("./startupPhase1.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_2_BACKUP_POWER"})},{target:"PHASE_2_BACKUP_POWER"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_2_BACKUP_POWER:{entry:["setPhaseNumberActionP2","notifyPhaseChangeAction"],invoke:{id:"phaseP2Service",src:lt("./startupPhase2.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_3_MAIN_POWER_ONLINE"})},{target:"PHASE_3_MAIN_POWER_ONLINE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_3_MAIN_POWER_ONLINE:{entry:["setPhaseNumberActionP3","notifyPhaseChangeAction"],invoke:{id:"phaseP3Service",src:lt("./startupPhase3.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_4_OPTICAL_CORE_REACTIVATE"})},{target:"PHASE_4_OPTICAL_CORE_REACTIVATE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_4_OPTICAL_CORE_REACTIVATE:{entry:["setPhaseNumberActionP4","notifyPhaseChangeAction"],invoke:{id:"phaseP4Service",src:lt("./startupPhase4.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_5_DIAGNOSTIC_INTERFACE"})},{target:"PHASE_5_DIAGNOSTIC_INTERFACE"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_5_DIAGNOSTIC_INTERFACE:{entry:["setPhaseNumberActionP5","notifyPhaseChangeAction"],invoke:{id:"phaseP5Service",src:lt("./startupPhase5.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_6_MOOD_INTENSITY_CONTROLS"})},{target:"PHASE_6_MOOD_INTENSITY_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_6_MOOD_INTENSITY_CONTROLS:{entry:["setPhaseNumberActionP6","notifyPhaseChangeAction"],invoke:{id:"phaseP6Service",src:lt("./startupPhase6.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_7_HUE_CORRECTION_SYSTEMS"})},{target:"PHASE_7_HUE_CORRECTION_SYSTEMS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_7_HUE_CORRECTION_SYSTEMS:{entry:["setPhaseNumberActionP7","notifyPhaseChangeAction"],invoke:{id:"phaseP7Service",src:lt("./startupPhase7.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"})},{target:"PHASE_8_EXTERNAL_LIGHTING_CONTROLS"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_8_EXTERNAL_LIGHTING_CONTROLS:{entry:["setPhaseNumberActionP8","notifyPhaseChangeAction"],invoke:{id:"phaseP8Service",src:lt("./startupPhase8.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_9_AUX_LIGHTING_LOW"})},{target:"PHASE_9_AUX_LIGHTING_LOW"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_9_AUX_LIGHTING_LOW:{entry:["setPhaseNumberActionP9","notifyPhaseChangeAction"],invoke:{id:"phaseP9Service",src:lt("./startupPhase9.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_10_THEME_TRANSITION"})},{target:"PHASE_10_THEME_TRANSITION"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_10_THEME_TRANSITION:{entry:["setPhaseNumberActionP10","notifyPhaseChangeAction"],invoke:{id:"phaseP10Service",src:lt("./startupPhase10.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"PHASE_11_SYSTEM_OPERATIONAL"})},{target:"PHASE_11_SYSTEM_OPERATIONAL"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:"notifyPhaseChangeAction"},PHASE_11_SYSTEM_OPERATIONAL:{entry:["setPhaseNumberActionP11","performThemeTransitionCleanupIfNeeded","notifyPhaseChangeAction"],invoke:{id:"phaseP11Service",src:lt("./startupPhase11.js"),input:({context:r})=>({dependencies:r.dependencies}),onDone:[{target:"#hue9000Startup.PAUSED_AWAITING_NEXT_STEP",guard:"isStepThrough",actions:Fe({currentPhaseNameForResume:"SYSTEM_READY_TARGET"})},{target:"#hue9000Startup.SYSTEM_READY"}],onError:{target:"#hue9000Startup.ERROR_STATE",actions:"assignError"}},exit:["markThemeTransitionCleanupPerformed","notifyPhaseChangeAction"]}}},PAUSED_AWAITING_NEXT_STEP:{entry:["enableNextStepButtonAction","notifyPhaseChangeAction"],on:{NEXT_STEP_REQUESTED:[{target:"SYSTEM_READY",guard:({context:r})=>r.currentPhaseNameForResume==="SYSTEM_READY_TARGET",actions:"disableNextStepButtonAction"},...[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>({target:`RUNNING_SEQUENCE.PHASE_${r}_${r===0?"IDLE":r===1?"EMERGENCY_SUBSYSTEMS":r===2?"BACKUP_POWER":r===3?"MAIN_POWER_ONLINE":r===4?"OPTICAL_CORE_REACTIVATE":r===5?"DIAGNOSTIC_INTERFACE":r===6?"MOOD_INTENSITY_CONTROLS":r===7?"HUE_CORRECTION_SYSTEMS":r===8?"EXTERNAL_LIGHTING_CONTROLS":r===9?"AUX_LIGHTING_LOW":r===10?"THEME_TRANSITION":"SYSTEM_OPERATIONAL"}`,guard:({context:e})=>e.currentPhaseNameForResume===`PHASE_${r}_${r===0?"IDLE":r===1?"EMERGENCY_SUBSYSTEMS":r===2?"BACKUP_POWER":r===3?"MAIN_POWER_ONLINE":r===4?"OPTICAL_CORE_REACTIVATE":r===5?"DIAGNOSTIC_INTERFACE":r===6?"MOOD_INTENSITY_CONTROLS":r===7?"HUE_CORRECTION_SYSTEMS":r===8?"EXTERNAL_LIGHTING_CONTROLS":r===9?"AUX_LIGHTING_LOW":r===10?"THEME_TRANSITION":"SYSTEM_OPERATIONAL"}`,actions:"disableNextStepButtonAction"}))]}},SYSTEM_READY:{type:"final",entry:["setPhaseNumberActionReady","setAppStatusInteractive","notifySystemReadyToDebugManager","enableNextStepButtonAction"]},ERROR_STATE:{entry:["setPhaseNumberActionError","logError","setAppStatusError","displayErrorInTerminal","enableNextStepButtonAction","notifyPhaseChangeAction"]}}},{actions:{logStartSequence:({context:r,event:e})=>{console.log("[FSM Action] Startup sequence initiated. Step-through:",r.isStepThroughMode)},assignError:Fe({errorInfo:({event:r})=>r.data||new Error("Unknown error from invoked service")}),logError:({context:r})=>{console.error("[FSM Error]",r.errorInfo),r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.emit("startup:error",r.errorInfo)},setAppStatusInteractive:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("interactive")},setAppStatusError:({context:r})=>{r.dependencies&&r.dependencies.appStateService&&r.dependencies.appStateService.setAppStatus("error")},displayErrorInTerminal:({context:r})=>{if(r.dependencies&&r.dependencies.appStateService){const e=r.errorInfo instanceof Error?r.errorInfo.message:String(r.errorInfo);r.dependencies.appStateService.emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",content:[`CRITICAL SYSTEM ERROR: ${e}`]})}},setPhaseNumberActionP0:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(0)},setPhaseNumberActionP1:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(1)},setPhaseNumberActionP2:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(2)},setPhaseNumberActionP3:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(3)},setPhaseNumberActionP4:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(4)},setPhaseNumberActionP5:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(5)},setPhaseNumberActionP6:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(6)},setPhaseNumberActionP7:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(7)},setPhaseNumberActionP8:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(8)},setPhaseNumberActionP9:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(9)},setPhaseNumberActionP10:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(10)},setPhaseNumberActionP11:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(11)},setPhaseNumberActionReady:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(99)},setPhaseNumberActionError:({context:r})=>{var e,t;return(t=(e=r.dependencies)==null?void 0:e.appStateService)==null?void 0:t.setCurrentStartupPhaseNumber(-2)},notifyPhaseChangeAction:({context:r,event:e,_event:t})=>{},enableNextStepButtonAction:({context:r})=>{var e,t,i;(i=(t=(e=r.dependencies)==null?void 0:e.managerInstances)==null?void 0:t.debugManager)==null||i.setNextPhaseButtonEnabled(!0)},disableNextStepButtonAction:({context:r})=>{var e,t,i;(i=(t=(e=r.dependencies)==null?void 0:e.managerInstances)==null?void 0:t.debugManager)==null||i.setNextPhaseButtonEnabled(!1)},performThemeTransitionCleanupIfNeeded:({context:r})=>{var e;(e=r.dependencies)!=null&&e.performThemeTransitionCleanup&&!r.themeTransitionCleanupPerformed&&r.dependencies.performThemeTransitionCleanup()},markThemeTransitionCleanupPerformed:Fe({themeTransitionCleanupPerformed:!0})},guards:{isStepThrough:({context:r})=>r.isStepThroughMode}});let pn=null,Tt=null,ne={},le={},Vt=null,ft=null,Bo=null,zt={value:.85},si={value:.15};const Yi={IDLE:"Idle","RUNNING_SEQUENCE.PHASE_0_IDLE":"startupPhaseP0_idle","RUNNING_SEQUENCE.PHASE_1_EMERGENCY_SUBSYSTEMS":"startupPhaseP1_emergency","RUNNING_SEQUENCE.PHASE_2_BACKUP_POWER":"startupPhaseP2_backupPower","RUNNING_SEQUENCE.PHASE_3_MAIN_POWER_ONLINE":"startupPhaseP3_mainPowerOnline","RUNNING_SEQUENCE.PHASE_4_OPTICAL_CORE_REACTIVATE":"startupPhaseP4_opticalCoreReactivate","RUNNING_SEQUENCE.PHASE_5_DIAGNOSTIC_INTERFACE":"startupPhaseP5_diagnosticInterface","RUNNING_SEQUENCE.PHASE_6_MOOD_INTENSITY_CONTROLS":"startupPhaseP6_moodIntensityControls","RUNNING_SEQUENCE.PHASE_7_HUE_CORRECTION_SYSTEMS":"startupPhaseP7_hueCorrectionSystems","RUNNING_SEQUENCE.PHASE_8_EXTERNAL_LIGHTING_CONTROLS":"startupPhaseP8_externalLightingControls","RUNNING_SEQUENCE.PHASE_9_AUX_LIGHTING_LOW":"startupPhaseP9_auxLightingLow","RUNNING_SEQUENCE.PHASE_10_THEME_TRANSITION":"startupPhaseP10_themeTransition","RUNNING_SEQUENCE.PHASE_11_SYSTEM_OPERATIONAL":"startupPhaseP11_systemOperational",PAUSED_AWAITING_NEXT_STEP:"PAUSED",SYSTEM_READY:"sequence_complete",ERROR_STATE:"ERROR"},Rt={Idle:"System Idle, awaiting startup.",startupPhaseP0_idle:"Phase 0: System Idle / Baseline Setup",startupPhaseP1_emergency:"Phase 1: Initializing Emergency Subsystems",startupPhaseP2_backupPower:"Phase 2: Activating Backup Power Systems",startupPhaseP3_mainPowerOnline:"Phase 3: Main Power Online",startupPhaseP4_opticalCoreReactivate:"Phase 4: Reactivating Optical Core",startupPhaseP5_diagnosticInterface:"Phase 5: Initializing Diagnostic Control Interface",startupPhaseP6_moodIntensityControls:"Phase 6: Initializing Mood and Intensity Controls",startupPhaseP7_hueCorrectionSystems:"Phase 7: Initializing Hue Correction Systems",startupPhaseP8_externalLightingControls:"Phase 8: Initializing External Lighting Controls",startupPhaseP9_auxLightingLow:"Phase 9: Activating Auxiliary Lighting: Low Intensity",startupPhaseP10_themeTransition:"Phase 10: Engaging Ambient Theme",startupPhaseP11_systemOperational:"Phase 11: HUE 9000 Operational",PAUSED:"Paused, awaiting next step.",sequence_complete:"All Startup Phases Done",ERROR:"Startup Error Occurred"},Xt=["PHASE_0_IDLE","PHASE_1_EMERGENCY_SUBSYSTEMS","PHASE_2_BACKUP_POWER","PHASE_3_MAIN_POWER_ONLINE","PHASE_4_OPTICAL_CORE_REACTIVATE","PHASE_5_DIAGNOSTIC_INTERFACE","PHASE_6_MOOD_INTENSITY_CONTROLS","PHASE_7_HUE_CORRECTION_SYSTEMS","PHASE_8_EXTERNAL_LIGHTING_CONTROLS","PHASE_9_AUX_LIGHTING_LOW","PHASE_10_THEME_TRANSITION","PHASE_11_SYSTEM_OPERATIONAL"];function Pg(r){if(!r||typeof r!="string")return-1;const e=r.match(/PHASE_(\d+)_/i);return e&&e[1]?parseInt(e[1],10):r==="IDLE"?-1:r==="SYSTEM_READY"||r==="sequence_complete"?99:-1}function Gc(r){if(typeof r=="string")return Yi[r]||r;if(typeof r=="object"){const e=Object.keys(r)[0],t=r[e];return Yi[`${e}.${t}`]||`${e}.${t}`}return"UnknownState"}function vg(r){if(!Tt||!r)return;const e=Gc(r.value),t=Pg(typeof r.value=="string"?r.value:Object.values(r.value)[0]);Tt.setCurrentStartupPhaseNumber(t);let i="unknown";r.matches("IDLE")?i="ready":r.matches("PAUSED_AWAITING_NEXT_STEP")?i="paused":r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")||r.event&&(r.event.type.startsWith("done.invoke")||r.event.type.startsWith("error.platform"))?i="completed":r.changed&&(i="starting");let n="N/A",s="N/A";if(r.matches("PAUSED_AWAITING_NEXT_STEP")){const a=r.context.currentPhaseNameForResume;if(a==="SYSTEM_READY_TARGET")n="sequence_complete";else{const l=`RUNNING_SEQUENCE.${a}`;n=Yi[l]||a}s=Rt[n]||n}else if(!r.done&&!r.matches("ERROR_STATE")){const a=typeof r.value=="string"?r.value.split(".").pop():Object.values(r.value)[0],l=Xt.indexOf(a);if(l!==-1&&l<Xt.length-1){const c=Xt[l+1],d=`RUNNING_SEQUENCE.${c}`;n=Yi[d]||c,s=Rt[n]||n}else l===Xt.length-1&&(n="sequence_complete",s=Rt[n])}const o={currentPhaseName:e,status:i,description:Rt[e]||e,nextPhaseName:n,nextPhaseDescription:s,fsmStateValue:r.value,fsmContext:r.context};Tt.emit("startup:phaseChanged",o),ne.debugManager&&(r.matches("PAUSED_AWAITING_NEXT_STEP")||r.matches("IDLE")||r.matches("SYSTEM_READY")||r.matches("ERROR_STATE")?ne.debugManager.setNextPhaseButtonEnabled(!0):ne.debugManager.setNextPhaseButtonEnabled(!1))}function Hc(r){pn=r.gsap,Tt=r.appState,ne=r.managers,le=r.domElements,Vt=r.configModule,le.elementsAnimatedOnDimExit||(le.elementsAnimatedOnDimExit=[]),Vt||console.error("[StartupSequenceManager INIT] CRITICAL: configModule not provided!"),Vt&&Vt.STARTUP_L_REDUCTION_FACTORS?(zt.value=Vt.STARTUP_L_REDUCTION_FACTORS.P0,si.value=1-zt.value):(console.warn("[StartupSequenceManager INIT] STARTUP_L_REDUCTION_FACTORS not found in config. Using default proxy values: L=0.85, O=0.15."),zt.value=.85,si.value=.15)}function bg(){le.elementsAnimatedOnDimExit&&le.elementsAnimatedOnDimExit.length>0&&(le.elementsAnimatedOnDimExit.forEach(r=>{r.classList.remove("animate-on-dim-exit")}),le.elementsAnimatedOnDimExit=[]),le.body.classList.remove("is-transitioning-from-dim"),ne.uiUpdater&&ne.uiUpdater.finalizeThemeTransition(),console.log("[SSM _performThemeTransitionCleanupLocal] Theme transition classes removed.")}function Lg(r=!1){var i;console.log("[SSM resetVisualsAndState] Resetting visuals and state for P0 (Idle)."),ft&&(ft.stop(),ft=null),Bo=null,le.body.classList.contains("pre-boot")&&(le.body.classList.remove("pre-boot"),console.log("[SSM resetVisualsAndState] 'pre-boot' class removed from body.")),pn.killTweensOf([le.body,zt,si]),zt.value=Vt.STARTUP_L_REDUCTION_FACTORS.P0,si.value=1-zt.value,le.root.style.setProperty("--startup-L-reduction-factor",zt.value.toFixed(3)),le.root.style.setProperty("--startup-opacity-factor",si.value.toFixed(3));const e=Math.min(1,si.value*1.25);le.root.style.setProperty("--startup-opacity-factor-boosted",e.toFixed(3)),console.log(`[SSM resetVisualsAndState] Initial CSS vars set: L-factor: ${zt.value.toFixed(3)}, O-factor: ${si.value.toFixed(3)}, O-boosted: ${e.toFixed(3)}`);const t=(i=le.logoContainer)==null?void 0:i.querySelector("svg.logo-svg");t&&pn.killTweensOf(t),Tt.setAppStatus("starting-up"),Tt.setCurrentStartupPhaseNumber(-1),Tt.setTheme("dim"),ne.buttonManager&&ne.buttonManager.setInitialDimStates(),Tt.setTrueLensPower(0),ne.lensManager&&ne.lensManager.directUpdateLensVisuals(0),le.logoContainer&&ne.uiUpdater&&ne.uiUpdater.injectLogoSVG(),Tt.updateDialState("A",{hue:Vt.DEFAULT_DIAL_A_HUE,targetHue:Vt.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),Tt.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),ne.uiUpdater&&(ne.uiUpdater.setLcdState(le.lcdA,"lcd--unlit",{skipClassChange:!1}),ne.uiUpdater.setLcdState(le.lcdB,"lcd--unlit",{skipClassChange:!1}),le.terminalContainer&&ne.uiUpdater.setLcdState(le.terminalContainer,"lcd--unlit",{skipClassChange:!1})),le.terminalContent&&(le.terminalContent.innerHTML="",pn.set(le.terminalContent,{opacity:1,visibility:"visible"}),ne.terminalManager&&(ne.terminalManager._initialMessageFlickered=!1,ne.terminalManager._messageQueue=[],ne.terminalManager._isTyping=!1,ne.terminalManager._cursorElement&&ne.terminalManager._cursorElement.parentNode&&ne.terminalManager._cursorElement.parentNode.removeChild(ne.terminalManager._cursorElement))),pn.set(le.body,{opacity:r?1:0}),console.log("[SSM resetVisualsAndState] P0 Idle state setup complete.")}function Ca(r=!0){Lg(r);const e={dependencies:{gsap:pn,appStateService:Tt,managerInstances:ne,domElementsRegistry:le,configModule:Vt,LReductionProxy:zt,opacityFactorProxy:si,performThemeTransitionCleanup:bg}};ft=Op(Ig),ft.subscribe(t=>{const i=JSON.stringify(t.value);(t.changed||i!==Bo||t.matches("ERROR_STATE")||t.matches("SYSTEM_READY"))&&(vg(t),Bo=i)}),ft.start(),ft.send({type:"START_SEQUENCE",isStepThroughMode:r,dependencies:e.dependencies})}function wg(){if(ft){const r=ft.getSnapshot();!r.done&&!r.matches("ERROR_STATE")?ft.send({type:"NEXT_STEP_REQUESTED"}):(console.log("[SSM playNextPhase] Sequence already complete or in error state. Reset to run again."),ne.debugManager&&ne.debugManager.setNextPhaseButtonEnabled(!0))}}function Ng(){Ca(!0)}function Rg(){if(ft){const i=ft.getSnapshot(),n=Gc(i.value);let s="N/A",o="N/A";if(i.matches("PAUSED_AWAITING_NEXT_STEP")){const a=i.context.currentPhaseNameForResume;if(a==="SYSTEM_READY_TARGET")s="sequence_complete";else{const l=`RUNNING_SEQUENCE.${a}`;s=Yi[l]||a}o=Rt[s]||s}else if(!i.done&&!i.matches("ERROR_STATE")){const a=typeof i.value=="string"?i.value.split(".").pop():Object.values(i.value)[0],l=Xt.indexOf(a);if(l!==-1&&l<Xt.length-1){const c=Xt[l+1],d=`RUNNING_SEQUENCE.${c}`;s=Yi[d]||c,o=Rt[s]||s}else l===Xt.length-1&&(s="sequence_complete",o=Rt[s])}return{currentPhaseName:n,status:i.matches("PAUSED_AWAITING_NEXT_STEP")?"paused":i.done?"completed":"starting",description:Rt[n]||n,nextPhaseName:s,nextPhaseDescription:o}}const r=Xt[0],e=`RUNNING_SEQUENCE.${r}`,t=Yi[e]||r;return{currentPhaseName:"Idle",status:"ready",description:Rt.Idle,nextPhaseName:t,nextPhaseDescription:Rt[t]||t}}const xg=Object.freeze(Object.defineProperty({__proto__:null,getCurrentPhaseInfo:Rg,init:Hc,playNextPhase:wg,resetSequence:Ng,start:Ca},Symbol.toStringTag,{value:"Module"})),k={root:document.documentElement,body:document.body,logoContainer:null,lcdA:null,lcdB:null,terminalLcdContentElement:null,terminalContainer:null};let yr=null,Ce=null;const Vn=["lcd--unlit","js-active-dim-lcd","lcd--dimly-lit"];function Yc(r,e,t){console.log("[UIUpdater INIT] Initializing..."),Object.assign(k,r),yr=e,Ce=t,Ce||console.error("[UIUpdater INIT] CRITICAL: GSAP instance not provided."),yr||console.error("[UIUpdater INIT] CRITICAL: configModule not provided.");const i=["logoContainer","lcdA","lcdB","terminalLcdContentElement","terminalContainer"];for(const n of i)k[n]||console.warn(`[UIUpdater INIT] Warning: Optional element reference "${n}" was not provided.`);try{qe("themeChanged",$g),qe("dialUpdated",Bg),qe("dialUpdated",Vg),qe("targetColorChanged",Ug),qe("trueLensPowerChanged",Gg),qe("appStatusChanged",Hg),qe("startupPhaseNumberChanged",Yg)}catch(n){console.error("[UIUpdater INIT] Error subscribing to appState events.",n);return}zc(),Ia(),wr(),console.log("[UIUpdater INIT] Initialization complete.")}function ur(r,e,t={}){const{skipClassChange:i=!1,useFlicker:n=!1,flickerProfileName:s="lcdScreenFlickerToDimlyLit",onComplete:o,phaseContext:a="UnknownPhase"}=t,l=r?r.id||r.classList[0]||"UnknownLCDContainer":"NullElement";if(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Called. Target State: '${e}', Flicker: ${n}, Profile: '${s}'. Current classes: '${r==null?void 0:r.className}'`),!Ce)return console.error(`[UIUpdater setLcdState - ${l} - ${a}] localGsap not initialized.`),o&&setTimeout(o,0),{timeline:null,completionPromise:Promise.resolve()};if(!r)return console.warn(`[UIUpdater setLcdState - ${l} - ${a}] Attempted to set state on null element. Requested state: ${e}`),o&&Ce.delayedCall(0,o),{timeline:Ce.timeline().to({},{duration:.001}),completionPromise:Promise.resolve()};let c=r,d=null,h=null;r.classList.contains("hue-lcd-display")?d=r.querySelector(".lcd-value"):r.classList.contains("actual-lcd-screen-element")?h=k.terminalLcdContentElement:r.id==="terminal-lcd-content"?(c=k.terminalContainer,h=r):(console.warn(`[UIUpdater setLcdState - ${l} - ${a}] Unknown LCD element structure.`),d=r.querySelector(".lcd-value")||r);let f={timeline:Ce.timeline().to({},{duration:.001}),completionPromise:Promise.resolve()};if(!i){const p=Array.from(c.classList);let _=!1;Vn.forEach(D=>{c.classList.contains(D)&&(c.classList.remove(D),_=!0)}),_&&console.log(`[UIUpdater setLcdState - ${l} - ${a}] Cleared managed classes. Was: '${p.join(" ")}', Now: '${c.className}'`)}const u=yr.ADVANCED_FLICKER_PROFILES[s],g=(u==null?void 0:u.amplitudeStart)===0;return n&&g&&(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Profile ${s} starts from unlit. Setting autoAlpha:0 and text opacity:0 PRE-FLICKER.`),Ce.set(c,{autoAlpha:0,immediateRender:!0}),d&&Ce.set(d,{opacity:0,immediateRender:!0})),n&&(e==="lcd--dimly-lit"||e==="js-active-dim-lcd")?(console.log(`[UIUpdater setLcdState - ${l} - ${a}] Using flicker.`),!i&&e&&e!=="active"&&Vn.includes(e)&&(c.classList.contains(e)||(c.classList.add(e),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Added class '${e}' for flicker.`))),c.classList.add("is-flickering"),f=as(c,s,{gsapInstance:Ce,onStart:()=>{console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Flicker timeline START. Screen autoAlpha: ${Ce.getProperty(c,"autoAlpha")}`)},onTimelineComplete:()=>{c.classList.remove("is-flickering"),console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Flicker timeline COMPLETE. Screen autoAlpha: ${Ce.getProperty(c,"autoAlpha")}`),i||(Vn.forEach(p=>{e!==p&&c.classList.contains(p)&&c.classList.remove(p)}),e&&e!=="active"&&Vn.includes(e)&&(c.classList.contains(e)||c.classList.add(e)),console.log(`[UIUpdater setLcdState Flicker - ${l} - ${a}] Screen classes post-flicker: '${c.className}'`)),xn(c,d,h,a,e,!0),o&&o()}})):(!i&&e&&e!=="active"&&Vn.includes(e)&&(c.classList.contains(e)||(c.classList.add(e),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Added class '${e}' (no flicker).`))),e==="active"&&Ce.getProperty(c,"autoAlpha")<1&&(Ce.set(c,{autoAlpha:1}),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Set autoAlpha:1 for 'active' state.`)),console.log(`[UIUpdater setLcdState - ${l} - ${a}] Not using flicker. State: ${e}`),xn(c,d,h,a,e,!0),o&&Ce.delayedCall(0,o)),f}function xn(r,e,t,i,n,s=!1){const o=r.id||r.classList[0]||"UnknownLCDContainer";console.log(`[UIUpdater updateLcdTextAndVisibility - ${o} - ${i}] Called. TargetState: '${n}', forceGsapSet: ${s}`);const a=ce(),l=br();let c=!1,d=!1;if(n==="active")c=!0,d=!0;else if(n==="lcd--dimly-lit"||n==="js-active-dim-lcd"){const h=a==="interactive"||a==="starting-up"&&l>=6;c=h,d=h}else n==="lcd--unlit"?(r===k.terminalContainer&&t&&t.childElementCount>0?(d=!0,console.log(`[UIUpdater updateLcdTextAndVisibility - TERMINAL - ${i}] Screen is 'lcd--unlit' but content has children. Forcing contentArea visible.`)):d=!1,c=!1):a==="starting-up"&&l>=6&&(c=!0,d=!0);if(e){const h=r===k.lcdA?"A":"B";let f="";if(c)if(h==="A"){const p=On("A");f=p?Math.round((p.hue%360+360)%360).toString():String(Math.round(yr.DEFAULT_DIAL_A_HUE))}else h==="B"&&(f=`${Math.round(Ln()*100)}%`);console.log(`[UIUpdater updateLcdTextAndVisibility - DIAL ${h} - ${i}] shouldTextBeVisible: ${c}, textContent: "${f}"`),kg(r,f,h);const u=c?1:0,g=parseFloat(Ce.getProperty(e,"opacity"));(s||Math.abs(g-u)>.01)&&(console.log(`[UIUpdater updateLcdTextAndVisibility - DIAL ${h} - ${i}] ${s?"Forcing GSAP set":"Animating"} .lcd-value opacity to: ${u}`),Ce.set(e,{opacity:u}))}if(t&&r===k.terminalContainer){const h=d?1:0;Ce.set(t,{opacity:h,visibility:h>0?"visible":"hidden"}),console.log(`[UIUpdater updateLcdTextAndVisibility - TERMINAL - ${i}] Set #terminal-lcd-content opacity to ${h}.`)}}function Og(r){const e=`setDialLcdActiveDimState_isActive_${r}`;console.log(`[UIUpdater setDialLcdActiveDimState] Called with isActive: ${r}. PhaseContext: ${e}`);const t=r?"js-active-dim-lcd":"lcd--unlit";k.lcdA&&xn(k.lcdA,k.lcdA.querySelector(".lcd-value"),null,e,t,!0),k.lcdB&&xn(k.lcdB,k.lcdB.querySelector(".lcd-value"),null,e,t,!0)}function Mg(){var e;const r=(e=k.logoContainer)==null?void 0:e.querySelector("svg.logo-svg");r&&(r.style.opacity="")}function Fg(){Ia(),ce()==="interactive"&&(console.log("[UIUpdater finalizeThemeTransition] App is interactive. Setting LCDs to 'active'."),k.lcdA&&ur(k.lcdA,"active",{phaseContext:"FinalizeTheme_LcdA"}),k.lcdB&&ur(k.lcdB,"active",{phaseContext:"FinalizeTheme_LcdB"}),k.terminalContainer&&ur(k.terminalContainer,"active",{phaseContext:"FinalizeTheme_Terminal"}))}function Ar(r,e,t){const i=k.root;if(!i)return;const n=(Number(e)%360+360)%360;let s;const o=`--dynamic-${r}-chroma`,a={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},c=((h,f)=>{try{const u=getComputedStyle(i).getPropertyValue(h).trim();return u===""?f:parseFloat(u)||f}catch{return f}})(`--dynamic-${r}-chroma-base`,a[r]||.1);s=t?0:c;const d=`--dynamic-${r}-hue`;i.style.setProperty(d,n.toFixed(1)),i.style.setProperty(o,s.toFixed(4))}function kg(r,e,t){if(!r){console.warn(`[UIUpdater updateLcdDisplay] Attempted to update null LCD screen element for ID: ${t}`);return}if(t==="Terminal")return;const i=r.querySelector(".lcd-value");if(!i){console.warn(`[UIUpdater updateLcdDisplay] .lcd-value span not found in LCD: ${t}`);return}i.textContent!==e&&(i.textContent=e,console.log(`[UIUpdater updateLcdDisplay - ${t}] Text content set to: "${e}"`))}function Bg(r){if(!(!r||r.id!=="A"||!r.state)&&k.lcdA){const e=Vc(k.lcdA);xn(k.lcdA,k.lcdA.querySelector(".lcd-value"),null,"DialAUpdate",e)}}function Ug(r){!r||!r.targetKey||typeof r.hue!="number"||typeof r.isColorless!="boolean"||Ar(r.targetKey,r.hue,r.isColorless)}function $g(r){if(!k.body)return;const e=br(),t=ce();console.log(`[UIUpdater handleThemeChange] Theme changing to '${r}'. CurrentPhase: ${e}, AppStatus: ${t}`),k.body.classList.remove("theme-dim","theme-dark","theme-light"),k.body.classList.add(`theme-${r}`);const i=t==="starting-up"&&e===10&&k.body.classList.contains("is-transitioning-from-dim");!i&&t!=="loading"?(console.log(`[UIUpdater handleThemeChange] Calling applyInitialLcdStates after theme change to '${r}'.`),wr()):console.log(`[UIUpdater handleThemeChange] Deferring applyInitialLcdStates for theme '${r}'. P10 Transition: ${i}, AppStatus: ${t}`)}function Gg(r){if(k.lcdB){const e=Vc(k.lcdB);xn(k.lcdB,k.lcdB.querySelector(".lcd-value"),null,"DialBUpdate_TrueLensPower",e)}}function Vc(r){if(!r||r.classList.contains("lcd--unlit"))return"lcd--unlit";if(r.classList.contains("js-active-dim-lcd"))return"js-active-dim-lcd";if(r.classList.contains("lcd--dimly-lit"))return"lcd--dimly-lit";const e=ce(),t=br();return e==="interactive"||e==="starting-up"&&t>=10?"active":e==="starting-up"&&t>=6?"lcd--dimly-lit":"lcd--unlit"}function Hg(r){var e;if(console.log(`[UIUpdater handleAppStatusChange] New status: ${r}`),r!=="loading"&&wr(),r==="starting-up"){const t=(e=k.logoContainer)==null?void 0:e.querySelector("svg.logo-svg");t&&t.style.opacity!=="0.05"&&(t.style.opacity="0.05")}else r==="interactive"&&Ia()}function Yg(r){console.log(`[UIUpdater handleStartupPhaseNumberChange] New phase number: ${r}. AppStatus: ${ce()}`),r>=0||r===-1&&ce()==="loading"?wr():r===-1&&ce()==="starting-up"&&console.log("[UIUpdater handleStartupPhaseNumberChange] Phase is -1 during 'starting-up'. Deferring applyInitialLcdStates.")}function wr(){const r=br(),e=ce();if(console.log(`[UIUpdater applyInitialLcdStates] AppStatus: ${e}, CurrentPhase: ${r}`),r===-1&&e==="starting-up"){console.log("[UIUpdater applyInitialLcdStates] CurrentPhase is -1 during 'starting-up'. Deferring state changes.");return}[{el:k.lcdA,id:"LcdA_ApplyInitial"},{el:k.lcdB,id:"LcdB_ApplyInitial"},{el:k.terminalContainer,id:"Terminal_ApplyInitial"}].forEach(i=>{if(!i.el)return;let n="lcd--unlit";if(e==="interactive"||e==="starting-up"&&r>=10)n="active";else if(e==="starting-up"&&r>=6){if(r===6&&(i.el===k.lcdA||i.el===k.lcdB)){console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Phase 6, deferring Dial LCD state. Current class: ${i.el.className}`),i.el.classList.contains("lcd--dimly-lit")&&(i.el.classList.remove("lcd--dimly-lit"),console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Phase 6, removed lcd--dimly-lit for deferral.`));const s=i.el.querySelector(".lcd-value");s&&Ce.getProperty(s,"opacity")>0&&Ce.set(s,{opacity:0});return}n="lcd--dimly-lit"}else(e==="starting-up"&&r>=0&&r<6||e==="loading"&&r===-1)&&(n="lcd--unlit");console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Target state for phase ${r}: ${n}`),i.el.classList.contains("is-flickering")?console.log(`[UIUpdater applyInitialLcdStates - ${i.id}] Flicker in progress for ${i.el.id||i.el.className}. Text/content visibility will be handled by flicker onComplete.`):ur(i.el,n,{skipClassChange:!1,phaseContext:`ApplyInitial_P${r}_${i.id}`})})}function Vg(r){if(r&&r.id==="A"&&r.state){const e=(r.state.hue%360+360)%360;if(k.root){const t=getComputedStyle(k.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),i=parseFloat(t)||.2;Ar("ui-accent",e,i===0)}}}function Ia(){["env","lcd","logo","btn"].forEach(n=>{const s=ca(n);s&&Ar(n,s.hue,s.isColorless)});const e=On("A"),t=yr.DEFAULT_DIAL_A_HUE,i=e?e.hue:t;if(k.root){const n=getComputedStyle(k.root).getPropertyValue("--dynamic-ui-accent-chroma-base").trim(),s=parseFloat(n)||.2;Ar("ui-accent",i,s===0)}}function zc(){if(!k.logoContainer){console.error("[UIUpdater] logoContainer element not found for SVG injection.");return}const r=k.logoContainer.querySelector("svg.logo-svg");if(r){document.body.classList.contains("theme-dim")||ce()==="starting-up"?(r.style.opacity===""||parseFloat(r.style.opacity)>.05)&&(r.style.opacity="0.05"):r.style.opacity==="0.05"&&(r.style.opacity="");return}fetch("./logo.svg").then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status} for ${t.url}`);return t.text()}).then(t=>{if(!t||!t.trim().startsWith("<svg"))throw new Error("Invalid or empty SVG data.");k.logoContainer.innerHTML=t;const i=k.logoContainer.querySelector("svg.logo-svg");if(i){(document.body.classList.contains("theme-dim")||ce()==="starting-up")&&(i.style.opacity="0.05");const n=ca("logo");n&&Ar("logo",n.hue,n.isColorless)}else console.error("[UIUpdater injectLogoSVG] SVG element NOT found after innerHTML set."),k.logoContainer.innerHTML='<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Element Not Found Post-Inject</p>'}).catch(t=>{console.error("[UIUpdater] Error fetching/injecting SVG logo:",t),k.logoContainer.innerHTML=`<p style="color:var(--theme-text-secondary-l, #ccc);text-align:center;font-size:0.8em;">Logo Load Error: ${t.message}</p>`})}const Nl=Object.freeze(Object.defineProperty({__proto__:null,applyInitialLcdStates:wr,finalizeThemeTransition:Fg,init:Yc,injectLogoSVG:zc,prepareLogoForFullTheme:Mg,setDialLcdActiveDimState:Og,setLcdState:ur},Symbol.toStringTag,{value:"Module"}));class zg{constructor(e,t,i,n){this.gsap=e,this.appState=t,this.buttonManager=i,this.configModule=n,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!1,this._updateResonance=this._updateResonance.bind(this)}init(){this.debug&&console.log("[AAM INIT] Initializing AmbientAnimationManager."),this.appState.subscribe("appStatusChanged",this._handleAppStatusChange.bind(this)),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",this._handleBeforeButtonTransition.bind(this)),this.buttonManager.on("afterButtonTransition",this._handleAfterButtonTransition.bind(this)),this.debug&&console.log("[AAM INIT] Subscribed to ButtonManager events.")):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(this.appState.getAppStatus()),this.debug&&console.log(`[AAM INIT] Initialization complete. Initial isActive: ${this.isActive}, HarmonicResonanceEnabled: ${this.enableHarmonicResonance}`)}_updateResonance(){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance)return;const e=this.configModule.HARMONIC_RESONANCE_PARAMS,t=this.gsap.ticker.time;this.globalResonanceParams.progress=(Math.sin(t*Math.PI*2/e.PERIOD)+1)/2;const i=this.globalResonanceParams.progress*e.LIGHT_OPACITY_DIP_FACTOR,n=e.BASE_LIGHT_OPACITY_SELECTED*(1-i);document.documentElement.style.setProperty("--harmonic-resonance-opacity-target",n.toFixed(3)),this.debug&&Math.random()<.01&&console.log(`[AAM _updateResonance] CSS Var --harmonic-resonance-opacity-target set to: ${n.toFixed(3)}`)}_handleAppStatusChange(e){this.debug&&console.log(`[AAM _handleAppStatusChange] Received new app status: ${e}. Current AAM.isActive: ${this.isActive}`);const t=this.isActive;if(this.isActive=e==="interactive",this.isActive){!t&&this.enableHarmonicResonance&&(this.resonanceTicker.add(this._updateResonance),this.debug&&console.log("[AAM _handleAppStatusChange] Resonance ticker ADDED."));const i=this.buttonManager.getAllButtonInstances();this.debug&&console.log(`[AAM _handleAppStatusChange] App became interactive. Applying ambient animations to ${i.length} buttons.`);for(const n of i)this._applyAmbientAnimation(n)}else{t&&this.enableHarmonicResonance&&(this.resonanceTicker.remove(this._updateResonance),this.debug&&console.log("[AAM _handleAppStatusChange] Resonance ticker REMOVED."),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target"));const i=this.buttonManager.getAllButtonInstances();this.debug&&i.length>0&&console.log(`[AAM _handleAppStatusChange] App no longer interactive. Stopping ambient animations for ${i.length} buttons.`);for(const n of i)n.stopHarmonicResonance(),n.stopIdleLightDrift()}}_handleBeforeButtonTransition(e){this.isActive&&(this.debug&&console.log(`[AAM _handleBeforeButtonTransition] Button: ${e.getIdentifier()}. Stopping its ambient animations.`),e.stopHarmonicResonance(),e.stopIdleLightDrift())}_handleAfterButtonTransition(e){this.isActive&&(this.debug&&console.log(`[AAM _handleAfterButtonTransition] Button: ${e.getIdentifier()}. Re-applying ambient animation.`),this._applyAmbientAnimation(e))}_applyAmbientAnimation(e){if(!this.isActive||!this.configModule){this.debug&&console.log(`[AAM _applyAmbientAnimation] Skipped for ${e.getIdentifier()}. AAM active: ${this.isActive}, Config: !!${this.configModule}`);return}e.stopHarmonicResonance(),e.stopIdleLightDrift();const t=this.configModule.HARMONIC_RESONANCE_PARAMS,i=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,n=e.getCurrentClasses(),s=e.isSelected(),o=t&&t.ELIGIBILITY_CLASS,a=i&&i.ELIGIBILITY_CLASS,l=o&&n.has(o)||a&&n.has(a);this.debug&&console.log(`[AAM _applyAmbientAnimation] Button: ${e.getIdentifier()}, isSelected: ${s}, isEnergized (based on class '${o||a}'): ${l}, Current DOM Classes: '${Array.from(n).join(" ")}'`),l?s?this.enableHarmonicResonance?(this.debug&&console.log(`[AAM _applyAmbientAnimation] Starting HARMONIC RESONANCE for selected button: ${e.getIdentifier()}`),e.startHarmonicResonance()):(this.debug&&console.log(`[AAM _applyAmbientAnimation] Harmonic Resonance DISABLED. Not starting for ${e.getIdentifier()}`),e.stopHarmonicResonance()):(this.debug&&console.log(`[AAM _applyAmbientAnimation] Starting IDLE LIGHT DRIFT for unselected, energized button: ${e.getIdentifier()}`),e.startIdleLightDrift()):this.debug&&console.log(`[AAM _applyAmbientAnimation] Button ${e.getIdentifier()} is NOT eligible for ambient animation (not energized).`)}destroy(){this.debug&&console.log("[AAM DESTROY] Destroying AmbientAnimationManager."),this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance),document.documentElement.style.removeProperty("--harmonic-resonance-opacity-target")}}const Me={root:document.documentElement,body:document.body,appWrapper:document.querySelector(".app-wrapper"),leftPanel:document.querySelector(".left-panel"),centerPanel:document.querySelector(".center-panel"),rightPanel:document.querySelector(".right-panel"),allButtons:Array.from(document.querySelectorAll(".button-unit")),mainPowerToggleButtons:Array.from(document.querySelectorAll('[data-group-id="system-power"] .button-unit--toggle')),mainPwrOnButton:document.querySelector('[data-group-id="system-power"] .button-unit--toggle[data-toggle-value="on"]'),mainPwrOffButton:document.querySelector('[data-group-id="system-power"] .button-unit--toggle[data-toggle-value="off"]'),auxLightToggleButtons:Array.from(document.querySelectorAll('[data-group-id="light"] .button-unit--toggle')),auxLightLowButton:document.querySelector('[data-group-id="light"] .button-unit--toggle[data-toggle-value="off"]'),auxLightHighButton:document.querySelector('[data-group-id="light"] .button-unit--toggle[data-toggle-value="on"]'),scanButton1Element:document.querySelector('[data-group-id="skill-scan-group"] .button-unit--action[aria-label="Scan Button 1"]'),scanButton2Element:document.querySelector('[data-group-id="skill-scan-group"] .button-unit--action[aria-label="Scan Button 2"]'),scanButton3Element:document.querySelector('[data-group-id="fit-eval-group"] .button-unit--action[aria-label="Scan Button 3"]'),scanButton4Element:document.querySelector('[data-group-id="fit-eval-group"] .button-unit--action[aria-label="Scan Button 4"]'),hueAssignmentRadioButtons:Array.from(document.querySelectorAll(".hue-assignment-column .button-unit--radio")),dialA:document.getElementById("dial-canvas-container-A"),dialB:document.getElementById("dial-canvas-container-B"),lcdA:document.getElementById("hue-lcd-A"),lcdB:document.getElementById("hue-lcd-B"),terminalContainer:document.querySelector(".terminal-block .actual-lcd-screen-element"),terminalLcdContentElement:document.getElementById("terminal-lcd-content"),lensContainer:document.getElementById("lens-container"),colorLens:document.getElementById("color-lens"),colorLensGradient:document.getElementById("color-lens-gradient"),lensOuterGlow:document.getElementById("outer-glow"),lensSuperGlow:document.getElementById("lens-super-glow"),logoContainer:document.getElementById("logo-container"),colorChipsContainer:document.querySelector(".color-chips-column"),colorChips:Array.from(document.querySelectorAll(".color-chip")),grillPlaceholder:document.querySelector(".grill-placeholder"),debugControls:document.getElementById("debug-controls"),btnNextPhase:document.getElementById("btn-next-phase"),btnPlayAll:document.getElementById("btn-play-all"),btnResetStartup:document.getElementById("btn-reset-startup-debug"),debugPhaseStatus:document.getElementById("debug-phase-status"),debugPhaseInfo:document.getElementById("debug-phase-info"),elementsAnimatedOnDimExit:[]};ct.registerPlugin(Ir,la,vr);function Xg(){console.log("[Main INIT] HUE 9000 REFACTOR-V2.3 Initializing..."),uc("loading");const r=new tp(ct,Ji,Pi),e=new zg(ct,Ji,r,Pi);Yc(Me,Pi,ct),cc([Me.dialA,Me.dialB],Ji,Pi,ct);const t=Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]"));dc(t,r),gc(Me.root,Me.colorLensGradient,Pi,ct),_l.init(Me.terminalContainer,Me.terminalLcdContentElement,Ji,Pi,ct),r.setUiUpdater(Nl),r.setAAM(e),r.init(Me.allButtons),hc([...Me.mainPowerToggleButtons,...Me.auxLightToggleButtons],r),e.init(),Hc({gsap:ct,appState:Ji,configModule:Pi,domElements:Me,managers:{buttonManager:r,dialManager:sp,gridManager:op,toggleManager:ap,lensManager:hp,terminalManager:_l,uiUpdater:Nl,debugManager:mp,ambientAnimationManager:e}});const n={nextPhaseButton:Me.btnNextPhase,playAllButton:Me.btnPlayAll,resetButton:Me.btnResetStartup,debugStatusDiv:Me.debugPhaseStatus,debugPhaseInfoDiv:Me.debugPhaseInfo};Tc({startupSequenceManager:xg,appState:Ji,domElements:n}),Ca(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",Xg);
