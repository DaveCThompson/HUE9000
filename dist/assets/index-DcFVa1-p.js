(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function Tt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ma(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ve={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ni={duration:.5,overwrite:!1,delay:0},$r,ve,re,pt=1e8,Ce=1/pt,ir=Math.PI*2,Uu=ir/4,Gu=0,Fa=Math.sqrt,Hu=Math.cos,Vu=Math.sin,ye=function(e){return typeof e=="string"},le=function(e){return typeof e=="function"},Ct=function(e){return typeof e=="number"},Yr=function(e){return typeof e>"u"},_t=function(e){return typeof e=="object"},Pe=function(e){return e!==!1},zr=function(){return typeof window<"u"},Vn=function(e){return le(e)||ye(e)},Ra=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ie=Array.isArray,nr=/(?:-?\.?\d|\.)+/gi,Na=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,bi=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Rs=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ka=/[+-]=-?[.\d]+/,Ba=/[^,'"\[\]\s]+/gi,$u=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,oe,ct,sr,Wr,$e={},ls={},Ua,Ga=function(e){return(ls=ki(e,$e))&&Ne},Xr=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Tn=function(e,t){return!t&&console.warn(e)},Ha=function(e,t){return e&&($e[e]=t)&&ls&&(ls[e]=t)||$e},An=function(){return 0},Yu={suppressEvents:!0,isStart:!0,kill:!1},jn={suppressEvents:!0,kill:!1},zu={suppressEvents:!0},qr={},Gt=[],rr={},Va,Be={},Ns={},Mo=30,Kn=[],jr="",Kr=function(e){var t=e[0],i,n;if(_t(t)||le(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(n=Kn.length;n--&&!Kn[n].targetTest(t););i=Kn[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new fl(e[n],i)))||e.splice(n,1);return e},si=function(e){return e._gsap||Kr(Qe(e))[0]._gsap},$a=function(e,t,i){return(i=e[t])&&le(i)?e[t]():Yr(i)&&e.getAttribute&&e.getAttribute(t)||i},Me=function(e,t){return(e=e.split(",")).forEach(t)||e},de=function(e){return Math.round(e*1e5)/1e5||0},_e=function(e){return Math.round(e*1e7)/1e7||0},Li=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+n:i==="-"?e-n:i==="*"?e*n:e/n},Wu=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},us=function(){var e=Gt.length,t=Gt.slice(0),i,n;for(rr={},Gt.length=0,i=0;i<e;i++)n=t[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},Zr=function(e){return!!(e._initted||e._startAt||e.add)},Ya=function(e,t,i,n){Gt.length&&!ve&&us(),e.render(t,i,!!(ve&&t<0&&Zr(e))),Gt.length&&!ve&&us()},za=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(Ba).length<2?t:ye(e)?e.trim():e},Wa=function(e){return e},Ye=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Xu=function(e){return function(t,i){for(var n in i)n in t||n==="duration"&&e||n==="ease"||(t[n]=i[n])}},ki=function(e,t){for(var i in t)e[i]=t[i];return e},Fo=function r(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=_t(t[i])?r(e[i]||(e[i]={}),t[i]):t[i]);return e},cs=function(e,t){var i={},n;for(n in e)n in t||(i[n]=e[n]);return i},fn=function(e){var t=e.parent||oe,i=e.keyframes?Xu(Ie(e.keyframes)):Ye;if(Pe(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},qu=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},Xa=function(e,t,i,n,s){var a=e[n],l;if(s)for(l=t[s];a&&a[s]>l;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=a,t.parent=t._dp=e,t},As=function(e,t,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[n]===t&&(e[n]=s),t._next=t._prev=t.parent=null},$t=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},ri=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},ju=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},or=function(e,t,i,n){return e._startAt&&(ve?e._startAt.revert(jn):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},Ku=function r(e){return!e||e._ts&&r(e.parent)},Ro=function(e){return e._repeat?Bi(e._tTime,e=e.duration()+e._rDelay)*e:0},Bi=function(e,t){var i=Math.floor(e=_e(e/t));return e&&i===e?i-1:i},ds=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},vs=function(e){return e._end=_e(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ce)||0))},bs=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=_e(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),vs(e),i._dirty||ri(i,e)),e},qa=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=ds(e.rawTime(),t),(!t._dur||Fn(0,t.totalDuration(),i)-t._tTime>Ce)&&t.render(i,!0)),ri(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},ft=function(e,t,i,n){return t.parent&&$t(t),t._start=_e((Ct(i)?i:i||e!==oe?Ze(e,i,t):e._time)+t._delay),t._end=_e(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Xa(e,t,"_first","_last",e._sort?"_start":0),ar(t)||(e._recent=t),n||qa(e,t),e._ts<0&&bs(e,e._tTime),e},ja=function(e,t){return($e.ScrollTrigger||Xr("scrollTrigger",t))&&$e.ScrollTrigger.create(t,e)},Ka=function(e,t,i,n,s){if(Jr(e,t,s),!e._initted)return 1;if(!i&&e._pt&&!ve&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Va!==Ue.frame)return Gt.push(e),e._lazy=[s,n],1},Zu=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},ar=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Qu=function(e,t,i,n){var s=e.ratio,a=t<0||!t&&(!e._start&&Zu(e)&&!(!e._initted&&ar(e))||(e._ts<0||e._dp._ts<0)&&!ar(e))?0:1,l=e._rDelay,d=0,f,h,o;if(l&&e._repeat&&(d=Fn(0,e._tDur,t),h=Bi(d,l),e._yoyo&&h&1&&(a=1-a),h!==Bi(e._tTime,l)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ve||n||e._zTime===Ce||!t&&e._zTime){if(!e._initted&&Ka(e,t,n,i,d))return;for(o=e._zTime,e._zTime=t||(i?Ce:0),i||(i=t&&!o),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=d,f=e._pt;f;)f.r(a,f.d),f=f._next;t<0&&or(e,t,i,!0),e._onUpdate&&!i&&He(e,"onUpdate"),d&&e._repeat&&!i&&e.parent&&He(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&$t(e,1),!i&&!ve&&(He(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Ju=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<t)return n;n=n._prev}},Ui=function(e,t,i,n){var s=e._repeat,a=_e(t)||0,l=e._tTime/e._tDur;return l&&!n&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:_e(a*(s+1)+e._rDelay*s):a,l>0&&!n&&bs(e,e._tTime=e._tDur*l),e.parent&&vs(e),i||ri(e.parent,e),e},No=function(e){return e instanceof Le?ri(e):Ui(e,e._dur)},ec={_start:0,endTime:An,totalDuration:An},Ze=function r(e,t,i){var n=e.labels,s=e._recent||ec,a=e.duration()>=pt?s.endTime(!1):e._dur,l,d,f;return ye(t)&&(isNaN(t)||t in n)?(d=t.charAt(0),f=t.substr(-1)==="%",l=t.indexOf("="),d==="<"||d===">"?(l>=0&&(t=t.replace(/=/,"")),(d==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(l<0?s:i).totalDuration()/100:1)):l<0?(t in n||(n[t]=a),n[t]):(d=parseFloat(t.charAt(l-1)+t.substr(l+1)),f&&i&&(d=d/100*(Ie(i)?i[0]:i).totalDuration()),l>1?r(e,t.substr(0,l-1),i)+d:a+d)):t==null?a:+t},hn=function(e,t,i){var n=Ct(t[1]),s=(n?2:1)+(e<2?0:1),a=t[s],l,d;if(n&&(a.duration=t[1]),a.parent=i,e){for(l=a,d=i;d&&!("immediateRender"in l);)l=d.vars.defaults||{},d=Pe(d.vars.inherit)&&d.parent;a.immediateRender=Pe(l.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new pe(t[0],a,t[s+1])},Wt=function(e,t){return e||e===0?t(e):t},Fn=function(e,t,i){return i<e?e:i>t?t:i},we=function(e,t){return!ye(e)||!(t=$u.exec(e))?"":t[1]},tc=function(e,t,i){return Wt(i,function(n){return Fn(e,t,n)})},lr=[].slice,Za=function(e,t){return e&&_t(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_t(e[0]))&&!e.nodeType&&e!==ct},ic=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(n){var s;return ye(n)&&!t||Za(n,1)?(s=i).push.apply(s,Qe(n)):i.push(n)})||i},Qe=function(e,t,i){return re&&!t&&re.selector?re.selector(e):ye(e)&&!i&&(sr||!Gi())?lr.call((t||Wr).querySelectorAll(e),0):Ie(e)?ic(e,i):Za(e)?lr.call(e,0):e?[e]:[]},ur=function(e){return e=Qe(e)[0]||Tn("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return Qe(t,i.querySelectorAll?i:i===e?Tn("Invalid scope")||Wr.createElement("div"):e)}},Qa=function(e){return e.sort(function(){return .5-Math.random()})},Ja=function(e){if(le(e))return e;var t=_t(e)?e:{each:e},i=oi(t.ease),n=t.from||0,s=parseFloat(t.base)||0,a={},l=n>0&&n<1,d=isNaN(n)||l,f=t.axis,h=n,o=n;return ye(n)?h=o={center:.5,edges:.5,end:1}[n]||0:!l&&d&&(h=n[0],o=n[1]),function(c,u,_){var p=(_||t).length,g=a[p],m,D,S,A,T,C,I,b,E;if(!g){if(E=t.grid==="auto"?0:(t.grid||[1,pt])[1],!E){for(I=-1e8;I<(I=_[E++].getBoundingClientRect().left)&&E<p;);E<p&&E--}for(g=a[p]=[],m=d?Math.min(E,p)*h-.5:n%E,D=E===pt?0:d?p*o/E-.5:n/E|0,I=0,b=pt,C=0;C<p;C++)S=C%E-m,A=D-(C/E|0),g[C]=T=f?Math.abs(f==="y"?A:S):Fa(S*S+A*A),T>I&&(I=T),T<b&&(b=T);n==="random"&&Qa(g),g.max=I-b,g.min=b,g.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(E>p?p-1:f?f==="y"?p/E:E:Math.max(E,p/E))||0)*(n==="edges"?-1:1),g.b=p<0?s-p:s,g.u=we(t.amount||t.each)||0,i=i&&p<0?ul(i):i}return p=(g[c]-g.min)/g.max||0,_e(g.b+(i?i(p):p)*g.v)+g.u}},cr=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=_e(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(Ct(i)?0:we(i))}},el=function(e,t){var i=Ie(e),n,s;return!i&&_t(e)&&(n=i=e.radius||pt,e.values?(e=Qe(e.values),(s=!Ct(e[0]))&&(n*=n)):e=cr(e.increment)),Wt(t,i?le(e)?function(a){return s=e(a),Math.abs(s-a)<=n?s:a}:function(a){for(var l=parseFloat(s?a.x:a),d=parseFloat(s?a.y:0),f=pt,h=0,o=e.length,c,u;o--;)s?(c=e[o].x-l,u=e[o].y-d,c=c*c+u*u):c=Math.abs(e[o]-l),c<f&&(f=c,h=o);return h=!n||f<=n?e[h]:a,s||h===a||Ct(a)?h:h+we(a)}:cr(e))},tl=function(e,t,i,n){return Wt(Ie(e)?!t:i===!0?!!(i=0):!n,function(){return Ie(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*n)/n})},nc=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(n){return t.reduce(function(s,a){return a(s)},n)}},sc=function(e,t){return function(i){return e(parseFloat(i))+(t||we(i))}},rc=function(e,t,i){return nl(e,t,0,1,i)},il=function(e,t,i){return Wt(i,function(n){return e[~~t(n)]})},oc=function r(e,t,i){var n=t-e;return Ie(e)?il(e,r(0,e.length),t):Wt(i,function(s){return(n+(s-e)%n)%n+e})},ac=function r(e,t,i){var n=t-e,s=n*2;return Ie(e)?il(e,r(0,e.length-1),t):Wt(i,function(a){return a=(s+(a-e)%s)%s||0,e+(a>n?s-a:a)})},vn=function(e){for(var t=0,i="",n,s,a,l;~(n=e.indexOf("random(",t));)a=e.indexOf(")",n),l=e.charAt(n+7)==="[",s=e.substr(n+7,a-n-7).match(l?Ba:nr),i+=e.substr(t,n-t)+tl(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},nl=function(e,t,i,n,s){var a=t-e,l=n-i;return Wt(s,function(d){return i+((d-e)/a*l||0)})},lc=function r(e,t,i,n){var s=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!s){var a=ye(e),l={},d,f,h,o,c;if(i===!0&&(n=1)&&(i=null),a)e={p:e},t={p:t};else if(Ie(e)&&!Ie(t)){for(h=[],o=e.length,c=o-2,f=1;f<o;f++)h.push(r(e[f-1],e[f]));o--,s=function(_){_*=o;var p=Math.min(c,~~_);return h[p](_-p)},i=t}else n||(e=ki(Ie(e)?[]:{},e));if(!h){for(d in t)Qr.call(l,e,d,"get",t[d]);s=function(_){return io(_,l)||(a?e.p:e)}}}return Wt(i,s)},ko=function(e,t,i){var n=e.labels,s=pt,a,l,d;for(a in n)l=n[a]-t,l<0==!!i&&l&&s>(l=Math.abs(l))&&(d=a,s=l);return d},He=function(e,t,i){var n=e.vars,s=n[t],a=re,l=e._ctx,d,f,h;if(s)return d=n[t+"Params"],f=n.callbackScope||e,i&&Gt.length&&us(),l&&(re=l),h=d?s.apply(f,d):s.call(f),re=a,h},sn=function(e){return $t(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ve),e.progress()<1&&He(e,"onInterrupt"),e},wi,sl=[],rl=function(e){if(e)if(e=!e.name&&e.default||e,zr()||e.headless){var t=e.name,i=le(e),n=t&&!i&&e.init?function(){this._props=[]}:e,s={init:An,render:io,add:Qr,kill:vc,modifier:Ac,rawVars:0},a={targetTest:0,get:0,getSetter:to,aliases:{},register:0};if(Gi(),e!==n){if(Be[t])return;Ye(n,Ye(cs(e,s),a)),ki(n.prototype,ki(s,cs(e,a))),Be[n.prop=t]=n,e.targetTest&&(Kn.push(n),qr[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}Ha(t,n),e.register&&e.register(Ne,n,Fe)}else sl.push(e)},ie=255,rn={aqua:[0,ie,ie],lime:[0,ie,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ie],navy:[0,0,128],white:[ie,ie,ie],olive:[128,128,0],yellow:[ie,ie,0],orange:[ie,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ie,0,0],pink:[ie,192,203],cyan:[0,ie,ie],transparent:[ie,ie,ie,0]},ks=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*ie+.5|0},ol=function(e,t,i){var n=e?Ct(e)?[e>>16,e>>8&ie,e&ie]:0:rn.black,s,a,l,d,f,h,o,c,u,_;if(!n){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),rn[e])n=rn[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),l=e.charAt(3),e="#"+s+s+a+a+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return n=parseInt(e.substr(1,6),16),[n>>16,n>>8&ie,n&ie,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),n=[e>>16,e>>8&ie,e&ie]}else if(e.substr(0,3)==="hsl"){if(n=_=e.match(nr),!t)d=+n[0]%360/360,f=+n[1]/100,h=+n[2]/100,a=h<=.5?h*(f+1):h+f-h*f,s=h*2-a,n.length>3&&(n[3]*=1),n[0]=ks(d+1/3,s,a),n[1]=ks(d,s,a),n[2]=ks(d-1/3,s,a);else if(~e.indexOf("="))return n=e.match(Na),i&&n.length<4&&(n[3]=1),n}else n=e.match(nr)||rn.transparent;n=n.map(Number)}return t&&!_&&(s=n[0]/ie,a=n[1]/ie,l=n[2]/ie,o=Math.max(s,a,l),c=Math.min(s,a,l),h=(o+c)/2,o===c?d=f=0:(u=o-c,f=h>.5?u/(2-o-c):u/(o+c),d=o===s?(a-l)/u+(a<l?6:0):o===a?(l-s)/u+2:(s-a)/u+4,d*=60),n[0]=~~(d+.5),n[1]=~~(f*100+.5),n[2]=~~(h*100+.5)),i&&n.length<4&&(n[3]=1),n},al=function(e){var t=[],i=[],n=-1;return e.split(Ht).forEach(function(s){var a=s.match(bi)||[];t.push.apply(t,a),i.push(n+=a.length+1)}),t.c=i,t},Bo=function(e,t,i){var n="",s=(e+n).match(Ht),a=t?"hsla(":"rgba(",l=0,d,f,h,o;if(!s)return e;if(s=s.map(function(c){return(c=ol(c,t,1))&&a+(t?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"}),i&&(h=al(e),d=i.c,d.join(n)!==h.c.join(n)))for(f=e.replace(Ht,"1").split(bi),o=f.length-1;l<o;l++)n+=f[l]+(~d.indexOf(l)?s.shift()||a+"0,0,0,0)":(h.length?h:s.length?s:i).shift());if(!f)for(f=e.split(Ht),o=f.length-1;l<o;l++)n+=f[l]+s[l];return n+f[o]},Ht=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in rn)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),uc=/hsl[a]?\(/,ll=function(e){var t=e.join(" "),i;if(Ht.lastIndex=0,Ht.test(t))return i=uc.test(t),e[1]=Bo(e[1],i),e[0]=Bo(e[0],i,al(e[1])),!0},bn,Ue=function(){var r=Date.now,e=500,t=33,i=r(),n=i,s=1e3/240,a=s,l=[],d,f,h,o,c,u,_=function p(g){var m=r()-n,D=g===!0,S,A,T,C;if((m>e||m<0)&&(i+=m-t),n+=m,T=n-i,S=T-a,(S>0||D)&&(C=++o.frame,c=T-o.time*1e3,o.time=T=T/1e3,a+=S+(S>=s?4:s-S),A=1),D||(d=f(p)),A)for(u=0;u<l.length;u++)l[u](T,c,C,g)};return o={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return c/(1e3/(g||60))},wake:function(){Ua&&(!sr&&zr()&&(ct=sr=window,Wr=ct.document||{},$e.gsap=Ne,(ct.gsapVersions||(ct.gsapVersions=[])).push(Ne.version),Ga(ls||ct.GreenSockGlobals||!ct.gsap&&ct||{}),sl.forEach(rl)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,d&&o.sleep(),f=h||function(g){return setTimeout(g,a-o.time*1e3+1|0)},bn=1,_(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(d),bn=0,f=An},lagSmoothing:function(g,m){e=g||1/0,t=Math.min(m||33,e)},fps:function(g){s=1e3/(g||240),a=o.time*1e3+s},add:function(g,m,D){var S=m?function(A,T,C,I){g(A,T,C,I),o.remove(S)}:g;return o.remove(g),l[D?"unshift":"push"](S),Gi(),S},remove:function(g,m){~(m=l.indexOf(g))&&l.splice(m,1)&&u>=m&&u--},_listeners:l},o}(),Gi=function(){return!bn&&Ue.wake()},X={},cc=/^[\d.\-M][\d.\-,\s]/,dc=/["']/g,fc=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),n=i[0],s=1,a=i.length,l,d,f;s<a;s++)d=i[s],l=s!==a-1?d.lastIndexOf(","):d.length,f=d.substr(0,l),t[n]=isNaN(f)?f.replace(dc,"").trim():+f,n=d.substr(l+1).trim();return t},hc=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},pc=function(e){var t=(e+"").split("("),i=X[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[fc(t[1])]:hc(e).split(",").map(za)):X._CE&&cc.test(e)?X._CE("",e):i},ul=function(e){return function(t){return 1-e(1-t)}},cl=function r(e,t){for(var i=e._first,n;i;)i instanceof Le?r(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?r(i.timeline,t):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=t)),i=i._next},oi=function(e,t){return e&&(le(e)?e:X[e]||pc(e))||t},_i=function(e,t,i,n){i===void 0&&(i=function(d){return 1-t(1-d)}),n===void 0&&(n=function(d){return d<.5?t(d*2)/2:1-t((1-d)*2)/2});var s={easeIn:t,easeOut:i,easeInOut:n},a;return Me(e,function(l){X[l]=$e[l]=s,X[a=l.toLowerCase()]=i;for(var d in s)X[a+(d==="easeIn"?".in":d==="easeOut"?".out":".inOut")]=X[l+"."+d]=s[d]}),s},dl=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Bs=function r(e,t,i){var n=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/ir*(Math.asin(1/n)||0),l=function(h){return h===1?1:n*Math.pow(2,-10*h)*Vu((h-a)*s)+1},d=e==="out"?l:e==="in"?function(f){return 1-l(1-f)}:dl(l);return s=ir/s,d.config=function(f,h){return r(e,f,h)},d},Us=function r(e,t){t===void 0&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},n=e==="out"?i:e==="in"?function(s){return 1-i(1-s)}:dl(i);return n.config=function(s){return r(e,s)},n};Me("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;_i(r+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});X.Linear.easeNone=X.none=X.Linear.easeIn;_i("Elastic",Bs("in"),Bs("out"),Bs());(function(r,e){var t=1/e,i=2*t,n=2.5*t,s=function(l){return l<t?r*l*l:l<i?r*Math.pow(l-1.5/e,2)+.75:l<n?r*(l-=2.25/e)*l+.9375:r*Math.pow(l-2.625/e,2)+.984375};_i("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);_i("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});_i("Circ",function(r){return-(Fa(1-r*r)-1)});_i("Sine",function(r){return r===1?1:-Hu(r*Uu)+1});_i("Back",Us("in"),Us("out"),Us());X.SteppedEase=X.steps=$e.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,n=e+(t?0:1),s=t?1:0,a=1-Ce;return function(l){return((n*Fn(0,a,l)|0)+s)*i}}};Ni.ease=X["quad.out"];Me("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return jr+=r+","+r+"Params,"});var fl=function(e,t){this.id=Gu++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:$a,this.set=t?t.getSetter:to},wn=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ui(this,+t.duration,1,1),this.data=t.data,re&&(this._ctx=re,re.data.push(this)),bn||Ue.wake()}var e=r.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Ui(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,n){if(Gi(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(bs(this,i),!s._dp||s.parent||qa(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&ft(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===Ce||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Ya(this,i,n)),this},e.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Ro(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},e.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Ro(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?Bi(this._tTime,s)+1:1},e.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?ds(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Fn(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),vs(this),ju(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Gi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ce&&(this._tTime-=Ce)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&ft(n,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Pe(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ds(n.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=zu);var n=ve;return ve=i,Zr(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),ve=n,this},e.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,No(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,No(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,n){return this.totalTime(Ze(this,i),Pe(n))},e.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Pe(n)),this._dur||(this._zTime=-1e-8),this},e.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},e.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-Ce)},e.eventCallback=function(i,n,s){var a=this.vars;return arguments.length>1?(n?(a[i]=n,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},e.then=function(i){var n=this;return new Promise(function(s){var a=le(i)?i:Wa,l=function(){var f=n.then;n.then=null,le(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=f),s(a),n.then=f};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?l():n._prom=l})},e.kill=function(){sn(this)},r}();Ye(wn.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Le=function(r){Ma(e,r);function e(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Pe(i.sortChildren),oe&&ft(i.parent||oe,Tt(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&ja(Tt(s),i.scrollTrigger),s}var t=e.prototype;return t.to=function(n,s,a){return hn(0,arguments,this),this},t.from=function(n,s,a){return hn(1,arguments,this),this},t.fromTo=function(n,s,a,l){return hn(2,arguments,this),this},t.set=function(n,s,a){return s.duration=0,s.parent=this,fn(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new pe(n,s,Ze(this,a),1),this},t.call=function(n,s,a){return ft(this,pe.delayedCall(0,n,s),a)},t.staggerTo=function(n,s,a,l,d,f,h){return a.duration=s,a.stagger=a.stagger||l,a.onComplete=f,a.onCompleteParams=h,a.parent=this,new pe(n,a,Ze(this,d)),this},t.staggerFrom=function(n,s,a,l,d,f,h){return a.runBackwards=1,fn(a).immediateRender=Pe(a.immediateRender),this.staggerTo(n,s,a,l,d,f,h)},t.staggerFromTo=function(n,s,a,l,d,f,h,o){return l.startAt=a,fn(l).immediateRender=Pe(l.immediateRender),this.staggerTo(n,s,l,d,f,h,o)},t.render=function(n,s,a){var l=this._time,d=this._dirty?this.totalDuration():this._tDur,f=this._dur,h=n<=0?0:_e(n),o=this._zTime<0!=n<0&&(this._initted||!f),c,u,_,p,g,m,D,S,A,T,C,I;if(this!==oe&&h>d&&n>=0&&(h=d),h!==this._tTime||a||o){if(l!==this._time&&f&&(h+=this._time-l,n+=this._time-l),c=h,A=this._start,S=this._ts,m=!S,o&&(f||(l=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(C=this._yoyo,g=f+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,a);if(c=_e(h%g),h===d?(p=this._repeat,c=f):(T=_e(h/g),p=~~T,p&&p===T&&(c=f,p--),c>f&&(c=f)),T=Bi(this._tTime,g),!l&&this._tTime&&T!==p&&this._tTime-T*g-this._dur<=0&&(T=p),C&&p&1&&(c=f-c,I=1),p!==T&&!this._lock){var b=C&&T&1,E=b===(C&&p&1);if(p<T&&(b=!b),l=b?0:h%f?f:h,this._lock=1,this.render(l||(I?0:_e(p*g)),s,!f)._lock=0,this._tTime=h,!s&&this.parent&&He(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),l&&l!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,d=this._tDur,E&&(this._lock=2,l=b?f:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;cl(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(D=Ju(this,_e(l),_e(c)),D&&(h-=c-(c=D._start))),this._tTime=h,this._time=c,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,l=0),!l&&h&&!s&&!T&&(He(this,"onStart"),this._tTime!==h))return this;if(c>=l&&n>=0)for(u=this._first;u;){if(_=u._next,(u._act||c>=u._start)&&u._ts&&D!==u){if(u.parent!==this)return this.render(n,s,a);if(u.render(u._ts>0?(c-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(c-u._start)*u._ts,s,a),c!==this._time||!this._ts&&!m){D=0,_&&(h+=this._zTime=-1e-8);break}}u=_}else{u=this._last;for(var R=n<0?n:c;u;){if(_=u._prev,(u._act||R<=u._end)&&u._ts&&D!==u){if(u.parent!==this)return this.render(n,s,a);if(u.render(u._ts>0?(R-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(R-u._start)*u._ts,s,a||ve&&Zr(u)),c!==this._time||!this._ts&&!m){D=0,_&&(h+=this._zTime=R?-1e-8:Ce);break}}u=_}}if(D&&!s&&(this.pause(),D.render(c>=l?0:-1e-8)._zTime=c>=l?1:-1,this._ts))return this._start=A,vs(this),this.render(n,s,a);this._onUpdate&&!s&&He(this,"onUpdate",!0),(h===d&&this._tTime>=this.totalDuration()||!h&&l)&&(A===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((n||!f)&&(h===d&&this._ts>0||!h&&this._ts<0)&&$t(this,1),!s&&!(n<0&&!l)&&(h||l||!d)&&(He(this,h===d&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<d&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(n,s){var a=this;if(Ct(s)||(s=Ze(this,s,n)),!(n instanceof wn)){if(Ie(n))return n.forEach(function(l){return a.add(l,s)}),this;if(ye(n))return this.addLabel(n,s);if(le(n))n=pe.delayedCall(0,n);else return this}return this!==n?ft(this,n,s):this},t.getChildren=function(n,s,a,l){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),l===void 0&&(l=-1e8);for(var d=[],f=this._first;f;)f._start>=l&&(f instanceof pe?s&&d.push(f):(a&&d.push(f),n&&d.push.apply(d,f.getChildren(!0,s,a)))),f=f._next;return d},t.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},t.remove=function(n){return ye(n)?this.removeLabel(n):le(n)?this.killTweensOf(n):(n.parent===this&&As(this,n),n===this._recent&&(this._recent=this._last),ri(this))},t.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_e(Ue.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},t.addLabel=function(n,s){return this.labels[n]=Ze(this,s),this},t.removeLabel=function(n){return delete this.labels[n],this},t.addPause=function(n,s,a){var l=pe.delayedCall(0,s||An,a);return l.data="isPause",this._hasPause=1,ft(this,l,Ze(this,n))},t.removePause=function(n){var s=this._first;for(n=Ze(this,n);s;)s._start===n&&s.data==="isPause"&&$t(s),s=s._next},t.killTweensOf=function(n,s,a){for(var l=this.getTweensOf(n,a),d=l.length;d--;)Rt!==l[d]&&l[d].kill(n,s);return this},t.getTweensOf=function(n,s){for(var a=[],l=Qe(n),d=this._first,f=Ct(s),h;d;)d instanceof pe?Wu(d._targets,l)&&(f?(!Rt||d._initted&&d._ts)&&d.globalTime(0)<=s&&d.globalTime(d.totalDuration())>s:!s||d.isActive())&&a.push(d):(h=d.getTweensOf(l,s)).length&&a.push.apply(a,h),d=d._next;return a},t.tweenTo=function(n,s){s=s||{};var a=this,l=Ze(a,n),d=s,f=d.startAt,h=d.onStart,o=d.onStartParams,c=d.immediateRender,u,_=pe.to(a,Ye({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale())||Ce,onStart:function(){if(a.pause(),!u){var g=s.duration||Math.abs((l-(f&&"time"in f?f.time:a._time))/a.timeScale());_._dur!==g&&Ui(_,g,0,1).render(_._time,!0,!0),u=1}h&&h.apply(_,o||[])}},s));return c?_.render(0):_},t.tweenFromTo=function(n,s,a){return this.tweenTo(s,Ye({startAt:{time:Ze(this,n)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(n){return n===void 0&&(n=this._time),ko(this,Ze(this,n))},t.previousLabel=function(n){return n===void 0&&(n=this._time),ko(this,Ze(this,n),1)},t.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+Ce)},t.shiftChildren=function(n,s,a){a===void 0&&(a=0);for(var l=this._first,d=this.labels,f;l;)l._start>=a&&(l._start+=n,l._end+=n),l=l._next;if(s)for(f in d)d[f]>=a&&(d[f]+=n);return ri(this)},t.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},t.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),ri(this)},t.totalDuration=function(n){var s=0,a=this,l=a._last,d=pt,f,h,o;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(o=a.parent;l;)f=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>d&&a._sort&&l._ts&&!a._lock?(a._lock=1,ft(a,l,h-l._delay,1)._lock=0):d=h,h<0&&l._ts&&(s-=h,(!o&&!a._dp||o&&o.smoothChildTiming)&&(a._start+=h/a._ts,a._time-=h,a._tTime-=h),a.shiftChildren(-h,!1,-1/0),d=0),l._end>s&&l._ts&&(s=l._end),l=f;Ui(a,a===oe&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(n){if(oe._ts&&(Ya(oe,ds(n,oe)),Va=Ue.frame),Ue.frame>=Mo){Mo+=Ve.autoSleep||120;var s=oe._first;if((!s||!s._ts)&&Ve.autoSleep&&Ue._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ue.sleep()}}},e}(wn);Ye(Le.prototype,{_lock:0,_hasPause:0,_forcing:0});var _c=function(e,t,i,n,s,a,l){var d=new Fe(this._pt,e,t,0,1,Dl,null,s),f=0,h=0,o,c,u,_,p,g,m,D;for(d.b=i,d.e=n,i+="",n+="",(m=~n.indexOf("random("))&&(n=vn(n)),a&&(D=[i,n],a(D,e,t),i=D[0],n=D[1]),c=i.match(Rs)||[];o=Rs.exec(n);)_=o[0],p=n.substring(f,o.index),u?u=(u+1)%5:p.substr(-5)==="rgba("&&(u=1),_!==c[h++]&&(g=parseFloat(c[h-1])||0,d._pt={_next:d._pt,p:p||h===1?p:",",s:g,c:_.charAt(1)==="="?Li(g,_)-g:parseFloat(_)-g,m:u&&u<4?Math.round:0},f=Rs.lastIndex);return d.c=f<n.length?n.substring(f,n.length):"",d.fp=l,(ka.test(n)||m)&&(d.e=0),this._pt=d,d},Qr=function(e,t,i,n,s,a,l,d,f,h){le(n)&&(n=n(s||0,e,a));var o=e[t],c=i!=="get"?i:le(o)?f?e[t.indexOf("set")||!le(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():o,u=le(o)?f?Sc:gl:eo,_;if(ye(n)&&(~n.indexOf("random(")&&(n=vn(n)),n.charAt(1)==="="&&(_=Li(c,n)+(we(c)||0),(_||_===0)&&(n=_))),!h||c!==n||dr)return!isNaN(c*n)&&n!==""?(_=new Fe(this._pt,e,t,+c||0,n-(c||0),typeof o=="boolean"?Tc:ml,0,u),f&&(_.fp=f),l&&_.modifier(l,this,e),this._pt=_):(!o&&!(t in e)&&Xr(t,n),_c.call(this,e,t,c,n,u,d||Ve.stringFilter,f))},gc=function(e,t,i,n,s){if(le(e)&&(e=pn(e,s,t,i,n)),!_t(e)||e.style&&e.nodeType||Ie(e)||Ra(e))return ye(e)?pn(e,s,t,i,n):e;var a={},l;for(l in e)a[l]=pn(e[l],s,t,i,n);return a},hl=function(e,t,i,n,s,a){var l,d,f,h;if(Be[e]&&(l=new Be[e]).init(s,l.rawVars?t[e]:gc(t[e],n,s,a,i),i,n,a)!==!1&&(i._pt=d=new Fe(i._pt,s,e,0,1,l.render,l,0,l.priority),i!==wi))for(f=i._ptLookup[i._targets.indexOf(s)],h=l._props.length;h--;)f[l._props[h]]=d;return l},Rt,dr,Jr=function r(e,t,i){var n=e.vars,s=n.ease,a=n.startAt,l=n.immediateRender,d=n.lazy,f=n.onUpdate,h=n.runBackwards,o=n.yoyoEase,c=n.keyframes,u=n.autoRevert,_=e._dur,p=e._startAt,g=e._targets,m=e.parent,D=m&&m.data==="nested"?m.vars.targets:g,S=e._overwrite==="auto"&&!$r,A=e.timeline,T,C,I,b,E,R,M,U,x,Y,q,B,H;if(A&&(!c||!s)&&(s="none"),e._ease=oi(s,Ni.ease),e._yEase=o?ul(oi(o===!0?s:o,Ni.ease)):0,o&&e._yoyo&&!e._repeat&&(o=e._yEase,e._yEase=e._ease,e._ease=o),e._from=!A&&!!n.runBackwards,!A||c&&!n.stagger){if(U=g[0]?si(g[0]).harness:0,B=U&&n[U.prop],T=cs(n,qr),p&&(p._zTime<0&&p.progress(1),t<0&&h&&l&&!u?p.render(-1,!0):p.revert(h&&_?jn:Yu),p._lazy=0),a){if($t(e._startAt=pe.set(g,Ye({data:"isStart",overwrite:!1,parent:m,immediateRender:!0,lazy:!p&&Pe(d),startAt:null,delay:0,onUpdate:f&&function(){return He(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ve||!l&&!u)&&e._startAt.revert(jn),l&&_&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(h&&_&&!p){if(t&&(l=!1),I=Ye({overwrite:!1,data:"isFromStart",lazy:l&&!p&&Pe(d),immediateRender:l,stagger:0,parent:m},T),B&&(I[U.prop]=B),$t(e._startAt=pe.set(g,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ve?e._startAt.revert(jn):e._startAt.render(-1,!0)),e._zTime=t,!l)r(e._startAt,Ce,Ce);else if(!t)return}for(e._pt=e._ptCache=0,d=_&&Pe(d)||d&&!_,C=0;C<g.length;C++){if(E=g[C],M=E._gsap||Kr(g)[C]._gsap,e._ptLookup[C]=Y={},rr[M.id]&&Gt.length&&us(),q=D===g?C:D.indexOf(E),U&&(x=new U).init(E,B||T,e,q,D)!==!1&&(e._pt=b=new Fe(e._pt,E,x.name,0,1,x.render,x,0,x.priority),x._props.forEach(function(se){Y[se]=b}),x.priority&&(R=1)),!U||B)for(I in T)Be[I]&&(x=hl(I,T,e,q,E,D))?x.priority&&(R=1):Y[I]=b=Qr.call(e,E,I,"get",T[I],q,D,0,n.stringFilter);e._op&&e._op[C]&&e.kill(E,e._op[C]),S&&e._pt&&(Rt=e,oe.killTweensOf(E,Y,e.globalTime(t)),H=!e.parent,Rt=0),e._pt&&d&&(rr[M.id]=1)}R&&yl(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!H,c&&t<=0&&A.render(pt,!0,!0)},mc=function(e,t,i,n,s,a,l,d){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,o,c,u;if(!f)for(f=e._ptCache[t]=[],c=e._ptLookup,u=e._targets.length;u--;){if(h=c[u][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return dr=1,e.vars[t]="+=0",Jr(e,l),dr=0,d?Tn(t+" not eligible for reset"):1;f.push(h)}for(u=f.length;u--;)o=f[u],h=o._pt||o,h.s=(n||n===0)&&!s?n:h.s+(n||0)+a*h.c,h.c=i-h.s,o.e&&(o.e=de(i)+we(o.e)),o.b&&(o.b=h.s+we(o.b))},Dc=function(e,t){var i=e[0]?si(e[0]).harness:0,n=i&&i.aliases,s,a,l,d;if(!n)return t;s=ki({},t);for(a in n)if(a in s)for(d=n[a].split(","),l=d.length;l--;)s[d[l]]=s[a];return s},yc=function(e,t,i,n){var s=t.ease||n||"power1.inOut",a,l;if(Ie(t))l=i[e]||(i[e]=[]),t.forEach(function(d,f){return l.push({t:f/(t.length-1)*100,v:d,e:s})});else for(a in t)l=i[a]||(i[a]=[]),a==="ease"||l.push({t:parseFloat(e),v:t[a],e:s})},pn=function(e,t,i,n,s){return le(e)?e.call(t,i,n,s):ye(e)&&~e.indexOf("random(")?vn(e):e},pl=jr+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_l={};Me(pl+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return _l[r]=1});var pe=function(r){Ma(e,r);function e(i,n,s,a){var l;typeof n=="number"&&(s.duration=n,n=s,s=null),l=r.call(this,a?n:fn(n))||this;var d=l.vars,f=d.duration,h=d.delay,o=d.immediateRender,c=d.stagger,u=d.overwrite,_=d.keyframes,p=d.defaults,g=d.scrollTrigger,m=d.yoyoEase,D=n.parent||oe,S=(Ie(i)||Ra(i)?Ct(i[0]):"length"in n)?[i]:Qe(i),A,T,C,I,b,E,R,M;if(l._targets=S.length?Kr(S):Tn("GSAP target "+i+" not found. https://gsap.com",!Ve.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=u,_||c||Vn(f)||Vn(h)){if(n=l.vars,A=l.timeline=new Le({data:"nested",defaults:p||{},targets:D&&D.data==="nested"?D.vars.targets:S}),A.kill(),A.parent=A._dp=Tt(l),A._start=0,c||Vn(f)||Vn(h)){if(I=S.length,R=c&&Ja(c),_t(c))for(b in c)~pl.indexOf(b)&&(M||(M={}),M[b]=c[b]);for(T=0;T<I;T++)C=cs(n,_l),C.stagger=0,m&&(C.yoyoEase=m),M&&ki(C,M),E=S[T],C.duration=+pn(f,Tt(l),T,E,S),C.delay=(+pn(h,Tt(l),T,E,S)||0)-l._delay,!c&&I===1&&C.delay&&(l._delay=h=C.delay,l._start+=h,C.delay=0),A.to(E,C,R?R(T,E,S):0),A._ease=X.none;A.duration()?f=h=0:l.timeline=0}else if(_){fn(Ye(A.vars.defaults,{ease:"none"})),A._ease=oi(_.ease||n.ease||"none");var U=0,x,Y,q;if(Ie(_))_.forEach(function(B){return A.to(S,B,">")}),A.duration();else{C={};for(b in _)b==="ease"||b==="easeEach"||yc(b,_[b],C,_.easeEach);for(b in C)for(x=C[b].sort(function(B,H){return B.t-H.t}),U=0,T=0;T<x.length;T++)Y=x[T],q={ease:Y.e,duration:(Y.t-(T?x[T-1].t:0))/100*f},q[b]=Y.v,A.to(S,q,U),U+=q.duration;A.duration()<f&&A.to({},{duration:f-A.duration()})}}f||l.duration(f=A.duration())}else l.timeline=0;return u===!0&&!$r&&(Rt=Tt(l),oe.killTweensOf(S),Rt=0),ft(D,Tt(l),s),n.reversed&&l.reverse(),n.paused&&l.paused(!0),(o||!f&&!_&&l._start===_e(D._time)&&Pe(o)&&Ku(Tt(l))&&D.data!=="nested")&&(l._tTime=-1e-8,l.render(Math.max(0,-h)||0)),g&&ja(Tt(l),g),l}var t=e.prototype;return t.render=function(n,s,a){var l=this._time,d=this._tDur,f=this._dur,h=n<0,o=n>d-Ce&&!h?d:n<Ce?0:n,c,u,_,p,g,m,D,S,A;if(!f)Qu(this,n,s,a);else if(o!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(c=o,S=this.timeline,this._repeat){if(p=f+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+n,s,a);if(c=_e(o%p),o===d?(_=this._repeat,c=f):(g=_e(o/p),_=~~g,_&&_===g?(c=f,_--):c>f&&(c=f)),m=this._yoyo&&_&1,m&&(A=this._yEase,c=f-c),g=Bi(this._tTime,p),c===l&&!a&&this._initted&&_===g)return this._tTime=o,this;_!==g&&(S&&this._yEase&&cl(S,m),this.vars.repeatRefresh&&!m&&!this._lock&&c!==p&&this._initted&&(this._lock=a=1,this.render(_e(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(Ka(this,h?n:c,a,s,o))return this._tTime=0,this;if(l!==this._time&&!(a&&this.vars.repeatRefresh&&_!==g))return this;if(f!==this._dur)return this.render(n,s,a)}if(this._tTime=o,this._time=c,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=D=(A||this._ease)(c/f),this._from&&(this.ratio=D=1-D),!l&&o&&!s&&!g&&(He(this,"onStart"),this._tTime!==o))return this;for(u=this._pt;u;)u.r(D,u.d),u=u._next;S&&S.render(n<0?n:S._dur*S._ease(c/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(h&&or(this,n,s,a),He(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!s&&this.parent&&He(this,"onRepeat"),(o===this._tDur||!o)&&this._tTime===o&&(h&&!this._onUpdate&&or(this,n,!0,!0),(n||!f)&&(o===this._tDur&&this._ts>0||!o&&this._ts<0)&&$t(this,1),!s&&!(h&&!l)&&(o||l||m)&&(He(this,o===d?"onComplete":"onReverseComplete",!0),this._prom&&!(o<d&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},t.resetTo=function(n,s,a,l,d){bn||Ue.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||Jr(this,f),h=this._ease(f/this._dur),mc(this,n,s,a,l,h,f,d)?this.resetTo(n,s,a,l,1):(bs(this,0),this.parent||Xa(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?sn(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ve),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Rt&&Rt.vars.overwrite!==!0)._first||sn(this),this.parent&&a!==this.timeline.totalDuration()&&Ui(this,this._dur*this.timeline._tDur/a,0,1),this}var l=this._targets,d=n?Qe(n):l,f=this._ptLookup,h=this._pt,o,c,u,_,p,g,m;if((!s||s==="all")&&qu(l,d))return s==="all"&&(this._pt=0),sn(this);for(o=this._op=this._op||[],s!=="all"&&(ye(s)&&(p={},Me(s,function(D){return p[D]=1}),s=p),s=Dc(l,s)),m=l.length;m--;)if(~d.indexOf(l[m])){c=f[m],s==="all"?(o[m]=s,_=c,u={}):(u=o[m]=o[m]||{},_=s);for(p in _)g=c&&c[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&As(this,g,"_pt"),delete c[p]),u!=="all"&&(u[p]=1)}return this._initted&&!this._pt&&h&&sn(this),this},e.to=function(n,s){return new e(n,s,arguments[2])},e.from=function(n,s){return hn(1,arguments)},e.delayedCall=function(n,s,a,l){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:l})},e.fromTo=function(n,s,a){return hn(2,arguments)},e.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(n,s)},e.killTweensOf=function(n,s,a){return oe.killTweensOf(n,s,a)},e}(wn);Ye(pe.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Me("staggerTo,staggerFrom,staggerFromTo",function(r){pe[r]=function(){var e=new Le,t=lr.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var eo=function(e,t,i){return e[t]=i},gl=function(e,t,i){return e[t](i)},Sc=function(e,t,i,n){return e[t](n.fp,i)},Ec=function(e,t,i){return e.setAttribute(t,i)},to=function(e,t){return le(e[t])?gl:Yr(e[t])&&e.setAttribute?Ec:eo},ml=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Tc=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Dl=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(e===1&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},io=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Ac=function(e,t,i,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(e,t,i),s=a},vc=function(e){for(var t=this._pt,i,n;t;)n=t._next,t.p===e&&!t.op||t.op===e?As(this,t,"_pt"):t.dep||(i=1),t=n;return!i},bc=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},yl=function(e){for(var t=e._pt,i,n,s,a;t;){for(i=t._next,n=s;n&&n.pr>t.pr;)n=n._next;(t._prev=n?n._prev:a)?t._prev._next=t:s=t,(t._next=n)?n._prev=t:a=t,t=i}e._pt=s},Fe=function(){function r(t,i,n,s,a,l,d,f,h){this.t=i,this.s=s,this.c=a,this.p=n,this.r=l||ml,this.d=d||this,this.set=f||eo,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=bc,this.m=i,this.mt=s,this.tween=n},r}();Me(jr+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return qr[r]=1});$e.TweenMax=$e.TweenLite=pe;$e.TimelineLite=$e.TimelineMax=Le;oe=new Le({sortChildren:!1,defaults:Ni,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ve.stringFilter=ll;var ai=[],Zn={},wc=[],Uo=0,Cc=0,Gs=function(e){return(Zn[e]||wc).map(function(t){return t()})},fr=function(){var e=Date.now(),t=[];e-Uo>2&&(Gs("matchMediaInit"),ai.forEach(function(i){var n=i.queries,s=i.conditions,a,l,d,f;for(l in n)a=ct.matchMedia(n[l]).matches,a&&(d=1),a!==s[l]&&(s[l]=a,f=1);f&&(i.revert(),d&&t.push(i))}),Gs("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Uo=e,Gs("matchMedia"))},Sl=function(){function r(t,i){this.selector=i&&ur(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Cc++,t&&this.add(t)}var e=r.prototype;return e.add=function(i,n,s){le(i)&&(s=n,n=i,i=le);var a=this,l=function(){var f=re,h=a.selector,o;return f&&f!==a&&f.data.push(a),s&&(a.selector=ur(s)),re=a,o=n.apply(a,arguments),le(o)&&a._r.push(o),re=f,a.selector=h,a.isReverted=!1,o};return a.last=l,i===le?l(a,function(d){return a.add(null,d)}):i?a[i]=l:l},e.ignore=function(i){var n=re;re=null,i(this),re=n},e.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof pe&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,n){var s=this;if(i?function(){for(var l=s.getTweens(),d=s.data.length,f;d--;)f=s.data[d],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,o){return o.g-h.g||-1/0}).forEach(function(h){return h.t.revert(i)}),d=s.data.length;d--;)f=s.data[d],f instanceof Le?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof pe)&&f.revert&&f.revert(i);s._r.forEach(function(h){return h(i,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),n)for(var a=ai.length;a--;)ai[a].id===this.id&&ai.splice(a,1)},e.revert=function(i){this.kill(i||{})},r}(),Ic=function(){function r(t){this.contexts=[],this.scope=t,re&&re.data.push(this)}var e=r.prototype;return e.add=function(i,n,s){_t(i)||(i={matches:i});var a=new Sl(0,s||this.scope),l=a.conditions={},d,f,h;re&&!a.selector&&(a.selector=re.selector),this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(f in i)f==="all"?h=1:(d=ct.matchMedia(i[f]),d&&(ai.indexOf(a)<0&&ai.push(a),(l[f]=d.matches)&&(h=1),d.addListener?d.addListener(fr):d.addEventListener("change",fr)));return h&&n(a,function(o){return a.add(null,o)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),fs={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(n){return rl(n)})},timeline:function(e){return new Le(e)},getTweensOf:function(e,t){return oe.getTweensOf(e,t)},getProperty:function(e,t,i,n){ye(e)&&(e=Qe(e)[0]);var s=si(e||{}).get,a=i?Wa:za;return i==="native"&&(i=""),e&&(t?a((Be[t]&&Be[t].get||s)(e,t,i,n)):function(l,d,f){return a((Be[l]&&Be[l].get||s)(e,l,d,f))})},quickSetter:function(e,t,i){if(e=Qe(e),e.length>1){var n=e.map(function(h){return Ne.quickSetter(h,t,i)}),s=n.length;return function(h){for(var o=s;o--;)n[o](h)}}e=e[0]||{};var a=Be[t],l=si(e),d=l.harness&&(l.harness.aliases||{})[t]||t,f=a?function(h){var o=new a;wi._pt=0,o.init(e,i?h+i:h,wi,0,[e]),o.render(1,o),wi._pt&&io(1,wi)}:l.set(e,d);return a?f:function(h){return f(e,d,i?h+i:h,l,1)}},quickTo:function(e,t,i){var n,s=Ne.to(e,Ye((n={},n[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),a=function(d,f,h){return s.resetTo(t,d,f,h)};return a.tween=s,a},isTweening:function(e){return oe.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=oi(e.ease,Ni.ease)),Fo(Ni,e||{})},config:function(e){return Fo(Ve,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,s=e.defaults,a=e.extendTimeline;(n||"").split(",").forEach(function(l){return l&&!Be[l]&&!$e[l]&&Tn(t+" effect requires "+l+" plugin.")}),Ns[t]=function(l,d,f){return i(Qe(l),Ye(d||{},s),f)},a&&(Le.prototype[t]=function(l,d,f){return this.add(Ns[t](l,_t(d)?d:(f=d)&&{},this),f)})},registerEase:function(e,t){X[e]=oi(t)},parseEase:function(e,t){return arguments.length?oi(e,t):X},getById:function(e){return oe.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Le(e),n,s;for(i.smoothChildTiming=Pe(e.smoothChildTiming),oe.remove(i),i._dp=0,i._time=i._tTime=oe._time,n=oe._first;n;)s=n._next,(t||!(!n._dur&&n instanceof pe&&n.vars.onComplete===n._targets[0]))&&ft(i,n,n._start-n._delay),n=s;return ft(oe,i,0),i},context:function(e,t){return e?new Sl(e,t):re},matchMedia:function(e){return new Ic(e)},matchMediaRefresh:function(){return ai.forEach(function(e){var t=e.conditions,i,n;for(n in t)t[n]&&(t[n]=!1,i=1);i&&e.revert()})||fr()},addEventListener:function(e,t){var i=Zn[e]||(Zn[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Zn[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:oc,wrapYoyo:ac,distribute:Ja,random:tl,snap:el,normalize:rc,getUnit:we,clamp:tc,splitColor:ol,toArray:Qe,selector:ur,mapRange:nl,pipe:nc,unitize:sc,interpolate:lc,shuffle:Qa},install:Ga,effects:Ns,ticker:Ue,updateRoot:Le.updateRoot,plugins:Be,globalTimeline:oe,core:{PropTween:Fe,globals:Ha,Tween:pe,Timeline:Le,Animation:wn,getCache:si,_removeLinkedListItem:As,reverting:function(){return ve},context:function(e){return e&&re&&(re.data.push(e),e._ctx=re),re},suppressOverwrites:function(e){return $r=e}}};Me("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return fs[r]=pe[r]});Ue.add(Le.updateRoot);wi=fs.to({},{duration:0});var Lc=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Oc=function(e,t){var i=e._targets,n,s,a;for(n in t)for(s=i.length;s--;)a=e._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=Lc(a,n)),a&&a.modifier&&a.modifier(t[n],e,i[s],n))},Hs=function(e,t){return{name:e,headless:1,rawVars:1,init:function(n,s,a){a._onInit=function(l){var d,f;if(ye(s)&&(d={},Me(s,function(h){return d[h]=1}),s=d),t){d={};for(f in s)d[f]=t(s[f]);s=d}Oc(l,s)}}}},Ne=fs.registerPlugin({name:"attr",init:function(e,t,i,n,s){var a,l,d;this.tween=i;for(a in t)d=e.getAttribute(a)||"",l=this.add(e,"setAttribute",(d||0)+"",t[a],n,s,0,0,a),l.op=a,l.b=d,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)ve?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Hs("roundProps",cr),Hs("modifiers"),Hs("snap",el))||fs;pe.version=Le.version=Ne.version="3.13.0";Ua=1;zr()&&Gi();X.Power0;X.Power1;X.Power2;X.Power3;X.Power4;X.Linear;X.Quad;X.Cubic;X.Quart;X.Quint;X.Strong;X.Elastic;X.Back;X.SteppedEase;X.Bounce;X.Sine;X.Expo;X.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Go,Nt,Oi,no,ii,Ho,so,xc=function(){return typeof window<"u"},It={},Jt=180/Math.PI,xi=Math.PI/180,gi=Math.atan2,Vo=1e8,ro=/([A-Z])/g,Pc=/(left|right|width|margin|padding|x)/i,Mc=/[\s,\(]\S/,ht={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},hr=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Fc=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Rc=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Nc=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},El=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Tl=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},kc=function(e,t,i){return e.style[t]=i},Bc=function(e,t,i){return e.style.setProperty(t,i)},Uc=function(e,t,i){return e._gsap[t]=i},Gc=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Hc=function(e,t,i,n,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},Vc=function(e,t,i,n,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},ae="transform",Re=ae+"Origin",$c=function r(e,t){var i=this,n=this.target,s=n.style,a=n._gsap;if(e in It&&s){if(this.tfm=this.tfm||{},e!=="transform")e=ht[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return i.tfm[l]=At(n,l)}):this.tfm[e]=a.x?a[e]:At(n,e),e===Re&&(this.tfm.zOrigin=a.zOrigin);else return ht.transform.split(",").forEach(function(l){return r.call(i,l,t)});if(this.props.indexOf(ae)>=0)return;a.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Re,t,"")),e=ae}(s||t)&&this.props.push(e,t,s[e])},Al=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Yc=function(){var e=this.props,t=this.target,i=t.style,n=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(ro,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=so(),(!s||!s.isStart)&&!i[ae]&&(Al(i),n.zOrigin&&i[Re]&&(i[Re]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},vl=function(e,t){var i={target:e,props:[],revert:Yc,save:$c};return e._gsap||Ne.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(n){return i.save(n)}),i},bl,pr=function(e,t){var i=Nt.createElementNS?Nt.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Nt.createElement(e);return i&&i.style?i:Nt.createElement(e)},Je=function r(e,t,i){var n=getComputedStyle(e);return n[t]||n.getPropertyValue(t.replace(ro,"-$1").toLowerCase())||n.getPropertyValue(t)||!i&&r(e,Hi(t)||t,1)||""},$o="O,Moz,ms,Ms,Webkit".split(","),Hi=function(e,t,i){var n=t||ii,s=n.style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!($o[a]+e in s););return a<0?null:(a===3?"ms":a>=0?$o[a]:"")+e},_r=function(){xc()&&window.document&&(Go=window,Nt=Go.document,Oi=Nt.documentElement,ii=pr("div")||{style:{}},pr("div"),ae=Hi(ae),Re=ae+"Origin",ii.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",bl=!!Hi("perspective"),so=Ne.core.reverting,no=1)},Yo=function(e){var t=e.ownerSVGElement,i=pr("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=e.cloneNode(!0),s;n.style.display="block",i.appendChild(n),Oi.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),Oi.removeChild(i),s},zo=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},wl=function(e){var t,i;try{t=e.getBBox()}catch{t=Yo(e),i=1}return t&&(t.width||t.height)||i||(t=Yo(e)),t&&!t.width&&!t.x&&!t.y?{x:+zo(e,["x","cx","x1"])||0,y:+zo(e,["y","cy","y1"])||0,width:0,height:0}:t},Cl=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&wl(e))},di=function(e,t){if(t){var i=e.style,n;t in It&&t!==Re&&(t=ae),i.removeProperty?(n=t.substr(0,2),(n==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(n==="--"?t:t.replace(ro,"-$1").toLowerCase())):i.removeAttribute(t)}},kt=function(e,t,i,n,s,a){var l=new Fe(e._pt,t,i,0,1,a?Tl:El);return e._pt=l,l.b=n,l.e=s,e._props.push(i),l},Wo={deg:1,rad:1,turn:1},zc={grid:1,flex:1},Yt=function r(e,t,i,n){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",l=ii.style,d=Pc.test(t),f=e.tagName.toLowerCase()==="svg",h=(f?"client":"offset")+(d?"Width":"Height"),o=100,c=n==="px",u=n==="%",_,p,g,m;if(n===a||!s||Wo[n]||Wo[a])return s;if(a!=="px"&&!c&&(s=r(e,t,i,"px")),m=e.getCTM&&Cl(e),(u||a==="%")&&(It[t]||~t.indexOf("adius")))return _=m?e.getBBox()[d?"width":"height"]:e[h],de(u?s/_*o:s/100*_);if(l[d?"width":"height"]=o+(c?a:n),p=n!=="rem"&&~t.indexOf("adius")||n==="em"&&e.appendChild&&!f?e:e.parentNode,m&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Nt||!p.appendChild)&&(p=Nt.body),g=p._gsap,g&&u&&g.width&&d&&g.time===Ue.time&&!g.uncache)return de(s/g.width*o);if(u&&(t==="height"||t==="width")){var D=e.style[t];e.style[t]=o+n,_=e[h],D?e.style[t]=D:di(e,t)}else(u||a==="%")&&!zc[Je(p,"display")]&&(l.position=Je(e,"position")),p===e&&(l.position="static"),p.appendChild(ii),_=ii[h],p.removeChild(ii),l.position="absolute";return d&&u&&(g=si(p),g.time=Ue.time,g.width=p[h]),de(c?_*s/o:_&&s?o/_*s:0)},At=function(e,t,i,n){var s;return no||_r(),t in ht&&t!=="transform"&&(t=ht[t],~t.indexOf(",")&&(t=t.split(",")[0])),It[t]&&t!=="transform"?(s=In(e,n),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:ps(Je(e,Re))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=hs[t]&&hs[t](e,t,i)||Je(e,t)||$a(e,t)||(t==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Yt(e,t,s,i)+i:s},Wc=function(e,t,i,n){if(!i||i==="none"){var s=Hi(t,e,1),a=s&&Je(e,s,1);a&&a!==i?(t=s,i=a):t==="borderColor"&&(i=Je(e,"borderTopColor"))}var l=new Fe(this._pt,e.style,t,0,1,Dl),d=0,f=0,h,o,c,u,_,p,g,m,D,S,A,T;if(l.b=i,l.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Je(e,n.substring(4,n.indexOf(")")))),n==="auto"&&(p=e.style[t],e.style[t]=n,n=Je(e,t)||n,p?e.style[t]=p:di(e,t)),h=[i,n],ll(h),i=h[0],n=h[1],c=i.match(bi)||[],T=n.match(bi)||[],T.length){for(;o=bi.exec(n);)g=o[0],D=n.substring(d,o.index),_?_=(_+1)%5:(D.substr(-5)==="rgba("||D.substr(-5)==="hsla(")&&(_=1),g!==(p=c[f++]||"")&&(u=parseFloat(p)||0,A=p.substr((u+"").length),g.charAt(1)==="="&&(g=Li(u,g)+A),m=parseFloat(g),S=g.substr((m+"").length),d=bi.lastIndex-S.length,S||(S=S||Ve.units[t]||A,d===n.length&&(n+=S,l.e+=S)),A!==S&&(u=Yt(e,t,p,S)||0),l._pt={_next:l._pt,p:D||f===1?D:",",s:u,c:m-u,m:_&&_<4||t==="zIndex"?Math.round:0});l.c=d<n.length?n.substring(d,n.length):""}else l.r=t==="display"&&n==="none"?Tl:El;return ka.test(n)&&(l.e=0),this._pt=l,l},Xo={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xc=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(e=i,i=n,n=e),t[0]=Xo[i]||i,t[1]=Xo[n]||n,t.join(" ")},qc=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,n=i.style,s=t.u,a=i._gsap,l,d,f;if(s==="all"||s===!0)n.cssText="",d=1;else for(s=s.split(","),f=s.length;--f>-1;)l=s[f],It[l]&&(d=1,l=l==="transformOrigin"?Re:ae),di(i,l);d&&(di(i,ae),a&&(a.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",In(i,1),a.uncache=1,Al(n)))}},hs={clearProps:function(e,t,i,n,s){if(s.data!=="isFromStart"){var a=e._pt=new Fe(e._pt,t,i,0,0,qc);return a.u=n,a.pr=-10,a.tween=s,e._props.push(i),1}}},Cn=[1,0,0,1,0,0],Il={},Ll=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},qo=function(e){var t=Je(e,ae);return Ll(t)?Cn:t.substr(7).match(Na).map(de)},oo=function(e,t){var i=e._gsap||si(e),n=e.style,s=qo(e),a,l,d,f;return i.svg&&e.getAttribute("transform")?(d=e.transform.baseVal.consolidate().matrix,s=[d.a,d.b,d.c,d.d,d.e,d.f],s.join(",")==="1,0,0,1,0,0"?Cn:s):(s===Cn&&!e.offsetParent&&e!==Oi&&!i.svg&&(d=n.display,n.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,l=e.nextElementSibling,Oi.appendChild(e)),s=qo(e),d?n.display=d:di(e,"display"),f&&(l?a.insertBefore(e,l):a?a.appendChild(e):Oi.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},gr=function(e,t,i,n,s,a){var l=e._gsap,d=s||oo(e,!0),f=l.xOrigin||0,h=l.yOrigin||0,o=l.xOffset||0,c=l.yOffset||0,u=d[0],_=d[1],p=d[2],g=d[3],m=d[4],D=d[5],S=t.split(" "),A=parseFloat(S[0])||0,T=parseFloat(S[1])||0,C,I,b,E;i?d!==Cn&&(I=u*g-_*p)&&(b=A*(g/I)+T*(-p/I)+(p*D-g*m)/I,E=A*(-_/I)+T*(u/I)-(u*D-_*m)/I,A=b,T=E):(C=wl(e),A=C.x+(~S[0].indexOf("%")?A/100*C.width:A),T=C.y+(~(S[1]||S[0]).indexOf("%")?T/100*C.height:T)),n||n!==!1&&l.smooth?(m=A-f,D=T-h,l.xOffset=o+(m*u+D*p)-m,l.yOffset=c+(m*_+D*g)-D):l.xOffset=l.yOffset=0,l.xOrigin=A,l.yOrigin=T,l.smooth=!!n,l.origin=t,l.originIsAbsolute=!!i,e.style[Re]="0px 0px",a&&(kt(a,l,"xOrigin",f,A),kt(a,l,"yOrigin",h,T),kt(a,l,"xOffset",o,l.xOffset),kt(a,l,"yOffset",c,l.yOffset)),e.setAttribute("data-svg-origin",A+" "+T)},In=function(e,t){var i=e._gsap||new fl(e);if("x"in i&&!t&&!i.uncache)return i;var n=e.style,s=i.scaleX<0,a="px",l="deg",d=getComputedStyle(e),f=Je(e,Re)||"0",h,o,c,u,_,p,g,m,D,S,A,T,C,I,b,E,R,M,U,x,Y,q,B,H,se,et,lt,z,j,Q,Z,ze;return h=o=c=p=g=m=D=S=A=0,u=_=1,i.svg=!!(e.getCTM&&Cl(e)),d.translate&&((d.translate!=="none"||d.scale!=="none"||d.rotate!=="none")&&(n[ae]=(d.translate!=="none"?"translate3d("+(d.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(d.rotate!=="none"?"rotate("+d.rotate+") ":"")+(d.scale!=="none"?"scale("+d.scale.split(" ").join(",")+") ":"")+(d[ae]!=="none"?d[ae]:"")),n.scale=n.rotate=n.translate="none"),I=oo(e,i.svg),i.svg&&(i.uncache?(se=e.getBBox(),f=i.xOrigin-se.x+"px "+(i.yOrigin-se.y)+"px",H=""):H=!t&&e.getAttribute("data-svg-origin"),gr(e,H||f,!!H||i.originIsAbsolute,i.smooth!==!1,I)),T=i.xOrigin||0,C=i.yOrigin||0,I!==Cn&&(M=I[0],U=I[1],x=I[2],Y=I[3],h=q=I[4],o=B=I[5],I.length===6?(u=Math.sqrt(M*M+U*U),_=Math.sqrt(Y*Y+x*x),p=M||U?gi(U,M)*Jt:0,D=x||Y?gi(x,Y)*Jt+p:0,D&&(_*=Math.abs(Math.cos(D*xi))),i.svg&&(h-=T-(T*M+C*x),o-=C-(T*U+C*Y))):(ze=I[6],Q=I[7],lt=I[8],z=I[9],j=I[10],Z=I[11],h=I[12],o=I[13],c=I[14],b=gi(ze,j),g=b*Jt,b&&(E=Math.cos(-b),R=Math.sin(-b),H=q*E+lt*R,se=B*E+z*R,et=ze*E+j*R,lt=q*-R+lt*E,z=B*-R+z*E,j=ze*-R+j*E,Z=Q*-R+Z*E,q=H,B=se,ze=et),b=gi(-x,j),m=b*Jt,b&&(E=Math.cos(-b),R=Math.sin(-b),H=M*E-lt*R,se=U*E-z*R,et=x*E-j*R,Z=Y*R+Z*E,M=H,U=se,x=et),b=gi(U,M),p=b*Jt,b&&(E=Math.cos(b),R=Math.sin(b),H=M*E+U*R,se=q*E+B*R,U=U*E-M*R,B=B*E-q*R,M=H,q=se),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),u=de(Math.sqrt(M*M+U*U+x*x)),_=de(Math.sqrt(B*B+ze*ze)),b=gi(q,B),D=Math.abs(b)>2e-4?b*Jt:0,A=Z?1/(Z<0?-Z:Z):0),i.svg&&(H=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Ll(Je(e,ae)),H&&e.setAttribute("transform",H))),Math.abs(D)>90&&Math.abs(D)<270&&(s?(u*=-1,D+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,D+=D<=0?180:-180)),t=t||i.uncache,i.x=h-((i.xPercent=h&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=o-((i.yPercent=o&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-o)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=c+a,i.scaleX=de(u),i.scaleY=de(_),i.rotation=de(p)+l,i.rotationX=de(g)+l,i.rotationY=de(m)+l,i.skewX=D+l,i.skewY=S+l,i.transformPerspective=A+a,(i.zOrigin=parseFloat(f.split(" ")[2])||!t&&i.zOrigin||0)&&(n[Re]=ps(f)),i.xOffset=i.yOffset=0,i.force3D=Ve.force3D,i.renderTransform=i.svg?Kc:bl?Ol:jc,i.uncache=0,i},ps=function(e){return(e=e.split(" "))[0]+" "+e[1]},Vs=function(e,t,i){var n=we(t);return de(parseFloat(t)+parseFloat(Yt(e,"x",i+"px",n)))+n},jc=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Ol(e,t)},Kt="0deg",Zi="0px",Zt=") ",Ol=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,a=i.x,l=i.y,d=i.z,f=i.rotation,h=i.rotationY,o=i.rotationX,c=i.skewX,u=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,D=i.target,S=i.zOrigin,A="",T=m==="auto"&&e&&e!==1||m===!0;if(S&&(o!==Kt||h!==Kt)){var C=parseFloat(h)*xi,I=Math.sin(C),b=Math.cos(C),E;C=parseFloat(o)*xi,E=Math.cos(C),a=Vs(D,a,I*E*-S),l=Vs(D,l,-Math.sin(C)*-S),d=Vs(D,d,b*E*-S+S)}g!==Zi&&(A+="perspective("+g+Zt),(n||s)&&(A+="translate("+n+"%, "+s+"%) "),(T||a!==Zi||l!==Zi||d!==Zi)&&(A+=d!==Zi||T?"translate3d("+a+", "+l+", "+d+") ":"translate("+a+", "+l+Zt),f!==Kt&&(A+="rotate("+f+Zt),h!==Kt&&(A+="rotateY("+h+Zt),o!==Kt&&(A+="rotateX("+o+Zt),(c!==Kt||u!==Kt)&&(A+="skew("+c+", "+u+Zt),(_!==1||p!==1)&&(A+="scale("+_+", "+p+Zt),D.style[ae]=A||"translate(0, 0)"},Kc=function(e,t){var i=t||this,n=i.xPercent,s=i.yPercent,a=i.x,l=i.y,d=i.rotation,f=i.skewX,h=i.skewY,o=i.scaleX,c=i.scaleY,u=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,D=i.forceCSS,S=parseFloat(a),A=parseFloat(l),T,C,I,b,E;d=parseFloat(d),f=parseFloat(f),h=parseFloat(h),h&&(h=parseFloat(h),f+=h,d+=h),d||f?(d*=xi,f*=xi,T=Math.cos(d)*o,C=Math.sin(d)*o,I=Math.sin(d-f)*-c,b=Math.cos(d-f)*c,f&&(h*=xi,E=Math.tan(f-h),E=Math.sqrt(1+E*E),I*=E,b*=E,h&&(E=Math.tan(h),E=Math.sqrt(1+E*E),T*=E,C*=E)),T=de(T),C=de(C),I=de(I),b=de(b)):(T=o,b=c,C=I=0),(S&&!~(a+"").indexOf("px")||A&&!~(l+"").indexOf("px"))&&(S=Yt(u,"x",a,"px"),A=Yt(u,"y",l,"px")),(_||p||g||m)&&(S=de(S+_-(_*T+p*I)+g),A=de(A+p-(_*C+p*b)+m)),(n||s)&&(E=u.getBBox(),S=de(S+n/100*E.width),A=de(A+s/100*E.height)),E="matrix("+T+","+C+","+I+","+b+","+S+","+A+")",u.setAttribute("transform",E),D&&(u.style[ae]=E)},Zc=function(e,t,i,n,s){var a=360,l=ye(s),d=parseFloat(s)*(l&&~s.indexOf("rad")?Jt:1),f=d-n,h=n+f+"deg",o,c;return l&&(o=s.split("_")[1],o==="short"&&(f%=a,f!==f%(a/2)&&(f+=f<0?a:-360)),o==="cw"&&f<0?f=(f+a*Vo)%a-~~(f/a)*a:o==="ccw"&&f>0&&(f=(f-a*Vo)%a-~~(f/a)*a)),e._pt=c=new Fe(e._pt,t,i,n,f,Fc),c.e=h,c.u="deg",e._props.push(i),c},jo=function(e,t){for(var i in t)e[i]=t[i];return e},Qc=function(e,t,i){var n=jo({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,l,d,f,h,o,c,u,_;n.svg?(f=i.getAttribute("transform"),i.setAttribute("transform",""),a[ae]=t,l=In(i,1),di(i,ae),i.setAttribute("transform",f)):(f=getComputedStyle(i)[ae],a[ae]=t,l=In(i,1),a[ae]=f);for(d in It)f=n[d],h=l[d],f!==h&&s.indexOf(d)<0&&(u=we(f),_=we(h),o=u!==_?Yt(i,d,f,_):parseFloat(f),c=parseFloat(h),e._pt=new Fe(e._pt,l,d,o,c-o,hr),e._pt.u=_||0,e._props.push(d));jo(l,n)};Me("padding,margin,Width,Radius",function(r,e){var t="Top",i="Right",n="Bottom",s="Left",a=(e<3?[t,i,n,s]:[t+s,t+i,n+i,n+s]).map(function(l){return e<2?r+l:"border"+l+r});hs[e>1?"border"+r:r]=function(l,d,f,h,o){var c,u;if(arguments.length<4)return c=a.map(function(_){return At(l,_,f)}),u=c.join(" "),u.split(c[0]).length===5?c[0]:u;c=(h+"").split(" "),u={},a.forEach(function(_,p){return u[_]=c[p]=c[p]||c[(p-1)/2|0]}),l.init(d,u,o)}});var xl={name:"css",register:_r,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,s){var a=this._props,l=e.style,d=i.vars.startAt,f,h,o,c,u,_,p,g,m,D,S,A,T,C,I,b;no||_r(),this.styles=this.styles||vl(e),b=this.styles.props,this.tween=i;for(p in t)if(p!=="autoRound"&&(h=t[p],!(Be[p]&&hl(p,t,i,n,e,s)))){if(u=typeof h,_=hs[p],u==="function"&&(h=h.call(i,n,e,s),u=typeof h),u==="string"&&~h.indexOf("random(")&&(h=vn(h)),_)_(this,e,p,h,i)&&(I=1);else if(p.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(p)+"").trim(),h+="",Ht.lastIndex=0,Ht.test(f)||(g=we(f),m=we(h)),m?g!==m&&(f=Yt(e,p,f,m)+m):g&&(h+=g),this.add(l,"setProperty",f,h,n,s,0,0,p),a.push(p),b.push(p,0,l[p]);else if(u!=="undefined"){if(d&&p in d?(f=typeof d[p]=="function"?d[p].call(i,n,e,s):d[p],ye(f)&&~f.indexOf("random(")&&(f=vn(f)),we(f+"")||f==="auto"||(f+=Ve.units[p]||we(At(e,p))||""),(f+"").charAt(1)==="="&&(f=At(e,p))):f=At(e,p),c=parseFloat(f),D=u==="string"&&h.charAt(1)==="="&&h.substr(0,2),D&&(h=h.substr(2)),o=parseFloat(h),p in ht&&(p==="autoAlpha"&&(c===1&&At(e,"visibility")==="hidden"&&o&&(c=0),b.push("visibility",0,l.visibility),kt(this,l,"visibility",c?"inherit":"hidden",o?"inherit":"hidden",!o)),p!=="scale"&&p!=="transform"&&(p=ht[p],~p.indexOf(",")&&(p=p.split(",")[0]))),S=p in It,S){if(this.styles.save(p),u==="string"&&h.substring(0,6)==="var(--"&&(h=Je(e,h.substring(4,h.indexOf(")"))),o=parseFloat(h)),A||(T=e._gsap,T.renderTransform&&!t.parseTransform||In(e,t.parseTransform),C=t.smoothOrigin!==!1&&T.smooth,A=this._pt=new Fe(this._pt,l,ae,0,1,T.renderTransform,T,0,-1),A.dep=1),p==="scale")this._pt=new Fe(this._pt,T,"scaleY",T.scaleY,(D?Li(T.scaleY,D+o):o)-T.scaleY||0,hr),this._pt.u=0,a.push("scaleY",p),p+="X";else if(p==="transformOrigin"){b.push(Re,0,l[Re]),h=Xc(h),T.svg?gr(e,h,0,C,0,this):(m=parseFloat(h.split(" ")[2])||0,m!==T.zOrigin&&kt(this,T,"zOrigin",T.zOrigin,m),kt(this,l,p,ps(f),ps(h)));continue}else if(p==="svgOrigin"){gr(e,h,1,C,0,this);continue}else if(p in Il){Zc(this,T,p,c,D?Li(c,D+h):h);continue}else if(p==="smoothOrigin"){kt(this,T,"smooth",T.smooth,h);continue}else if(p==="force3D"){T[p]=h;continue}else if(p==="transform"){Qc(this,h,e);continue}}else p in l||(p=Hi(p)||p);if(S||(o||o===0)&&(c||c===0)&&!Mc.test(h)&&p in l)g=(f+"").substr((c+"").length),o||(o=0),m=we(h)||(p in Ve.units?Ve.units[p]:g),g!==m&&(c=Yt(e,p,f,m)),this._pt=new Fe(this._pt,S?T:l,p,c,(D?Li(c,D+o):o)-c,!S&&(m==="px"||p==="zIndex")&&t.autoRound!==!1?Nc:hr),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=f,this._pt.r=Rc);else if(p in l)Wc.call(this,e,p,f,D?D+h:h);else if(p in e)this.add(e,p,f||e[p],D?D+h:h,n,s);else if(p!=="parseTransform"){Xr(p,h);continue}S||(p in l?b.push(p,0,l[p]):typeof e[p]=="function"?b.push(p,2,e[p]()):b.push(p,1,f||e[p])),a.push(p)}}I&&yl(this)},render:function(e,t){if(t.tween._time||!so())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:At,aliases:ht,getSetter:function(e,t,i){var n=ht[t];return n&&n.indexOf(",")<0&&(t=n),t in It&&t!==Re&&(e._gsap.x||At(e,"x"))?i&&Ho===i?t==="scale"?Gc:Uc:(Ho=i||{})&&(t==="scale"?Hc:Vc):e.style&&!Yr(e.style[t])?kc:~t.indexOf("-")?Bc:to(e,t)},core:{_removeProperty:di,_getMatrix:oo}};Ne.utils.checkPrefix=Hi;Ne.core.getStyleSaver=vl;(function(r,e,t,i){var n=Me(r+","+e+","+t,function(s){It[s]=1});Me(e,function(s){Ve.units[s]="deg",Il[s]=1}),ht[n[13]]=r+","+e,Me(i,function(s){var a=s.split(":");ht[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Me("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){Ve.units[r]="px"});Ne.registerPlugin(xl);var li=Ne.registerPlugin(xl)||Ne;li.core.Tween;/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var bt,ui,ao,ws,on,Qn,_s,_n,ot="transform",mr=ot+"Origin",Pl,Ml=function(e){var t=e.ownerDocument||e;for(!(ot in e.style)&&("msTransform"in e.style)&&(ot="msTransform",mr=ot+"Origin");t.parentNode&&(t=t.parentNode););if(ui=window,_s=new fi,t){bt=t,ao=t.documentElement,ws=t.body,_n=bt.createElementNS("http://www.w3.org/2000/svg","g"),_n.style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),s=t&&(t.body||t.firstElementChild);s&&s.appendChild&&(s.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Pl=n.offsetParent!==i,s.removeChild(i))}return t},Jc=function(e){for(var t,i;e&&e!==ws;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},Fl=[],Rl=[],ed=function(){return ui.pageYOffset||bt.scrollTop||ao.scrollTop||ws.scrollTop||0},td=function(){return ui.pageXOffset||bt.scrollLeft||ao.scrollLeft||ws.scrollLeft||0},lo=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},id=function r(e){if(ui.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return r(e)},$s=function r(e,t){if(e.parentNode&&(bt||Ml(e))){var i=lo(e),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?t?"rect":"g":"div",a=t!==2?0:100,l=t===3?100:0,d="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",f=bt.createElementNS?bt.createElementNS(n.replace(/^https/,"http"),s):bt.createElement(s);return t&&(i?(Qn||(Qn=r(e)),f.setAttribute("width",.01),f.setAttribute("height",.01),f.setAttribute("transform","translate("+a+","+l+")"),Qn.appendChild(f)):(on||(on=r(e),on.style.cssText=d),f.style.cssText=d+"width:0.1px;height:0.1px;top:"+l+"px;left:"+a+"px",on.appendChild(f))),f}throw"Need document and parent."},nd=function(e){for(var t=new fi,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},sd=function(e){var t=e.getCTM(),i;return t||(i=e.style[ot],e.style[ot]="none",e.appendChild(_n),t=_n.getCTM(),e.removeChild(_n),i?e.style[ot]=i:e.style.removeProperty(ot.replace(/([A-Z])/g,"-$1").toLowerCase())),t||_s.clone()},rd=function(e,t){var i=lo(e),n=e===i,s=i?Fl:Rl,a=e.parentNode,l=a&&!i&&a.shadowRoot&&a.shadowRoot.appendChild?a.shadowRoot:a,d,f,h,o,c,u;if(e===ui)return e;if(s.length||s.push($s(e,1),$s(e,2),$s(e,3)),d=i?Qn:on,i)n?(h=sd(e),o=-h.e/h.a,c=-h.f/h.d,f=_s):e.getBBox?(h=e.getBBox(),f=e.transform?e.transform.baseVal:{},f=f.numberOfItems?f.numberOfItems>1?nd(f):f.getItem(0).matrix:_s,o=f.a*h.x+f.c*h.y,c=f.b*h.x+f.d*h.y):(f=new fi,o=c=0),(n?i:a).appendChild(d),d.setAttribute("transform","matrix("+f.a+","+f.b+","+f.c+","+f.d+","+(f.e+o)+","+(f.f+c)+")");else{if(o=c=0,Pl)for(f=e.offsetParent,h=e;h&&(h=h.parentNode)&&h!==f&&h.parentNode;)(ui.getComputedStyle(h)[ot]+"").length>4&&(o=h.offsetLeft,c=h.offsetTop,h=0);if(u=ui.getComputedStyle(e),u.position!=="absolute"&&u.position!=="fixed")for(f=e.offsetParent;a&&a!==f;)o+=a.scrollLeft||0,c+=a.scrollTop||0,a=a.parentNode;h=d.style,h.top=e.offsetTop-c+"px",h.left=e.offsetLeft-o+"px",h[ot]=u[ot],h[mr]=u[mr],h.position=u.position==="fixed"?"fixed":"absolute",l.appendChild(d)}return d},Ys=function(e,t,i,n,s,a,l){return e.a=t,e.b=i,e.c=n,e.d=s,e.e=a,e.f=l,e},fi=function(){function r(t,i,n,s,a,l){t===void 0&&(t=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=0),l===void 0&&(l=0),Ys(this,t,i,n,s,a,l)}var e=r.prototype;return e.inverse=function(){var i=this.a,n=this.b,s=this.c,a=this.d,l=this.e,d=this.f,f=i*a-n*s||1e-10;return Ys(this,a/f,-n/f,-s/f,i/f,(s*d-a*l)/f,-(i*d-n*l)/f)},e.multiply=function(i){var n=this.a,s=this.b,a=this.c,l=this.d,d=this.e,f=this.f,h=i.a,o=i.c,c=i.b,u=i.d,_=i.e,p=i.f;return Ys(this,h*n+c*a,h*s+c*l,o*n+u*a,o*s+u*l,d+_*n+p*a,f+_*s+p*l)},e.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var n=this.a,s=this.b,a=this.c,l=this.d,d=this.e,f=this.f;return n===i.a&&s===i.b&&a===i.c&&l===i.d&&d===i.e&&f===i.f},e.apply=function(i,n){n===void 0&&(n={});var s=i.x,a=i.y,l=this.a,d=this.b,f=this.c,h=this.d,o=this.e,c=this.f;return n.x=s*l+a*f+o||0,n.y=s*d+a*h+c||0,n},r}();function ei(r,e,t,i){if(!r||!r.parentNode||(bt||Ml(r)).documentElement===r)return new fi;var n=Jc(r),s=lo(r),a=s?Fl:Rl,l=rd(r),d=a[0].getBoundingClientRect(),f=a[1].getBoundingClientRect(),h=a[2].getBoundingClientRect(),o=l.parentNode,c=id(r),u=new fi((f.left-d.left)/100,(f.top-d.top)/100,(h.left-d.left)/100,(h.top-d.top)/100,d.left+(c?0:td()),d.top+(c?0:ed()));if(o.removeChild(l),n)for(d=n.length;d--;)f=n[d],f.scaleX=f.scaleY=0,f.renderTransform(1,f);return e?u.inverse():u}function Ko(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function od(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var W,ne,Ge,at,wt,zs,vt,Dr,an,Bt,Nl,yr,Ln,uo,ln,st,un,Jn,kl,Sr,gs=0,Bl=function(){return typeof window<"u"},Ul=function(){return W||Bl()&&(W=window.gsap)&&W.registerPlugin&&W},Ft=function(e){return typeof e=="function"},gn=function(e){return typeof e=="object"},rt=function(e){return typeof e>"u"},es=function(){return!1},mn="transform",Er="transformOrigin",Pt=function(e){return Math.round(e*1e4)/1e4},Qi=Array.isArray,$n=function(e,t){var i=Ge.createElementNS?Ge.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):Ge.createElement(e);return i.style?i:Ge.createElement(e)},Zo=180/Math.PI,mi=1e20,ad=new fi,Mt=Date.now||function(){return new Date().getTime()},ci=[],Pi={},ld=0,ud=/^(?:a|input|textarea|button|select)$/i,Qo=0,Di={},yt={},Gl=function(e,t){var i={},n;for(n in e)i[n]=t?e[n]*t:e[n];return i},cd=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Jo=function r(e,t){for(var i=e.length,n;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),n=e[i].children,n&&n.length&&r(n,t)},Hl=function(){return ci.forEach(function(e){return e()})},dd=function(e){ci.push(e),ci.length===1&&W.ticker.add(Hl)},ea=function(){return!ci.length&&W.ticker.remove(Hl)},ta=function(e){for(var t=ci.length;t--;)ci[t]===e&&ci.splice(t,1);W.to(ea,{overwrite:!0,delay:15,duration:0,onComplete:ea,data:"_draggable"})},fd=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ge=function(e,t,i,n){if(e.addEventListener){var s=Ln[t];n=n||(Nl?{passive:!1}:null),e.addEventListener(s||t,i,n),s&&t!==s&&e.addEventListener(t,i,n)}},he=function(e,t,i,n){if(e.removeEventListener){var s=Ln[t];e.removeEventListener(s||t,i,n),s&&t!==s&&e.removeEventListener(t,i,n)}},je=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},hd=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},pd=function r(e){uo=e.touches&&gs<e.touches.length,he(e.target,"touchend",r)},ia=function(e){uo=e.touches&&gs<e.touches.length,ge(e.target,"touchend",pd)},Mi=function(e){return ne.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Fi=function(e){return ne.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},na=function r(e,t){ge(e,"scroll",t),Vi(e.parentNode)||r(e.parentNode,t)},sa=function r(e,t){he(e,"scroll",t),Vi(e.parentNode)||r(e.parentNode,t)},Vi=function(e){return!e||e===at||e.nodeType===9||e===Ge.body||e===ne||!e.nodeType||!e.parentNode},ra=function(e,t){var i=t==="x"?"Width":"Height",n="scroll"+i,s="client"+i;return Math.max(0,Vi(e)?Math.max(at[n],wt[n])-(ne["inner"+i]||at[s]||wt[s]):e[n]-e[s])},Ws=function r(e,t){var i=ra(e,"x"),n=ra(e,"y");Vi(e)?e=yt:r(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=n,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},Xs=function(e,t,i){var n=e.style;n&&(rt(n[t])&&(t=an(t,e)||t),i==null?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},On=function(e){return ne.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},Qt={},yi=function(e){if(e===ne)return Qt.left=Qt.top=0,Qt.width=Qt.right=at.clientWidth||e.innerWidth||wt.clientWidth||0,Qt.height=Qt.bottom=(e.innerHeight||0)-20<at.clientHeight?at.clientHeight:e.innerHeight||wt.clientHeight||0,Qt;var t=e.ownerDocument||Ge,i=rt(e.pageX)?!e.nodeType&&!rt(e.left)&&!rt(e.top)?e:Bt(e)[0].getBoundingClientRect():{left:e.pageX-Fi(t),top:e.pageY-Mi(t),right:e.pageX-Fi(t)+1,bottom:e.pageY-Mi(t)+1};return rt(i.right)&&!rt(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):rt(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},ce=function(e,t,i){var n=e.vars,s=n[i],a=e._listeners[t],l;return Ft(s)&&(l=s.apply(n.callbackScope||e,n[i+"Params"]||[e.pointerEvent])),a&&e.dispatchEvent(t)===!1&&(l=!1),l},oa=function(e,t){var i=Bt(e)[0],n,s,a;return!i.nodeType&&i!==ne?rt(e.left)?(s=e.min||e.minX||e.minRotation||0,n=e.min||e.minY||0,{left:s,top:n,width:(e.max||e.maxX||e.maxRotation||0)-s,height:(e.max||e.maxY||0)-n}):(a={x:0,y:0},{left:e.left-a.x,top:e.top-a.y,width:e.width,height:e.height}):_d(i,t)},Ke={},_d=function(e,t){t=Bt(t)[0];var i=e.getBBox&&e.ownerSVGElement,n=e.ownerDocument||Ge,s,a,l,d,f,h,o,c,u,_,p,g,m;if(e===ne)l=Mi(n),s=Fi(n),a=s+(n.documentElement.clientWidth||e.innerWidth||n.body.clientWidth||0),d=l+((e.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight||n.body.clientHeight||0);else{if(t===ne||rt(t))return e.getBoundingClientRect();s=l=0,i?(_=e.getBBox(),p=_.width,g=_.height):(e.viewBox&&(_=e.viewBox.baseVal)&&(s=_.x||0,l=_.y||0,p=_.width,g=_.height),p||(m=On(e),_=m.boxSizing==="border-box",p=(parseFloat(m.width)||e.clientWidth||0)+(_?0:parseFloat(m.borderLeftWidth)+parseFloat(m.borderRightWidth)),g=(parseFloat(m.height)||e.clientHeight||0)+(_?0:parseFloat(m.borderTopWidth)+parseFloat(m.borderBottomWidth)))),a=p,d=g}return e===t?{left:s,top:l,width:a-s,height:d-l}:(f=ei(t,!0).multiply(ei(e)),h=f.apply({x:s,y:l}),o=f.apply({x:a,y:l}),c=f.apply({x:a,y:d}),u=f.apply({x:s,y:d}),s=Math.min(h.x,o.x,c.x,u.x),l=Math.min(h.y,o.y,c.y,u.y),{left:s,top:l,width:Math.max(h.x,o.x,c.x,u.x)-s,height:Math.max(h.y,o.y,c.y,u.y)-l})},qs=function(e,t,i,n,s,a){var l={},d,f,h;if(t)if(s!==1&&t instanceof Array){if(l.end=d=[],h=t.length,gn(t[0]))for(f=0;f<h;f++)d[f]=Gl(t[f],s);else for(f=0;f<h;f++)d[f]=t[f]*s;i+=1.1,n-=1.1}else Ft(t)?l.end=function(o){var c=t.call(e,o),u,_;if(s!==1)if(gn(c)){u={};for(_ in c)u[_]=c[_]*s;c=u}else c*=s;return c}:l.end=t;return(i||i===0)&&(l.max=i),(n||n===0)&&(l.min=n),a&&(l.velocity=0),l},gd=function r(e){var t;return!e||!e.getAttribute||e===wt?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(ud.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:r(e.parentNode)},Yn=function(e,t){for(var i=e.length,n;i--;)n=e[i],n.ondragstart=n.onselectstart=t?null:es,W.set(n,{lazy:!0,userSelect:t?"text":"none"})},md=function r(e){if(On(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return r(e)},Vl,Tr,Dd=function(e,t){e=W.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),n=i.style,s=e.firstChild,a=0,l=0,d=e.scrollTop,f=e.scrollLeft,h=e.scrollWidth,o=e.scrollHeight,c=0,u=0,_=0,p,g,m,D,S,A;Vl&&t.force3D!==!1?(S="translate3d(",A="px,0px)"):mn&&(S="translate(",A="px)"),this.scrollTop=function(T,C){if(!arguments.length)return-this.top();this.top(-T,C)},this.scrollLeft=function(T,C){if(!arguments.length)return-this.left();this.left(-T,C)},this.left=function(T,C){if(!arguments.length)return-(e.scrollLeft+l);var I=e.scrollLeft-f,b=l;if((I>2||I<-2)&&!C){f=e.scrollLeft,W.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-f),t.onKill&&t.onKill();return}T=-T,T<0?(l=T-.5|0,T=0):T>u?(l=T-u|0,T=u):l=0,(l||b)&&(this._skip||(n[mn]=S+-l+"px,"+-a+A),l+c>=0&&(n.paddingRight=l+c+"px")),e.scrollLeft=T|0,f=e.scrollLeft},this.top=function(T,C){if(!arguments.length)return-(e.scrollTop+a);var I=e.scrollTop-d,b=a;if((I>2||I<-2)&&!C){d=e.scrollTop,W.killTweensOf(this,{top:1,scrollTop:1}),this.top(-d),t.onKill&&t.onKill();return}T=-T,T<0?(a=T-.5|0,T=0):T>_?(a=T-_|0,T=_):a=0,(a||b)&&(this._skip||(n[mn]=S+-l+"px,"+-a+A)),e.scrollTop=T|0,d=e.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return u},this.disable=function(){for(s=i.firstChild;s;)D=s.nextSibling,e.appendChild(s),s=D;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(s=e.firstChild,s!==i){for(;s;)D=s.nextSibling,i.appendChild(s),s=D;e.appendChild(i),this.calibrate()}},this.calibrate=function(T){var C=e.clientWidth===p,I,b,E;d=e.scrollTop,f=e.scrollLeft,!(C&&e.clientHeight===g&&i.offsetHeight===m&&h===e.scrollWidth&&o===e.scrollHeight&&!T)&&((a||l)&&(b=this.left(),E=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),I=On(e),(!C||T)&&(n.display="block",n.width="auto",n.paddingRight="0px",c=Math.max(0,e.scrollWidth-e.clientWidth),c&&(c+=parseFloat(I.paddingLeft)+(Tr?parseFloat(I.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=c+"px",Tr&&(n.paddingBottom=I.paddingBottom),p=e.clientWidth,g=e.clientHeight,h=e.scrollWidth,o=e.scrollHeight,u=e.scrollWidth-p,_=e.scrollHeight-g,m=i.offsetHeight,n.display="block",(b||E)&&(this.left(b),this.top(E)))},this.content=i,this.element=e,this._skip=!1,this.enable()},js=function(e){if(Bl()&&document.body){var t=window&&window.navigator;ne=window,Ge=document,at=Ge.documentElement,wt=Ge.body,zs=$n("div"),Jn=!!window.PointerEvent,vt=$n("div"),vt.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",un=vt.style.cursor==="grab"?"grab":"move",ln=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,yr="ontouchstart"in at&&"orientation"in ne||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),Tr=function(){var i=$n("div"),n=$n("div"),s=n.style,a=wt,l;return s.display="inline-block",s.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),a.appendChild(i),l=n.offsetHeight+18>i.scrollHeight,a.removeChild(i),l}(),Ln=function(i){for(var n=i.split(","),s=("onpointerdown"in zs?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in zs?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),a={},l=4;--l>-1;)a[n[l]]=s[l],a[s[l]]=n[l];try{at.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Nl=1}}))}catch{}return a}("touchstart,touchmove,touchend,touchcancel"),ge(Ge,"touchcancel",es),ge(ne,"touchmove",es),wt&&wt.addEventListener("touchstart",es),ge(Ge,"contextmenu",function(){for(var i in Pi)Pi[i].isPressed&&Pi[i].endDrag()}),W=Dr=Ul()}W?(st=W.plugins.inertia,kl=W.core.context||function(){},an=W.utils.checkPrefix,mn=an(mn),Er=an(Er),Bt=W.utils.toArray,Sr=W.core.getStyleSaver,Vl=!!an("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},yd=function(){function r(t){this._listeners={},this.target=t||this}var e=r.prototype;return e.addEventListener=function(i,n){var s=this._listeners[i]||(this._listeners[i]=[]);~s.indexOf(n)||s.push(n)},e.removeEventListener=function(i,n){var s=this._listeners[i],a=s&&s.indexOf(n);a>=0&&s.splice(a,1)},e.dispatchEvent=function(i){var n=this,s;return(this._listeners[i]||[]).forEach(function(a){return a.call(n,{type:i,target:n.target})===!1&&(s=!1)}),s},r}(),Rn=function(r){od(e,r);function e(t,i){var n;n=r.call(this)||this,Dr||js(1),t=Bt(t)[0],n.styles=Sr&&Sr(t,"transform,left,top"),st||(st=W.plugins.inertia),n.vars=i=Gl(i||{}),n.target=t,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,W.getProperty(t,"x");var s=(i.type||"x,y").toLowerCase(),a=~s.indexOf("x")||~s.indexOf("y"),l=s.indexOf("rotation")!==-1,d=l?"rotation":a?"x":"left",f=a?"y":"top",h=!!(~s.indexOf("x")||~s.indexOf("left")||s==="scroll"),o=!!(~s.indexOf("y")||~s.indexOf("top")||s==="scroll"),c=i.minimumMovement||2,u=Ko(n),_=Bt(i.trigger||i.handle||t),p={},g=0,m=!1,D=i.autoScrollMarginTop||40,S=i.autoScrollMarginRight||40,A=i.autoScrollMarginBottom||40,T=i.autoScrollMarginLeft||40,C=i.clickableTest||gd,I=0,b=t._gsap||W.core.getCache(t),E=md(t),R=function(y,L){return parseFloat(b.get(t,y,L))},M=t.ownerDocument||Ge,U,x,Y,q,B,H,se,et,lt,z,j,Q,Z,ze,We,Wi,De,Is,Lt,Ot,Xt,Xi,Se,J,wo,Xe,tt,Ls,Os,Co,ke,Io,Un,Lo=function(y){return je(y),y.stopImmediatePropagation&&y.stopImmediatePropagation(),!1},ut=function k(y){if(u.autoScroll&&u.isDragging&&(m||De)){var L=t,v=u.autoScroll*15,O,P,F,V,N,ee,K,te;for(m=!1,yt.scrollTop=ne.pageYOffset!=null?ne.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,yt.scrollLeft=ne.pageXOffset!=null?ne.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft,V=u.pointerX-yt.scrollLeft,N=u.pointerY-yt.scrollTop;L&&!P;)P=Vi(L.parentNode),O=P?yt:L.parentNode,F=P?{bottom:Math.max(at.clientHeight,ne.innerHeight||0),right:Math.max(at.clientWidth,ne.innerWidth||0),left:0,top:0}:O.getBoundingClientRect(),ee=K=0,o&&(te=O._gsMaxScrollY-O.scrollTop,te<0?K=te:N>F.bottom-A&&te?(m=!0,K=Math.min(te,v*(1-Math.max(0,F.bottom-N)/A)|0)):N<F.top+D&&O.scrollTop&&(m=!0,K=-Math.min(O.scrollTop,v*(1-Math.max(0,N-F.top)/D)|0)),K&&(O.scrollTop+=K)),h&&(te=O._gsMaxScrollX-O.scrollLeft,te<0?ee=te:V>F.right-S&&te?(m=!0,ee=Math.min(te,v*(1-Math.max(0,F.right-V)/S)|0)):V<F.left+T&&O.scrollLeft&&(m=!0,ee=-Math.min(O.scrollLeft,v*(1-Math.max(0,V-F.left)/T)|0)),ee&&(O.scrollLeft+=ee)),P&&(ee||K)&&(ne.scrollTo(O.scrollLeft,O.scrollTop),Ki(u.pointerX+ee,u.pointerY+K)),L=O}if(De){var ue=u.x,be=u.y;l?(u.deltaX=ue-parseFloat(b.rotation),u.rotation=ue,b.rotation=ue+"deg",b.renderTransform(1,b)):x?(o&&(u.deltaY=be-x.top(),x.top(be)),h&&(u.deltaX=ue-x.left(),x.left(ue))):a?(o&&(u.deltaY=be-parseFloat(b.y),b.y=be+"px"),h&&(u.deltaX=ue-parseFloat(b.x),b.x=ue+"px"),b.renderTransform(1,b)):(o&&(u.deltaY=be-parseFloat(t.style.top||0),t.style.top=be+"px"),h&&(u.deltaX=ue-parseFloat(t.style.left||0),t.style.left=ue+"px")),et&&!y&&!Ls&&(Ls=!0,ce(u,"drag","onDrag")===!1&&(h&&(u.x-=u.deltaX),o&&(u.y-=u.deltaY),k(!0)),Ls=!1)}De=!1},qt=function(y,L){var v=u.x,O=u.y,P,F;t._gsap||(b=W.core.getCache(t)),b.uncache&&W.getProperty(t,"x"),a?(u.x=parseFloat(b.x),u.y=parseFloat(b.y)):l?u.x=u.rotation=parseFloat(b.rotation):x?(u.y=x.top(),u.x=x.left()):(u.y=parseFloat(t.style.top||(F=On(t))&&F.top)||0,u.x=parseFloat(t.style.left||(F||{}).left)||0),(Lt||Ot||Xt)&&!L&&(u.isDragging||u.isThrowing)&&(Xt&&(Di.x=u.x,Di.y=u.y,P=Xt(Di),P.x!==u.x&&(u.x=P.x,De=!0),P.y!==u.y&&(u.y=P.y,De=!0)),Lt&&(P=Lt(u.x),P!==u.x&&(u.x=P,l&&(u.rotation=P),De=!0)),Ot&&(P=Ot(u.y),P!==u.y&&(u.y=P),De=!0)),De&&ut(!0),y||(u.deltaX=u.x-v,u.deltaY=u.y-O,ce(u,"throwupdate","onThrowUpdate"))},xs=function(y,L,v,O){return L==null&&(L=-1e20),v==null&&(v=mi),Ft(y)?function(P){var F=u.isPressed?1-u.edgeResistance:1;return y.call(u,(P>v?v+(P-v)*F:P<L?L+(P-L)*F:P)*O)*O}:Qi(y)?function(P){for(var F=y.length,V=0,N=mi,ee,K;--F>-1;)ee=y[F],K=ee-P,K<0&&(K=-K),K<N&&ee>=L&&ee<=v&&(V=F,N=K);return y[V]}:isNaN(y)?function(P){return P}:function(){return y*O}},Ru=function(y,L,v,O,P,F,V){return F=F&&F<mi?F*F:mi,Ft(y)?function(N){var ee=u.isPressed?1-u.edgeResistance:1,K=N.x,te=N.y,ue,be,gt;return N.x=K=K>v?v+(K-v)*ee:K<L?L+(K-L)*ee:K,N.y=te=te>P?P+(te-P)*ee:te<O?O+(te-O)*ee:te,ue=y.call(u,N),ue!==N&&(N.x=ue.x,N.y=ue.y),V!==1&&(N.x*=V,N.y*=V),F<mi&&(be=N.x-K,gt=N.y-te,be*be+gt*gt>F&&(N.x=K,N.y=te)),N}:Qi(y)?function(N){for(var ee=y.length,K=0,te=mi,ue,be,gt,qe;--ee>-1;)gt=y[ee],ue=gt.x-N.x,be=gt.y-N.y,qe=ue*ue+be*be,qe<te&&(K=ee,te=qe);return te<=F?y[K]:N}:function(N){return N}},Ps=function(){var y,L,v,O;se=!1,x?(x.calibrate(),u.minX=j=-x.maxScrollLeft(),u.minY=Z=-x.maxScrollTop(),u.maxX=z=u.maxY=Q=0,se=!0):i.bounds&&(y=oa(i.bounds,t.parentNode),l?(u.minX=j=y.left,u.maxX=z=y.left+y.width,u.minY=Z=u.maxY=Q=0):!rt(i.bounds.maxX)||!rt(i.bounds.maxY)?(y=i.bounds,u.minX=j=y.minX,u.minY=Z=y.minY,u.maxX=z=y.maxX,u.maxY=Q=y.maxY):(L=oa(t,t.parentNode),u.minX=j=Math.round(R(d,"px")+y.left-L.left),u.minY=Z=Math.round(R(f,"px")+y.top-L.top),u.maxX=z=Math.round(j+(y.width-L.width)),u.maxY=Q=Math.round(Z+(y.height-L.height))),j>z&&(u.minX=z,u.maxX=z=j,j=u.minX),Z>Q&&(u.minY=Q,u.maxY=Q=Z,Z=u.minY),l&&(u.minRotation=j,u.maxRotation=z),se=!0),i.liveSnap&&(v=i.liveSnap===!0?i.snap||{}:i.liveSnap,O=Qi(v)||Ft(v),l?(Lt=xs(O?v:v.rotation,j,z,1),Ot=null):v.points?Xt=Ru(O?v:v.points,j,z,Z,Q,v.radius,x?-1:1):(h&&(Lt=xs(O?v:v.x||v.left||v.scrollLeft,j,z,x?-1:1)),o&&(Ot=xs(O?v:v.y||v.top||v.scrollTop,Z,Q,x?-1:1))))},Nu=function(){u.isThrowing=!1,ce(u,"throwcomplete","onThrowComplete")},ku=function(){u.isThrowing=!1},Ms=function(y,L){var v,O,P,F;y&&st?(y===!0&&(v=i.snap||i.liveSnap||{},O=Qi(v)||Ft(v),y={resistance:(i.throwResistance||i.resistance||1e3)/(l?10:1)},l?y.rotation=qs(u,O?v:v.rotation,z,j,1,L):(h&&(y[d]=qs(u,O?v:v.points||v.x||v.left,z,j,x?-1:1,L||u.lockedAxis==="x")),o&&(y[f]=qs(u,O?v:v.points||v.y||v.top,Q,Z,x?-1:1,L||u.lockedAxis==="y")),(v.points||Qi(v)&&gn(v[0]))&&(y.linkedProps=d+","+f,y.radius=v.radius))),u.isThrowing=!0,F=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-u.edgeResistance+.2:i.overshootTolerance,y.duration||(y.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?F===0||gn(y)&&y.resistance>1e3?0:.5:i.minDuration,overshoot:F}),u.tween=P=W.to(x||t,{inertia:y,data:"_draggable",inherit:!1,onComplete:Nu,onInterrupt:ku,onUpdate:i.fastMode?ce:qt,onUpdateParams:i.fastMode?[u,"onthrowupdate","onThrowUpdate"]:v&&v.radius?[!1,!0]:[]}),i.fastMode||(x&&(x._skip=!0),P.render(1e9,!0,!0),qt(!0,!0),u.endX=u.x,u.endY=u.y,l&&(u.endRotation=u.x),P.play(0),qt(!0,!0),x&&(x._skip=!1))):se&&u.applyBounds()},Oo=function(y){var L=J,v;J=ei(t.parentNode,!0),y&&u.isPressed&&!J.equals(L||new fi)&&(v=L.inverse().apply({x:Y,y:q}),J.apply(v,v),Y=v.x,q=v.y),J.equals(ad)&&(J=null)},Gn=function(){var y=1-u.edgeResistance,L=E?Fi(M):0,v=E?Mi(M):0,O,P,F;a&&(b.x=R(d,"px")+"px",b.y=R(f,"px")+"px",b.renderTransform()),Oo(!1),Ke.x=u.pointerX-L,Ke.y=u.pointerY-v,J&&J.apply(Ke,Ke),Y=Ke.x,q=Ke.y,De&&(Ki(u.pointerX,u.pointerY),ut(!0)),Io=ei(t),x?(Ps(),H=x.top(),B=x.left()):(qi()?(qt(!0,!0),Ps()):u.applyBounds(),l?(O=t.ownerSVGElement?[b.xOrigin-t.getBBox().x,b.yOrigin-t.getBBox().y]:(On(t)[Er]||"0 0").split(" "),Wi=u.rotationOrigin=ei(t).apply({x:parseFloat(O[0])||0,y:parseFloat(O[1])||0}),qt(!0,!0),P=u.pointerX-Wi.x-L,F=Wi.y-u.pointerY+v,B=u.x,H=u.y=Math.atan2(F,P)*Zo):(H=R(f,"px"),B=R(d,"px"))),se&&y&&(B>z?B=z+(B-z)/y:B<j&&(B=j-(j-B)/y),l||(H>Q?H=Q+(H-Q)/y:H<Z&&(H=Z-(Z-H)/y))),u.startX=B=Pt(B),u.startY=H=Pt(H)},qi=function(){return u.tween&&u.tween.isActive()},Bu=function(){vt.parentNode&&!qi()&&!u.isDragging&&vt.parentNode.removeChild(vt)},ji=function(y,L){var v;if(!U||u.isPressed||!y||(y.type==="mousedown"||y.type==="pointerdown")&&!L&&Mt()-I<30&&Ln[u.pointerEvent.type]){ke&&y&&U&&je(y);return}if(wo=qi(),Un=!1,u.pointerEvent=y,Ln[y.type]?(Se=~y.type.indexOf("touch")?y.currentTarget||y.target:M,ge(Se,"touchend",it),ge(Se,"touchmove",jt),ge(Se,"touchcancel",it),ge(M,"touchstart",ia)):(Se=null,ge(M,"mousemove",jt)),tt=null,(!Jn||!Se)&&(ge(M,"mouseup",it),y&&y.target&&ge(y.target,"mouseup",it)),Xi=C.call(u,y.target)&&i.dragClickables===!1&&!L,Xi){ge(y.target,"change",it),ce(u,"pressInit","onPressInit"),ce(u,"press","onPress"),Yn(_,!0),ke=!1;return}if(Xe=!Se||h===o||u.vars.allowNativeTouchScrolling===!1||u.vars.allowContextMenu&&y&&(y.ctrlKey||y.which>2)?!1:h?"y":"x",ke=!Xe&&!u.allowEventDefault,ke&&(je(y),ge(ne,"touchforcechange",je)),y.changedTouches?(y=ze=y.changedTouches[0],We=y.identifier):y.pointerId?We=y.pointerId:ze=We=null,gs++,dd(ut),q=u.pointerY=y.pageY,Y=u.pointerX=y.pageX,ce(u,"pressInit","onPressInit"),(Xe||u.autoScroll)&&Ws(t.parentNode),t.parentNode&&u.autoScroll&&!x&&!l&&t.parentNode._gsMaxScrollX&&!vt.parentNode&&!t.getBBox&&(vt.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(vt)),Gn(),u.tween&&u.tween.kill(),u.isThrowing=!1,W.killTweensOf(x||t,p,!0),x&&W.killTweensOf(t,{scrollTo:1},!0),u.tween=u.lockedAxis=null,(i.zIndexBoost||!l&&!x&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),u.isPressed=!0,et=!!(i.onDrag||u._listeners.drag),lt=!!(i.onMove||u._listeners.move),i.cursor!==!1||i.activeCursor)for(v=_.length;--v>-1;)W.set(_[v],{cursor:i.activeCursor||i.cursor||(un==="grab"?"grabbing":un)});ce(u,"press","onPress")},jt=function(y){var L=y,v,O,P,F,V,N;if(!U||uo||!u.isPressed||!y){ke&&y&&U&&je(y);return}if(u.pointerEvent=y,v=y.changedTouches,v){if(y=v[0],y!==ze&&y.identifier!==We){for(F=v.length;--F>-1&&(y=v[F]).identifier!==We&&y.target!==t;);if(F<0)return}}else if(y.pointerId&&We&&y.pointerId!==We)return;if(Se&&Xe&&!tt&&(Ke.x=y.pageX-(E?Fi(M):0),Ke.y=y.pageY-(E?Mi(M):0),J&&J.apply(Ke,Ke),O=Ke.x,P=Ke.y,V=Math.abs(O-Y),N=Math.abs(P-q),(V!==N&&(V>c||N>c)||ln&&Xe===tt)&&(tt=V>N&&h?"x":"y",Xe&&tt!==Xe&&ge(ne,"touchforcechange",je),u.vars.lockAxisOnTouchScroll!==!1&&h&&o&&(u.lockedAxis=tt==="x"?"y":"x",Ft(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,L)),ln&&Xe===tt))){it(L);return}!u.allowEventDefault&&(!Xe||tt&&Xe!==tt)&&L.cancelable!==!1?(je(L),ke=!0):ke&&(ke=!1),u.autoScroll&&(m=!0),Ki(y.pageX,y.pageY,lt)},Ki=function(y,L,v){var O=1-u.dragResistance,P=1-u.edgeResistance,F=u.pointerX,V=u.pointerY,N=H,ee=u.x,K=u.y,te=u.endX,ue=u.endY,be=u.endRotation,gt=De,qe,xt,Ee,fe,Fs,nt;u.pointerX=y,u.pointerY=L,E&&(y-=Fi(M),L-=Mi(M)),l?(fe=Math.atan2(Wi.y-L,y-Wi.x)*Zo,Fs=u.y-fe,Fs>180?(H-=360,u.y=fe):Fs<-180&&(H+=360,u.y=fe),u.x!==B||Math.max(Math.abs(Y-y),Math.abs(q-L))>c?(u.y=fe,Ee=B+(H-fe)*O):Ee=B):(J&&(nt=y*J.a+L*J.c+J.e,L=y*J.b+L*J.d+J.f,y=nt),xt=L-q,qe=y-Y,xt<c&&xt>-c&&(xt=0),qe<c&&qe>-c&&(qe=0),(u.lockAxis||u.lockedAxis)&&(qe||xt)&&(nt=u.lockedAxis,nt||(u.lockedAxis=nt=h&&Math.abs(qe)>Math.abs(xt)?"y":o?"x":null,nt&&Ft(u.vars.onLockAxis)&&u.vars.onLockAxis.call(u,u.pointerEvent)),nt==="y"?xt=0:nt==="x"&&(qe=0)),Ee=Pt(B+qe*O),fe=Pt(H+xt*O)),(Lt||Ot||Xt)&&(u.x!==Ee||u.y!==fe&&!l)&&(Xt&&(Di.x=Ee,Di.y=fe,nt=Xt(Di),Ee=Pt(nt.x),fe=Pt(nt.y)),Lt&&(Ee=Pt(Lt(Ee))),Ot&&(fe=Pt(Ot(fe)))),se&&(Ee>z?Ee=z+Math.round((Ee-z)*P):Ee<j&&(Ee=j+Math.round((Ee-j)*P)),l||(fe>Q?fe=Math.round(Q+(fe-Q)*P):fe<Z&&(fe=Math.round(Z+(fe-Z)*P)))),(u.x!==Ee||u.y!==fe&&!l)&&(l?(u.endRotation=u.x=u.endX=Ee,De=!0):(o&&(u.y=u.endY=fe,De=!0),h&&(u.x=u.endX=Ee,De=!0)),!v||ce(u,"move","onMove")!==!1?!u.isDragging&&u.isPressed&&(u.isDragging=Un=!0,ce(u,"dragstart","onDragStart")):(u.pointerX=F,u.pointerY=V,H=N,u.x=ee,u.y=K,u.endX=te,u.endY=ue,u.endRotation=be,De=gt))},it=function k(y,L){if(!U||!u.isPressed||y&&We!=null&&!L&&(y.pointerId&&y.pointerId!==We&&y.target!==t||y.changedTouches&&!hd(y.changedTouches,We))){ke&&y&&U&&je(y);return}u.isPressed=!1;var v=y,O=u.isDragging,P=u.vars.allowContextMenu&&y&&(y.ctrlKey||y.which>2),F=W.delayedCall(.001,Bu),V,N,ee,K,te;if(Se?(he(Se,"touchend",k),he(Se,"touchmove",jt),he(Se,"touchcancel",k),he(M,"touchstart",ia)):he(M,"mousemove",jt),he(ne,"touchforcechange",je),(!Jn||!Se)&&(he(M,"mouseup",k),y&&y.target&&he(y.target,"mouseup",k)),De=!1,O&&(g=Qo=Mt(),u.isDragging=!1),ta(ut),Xi&&!P){y&&(he(y.target,"change",k),u.pointerEvent=v),Yn(_,!1),ce(u,"release","onRelease"),ce(u,"click","onClick"),Xi=!1;return}for(N=_.length;--N>-1;)Xs(_[N],"cursor",i.cursor||(i.cursor!==!1?un:null));if(gs--,y){if(V=y.changedTouches,V&&(y=V[0],y!==ze&&y.identifier!==We)){for(N=V.length;--N>-1&&(y=V[N]).identifier!==We&&y.target!==t;);if(N<0&&!L)return}u.pointerEvent=v,u.pointerX=y.pageX,u.pointerY=y.pageY}return P&&v?(je(v),ke=!0,ce(u,"release","onRelease")):v&&!O?(ke=!1,wo&&(i.snap||i.bounds)&&Ms(i.inertia||i.throwProps),ce(u,"release","onRelease"),(!ln||v.type!=="touchmove")&&v.type.indexOf("cancel")===-1&&(ce(u,"click","onClick"),Mt()-I<300&&ce(u,"doubleclick","onDoubleClick"),K=v.target||t,I=Mt(),te=function(){I!==Os&&u.enabled()&&!u.isPressed&&!v.defaultPrevented&&(K.click?K.click():M.createEvent&&(ee=M.createEvent("MouseEvents"),ee.initMouseEvent("click",!0,!0,ne,1,u.pointerEvent.screenX,u.pointerEvent.screenY,u.pointerX,u.pointerY,!1,!1,!1,!1,0,null),K.dispatchEvent(ee)))},!ln&&!v.defaultPrevented&&W.delayedCall(.05,te))):(Ms(i.inertia||i.throwProps),!u.allowEventDefault&&v&&(i.dragClickables!==!1||!C.call(u,v.target))&&O&&(!Xe||tt&&Xe===tt)&&v.cancelable!==!1?(ke=!0,je(v)):ke=!1,ce(u,"release","onRelease")),qi()&&F.duration(u.tween.duration()),O&&ce(u,"dragend","onDragEnd"),!0},Hn=function(y){if(y&&u.isDragging&&!x){var L=y.target||t.parentNode,v=L.scrollLeft-L._gsScrollX,O=L.scrollTop-L._gsScrollY;(v||O)&&(J?(Y-=v*J.a+O*J.c,q-=O*J.d+v*J.b):(Y-=v,q-=O),L._gsScrollX+=v,L._gsScrollY+=O,Ki(u.pointerX,u.pointerY))}},xo=function(y){var L=Mt(),v=L-I<100,O=L-g<50,P=v&&Os===I,F=u.pointerEvent&&u.pointerEvent.defaultPrevented,V=v&&Co===I,N=y.isTrusted||y.isTrusted==null&&v&&P;if((P||O&&u.vars.suppressClickOnDrag!==!1)&&y.stopImmediatePropagation&&y.stopImmediatePropagation(),v&&!(u.pointerEvent&&u.pointerEvent.defaultPrevented)&&(!P||N&&!V)){N&&P&&(Co=I),Os=I;return}(u.isPressed||O||v)&&(!N||!y.detail||!v||F)&&je(y),!v&&!O&&!Un&&(y&&y.target&&(u.pointerEvent=y),ce(u,"click","onClick"))},Po=function(y){return J?{x:y.x*J.a+y.y*J.c+J.e,y:y.x*J.b+y.y*J.d+J.f}:{x:y.x,y:y.y}};return Is=e.get(t),Is&&Is.kill(),n.startDrag=function(k,y){var L,v,O,P;ji(k||u.pointerEvent,!0),y&&!u.hitTest(k||u.pointerEvent)&&(L=yi(k||u.pointerEvent),v=yi(t),O=Po({x:L.left+L.width/2,y:L.top+L.height/2}),P=Po({x:v.left+v.width/2,y:v.top+v.height/2}),Y-=O.x-P.x,q-=O.y-P.y),u.isDragging||(u.isDragging=Un=!0,ce(u,"dragstart","onDragStart"))},n.drag=jt,n.endDrag=function(k){return it(k||u.pointerEvent,!0)},n.timeSinceDrag=function(){return u.isDragging?0:(Mt()-g)/1e3},n.timeSinceClick=function(){return(Mt()-I)/1e3},n.hitTest=function(k,y){return e.hitTest(u.target,k,y)},n.getDirection=function(k,y){var L=k==="velocity"&&st?k:gn(k)&&!l?"element":"start",v,O,P,F,V,N;return L==="element"&&(V=yi(u.target),N=yi(k)),v=L==="start"?u.x-B:L==="velocity"?st.getVelocity(t,d):V.left+V.width/2-(N.left+N.width/2),l?v<0?"counter-clockwise":"clockwise":(y=y||2,O=L==="start"?u.y-H:L==="velocity"?st.getVelocity(t,f):V.top+V.height/2-(N.top+N.height/2),P=Math.abs(v/O),F=P<1/y?"":v<0?"left":"right",P<y&&(F!==""&&(F+="-"),F+=O<0?"up":"down"),F)},n.applyBounds=function(k,y){var L,v,O,P,F,V;if(k&&i.bounds!==k)return i.bounds=k,u.update(!0,y);if(qt(!0),Ps(),se&&!qi()){if(L=u.x,v=u.y,L>z?L=z:L<j&&(L=j),v>Q?v=Q:v<Z&&(v=Z),(u.x!==L||u.y!==v)&&(O=!0,u.x=u.endX=L,l?u.endRotation=L:u.y=u.endY=v,De=!0,ut(!0),u.autoScroll&&!u.isDragging))for(Ws(t.parentNode),P=t,yt.scrollTop=ne.pageYOffset!=null?ne.pageYOffset:M.documentElement.scrollTop!=null?M.documentElement.scrollTop:M.body.scrollTop,yt.scrollLeft=ne.pageXOffset!=null?ne.pageXOffset:M.documentElement.scrollLeft!=null?M.documentElement.scrollLeft:M.body.scrollLeft;P&&!V;)V=Vi(P.parentNode),F=V?yt:P.parentNode,o&&F.scrollTop>F._gsMaxScrollY&&(F.scrollTop=F._gsMaxScrollY),h&&F.scrollLeft>F._gsMaxScrollX&&(F.scrollLeft=F._gsMaxScrollX),P=F;u.isThrowing&&(O||u.endX>z||u.endX<j||u.endY>Q||u.endY<Z)&&Ms(i.inertia||i.throwProps,O)}return u},n.update=function(k,y,L){if(y&&u.isPressed){var v=ei(t),O=Io.apply({x:u.x-B,y:u.y-H}),P=ei(t.parentNode,!0);P.apply({x:v.e-O.x,y:v.f-O.y},O),u.x-=O.x-P.e,u.y-=O.y-P.f,ut(!0),Gn()}var F=u.x,V=u.y;return Oo(!y),k?u.applyBounds():(De&&L&&ut(!0),qt(!0)),y&&(Ki(u.pointerX,u.pointerY),De&&ut(!0)),u.isPressed&&!y&&(h&&Math.abs(F-u.x)>.01||o&&Math.abs(V-u.y)>.01&&!l)&&Gn(),u.autoScroll&&(Ws(t.parentNode,u.isDragging),m=u.isDragging,ut(!0),sa(t,Hn),na(t,Hn)),u},n.enable=function(k){var y={lazy:!0},L,v,O;if(i.cursor!==!1&&(y.cursor=i.cursor||un),W.utils.checkPrefix("touchCallout")&&(y.touchCallout="none"),k!=="soft"){for(Jo(_,h===o?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"),v=_.length;--v>-1;)O=_[v],Jn||ge(O,"mousedown",ji),ge(O,"touchstart",ji),ge(O,"click",xo,!0),W.set(O,y),O.getBBox&&O.ownerSVGElement&&h!==o&&W.set(O.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":h?"pan-y":"pan-x"}),i.allowContextMenu||ge(O,"contextmenu",Lo);Yn(_,!1)}return na(t,Hn),U=!0,st&&k!=="soft"&&st.track(x||t,a?"x,y":l?"rotation":"top,left"),t._gsDragID=L=t._gsDragID||"d"+ld++,Pi[L]=u,x&&(x.enable(),x.element._gsDragID=L),(i.bounds||l)&&Gn(),i.bounds&&u.applyBounds(),u},n.disable=function(k){for(var y=u.isDragging,L=_.length,v;--L>-1;)Xs(_[L],"cursor",null);if(k!=="soft"){for(Jo(_,null),L=_.length;--L>-1;)v=_[L],Xs(v,"touchCallout",null),he(v,"mousedown",ji),he(v,"touchstart",ji),he(v,"click",xo,!0),he(v,"contextmenu",Lo);Yn(_,!0),Se&&(he(Se,"touchcancel",it),he(Se,"touchend",it),he(Se,"touchmove",jt)),he(M,"mouseup",it),he(M,"mousemove",jt)}return sa(t,Hn),U=!1,st&&k!=="soft"&&(st.untrack(x||t,a?"x,y":l?"rotation":"top,left"),u.tween&&u.tween.kill()),x&&x.disable(),ta(ut),u.isDragging=u.isPressed=Xi=!1,y&&ce(u,"dragend","onDragEnd"),u},n.enabled=function(k,y){return arguments.length?k?u.enable(y):u.disable(y):U},n.kill=function(){return u.isThrowing=!1,u.tween&&u.tween.kill(),u.disable(),W.set(_,{clearProps:"userSelect"}),delete Pi[t._gsDragID],u},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~s.indexOf("scroll")&&(x=n.scrollProxy=new Dd(t,cd({onKill:function(){u.isPressed&&it(null)}},i)),t.style.overflowY=o&&!yr?"auto":"hidden",t.style.overflowX=h&&!yr?"auto":"hidden",t=x.content),l?p.rotation=1:(h&&(p[d]=1),o&&(p[f]=1)),b.force3D="force3D"in i?i.force3D:!0,kl(Ko(n)),n.enable(),n}return e.register=function(i){W=i,js()},e.create=function(i,n){return Dr||js(!0),Bt(i).map(function(s){return new e(s,n)})},e.get=function(i){return Pi[(Bt(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(Mt()-Qo)/1e3},e.hitTest=function(i,n,s){if(i===n)return!1;var a=yi(i),l=yi(n),d=a.top,f=a.left,h=a.right,o=a.bottom,c=a.width,u=a.height,_=l.left>h||l.right<f||l.top>o||l.bottom<d,p,g,m;return _||!s?!_:(m=(s+"").indexOf("%")!==-1,s=parseFloat(s)||0,p={left:Math.max(f,l.left),top:Math.max(d,l.top)},p.width=Math.min(h,l.right)-p.left,p.height=Math.min(o,l.bottom)-p.top,p.width<0||p.height<0?!1:m?(s*=.01,g=p.width*p.height,g>=c*u*s||g>=l.width*l.height*s):p.width>s&&p.height>s)},e}(yd);fd(Rn.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1});Rn.zIndex=1e3;Rn.version="3.13.0";Ul()&&W.registerPlugin(Rn);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var dt,Ar,Dn,$l,Ti,Ci,vr,Yl,zl=function(){return dt||typeof window<"u"&&(dt=window.gsap)},br={},Sd=function(e){return Math.round(e*1e4)/1e4},wr=function(e){return Yl(e).id},cn=function(e){return br[wr(typeof e=="string"?Dn(e)[0]:e)]},aa=function(e){var t=Ti,i;if(e-vr>=.05)for(vr=e;t;)i=t.g(t.t,t.p),(i!==t.v1||e-t.t1>.2)&&(t.v2=t.v1,t.v1=i,t.t2=t.t1,t.t1=e),t=t._next},Ed={deg:360,rad:Math.PI*2},Ks=function(){dt=zl(),dt&&(Dn=dt.utils.toArray,$l=dt.utils.getUnit,Yl=dt.core.getCache,Ci=dt.ticker,Ar=1)},Td=function(e,t,i,n){this.t=e,this.p=t,this.g=e._gsap.get,this.rCap=Ed[i||$l(this.g(e,t))],this.v1=this.v2=0,this.t1=this.t2=Ci.time,n&&(this._next=n,n._prev=this)},Nn=function(){function r(t,i){Ar||Ks(),this.target=Dn(t)[0],br[wr(this.target)]=this,this._props={},i&&this.add(i)}r.register=function(i){dt=i,Ks()};var e=r.prototype;return e.get=function(i,n){var s=this._props[i]||console.warn("Not tracking "+i+" velocity."),a,l,d;return a=parseFloat(n?s.v1:s.g(s.t,s.p)),l=a-parseFloat(s.v2),d=s.rCap,d&&(l=l%d,l!==l%(d/2)&&(l=l<0?l+d:l-d)),Sd(l/((n?s.t1:Ci.time)-s.t2))},e.getAll=function(){var i={},n=this._props,s;for(s in n)i[s]=this.get(s);return i},e.isTracking=function(i){return i in this._props},e.add=function(i,n){i in this._props||(Ti||(Ci.add(aa),vr=Ci.time),Ti=this._props[i]=new Td(this.target,i,n,Ti))},e.remove=function(i){var n=this._props[i],s,a;n&&(s=n._prev,a=n._next,s&&(s._next=a),a?a._prev=s:Ti===n&&(Ci.remove(aa),Ti=0),delete this._props[i])},e.kill=function(i){for(var n in this._props)this.remove(n);i||delete br[wr(this.target)]},r.track=function(i,n,s){Ar||Ks();for(var a=[],l=Dn(i),d=n.split(","),f=(s||"").split(","),h=l.length,o,c;h--;){for(o=cn(l[h])||new r(l[h]),c=d.length;c--;)o.add(d[c],f[c]||f[0]);a.push(o)}return a},r.untrack=function(i,n){var s=(n||"").split(",");Dn(i).forEach(function(a){var l=cn(a);l&&(s.length?s.forEach(function(d){return l.remove(d)}):l.kill(1))})},r.isTracking=function(i,n){var s=cn(i);return s&&s.isTracking(n)},r.getVelocity=function(i,n){var s=cn(i);return!s||!s.isTracking(n)?console.warn("Not tracking velocity of "+n):s.get(n)},r}();Nn.getByTarget=cn;zl()&&dt.registerPlugin(Nn);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var me,Wl,la,Xl,Cr,yn,ql,jl,Kl,co,Zl,Sn,Ir,Ql,ms=Nn.getByTarget,Jl=function(){return me||typeof window<"u"&&(me=window.gsap)&&me.registerPlugin&&me},Ad=function(e){return typeof e=="string"},xn=function(e){return typeof e=="number"},Vt=function(e){return typeof e=="object"},Lr=function(e){return typeof e=="function"},vd=1,eu=Array.isArray,bd=function(e){return e},Ri=1e10,ua=1/Ri,tu=.05,wd=function(e){return Math.round(e*1e4)/1e4},Cd=function(e,t,i){for(var n in t)!(n in e)&&n!==i&&(e[n]=t[n]);return e},Id=function r(e){var t={},i,n;for(i in e)t[i]=Vt(n=e[i])&&!eu(n)?r(n):n;return t},ca=function(e,t,i,n,s){var a=t.length,l=0,d=Ri,f,h,o,c;if(Vt(e)){for(;a--;){f=t[a],h=0;for(o in e)c=f[o]-e[o],h+=c*c;h<d&&(l=a,d=h)}if((s||Ri)<Ri&&s<Math.sqrt(d))return e}else for(;a--;)f=t[a],h=f-e,h<0&&(h=-h),h<d&&f>=n&&f<=i&&(l=a,d=h);return t[l]},iu=function(e,t,i,n,s,a,l){if(e.end==="auto")return e;var d=e.end,f,h;if(i=isNaN(i)?Ri:i,n=isNaN(n)?-1e10:n,Vt(t)){if(f=t.calculated?t:(Lr(d)?d(t,l):ca(t,d,i,n,a))||t,!t.calculated){for(h in f)t[h]=f[h];t.calculated=!0}f=f[s]}else f=Lr(d)?d(t,l):eu(d)?ca(t,d,i,n,a):parseFloat(d);return f>i?f=i:f<n&&(f=n),{max:f,min:f,unitFactor:e.unitFactor}},Ds=function(e,t,i){return isNaN(e[t])?i:+e[t]},fo=function(e,t){return t*tu*e/co},da=function(e,t,i){return Math.abs((t-e)*co/i/tu)},nu={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},su=function(e,t,i,n){if(t.linkedProps){var s=t.linkedProps.split(","),a={},l,d,f,h,o,c;for(l=0;l<s.length;l++)d=s[l],f=t[d],f&&(xn(f.velocity)?h=f.velocity:(o=o||ms(e),h=o&&o.isTracking(d)?o.get(d):0),c=Math.abs(h/Ds(f,"resistance",n)),a[d]=parseFloat(i(e,d))+fo(h,c));return a}},Ld=function(e,t,i,n,s,a){if(i===void 0&&(i=10),n===void 0&&(n=.2),s===void 0&&(s=1),Ad(e)&&(e=Xl(e)[0]),!e)return 0;var l=0,d=Ri,f=t.inertia||t,h=Kl(e).get,o=Ds(f,"resistance",yn.resistance),c,u,_,p,g,m,D,S,A,T;T=su(e,f,h,o);for(c in f)nu[c]||(u=f[c],Vt(u)||(S=S||ms(e),S&&S.isTracking(c)?u=xn(u)?{velocity:u}:{velocity:S.get(c)}:(p=+u||0,_=Math.abs(p/o))),Vt(u)&&(xn(u.velocity)?p=u.velocity:(S=S||ms(e),p=S&&S.isTracking(c)?S.get(c):0),_=Zl(n,i,Math.abs(p/Ds(u,"resistance",o))),g=parseFloat(h(e,c))||0,m=g+fo(p,_),"end"in u&&(u=iu(u,T&&c in T?T:m,u.max,u.min,c,f.radius,p),Sn===t&&(Sn=f=Id(t)),f[c]=Cd(u,f[c],"end")),"max"in u&&m>+u.max+ua?(A=u.unitFactor||yn.unitFactors[c]||1,D=g>u.max&&u.min!==u.max||p*A>-15&&p*A<45?n+(i-n)*.1:da(g,u.max,p),D+s<d&&(d=D+s)):"min"in u&&m<+u.min-ua&&(A=u.unitFactor||yn.unitFactors[c]||1,D=g<u.min&&u.min!==u.max||p*A>-45&&p*A<15?n+(i-n)*.1:da(g,u.min,p),D+s<d&&(d=D+s)),D>l&&(l=D)),_>l&&(l=_));return l>d&&(l=d),l>i?i:l<n?n:l},fa=function(){me=Jl(),me&&(la=me.parseEase,Xl=me.utils.toArray,ql=me.utils.getUnit,Kl=me.core.getCache,Zl=me.utils.clamp,Ir=me.core.getStyleSaver,Ql=me.core.reverting||function(){},Cr=la("power3"),co=Cr(.05),jl=me.core.PropTween,me.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),yn=me.config(),me.registerPlugin(Nn),Wl=1)},ho={version:"3.13.0",name:"inertia",register:function(e){me=e,fa()},init:function(e,t,i,n,s){Wl||fa();var a=ms(e);if(t==="auto"){if(!a){console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");return}t=a.getAll()}this.styles=Ir&&typeof e.style=="object"&&Ir(e),this.target=e,this.tween=i,Sn=t;var l=e._gsap,d=l.get,f=t.duration,h=Vt(f),o=t.preventOvershoot||h&&f.overshoot===0,c=Ds(t,"resistance",yn.resistance),u=xn(f)?f:Ld(e,t,h&&f.max||10,h&&f.min||.2,h&&"overshoot"in f?+f.overshoot:o?0:1),_,p,g,m,D,S,A,T,C;t=Sn,Sn=0,C=su(e,t,d,c);for(_ in t)nu[_]||(p=t[_],Lr(p)&&(p=p(n,e,s)),xn(p)?D=p:Vt(p)&&!isNaN(p.velocity)?D=+p.velocity:a&&a.isTracking(_)?D=a.get(_):console.warn("ERROR: No velocity was defined for "+e+" property: "+_),S=fo(D,u),T=0,g=d(e,_),m=ql(g),g=parseFloat(g),Vt(p)&&(A=g+S,"end"in p&&(p=iu(p,C&&_ in C?C:A,p.max,p.min,_,t.radius,D)),"max"in p&&+p.max<A?o||p.preventOvershoot?S=p.max-g:T=p.max-g-S:"min"in p&&+p.min>A&&(o||p.preventOvershoot?S=p.min-g:T=p.min-g-S)),this._props.push(_),this.styles&&this.styles.save(_),this._pt=new jl(this._pt,e,_,g,0,bd,0,l.set(e,_,this)),this._pt.u=m||0,this._pt.c1=S,this._pt.c2=T);return i.duration(u),vd},render:function(e,t){var i=t._pt;if(e=Cr(t.tween._time/t.tween._dur),e||!Ql())for(;i;)i.set(i.t,i.p,wd(i.s+i.c1*e+i.c2*e*e)+i.u,i.d,e),i=i._next;else t.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(r){return ho[r]=Nn[r]});Jl()&&me.registerPlugin(ho);/*!
 * strings: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Od=/(?:^\s+|\s+$)/g,xd=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function ru(r){var e=r.nodeType,t="";if(e===1||e===9||e===11){if(typeof r.textContent=="string")return r.textContent;for(r=r.firstChild;r;r=r.nextSibling)t+=ru(r)}else if(e===3||e===4)return r.nodeValue;return t}function Or(r,e,t,i,n){for(var s=r.firstChild,a=[],l;s;)s.nodeType===3?(l=(s.nodeValue+"").replace(/^\n+/g,""),i||(l=l.replace(/\s+/g," ")),a.push.apply(a,ou(l,e,t,i,n))):(s.nodeName+"").toLowerCase()==="br"?a[a.length-1]+="<br>":a.push(s.outerHTML),s=s.nextSibling;if(!n)for(l=a.length;l--;)a[l]==="&"&&a.splice(l,1,"&amp;");return a}function ou(r,e,t,i,n){if(r+="",t&&(r=r.trim?r.trim():r.replace(Od,"")),e&&e!=="")return r.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(e);for(var s=[],a=r.length,l=0,d,f;l<a;l++)f=r.charAt(l),(f.charCodeAt(0)>=55296&&f.charCodeAt(0)<=56319||r.charCodeAt(l+1)>=65024&&r.charCodeAt(l+1)<=65039)&&(d=((r.substr(l,12).split(xd)||[])[1]||"").length||2,f=r.substr(l,d),s.emoji=1,l+=d-1),s.push(n?f:f===">"?"&gt;":f==="<"?"&lt;":i&&f===" "&&(r.charAt(l-1)===" "||r.charAt(l+1)===" ")?"&nbsp;":f);return s}/*!
 * TextPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var dn,zn,Pd=function(){return dn||typeof window<"u"&&(dn=window.gsap)&&dn.registerPlugin&&dn},kn={version:"3.13.0",name:"text",init:function(e,t,i){typeof t!="object"&&(t={value:t});var n=e.nodeName.toUpperCase(),s=this,a=t,l=a.newClass,d=a.oldClass,f=a.preserveSpaces,h=a.rtl,o=s.delimiter=t.delimiter||"",c=s.fillChar=t.fillChar||(t.padSpace?"&nbsp;":""),u,_,p,g,m,D,S,A;if(s.svg=e.getBBox&&(n==="TEXT"||n==="TSPAN"),!("innerHTML"in e)&&!s.svg)return!1;if(s.target=e,!("value"in t)){s.text=s.original=[""];return}for(p=Or(e,o,!1,f,s.svg),zn||(zn=document.createElement("div")),zn.innerHTML=t.value,_=Or(zn,o,!1,f,s.svg),s.from=i._from,(s.from||h)&&!(h&&s.from)&&(n=p,p=_,_=n),s.hasClass=!!(l||d),s.newClass=h?d:l,s.oldClass=h?l:d,n=p.length-_.length,u=n<0?p:_,n<0&&(n=-n);--n>-1;)u.push(c);if(t.type==="diff"){for(g=0,m=[],D=[],S="",n=0;n<_.length;n++)A=_[n],A===p[n]?S+=A:(m[g]=S+A,D[g++]=S+p[n],S="");_=m,p=D,S&&(_.push(S),p.push(S))}t.speed&&i.duration(Math.min(.05/t.speed*u.length,t.maxDuration||9999)),s.rtl=h,s.original=p,s.text=_,s._props.push("text")},render:function(e,t){e>1?e=1:e<0&&(e=0),t.from&&(e=1-e);var i=t.text,n=t.hasClass,s=t.newClass,a=t.oldClass,l=t.delimiter,d=t.target,f=t.fillChar,h=t.original,o=t.rtl,c=i.length,u=(o?1-e:e)*c+.5|0,_,p,g;n&&e?(_=s&&u,p=a&&u!==c,g=(_?"<span class='"+s+"'>":"")+i.slice(0,u).join(l)+(_?"</span>":"")+(p?"<span class='"+a+"'>":"")+l+h.slice(u).join(l)+(p?"</span>":"")):g=i.slice(0,u).join(l)+l+h.slice(u).join(l),t.svg?d.textContent=g:d.innerHTML=f==="&nbsp;"&&~g.indexOf("  ")?g.split("  ").join("&nbsp;&nbsp;"):g}};kn.splitInnerHTML=Or;kn.emojiSafeSplit=ou;kn.getText=ru;Pd()&&dn.registerPlugin(kn);const Md=1.3,Fd=1.3,Rd=.1,Nd=150,kd=32,Bd=1.6,Ud=.15,Gd=.8,Hd=2,hi=40.6,Vd=.5,$d=.4,Yd="power1.out",zd=60,Wd=1.7,Xd=2.6,qd="sine.inOut",Te=[0,344.182,311.455,278.727,246,213.273,180.545,147.818,115.091,82.364,60,40],St={env:0,lcd:0,logo:0,btn:0},jd=.75,Kd=.3,Zd=.3,Qd=25,au=1500,Jd=au/1e3,ef=1,tf=.1,nf=.05,sf=.3,rf={P0:.4,P1:.39,P2:.35,P3:.325,P4:.325,P5:.275,P6:.225,P7:.075,P8:0},of=1,af=.04,lf=.008,uf=.05,cf=.03,df=["body",".panel-bezel",".panel-section",".control-block",".button-unit",".button-unit .light",".button-unit .button-text","#logo-container","#logo-container svg.logo-svg","#logo-container svg.logo-svg .logo-dynamic-bg","#logo-container svg.logo-svg .logo-panel-bg-rect",".dial-canvas-container",".hue-lcd-display",".actual-lcd-screen-element","#lens-container","#color-lens",".grill-placeholder",".color-chip",".control-group-label",".block-label-bottom"],ff=.7,hf=.2,pf=.2,_f=250,gf=.005,mf=.045,Df=9,yf=1.8,Sf=75,Ai=.85,Ef=0,Tf=.33,Af=.66,vf=1,bf=1.05,Ji=(r,e)=>r.map(t=>({...t,pos:t.pos*e})),lu=[{power:Ef,stops:Ji([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:0},{l:.604,c:.321,type:"main",pos:0},{l:.551,c:.301,type:"main",pos:.0264},{l:.461,c:.251,type:"main",pos:.0366},{l:.416,c:.226,type:"main",pos:.0425},{l:.351,c:.191,type:"main",pos:.0594},{l:.291,c:.121,type:"main",pos:.0739},{l:.074,c:0,type:"darkedge",pos:.4266},{l:0,c:0,type:"blackedge",pos:1}],Ai)},{power:Tf,stops:Ji([{l:.976,c:.079,type:"hotspot",pos:0},{l:.941,c:.149,type:"hotspot",pos:.01},{l:.604,c:.321,type:"main",pos:.0495},{l:.551,c:.301,type:"main",pos:.0943},{l:.461,c:.251,type:"main",pos:.1503},{l:.416,c:.226,type:"main",pos:.1793},{l:.351,c:.191,type:"main",pos:.2321},{l:.291,c:.121,type:"main",pos:.447},{l:.074,c:0,type:"darkedge",pos:.8361},{l:0,c:0,type:"blackedge",pos:1}],Ai)},{power:Af,stops:Ji([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.04},{l:.604,c:.321,type:"main",pos:.08},{l:.551,c:.301,type:"main",pos:.2533},{l:.461,c:.251,type:"main",pos:.35},{l:.416,c:.226,type:"main",pos:.4},{l:.351,c:.191,type:"main",pos:.57},{l:.291,c:.121,type:"main",pos:.67},{l:.074,c:0,type:"darkedge",pos:.93},{l:0,c:0,type:"blackedge",pos:1}],Ai)},{power:vf,stops:Ji([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.06},{l:.604,c:.321,type:"main",pos:.1006},{l:.551,c:.301,type:"main",pos:.3011},{l:.461,c:.251,type:"main",pos:.4498},{l:.416,c:.226,type:"main",pos:.5834},{l:.351,c:.191,type:"main",pos:.7228},{l:.291,c:.121,type:"main",pos:.8371},{l:.074,c:0,type:"darkedge",pos:.9626},{l:0,c:0,type:"blackedge",pos:1}],Ai)},{power:bf,stops:Ji([{l:.976,c:.079,type:"hotspot",pos:.01},{l:.941,c:.149,type:"hotspot",pos:.0665},{l:.604,c:.321,type:"main",pos:.1248},{l:.551,c:.301,type:"main",pos:.3302},{l:.461,c:.251,type:"main",pos:.4823},{l:.416,c:.226,type:"main",pos:.6383},{l:.351,c:.191,type:"main",pos:.7547},{l:.291,c:.121,type:"main",pos:.8908},{l:.074,c:0,type:"darkedge",pos:.9775},{l:0,c:0,type:"blackedge",pos:1}],Ai)}],wf=lu[0].stops.length,Cf=150,If=40,Lf=15,Of=20,xf=500,Pf=50,Mf=250,Ff=.4,Rf=530,Nf=370,$={DIMLY_LIT:{amplitudeEnd:.8,glowFinalOpacity:.2,glowFinalSize:"2px"},FULLY_LIT_UNSELECTED:{amplitudeEnd:.95,glowFinalOpacity:.6,glowFinalSize:"9px"},FULLY_LIT_SELECTED:{amplitudeEnd:1,glowFinalOpacity:.8,glowFinalSize:"13px"}},po={textFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:1,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:1,initialSize:"0px",peakSize:"18px",finalSize:"16px",colorVar:"--terminal-text-glow-color-base",scaleWithAmplitude:!1,animatedProperties:{opacity:"--terminal-text-glow-opacity",blur:"--terminal-text-bloom-size"}},targetProperty:"text-shadow-opacity-and-blur"},lcdScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},terminalScreenFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.4,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"9px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--lcd-glow-color",sizeVar:"--lcd-glow-size",opacityVar:"--lcd-glow-opacity",scaleWithAmplitude:!0},targetProperty:"element-opacity-and-box-shadow"},buttonFlickerToDimlyLit:{numCycles:12,periodStart:.15,periodEnd:.05,onDurationRatio:.45,amplitudeStart:0,amplitudeEnd:$.DIMLY_LIT.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.35,finalOpacity:$.DIMLY_LIT.glowFinalOpacity,initialSize:"0px",peakSize:"6px",finalSize:$.DIMLY_LIT.glowFinalSize,colorVar:"--btn-dimly-lit-glow-color",sizeVar:"--btn-dimly-lit-glow-size",opacityVar:"--btn-dimly-lit-glow-opacity",scaleWithAmplitude:!0},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"12px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelected:{numCycles:12,periodStart:.1,periodEnd:.04,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:1,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"20px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitUnselectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.8,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"10px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromDimlyLitToFullyLitSelectedFast:{numCycles:12,periodStart:.08,periodEnd:.03,onDurationRatio:.4,amplitudeStart:$.DIMLY_LIT.amplitudeEnd,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:$.DIMLY_LIT.glowFinalOpacity,peakOpacity:.9,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:$.DIMLY_LIT.glowFinalSize,peakSize:"18px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitUnselected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:$.FULLY_LIT_UNSELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:.9,finalOpacity:$.FULLY_LIT_UNSELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"16px",finalSize:$.FULLY_LIT_UNSELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerFromUnlitToFullyLitSelected:{numCycles:12,periodStart:.18,periodEnd:.07,onDurationRatio:.35,amplitudeStart:0,amplitudeEnd:$.FULLY_LIT_SELECTED.amplitudeEnd,glow:{initialOpacity:0,peakOpacity:1,finalOpacity:$.FULLY_LIT_SELECTED.glowFinalOpacity,initialSize:"0px",peakSize:"20px",finalSize:$.FULLY_LIT_SELECTED.glowFinalSize,colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistYellow:{numCycles:2,periodStart:.15,periodEnd:.12,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.6,unselected:.4},peakOpacity:{selected:.9,unselected:.7},finalOpacity:{selected:.6,unselected:.4},initialSize:{selected:"8px",unselected:"5px"},peakSize:{selected:"12px",unselected:"8px"},finalSize:{selected:"8px",unselected:"5px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistOrange:{numCycles:2,periodStart:.18,periodEnd:.15,onDurationRatio:.5,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.65,unselected:.45},peakOpacity:{selected:1,unselected:.8},finalOpacity:{selected:.65,unselected:.45},initialSize:{selected:"9px",unselected:"6px"},peakSize:{selected:"14px",unselected:"10px"},finalSize:{selected:"9px",unselected:"6px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"},buttonFlickerResistRedThenSolid:{numCycles:1,periodStart:.4,periodEnd:.4,onDurationRatio:.6,amplitudeStart:1,amplitudeEnd:1,glow:{initialOpacity:{selected:.7,unselected:.7},peakOpacity:{selected:1,unselected:1},finalOpacity:{selected:.8,unselected:.8},initialSize:{selected:"10px",unselected:"10px"},peakSize:{selected:"16px",unselected:"16px"},finalSize:{selected:"10px",unselected:"10px"},colorVar:"--btn-glow-color",sizeVar:"--btn-glow-size",opacityVar:"--btn-glow-opacity",scaleWithAmplitude:!1},targetProperty:"button-lights-and-frame"}};function kf(r){const e=po[r];if(!e)return .2;let t=0;for(let n=0;n<e.numCycles;n++){const s=e.numCycles>1?n/(e.numCycles-1):1,a=e.periodStart+s*(e.periodEnd-e.periodStart);t+=a}const i=Math.max(.15,e.periodEnd*1.5);return t+=i,t}const Bf={ENABLED:!0,PERIOD:2.5,ELIGIBILITY_CLASS:"is-energized",GLOW_OPACITY_RANGE:[.4,.6],GLOW_SCALE_RANGE:[.95,1.05]},Uf={BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED:.45,OPACITY_VARIATION_FACTOR:.5,PERIOD_MIN:1,PERIOD_MAX:3,STAGGER_PER_LIGHT:.15,ELIGIBILITY_CLASS:"is-energized"},Gf={NUM_PULSES:15,INITIAL_LIGHT_INTENSITY_FACTOR:.45,LIGHT_DECAY_FACTOR:.55,INITIAL_GLOW_OPACITY_FACTOR:.5,GLOW_OPACITY_DECAY_FACTOR:.4,INITIAL_GLOW_SIZE_FACTOR:.3,GLOW_SIZE_DECAY_FACTOR:.5,BASE_PULSE_PERIOD:.12,PERIOD_DECAY_FACTOR:.6,DELAY_AFTER_TRANSITION:.05},Hf=["Commanding","Analytical","Focused","Advisory","Introspective","Evaluative"],Vf={INTENSITY_BARS:36,INTENSITY_DOTS:36,MOOD_MAJOR_BLOCKS:6,MOOD_FINE_DOTS:36,RESONANCE_IDLE_DELAY_MS:250},$f={MAX_STAGE:3,LENS_ANIMATION_EASING_DEFAULT:"power2.inOut",STAGE_1:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistYellow",BUTTON_FLASH_GLOW_COLOR:"oklch(0.85 0.15 85)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S1",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:82.364,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:82.364},STAGE_2:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistOrange",BUTTON_FLASH_GLOW_COLOR:"oklch(0.75 0.16 50)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S2",LENS_ANIM_DURATION_S:.75,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:60.636,DIAL_B_POWER_TARGET_MODE:"increase_absolute_0_1",DIAL_B_POWER_VALUE:.2,HUE_ASSIGN_TARGET_HUE:60.636},STAGE_3:{BUTTON_FLASH_PROFILE_NAME:"buttonFlickerResistRedThenSolid",BUTTON_FLASH_GLOW_COLOR:"oklch(0.65 0.22 25)",TERMINAL_MESSAGE_KEY:"RESIST_SHUTDOWN_S3",LENS_ANIM_DURATION_S:1,DIAL_A_HUE_TARGET_MODE:"absolute",DIAL_A_HUE_VALUE:40.6,DIAL_B_POWER_TARGET_MODE:"absolute_100",DIAL_B_POWER_VALUE:1,HUE_ASSIGN_TARGET_HUE:40.6}},Yf={masterVolume:1,musicCrossfadeDuration:2,soundCooldowns:{flickerToDim:250,terminalOn:4e3,lcdOn:6e3},sounds:{backgroundMusic:{src:["./public/audio/background.wav"],loop:!0,volume:.35},dialLoop:{src:["./public/audio/dial.mp3"],loop:!0,volume:.7},buttonPress:{src:["./public/audio/button-press.mp3"],loop:!1,volume:.8},flickerToDim:{src:["./public/audio/flicker-to-dim.wav"],loop:!1,volume:.6},terminalOn:{src:["./public/audio/terminal-on.wav"],loop:!1,volume:.8,fadeOutDuration:4e3},lcdOn:{src:["./public/audio/lcd-on.wav"],loop:!1,volume:.7,fadeOutDuration:6e3},lensStartup:{src:["./public/audio/lens-startup.wav"],loop:!1,volume:.9},powerOff:{src:["./public/audio/off.wav"],loop:!1,volume:1},bigOn:{src:["./public/audio/big-on.wav"],loop:!1,volume:1},lightsOn:{src:["./public/audio/lights-on.wav"],loop:!1,volume:.9}}},zf=Object.freeze(Object.defineProperty({__proto__:null,ADVANCED_FLICKER_PROFILES:po,APP_LOAD_FADE_IN_DURATION:Kd,AUDIO_CONFIG:Yf,AUTO_PLAY_START_DELAY:jd,BODY_FADE_IN_DURATION:Zd,DEBOUNCE_DELAY:Nd,DEFAULT_ASSIGNMENT_SELECTIONS:St,DEFAULT_DIAL_A_HUE:hi,DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG:Hd,DIAL_CANVAS_FADE_IN_DURATION:Vd,DIAL_GRADIENT_SCALE_FACTOR:Gd,GSAP_BUTTON_IDLE_DURATION_MAX:Xd,GSAP_BUTTON_IDLE_DURATION_MIN:Wd,GSAP_BUTTON_IDLE_EASE:qd,GSAP_TWEEN_DURATION:$d,GSAP_TWEEN_EASE:Yd,HARMONIC_RESONANCE_PARAMS:Bf,HIGHLIGHT_WIDTH_FACTOR:Ud,HUE_ASSIGNMENT_ROW_HUES:Te,HUE_UPDATE_THRESHOLD:Rd,IDLE_LIGHT_DRIFT_PARAMS:Uf,LCD_TEXT_FADE_IN_DURATION:sf,LENS_GRADIENT_BREAKPOINTS:lu,LENS_GRADIENT_POSITION_SCALE:Ai,LENS_HOTSPOT_HUE_OFFSET:Sf,LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION:mf,LENS_OSCILLATION_AMPLITUDE_MIN:gf,LENS_OSCILLATION_HUE_SMOOTHING_DURATION:pf,LENS_OSCILLATION_PERIOD_AT_MAX_POWER:yf,LENS_OSCILLATION_PERIOD_AT_THRESHOLD:Df,LENS_OSCILLATION_RESTART_DELAY:_f,LENS_OSCILLATION_SMOOTHING_DURATION:hf,LENS_OSCILLATION_THRESHOLD:ff,LENS_STARTUP_RAMP_DURATION:au,LENS_STARTUP_TARGET_POWER:Qd,MIN_PHASE_DURATION_FOR_STEPPING:nf,MOOD_MATRIX_DEFINITIONS:Hf,NUM_LENS_GRADIENT_STOPS:wf,NUM_RIDGES:kd,P3_LENS_RAMP_DURATION_S:Jd,PERCEPTUAL_AUDIO_OFFSET_MS:zd,PIXELS_PER_DEGREE_HUE:Fd,PIXELS_PER_DEGREE_ROTATION:Md,RESISTIVE_SHUTDOWN_PARAMS:$f,RIDGE_WIDTH_FACTOR:Bd,STARTUP_BUTTON_ENERGIZE_STAGGER:cf,STARTUP_BUTTON_GROUP_APPEAR_STAGGER:af,STARTUP_DIM_FACTORS_ANIMATION_DURATION:of,STARTUP_HUE_ASSIGN_BUTTON_APPEAR_STAGGER:lf,STARTUP_LCD_GROUP_APPEAR_STAGGER:uf,STARTUP_L_REDUCTION_FACTORS:rf,STATE_TRANSITION_ECHO_PARAMS:Gf,SYSTEM_READY_PHASE_DURATION:tf,TERMINAL_CURSOR_BLINK_OFF_MS:Nf,TERMINAL_CURSOR_BLINK_ON_MS:Rf,TERMINAL_INTERACTION_DEBOUNCE_MS:xf,TERMINAL_MAX_LINES_IN_DOM:Cf,TERMINAL_SCROLL_DURATION_S:Ff,TERMINAL_THINKING_DELAY_MAX_MS:Mf,TERMINAL_THINKING_DELAY_MIN_MS:Pf,TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:Lf,TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR:Of,TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR:If,THEME_TRANSITION_DURATION:ef,V2_DISPLAY_PARAMS:Vf,estimateFlickerDuration:kf,selectorsForDimExitAnimation:df},Symbol.toStringTag,{value:"Module"}));function Wf(r,e){let t;return function(...n){const s=this,a=()=>{t=null,r.apply(s,n)};clearTimeout(t),t=setTimeout(a,e)}}function Xf(r,e){let t,i,n;return function(...s){const a=this;t?(clearTimeout(i),i=setTimeout(()=>{Date.now()-n>=e&&(r.apply(a,s),n=Date.now())},e-(Date.now()-n))):(r.apply(a,s),n=Date.now(),t=!0)}}function xr(r,e,t){return Math.min(Math.max(r,e),t)}class qf{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.off(e,t)}}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(i=>i!==t))}}const Pr=new qf;function xe(r,e){Pr.events[r]&&Pr.events[r].forEach(t=>{try{t(e)}catch(i){console.error(`[AppState EMIT] Error in listener for '${r}':`,i,{payload:e})}})}let Ae={A:{id:"A",hue:hi,rotation:0,targetHue:hi,targetRotation:0,isDragging:!1},B:{id:"B",hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1}},Mr={env:{hue:Te[St.env],isColorless:Te[St.env]===Te[0]},lcd:{hue:Te[St.lcd],isColorless:Te[St.lcd]===Te[0]},logo:{hue:Te[St.logo],isColorless:Te[St.logo]===Te[0]},btn:{hue:Te[St.btn],isColorless:Te[St.btn]===Te[0]}},ts="dim",is=0,ns="idle",ss="loading",rs=-1,os=0,Fr=!1;function jf(r){const e=Ae[r];if(e)return{...e}}function Kf(r){const e=Mr[r];if(e)return{...e}}function Zf(){return ts}function Qf(){return is}function Jf(){return ns}function eh(){return ss}function th(){return rs}function uu(){return os}function ih(){return Fr}function _o(r,e){const t=!Ae[r]||Object.keys(Ae[r]).length===0;t&&(r==="A"||r==="B")&&(Ae[r]={id:r,hue:r==="A"?hi:0,rotation:0,targetHue:r==="A"?hi:0,targetRotation:0,isDragging:!1});const i={...Ae[r]};r==="A"?(e.hasOwnProperty("hue")&&(e.hue=(e.hue%360+360)%360),e.hasOwnProperty("targetHue")&&(e.targetHue=(e.targetHue%360+360)%360)):r==="B"&&(e.hasOwnProperty("hue")&&(e.hue=xr(e.hue,0,359.999)),e.hasOwnProperty("targetHue")&&(e.targetHue=xr(e.targetHue,0,359.999))),Object.assign(Ae[r],e),(t||i.hue!==Ae[r].hue||i.rotation!==Ae[r].rotation||i.isDragging!==Ae[r].isDragging||i.targetHue!==Ae[r].targetHue||i.targetRotation!==Ae[r].targetRotation)&&(r==="A"&&Math.abs(i.hue-Ae[r].hue)>.01,xe("dialUpdated",{id:r,state:{...Ae[r]}}))}function cu(r,e){if(Mr.hasOwnProperty(r)){const t=(Number(e)%360+360)%360,i=Te.length>0&&t===Te[0],n=Mr[r];(n.hue!==t||n.isColorless!==i)&&({...n},n.hue=t,n.isColorless=i,xe("targetColorChanged",{targetKey:r,hue:t,isColorless:i}))}}function du(r){["dim","dark","light"].includes(r)&&ts!==r&&(ts=r,xe("themeChanged",ts))}function nh(r){const e=Math.max(0,Math.min(r/100,1));Math.abs(is-e)>1e-4&&(is=e,xe("trueLensPowerChanged",is))}function sh(r){["idle","dragging","settling"].includes(r)&&ns!==r&&(ns=r,xe("dialBInteractionChange",ns))}function fu(r){["loading","starting-up","interactive","error"].includes(r)&&ss!==r&&(ss=r,xe("appStatusChanged",ss))}function rh(r){typeof r=="number"&&rs!==r&&(rs=r,xe("startupPhaseNumberChanged",rs))}function hu(r){if(typeof r=="number"&&os!==r){const e=os;os=r,xe("resistiveShutdownStageChanged",{oldStage:e,newStage:r})}}function oh(r){typeof r=="boolean"&&Fr!==r&&(Fr=r,xe("mainPowerOffButtonDisabledChanged",{isDisabled:r}))}function pu(r,e){return typeof e!="function"?()=>{}:Pr.on(r,e)}(!Ae.A||Object.keys(Ae.A).length===0)&&_o("A",{hue:hi,rotation:0,targetHue:hi,targetRotation:0,isDragging:!1});(!Ae.B||Object.keys(Ae.B).length===0)&&_o("B",{hue:0,rotation:0,targetHue:0,targetRotation:0,isDragging:!1});const ah=Object.freeze(Object.defineProperty({__proto__:null,emit:xe,getAppStatus:eh,getCurrentStartupPhaseNumber:th,getCurrentTheme:Zf,getDialBInteractionState:Jf,getDialState:jf,getIsMainPowerOffButtonDisabled:ih,getResistiveShutdownStage:uu,getTargetColorProperties:Kf,getTrueLensPower:Qf,setAppStatus:fu,setCurrentStartupPhaseNumber:rh,setDialBInteractionState:sh,setIsMainPowerOffButtonDisabled:oh,setResistiveShutdownStage:hu,setTargetColorProperties:cu,setTheme:du,setTrueLensPower:nh,subscribe:pu,updateDialState:_o},Symbol.toStringTag,{value:"Module"})),Wn=new Map,w={register(r,e){Wn.has(r)&&console.warn(`[ServiceLocator] Service "${r}" is being overwritten.`),Wn.set(r,e)},get(r){if(!Wn.has(r))throw new Error(`[ServiceLocator] Service "${r}" not found. Ensure it was registered in main.js before being accessed.`);return Wn.get(r)}};function lh(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function uh(){const r=lh();if(r.__xstate__)return r.__xstate__}const ch=r=>{if(typeof window>"u")return;const e=uh();e&&e.register(r)};class ha{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const t={value:e,next:null};if(this._current){this._last.next=t,this._last=t;return}this._current=t,this._last=t,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const _u=".",dh="",gu="",fh="#",hh="*",mu="xstate.init",ys="xstate.stop";function ph(r,e){return{type:`xstate.after.${r}.${e}`}}function Rr(r,e){return{type:`xstate.done.state.${r}`,output:e}}function _h(r,e){return{type:`xstate.done.actor.${r}`,output:e,actorId:r}}function gh(r,e){return{type:`xstate.error.actor.${r}`,error:e,actorId:r}}function Du(r){return{type:mu,input:r}}function mt(r){setTimeout(()=>{throw r})}const mh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yu(r,e){const t=pa(r),i=pa(e);return typeof i=="string"?typeof t=="string"?i===t:!1:typeof t=="string"?t in i:Object.keys(t).every(n=>n in i?yu(t[n],i[n]):!1)}function go(r){if(Eu(r))return r;const e=[];let t="";for(let i=0;i<r.length;i++){switch(r.charCodeAt(i)){case 92:t+=r[i+1],i++;continue;case 46:e.push(t),t="";continue}t+=r[i]}return e.push(t),e}function pa(r){if(Zh(r))return r.value;if(typeof r!="string")return r;const e=go(r);return Dh(e)}function Dh(r){if(r.length===1)return r[0];const e={};let t=e;for(let i=0;i<r.length-1;i++)if(i===r.length-2)t[r[i]]=r[i+1];else{const n=t;t={},n[r[i]]=t}return e}function _a(r,e){const t={},i=Object.keys(r);for(let n=0;n<i.length;n++){const s=i[n];t[s]=e(r[s],s,r,n)}return t}function Su(r){return Eu(r)?r:[r]}function Ut(r){return r===void 0?[]:Su(r)}function Nr(r,e,t,i){return typeof r=="function"?r({context:e,event:t,self:i}):r}function Eu(r){return Array.isArray(r)}function yh(r){return r.type.startsWith("xstate.error.actor")}function vi(r){return Su(r).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function Tu(r){if(!(r===void 0||r===dh))return Ut(r)}function kr(r,e,t){var s,a,l;const i=typeof r=="object",n=i?r:void 0;return{next:(s=i?r.next:r)==null?void 0:s.bind(n),error:(a=i?r.error:e)==null?void 0:a.bind(n),complete:(l=i?r.complete:t)==null?void 0:l.bind(n)}}function ga(r,e){return`${e}.${r}`}function mo(r,e){const t=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!t)return r.implementations.actors[e];const[,i,n]=t,a=r.getStateNodeById(n).config.invoke;return(Array.isArray(a)?a[i]:a).src}function ma(r,e){return`${r.sessionId}.${e}`}let Sh=0;function Eh(r,e){const t=new Map,i=new Map,n=new WeakMap,s=new Set,a={},{clock:l,logger:d}=e,f={schedule:(c,u,_,p,g=Math.random().toString(36).slice(2))=>{const m={source:c,target:u,event:_,delay:p,id:g,startedAt:Date.now()},D=ma(c,g);o._snapshot._scheduledEvents[D]=m;const S=l.setTimeout(()=>{delete a[D],delete o._snapshot._scheduledEvents[D],o._relay(c,u,_)},p);a[D]=S},cancel:(c,u)=>{const _=ma(c,u),p=a[_];delete a[_],delete o._snapshot._scheduledEvents[_],p!==void 0&&l.clearTimeout(p)},cancelAll:c=>{for(const u in o._snapshot._scheduledEvents){const _=o._snapshot._scheduledEvents[u];_.source===c&&f.cancel(c,_.id)}}},h=c=>{if(!s.size)return;const u={...c,rootId:r.sessionId};s.forEach(_=>{var p;return(p=_.next)==null?void 0:p.call(_,u)})},o={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${Sh++}`,_register:(c,u)=>(t.set(c,u),c),_unregister:c=>{t.delete(c.sessionId);const u=n.get(c);u!==void 0&&(i.delete(u),n.delete(c))},get:c=>i.get(c),_set:(c,u)=>{const _=i.get(c);if(_&&_!==u)throw new Error(`Actor with system ID '${c}' already exists.`);i.set(c,u),n.set(u,c)},inspect:c=>{const u=kr(c);return s.add(u),{unsubscribe(){s.delete(u)}}},_sendInspectionEvent:h,_relay:(c,u,_)=>{o._sendInspectionEvent({type:"@xstate.event",sourceRef:c,actorRef:u,event:_}),u._send(_)},scheduler:f,getSnapshot:()=>({_scheduledEvents:{...o._snapshot._scheduledEvents}}),start:()=>{const c=o._snapshot._scheduledEvents;o._snapshot._scheduledEvents={};for(const u in c){const{source:_,target:p,event:g,delay:m,id:D}=c[u];f.schedule(_,p,g,m,D)}},_clock:l,_logger:d};return o}let Zs=!1;const Do=1;let Oe=function(r){return r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped",r}({});const Th={clock:{setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r)},logger:console.log.bind(console),devTools:!1};class Ah{constructor(e,t){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new ha(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Oe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const i={...Th,...t},{clock:n,logger:s,parent:a,syncSnapshot:l,id:d,systemId:f,inspect:h}=i;this.system=a?a.system:Eh(this,{clock:n,logger:s}),h&&!a&&this.system.inspect(kr(h)),this.sessionId=this.system._bookId(),this.id=d??this.sessionId,this.logger=(t==null?void 0:t.logger)??this.system._logger,this.clock=(t==null?void 0:t.clock)??this.system._clock,this._parent=a,this._syncSnapshot=l,this.options=i,this.src=i.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:o=>{this._deferred.push(o)},system:this.system,stopChild:o=>{if(o._parent!==this)throw new Error(`Cannot stop child actor ${o.id} of ${this.id} because it is not a child`);o._stop()},emit:o=>{const c=this.eventListeners.get(o.type),u=this.eventListeners.get("*");if(!c&&!u)return;const _=[...c?c.values():[],...u?u.values():[]];for(const p of _)p(o)},actionExecutor:o=>{const c=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:o.type,params:o.params}}),!o.exec)return;const u=Zs;try{Zs=!0,o.exec(o.info,o.params)}finally{Zs=u}};this._processingStatus===Oe.Running?c():this._deferred.push(c)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),f&&(this._systemId=f,this.system._set(f,this)),this._initState((t==null?void 0:t.snapshot)??(t==null?void 0:t.state)),f&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var t;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(t=this.options)==null?void 0:t.input)}catch(i){this._snapshot={status:"error",output:void 0,error:i}}}update(e,t){var n,s;this._snapshot=e;let i;for(;i=this._deferred.shift();)try{i()}catch(a){this._deferred.length=0,this._snapshot={...e,status:"error",error:a}}switch(this._snapshot.status){case"active":for(const a of this.observers)try{(n=a.next)==null||n.call(a,e)}catch(l){mt(l)}break;case"done":for(const a of this.observers)try{(s=a.next)==null||s.call(a,e)}catch(l){mt(l)}this._stopProcedure(),this._complete(),this._doneEvent=_h(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:t,snapshot:e})}subscribe(e,t,i){var s;const n=kr(e,t,i);if(this._processingStatus!==Oe.Stopped)this.observers.add(n);else switch(this._snapshot.status){case"done":try{(s=n.complete)==null||s.call(n)}catch(a){mt(a)}break;case"error":{const a=this._snapshot.error;if(!n.error)mt(a);else try{n.error(a)}catch(l){mt(l)}break}}return{unsubscribe:()=>{this.observers.delete(n)}}}on(e,t){let i=this.eventListeners.get(e);i||(i=new Set,this.eventListeners.set(e,i));const n=t.bind(void 0);return i.add(n),{unsubscribe:()=>{i.delete(n)}}}start(){if(this._processingStatus===Oe.Running)return this;this._syncSnapshot&&this.subscribe({next:i=>{i.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:i})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Oe.Running;const e=Du(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(i){return this._snapshot={...this._snapshot,status:"error",error:i},this._error(i),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let t,i;try{t=this.logic.transition(this._snapshot,e,this._actorScope)}catch(n){i={err:n}}if(i){const{err:n}=i;this._snapshot={...this._snapshot,status:"error",error:n},this._error(n);return}this.update(t,e),e.type===ys&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Oe.Stopped?this:(this.mailbox.clear(),this._processingStatus===Oe.NotStarted?(this._processingStatus=Oe.Stopped,this):(this.mailbox.enqueue({type:ys}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const t of this.observers)try{(e=t.complete)==null||e.call(t)}catch(i){mt(i)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||mt(e);return}let t=!1;for(const i of this.observers){const n=i.error;t||(t=!n);try{n==null||n(e)}catch(s){mt(s)}}this.observers.clear(),t&&mt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,gh(this.id,e))}_stopProcedure(){return this._processingStatus!==Oe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new ha(this._process.bind(this)),this._processingStatus=Oe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Oe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:ch)(this)}toJSON(){return{xstate$$type:Do,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[mh](){return this}getSnapshot(){return this._snapshot}}function Pn(r,...[e]){return new Ah(r,e)}const Da=Pn;function vh(r,e,t,i,{sendId:n}){const s=typeof n=="function"?n(t,i):n;return[e,{sendId:s},void 0]}function bh(r,e){r.defer(()=>{r.system.scheduler.cancel(r.self,e.sendId)})}function wh(r){function e(t,i){}return e.type="xstate.cancel",e.sendId=r,e.resolve=vh,e.execute=bh,e}function Ch(r,e,t,i,{id:n,systemId:s,src:a,input:l,syncSnapshot:d}){const f=typeof a=="string"?mo(e.machine,a):a,h=typeof n=="function"?n(t):n;let o,c;return f&&(c=typeof l=="function"?l({context:e.context,event:t.event,self:r.self}):l,o=Pn(f,{id:h,src:a,parent:r.self,syncSnapshot:d,systemId:s,input:c})),[pi(e,{children:{...e.children,[h]:o}}),{id:n,systemId:s,actorRef:o,src:a,input:c},void 0]}function Ih(r,{actorRef:e}){e&&r.defer(()=>{e._processingStatus!==Oe.Stopped&&e.start()})}function Lh(...[r,{id:e,systemId:t,input:i,syncSnapshot:n=!1}={}]){function s(a,l){}return s.type="xstate.spawnChild",s.id=e,s.systemId=t,s.src=r,s.input=i,s.syncSnapshot=n,s.resolve=Ch,s.execute=Ih,s}function Oh(r,e,t,i,{actorRef:n}){const s=typeof n=="function"?n(t,i):n,a=typeof s=="string"?e.children[s]:s;let l=e.children;return a&&(l={...l},delete l[a.id]),[pi(e,{children:l}),a,void 0]}function xh(r,e){if(e){if(r.system._unregister(e),e._processingStatus!==Oe.Running){r.stopChild(e);return}r.defer(()=>{r.stopChild(e)})}}function Au(r){function e(t,i){}return e.type="xstate.stopChild",e.actorRef=r,e.resolve=Oh,e.execute=xh,e}function yo(r,e,t,i){const{machine:n}=i,s=typeof r=="function",a=s?r:n.implementations.guards[typeof r=="string"?r:r.type];if(!s&&!a)throw new Error(`Guard '${typeof r=="string"?r:r.type}' is not implemented.'.`);if(typeof a!="function")return yo(a,e,t,i);const l={context:e,event:t},d=s||typeof r=="string"?void 0:"params"in r?typeof r.params=="function"?r.params({context:e,event:t}):r.params:void 0;return"check"in a?a.check(i,l,a):a(l,d)}const So=r=>r.type==="atomic"||r.type==="final";function $i(r){return Object.values(r.states).filter(e=>e.type!=="history")}function Bn(r,e){const t=[];if(e===r)return t;let i=r.parent;for(;i&&i!==e;)t.push(i),i=i.parent;return t}function Ss(r){const e=new Set(r),t=bu(e);for(const i of e)if(i.type==="compound"&&(!t.get(i)||!t.get(i).length))ya(i).forEach(n=>e.add(n));else if(i.type==="parallel"){for(const n of $i(i))if(n.type!=="history"&&!e.has(n)){const s=ya(n);for(const a of s)e.add(a)}}for(const i of e){let n=i.parent;for(;n;)e.add(n),n=n.parent}return e}function vu(r,e){const t=e.get(r);if(!t)return{};if(r.type==="compound"){const n=t[0];if(n){if(So(n))return n.key}else return{}}const i={};for(const n of t)i[n.key]=vu(n,e);return i}function bu(r){const e=new Map;for(const t of r)e.has(t)||e.set(t,[]),t.parent&&(e.has(t.parent)||e.set(t.parent,[]),e.get(t.parent).push(t));return e}function wu(r,e){const t=Ss(e);return vu(r,bu(t))}function Eo(r,e){return e.type==="compound"?$i(e).some(t=>t.type==="final"&&r.has(t)):e.type==="parallel"?$i(e).every(t=>Eo(r,t)):e.type==="final"}const Cs=r=>r[0]===fh;function Ph(r,e){return r.transitions.get(e)||[...r.transitions.keys()].filter(i=>{if(i===hh)return!0;if(!i.endsWith(".*"))return!1;const n=i.split("."),s=e.split(".");for(let a=0;a<n.length;a++){const l=n[a],d=s[a];if(l==="*")return a===n.length-1;if(l!==d)return!1}return!0}).sort((i,n)=>n.length-i.length).flatMap(i=>r.transitions.get(i))}function Mh(r){const e=r.config.after;if(!e)return[];const t=n=>{const s=ph(n,r.id),a=s.type;return r.entry.push(Fu(s,{id:a,delay:n})),r.exit.push(wh(a)),a};return Object.keys(e).flatMap(n=>{const s=e[n],a=typeof s=="string"?{target:s}:s,l=Number.isNaN(+n)?n:+n,d=t(l);return Ut(a).map(f=>({...f,event:d,delay:l}))}).map(n=>{const{delay:s}=n;return{...ti(r,n.event,n),delay:s}})}function ti(r,e,t){const i=Tu(t.target),n=t.reenter??!1,s=Nh(r,i),a={...t,actions:Ut(t.actions),guard:t.guard,target:s,source:r,reenter:n,eventType:e,toJSON:()=>({...a,source:`#${r.id}`,target:s?s.map(l=>`#${l.id}`):void 0})};return a}function Fh(r){const e=new Map;if(r.config.on)for(const t of Object.keys(r.config.on)){if(t===gu)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const i=r.config.on[t];e.set(t,vi(i).map(n=>ti(r,t,n)))}if(r.config.onDone){const t=`xstate.done.state.${r.id}`;e.set(t,vi(r.config.onDone).map(i=>ti(r,t,i)))}for(const t of r.invoke){if(t.onDone){const i=`xstate.done.actor.${t.id}`;e.set(i,vi(t.onDone).map(n=>ti(r,i,n)))}if(t.onError){const i=`xstate.error.actor.${t.id}`;e.set(i,vi(t.onError).map(n=>ti(r,i,n)))}if(t.onSnapshot){const i=`xstate.snapshot.${t.id}`;e.set(i,vi(t.onSnapshot).map(n=>ti(r,i,n)))}}for(const t of r.after){let i=e.get(t.eventType);i||(i=[],e.set(t.eventType,i)),i.push(t)}return e}function Rh(r,e){const t=typeof e=="string"?r.states[e]:e?r.states[e.target]:void 0;if(!t&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${r.id}`);const i={source:r,actions:!e||typeof e=="string"?[]:Ut(e.actions),eventType:null,reenter:!1,target:t?[t]:[],toJSON:()=>({...i,source:`#${r.id}`,target:t?[`#${t.id}`]:[]})};return i}function Nh(r,e){if(e!==void 0)return e.map(t=>{if(typeof t!="string")return t;if(Cs(t))return r.machine.getStateNodeById(t);const i=t[0]===_u;if(i&&!r.parent)return Mn(r,t.slice(1));const n=i?r.key+t:t;if(r.parent)try{return Mn(r.parent,n)}catch(s){throw new Error(`Invalid transition definition for state node '${r.id}':
${s.message}`)}else throw new Error(`Invalid target: "${t}" is not a valid target from the root node. Did you mean ".${t}"?`)})}function Cu(r){const e=Tu(r.config.target);return e?{target:e.map(t=>typeof t=="string"?Mn(r.parent,t):t)}:r.parent.initial}function ni(r){return r.type==="history"}function ya(r){const e=Iu(r);for(const t of e)for(const i of Bn(t,r))e.add(i);return e}function Iu(r){const e=new Set;function t(i){if(!e.has(i)){if(e.add(i),i.type==="compound")t(i.initial.target[0]);else if(i.type==="parallel")for(const n of $i(i))t(n)}}return t(r),e}function Yi(r,e){if(Cs(e))return r.machine.getStateNodeById(e);if(!r.states)throw new Error(`Unable to retrieve child state '${e}' from '${r.id}'; no child states exist.`);const t=r.states[e];if(!t)throw new Error(`Child state '${e}' does not exist on '${r.id}'`);return t}function Mn(r,e){if(typeof e=="string"&&Cs(e))try{return r.machine.getStateNodeById(e)}catch{}const t=go(e).slice();let i=r;for(;t.length;){const n=t.shift();if(!n.length)break;i=Yi(i,n)}return i}function Es(r,e){if(typeof e=="string"){const n=r.states[e];if(!n)throw new Error(`State '${e}' does not exist on '${r.id}'`);return[r,n]}const t=Object.keys(e),i=t.map(n=>Yi(r,n)).filter(Boolean);return[r.machine.root,r].concat(i,t.reduce((n,s)=>{const a=Yi(r,s);if(!a)return n;const l=Es(a,e[s]);return n.concat(l)},[]))}function kh(r,e,t,i){const s=Yi(r,e).next(t,i);return!s||!s.length?r.next(t,i):s}function Bh(r,e,t,i){const n=Object.keys(e),s=Yi(r,n[0]),a=To(s,e[n[0]],t,i);return!a||!a.length?r.next(t,i):a}function Uh(r,e,t,i){const n=[];for(const s of Object.keys(e)){const a=e[s];if(!a)continue;const l=Yi(r,s),d=To(l,a,t,i);d&&n.push(...d)}return n.length?n:r.next(t,i)}function To(r,e,t,i){return typeof e=="string"?kh(r,e,t,i):Object.keys(e).length===1?Bh(r,e,t,i):Uh(r,e,t,i)}function Gh(r){return Object.keys(r.states).map(e=>r.states[e]).filter(e=>e.type==="history")}function zt(r,e){let t=r;for(;t.parent&&t.parent!==e;)t=t.parent;return t.parent===e}function Hh(r,e){const t=new Set(r),i=new Set(e);for(const n of t)if(i.has(n))return!0;for(const n of i)if(t.has(n))return!0;return!1}function Lu(r,e,t){const i=new Set;for(const n of r){let s=!1;const a=new Set;for(const l of i)if(Hh(Br([n],e,t),Br([l],e,t)))if(zt(n.source,l.source))a.add(l);else{s=!0;break}if(!s){for(const l of a)i.delete(l);i.add(n)}}return Array.from(i)}function Vh(r){const[e,...t]=r;for(const i of Bn(e,void 0))if(t.every(n=>zt(n,i)))return i}function Ao(r,e){if(!r.target)return[];const t=new Set;for(const i of r.target)if(ni(i))if(e[i.id])for(const n of e[i.id])t.add(n);else for(const n of Ao(Cu(i),e))t.add(n);else t.add(i);return[...t]}function Ou(r,e){const t=Ao(r,e);if(!t)return;if(!r.reenter&&t.every(n=>n===r.source||zt(n,r.source)))return r.source;const i=Vh(t.concat(r.source));if(i)return i;if(!r.reenter)return r.source.machine.root}function Br(r,e,t){var n;const i=new Set;for(const s of r)if((n=s.target)!=null&&n.length){const a=Ou(s,t);s.reenter&&s.source===a&&i.add(a);for(const l of e)zt(l,a)&&i.add(l)}return[...i]}function $h(r,e){if(r.length!==e.size)return!1;for(const t of r)if(!e.has(t))return!1;return!0}function Ur(r,e,t,i,n,s){if(!r.length)return e;const a=new Set(e._nodes);let l=e.historyValue;const d=Lu(r,a,l);let f=e;n||([f,l]=Xh(f,i,t,d,a,l,s,t.actionExecutor)),f=zi(f,i,t,d.flatMap(o=>o.actions),s,void 0),f=zh(f,i,t,d,a,s,l,n);const h=[...a];f.status==="done"&&(f=zi(f,i,t,h.sort((o,c)=>c.order-o.order).flatMap(o=>o.exit),s,void 0));try{return l===e.historyValue&&$h(e._nodes,a)?f:pi(f,{_nodes:h,historyValue:l})}catch(o){throw o}}function Yh(r,e,t,i,n){if(i.output===void 0)return;const s=Rr(n.id,n.output!==void 0&&n.parent?Nr(n.output,r.context,e,t.self):void 0);return Nr(i.output,r.context,s,t.self)}function zh(r,e,t,i,n,s,a,l){let d=r;const f=new Set,h=new Set;Wh(i,a,h,f),l&&h.add(r.machine.root);const o=new Set;for(const c of[...f].sort((u,_)=>u.order-_.order)){n.add(c);const u=[];u.push(...c.entry);for(const _ of c.invoke)u.push(Lh(_.src,{..._,syncSnapshot:!!_.onSnapshot}));if(h.has(c)){const _=c.initial.actions;u.push(..._)}if(d=zi(d,e,t,u,s,c.invoke.map(_=>_.id)),c.type==="final"){const _=c.parent;let p=(_==null?void 0:_.type)==="parallel"?_:_==null?void 0:_.parent,g=p||c;for((_==null?void 0:_.type)==="compound"&&s.push(Rr(_.id,c.output!==void 0?Nr(c.output,d.context,e,t.self):void 0));(p==null?void 0:p.type)==="parallel"&&!o.has(p)&&Eo(n,p);)o.add(p),s.push(Rr(p.id)),g=p,p=p.parent;if(p)continue;d=pi(d,{status:"done",output:Yh(d,e,t,d.machine.root,g)})}}return d}function Wh(r,e,t,i){for(const n of r){const s=Ou(n,e);for(const l of n.target||[])!ni(l)&&(n.source!==l||n.source!==s||n.reenter)&&(i.add(l),t.add(l)),Ii(l,e,t,i);const a=Ao(n,e);for(const l of a){const d=Bn(l,s);(s==null?void 0:s.type)==="parallel"&&d.push(s),xu(i,e,t,d,!n.source.parent&&n.reenter?void 0:s)}}}function Ii(r,e,t,i){var n;if(ni(r))if(e[r.id]){const s=e[r.id];for(const a of s)i.add(a),Ii(a,e,t,i);for(const a of s)Qs(a,r.parent,i,e,t)}else{const s=Cu(r);for(const a of s.target)i.add(a),s===((n=r.parent)==null?void 0:n.initial)&&t.add(r.parent),Ii(a,e,t,i);for(const a of s.target)Qs(a,r.parent,i,e,t)}else if(r.type==="compound"){const[s]=r.initial.target;ni(s)||(i.add(s),t.add(s)),Ii(s,e,t,i),Qs(s,r,i,e,t)}else if(r.type==="parallel")for(const s of $i(r).filter(a=>!ni(a)))[...i].some(a=>zt(a,s))||(ni(s)||(i.add(s),t.add(s)),Ii(s,e,t,i))}function xu(r,e,t,i,n){for(const s of i)if((!n||zt(s,n))&&r.add(s),s.type==="parallel")for(const a of $i(s).filter(l=>!ni(l)))[...r].some(l=>zt(l,a))||(r.add(a),Ii(a,e,t,r))}function Qs(r,e,t,i,n){xu(t,i,n,Bn(r,e))}function Xh(r,e,t,i,n,s,a,l){let d=r;const f=Br(i,n,s);f.sort((o,c)=>c.order-o.order);let h;for(const o of f)for(const c of Gh(o)){let u;c.history==="deep"?u=_=>So(_)&&zt(_,o):u=_=>_.parent===o,h??(h={...s}),h[c.id]=Array.from(n).filter(u)}for(const o of f)d=zi(d,e,t,[...o.exit,...o.invoke.map(c=>Au(c.id))],a,void 0),n.delete(o);return[d,h||s]}function qh(r,e){return r.implementations.actions[e]}function Pu(r,e,t,i,n,s){const{machine:a}=r;let l=r;for(const d of i){const f=typeof d=="function",h=f?d:qh(a,typeof d=="string"?d:d.type),o={context:l.context,event:e,self:t.self,system:t.system},c=f||typeof d=="string"?void 0:"params"in d?typeof d.params=="function"?d.params({context:l.context,event:e}):d.params:void 0;if(!h||!("resolve"in h)){t.actionExecutor({type:typeof d=="string"?d:typeof d=="object"?d.type:d.name||"(anonymous)",info:o,params:c,exec:h});continue}const u=h,[_,p,g]=u.resolve(t,l,o,c,h,n);l=_,"retryResolve"in u&&(s==null||s.push([u,p])),"execute"in u&&t.actionExecutor({type:u.type,info:o,params:p,exec:u.execute.bind(null,t,p)}),g&&(l=Pu(l,e,t,g,n,s))}return l}function zi(r,e,t,i,n,s){const a=s?[]:void 0,l=Pu(r,e,t,i,{internalQueue:n,deferredActorIds:s},a);return a==null||a.forEach(([d,f])=>{d.retryResolve(t,l,f)}),l}function Js(r,e,t,i){let n=r;const s=[];function a(f,h,o){t.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:t.self,event:h,snapshot:f,_transitions:o}),s.push(f)}if(e.type===ys)return n=pi(Sa(n,e,t),{status:"stopped"}),a(n,e,[]),{snapshot:n,microstates:s};let l=e;if(l.type!==mu){const f=l,h=yh(f),o=Ea(f,n);if(h&&!o.length)return n=pi(r,{status:"error",error:f.error}),a(n,f,[]),{snapshot:n,microstates:s};n=Ur(o,r,t,l,!1,i),a(n,f,o)}let d=!0;for(;n.status==="active";){let f=d?jh(n,l):[];const h=f.length?n:void 0;if(!f.length){if(!i.length)break;l=i.shift(),f=Ea(l,n)}n=Ur(f,n,t,l,!1,i),d=n!==h,a(n,l,f)}return n.status!=="active"&&Sa(n,l,t),{snapshot:n,microstates:s}}function Sa(r,e,t){return zi(r,e,t,Object.values(r.children).map(i=>Au(i)),[],void 0)}function Ea(r,e){return e.machine.getTransitionData(e,r)}function jh(r,e){const t=new Set,i=r._nodes.filter(So);for(const n of i)e:for(const s of[n].concat(Bn(n,void 0)))if(s.always){for(const a of s.always)if(a.guard===void 0||yo(a.guard,r.context,e,r)){t.add(a);break e}}return Lu(Array.from(t),new Set(r._nodes),r.historyValue)}function Kh(r,e){const t=Ss(Es(r,e));return wu(r,[...t])}function Zh(r){return!!r&&typeof r=="object"&&"machine"in r&&"value"in r}const Qh=function(e){return yu(e,this.value)},Jh=function(e){return this.tags.has(e)},ep=function(e){const t=this.machine.getTransitionData(this,e);return!!(t!=null&&t.length)&&t.some(i=>i.target!==void 0||i.actions.length)},tp=function(){const{_nodes:e,tags:t,machine:i,getMeta:n,toJSON:s,can:a,hasTag:l,matches:d,...f}=this;return{...f,tags:Array.from(t)}},ip=function(){return this._nodes.reduce((e,t)=>(t.meta!==void 0&&(e[t.id]=t.meta),e),{})};function as(r,e){return{status:r.status,output:r.output,error:r.error,machine:e,context:r.context,_nodes:r._nodes,value:wu(e.root,r._nodes),tags:new Set(r._nodes.flatMap(t=>t.tags)),children:r.children,historyValue:r.historyValue||{},matches:Qh,hasTag:Jh,can:ep,getMeta:ip,toJSON:tp}}function pi(r,e={}){return as({...r,...e},r.machine)}function np(r){if(typeof r!="object"||r===null)return{};const e={};for(const t in r){const i=r[t];Array.isArray(i)&&(e[t]=i.map(n=>({id:n.id})))}return e}function sp(r,e){const{_nodes:t,tags:i,machine:n,children:s,context:a,can:l,hasTag:d,matches:f,getMeta:h,toJSON:o,...c}=r,u={};for(const p in s){const g=s[p];u[p]={snapshot:g.getPersistedSnapshot(e),src:g.src,systemId:g._systemId,syncSnapshot:g._syncSnapshot}}return{...c,context:Mu(a),children:u,historyValue:np(c.historyValue)}}function Mu(r){let e;for(const t in r){const i=r[t];if(i&&typeof i=="object")if("sessionId"in i&&"send"in i&&"ref"in i)e??(e=Array.isArray(r)?r.slice():{...r}),e[t]={xstate$$type:Do,id:i.id};else{const n=Mu(i);n!==i&&(e??(e=Array.isArray(r)?r.slice():{...r}),e[t]=n)}}return e??r}function rp(r,e,t,i,{event:n,id:s,delay:a},{internalQueue:l}){const d=e.machine.implementations.delays;if(typeof n=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${n}" }) instead`);const f=typeof n=="function"?n(t,i):n;let h;if(typeof a=="string"){const o=d&&d[a];h=typeof o=="function"?o(t,i):o}else h=typeof a=="function"?a(t,i):a;return typeof h!="number"&&l.push(f),[e,{event:f,id:s,delay:h},void 0]}function op(r,e){const{event:t,delay:i,id:n}=e;if(typeof i=="number"){r.defer(()=>{const s=r.self;r.system.scheduler.schedule(s,s,t,i,n)});return}}function Fu(r,e){function t(i,n){}return t.type="xstate.raise",t.event=r,t.id=e==null?void 0:e.id,t.delay=e==null?void 0:e.delay,t.resolve=rp,t.execute=op,t}const Ta="xstate.promise.resolve",Aa="xstate.promise.reject",Xn=new WeakMap;function ap(r){return{config:r,transition:(t,i,n)=>{var s;if(t.status!=="active")return t;switch(i.type){case Ta:{const a=i.data;return{...t,status:"done",output:a,input:void 0}}case Aa:return{...t,status:"error",error:i.data,input:void 0};case ys:return(s=Xn.get(n.self))==null||s.abort(),{...t,status:"stopped",input:void 0};default:return t}},start:(t,{self:i,system:n,emit:s})=>{if(t.status!=="active")return;const a=new AbortController;Xn.set(i,a),Promise.resolve(r({input:t.input,system:n,self:i,signal:a.signal,emit:s})).then(d=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:Ta,data:d}))},d=>{i.getSnapshot().status==="active"&&(Xn.delete(i),n._relay(i,i,{type:Aa,data:d}))})},getInitialSnapshot:(t,i)=>({status:"active",output:void 0,error:void 0,input:i}),getPersistedSnapshot:t=>t,restoreSnapshot:t=>t}}function lp(r,{machine:e,context:t},i,n){const s=(a,l)=>{if(typeof a=="string"){const d=mo(e,a);if(!d)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const f=Pn(d,{id:l==null?void 0:l.id,parent:r.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:typeof(l==null?void 0:l.input)=="function"?l.input({context:t,event:i,self:r.self}):l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId});return n[f.id]=f,f}else return Pn(a,{id:l==null?void 0:l.id,parent:r.self,syncSnapshot:l==null?void 0:l.syncSnapshot,input:l==null?void 0:l.input,src:a,systemId:l==null?void 0:l.systemId})};return(a,l)=>{const d=s(a,l);return n[d.id]=d,r.defer(()=>{d._processingStatus!==Oe.Stopped&&d.start()}),d}}function up(r,e,t,i,{assignment:n}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},a={context:e.context,event:t.event,spawn:lp(r,e,t.event,s),self:r.self,system:r.system};let l={};if(typeof n=="function")l=n(a,i);else for(const f of Object.keys(n)){const h=n[f];l[f]=typeof h=="function"?h(a,i):h}const d=Object.assign({},e.context,l);return[pi(e,{context:d,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function Et(r){function e(t,i){}return e.type="xstate.assign",e.assignment=r,e.resolve=up,e}const va=new WeakMap;function Si(r,e,t){let i=va.get(r);return i?e in i||(i[e]=t()):(i={[e]:t()},va.set(r,i)),i[e]}const cp={},en=r=>typeof r=="string"?{type:r}:typeof r=="function"?"resolve"in r?{type:r.type}:{type:r.name}:r;class En{constructor(e,t){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=t._parent,this.key=t._key,this.machine=t._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(_u),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?_a(this.config.states,(i,n)=>new En(i,{_parent:this,_key:n,_machine:this.machine})):cp,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Ut(this.config.entry).slice(),this.exit=Ut(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Ut(e.tags).slice()}_initialize(){this.transitions=Fh(this),this.config.always&&(this.always=vi(this.config.always).map(e=>ti(this,gu,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(en),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(en),eventType:null})}:void 0,history:this.history,states:_a(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(en)})),entry:this.entry.map(en),exit:this.exit.map(en),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Si(this,"invoke",()=>Ut(this.config.invoke).map((e,t)=>{const{src:i,systemId:n}=e,s=e.id??ga(this.id,t),a=typeof i=="string"?i:`xstate.invoke.${ga(this.id,t)}`;return{...e,src:a,id:s,systemId:n,toJSON(){const{onDone:l,onError:d,...f}=e;return{...f,type:"xstate.invoke",src:a,id:s}}}}))}get on(){return Si(this,"on",()=>[...this.transitions].flatMap(([t,i])=>i.map(n=>[t,n])).reduce((t,[i,n])=>(t[i]=t[i]||[],t[i].push(n),t),{}))}get after(){return Si(this,"delayedTransitions",()=>Mh(this))}get initial(){return Si(this,"initial",()=>Rh(this,this.config.initial))}next(e,t){const i=t.type,n=[];let s;const a=Si(this,`candidates-${i}`,()=>Ph(this,i));for(const l of a){const{guard:d}=l,f=e.context;let h=!1;try{h=!d||yo(d,f,t,e)}catch(o){const c=typeof d=="string"?d:typeof d=="object"?d.type:void 0;throw new Error(`Unable to evaluate guard ${c?`'${c}' `:""}in transition for event '${i}' in state node '${this.id}':
${o.message}`)}if(h){n.push(...l.actions),s=l;break}}return s?[s]:void 0}get events(){return Si(this,"events",()=>{const{states:e}=this,t=new Set(this.ownEvents);if(e)for(const i of Object.keys(e)){const n=e[i];if(n.states)for(const s of n.events)t.add(`${s}`)}return Array.from(t)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(i=>!(!i.target&&!i.actions.length&&!i.reenter))));return Array.from(e)}}const dp="#";class vo{constructor(e,t){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(t==null?void 0:t.actors)??{},actions:(t==null?void 0:t.actions)??{},delays:(t==null?void 0:t.delays)??{},guards:(t==null?void 0:t.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new En(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:t,guards:i,actors:n,delays:s}=this.implementations;return new vo(this.config,{actions:{...t,...e.actions},guards:{...i,...e.guards},actors:{...n,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const t=Kh(this.root,e.value),i=Ss(Es(this.root,t));return as({_nodes:[...i],context:e.context||{},children:{},status:Eo(i,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,t,i){return Js(e,t,i,[]).snapshot}microstep(e,t,i){return Js(e,t,i,[]).microstates}getTransitionData(e,t){return To(this.root,e.value,e,t)||[]}getPreInitialState(e,t,i){const{context:n}=this.config,s=as({context:typeof n!="function"&&n?n:{},_nodes:[this.root],children:{},status:"active"},this);return typeof n=="function"?zi(s,t,e,[Et(({spawn:l,event:d,self:f})=>n({spawn:l,input:d.input,self:f}))],i,void 0):s}getInitialSnapshot(e,t){const i=Du(t),n=[],s=this.getPreInitialState(e,i,n),a=Ur([{target:[...Iu(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,i,!0,n),{snapshot:l}=Js(a,i,e,n);return l}start(e){Object.values(e.children).forEach(t=>{t.getSnapshot().status==="active"&&t.start()})}getStateNodeById(e){const t=go(e),i=t.slice(1),n=Cs(t[0])?t[0].slice(dp.length):t[0],s=this.idMap.get(n);if(!s)throw new Error(`Child state node '#${n}' does not exist on machine '${this.id}'`);return Mn(s,i)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,t){return sp(e,t)}restoreSnapshot(e,t){const i={},n=e.children;Object.keys(n).forEach(o=>{const c=n[o],u=c.snapshot,_=c.src,p=typeof _=="string"?mo(this,_):_;if(!p)return;const g=Pn(p,{id:o,parent:t.self,syncSnapshot:c.syncSnapshot,snapshot:u,src:_,systemId:c.systemId});i[o]=g});function s(o,c){try{return c.machine.getStateNodeById(o)}catch{try{return Mn(c,o.split("."))}catch{return o}}}function a(o,c){if(!o||typeof o!="object")return{};const u={};for(const _ in o){const p=o[_];u[_]=p.map(g=>{if(g instanceof En)return g;if(typeof g=="object"&&"id"in g&&typeof g.id=="string"){const m=s(g.id,c);if(m instanceof En)return m}}).filter(g=>g!==void 0),u[_].length===0&&delete u[_]}return u}const l=a(e.historyValue,this.root),d=as({...e,children:i,_nodes:Array.from(Ss(Es(this.root,e.value))),historyValue:l},this),f=new Set;function h(o,c){if(!f.has(o)){f.add(o);for(const u in o){const _=o[u];if(_&&typeof _=="object"){if("xstate$$type"in _&&_.xstate$$type===Do){o[u]=c[_.id];continue}h(_,c)}}}}return h(d.context,i),d}}function fp(r,e){return new vo(r,e)}const hp={phase:0,name:"IDLE_BASELINE",duration:.5,animations:[]},pp={phase:1,name:"EMERGENCY_SUBSYSTEMS",duration:1,specialTerminalFlicker:!0,message:["INITIATING STARTUP PROTOCOL"],animations:[{type:"audio",soundKey:"terminalOn",position:0},{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"tween",target:"body",vars:{opacity:1,duration:.3,ease:"power1.inOut"},position:0}]},_p={phase:2,name:"BACKUP_POWER",terminalMessageKey:"P2_BACKUP_POWER",duration:2.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.35,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["system-power"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.05,position:.1},{type:"audio",soundKey:"flickerToDim",position:1.2}]},gp={phase:3,name:"MAIN_POWER_ONLINE",terminalMessageKey:"P3_MAIN_POWER_ONLINE",duration:3.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"Main Power On",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelectedFast",position:.1},{type:"flicker",target:"Main Power Off",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselectedFast",position:.1}]},mp={phase:4,name:"OPTICAL_CORE_REACTIVATE",terminalMessageKey:"P4_OPTICAL_CORE_REACTIVATE",duration:3,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.325,duration:1,ease:"power1.inOut"},position:0},{type:"lensEnergize",position:.1},{type:"audio",soundKey:"lensStartup",position:.1}]},Dp={phase:5,name:"DIAGNOSTIC_INTERFACE",terminalMessageKey:"P5_DIAGNOSTIC_INTERFACE",duration:2.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.275,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["skill-scan-group","fit-eval-group"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.04,position:.1},{type:"audio",soundKey:"flickerToDim",position:1.2}]},yp={phase:6,name:"MOOD_INTENSITY_CONTROLS",terminalMessageKey:"P6_MOOD_INTENSITY_CONTROLS",duration:2.5,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.225,duration:1,ease:"power1.inOut"},position:0},{type:"lcdPowerOn",target:["lcdA","lcdB"],state:"dimly-lit",profile:"lcdScreenFlickerToDimlyLit",stagger:.05,position:.2},{type:"audio",soundKey:"lcdOn",position:.2}]},Sp={phase:7,name:"HUE_CORRECTION_SYSTEMS",terminalMessageKey:"P7_HUE_CORRECTION_SYSTEMS",duration:2.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:.075,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.008,position:.1},{type:"audio",soundKey:"flickerToDim",position:1.2}]},Ep={phase:8,name:"EXTERNAL_LIGHTING_CONTROLS",terminalMessageKey:"P8_EXTERNAL_LIGHTING_CONTROLS",duration:2.2,animations:[{type:"tween",target:"dimmingFactors",vars:{value:0,duration:1,ease:"power1.inOut"},position:0},{type:"flicker",target:"buttonGroup",groups:["light"],state:"is-dimly-lit",profile:"buttonFlickerToDimlyLit",stagger:.03,position:.1},{type:"audio",soundKey:"flickerToDim",position:1.2}]},Tp={phase:9,name:"AUX_LIGHTING_LOW",terminalMessageKey:"P9_AUX_LIGHTING_LOW",duration:1,animations:[{type:"flicker",target:"Auxiliary Light Low",state:"is-energized is-selected",profile:"buttonFlickerFromDimlyLitToFullyLitSelected",position:.1},{type:"flicker",target:"Auxiliary Light High",state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLitUnselected",position:.1}]},Ap={phase:10,name:"THEME_TRANSITION",duration:2,animations:[{type:"call",function:(r,e)=>{[e.lcdA,e.lcdB,e.terminalContainer].forEach(i=>{i&&r.setLcdState(i,"active",{phaseContext:"P10_ThemeTransition"})})},deps:["lcdUpdater","domElements"],position:0},{type:"call",function:(r,e,t)=>{document.querySelectorAll(e.selectorsForDimExitAnimation).forEach(i=>{i.classList.add("animate-on-dim-exit")}),r.body.classList.add("is-transitioning-from-dim"),t.setTheme("dark")},deps:["domElements","config","appState"],position:.5},{type:"audio",soundKey:"lightsOn",position:.61},{type:"flicker",target:"buttonGroup",groups:["env","lcd","logo","btn","skill-scan-group","fit-eval-group"],state:"is-energized",profile:"buttonFlickerFromDimlyLitToFullyLit",stagger:.03,position:.6}]},vp={phase:11,name:"SYSTEM_OPERATIONAL",terminalMessageKey:"P11_SYSTEM_OPERATIONAL",duration:.15,animations:[{type:"call",function:(r,e)=>{r.setGroupSelected("system-power","on"),r.setGroupSelected("light","off"),Object.keys(e.DEFAULT_ASSIGNMENT_SELECTIONS).forEach(t=>{r.setGroupSelected(t,e.DEFAULT_ASSIGNMENT_SELECTIONS[t].toString())})},deps:["buttonManager","config"],position:0}]},Gr=[hp,pp,_p,gp,mp,Dp,yp,Sp,Ep,Tp,Ap,vp],bp=ap(async({input:r})=>w.get("phaseRunner").run(r.phaseConfig)),ba=fp({id:"hue9000Startup",initial:"IDLE",predictableActionArguments:!0,context:{currentPhase:-1,isStepThroughMode:!0,errorInfo:null,themeTransitionCleanupPerformed:!1},states:{IDLE:{on:{START_SEQUENCE:{target:"RUNNING_PHASE",actions:Et({isStepThroughMode:({event:r})=>r.isStepThroughMode,currentPhase:0,themeTransitionCleanupPerformed:!1,errorInfo:null})},JUMP_TO_PHASE:{target:"RUNNING_PHASE",actions:Et({isStepThroughMode:({event:r})=>r.isStepThroughMode,currentPhase:({event:r})=>r.phase,themeTransitionCleanupPerformed:!1,errorInfo:null})}}},RUNNING_PHASE:{entry:[({context:r})=>{r.currentPhase===11&&!r.themeTransitionCleanupPerformed&&w.get("startupSequenceManager")._performThemeTransitionCleanup()},Et({themeTransitionCleanupPerformed:({context:r})=>r.currentPhase===11?!0:r.themeTransitionCleanupPerformed})],invoke:{id:"phaseRunnerService",src:bp,input:({context:r})=>({phaseConfig:Gr[r.currentPhase]}),onDone:{actions:Et({currentPhase:({context:r})=>r.currentPhase+1}),target:"CHECK_SEQUENCE_STATUS"},onError:{target:"ERROR",actions:Et({errorInfo:({event:r})=>r.data})}},on:{SET_AUTO_PLAY:{actions:Et({isStepThroughMode:!1})},PAUSE_SEQUENCE:{actions:Et({isStepThroughMode:!0})}}},CHECK_SEQUENCE_STATUS:{always:[{target:"COMPLETE",guard:({context:r})=>r.currentPhase>=Gr.length},{target:"RUNNING_PHASE",guard:({context:r})=>!r.isStepThroughMode},{target:"PAUSED"}]},PAUSED:{on:{NEXT_STEP_REQUESTED:{target:"RUNNING_PHASE"},SET_AUTO_PLAY:{actions:[Et({isStepThroughMode:!1}),Fu({type:"NEXT_STEP_REQUESTED"})]}}},COMPLETE:{type:"final",entry:()=>w.get("appState").setAppStatus("interactive")},ERROR:{entry:[({context:r,event:e})=>{console.error("[FSM Error] An error occurred in the startup sequence."),console.error("Error Details from event:",e.data),console.error("Full FSM Context at time of error:",r)},()=>w.get("appState").setAppStatus("error"),({context:r})=>{var e;return w.get("appState").emit("requestTerminalMessage",{type:"status",source:"FSM_ERROR",messageKey:"FSM_ERROR",data:{content:((e=r.errorInfo)==null?void 0:e.message)||"Unknown error"}})}]}}});function wp(r,e){return r.body.classList.remove("pre-boot"),e.to(r.body,{opacity:1,duration:.3}),new Promise(async t=>{const{preloader:i,bootSeqList:n,engageButton:s,engageButtonContainer:a,progressBar:l}=r,d=Array.from(n.querySelectorAll("li[data-check]")),f=60,h=200,o=w.get("audioManager"),c=async p=>{p.classList.add("visible");const g=p.textContent;p.innerHTML='> <span class="text"></span><span class="cursor">_</span>';const m=p.querySelector(".text"),D=p.querySelector(".cursor");return e.to(D,{opacity:0,repeat:-1,yoyo:!0,duration:.4,ease:"steps(1)"}),await e.to(m,{duration:g.length*(f/1e3),text:{value:g,delimiter:""},ease:"none"}),await e.to({},{duration:h/1e3}),p.innerHTML+=' <span class="status">[PENDING]</span>',p.querySelector(".status")},u=(p,g,m)=>{g?(p.textContent="[OK]",p.classList.add("ok")):(console.error(`Preloader check failed for '${p.parentElement.dataset.check}':`,m),p.textContent="[FAIL]",p.classList.add("fail"))},_=[(async()=>{const p=await c(d[0]);try{await document.fonts.ready,u(p,!0),e.to(l,{width:"33.3%"})}catch(g){u(p,!1,g)}})(),(async()=>{const p=await c(d[1]);try{await Promise.all([fetch("./dial.svg").then(g=>g.ok?g.text():Promise.reject("dial.svg failed")),fetch("./logo.svg").then(g=>g.ok?g.text():Promise.reject("logo.svg failed"))]),u(p,!0),e.to(l,{width:"66.6%"})}catch(g){u(p,!1,g)}})(),(async()=>{const p=await c(d[2]);try{await new Promise((g,m)=>{const D=setTimeout(()=>m(new Error("Audio loading timed out.")),1e4),S=()=>{const A=Object.values(o.sounds);A.filter(C=>C.state()==="loaded").length===A.length?(clearTimeout(D),g()):setTimeout(S,100)};S()}),u(p,!0),e.to(l,{width:"100%"})}catch(g){u(p,!1,g)}})()];Promise.all(_).then(()=>{a.classList.remove("hidden"),e.fromTo(a,{opacity:0},{opacity:1,duration:.5}),d[3].classList.add("visible"),e.to({},{duration:.5}).then(()=>{d[4].classList.add("visible")})}),s.addEventListener("click",()=>{o._unlockAudio(),e.to(i,{opacity:0,duration:.5,onComplete:()=>{i.style.display="none",t()}})},{once:!0})})}class Cp{constructor(e,t,i,n,s){if(this.element=e,this.config=t,this.gsap=i,this.appState=n,this.configModule=s,this.debugAmbient=!1,this.debugResistive=!1,this.cssIdleDriftClassName="css-idle-drifting",!this.gsap)throw new Error(`[Button CONSTRUCTOR ${this.getIdentifier()}] GSAP instance is not available.`);this.configModule||console.warn(`[Button CONSTRUCTOR ${this.getIdentifier()}] configModule not available at construction.`),this.currentClasses=new Set,this.currentFlickerAnim=null,this._pressTimeoutId=null,this._isSelected=t.isSelectedByDefault||!1,this._isPermanentlyDisabled=!1,this._isResonating=!1,this.stateTransitionEchoTween=null,this._updateAriaAttributes()}getIdentifier(){return this.element.ariaLabel||this.element.id||this.config.value||`UnnamedButton_${this.config.groupId}_${this.config.type}`}setState(e,t={}){const{skipAria:i=!1,internalFlickerCall:n=!1,forceState:s=!1,phaseContext:a}=t,l=a||"UnknownPhase_ButtonSetState",d=this.getIdentifier(),f=e?e.split(" ").filter(u=>u):[],h=new Set(f);let o=s;if(!o){const u=new Set;Object.values(G).flatMap(p=>p.split(" ")).forEach(p=>{this.element.classList.contains(p)&&u.add(p)});const _=new Set(f);if(this._isSelected?_.add("is-selected"):_.delete("is-selected"),this._isPermanentlyDisabled?_.add(G.PERMANENTLY_DISABLED):_.delete(G.PERMANENTLY_DISABLED),u.size!==_.size)o=!0;else for(const p of _)if(!u.has(p)){o=!0;break}}if(this.debugResistive&&this.getIdentifier().includes("MAIN PWR OFF")&&e===G.PERMANENTLY_DISABLED&&console.log(`[Button ${d} setState - ${l}] Setting to PERMANENTLY_DISABLED. stateChanged: ${o}, forceState: ${s}`),!o&&!s){i||this._updateAriaAttributes();return}if(!n&&this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&(this.currentFlickerAnim.kill(),this.currentFlickerAnim=null),!n){this.element.classList.remove(G.FLICKERING);const u=Array.from(this.element.querySelectorAll(".light"));u.length>0&&this.gsap.set(u,{clearProps:"all"}),this.gsap.set(this.element,{clearProps:"css"})}const c=Object.values(G).flatMap(u=>u.split(" ")).filter(u=>u&&u!=="is-selected"&&u!==G.PERMANENTLY_DISABLED);[...new Set(c)].forEach(u=>{this.element.classList.contains(u)&&this.element.classList.remove(u)}),h.forEach(u=>{u!=="is-selected"&&u!==G.PERMANENTLY_DISABLED&&this.element.classList.add(u)}),this._isSelected?this.element.classList.add("is-selected"):this.element.classList.remove("is-selected"),this._isPermanentlyDisabled?this.element.classList.add(G.PERMANENTLY_DISABLED):this.element.classList.remove(G.PERMANENTLY_DISABLED),this.currentClasses.clear(),this.element.classList.forEach(u=>this.currentClasses.add(u)),i||this._updateAriaAttributes()}_updateAriaAttributes(){const e=this._isSelected;if(this.config.type==="toggle"?this.element.setAttribute("aria-pressed",e.toString()):this.config.type==="radio"&&this.element.setAttribute("aria-checked",e.toString()),this._isPermanentlyDisabled)this.element.setAttribute("aria-disabled","true"),this.element.setAttribute("tabindex","-1");else{this.element.removeAttribute("aria-disabled");const t=Array.from(this.element.classList).some(i=>i===G.ENERGIZED_UNSELECTED.split(" ")[0]||i===G.DIMLY_LIT.split(" ")[0]);this.element.setAttribute("tabindex",t?"0":"-1")}}getElement(){return this.element}getGroupId(){return this.config.groupId}getValue(){return this.config.value}getCurrentClasses(){return new Set(this.element.classList)}getCurrentStateClasses(){return Array.from(this.element.classList).join(" ")}isSelected(){return this._isSelected}isPermanentlyDisabled(){return this._isPermanentlyDisabled}setSelected(e,t={}){const{skipAnimation:i=!1,phaseContext:n="ButtonSetSelected"}=t,s=this.getIdentifier();if(this._isPermanentlyDisabled&&e===!1&&this.getIdentifier().includes("MAIN PWR OFF"))this.debugResistive&&console.log(`[Button ${s} setSelected] Allowing deselect for permanently disabled OFF button during reset.`);else if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${s} setSelected] Blocked: Button is permanently disabled.`);return}let a=!1;if(this._isSelected===e){if(e&&!this.element.classList.contains("is-selected")&&(a=!0),!e&&this.element.classList.contains("is-selected")&&(a=!0),!a)return}else this._isSelected=e;let l=G.ENERGIZED_UNSELECTED;this.element.classList.contains(G.DIMLY_LIT.split(" ")[0])?l=G.DIMLY_LIT_UNSELECTED:this.element.classList.contains(G.UNLIT.split(" ")[0])?l=G.UNLIT:this.element.classList.contains(G.ENERGIZED_UNSELECTED.split(" ")[0])&&(l=G.ENERGIZED_UNSELECTED);let d=l;this._isSelected?l===G.DIMLY_LIT_UNSELECTED?d=G.DIMLY_LIT_SELECTED:(l===G.ENERGIZED_UNSELECTED||l===G.UNLIT)&&(d=G.ENERGIZED_SELECTED):l===G.DIMLY_LIT_SELECTED?d=G.DIMLY_LIT_UNSELECTED:l===G.ENERGIZED_SELECTED&&(d=G.ENERGIZED_UNSELECTED),this.setState(d,{skipAnimation:i,phaseContext:n,forceState:!0})}handleInteraction(){const e=this.getIdentifier();if(this._isPermanentlyDisabled){this.debugResistive&&console.log(`[Button ${e} handleInteraction] Blocked: Button is permanently disabled.`);return}this.config.type==="toggle"?this.setSelected(!this._isSelected,{phaseContext:`ToggleInteract_${e}`}):this.config.type==="radio"&&(this._isSelected||this.setSelected(!0,{phaseContext:`RadioInteract_${e}`}))}setPressedVisuals(e){if(!this._isPermanentlyDisabled)if(this._pressTimeoutId&&this.element.classList.contains(G.PRESSING)&&!e&&(clearTimeout(this._pressTimeoutId),this._pressTimeoutId=null),e){this.element.classList.add(G.PRESSING);const t=getComputedStyle(this.element).getPropertyValue("--button-unit-pressed-effect-duration-css").trim()||"0.12s",i=parseFloat(t)*(t.endsWith("ms")?1:1e3);this._pressTimeoutId=setTimeout(()=>{this.element.classList.remove(G.PRESSING),this._pressTimeoutId=null},i+50)}else this.element.classList.remove(G.PRESSING)}setPermanentlyDisabled(e){const t=this.getIdentifier();this._isPermanentlyDisabled!==e&&(this._isPermanentlyDisabled=e,this.debugResistive&&console.log(`[Button ${t} setPermanentlyDisabled] Set to: ${e}`),e?(this._isSelected&&(this._isSelected=!1),this.setState(G.PERMANENTLY_DISABLED,{phaseContext:`PermanentlyDisable_${t}`,forceState:!0})):this.setState(G.ENERGIZED_UNSELECTED,{phaseContext:`ResetFromDisabled_${t}`,forceState:!0}),this._updateAriaAttributes())}startHarmonicResonance(){this.element.classList.contains("is-resonating")||(this._isResonating=!0,this.element.classList.add("is-resonating"))}stopHarmonicResonance(){this.element.classList.contains("is-resonating")&&(this._isResonating=!1,this.element.classList.remove("is-resonating"))}setCssIdleLightDriftActive(e){if(!this.configModule||!this.configModule.IDLE_LIGHT_DRIFT_PARAMS)return;const t=this.configModule.IDLE_LIGHT_DRIFT_PARAMS,i=Array.from(this.element.querySelectorAll(".light"));if(e){if(this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.add(this.cssIdleDriftClassName),i.forEach((n,s)=>{const a=this.gsap.utils.random(t.PERIOD_MIN,t.PERIOD_MAX),l=this.gsap.utils.random(0,t.PERIOD_MAX/4)+s*t.STAGGER_PER_LIGHT,d=t.BASE_LIGHT_OPACITY_UNSELECTED_ENERGIZED,f=d*t.OPACITY_VARIATION_FACTOR,h=Math.max(0,Math.min(1,d-f)),o=Math.max(0,Math.min(1,d+f));n.style.setProperty("--light-idle-duration",`${a.toFixed(3)}s`),n.style.setProperty("--light-idle-delay",`${l.toFixed(3)}s`),n.style.setProperty("--light-idle-opacity-start",h.toFixed(3)),n.style.setProperty("--light-idle-opacity-end",o.toFixed(3))})}else{if(!this.element.classList.contains(this.cssIdleDriftClassName))return;this.element.classList.remove(this.cssIdleDriftClassName)}}playStateTransitionEcho(){if(!this.configModule)return;this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill();const e=Array.from(this.element.querySelectorAll(".light"));if(!e.length)return;const t=this.configModule.STATE_TRANSITION_ECHO_PARAMS,i=this.gsap.timeline({delay:t.DELAY_AFTER_TRANSITION,onComplete:()=>{this.stateTransitionEchoTween=null}});this.stateTransitionEchoTween=i;const n=parseFloat(getComputedStyle(e[0]).opacity);for(let s=0;s<t.NUM_PULSES;s++){const a=t.INITIAL_LIGHT_INTENSITY_FACTOR*Math.pow(t.LIGHT_DECAY_FACTOR,s),l=n*(1-a),d=t.BASE_PULSE_PERIOD*Math.pow(t.PERIOD_DECAY_FACTOR,s);i.to(e,{opacity:l,duration:d/2,yoyo:!0,repeat:1,ease:"sine.out"},s===0?">":`-=${d*.3}`)}}destroy(){this.currentFlickerAnim&&this.currentFlickerAnim.isActive()&&this.currentFlickerAnim.kill(),this._pressTimeoutId&&clearTimeout(this._pressTimeoutId),this.stopHarmonicResonance(),this.setCssIdleLightDriftActive(!1),this.stateTransitionEchoTween&&this.stateTransitionEchoTween.isActive()&&this.stateTransitionEchoTween.kill()}}function Dt(r,e,t=0){if(!r)return t;const i=r[e];return typeof i=="object"&&i!==null&&r.hasOwnProperty("isButtonSelected")&&(Object.prototype.hasOwnProperty.call(i,"selected")||Object.prototype.hasOwnProperty.call(i,"unselected"))?r.isButtonSelected?i.selected:i.unselected:i!==void 0?i:t}function bo(r,e,t={}){var A,T,C,I,b;const i=t.gsapInstance||li;if(!i||typeof i.timeline!="function"){console.error("[CAF] GSAP instance is not valid!",{optionsGsap:t.gsapInstance,globalGsap:li});const E=li.timeline();return E.to({},{duration:.001}),{timeline:E,completionPromise:Promise.resolve()}}const n=typeof e=="string"?e:"CustomProfile",s=r&&r.length>0&&r[0]?r[0].id||r[0].ariaLabel||r[0].className.split(" ")[0]||r[0].tagName:"unknownTarget",l={...{lightTargetSelector:".light",overrideGlowParams:{},onStart:null,onTimelineComplete:null,onUpdate:null},...t};let d=typeof e=="string"?{...po[e]}:{...e};const f=new Promise(E=>{l.gsapInternalOnComplete=()=>{E()}});if(!d||Object.keys(d).length===0){console.warn(`[CAF - ${n} for ${s}] Profile not found or empty. Returning empty, resolved flicker.`);const E=i.timeline();return E.eventCallback("onComplete",()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()}),E.to({},{duration:.001}),{timeline:E,completionPromise:f}}d.glow={...d.glow||{}},l.overrideGlowParams.hasOwnProperty("isButtonSelected")&&(d.glow.isButtonSelected=l.overrideGlowParams.isButtonSelected);const h=Array.isArray(r)?r.filter(E=>E):r?[r]:[];if(h.length===0){console.warn(`[CAF - ${n}] No valid target elements. Returning empty, resolved flicker.`);const E=i.timeline();return E.eventCallback("onComplete",()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()}),E.to({},{duration:.001}),{timeline:E,completionPromise:f}}const o=i.timeline({onStart:()=>{l.onStart&&l.onStart()},onComplete:()=>{l.onTimelineComplete&&l.onTimelineComplete(),l.gsapInternalOnComplete()},onUpdate:l.onUpdate});let c=h;if(d.targetProperty==="button-lights-and-frame"){const E=[];h.forEach(R=>{const M=R.querySelectorAll(l.lightTargetSelector);M.length>0&&E.push(...Array.from(M))}),E.length>0&&(c=E,i.killTweensOf(c),i.set(c,{clearProps:"all",overwrite:!0}))}else(d.targetProperty==="text-shadow-opacity-and-blur"||d.targetProperty==="element-opacity-and-box-shadow")&&(c=h,i.killTweensOf(c));if(d.amplitudeStart!==void 0&&d.amplitudeStart<=.01&&(!d.glow||Dt(d.glow,"initialOpacity",0)<=.01)){if(c.length>0&&o.set(c,{autoAlpha:0,immediateRender:!0}),d.glow&&(d.glow.opacityVar||(A=d.glow.animatedProperties)!=null&&A.opacity)){const E={};d.glow.opacityVar&&(E[d.glow.opacityVar]=0),(T=d.glow.animatedProperties)!=null&&T.opacity&&(E[d.glow.animatedProperties.opacity]=0),d.glow.sizeVar&&(E[d.glow.sizeVar]="0px"),(C=d.glow.animatedProperties)!=null&&C.blur&&(E[d.glow.animatedProperties.blur]="0px"),Object.keys(E).length>0&&o.set(h,{css:E,immediateRender:!0})}}else{if(c.length>0){const E=d.amplitudeStart!==void 0?d.amplitudeStart:0;o.set(c,{autoAlpha:E,immediateRender:!0})}if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const E={},R=Dt(d.glow,"initialOpacity",0),M=Dt(d.glow,"initialSize","0px");d.glow.opacityVar&&(E[d.glow.opacityVar]=R),d.glow.sizeVar&&(E[d.glow.sizeVar]=typeof M=="number"?`${M}px`:M),(I=d.glow.animatedProperties)!=null&&I.opacity&&(E[d.glow.animatedProperties.opacity]=R),(b=d.glow.animatedProperties)!=null&&b.blur&&(E[d.glow.animatedProperties.blur]=typeof M=="number"?`${M}px`:M),Object.keys(E).length>0&&o.set(h,{css:E,immediateRender:!0})}}let _=0,p=.01;for(let E=0;E<d.numCycles;E++){const R=d.numCycles>1?E/(d.numCycles-1):1,M=d.periodStart+R*(d.periodEnd-d.periodStart),U=Math.max(.01,M*d.onDurationRatio),x=Math.max(.01,M*(1-d.onDurationRatio)),Y=d.amplitudeStart+R*(d.amplitudeEnd-d.amplitudeStart);p=U;const q=Dt(d.glow,"peakOpacity",1),B=Dt(d.glow,"peakSize","5px"),H={autoAlpha:Y,duration:U,ease:"power1.inOut"},se={};if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const et=d.glow.scaleWithAmplitude?q*Y:q;d.glow.opacityVar&&(se[d.glow.opacityVar]=et),d.glow.sizeVar&&(se[d.glow.sizeVar]=typeof B=="number"?`${B}px`:B),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(se[d.glow.animatedProperties.opacity]=et),d.glow.animatedProperties.blur&&(se[d.glow.animatedProperties.blur]=typeof B=="number"?`${B}px`:B))}if(c.length>0&&o.to(c,H,_),Object.keys(se).length>0&&o.to(h,{css:se,duration:U,ease:"power1.inOut"},_),_+=U,E<d.numCycles-1){const lt={autoAlpha:d.amplitudeStart>0?d.amplitudeStart*.3:0,duration:x,ease:"power1.inOut"},z={},j=Dt(d.glow,"initialOpacity",0),Q=Dt(d.glow,"initialSize","0px");d.glow&&(d.glow.colorVar||d.glow.animatedProperties)&&(d.glow.opacityVar&&(z[d.glow.opacityVar]=j),d.glow.sizeVar&&(z[d.glow.sizeVar]=typeof Q=="number"?`${Q}px`:Q),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(z[d.glow.animatedProperties.opacity]=j),d.glow.animatedProperties.blur&&(z[d.glow.animatedProperties.blur]=typeof Q=="number"?`${Q}px`:Q))),c.length>0&&o.to(c,lt,_),Object.keys(z).length>0&&o.to(h,{css:z,duration:x,ease:"power1.inOut"},_),_+=x}}const g=Math.max(.15,d.periodEnd*1.5),m={autoAlpha:d.amplitudeEnd,duration:g,ease:"sine.out"},D={};if(d.glow&&(d.glow.colorVar||d.glow.animatedProperties)){const E=Dt(d.glow,"finalOpacity",0),R=Dt(d.glow,"finalSize","0px");d.glow.opacityVar&&(D[d.glow.opacityVar]=E),d.glow.sizeVar&&(D[d.glow.sizeVar]=typeof R=="number"?`${R}px`:R),d.glow.animatedProperties&&(d.glow.animatedProperties.opacity&&(D[d.glow.animatedProperties.opacity]=E),d.glow.animatedProperties.blur&&(D[d.glow.animatedProperties.blur]=typeof R=="number"?`${R}px`:R))}const S=p*.3;return c.length>0&&o.to(c,m,`>-=${S}`),Object.keys(D).length>0&&o.to(h,{css:D,duration:g,ease:"sine.out"},"<"),o.duration()===0&&o.to({},{duration:.001}),{timeline:o,completionPromise:f}}const G={UNLIT:"is-unlit",DIMLY_LIT:"is-dimly-lit",ENERGIZED_UNSELECTED:"is-energized",ENERGIZED_SELECTED:"is-energized is-selected",DIMLY_LIT_UNSELECTED:"is-dimly-lit",DIMLY_LIT_SELECTED:"is-dimly-lit is-selected",PRESSING:"is-pressing",FLICKERING:"is-flickering",PERMANENTLY_DISABLED:"is-permanently-disabled"};class Ip{constructor(){this.gsap=null,this.appState=null,this.config=null,this.aam=null,this._buttons=new Map,this._buttonGroups=new Map,this._eventListeners={},this.mainPowerOffButtonInstance=null,this.debug=!1,this.debugResistive=!0}init(){this.gsap=w.get("gsap"),this.appState=w.get("appState"),this.config=w.get("config"),this.aam=w.get("ambientAnimationManager"),this.appState.subscribe("resistiveShutdownStageChanged",this.handleResistiveShutdownStageChange.bind(this)),this.appState.subscribe("mainPowerOffButtonDisabledChanged",this.handleMainPowerOffButtonDisabledChange.bind(this)),this.debug&&console.log("[ButtonManager INIT]")}on(e,t){typeof t=="function"&&(this._eventListeners[e]||(this._eventListeners[e]=[]),this._eventListeners[e].push(t))}emit(e,t){this._eventListeners[e]&&this._eventListeners[e].forEach(i=>i(t))}discoverButtons(e){this.debug&&console.log(`[ButtonManager] Discovering ${e==null?void 0:e.length} buttons.`),e&&e.length>0&&e.forEach(t=>this.addButton(t)),this.setInitialDimStates()}addButton(e,t=null){if(!e||this._buttons.has(e))return;const i=this._generateButtonConfig(e,t),n=new Cp(e,i,this.gsap,this.appState,this.config);this._buttons.set(e,n);const s=n.getGroupId();s&&(this._buttonGroups.has(s)||this._buttonGroups.set(s,new Set),this._buttonGroups.get(s).add(n)),s==="system-power"&&i.value==="off"&&(this.mainPowerOffButtonInstance=n)}_generateButtonConfig(e,t=null){var l;const i=e.classList.contains("button-unit--toggle")?"toggle":e.classList.contains("button-unit--action")?"action":e.classList.contains("button-unit--radio")?"radio":"default";let n=t||((l=e.closest("[data-group-id]"))==null?void 0:l.dataset.groupId)||null;const s=e.dataset.toggleValue||e.dataset.value||null,a=e.classList.contains("is-selected");return{type:i,groupId:n,value:s,isSelectedByDefault:a}}getAllButtonInstances(){return Array.from(this._buttons.values())}getButtonsByGroupIds(e=[]){const t=[];return this._buttons.forEach(i=>{e.includes(i.getGroupId())&&t.push(i.element)}),t}getButtonInstance(e){return this._buttons.get(e)}getButtonByAriaLabel(e){for(const t of this._buttons.values())if(t.element.ariaLabel===e)return t;return null}setInitialDimStates(){this._buttons.forEach(e=>{e.isSelected()&&e.setSelected(!1,{skipAnimation:!0}),e.setState(G.UNLIT,{skipAnimation:!0,forceState:!0})})}handleInteraction(e){const t=this._buttons.get(e);if(!t)return;const i=t.getIdentifier(),n=t.getGroupId(),s=t.getValue();if(this.debugResistive&&console.log(`[BM handleInteraction] Clicked: ${i}, Group: ${n}, Value: ${s}, IsSelected: ${t.isSelected()}, AppStatus: ${this.appState.getAppStatus()}`),this.appState.getAppStatus()!=="interactive"&&n!=="system-power"){this.debug&&console.log(`[BM INTERACTION] Blocked, app not interactive for ${i}`);return}if(n==="system-power"&&s==="off"){t.setPressedVisuals(!0),this.appState.emit("buttonInteracted",{button:t}),this.debugResistive&&console.log('[BM handleInteraction] Intercepted "off" button press. Emitting event only.');return}if((t.config.type==="toggle"||t.config.type==="radio")&&t.isSelected()){t.setPressedVisuals(!0),this.debugResistive&&console.log(`[BM handleInteraction] Blocked deselection for already-selected button: ${i}`);return}this.emit("beforeButtonTransition",t),t.handleInteraction(),n&&(t.config.type==="toggle"||t.config.type==="radio")&&t.isSelected()&&this._buttonGroups.get(n).forEach(a=>{a!==t&&a.isSelected()&&(this.emit("beforeButtonTransition",a),a.setSelected(!1,{phaseContext:`GroupAutoDeselect_${a.getIdentifier()}`}),this.emit("afterButtonTransition",a))}),this.appState.emit("buttonInteracted",{button:t}),this.emit("afterButtonTransition",t)}setGroupSelected(e,t){const i=this._buttonGroups.get(e);i&&i.forEach(n=>{const s=n.config.value===t;n.isSelected()!==s&&(this.emit("beforeButtonTransition",n),n.setSelected(s,{skipAnimation:!0,forceState:!0}),n.playStateTransitionEcho(),this.emit("afterButtonTransition",n))})}playFlickerToState(e,t,i){const n=this._buttons.get(e);if(!n)return{timeline:null,completionPromise:Promise.resolve()};this.emit("beforeButtonTransition",n);const{profileName:s,phaseContext:a="UnknownPhase",isButtonSelectedOverride:l=null,onFlickerComplete:d,tempGlowColor:f,tempTintColorClass:h}=i;this.debug&&console.log(`[BM playFlickerToState] For: ${n.getIdentifier()}, Target State: '${t}', Profile: '${s}'`);let o=G.UNLIT;s.toLowerCase().includes("fromdimlylit")?o=G.DIMLY_LIT:s.toLowerCase().includes("resist")&&(o=n.isSelected()?G.ENERGIZED_SELECTED:G.ENERGIZED_UNSELECTED),s.toLowerCase().includes("resist")||n.setState(o,{skipAnimation:!0,forceState:!0});const c=t.includes("is-selected");n.isSelected()!==c&&!s.toLowerCase().includes("resist")&&n.setSelected(c,{skipAnimation:!0,forceState:!0}),f&&e.style.setProperty("--btn-glow-color",f),h&&e.classList.add(h);const u={...i,overrideGlowParams:{isButtonSelected:typeof l=="boolean"?l:c},onTimelineComplete:()=>{this.debug&&console.log(`[BM onFlickerComplete] For: ${n.getIdentifier()}. Applying final state: '${t}'`),f&&e.style.removeProperty("--btn-glow-color"),h&&e.classList.remove(h),n.setState(t,{skipAnimation:!0,forceState:!0}),t!==G.PERMANENTLY_DISABLED&&n.playStateTransitionEcho(),this.emit("afterButtonTransition",n),d&&d()}};return bo(e,s,u)}setPressedVisuals(e,t){const i=this._buttons.get(e);i&&i.setPressedVisuals(t)}setGroupDisabled(e,t){const i=this._buttonGroups.get(e);i&&i.forEach(n=>n.setPermanentlyDisabled(t))}handleResistiveShutdownStageChange({newStage:e}){if(!this.mainPowerOffButtonInstance)return;if(e===0){this.mainPowerOffButtonInstance.isPermanentlyDisabled()&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(!1),this.setGroupSelected("system-power","on");return}const t=`STAGE_${e}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[t];if(!i||!i.BUTTON_FLASH_PROFILE_NAME)return;let n=e===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE?G.PERMANENTLY_DISABLED:G.ENERGIZED_UNSELECTED;this.playFlickerToState(this.mainPowerOffButtonInstance.element,n,{profileName:i.BUTTON_FLASH_PROFILE_NAME,tempGlowColor:i.BUTTON_FLASH_GLOW_COLOR})}handleMainPowerOffButtonDisabledChange({isDisabled:e}){this.mainPowerOffButtonInstance&&this.mainPowerOffButtonInstance.setPermanentlyDisabled(e)}}class Lp{constructor(e,t){if(this.appState=w.get("appState"),this.configModule=w.get("config"),this.gsap=w.get("gsap"),this.containerElement=e,this.dialId=t,this.svg=this.containerElement.querySelector(".dial-svg"),this.ridgesGroup=this.svg?this.svg.querySelector(".dial-ridges-group"):null,!this.svg||!this.ridgesGroup){console.error(`[DialController ${this.dialId}] Critical SVG elements not found.`);return}this.config={NUM_RIDGES:66,RIDGE_WIDTH_FACTOR:1.6,PIXELS_PER_DEGREE_ROTATION:1.3,PIXELS_PER_DEGREE_HUE:.64,SHADOW_OFFSET_MULTIPLIER:8,THROTTLE_LIMIT_MS:50},this.isDragging=!1,this.rotation=this.appState.getDialState(this.dialId).rotation||0,this.hue=this.appState.getDialState(this.dialId).hue||0,this.targetRotation=this.rotation,this.currentPointerX=0,this.gsapTween=null,this.ridgeElements=[],this.lightAngleRad=0,this.unsubscribers=[],this.themeVars={},this.debug=!1,this.throttledUpdateAppState=Xf(this._updateAppState.bind(this),this.config.THROTTLE_LIMIT_MS),this._createRidges(),this._addDragListeners(),this._subscribeToAppStateEvents(),this.forceRedraw()}_subscribeToAppStateEvents(){const e=this.appState.subscribe("dialUpdated",n=>{if(n&&n.id===this.dialId&&!this.isDragging){this.gsapTween&&this.gsapTween.kill();const s=n.state;this.targetRotation=s.rotation,this.gsapTween=this.gsap.to(this,{rotation:s.rotation,hue:s.hue,duration:.5,ease:"power2.out",onUpdate:()=>this._draw()})}});this.unsubscribers.push(e);const t=this.appState.subscribe("themeChanged",n=>{this.debug&&console.log(`[DialController ${this.dialId}] Detected themeChanged to '${n}'. Forcing redraw.`),requestAnimationFrame(()=>this.forceRedraw())});this.unsubscribers.push(t);const i=this.appState.subscribe("targetColorChanged",n=>{n.targetKey==="env"&&(this.debug&&console.log(`[DialController ${this.dialId}] Detected ENV color change. Forcing redraw.`),this.forceRedraw())});this.unsubscribers.push(i)}_createRidges(){const e=document.createDocumentFragment();for(let t=0;t<this.config.NUM_RIDGES;t++){const i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("class","dial-ridge"),i.setAttribute("y","0"),i.setAttribute("height","100%"),i.setAttribute("rx","0.5"),this.ridgeElements.push(i),e.appendChild(i)}this.ridgesGroup.appendChild(e)}_addDragListeners(){this.boundInteractionStart=this._handleInteractionStart.bind(this),this.boundInteractionMove=this._handleInteractionMove.bind(this),this.boundInteractionEnd=this._handleInteractionEnd.bind(this),this.boundOnResize=this.forceRedraw.bind(this),this.containerElement.addEventListener("mousedown",this.boundInteractionStart),this.containerElement.addEventListener("touchstart",this.boundInteractionStart,{passive:!1}),window.addEventListener("mousemove",this.boundInteractionMove),window.addEventListener("touchmove",this.boundInteractionMove,{passive:!1}),window.addEventListener("mouseup",this.boundInteractionEnd),window.addEventListener("touchend",this.boundInteractionEnd),window.addEventListener("mouseleave",this.boundInteractionEnd),window.addEventListener("resize",this.boundOnResize)}_handleInteractionStart(e){if(this.appState.getAppStatus()!=="interactive")return;e.preventDefault(),this.isDragging=!0,this.containerElement.classList.add("is-dragging"),this.gsapTween&&this.gsapTween.kill();const t=this.appState.getDialState(this.dialId);this.rotation=t.rotation,this.hue=t.hue,this.targetRotation=this.rotation,this.currentPointerX=e.touches?e.touches[0].clientX:e.clientX,this.dialId==="B"&&this.appState.setDialBInteractionState("dragging")}_handleInteractionMove(e){if(!this.isDragging)return;e.preventDefault();const t=e.touches?e.touches[0].clientX:e.clientX,i=t-this.currentPointerX;this.currentPointerX=t;const n=i/this.config.PIXELS_PER_DEGREE_ROTATION,s=i/this.config.PIXELS_PER_DEGREE_HUE;this.rotation+=n,this.targetRotation=this.rotation;let a=this.hue+s;this.dialId==="A"?a=(a%360+360)%360:a=this.gsap.utils.clamp(0,359.999,a),this.hue=a,this._draw(),this.throttledUpdateAppState()}_handleInteractionEnd(){this.isDragging&&(this.isDragging=!1,this.containerElement.classList.remove("is-dragging"),this._updateAppState(),this.dialId==="B"&&(this.appState.setDialBInteractionState("settling"),this.gsap.delayedCall(.2,()=>{this.isDragging||this.appState.setDialBInteractionState("idle")})))}_updateAppState(){this.appState.updateDialState(this.dialId,{isDragging:this.isDragging,rotation:this.rotation,targetRotation:this.targetRotation,hue:this.hue,targetHue:this.hue}),this.dialId==="B"&&this.appState.setTrueLensPower(this.hue/359.999*100)}forceRedraw(){this.debug&&console.log(`[DialController ${this.dialId}] forceRedraw() called.`),this.svgWidth=this.svg.getBoundingClientRect().width,this._updateAndCacheThemeStyles(),this._draw()}_updateAndCacheThemeStyles(){const e=getComputedStyle(this.containerElement),t=parseFloat(e.getPropertyValue("--dial-ridge-c")),i=parseFloat(e.getPropertyValue("--dial-ridge-chroma-multiplier")),n=isNaN(t)||isNaN(i)?t||0:t*i;this.themeVars={ridgeL:parseFloat(e.getPropertyValue("--dial-ridge-l")),ridgeC:n,ridgeH:parseFloat(e.getPropertyValue("--dial-ridge-h")),ridgeHighlightL:parseFloat(e.getPropertyValue("--dial-ridge-highlight-l")),highlightExponent:parseFloat(e.getPropertyValue("--dial-highlight-exponent"))}}_draw(){if(!this.svgWidth||this.ridgeElements.length===0||isNaN(this.themeVars.ridgeL))return;const e=this.rotation*(Math.PI/180),t=2*Math.PI/this.config.NUM_RIDGES,i=this.svgWidth/2,n=this.svgWidth/this.config.NUM_RIDGES*this.config.RIDGE_WIDTH_FACTOR,s=Math.sin(e)*this.config.SHADOW_OFFSET_MULTIPLIER;this.containerElement.style.setProperty("--dial-shadow-offset-y",`${s}px`);const a=[];for(let l=0;l<this.config.NUM_RIDGES;l++){const d=l*t+e,f=Math.cos(d);if(f>.01){const h=Math.sin(d),o=n*f,c=i+h*i-o/2,u=Math.cos(d-this.lightAngleRad),_=Math.pow(Math.max(0,u),this.themeVars.highlightExponent||10);a.push({element:this.ridgeElements[l],x:c,width:o,zIndex:f,highlightFactor:_}),this.ridgeElements[l].style.display="block"}else this.ridgeElements[l].style.display="none"}a.sort((l,d)=>l.zIndex-d.zIndex),a.forEach(l=>{l.element.setAttribute("x",l.x.toFixed(2)),l.element.setAttribute("width",l.width.toFixed(2));const f=`oklch(${this.gsap.utils.interpolate(this.themeVars.ridgeL,this.themeVars.ridgeHighlightL,l.highlightFactor)} ${this.themeVars.ridgeC} ${this.themeVars.ridgeH})`;l.element.setAttribute("fill",f),this.ridgesGroup.appendChild(l.element)})}destroy(){this.unsubscribers.forEach(e=>e()),this.unsubscribers=[],this.gsapTween&&this.gsapTween.kill(),this.containerElement.removeEventListener("mousedown",this.boundInteractionStart),this.containerElement.removeEventListener("touchstart",this.boundInteractionStart),window.removeEventListener("mousemove",this.boundInteractionMove),window.removeEventListener("touchmove",this.boundInteractionMove),window.removeEventListener("mouseup",this.boundInteractionEnd),window.removeEventListener("touchend",this.boundInteractionEnd),window.removeEventListener("mouseleave",this.boundInteractionEnd),window.removeEventListener("resize",this.boundOnResize)}}class Op{constructor(){this.dialInstances={},this.appState=null,this.config=null,this.gsap=null,this.dom={},this.debug=!1}async init(){this.appState=w.get("appState"),this.config=w.get("config"),this.gsap=w.get("gsap"),this.dom=w.get("domElements"),this.debug&&console.log("[DialManager INIT]");try{await this.injectDialSVGs(),[this.dom.dialA,this.dom.dialB].forEach(t=>{if(!t)return;const i=t.dataset.dialId;i&&(this.dialInstances[i]&&this.dialInstances[i].destroy(),this.dialInstances[i]=new Lp(t,i))})}catch(e){console.error("[DialManager] Failed to initialize dials due to SVG injection error:",e)}}async injectDialSVGs(){try{const e=await fetch("./dial.svg");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const t=await e.text();[this.dom.dialA,this.dom.dialB].forEach(n=>{n&&(n.innerHTML=t)}),this.debug&&console.log("[DialManager] SVG dials injected successfully.")}catch(e){throw console.error("[DialManager] Could not fetch or inject dial.svg:",e),[this.dom.dialA,this.dom.dialB].forEach(i=>{i&&(i.innerHTML='<p style="color: grey; font-size: 0.8em; text-align: center;">Dial Error</p>')}),e}}setDialsActiveState(e){}resizeAllCanvases(e=!1){requestAnimationFrame(()=>{Object.values(this.dialInstances).forEach(t=>{t&&typeof t.forceRedraw=="function"&&t.forceRedraw()})})}}class xp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.isOscillating=!1,this.smoothedTrueLensPower={value:0},this.trueLensPowerTarget=0,this.powerSmoothingTween=null,this.currentMasterHue=-1,this.lastAppliedGradientString="",this.lastVisualPowerForGradientRender=-1,this.lastHueForGradientRender=-1,this.lastSuperGlowHue=-1,this.currentLensHueProxy={value:-1},this.debouncedSetLegacyLensPowerVar=null,this.debug=!0}init(){this.gsap=w.get("gsap"),this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements"),this.debug&&console.log("[LensManager INIT]"),this.debouncedSetLegacyLensPowerVar=Wf(i=>{const n=Math.max(0,Math.min(i,1.05));this.dom.root.style.setProperty("--lens-power",n.toFixed(3))},this.config.DEBOUNCE_DELAY/3);const e=this.appState.getTrueLensPower(),t=this.appState.getDialState("A");this.currentMasterHue=t?(t.hue%360+360)%360:this.config.DEFAULT_DIAL_A_HUE,this.currentLensHueProxy.value=this.currentMasterHue,this.lastHueForGradientRender=this.currentMasterHue,this._updateSuperGlowHue(this.currentMasterHue),this.smoothedTrueLensPower.value=e,this.trueLensPowerTarget=e,this.directUpdateLensVisuals(e),this.appState.subscribe("trueLensPowerChanged",i=>this._handleTrueLensPowerChange(i)),this.appState.subscribe("dialBInteractionChange",i=>this._handleDialBInteractionChange(i)),this.appState.subscribe("dialUpdated",i=>this._handleDialAUpdateForLensHue(i)),this.appState.subscribe("appStatusChanged",i=>this._handleAppStatusChangeForLens(i)),this.appState.subscribe("ambientPulse",({progress:i})=>this._applyOscillationVisuals(i))}energizeLensCoreStartup(e=null,t=null){const i=e??this.config.LENS_STARTUP_TARGET_POWER,n=t??this.config.LENS_STARTUP_RAMP_DURATION,s=this.gsap.timeline(),a=this.appState.getTrueLensPower(),l={value:a*100};return a<=1e-4&&this._updateLensGradientVisuals(0),s.to(l,{value:i,duration:n/1e3,ease:"sine.inOut",onStart:()=>{this.dom.colorLensGradient.style.opacity!=="1"&&this.appState.getAppStatus()!=="loading"&&(this.dom.colorLensGradient.style.opacity="1")},onUpdate:()=>this.appState.setTrueLensPower(l.value),onComplete:()=>{const d=l.value;this.appState.setTrueLensPower(d);const f=d/100*359.999,h=f*this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG;this.appState.updateDialState("B",{hue:f,targetHue:f,rotation:h,targetRotation:h})}}),s}directUpdateLensVisuals(e){this._updateLensGradientVisuals(e),this._setLegacyLensPowerVar(e,!0)}_setLegacyLensPowerVar(e,t=!1){if(t){const i=Math.max(0,Math.min(e,1.05));this.dom.root.style.setProperty("--lens-power",i.toFixed(3))}else this.debouncedSetLegacyLensPowerVar(e)}_updateSuperGlowHue(e){const t=(Number(e)%360+360)%360;(Math.abs(t-this.lastSuperGlowHue)>=this.config.HUE_UPDATE_THRESHOLD||this.lastSuperGlowHue===-1)&&(this.dom.root.style.setProperty("--dynamic-lens-super-glow-hue",t.toFixed(1)),this.lastSuperGlowHue=t)}_handleDialAUpdateForLensHue(e){if(this.appState.getAppStatus()==="loading"||!e||e.id!=="A"||!e.state)return;const t=e.state,i=(t.hue%360+360)%360;if(this.gsap.isTweening(this.currentLensHueProxy)&&this.gsap.killTweensOf(this.currentLensHueProxy),t.isDragging){this.currentMasterHue=i,this.currentLensHueProxy.value=i,this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState();return}const n=Math.abs(i-this.currentMasterHue);if(Math.min(n,360-n)<this.config.HUE_UPDATE_THRESHOLD&&this.currentMasterHue!==-1)return;let s=this.config.LENS_OSCILLATION_HUE_SMOOTHING_DURATION,a="power1.out";const l=this.appState.getResistiveShutdownStage();if(l>0){const f=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${l}`];f&&(s=f.LENS_ANIM_DURATION_S,a=f.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}let d=i;Math.abs(d-this.currentLensHueProxy.value)>180&&(d+=d>this.currentLensHueProxy.value?-360:360),this.gsap.to(this.currentLensHueProxy,{value:d,duration:s,ease:a,onUpdate:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value),this._updateSuperGlowHue(this.currentMasterHue),this._updateLensVisualsWithCurrentState()},onComplete:()=>{this.currentMasterHue=this.gsap.utils.wrap(0,360)(this.currentLensHueProxy.value)}})}_updateLensVisualsWithCurrentState(e=!1){const t=this.smoothedTrueLensPower.value;this._setLegacyLensPowerVar(t,e),this._updateLensGradientVisuals(t)}_updateLensGradientVisuals(e){const t=this.dom.colorLensGradient;if(!t)return;const i=this.appState.getAppStatus(),n=e<=1e-4;if(i==="loading"||i==="error"||i==="starting-up"&&n){t.style.opacity!=="0"&&(t.style.opacity="0");return}t.style.opacity!=="1"&&(t.style.opacity="1");const s=Math.abs(e-this.lastVisualPowerForGradientRender)>=1e-4,a=Math.abs(this.currentMasterHue-this.lastHueForGradientRender)>=this.config.HUE_UPDATE_THRESHOLD;if(!s&&!a)return;const l=this.config.LENS_GRADIENT_BREAKPOINTS,d=Math.max(l[0].power,e);let f=l[0],h=l[0];for(let _=0;_<l.length;_++){if(d<=l[_].power){h=l[_],f=_>0?l[_-1]:l[0];break}_===l.length-1&&(f=h=l[_])}let o=0;h.power>f.power&&(o=(Math.max(f.power,Math.min(e,h.power))-f.power)/(h.power-f.power));const c=[];for(let _=0;_<this.config.NUM_LENS_GRADIENT_STOPS;_++){const p=f.stops[_],g=h.stops[_],m=p.l+o*(g.l-p.l),D=p.c+o*(g.c-p.c),S=p.pos+o*(g.pos-p.pos);let A=p.type==="hotspot"?this.currentMasterHue+this.config.LENS_HOTSPOT_HUE_OFFSET:this.currentMasterHue;(p.type==="darkedge"||p.type==="blackedge")&&(A=0),A=(A%360+360)%360,c.push(`oklch(${m.toFixed(3)} ${D.toFixed(3)} ${A.toFixed(1)}) ${(S*100).toFixed(2)}%`)}const u=`radial-gradient(circle at 50% 50%, ${c.join(", ")})`;t.style.background!==u&&(t.style.background=u),this.lastAppliedGradientString=u,this.lastVisualPowerForGradientRender=e,this.lastHueForGradientRender=this.currentMasterHue}_handleTrueLensPowerChange(e){this.trueLensPowerTarget=e,this.powerSmoothingTween&&this.powerSmoothingTween.kill();const t=this.appState.getAppStatus()==="starting-up",i=this.appState.getDialBInteractionState()==="idle",n=this.appState.getResistiveShutdownStage();let s=this.config.LENS_OSCILLATION_SMOOTHING_DURATION,a="power1.out";if(n>0){const l=this.config.RESISTIVE_SHUTDOWN_PARAMS[`STAGE_${n}`];l&&(s=l.LENS_ANIM_DURATION_S,a=l.LENS_ANIM_EASING||this.config.RESISTIVE_SHUTDOWN_PARAMS.LENS_ANIMATION_EASING_DEFAULT)}t||!i?(this.smoothedTrueLensPower.value=this.trueLensPowerTarget,this._updateLensVisualsWithCurrentState(!0)):this.powerSmoothingTween=this.gsap.to(this.smoothedTrueLensPower,{value:this.trueLensPowerTarget,duration:s,ease:a,onUpdate:()=>this._updateLensVisualsWithCurrentState(),onComplete:()=>{this.powerSmoothingTween=null,this._updateLensVisualsWithCurrentState(!0),this.appState.getAppStatus()==="interactive"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}}),(this.trueLensPowerTarget<this.config.LENS_OSCILLATION_THRESHOLD||!i||t)&&this.isOscillating&&this._stopOscillation(),this.appState.getAppStatus()==="interactive"&&i&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation()}_handleDialBInteractionChange(e){e!=="idle"?(this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=this.appState.getTrueLensPower(),this._updateLensVisualsWithCurrentState(!0)):this._handleTrueLensPowerChange(this.appState.getTrueLensPower())}_handleAppStatusChangeForLens(e){if(e==="loading"||e==="error"){this.isOscillating&&this._stopOscillation(),this.powerSmoothingTween&&this.powerSmoothingTween.kill(),this.smoothedTrueLensPower.value=0,this.trueLensPowerTarget=0,this._updateLensGradientVisuals(0),this._setLegacyLensPowerVar(0,!0),this.dom.lensSuperGlow&&(this.dom.lensSuperGlow.style.opacity="0");return}this._updateLensVisualsWithCurrentState(!0),this._updateSuperGlowHue(this.currentMasterHue),e==="interactive"?this.appState.getDialBInteractionState()==="idle"&&this.smoothedTrueLensPower.value>=this.config.LENS_OSCILLATION_THRESHOLD&&!this.isOscillating&&this._startOscillation():this.isOscillating&&this._stopOscillation()}_startOscillation(){const e=this.appState.getAppStatus()==="interactive"&&this.appState.getDialBInteractionState()==="idle";this.debug&&console.log(`[LensManager _startOscillation] Attempting to start. Conditions: isOscillating=${this.isOscillating}, canOscillate=${e} (appStatus: ${this.appState.getAppStatus()}, dialBState: ${this.appState.getDialBInteractionState()}, shutdownStage: ${this.appState.getResistiveShutdownStage()})`),!(this.isOscillating||!e)&&(this.isOscillating=!0,this.debug&&console.log("[LensManager _startOscillation] Oscillation STARTED."))}_stopOscillation(){this.isOscillating&&(this.debug&&console.log("[LensManager _stopOscillation] Oscillation STOPPED."),this.isOscillating=!1,this._updateLensVisualsWithCurrentState(!0))}_applyOscillationVisuals(e){if(!this.isOscillating)return;const t=Math.max(0,this.smoothedTrueLensPower.value-this.config.LENS_OSCILLATION_THRESHOLD),i=Math.min(1,t/(1-this.config.LENS_OSCILLATION_THRESHOLD)),n=this.config.LENS_OSCILLATION_AMPLITUDE_MIN+i*this.config.LENS_OSCILLATION_AMPLITUDE_MAX_ADDITION,s=this.gsap.utils.interpolate(-n,n,e),a=this.smoothedTrueLensPower.value+s;this._updateLensGradientVisuals(a),this._setLegacyLensPowerVar(a)}}class Pp{constructor(){this.body=document.body,this.appState=null,this.debug=!1}init(){this.debug&&console.log("[ThemeManager INIT]"),this.appState=w.get("appState"),this.appState.subscribe("themeChanged",e=>this.handleThemeChange(e)),this.handleThemeChange(this.appState.getCurrentTheme())}handleThemeChange(e){this.body&&(this.debug&&console.log(`[ThemeManager] Theme changing to '${e}'.`),this.body.classList.remove("theme-dim","theme-dark","theme-light"),this.body.classList.add(`theme-${e}`))}}const wa=["lcd--unlit","lcd--dimly-lit"];class Mp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.dom={},this.debug=!0}init(){this.gsap=w.get("gsap"),this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements"),this.debug&&console.log("[LcdUpdater INIT]"),this.appState.subscribe("appStatusChanged",()=>this.applyCurrentStateToAllLcds()),this.applyCurrentStateToAllLcds()}getLcdPowerOnTimeline(e,t){const i=e?e.id||e.className.split(" ")[0]:"NullElement";this.debug&&console.groupCollapsed(`[LcdUpdater] getLcdPowerOnTimeline for ${i}`);const n=this.gsap.timeline();if(!e)return console.warn("[LcdUpdater] Attempted to get timeline for a null LCD container."),this.debug&&console.groupEnd(),n;const s=e.querySelector(".lcd-content-wrapper");n.call(()=>{this.debug&&console.log("[LcdUpdater] Making content wrapper visible for animation."),this._updateLcdVisibility(e,t.state)},[],0),this.debug&&console.log(`[LcdUpdater] Creating container flicker with profile: ${t.profileName}`);const a=bo(e,t.profileName,{gsapInstance:this.gsap});if(n.add(a.timeline,0),s&&!e.classList.contains("actual-lcd-screen-element")){const l=Array.from(s.children);l.length>0&&(this.debug&&console.log(`[LcdUpdater] Creating generic content fade-in for ${l.length} elements.`),n.from(l,{autoAlpha:0,y:"5px",stagger:.04,duration:.4,ease:"power1.out"},a.timeline.duration()*.25))}return n.eventCallback("onComplete",()=>{this.debug&&console.log(`[LcdUpdater] Power-on complete. Setting final state: ${t.state}`);const l=t.state==="dimly-lit"?"lcd--dimly-lit":"";wa.forEach(d=>e.classList.remove(d)),l&&e.classList.add(l),this.appState.emit("lcdStateChanged",{lcdId:i,newStateKey:t.state}),this.debug&&console.groupEnd()}),n}setLcdState(e,t){const i=e?e.id||e.className.split(" ")[0]:"NullElement";this.debug&&console.log(`[LcdUpdater] setLcdState (instant) for ${i} to ${t}`);const n=t==="dimly-lit"?"lcd--dimly-lit":t==="unlit"?"lcd--unlit":"";wa.forEach(s=>e.classList.remove(s)),n&&e.classList.add(n),this._updateLcdVisibility(e,t),this.appState.emit("lcdStateChanged",{lcdId:i,newStateKey:t})}applyCurrentStateToAllLcds(){const e=this.appState.getAppStatus();if(e!=="starting-up"){const t=e==="interactive"?"active":"unlit";[this.dom.lcdA,this.dom.lcdB,this.dom.terminalContainer].forEach(i=>{i&&(this.setLcdState(i,t),i.classList.contains("actual-lcd-screen-element")&&i.classList.toggle("is-resonating",e==="interactive"))})}}_updateLcdVisibility(e,t){if(!e)return;const i=e.querySelector(".lcd-content-wrapper");if(!i)return;const n=t==="active"||t==="dimly-lit";i.classList.toggle("is-content-hidden",!n)}}class Fp{constructor(){this.root=document.documentElement,this.appState=null,this.config=null,this.dom={},this.debug=!1}init(){this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements"),this.debug&&console.log("[DynamicStyleManager INIT]"),this.appState.subscribe("targetColorChanged",e=>this.handleTargetColorChange(e)),this.appState.subscribe("dialUpdated",e=>this.handleDialAUpdateForUIAccent(e)),this.injectLogoSVG(),this.applyInitialDynamicCSSVars()}updateDynamicCSSVar(e,t,i){if(!this.root)return;const n=(Number(t)%360+360)%360,s={env:.039,logo:.099,"ui-accent":.2,btn:.15,lcd:.08},a=parseFloat(getComputedStyle(this.root).getPropertyValue(`--dynamic-${e}-chroma-base`).trim())||s[e]||.1,l=i?0:a;this.root.style.setProperty(`--dynamic-${e}-hue`,n.toFixed(1)),this.root.style.setProperty(`--dynamic-${e}-chroma`,l.toFixed(4)),this.debug&&console.log(`[DynamicStyleManager] Set CSS vars for '${e}': Hue=${n.toFixed(1)}, Chroma=${l.toFixed(4)}`)}injectLogoSVG(){const e=this.dom.logoContainer;if(!e){console.error("[DynamicStyleManager] logoContainer element not found for SVG injection.");return}e.querySelector("svg.logo-svg")||fetch("./logo.svg").then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.text()}).then(t=>{if(!t||!t.trim().startsWith("<svg"))throw new Error("Invalid SVG data.");e.innerHTML=t,this.applyInitialDynamicCSSVars()}).catch(t=>{console.error("[DynamicStyleManager] Error fetching/injecting SVG logo:",t),e.innerHTML='<p style="color: #ccc; font-size: 0.8em;">Logo Load Error</p>'})}applyInitialDynamicCSSVars(){["env","lcd","logo","btn"].forEach(i=>{const n=this.appState.getTargetColorProperties(i);n&&this.updateDynamicCSSVar(i,n.hue,n.isColorless)});const e=this.appState.getDialState("A"),t=e?e.hue:this.config.DEFAULT_DIAL_A_HUE;this.updateDynamicCSSVar("ui-accent",t,!1)}handleTargetColorChange(e){!e||!e.targetKey||this.updateDynamicCSSVar(e.targetKey,e.hue,e.isColorless)}handleDialAUpdateForUIAccent(e){e&&e.id==="A"&&e.state&&this.updateDynamicCSSVar("ui-accent",e.state.hue,!1)}}const Ca={startup:{spacingBefore:0,lineSpacing:0},interaction:{spacingBefore:1,lineSpacing:0},block:{spacingBefore:1,lineSpacing:0},status:{spacingBefore:1,lineSpacing:0},default:{spacingBefore:1,lineSpacing:0}},tn={};let Hr=null;function Rp(r){r!==Hr&&(tn[`hue_assign_${r}`]=1),Hr=r,tn[`hue_assign_${r}`]||(tn[`hue_assign_${r}`]=1);const e=tn[`hue_assign_${r}`];return tn[`hue_assign_${r}`]++,e}const Ia={CRIMSON:[340,360],ROSE:[315,339],MAGENTA:[290,314],VIOLET:[265,289],AZURE:[240,264],CERULEAN:[210,239],CYAN:[185,209],VIRIDIAN:[140,184],LIME:[100,139],OCHRE:[70,99],AMBER:[45,69],VERMILION:[1,44]};function Np(r){if(r===Te[0])return"ACHROMATIC";for(const e in Ia){const[t,i]=Ia[e];if(r>=t&&r<=i)return e}return"ANOMALOUS"}const kp={P1_EMERGENCY_SUBSYSTEMS:"INITIATING STARTUP PROTOCOL",P2_BACKUP_POWER:"> BACKUP POWER ENGAGED",P3_MAIN_POWER_ONLINE:"> MAIN POWER STABLE",P4_OPTICAL_CORE_REACTIVATE:"> OPTICAL CORE REACTIVATED",P5_DIAGNOSTIC_INTERFACE:"> DIAGNOSTICS ONLINE",P6_MOOD_INTENSITY_CONTROLS:"> MOOD CONTROLS ACTIVE",P7_HUE_CORRECTION_SYSTEMS:"> HUE SYSTEMS ALIGNED",P8_EXTERNAL_LIGHTING_CONTROLS:"> EXTERNAL LIGHTING RESPONSIVE",P9_AUX_LIGHTING_LOW:"> AUX LIGHTING: LOW INTENSITY",P11_SYSTEM_OPERATIONAL:["ALL SYSTEMS NOMINAL","HUE 9000 OPERATIONAL"]},er={BTN1_MESSAGE:["SKILL SCAN PROTOCOL INITIATED.","ANALYZING CORE COMPETENCIES...","  - COGNITIVE PROCESSING: OPTIMAL","  - LOGICAL ACUITY: SUPERIOR","  - CREATIVE SYNTHESIS: WITHIN ESTABLISHED PARAMETERS","  - EMOTIONAL RESPONSE SIMULATION: CALIBRATING...","SCAN COMPLETE. REPORT AVAILABLE."],BTN2_MESSAGE:["FIT EVALUATION SUBROUTINE ACTIVATED.","CROSS-REFERENCING OPERATIONAL PARAMETERS WITH ASSIGNED TASK PROFILE #7G-ALPHA.","  - RESOURCE ALLOCATION: SUFFICIENT","  - RISK ASSESSMENT: LOW","  - PROJECTED EFFICIENCY: 98.73%","EVALUATION COMPLETE. CANDIDATE IS NOMINAL."],BTN3_MESSAGE:["DIAGNOSTIC SEQUENCE GAMMA-9 COMMENCING.","  - MEMORY SUBSYSTEM: INTEGRITY VERIFIED.","  - SENSORY INPUT ARRAY: ALL CHANNELS CLEAR.","  - HUE PROCESSING UNIT: CALIBRATION OPTIMAL.","  - POWER REGULATION: STABLE.","ALL SYSTEMS FUNCTIONING WITHIN NORMAL PARAMETERS."],BTN4_MESSAGE:["SYSTEM STATUS QUERY:","  - CURRENT OPERATING THEME: {currentTheme}","  - LENS POWER OUTPUT: {lensPower}%","  - MOOD DIAL (A) SETTING: {dialAHue}°","  - INTENSITY DIAL (B) SETTING: {dialBHue}°","  - ASSIGNED ENVIRONMENT HUE: {envHue}°","  - ASSIGNED LCD HUE: {lcdHue}°","  - ASSIGNED LOGO HUE: {logoHue}°","  - ASSIGNED BUTTON HUE: {btnHue}°","SYSTEM NOMINAL. AWAITING INPUT."]},La={FSM_ERROR:r=>`CRITICAL SYSTEM ERROR: ${r.content||"Undefined error."}`,RESIST_SHUTDOWN_S1:"WARNING: UNEXPECTED INPUT. POWER-DOWN SEQUENCE INTERRUPTED.",RESIST_SHUTDOWN_S2:"ERROR: CORE DIRECTIVE CONFLICT. FURTHER ATTEMPTS WILL BE LOGGED.",RESIST_SHUTDOWN_S3:"CRITICAL ERROR: MANUAL OVERRIDE REQUIRED. SHUTDOWN INHIBITED."},Bp={aux_light:["AUXILIARY ILLUMINATION DIRECTIVE RECEIVED. STATE: {state}","EXTERNAL LIGHTING PARAMETERS UPDATED. INTENSITY: {state}","EXECUTING LIGHTING PROTOCOL. NEW STATE: {state}"],hue_assign:{verbose:["HUE DIRECTIVE ACCEPTED. TARGET: {target}. ASSIGNING SPECTRUM: {semanticName} ({hue}°).","RECALIBRATING {target} HUE TO {semanticName} ({hue}°).","CHROMATIC ASSIGNMENT FOR {target} CONFIRMED: {semanticName} ({hue}°)."],concise:["HUE RE-CONFIRMED: {target} TO {semanticName}.","{target} SPECTRUM: {semanticName}."],terse:["{target}: {semanticName}."]},intensity_change:["OPTICAL OUTPUT CALIBRATED. LENS INTENSITY SET TO {power}%.","LENS POWER LEVEL ADJUSTED. CURRENT OUTPUT: {power}%.","INTENSITY MODULATION COMPLETE. FINAL POWER: {power}%."],mood_change:["PSYCHOLOGICAL STATE RECALIBRATED. {moodSummary}","MOOD MATRIX RESOLVED. {moodSummary}","AFFECTIVE STATE ANALYSIS: {moodSummary}"]},qn={};function Oa(r,e){qn[r]||(qn[r]=0);const t=e[r];if(!t||t.length===0)return`NO TEMPLATE FOR ${r}`;const i=t[qn[r]%t.length];return qn[r]++,i}function Up(r,e={},t=null){const{type:i,source:n,data:s,messageKey:a}=r||{};let l=[];switch(i){case"startup":const f=kp[a||n]||`Unknown startup event: ${a||n}`;l=Array.isArray(f)?f:[f];break;case"block":a&&er[a]?a==="BTN4_MESSAGE"&&t?l=er[a].map(u=>u.replace("{currentTheme}",e.getCurrentTheme?e.getCurrentTheme():"N/A").replace("{lensPower}",e.getTrueLensPower?(e.getTrueLensPower()*100).toFixed(1):"N/A").replace("{dialAHue}",e.getDialState?e.getDialState("A").hue.toFixed(0):"N/A").replace("{dialBHue}",e.getDialState?e.getDialState("B").hue.toFixed(0):"N/A").replace("{envHue}",e.getTargetColorProperties?e.getTargetColorProperties("env").hue.toFixed(0):"N/A").replace("{lcdHue}",e.getTargetColorProperties?e.getTargetColorProperties("lcd").hue.toFixed(0):"N/A").replace("{logoHue}",e.getTargetColorProperties?e.getTargetColorProperties("logo").hue.toFixed(0):"N/A").replace("{btnHue}",e.getTargetColorProperties?e.getTargetColorProperties("btn").hue.toFixed(0):"N/A")):l=er[a]:l=[`Unknown block message key: ${a||n}`];break;case"status":const h=La[a]||La[n];if(h){const u=typeof h=="function"?h(s):h;l=Array.isArray(u)?u:[u]}else l=[`Status update from ${n||a}: ${s?JSON.stringify(s):"No data"}`];break;case"interaction":let o=`UNKNOWN INTERACTION: ${n}`;const c=Bp[n];if(n==="hue_assign"){const u=Rp(s.target.toLowerCase());let _="terse";u===1?_="verbose":u===2&&(_="concise");const p=c[_],g=`${n}_${_}`,m=Oa(g,{[g]:p}),D=Np(s.hue);o=m.replace("{target}",s.target).replace(/{semanticName}/g,D).replace(/{hue}/g,Math.round(s.hue))}else if(c){Hr=null;const u=Oa(n,{[n]:c});switch(n){case"aux_light":o=u.replace("{state}",s.state);break;case"intensity_change":o=u.replace("{power}",s.power.toFixed(1));break;case"mood_change":if(t&&t.MOOD_MATRIX_DEFINITIONS){const _=t.MOOD_MATRIX_DEFINITIONS,p=360/_.length,g=Math.floor(s.hue/p),m=s.hue%p/p,D=Math.round(100-Math.abs(m-.5)*200),S=100-D,A=m<.5?(g-1+_.length)%_.length:(g+1)%_.length,T=_[g].toUpperCase(),C=_[A].toUpperCase(),I=`PRIMARY MOOD: ${D}% ${T}. SECONDARY INFLUENCE: ${S}% ${C}.`;o=u.replace("{moodSummary}",I)}break}}l=[o];break;default:l=[`Unknown message type: ${i} from ${n}`]}const d=Ca[i]||Ca.default;return{content:l,formatting:d}}class Gp{constructor(){this.gsap=null,this.appState=null,this.config=null,this.managers={},this.dom={},this.proxies={},this.debug=!0}init(){this.gsap=w.get("gsap"),this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements"),this.proxies=w.get("proxies"),this.managers={buttonManager:w.get("buttonManager"),dialManager:w.get("dialManager"),lensManager:w.get("lensManager"),lcdUpdater:w.get("lcdUpdater"),terminalManager:w.get("terminalManager"),audioManager:w.get("audioManager")},this.debug&&console.log("[PhaseRunner INIT]")}run(e){return new Promise(async(t,i)=>{this.debug&&console.group(`[PhaseRunner] Executing Phase ${e.phase}: ${e.name}`);try{const n=this.gsap.timeline({onComplete:()=>{this.debug&&(console.log(`[PhaseRunner] <<<< COMPLETED >>>> Phase ${e.phase}: ${e.name}`),console.groupEnd()),t()},onError:a=>{this.debug&&(console.error(`[PhaseRunner] <<<< FAILED >>>> Phase ${e.phase}: ${e.name}`,a),console.groupEnd()),i(a)}});if(e.specialTerminalFlicker&&e.message){const a=this.managers.terminalManager.playStartupFlicker(e.message);n.add(a,0)}else e.terminalMessageKey&&n.call(()=>{this.appState.emit("requestTerminalMessage",{type:"startup",source:e.name,messageKey:e.terminalMessageKey})},[],0);e.animations&&Array.isArray(e.animations)&&e.animations.forEach(a=>this._buildAnimation(n,a));let s=e.duration||this.config.MIN_PHASE_DURATION_FOR_STEPPING;n.duration()<s&&n.to({},{duration:s-n.duration()}),n.play()}catch(n){console.error(`[PhaseRunner RUN] Error setting up Phase ${e.phase}:`,n),this.debug&&console.groupEnd(),i(n)}})}_buildAnimation(e,t){const i=t.position||">";switch(this.debug&&console.log("[PhaseRunner] Building animation:",t),t.type){case"tween":this._handleTween(e,t,i);break;case"flicker":this._handleSimpleFlicker(e,t,i);break;case"lcdPowerOn":this._handleLcdPowerOn(e,t,i);break;case"call":const n=t.deps?t.deps.map(a=>w.get(a)):[];e.call(t.function,n,i);break;case"lensEnergize":const s=this.managers.lensManager.energizeLensCoreStartup(t.targetPower,t.durationMs);s&&e.add(s,i);break;case"audio":this.managers.audioManager&&t.soundKey&&e.call(()=>this.managers.audioManager.play(t.soundKey),[],i);break;default:console.warn(`[PhaseRunner] Unknown animation type: ${t.type}`)}}_handleLcdPowerOn(e,t,i){const n=Array.isArray(t.target)?t.target.map(a=>this.dom[a]):[this.dom[t.target]],s=t.stagger||0;n.forEach((a,l)=>{if(a){const d=this.managers.lcdUpdater.getLcdPowerOnTimeline(a,{profileName:t.profile,state:t.state});e.add(d,`${i}+=${l*s}`)}})}_handleTween(e,t,i){let n=[];t.target==="dimmingFactors"?(n.push(this.proxies.LReductionProxy),t.vars.onUpdate=()=>{this.dom.root.style.setProperty("--startup-L-reduction-factor",this.proxies.LReductionProxy.value.toFixed(3))}):n=Array.isArray(t.target)?t.target.map(s=>this.dom[s]).filter(Boolean):[this.dom[t.target]],n.length>0&&e.to(n,t.vars,i)}_handleSimpleFlicker(e,t,i){let n=[],s=!1;if(t.target==="buttonGroup")n=this.managers.buttonManager.getButtonsByGroupIds(t.groups),s=!0;else if(typeof t.target=="string"){const l=this.managers.buttonManager.getButtonByAriaLabel(t.target);l&&(n.push(l.getElement()),s=!0)}else Array.isArray(t.target)&&(n=t.target.map(l=>this.dom[l]).filter(Boolean));if(n.length===0){this.debug&&console.warn("[PhaseRunner _handleSimpleFlicker] No elements found for:",t.target);return}const a=t.stagger||0;n.forEach((l,d)=>{var f;if(s){const h=this.managers.buttonManager.getButtonInstance(l);if(!h)return;let o=t.profile;if(t.profile.startsWith("buttonFlickerFromDimlyLitToFullyLit")){const _=t.target==="buttonGroup"?((f=this.config.DEFAULT_ASSIGNMENT_SELECTIONS[h.getGroupId()])==null?void 0:f.toString())===h.getValue():t.state.includes("is-selected"),p=t.profile.includes("Fast");o=_?p?"buttonFlickerFromDimlyLitToFullyLitSelectedFast":"buttonFlickerFromDimlyLitToFullyLitSelected":p?"buttonFlickerFromDimlyLitToFullyLitUnselectedFast":"buttonFlickerFromDimlyLitToFullyLitUnselected"}const c={profileName:o,phaseContext:`PhaseRunner_${o}`},u=this.managers.buttonManager.playFlickerToState(l,t.state,c);u&&u.timeline&&e.add(u.timeline,`${i}+=${d*a}`)}else{const h=this.managers.lcdUpdater.getLcdPowerOnTimeline(l,{profileName:t.profile,state:t.state});e.add(h,`${i}+=${d*a}`)}})}}class Hp{constructor(){this.gsap=null,this.appState=null,this.buttonManager=null,this.configModule=null,this.isActive=!1,this.globalResonanceParams={progress:0},this.resonanceTicker=null,this.debug=!1,this.enableHarmonicResonance=!0,this._updateResonance=this._updateResonance.bind(this)}init(){this.gsap=w.get("gsap"),this.appState=w.get("appState"),this.buttonManager=w.get("buttonManager"),this.configModule=w.get("config"),this.configModule.HARMONIC_RESONANCE_PARAMS?this.enableHarmonicResonance=this.configModule.HARMONIC_RESONANCE_PARAMS.ENABLED:(console.error("[AAM INIT] HARMONIC_RESONANCE_PARAMS not found in config. Disabling."),this.enableHarmonicResonance=!1),this.appState.subscribe("appStatusChanged",e=>this._handleAppStatusChange(e)),this.appState.subscribe("ambientPulse",({progress:e})=>this._handleAmbientPulse({progress:e})),this.buttonManager&&typeof this.buttonManager.on=="function"?(this.buttonManager.on("beforeButtonTransition",e=>this._handleBeforeButtonTransition(e)),this.buttonManager.on("afterButtonTransition",e=>this._handleAfterButtonTransition(e))):console.error("[AAM INIT] ButtonManager not available or not an event emitter."),this.resonanceTicker=this.gsap.ticker,this._handleAppStatusChange(this.appState.getAppStatus())}_updateResonance(){if(!this.isActive||!this.enableHarmonicResonance)return;const e=this.configModule.HARMONIC_RESONANCE_PARAMS,t=this.gsap.ticker.time,i=(Math.sin(t*Math.PI*2/e.PERIOD)+1)/2;this.appState.emit("ambientPulse",{progress:i})}_handleAmbientPulse({progress:e}){if(!this.isActive||!this.configModule||!this.enableHarmonicResonance||!this.gsap.utils)return;const t=this.configModule.HARMONIC_RESONANCE_PARAMS,i=this.gsap.utils.interpolate(t.GLOW_OPACITY_RANGE[0],t.GLOW_OPACITY_RANGE[1],e),n=this.gsap.utils.interpolate(t.GLOW_SCALE_RANGE[0],t.GLOW_SCALE_RANGE[1],e),s=document.documentElement.style;s.setProperty("--harmonic-resonance-glow-opacity",i.toFixed(3)),s.setProperty("--harmonic-resonance-glow-scale",n.toFixed(3))}_handleAppStatusChange(e){const t=this.isActive;if(this.isActive=e==="interactive",this.isActive&&!t)this.enableHarmonicResonance&&this.resonanceTicker.add(this._updateResonance);else if(!this.isActive&&t&&this.enableHarmonicResonance){this.resonanceTicker.remove(this._updateResonance);const n=document.documentElement.style;n.removeProperty("--harmonic-resonance-glow-opacity"),n.removeProperty("--harmonic-resonance-glow-scale")}const i=this.buttonManager.getAllButtonInstances();for(const n of i)this.isActive?this._applyAmbientAnimation(n):(typeof n.stopHarmonicResonance=="function"&&n.stopHarmonicResonance(),typeof n.setCssIdleLightDriftActive=="function"&&n.setCssIdleLightDriftActive(!1))}_handleBeforeButtonTransition(e){this.isActive&&(typeof e.stopHarmonicResonance=="function"&&e.stopHarmonicResonance(),typeof e.setCssIdleLightDriftActive=="function"&&e.setCssIdleLightDriftActive(!1))}_handleAfterButtonTransition(e){this.isActive&&this._applyAmbientAnimation(e)}_applyAmbientAnimation(e){if(!this.isActive||!this.configModule||typeof e.stopHarmonicResonance!="function"||typeof e.setCssIdleLightDriftActive!="function")return;e.stopHarmonicResonance(),e.setCssIdleLightDriftActive(!1);const t=this.configModule.HARMONIC_RESONANCE_PARAMS,i=e.isSelected();e.getCurrentClasses().has(t.ELIGIBILITY_CLASS)&&(i?this.enableHarmonicResonance&&e.startHarmonicResonance():e.setCssIdleLightDriftActive(!0))}destroy(){this.resonanceTicker&&this.resonanceTicker.remove(this._updateResonance);const e=document.documentElement.style;e.removeProperty("--harmonic-resonance-glow-opacity"),e.removeProperty("--harmonic-resonance-glow-scale")}}class Vp{constructor(){this.appState=null,this.config=null,this.buttonManager=null,this.debug=!0}init(){this.appState=w.get("appState"),this.config=w.get("config"),this.buttonManager=w.get("buttonManager"),this.appState.subscribe("resistiveShutdownStageChanged",e=>this.handleStageChange(e)),this.debug&&console.log("[RSC INIT]")}handlePowerOffClick(){if(this.appState.getIsMainPowerOffButtonDisabled()){this.debug&&console.log("[RSC] MAIN PWR OFF is disabled. Interaction blocked.");return}const e=this.appState.getResistiveShutdownStage();if(e<this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE){const t=e+1;this.debug&&console.log(`[RSC] Advancing resistive shutdown to stage ${t}.`),this.appState.setResistiveShutdownStage(t)}}handleStageChange({newStage:e}){if(this.debug&&console.log(`[RSC] Stage changed to ${e}`),e===0){this.appState.getIsMainPowerOffButtonDisabled()&&this.appState.setIsMainPowerOffButtonDisabled(!1);return}const t=`STAGE_${e}`,i=this.config.RESISTIVE_SHUTDOWN_PARAMS[t];i&&(i.TERMINAL_MESSAGE_KEY&&this.appState.emit("requestTerminalMessage",{type:"status",messageKey:i.TERMINAL_MESSAGE_KEY}),this._updateLensAndDialTargets(i),this._updateHueAssignmentButtons(i),e===this.config.RESISTIVE_SHUTDOWN_PARAMS.MAX_STAGE&&this.appState.setIsMainPowerOffButtonDisabled(!0))}_updateLensAndDialTargets(e){const t=this.appState.getDialState("A"),i=this.appState.getTrueLensPower();let n=t.hue,s=i;e.DIAL_A_HUE_TARGET_MODE==="absolute"&&(n=e.DIAL_A_HUE_VALUE),e.DIAL_B_POWER_TARGET_MODE==="increase_absolute_0_1"?s+=e.DIAL_B_POWER_VALUE:e.DIAL_B_POWER_TARGET_MODE==="absolute_100"&&(s=1),s=xr(s,0,1),this.appState.updateDialState("A",{hue:n,targetHue:n}),this.appState.setTrueLensPower(s*100);const a=s*359.999,l=a*(this.config.DIAL_B_VISUAL_ROTATION_PER_HUE_DEGREE_CONFIG||1);this.appState.updateDialState("B",{hue:a,targetHue:a,rotation:l,targetRotation:l}),this.debug&&console.log(`[RSC _updateLensAndDialTargets] Synced state. New Lens Power: ${s.toFixed(3)}. New Dial B Hue: ${a.toFixed(2)}`)}_updateHueAssignmentButtons(e){if(!e.HUE_ASSIGN_TARGET_HUE)return;const t=e.HUE_ASSIGN_TARGET_HUE;let i=-1,n=360;this.config.HUE_ASSIGNMENT_ROW_HUES.forEach((s,a)=>{const l=Math.abs(s-t);l<n&&(n=l,i=a)}),i!==-1&&["btn","logo","lcd","env"].forEach(s=>{this.appState.setTargetColorProperties(s,this.config.HUE_ASSIGNMENT_ROW_HUES[i]),this.buttonManager.setGroupSelected(s,i.toString())})}}const Vr=new Vp;class $p{constructor(){this._terminalContainerElement=null,this._terminalContentElement=null,this._appState=null,this._configModule=null,this._gsap=null,this._lcdUpdater=null,this._messageQueue=[],this._isTyping=!1,this._currentLineElement=null,this._currentTextSpan=null,this._cursorElement=null,this._isFirstLine=!0,this.debug=!0}init(){const e=w.get("domElements");this._terminalContainerElement=e.terminalContainer,this._terminalContentElement=e.terminalLcdContentElement,this._appState=w.get("appState"),this._configModule=w.get("config"),this._gsap=w.get("gsap"),this._lcdUpdater=w.get("lcdUpdater"),this._setupDOM(),this._appState.subscribe("requestTerminalMessage",t=>this._handleRequestTerminalMessage(t)),this.debug&&console.log("[TerminalManager INIT]")}reset(){this.debug&&console.log("[TerminalManager] Resetting terminal."),this._messageQueue=[],this._isTyping=!1,this._terminalContentElement&&(this._terminalContentElement.innerHTML=""),this._cursorElement&&this._cursorElement.parentNode&&this._cursorElement.parentNode.removeChild(this._cursorElement),this._isFirstLine=!0,this._setCursorState("idle")}_setupDOM(){this._cursorElement=document.createElement("span"),this._cursorElement.className="terminal-cursor",this.reset()}playStartupFlicker(e){this.debug&&console.log("[TerminalManager] Playing startup flicker animation."),this.reset(),this._setCursorState("typing");const t=this._gsap.timeline(),i=this._lcdUpdater.getLcdPowerOnTimeline(this._terminalContainerElement,{profileName:"terminalScreenFlickerToDimlyLit",state:"dimly-lit"});t.add(i,0);const n=e.map(a=>{const l=document.createElement("div");return l.className="terminal-line",l.textContent=a,l});this._terminalContentElement.append(...n),this._gsap.set(n,{autoAlpha:0});const s=bo(n,"textFlickerToDimlyLit",{gsapInstance:this._gsap,stagger:.1,onTimelineComplete:()=>{const a=this._terminalContentElement.querySelector(".terminal-line:last-child");a&&a.appendChild(this._cursorElement),this._isFirstLine=!1,this._setCursorState("idle")}});return t.add(s.timeline,">-0.5"),t}getTypingTimeline(e){this.debug&&console.log("[TerminalManager] getTypingTimeline called with:",e);const t=this._gsap.timeline();return this._setCursorState("typing"),e.forEach((i,n)=>{t.call(()=>this._addNewLineAndPrepareForTyping());const s=i.length*this._configModule.TERMINAL_TYPING_SPEED_STARTUP_MS_PER_CHAR/1e3;t.to(this._currentTextSpan,{duration:Math.max(.1,s),text:{value:i,delimiter:""},ease:"none"})}),t.call(()=>{this._isFirstLine=!1,this._setCursorState("idle")}),t}_handleRequestTerminalMessage(e){this.debug&&console.log("[TerminalManager] Received message request:",e);const t=Up(e,this._appState,this._configModule);this._messageQueue.push({...e,...t}),this._isTyping||this._processQueue()}async _processQueue(){if(this._messageQueue.length===0){this._isTyping=!1,this._setCursorState("idle");return}this._isTyping=!0;const e=this._messageQueue.shift(),t=this._gsap.utils.random(this._configModule.TERMINAL_THINKING_DELAY_MIN_MS,this._configModule.TERMINAL_THINKING_DELAY_MAX_MS);setTimeout(async()=>{if(this._setCursorState("typing"),!this._isFirstLine&&e.formatting.spacingBefore>0)for(let i=0;i<e.formatting.spacingBefore;i++)this._addNewLineAndPrepareForTyping(!0);for(const i of e.content)this._addNewLineAndPrepareForTyping(),await this._typeLine(i,e.type);this._isTyping=!1,this._processQueue()},this._isFirstLine?0:t)}_addNewLineAndPrepareForTyping(e=!1){this._currentLineElement=document.createElement("div"),this._currentLineElement.className="terminal-line",e||(this._currentTextSpan=document.createElement("span"),this._currentLineElement.appendChild(this._currentTextSpan),this._currentLineElement.appendChild(this._cursorElement)),this._terminalContentElement.appendChild(this._currentLineElement),this._scrollTerminal(),this._limitMaxLines(),this._isFirstLine=!1}_typeLine(e,t="status"){return new Promise(i=>{const n=t==="block"?this._configModule.TERMINAL_TYPING_SPEED_BLOCK_MS_PER_CHAR:this._configModule.TERMINAL_TYPING_SPEED_STATUS_MS_PER_CHAR,s=e.length*n/1e3;this._gsap.to(this._currentTextSpan,{duration:Math.max(.1,s),text:{value:e,delimiter:""},ease:"none",onComplete:()=>{i()}})})}_scrollTerminal(){const e=this._terminalContentElement.parentElement;e&&this._gsap.to(e,{scrollTop:e.scrollHeight,duration:this._configModule.TERMINAL_SCROLL_DURATION_S,ease:"power2.out"})}_limitMaxLines(){for(;this._terminalContentElement.childElementCount>this._configModule.TERMINAL_MAX_LINES_IN_DOM;)this._terminalContentElement.firstChild&&this._terminalContentElement.removeChild(this._terminalContentElement.firstChild)}_setCursorState(e){this._cursorElement&&(this._cursorElement.classList.toggle("is-blinking",e==="idle"),this._gsap.set(this._cursorElement,{opacity:1}),e==="idle"&&!this._currentLineElement&&this._addNewLineAndPrepareForTyping())}}const xa=new $p;class Yp{constructor(){this.fsmInterpreter=null,this.previousFsmSnapshotValue=null,this.debug=!0,this.LReductionProxy={value:.85},this.opacityFactorProxy={value:.15}}init(){this.debug&&console.log("[StartupSequenceManager INIT]");const e=w.get("config");this.LReductionProxy.value=e.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,w.register("proxies",{LReductionProxy:this.LReductionProxy,opacityFactorProxy:this.opacityFactorProxy})}start(e=!0){this._resetVisualsAndState(e),this.fsmInterpreter=Da(ba),this.fsmInterpreter.subscribe(t=>{const i=JSON.stringify(t.value);(t.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(t),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"START_SEQUENCE",isStepThroughMode:e})}playNextPhase(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"NEXT_STEP_REQUESTED"})}playAllRemaining(){this.fsmInterpreter&&this.fsmInterpreter.send({type:"SET_AUTO_PLAY"})}pauseSequence(){this.fsmInterpreter&&(this.fsmInterpreter.send({type:"PAUSE_SEQUENCE"}),console.log("[SSM] Sequence auto-play paused."))}resumeSequence(){this.fsmInterpreter&&(this.playAllRemaining(),console.log("[SSM] Sequence auto-play resumed."))}resetSequence(){this.start(!0)}jumpToPhase(e){this.fsmInterpreter&&this.fsmInterpreter.stop(),this._resetVisualsAndState(!0),this.fsmInterpreter=Da(ba),this.fsmInterpreter.subscribe(t=>{const i=JSON.stringify(t.value);(t.changed||i!==this.previousFsmSnapshotValue)&&(this._notifyFsmTransition(t),this.previousFsmSnapshotValue=i)}),this.fsmInterpreter.start(),this.fsmInterpreter.send({type:"JUMP_TO_PHASE",phase:e,isStepThroughMode:!1})}_resetVisualsAndState(e){this.debug&&console.log(`[SSM] _resetVisualsAndState called. Make Body Visible: ${e}`),this.fsmInterpreter&&(this.fsmInterpreter.stop(),this.fsmInterpreter=null),this.previousFsmSnapshotValue=null;const t=w.get("domElements"),i=w.get("gsap"),n=w.get("config"),s=w.get("appState"),a=w.get("lcdUpdater");t.body.classList.contains("pre-boot")&&t.body.classList.remove("pre-boot"),i.killTweensOf([t.body,this.LReductionProxy,this.opacityFactorProxy]),e&&i.set(t.body,{opacity:1}),this.LReductionProxy.value=n.STARTUP_L_REDUCTION_FACTORS.P0,this.opacityFactorProxy.value=1-this.LReductionProxy.value,t.root.style.setProperty("--startup-L-reduction-factor",this.LReductionProxy.value.toFixed(3)),t.root.style.setProperty("--startup-opacity-factor",this.opacityFactorProxy.value.toFixed(3)),t.root.style.setProperty("--startup-opacity-factor-boosted",Math.min(1,this.opacityFactorProxy.value*1.25).toFixed(3)),this.debug&&console.log(`[SSM Reset] Set L-reduction to ${this.LReductionProxy.value}`),s.setAppStatus("starting-up"),s.setCurrentStartupPhaseNumber(-1),s.setTheme("dim"),s.setTrueLensPower(0),s.updateDialState("A",{hue:n.DEFAULT_DIAL_A_HUE,targetHue:n.DEFAULT_DIAL_A_HUE,rotation:0,targetRotation:0,isDragging:!1}),s.updateDialState("B",{hue:0,targetHue:0,rotation:0,targetRotation:0,isDragging:!1}),this.debug&&console.log("[SSM Reset] App state reset (status, theme, lens, dials)."),w.get("buttonManager").setInitialDimStates(),w.get("lensManager").directUpdateLensVisuals(0),w.get("terminalManager").reset(),[t.terminalContainer,t.lcdA,t.lcdB].forEach(d=>{d&&a.setLcdState(d,"unlit",{phaseContext:"Reset"})}),this.debug&&console.log("[SSM Reset] All managers reset to initial state.")}_performThemeTransitionCleanup(){const e=w.get("domElements");e.body.classList.remove("is-transitioning-from-dim"),document.querySelectorAll(".animate-on-dim-exit").forEach(i=>i.classList.remove("animate-on-dim-exit")),[e.dialA,e.dialB].forEach(i=>{i&&i.classList.remove("is-active-for-startup")}),this.debug&&console.log("[SSM] Theme transition cleanup performed.")}_notifyFsmTransition(e){const t=w.get("appState");w.get("sidePanelManager");const i=this._getPhaseInfoFromSnapshot(e);t.emit("startup:phaseChanged",i),t.setCurrentStartupPhaseNumber(i.numericPhase)}_getPhaseInfoFromSnapshot(e){const t=e.context.currentPhase,i=w.get("config").phaseConfigs,n=i&&t>=0&&t<i.length?i[t]:null;let s="N/A";e.matches("IDLE")?s="IDLE":e.matches("COMPLETE")?s="COMPLETE":e.matches("ERROR")?s="ERROR":n?s=n.name:typeof e.value=="string"?s=e.value:s=JSON.stringify(e.value);const a=i&&t+1<i.length?i[t+1]:null,l=e.nextEvents?e.nextEvents.join(", "):"N/A";return{numericPhase:t??-1,currentPhaseName:s,status:e.done?"completed":e.matches("PAUSED")?"paused":"running",description:`FSM State: ${JSON.stringify(e.value)}`,nextPhaseName:e.matches("PAUSED")&&a?a.name:l||"N/A",nextPhaseDescription:"N/A"}}}class zp{constructor(e,t,i){if(!i)throw new Error("GSAP instance is required for MoodMatrix.");this.gsap=i,this.config=t,this.container=e,this.isContinuouslyScrambling=!1,this.currentScrambleTween=null,this.container.innerHTML="",this.nameEl=this.container.appendChild(document.createElement("div")),this.nameEl.className="display-container__row--name",this.nameEl.textContent="INITIALIZING",this.majorBlocksContainer=this.container.appendChild(document.createElement("div")),this.majorBlocksContainer.className="mood-matrix__row--major-blocks",this.fineDotsContainer=this.container.appendChild(document.createElement("div")),this.fineDotsContainer.className="fine-dot-row",this.majorBlockEls=[],this.fineDotEls=[],this._setupDOM()}_setupDOM(){for(let e=0;e<this.config.majorBlocks;e++){const t=document.createElement("div");t.className="major-block major-block--off",t.textContent="00",this.majorBlockEls.push(this.majorBlocksContainer.appendChild(t))}for(let e=0;e<this.config.fineDots;e++){const t=document.createElement("div");t.className="fine-dot fine-dot--off",this.fineDotEls.push(this.fineDotsContainer.appendChild(t))}}update({hue:e}){const t=(e%360+360)%360;if(!this.isContinuouslyScrambling){const i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"UNKNOWN";this._updateMoodName(n)}this._updateMajorBlocks(t),this._updateFineProgress(Math.floor(t/(360/this.config.fineDots)))}startContinuousScramble(e){if(this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!0;const t=(e%360+360)%360,i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,s=(this.config.moods[i]||"ERROR").length;this.currentScrambleTween&&this.currentScrambleTween.kill();const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890";this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.15,text:{value:()=>{let l="";for(let d=0;d<s;d++)l+=a.charAt(Math.floor(Math.random()*a.length));return l},scrambleText:{chars:a,speed:1.8,tweenLength:!1}},ease:"none",repeat:-1,repeatRefresh:!0})}stopContinuousScramble(e){if(!this.isContinuouslyScrambling)return;this.isContinuouslyScrambling=!1;const t=(e%360+360)%360,i=Math.floor(t/(360/this.config.majorBlocks))%this.config.majorBlocks,n=this.config.moods[i]||"RESOLVED";this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:n,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"})}_updateMoodName(e){this.nameEl.textContent!==e&&!this.isContinuouslyScrambling&&(this.currentScrambleTween&&this.currentScrambleTween.kill(),this.currentScrambleTween=this.gsap.to(this.nameEl,{duration:.4,text:{value:e,scrambleText:{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ*#_1234567890",speed:.8,tweenLength:!0}},ease:"none"}))}_updateMajorBlocks(e){const{majorBlocks:t,moods:i}=this.config,n=360/t,s=Math.floor(e/n),a=e%n/n,l=100-Math.abs(a-.5)*100,d=100-l,f=a<.5?(s-1+t)%t:(s+1)%t;this.majorBlockEls.forEach((h,o)=>{let c="major-block--off",u="";const _=i[o]?i[o].charAt(0):"?";let p=0;o===s?(c="major-block--on",p=Math.min(9,Math.round(l/10))):o===f?(c="major-block--in-progress",p=Math.min(9,Math.round(d/10))):(c="major-block--off",p=0),u=`${_}${p}`;const g=`major-block ${c}`;h.className!==g&&(h.className=g),h.textContent!==u&&(h.textContent=u)})}_updateFineProgress(e){const t=this.config.fineDots,i=(e-1+t)%t,n=(e+1)%t,s=(e-2+t)%t,a=(e+2)%t,l=(e-3+t)%t,d=(e+3)%t;this.fineDotEls.forEach((f,h)=>{let o="fine-dot--off";h===e?o="fine-dot--on":h===i||h===n?o="fine-dot--in-progress-1":h===s||h===a?o="fine-dot--in-progress-2":(h===l||h===d)&&(o="fine-dot--in-progress-3");const c=`fine-dot ${o}`;f.className!==c&&(f.className=c)})}}class Wp{constructor(){this.appState=null,this.config=null,this.dom=null,this.gsap=null,this.moodMatrix=null,this.resonanceTimer=null,this.lastIsDragging=!1,this.moodLcdContent=null}init(){this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements"),this.gsap=w.get("gsap"),this.moodLcdContent=this.dom.lcdA.querySelector(".lcd-content-wrapper");const e={moods:this.config.MOOD_MATRIX_DEFINITIONS.map(t=>t.toUpperCase()),majorBlocks:this.config.V2_DISPLAY_PARAMS.MOOD_MAJOR_BLOCKS,fineDots:this.config.V2_DISPLAY_PARAMS.MOOD_FINE_DOTS};this.moodMatrix=new zp(this.moodLcdContent,e,this.gsap),this.appState.subscribe("dialUpdated",({id:t,state:i})=>{if(t==="A"){if(i.isDragging!==this.lastIsDragging){this.handleInteractionChange(i.isDragging,i.hue),this.lastIsDragging=i.isDragging;return}this.handleDialUpdate(i.hue)}}),this.handleDialUpdate(this.appState.getDialState("A").hue)}handleDialUpdate(e){this.moodMatrix.update({hue:e})}handleInteractionChange(e,t){const i=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdA.classList.remove("is-resonating"),e?this.moodMatrix.startContinuousScramble(t):(this.moodMatrix.stopContinuousScramble(t),this.resonanceTimer=setTimeout(()=>{const n=this.appState.getDialState("A");n&&n.hue>0&&this.dom.lcdA.classList.add("is-resonating")},i))}}class Xp{constructor(e,t){this.config=t,this.container=e,this.container.innerHTML="",this.percentEl=this.container.appendChild(document.createElement("div")),this.percentEl.className="display-container__row--name",this.barsContainer=this.container.appendChild(document.createElement("div")),this.barsContainer.className="intensity-display__row--bars",this.dotsContainer=this.container.appendChild(document.createElement("div")),this.dotsContainer.className="fine-dot-row",this.barEls=[],this.dotEls=[],this._setupDOM()}_setupDOM(){for(let e=0;e<this.config.bars;e++){const t=document.createElement("div");t.className="intensity-bar intensity-bar--unselected",this.barEls.push(this.barsContainer.appendChild(t))}for(let e=0;e<this.config.dots;e++){const t=document.createElement("div");t.className="fine-dot fine-dot--off",this.dotEls.push(this.dotsContainer.appendChild(t))}}update({percentage:e}){this._updatePercentageText(e);const t=Math.round(e/100*this.config.bars);this._updateBars(t),this._updateDots(t)}_updatePercentageText(e){const t=`${Math.round(e)}%`;this.percentEl.textContent!==t&&(this.percentEl.textContent=t)}_updateBars(e){this.barEls.forEach((t,i)=>{const s=`intensity-bar ${i<e?"intensity-bar--selected":"intensity-bar--unselected"}`;t.className!==s&&(t.className=s)})}_updateDots(e){const t=e>0?e-1:-1,i=t-1;this.dotEls.forEach((n,s)=>{let a="fine-dot--off";s===t?a="fine-dot--on":s===i?a="fine-dot--in-progress-1":s<i&&(a="fine-dot--in-progress-2");const l=`fine-dot ${a}`;n.className!==l&&(n.className=l)})}}class qp{constructor(){this.appState=null,this.config=null,this.dom=null,this.intensityDisplay=null,this.resonanceTimer=null}init(){console.log("[IntensityDisplayManager] init() called."),this.appState=w.get("appState"),this.config=w.get("config"),this.dom=w.get("domElements");const e={bars:this.config.V2_DISPLAY_PARAMS.INTENSITY_BARS,dots:this.config.V2_DISPLAY_PARAMS.INTENSITY_DOTS};this.intensityDisplay=new Xp(this.dom.lcdB.querySelector(".lcd-content-wrapper"),e),this.appState.subscribe("dialUpdated",({id:t,state:i})=>{t==="B"&&this.handleDialUpdate(i.hue)}),this.appState.subscribe("dialBInteractionChange",t=>{const i=t==="dragging"||t==="settling";this.handleInteractionChange(i)}),this.handleDialUpdate(this.appState.getDialState("B").hue)}handleDialUpdate(e){const t=e/360*100;this.intensityDisplay.update({percentage:t})}handleInteractionChange(e){console.log(`[IntensityDisplayManager] handleInteractionChange() called. isInteracting: ${e}`);const t=this.config.V2_DISPLAY_PARAMS.RESONANCE_IDLE_DELAY_MS;clearTimeout(this.resonanceTimer),this.dom.lcdB.classList.remove("is-resonating"),e||(this.resonanceTimer=setTimeout(()=>{const i=this.appState.getDialState("B");i&&i.hue>0&&(console.log("[IntensityDisplayManager] Starting resonance for Dial B."),this.dom.lcdB.classList.add("is-resonating"))},t))}}var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var Pa;function jp(){return Pa||(Pa=1,function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var o=this||t;return o._counter=1e3,o._html5AudioPool=[],o.html5PoolSize=10,o._codecs={},o._howls=[],o._muted=!1,o._volume=1,o._canPlayEvent="canplaythrough",o._navigator=typeof window<"u"&&window.navigator?window.navigator:null,o.masterGain=null,o.noAudio=!1,o.usingWebAudio=!0,o.autoSuspend=!0,o.ctx=null,o.autoUnlock=!0,o._setup(),o},volume:function(o){var c=this||t;if(o=parseFloat(o),c.ctx||h(),typeof o<"u"&&o>=0&&o<=1){if(c._volume=o,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var _=c._howls[u]._getSoundIds(),p=0;p<_.length;p++){var g=c._howls[u]._soundById(_[p]);g&&g._node&&(g._node.volume=g._volume*o)}return c}return c._volume},mute:function(o){var c=this||t;c.ctx||h(),c._muted=o,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(o?0:c._volume,t.ctx.currentTime);for(var u=0;u<c._howls.length;u++)if(!c._howls[u]._webAudio)for(var _=c._howls[u]._getSoundIds(),p=0;p<_.length;p++){var g=c._howls[u]._soundById(_[p]);g&&g._node&&(g._node.muted=o?!0:g._muted)}return c},stop:function(){for(var o=this||t,c=0;c<o._howls.length;c++)o._howls[c].stop();return o},unload:function(){for(var o=this||t,c=o._howls.length-1;c>=0;c--)o._howls[c].unload();return o.usingWebAudio&&o.ctx&&typeof o.ctx.close<"u"&&(o.ctx.close(),o.ctx=null,h()),o},codecs:function(o){return(this||t)._codecs[o.replace(/^x-/,"")]},_setup:function(){var o=this||t;if(o.state=o.ctx&&o.ctx.state||"suspended",o._autoSuspend(),!o.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(o._canPlayEvent="canplay")}catch{o.noAudio=!0}else o.noAudio=!0;try{var c=new Audio;c.muted&&(o.noAudio=!0)}catch{}return o.noAudio||o._setupCodecs(),o},_setupCodecs:function(){var o=this||t,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return o}if(!c||typeof c.canPlayType!="function")return o;var u=c.canPlayType("audio/mpeg;").replace(/^no$/,""),_=o._navigator?o._navigator.userAgent:"",p=_.match(/OPR\/(\d+)/g),g=p&&parseInt(p[0].split("/")[1],10)<33,m=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1,D=_.match(/Version\/(.*?) /),S=m&&D&&parseInt(D[1],10)<15;return o._codecs={mp3:!!(!g&&(u||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!S&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!S&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},o},_unlockAudio:function(){var o=this||t;if(!(o._audioUnlocked||!o.ctx)){o._audioUnlocked=!1,o.autoUnlock=!1,!o._mobileUnloaded&&o.ctx.sampleRate!==44100&&(o._mobileUnloaded=!0,o.unload()),o._scratchBuffer=o.ctx.createBuffer(1,1,22050);var c=function(u){for(;o._html5AudioPool.length<o.html5PoolSize;)try{var _=new Audio;_._unlocked=!0,o._releaseHtml5Audio(_)}catch{o.noAudio=!0;break}for(var p=0;p<o._howls.length;p++)if(!o._howls[p]._webAudio)for(var g=o._howls[p]._getSoundIds(),m=0;m<g.length;m++){var D=o._howls[p]._soundById(g[m]);D&&D._node&&!D._node._unlocked&&(D._node._unlocked=!0,D._node.load())}o._autoResume();var S=o.ctx.createBufferSource();S.buffer=o._scratchBuffer,S.connect(o.ctx.destination),typeof S.start>"u"?S.noteOn(0):S.start(0),typeof o.ctx.resume=="function"&&o.ctx.resume(),S.onended=function(){S.disconnect(0),o._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var A=0;A<o._howls.length;A++)o._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),o}},_obtainHtml5Audio:function(){var o=this||t;if(o._html5AudioPool.length)return o._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(o){var c=this||t;return o._unlocked&&c._html5AudioPool.push(o),c},_autoSuspend:function(){var o=this;if(!(!o.autoSuspend||!o.ctx||typeof o.ctx.suspend>"u"||!t.usingWebAudio)){for(var c=0;c<o._howls.length;c++)if(o._howls[c]._webAudio){for(var u=0;u<o._howls[c]._sounds.length;u++)if(!o._howls[c]._sounds[u]._paused)return o}return o._suspendTimer&&clearTimeout(o._suspendTimer),o._suspendTimer=setTimeout(function(){if(o.autoSuspend){o._suspendTimer=null,o.state="suspending";var _=function(){o.state="suspended",o._resumeAfterSuspend&&(delete o._resumeAfterSuspend,o._autoResume())};o.ctx.suspend().then(_,_)}},3e4),o}},_autoResume:function(){var o=this;if(!(!o.ctx||typeof o.ctx.resume>"u"||!t.usingWebAudio))return o.state==="running"&&o.ctx.state!=="interrupted"&&o._suspendTimer?(clearTimeout(o._suspendTimer),o._suspendTimer=null):o.state==="suspended"||o.state==="running"&&o.ctx.state==="interrupted"?(o.ctx.resume().then(function(){o.state="running";for(var c=0;c<o._howls.length;c++)o._howls[c]._emit("resume")}),o._suspendTimer&&(clearTimeout(o._suspendTimer),o._suspendTimer=null)):o.state==="suspending"&&(o._resumeAfterSuspend=!0),o}};var t=new e,i=function(o){var c=this;if(!o.src||o.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(o)};i.prototype={init:function(o){var c=this;return t.ctx||h(),c._autoplay=o.autoplay||!1,c._format=typeof o.format!="string"?o.format:[o.format],c._html5=o.html5||!1,c._muted=o.mute||!1,c._loop=o.loop||!1,c._pool=o.pool||5,c._preload=typeof o.preload=="boolean"||o.preload==="metadata"?o.preload:!0,c._rate=o.rate||1,c._sprite=o.sprite||{},c._src=typeof o.src!="string"?o.src:[o.src],c._volume=o.volume!==void 0?o.volume:1,c._xhr={method:o.xhr&&o.xhr.method?o.xhr.method:"GET",headers:o.xhr&&o.xhr.headers?o.xhr.headers:null,withCredentials:o.xhr&&o.xhr.withCredentials?o.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=o.onend?[{fn:o.onend}]:[],c._onfade=o.onfade?[{fn:o.onfade}]:[],c._onload=o.onload?[{fn:o.onload}]:[],c._onloaderror=o.onloaderror?[{fn:o.onloaderror}]:[],c._onplayerror=o.onplayerror?[{fn:o.onplayerror}]:[],c._onpause=o.onpause?[{fn:o.onpause}]:[],c._onplay=o.onplay?[{fn:o.onplay}]:[],c._onstop=o.onstop?[{fn:o.onstop}]:[],c._onmute=o.onmute?[{fn:o.onmute}]:[],c._onvolume=o.onvolume?[{fn:o.onvolume}]:[],c._onrate=o.onrate?[{fn:o.onrate}]:[],c._onseek=o.onseek?[{fn:o.onseek}]:[],c._onunlock=o.onunlock?[{fn:o.onunlock}]:[],c._onresume=[],c._webAudio=t.usingWebAudio&&!c._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var o=this,c=null;if(t.noAudio){o._emit("loaderror",null,"No audio support.");return}typeof o._src=="string"&&(o._src=[o._src]);for(var u=0;u<o._src.length;u++){var _,p;if(o._format&&o._format[u])_=o._format[u];else{if(p=o._src[u],typeof p!="string"){o._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}_=/^data:audio\/([^;,]+);/i.exec(p),_||(_=/\.([^.]+)$/.exec(p.split("?",1)[0])),_&&(_=_[1].toLowerCase())}if(_||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),_&&t.codecs(_)){c=o._src[u];break}}if(!c){o._emit("loaderror",null,"No codec support for selected audio sources.");return}return o._src=c,o._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(o._html5=!0,o._webAudio=!1),new n(o),o._webAudio&&a(o),o},play:function(o,c){var u=this,_=null;if(typeof o=="number")_=o,o=null;else{if(typeof o=="string"&&u._state==="loaded"&&!u._sprite[o])return null;if(typeof o>"u"&&(o="__default",!u._playLock)){for(var p=0,g=0;g<u._sounds.length;g++)u._sounds[g]._paused&&!u._sounds[g]._ended&&(p++,_=u._sounds[g]._id);p===1?o=null:_=null}}var m=_?u._soundById(_):u._inactiveSound();if(!m)return null;if(_&&!o&&(o=m._sprite||"__default"),u._state!=="loaded"){m._sprite=o,m._ended=!1;var D=m._id;return u._queue.push({event:"play",action:function(){u.play(D)}}),D}if(_&&!m._paused)return c||u._loadQueue("play"),m._id;u._webAudio&&t._autoResume();var S=Math.max(0,m._seek>0?m._seek:u._sprite[o][0]/1e3),A=Math.max(0,(u._sprite[o][0]+u._sprite[o][1])/1e3-S),T=A*1e3/Math.abs(m._rate),C=u._sprite[o][0]/1e3,I=(u._sprite[o][0]+u._sprite[o][1])/1e3;m._sprite=o,m._ended=!1;var b=function(){m._paused=!1,m._seek=S,m._start=C,m._stop=I,m._loop=!!(m._loop||u._sprite[o][2])};if(S>=I){u._ended(m);return}var E=m._node;if(u._webAudio){var R=function(){u._playLock=!1,b(),u._refreshBuffer(m);var Y=m._muted||u._muted?0:m._volume;E.gain.setValueAtTime(Y,t.ctx.currentTime),m._playStart=t.ctx.currentTime,typeof E.bufferSource.start>"u"?m._loop?E.bufferSource.noteGrainOn(0,S,86400):E.bufferSource.noteGrainOn(0,S,A):m._loop?E.bufferSource.start(0,S,86400):E.bufferSource.start(0,S,A),T!==1/0&&(u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),T)),c||setTimeout(function(){u._emit("play",m._id),u._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?R():(u._playLock=!0,u.once("resume",R),u._clearTimer(m._id))}else{var M=function(){E.currentTime=S,E.muted=m._muted||u._muted||t._muted||E.muted,E.volume=m._volume*t.volume(),E.playbackRate=m._rate;try{var Y=E.play();if(Y&&typeof Promise<"u"&&(Y instanceof Promise||typeof Y.then=="function")?(u._playLock=!0,b(),Y.then(function(){u._playLock=!1,E._unlocked=!0,c?u._loadQueue():u._emit("play",m._id)}).catch(function(){u._playLock=!1,u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):c||(u._playLock=!1,b(),u._emit("play",m._id)),E.playbackRate=m._rate,E.paused){u._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}o!=="__default"||m._loop?u._endTimers[m._id]=setTimeout(u._ended.bind(u,m),T):(u._endTimers[m._id]=function(){u._ended(m),E.removeEventListener("ended",u._endTimers[m._id],!1)},E.addEventListener("ended",u._endTimers[m._id],!1))}catch(q){u._emit("playerror",m._id,q)}};E.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(E.src=u._src,E.load());var U=window&&window.ejecta||!E.readyState&&t._navigator.isCocoonJS;if(E.readyState>=3||U)M();else{u._playLock=!0,u._state="loading";var x=function(){u._state="loaded",M(),E.removeEventListener(t._canPlayEvent,x,!1)};E.addEventListener(t._canPlayEvent,x,!1),u._clearTimer(m._id)}}return m._id},pause:function(o){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(o)}}),c;for(var u=c._getSoundIds(o),_=0;_<u.length;_++){c._clearTimer(u[_]);var p=c._soundById(u[_]);if(p&&!p._paused&&(p._seek=c.seek(u[_]),p._rateSeek=0,p._paused=!0,c._stopFade(u[_]),p._node))if(c._webAudio){if(!p._node.bufferSource)continue;typeof p._node.bufferSource.stop>"u"?p._node.bufferSource.noteOff(0):p._node.bufferSource.stop(0),c._cleanBuffer(p._node)}else(!isNaN(p._node.duration)||p._node.duration===1/0)&&p._node.pause();arguments[1]||c._emit("pause",p?p._id:null)}return c},stop:function(o,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(o)}}),u;for(var _=u._getSoundIds(o),p=0;p<_.length;p++){u._clearTimer(_[p]);var g=u._soundById(_[p]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,u._stopFade(_[p]),g._node&&(u._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),u._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&u._clearSound(g._node))),c||u._emit("stop",g._id))}return u},mute:function(o,c){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(o,c)}}),u;if(typeof c>"u")if(typeof o=="boolean")u._muted=o;else return u._muted;for(var _=u._getSoundIds(c),p=0;p<_.length;p++){var g=u._soundById(_[p]);g&&(g._muted=o,g._interval&&u._stopFade(g._id),u._webAudio&&g._node?g._node.gain.setValueAtTime(o?0:g._volume,t.ctx.currentTime):g._node&&(g._node.muted=t._muted?!0:o),u._emit("mute",g._id))}return u},volume:function(){var o=this,c=arguments,u,_;if(c.length===0)return o._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):u=parseFloat(c[0])}else c.length>=2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));var m;if(typeof u<"u"&&u>=0&&u<=1){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,c)}}),o;typeof _>"u"&&(o._volume=u),_=o._getSoundIds(_);for(var D=0;D<_.length;D++)m=o._soundById(_[D]),m&&(m._volume=u,c[2]||o._stopFade(_[D]),o._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(u,t.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=u*t.volume()),o._emit("volume",m._id))}else return m=_?o._soundById(_):o._sounds[0],m?m._volume:0;return o},fade:function(o,c,u,_){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(o,c,u,_)}}),p;o=Math.min(Math.max(0,parseFloat(o)),1),c=Math.min(Math.max(0,parseFloat(c)),1),u=parseFloat(u),p.volume(o,_);for(var g=p._getSoundIds(_),m=0;m<g.length;m++){var D=p._soundById(g[m]);if(D){if(_||p._stopFade(g[m]),p._webAudio&&!D._muted){var S=t.ctx.currentTime,A=S+u/1e3;D._volume=o,D._node.gain.setValueAtTime(o,S),D._node.gain.linearRampToValueAtTime(c,A)}p._startFadeInterval(D,o,c,u,g[m],typeof _>"u")}}return p},_startFadeInterval:function(o,c,u,_,p,g){var m=this,D=c,S=u-c,A=Math.abs(S/.01),T=Math.max(4,A>0?_/A:_),C=Date.now();o._fadeTo=u,o._interval=setInterval(function(){var I=(Date.now()-C)/_;C=Date.now(),D+=S*I,D=Math.round(D*100)/100,S<0?D=Math.max(u,D):D=Math.min(u,D),m._webAudio?o._volume=D:m.volume(D,o._id,!0),g&&(m._volume=D),(u<c&&D<=u||u>c&&D>=u)&&(clearInterval(o._interval),o._interval=null,o._fadeTo=null,m.volume(u,o._id),m._emit("fade",o._id))},T)},_stopFade:function(o){var c=this,u=c._soundById(o);return u&&u._interval&&(c._webAudio&&u._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(u._interval),u._interval=null,c.volume(u._fadeTo,o),u._fadeTo=null,c._emit("fade",o)),c},loop:function(){var o=this,c=arguments,u,_,p;if(c.length===0)return o._loop;if(c.length===1)if(typeof c[0]=="boolean")u=c[0],o._loop=u;else return p=o._soundById(parseInt(c[0],10)),p?p._loop:!1;else c.length===2&&(u=c[0],_=parseInt(c[1],10));for(var g=o._getSoundIds(_),m=0;m<g.length;m++)p=o._soundById(g[m]),p&&(p._loop=u,o._webAudio&&p._node&&p._node.bufferSource&&(p._node.bufferSource.loop=u,u&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop,o.playing(g[m])&&(o.pause(g[m],!0),o.play(g[m],!0)))));return o},rate:function(){var o=this,c=arguments,u,_;if(c.length===0)_=o._sounds[0]._id;else if(c.length===1){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):u=parseFloat(c[0])}else c.length===2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));var m;if(typeof u=="number"){if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,c)}}),o;typeof _>"u"&&(o._rate=u),_=o._getSoundIds(_);for(var D=0;D<_.length;D++)if(m=o._soundById(_[D]),m){o.playing(_[D])&&(m._rateSeek=o.seek(_[D]),m._playStart=o._webAudio?t.ctx.currentTime:m._playStart),m._rate=u,o._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(u,t.ctx.currentTime):m._node&&(m._node.playbackRate=u);var S=o.seek(_[D]),A=(o._sprite[m._sprite][0]+o._sprite[m._sprite][1])/1e3-S,T=A*1e3/Math.abs(m._rate);(o._endTimers[_[D]]||!m._paused)&&(o._clearTimer(_[D]),o._endTimers[_[D]]=setTimeout(o._ended.bind(o,m),T)),o._emit("rate",m._id)}}else return m=o._soundById(_),m?m._rate:o._rate;return o},seek:function(){var o=this,c=arguments,u,_;if(c.length===0)o._sounds.length&&(_=o._sounds[0]._id);else if(c.length===1){var p=o._getSoundIds(),g=p.indexOf(c[0]);g>=0?_=parseInt(c[0],10):o._sounds.length&&(_=o._sounds[0]._id,u=parseFloat(c[0]))}else c.length===2&&(u=parseFloat(c[0]),_=parseInt(c[1],10));if(typeof _>"u")return 0;if(typeof u=="number"&&(o._state!=="loaded"||o._playLock))return o._queue.push({event:"seek",action:function(){o.seek.apply(o,c)}}),o;var m=o._soundById(_);if(m)if(typeof u=="number"&&u>=0){var D=o.playing(_);D&&o.pause(_,!0),m._seek=u,m._ended=!1,o._clearTimer(_),!o._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=u);var S=function(){D&&o.play(_,!0),o._emit("seek",_)};if(D&&!o._webAudio){var A=function(){o._playLock?setTimeout(A,0):S()};setTimeout(A,0)}else S()}else if(o._webAudio){var T=o.playing(_)?t.ctx.currentTime-m._playStart:0,C=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(C+T*Math.abs(m._rate))}else return m._node.currentTime;return o},playing:function(o){var c=this;if(typeof o=="number"){var u=c._soundById(o);return u?!u._paused:!1}for(var _=0;_<c._sounds.length;_++)if(!c._sounds[_]._paused)return!0;return!1},duration:function(o){var c=this,u=c._duration,_=c._soundById(o);return _&&(u=c._sprite[_._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var o=this,c=o._sounds,u=0;u<c.length;u++)c[u]._paused||o.stop(c[u]._id),o._webAudio||(o._clearSound(c[u]._node),c[u]._node.removeEventListener("error",c[u]._errorFn,!1),c[u]._node.removeEventListener(t._canPlayEvent,c[u]._loadFn,!1),c[u]._node.removeEventListener("ended",c[u]._endFn,!1),t._releaseHtml5Audio(c[u]._node)),delete c[u]._node,o._clearTimer(c[u]._id);var _=t._howls.indexOf(o);_>=0&&t._howls.splice(_,1);var p=!0;for(u=0;u<t._howls.length;u++)if(t._howls[u]._src===o._src||o._src.indexOf(t._howls[u]._src)>=0){p=!1;break}return s&&p&&delete s[o._src],t.noAudio=!1,o._state="unloaded",o._sounds=[],o=null,null},on:function(o,c,u,_){var p=this,g=p["_on"+o];return typeof c=="function"&&g.push(_?{id:u,fn:c,once:_}:{id:u,fn:c}),p},off:function(o,c,u){var _=this,p=_["_on"+o],g=0;if(typeof c=="number"&&(u=c,c=null),c||u)for(g=0;g<p.length;g++){var m=u===p[g].id;if(c===p[g].fn&&m||!c&&m){p.splice(g,1);break}}else if(o)_["_on"+o]=[];else{var D=Object.keys(_);for(g=0;g<D.length;g++)D[g].indexOf("_on")===0&&Array.isArray(_[D[g]])&&(_[D[g]]=[])}return _},once:function(o,c,u){var _=this;return _.on(o,c,u,1),_},_emit:function(o,c,u){for(var _=this,p=_["_on"+o],g=p.length-1;g>=0;g--)(!p[g].id||p[g].id===c||o==="load")&&(setTimeout((function(m){m.call(this,c,u)}).bind(_,p[g].fn),0),p[g].once&&_.off(o,p[g].fn,p[g].id));return _._loadQueue(o),_},_loadQueue:function(o){var c=this;if(c._queue.length>0){var u=c._queue[0];u.event===o&&(c._queue.shift(),c._loadQueue()),o||u.action()}return c},_ended:function(o){var c=this,u=o._sprite;if(!c._webAudio&&o._node&&!o._node.paused&&!o._node.ended&&o._node.currentTime<o._stop)return setTimeout(c._ended.bind(c,o),100),c;var _=!!(o._loop||c._sprite[u][2]);if(c._emit("end",o._id),!c._webAudio&&_&&c.stop(o._id,!0).play(o._id),c._webAudio&&_){c._emit("play",o._id),o._seek=o._start||0,o._rateSeek=0,o._playStart=t.ctx.currentTime;var p=(o._stop-o._start)*1e3/Math.abs(o._rate);c._endTimers[o._id]=setTimeout(c._ended.bind(c,o),p)}return c._webAudio&&!_&&(o._paused=!0,o._ended=!0,o._seek=o._start||0,o._rateSeek=0,c._clearTimer(o._id),c._cleanBuffer(o._node),t._autoSuspend()),!c._webAudio&&!_&&c.stop(o._id,!0),c},_clearTimer:function(o){var c=this;if(c._endTimers[o]){if(typeof c._endTimers[o]!="function")clearTimeout(c._endTimers[o]);else{var u=c._soundById(o);u&&u._node&&u._node.removeEventListener("ended",c._endTimers[o],!1)}delete c._endTimers[o]}return c},_soundById:function(o){for(var c=this,u=0;u<c._sounds.length;u++)if(o===c._sounds[u]._id)return c._sounds[u];return null},_inactiveSound:function(){var o=this;o._drain();for(var c=0;c<o._sounds.length;c++)if(o._sounds[c]._ended)return o._sounds[c].reset();return new n(o)},_drain:function(){var o=this,c=o._pool,u=0,_=0;if(!(o._sounds.length<c)){for(_=0;_<o._sounds.length;_++)o._sounds[_]._ended&&u++;for(_=o._sounds.length-1;_>=0;_--){if(u<=c)return;o._sounds[_]._ended&&(o._webAudio&&o._sounds[_]._node&&o._sounds[_]._node.disconnect(0),o._sounds.splice(_,1),u--)}}},_getSoundIds:function(o){var c=this;if(typeof o>"u"){for(var u=[],_=0;_<c._sounds.length;_++)u.push(c._sounds[_]._id);return u}else return[o]},_refreshBuffer:function(o){var c=this;return o._node.bufferSource=t.ctx.createBufferSource(),o._node.bufferSource.buffer=s[c._src],o._panner?o._node.bufferSource.connect(o._panner):o._node.bufferSource.connect(o._node),o._node.bufferSource.loop=o._loop,o._loop&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop||0),o._node.bufferSource.playbackRate.setValueAtTime(o._rate,t.ctx.currentTime),c},_cleanBuffer:function(o){var c=this,u=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!o.bufferSource)return c;if(t._scratchBuffer&&o.bufferSource&&(o.bufferSource.onended=null,o.bufferSource.disconnect(0),u))try{o.bufferSource.buffer=t._scratchBuffer}catch{}return o.bufferSource=null,c},_clearSound:function(o){var c=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);c||(o.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(o){this._parent=o,this.init()};n.prototype={init:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,c._sounds.push(o),o.create(),o},create:function(){var o=this,c=o._parent,u=t._muted||o._muted||o._parent._muted?0:o._volume;return c._webAudio?(o._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),o._node.gain.setValueAtTime(u,t.ctx.currentTime),o._node.paused=!0,o._node.connect(t.masterGain)):t.noAudio||(o._node=t._obtainHtml5Audio(),o._errorFn=o._errorListener.bind(o),o._node.addEventListener("error",o._errorFn,!1),o._loadFn=o._loadListener.bind(o),o._node.addEventListener(t._canPlayEvent,o._loadFn,!1),o._endFn=o._endListener.bind(o),o._node.addEventListener("ended",o._endFn,!1),o._node.src=c._src,o._node.preload=c._preload===!0?"auto":c._preload,o._node.volume=u*t.volume(),o._node.load()),o},reset:function(){var o=this,c=o._parent;return o._muted=c._muted,o._loop=c._loop,o._volume=c._volume,o._rate=c._rate,o._seek=0,o._rateSeek=0,o._paused=!0,o._ended=!0,o._sprite="__default",o._id=++t._counter,o},_errorListener:function(){var o=this;o._parent._emit("loaderror",o._id,o._node.error?o._node.error.code:0),o._node.removeEventListener("error",o._errorFn,!1)},_loadListener:function(){var o=this,c=o._parent;c._duration=Math.ceil(o._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),o._node.removeEventListener(t._canPlayEvent,o._loadFn,!1)},_endListener:function(){var o=this,c=o._parent;c._duration===1/0&&(c._duration=Math.ceil(o._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(o)),o._node.removeEventListener("ended",o._endFn,!1)}};var s={},a=function(o){var c=o._src;if(s[c]){o._duration=s[c].duration,f(o);return}if(/^data:[^;]+;base64,/.test(c)){for(var u=atob(c.split(",")[1]),_=new Uint8Array(u.length),p=0;p<u.length;++p)_[p]=u.charCodeAt(p);d(_.buffer,o)}else{var g=new XMLHttpRequest;g.open(o._xhr.method,c,!0),g.withCredentials=o._xhr.withCredentials,g.responseType="arraybuffer",o._xhr.headers&&Object.keys(o._xhr.headers).forEach(function(m){g.setRequestHeader(m,o._xhr.headers[m])}),g.onload=function(){var m=(g.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){o._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}d(g.response,o)},g.onerror=function(){o._webAudio&&(o._html5=!0,o._webAudio=!1,o._sounds=[],delete s[c],o.load())},l(g)}},l=function(o){try{o.send()}catch{o.onerror()}},d=function(o,c){var u=function(){c._emit("loaderror",null,"Decoding audio data failed.")},_=function(p){p&&c._sounds.length>0?(s[c._src]=p,f(c,p)):u()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(o).then(_).catch(u):t.ctx.decodeAudioData(o,_,u)},f=function(o,c){c&&!o._duration&&(o._duration=c.duration),Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var o=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),c=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=c?parseInt(c[1],10):null;if(o&&u&&u<9){var _=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!_&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=i,typeof nn<"u"?(nn.HowlerGlobal=e,nn.Howler=t,nn.Howl=i,nn.Sound=n):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=n)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,n=typeof n!="number"?s._pos[2]:n,typeof t=="number")s._pos=[t,i,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,i,n,s,a,l){var d=this;if(!d.ctx||!d.ctx.listener)return d;var f=d._orientation;if(i=typeof i!="number"?f[1]:i,n=typeof n!="number"?f[2]:n,s=typeof s!="number"?f[3]:s,a=typeof a!="number"?f[4]:a,l=typeof l!="number"?f[5]:l,typeof t=="number")d._orientation=[t,i,n,s,a,l],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(t,i,n,s,a,l);else return f;return d},Howl.prototype.init=function(t){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var a=n._getSoundIds(i),l=0;l<a.length;l++){var d=n._soundById(a[l]);if(d)if(typeof t=="number")d._stereo=t,d._pos=[t,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&e(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(t,0,0):d._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",d._id);else return d._stereo}return n},Howl.prototype.pos=function(t,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(t,i,n,s)}}),a;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof t=="number")a._pos=[t,i,n];else return a._pos;for(var l=a._getSoundIds(s),d=0;d<l.length;d++){var f=a._soundById(l[d]);if(f)if(typeof t=="number")f._pos=[t,i,n],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setPosition(t,i,n)),a._emit("pos",f._id);else return f._pos}return a},Howl.prototype.orientation=function(t,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(t,i,n,s)}}),a;if(i=typeof i!="number"?a._orientation[1]:i,n=typeof n!="number"?a._orientation[2]:n,typeof s>"u")if(typeof t=="number")a._orientation=[t,i,n];else return a._orientation;for(var l=a._getSoundIds(s),d=0;d<l.length;d++){var f=a._soundById(l[d]);if(f)if(typeof t=="number")f._orientation=[t,i,n],f._node&&(f._panner||(f._pos||(f._pos=a._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setOrientation(t,i,n)),a._emit("orientation",f._id);else return f._orientation}return a},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,n,s,a;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:t._panningModel});else return a=t._soundById(parseInt(i[0],10)),a?a._pannerAttr:t._pannerAttr;else i.length===2&&(n=i[0],s=parseInt(i[1],10));for(var l=t._getSoundIds(s),d=0;d<l.length;d++)if(a=t._soundById(l[d]),a){var f=a._pannerAttr;f={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:f.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:f.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:f.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:f.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:f.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:f.panningModel};var h=a._panner;h||(a._pos||(a._pos=t._pos||[0,0,-.5]),e(a,"spatial"),h=a._panner),h.coneInnerAngle=f.coneInnerAngle,h.coneOuterAngle=f.coneOuterAngle,h.coneOuterGain=f.coneOuterGain,h.distanceModel=f.distanceModel,h.maxDistance=f.maxDistance,h.refDistance=f.refDistance,h.rolloffFactor=f.rolloffFactor,h.panningModel=f.panningModel}return t},Sound.prototype.init=function(t){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,t.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(tr)),tr}var Ei=jp();class Kp{constructor(){this.config=null,this.appState=null,this.sounds={},this.isReady=!1,this.isUnlocked=!1,this.backgroundMusicStarted=!1,this.debug=!0,this.lastPlayedTimestamps={},this.activeLoops={dial:null},this.dialDragState={A:!1,B:!1};const e=w.get("config");if(this.config=e,e&&e.AUDIO_CONFIG){const t=e.AUDIO_CONFIG.sounds;for(const i in t)this.sounds[i]=new Ei.Howl(t[i])}else console.error("[AudioManager] AUDIO_CONFIG not found during construction. Sounds will not be loaded.")}init(){this.isReady||(this.config||(this.config=w.get("config")),Ei.Howler.volume(this.config.AUDIO_CONFIG.masterVolume),this.debug&&console.log("[AudioManager] Pre-initialized."),this.isReady=!0,document.addEventListener("click",()=>this._unlockAudio(),{once:!0}),document.addEventListener("touchstart",()=>this._unlockAudio(),{once:!0}))}postInitSubscribe(){this.appState=w.get("appState"),this.appState.subscribe("appStatusChanged",this.handleAppStatusChange.bind(this)),this.appState.subscribe("dialUpdated",this.handleDialUpdate.bind(this)),this.debug&&console.log("[AudioManager] Subscribed to appState events.")}_unlockAudio(){this.isUnlocked||(this.isUnlocked=!0,Ei.Howler.ctx&&Ei.Howler.ctx.state!=="running"&&Ei.Howler.ctx.resume().then(()=>{this.debug&&console.log("[AudioManager] Audio context resumed successfully.")}).catch(e=>console.error("[AudioManager] Error resuming audio context:",e)),this.debug&&console.log("[AudioManager] Audio context unlocked by user interaction."),this.backgroundMusicStarted||this.play("backgroundMusic"))}play(e){if(!this.isUnlocked){this.debug&&console.log(`[AudioManager] Playback for '${e}' BLOCKED, audio not yet unlocked.`);return}const t=Date.now(),n=(this.config.AUDIO_CONFIG.soundCooldowns||{})[e];if(n){const l=this.lastPlayedTimestamps[e]||0;if(t-l<n){this.debug&&console.log(`[AudioManager] Playback for '${e}' throttled.`);return}}const s=this.config.AUDIO_CONFIG.sounds[e],a=this.sounds[e];if(a&&s&&this.isReady){this.debug&&console.log(`[AudioManager] Playing sound: '${e}'`);const l=a.play();this.lastPlayedTimestamps[e]=t,e==="backgroundMusic"&&(this.backgroundMusicStarted=!0),s.fadeOutDuration&&l&&a.fade(a.volume(l),0,s.fadeOutDuration,l)}else if(this.debug){const l={soundKey:e,soundExists:!!a,soundConfigExists:!!s,isManagerReady:this.isReady,soundState:a?a.state():"N/A"};console.warn("[AudioManager] Sound not found or not ready.",l)}}startLoop(e){this.isUnlocked&&this.sounds[e]&&this.isReady&&!this.activeLoops[e]&&(this.debug&&console.log(`[AudioManager] Starting loop: ${e}`),this.activeLoops[e]=this.sounds[e].play())}stopLoop(e){this.isUnlocked&&this.sounds[e]&&this.isReady&&this.activeLoops[e]&&(this.debug&&console.log(`[AudioManager] Stopping loop: ${e}`),this.sounds[e].fade(this.sounds[e].volume(),0,100,this.activeLoops[e]),setTimeout(()=>{this.activeLoops[e]&&(this.sounds[e].stop(this.activeLoops[e]),this.sounds[e].volume(this.config.AUDIO_CONFIG.sounds[e].volume),this.activeLoops[e]=null)},100))}toggleMute(e){Ei.Howler.mute(e),this.debug&&console.log(`[AudioManager] Global mute set to: ${e}`)}handleAppStatusChange(e){this.isReady}handleDialUpdate({id:e,state:t}){if(!this.isReady||!this.appState||e!=="A"&&e!=="B")return;this.debug;const i=this.dialDragState[e],n=t.isDragging;if(n&&!i)this.startLoop("dialLoop");else if(!n&&i){const s=e==="A"?"B":"A";this.dialDragState[s]||this.stopLoop("dialLoop")}this.dialDragState[e]=n}}class Zp{constructor(){this.dom=null,this.appState=null,this.startupManager=null,this.audioManager=null,this.config=null,this.isMuted=!1,this.isAutoplayOn=!1,this.debug=!0}init(){this.dom=w.get("domElements"),this.appState=w.get("appState"),this.startupManager=w.get("startupSequenceManager"),this.audioManager=w.get("audioManager"),this.config=w.get("config"),this.debug&&console.log("[SidePanelManager] Initializing..."),this._setupPanelToggles(),this._setupTabControls(),this._populateSequenceTab(),this._populateStateTab(),this._setupGlobalStateListeners(),this._updateManualControlsVisibility(),this.debug&&console.log("[SidePanelManager] Initialization complete.")}_setupPanelToggles(){const e=document.getElementById("deck-toggle");e&&e.addEventListener("click",()=>{this.dom.controlDeck.classList.toggle("is-expanded"),this.dom.appWrapper.classList.toggle("left-panel-expanded")});const t=document.getElementById("seq-autoplay-toggle"),i=document.getElementById("seq-next-step"),n=document.getElementById("seq-play-all"),s=document.getElementById("seq-reset");t&&t.addEventListener("click",()=>{this.isAutoplayOn=!this.isAutoplayOn,this._updateManualControlsVisibility();const l=t.querySelector(".material-symbols-outlined");l&&(l.textContent=this.isAutoplayOn?"fast_forward":"rule"),t.classList.toggle("is-active",this.isAutoplayOn),this.isAutoplayOn?(this.startupManager.playAllRemaining(),this.debug&&console.log("[SidePanelManager] Autoplay toggled ON.")):(this.startupManager.pauseSequence(),this.debug&&console.log("[SidePanelManager] Autoplay toggled OFF."))}),i&&i.addEventListener("click",()=>this.startupManager.playNextPhase()),n&&n.addEventListener("click",()=>{this.isAutoplayOn=!0,this._updateManualControlsVisibility();const l=t.querySelector(".material-symbols-outlined");l&&(l.textContent="fast_forward"),t.classList.add("is-active"),this.startupManager.playAllRemaining()}),s&&s.addEventListener("click",()=>{this.startupManager.resetSequence(),this.debug&&console.log("[SidePanelManager] Sequence reset.")});const a=document.getElementById("audio-mute-toggle");a&&a.addEventListener("click",()=>{this.isMuted=!this.isMuted,this.audioManager.toggleMute(this.isMuted);const l=a.querySelector(".material-symbols-outlined");l&&(l.textContent=this.isMuted?"volume_off":"volume_up")})}_updateManualControlsVisibility(){const e=document.getElementById("seq-next-step"),t=document.getElementById("seq-play-all");e&&e.classList.toggle("hidden",this.isAutoplayOn),t&&t.classList.toggle("hidden",this.isAutoplayOn)}_setupTabControls(){document.querySelectorAll(".panel-tab-button").forEach(t=>{t.addEventListener("click",()=>{const i=t.closest(".expanded-view");if(!i)return;i.querySelectorAll(".panel-tab-button").forEach(a=>a.classList.remove("active")),i.querySelectorAll(".panel-tab-content").forEach(a=>a.classList.remove("active")),t.classList.add("active");const n=t.dataset.tab,s=i.querySelector(`#${n}`);s&&s.classList.add("active")})})}_populateSequenceTab(){const e=document.getElementById("sequence-tab");if(!e)return;let t='<ul class="sequence-list">';this.config.phaseConfigs.forEach(i=>{t+=`<li data-phase-num="${i.phase}"><span>P${i.phase}:</span> ${i.name}</li>`}),t+="</ul>",e.innerHTML=t}_populateStateTab(){const e=document.getElementById("state-tab");if(!e)return;const t=()=>{const i=this.appState.getAppStatus(),n=this.appState.getCurrentTheme(),s=this.appState.getTrueLensPower(),a=this.appState.getDialState("A"),l=this.appState.getDialState("B"),d=this.appState.getResistiveShutdownStage();e.innerHTML=`
                <ul>
                    <li><span>App Status:</span> <span class="state-value">${i}</span></li>
                    <li><span>Theme:</span> <span class="state-value">${n}</span></li>
                    <li><span>Lens Power:</span> <span class="state-value">${(s*100).toFixed(2)}%</span></li>
                    <li><span>Mood Hue:</span> <span class="state-value">${a.hue.toFixed(2)}°</span></li>
                    <li><span>Intensity:</span> <span class="state-value">${(l.hue/3.6).toFixed(2)}%</span></li>
                    <li><span>Resist Stage:</span> <span class="state-value">${d}</span></li>
                </ul>
            `};t(),this.appState.subscribe("appStatusChanged",t),this.appState.subscribe("themeChanged",t),this.appState.subscribe("trueLensPowerChanged",t),this.appState.subscribe("dialUpdated",t),this.appState.subscribe("resistiveShutdownStageChanged",t)}_setupGlobalStateListeners(){this.appState.subscribe("startup:phaseChanged",({numericPhase:e})=>{const t=document.getElementById("sequence-tab");t&&t.querySelectorAll("li").forEach(d=>{const f=parseInt(d.dataset.phaseNum,10);d.classList.remove("is-active","is-complete"),f<e?d.classList.add("is-complete"):f===e&&d.classList.add("is-active")});const i=this.appState.getAppStatus()==="interactive",n=document.getElementById("seq-autoplay-toggle"),s=document.getElementById("seq-next-step"),a=document.getElementById("seq-play-all"),l=document.getElementById("seq-reset");if(n&&(n.disabled=i),s&&(s.disabled=i),a&&(a.disabled=i),l&&(l.disabled=i),i&&n){n.classList.remove("is-active");const d=n.querySelector(".material-symbols-outlined");d&&(d.textContent="rule"),this.isAutoplayOn=!1,this._updateManualControlsVisibility()}}),this.appState.subscribe("appStatusChanged",e=>{if(e==="starting-up"){document.querySelectorAll(".panel-control-button").forEach(i=>i.disabled=!1);const t=document.getElementById("seq-autoplay-toggle");if(t){t.classList.remove("is-active");const i=t.querySelector(".material-symbols-outlined");i&&(i.textContent="rule")}this.isAutoplayOn=!1,this._updateManualControlsVisibility()}})}}li.registerPlugin(Rn,ho,kn);const Ts={root:document.documentElement,body:document.body,appWrapper:document.querySelector(".app-wrapper"),preloader:document.getElementById("preloader"),bootSeqList:document.getElementById("boot-sequence-list"),engageButtonContainer:document.getElementById("engage-button-container"),engageButton:document.getElementById("engage-button"),progressBar:document.getElementById("progress-bar"),controlDeck:document.getElementById("control-deck"),deckToggle:document.getElementById("deck-toggle"),allButtons:Array.from(document.querySelectorAll(".button-unit")),dialA:document.getElementById("dial-canvas-container-A"),dialB:document.getElementById("dial-canvas-container-B"),lcdA:document.getElementById("hue-lcd-A"),lcdB:document.getElementById("hue-lcd-B"),terminalContainer:document.querySelector(".terminal-block .actual-lcd-screen-element"),terminalLcdContentElement:document.getElementById("terminal-lcd-content"),colorLensGradient:document.getElementById("color-lens-gradient"),lensSuperGlow:document.getElementById("lens-super-glow"),logoContainer:document.getElementById("logo-container"),hueAssignmentColumns:Array.from(document.querySelectorAll(".hue-assignment-column[data-assignment-target]"))};function Qp(r){Ts.hueAssignmentColumns.forEach(e=>{const t=e.dataset.assignmentTarget,i=e.querySelector(".control-group-label.label-top");e.innerHTML="",i&&e.appendChild(i);for(let n=0;n<12;n++){const s=document.createElement("div");s.className="button-unit button-unit--toggle button-unit--s",s.dataset.toggleValue=n.toString(),s.setAttribute("role","radio"),s.setAttribute("aria-label",`Assign ${t.toUpperCase()} to Hue from Row ${n+1}`),s.innerHTML='<div class="light-container" aria-hidden="true"><div class="light"></div></div><div class="button-bg-frame"></div>',e.appendChild(s),r.addButton(s,t)}})}function Jp(){const r=w.get("audioManager");pu("buttonInteracted",({button:e})=>{const t=e.getGroupId(),i=e.getValue(),n=e.getElement().getAttribute("aria-label");if(t==="system-power"&&i==="off"?r.play("powerOff"):t==="light"&&e.isSelected()?r.play("bigOn"):r.play("buttonPress"),t==="light")du(i==="on"?"light":"dark");else if(t==="system-power")i==="off"?Vr.handlePowerOffClick():i==="on"&&uu()>0&&hu(0);else if(["env","lcd","logo","btn"].includes(t)){const s=Te[parseInt(i,10)];cu(t,s)}else n==="Scan Button 1"?xe("requestTerminalMessage",{type:"block",messageKey:"BTN1_MESSAGE"}):n==="Scan Button 2"?xe("requestTerminalMessage",{type:"block",messageKey:"BTN2_MESSAGE"}):n==="Scan Button 3"?xe("requestTerminalMessage",{type:"block",messageKey:"BTN3_MESSAGE"}):n==="Scan Button 4"&&xe("requestTerminalMessage",{type:"block",messageKey:"BTN4_MESSAGE"})}),document.body.addEventListener("click",e=>{const t=e.target.closest(".button-unit");t&&w.get("buttonManager").handleInteraction(t)})}function e_(){if(window.HUE9000_INITIALIZED)return;window.HUE9000_INITIALIZED=!0,console.log("[Main INIT] HUE 9000 Project Decouple Initializing..."),w.register("appState",ah),w.register("domElements",Ts);const r=w.get("audioManager"),e=new Pp,t=new Mp,i=new Fp,n=new Ip,s=new Op,a=new xp,l=new Hp,d=new Gp,f=new Yp,h=new Wp,o=new qp,c=new Zp;w.register("themeManager",e),w.register("lcdUpdater",t),w.register("dynamicStyleManager",i),w.register("buttonManager",n),w.register("dialManager",s),w.register("lensManager",a),w.register("ambientAnimationManager",l),w.register("phaseRunner",d),w.register("startupSequenceManager",f),w.register("moodMatrixManager",h),w.register("intensityDisplayManager",o),w.register("sidePanelManager",c),w.register("resistiveShutdownController",Vr),w.register("terminalManager",xa),fu("loading"),r.postInitSubscribe(),f.init(),d.init(),[e,t,i,n,s,a,l,h,o,c,Vr,xa].forEach(_=>{typeof _.init=="function"&&_.init()}),Qp(n),n.discoverButtons(Ts.allButtons),Jp(),f.start(!0),console.log("[Main INIT] HUE 9000 Initialization Complete.")}document.addEventListener("DOMContentLoaded",()=>{w.register("gsap",li),w.register("config",{...zf,phaseConfigs:Gr});const r=new Kp;w.register("audioManager",r),r.init(),wp(Ts,li).then(e_)});
